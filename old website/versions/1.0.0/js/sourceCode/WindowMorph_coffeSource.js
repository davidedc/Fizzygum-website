// Generated by CoffeeScript 1.10.0
window.WindowMorph_coffeSource = '# WindowMorph //////////////////////////////////////////////////////\n\nclass WindowMorph extends BoxMorph\n  # this is so we can create objects from the object class name \n  # (for the deserialization process)\n  namedClasses[@name] = @prototype\n\n  label: null\n  topLeftButton: null\n  labelContent: null\n  resizer: null\n  padding: null\n\n  constructor: (@labelContent, @topLeftButton) ->\n    super()\n    # override inherited properties:\n    @silentRawSetExtent new Point(WorldMorph.preferencesAndSettings.handleSize * 20,\n      WorldMorph.preferencesAndSettings.handleSize * 20 * 2 / 3.5).round()\n    @padding = if WorldMorph.preferencesAndSettings.isFlat then 1 else 5\n    @color = new Color 172, 172, 172\n    @buildAndConnectChildren()\n  \n  buildAndConnectChildren: ->\n    # label\n    @label = new TextMorph @labelContent\n    @label.fontSize = WorldMorph.preferencesAndSettings.menuFontSize\n    @label.isBold = true\n    @label.color = new Color 255, 255, 255\n    @add @label\n\n    # upper-left button, often a close button\n    # but it can be anything\n    if !@topLeftButton?\n      @topLeftButton = new CloseIconButtonMorph @\n    @add @topLeftButton\n\n    @resizer = new HandleMorph @\n\n    @layoutLabelAndTopLeftButton()\n\n  \n  layoutLabelAndTopLeftButton: ->\n\n    closeIconSize = 16\n\n    # label\n    labelLeft = @left() + @padding + closeIconSize + @padding\n    labelTop = @top() + @padding\n    labelRight = @right() - @padding\n    labelWidth = labelRight - labelLeft\n    if @label.parent == @\n      @label.fullRawMoveTo new Point labelLeft, labelTop\n      @label.rawSetWidth labelWidth\n      if @label.height() > @height() - 50\n        @silentRawSetHeight @label.height() + 50\n        # TODO run the tests when commenting this out\n        # because this one point to the Morph implementation\n        # which is empty.\n        @reLayout()\n        \n        @changed()\n        @resizer.silentUpdateResizerHandlePosition()\n    labelBottom = labelTop + @label.height() + 2\n\n    # close button\n    if @topLeftButton.parent == @\n      @topLeftButton.fullRawMoveTo new Point @left() + @padding, @top() + @padding\n      @topLeftButton.rawSetHeight closeIconSize\n      @topLeftButton.rawSetWidth closeIconSize\n\n\n    @changed()\n\n  layoutSubmorphs: (morphStartingTheChange = null) ->\n    super morphStartingTheChange\n    @layoutLabelAndTopLeftButton()\n\n\n';
