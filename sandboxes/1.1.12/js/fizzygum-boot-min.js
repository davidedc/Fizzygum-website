var BUILDFLAG_LOAD_TESTS,MixedClassKeywords,boot,buildVersion,createWorldAndStartStepping,extend,framePacedPromises,loadJSFilePromise,nil,noOperation,numberOfSourceBatches,srcLoadCompileDebugWrites,stillLoadingSources,tick,uniqueKeepOrder,untick,world,hasProp={}.hasOwnProperty,indexOf=[].indexOf;BUILDFLAG_LOAD_TESTS=!1,numberOfSourceBatches=8,world=nil=void 0,framePacedPromises=[],srcLoadCompileDebugWrites=!1,stillLoadingSources=nil,MixedClassKeywords=["onceAddedClassProperties","included"],noOperation=function(){return nil},loadJSFilePromise=function(e){return new Promise((function(t,i){var n;return(n=document.createElement("script")).src=e,n.async=!0,n.onload=function(){return"function"==typeof addLineToLogDiv&&addLineToLogDiv("loaded and executed "+this.src),srcLoadCompileDebugWrites&&console.log("loaded and executed "+this.src),t(n)},document.head.appendChild(n),n.onerror=function(){return i(n)}}))},boot=function(){var e;return stillLoadingSources=!0,window.ceilPixelRatio=Math.ceil(window.devicePixelRatio),e=[loadJSFilePromise("js/pre-compiled.js",loadJSFilePromise("js/libs/coffee-script_2.0.3.js"))],BUILDFLAG_LOAD_TESTS&&e.push(loadJSFilePromise("js/libs/Mousetrap.min.js")),(BUILDFLAG_LOAD_TESTS||window.location.href.includes("generatePreCompiled"))&&(e.push(loadJSFilePromise("js/libs/FileSaver.min.js")),e.push(loadJSFilePromise("js/libs/jszip.min.js")),e.push(loadJSFilePromise("js/tests/testsManifest.js")),e.push(loadJSFilePromise("js/tests/testsAssetsManifest.js"))),Promise.all(e).then((function(){if(window.preCompiled)return createWorldAndStartStepping()})).then((function(){return Promise.all([loadJSFilePromise("js/coffeescript-sources/Class_coffeSource.js"),loadJSFilePromise("js/coffeescript-sources/Mixin_coffeSource.js"),loadJSFilePromise("js/src/loading-and-compiling-coffeescript-sources-min.js"),loadJSFilePromise("js/src/logging-div-min.js")])})).then((function(){return eval.call(window,compileFGCode(window.Mixin_coffeSource,!0)),eval.call(window,compileFGCode(window.Class_coffeSource,!0))})).then((function(){return loadJSFilePromise("js/src/dependencies-finding-min.js")})).then((function(){return loadJSFilesWithCoffeescriptSourcesPromise()})).then((function(){return window.preCompiled?storeSourcesAndPotentiallyCompileThemAndExecuteThem(!0).then((function(){if(stillLoadingSources=!1,"function"==typeof world.getParameterPassedInURL?world.getParameterPassedInURL("startupActions"):void 0)return world.nextStartupAction()})):(addLogDiv(),storeSourcesAndPotentiallyCompileThemAndExecuteThem(!1).then((function(){stillLoadingSources=!1})).then((function(){if(createWorldAndStartStepping(),"function"==typeof world.getParameterPassedInURL?world.getParameterPassedInURL("startupActions"):void 0)return world.nextStartupAction()})))}))},createWorldAndStartStepping=function(){var e;return new WorldMorph(worldCanvas,!window.location.href.includes("worldWithSystemTestHarness")),world.isDevMode=!0,(e=function(){return world.doOneCycle(),window.requestAnimationFrame(e)})(),window.location.href.includes("worldWithSystemTestHarness")&&"undefined"!=typeof SystemTestsControlPanelUpdater&&null!==SystemTestsControlPanelUpdater&&new SystemTestsControlPanelUpdater,window.menusHelper=new MenusHelper,world.removeSpinnerAndFakeDesktop(),world.createDesktop()},extend=function(e,t){var i,n;for(n in i=function(){this.constructor=e},t)hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},Array.prototype.shallowCopy=function(){return this.concat()},Array.prototype.deepCopy=function(e,t,i,n){var o,r,s,a,l,c;if((r=t.indexOf(this))>=0)return e?"$"+r:i[r];for(l=t.length,t.push(this),o=[],i.push(o),s=a=0,c=this.length;0<=c?a<c:a>c;s=0<=c?++a:--a)null==this[s]?o[s]=nil:"object"==typeof this[s]?(this[s].deepCopy,o[s]=this[s].deepCopy(e,t,i,n)):o[s]=this[s];return e?"$"+l:o},Array.prototype.chunk=function(e){var t;return t=this,[].concat.apply([],t.map((function(i,n){return n%e?[]:[t.slice(n,n+e)]})))},Array.prototype.remove=function(e){var t;return-1!==(t=this.indexOf(e))&&this.splice(t,1),this},Array.prototype.unique=function(){var e,t,i,n,o,r;for(i={},t=e=0,n=this.length;0<=n?e<n:e>n;t=0<=n?++e:--e)i[this[t]]=this[t];for(t in o=[],i)r=i[t],o.push(r);return o},uniqueKeepOrder=function(e,t,i){return i.indexOf(e)===t},Array.prototype.uniqueKeepOrder=function(){return this.filter(uniqueKeepOrder)},Object.prototype.augmentWith=function(e,t){var i,n,o;for(i in e)o=e[i],indexOf.call(MixedClassKeywords,i)<0&&(this[i]=o);return null!=(n=e.onceAddedClassProperties)&&n.apply(this,[t]),this},Object.prototype.addInstanceProperties=function(e,t){var i,n,o;for(i in t)hasProp.call(t,i)&&(o=t[i],indexOf.call(MixedClassKeywords,i)<0&&(this.prototype[i]=o,null!=e&&"function"==typeof o&&(this.prototype[i+"_class_injected_in"]=e,srcLoadCompileDebugWrites&&console.log("addingClassToMixin "+i+"_class_injected_in"))));return null!=(n=t.included)&&n.apply(this),this},Object.prototype.hashCode=function(){var e,t,i,n,o;if(e=0,0===(o=this.toString()).length)return e;for(t=i=0,n=o.length;0<=n?i<n:i>n;t=0<=n?++i:--i)e=(e<<5)-e+o.charCodeAt(t),e&=e;return e},CanvasRenderingContext2D.prototype.useLogicalPixelsUntilRestore=function(){return this.scale(ceilPixelRatio,ceilPixelRatio)},CanvasRenderingContext2D.prototype.rebuildDerivedValue=function(e,t){return e[t]=e[t.replace("Context","")].getContext("2d")},CanvasRenderingContext2D.prototype.clipToRectangle=function(e,t,i,n){return this.beginPath(),this.moveTo(Math.round(e),Math.round(t)),this.lineTo(Math.round(e+i),Math.round(t)),this.lineTo(Math.round(e+i),Math.round(t+n)),this.lineTo(Math.round(e),Math.round(t+n)),this.lineTo(Math.round(e),Math.round(t)),this.closePath(),this.clip()},CanvasGradient.prototype.deepCopy=function(e,t,i,n){var o,r,s;return(r=t.indexOf(this))>=0?e?"$"+r:i[r]:(s=t.length,t.push(this),o=nil,i.push(o),e?"$"+s:o)},Math.getRandomInt=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1)+e)},Number.prototype.toRadians=function(){return this*Math.PI/180},Number.prototype.toDegrees=function(){return 180*this/Math.PI},tick="âœ“ ",untick="    ",void 0===String.prototype.isTicked&&(String.prototype.isTicked=function(){return this.startsWith(tick)}),void 0===String.prototype.tick&&(String.prototype.tick=function(){return this.isTicked()?this:this.isUnticked()?this.toggleTick():tick+this}),void 0===String.prototype.untick&&(String.prototype.untick=function(){return this.startsWith(untick)?this:this.isTicked()?this.toggleTick():untick+this}),void 0===String.prototype.isUnticked&&(String.prototype.isUnticked=function(){return!this.isTicked()}),void 0===String.prototype.toggleTick&&(String.prototype.toggleTick=function(){return this.isTicked()?this.replace(tick,untick):this.startsWith(untick)?this.replace(untick,tick):tick+this}),void 0===String.prototype.isLetter&&(String.prototype.isLetter=function(){return 1===this.length&&this.match(/[a-z]/i)}),HTMLCanvasElement.prototype.deepCopy=function(e,t,i,n){var o,r,s;return(r=t.indexOf(this))>=0?e?"$"+r:i[r]:(s=t.length,t.push(this),(o=HTMLCanvasElement.createOfPhysicalDimensions(new Point(this.width,this.height))).getContext("2d").drawImage(this,0,0),e&&(o={}),i.push(o),e?(o.className="Canvas",o.width=this.width,o.height=this.height,o.data=this.toDataURL(),"$"+s):o)},HTMLCanvasElement.createOfPhysicalDimensions=function(e){var t,i;return null!=e&&e.debugIfFloats(),i=e||{x:0,y:0},(t=document.createElement("canvas")).width=Math.ceil(i.x),t.height=Math.ceil(i.y),t},Date.prototype.deepCopy=function(e,t,i,n){var o,r,s;return(r=t.indexOf(this))>=0?e?"$"+r:i[r]:(s=t.length,t.push(this),o=new Date(this.getTime()),i.push(o),e?"$"+s:o)},buildVersion="version of Mon Oct 26 21:05:58 GMT 2020";