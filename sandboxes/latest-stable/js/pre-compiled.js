window.preCompiled=!0;var DeepCopierMixin,indexOf=[].indexOf,HighlightableMixin,ControllerMixin,BackBufferMixin,UpperRightInternalHaloMixin,ClippingAtRectangularBoundsMixin,GridPositioningOfAddedShortcutsMixin,KeepIconicDesktopSystemLinksBackMixin,CreateShortcutOfDroppedItemsMixin,WidgetCreatorAndSmartPlacerOnClickMixin,KeepsRatioWhenInVerticalStackMixin,ParentStainerMixin,ChildrenStainerMixin;DeepCopierMixin={onceAddedClassProperties:function(e){return this.addInstanceProperties(e,{deepCopy:function(e,t,n,o){var i,r,l,a;if((r=t.indexOf(this))>=0)return e?"$"+r:n[r];if(this instanceof Widget&&indexOf.call(o,this)<0)return e?"$EXTERNAL"+this.uniqueIDString():this;for(a in l=t.length,t.push(this),i=this.createPristineObjOfSameTypeAsThisOne(e),n.push(i),this)this.hasOwnProperty(a)&&(null==this[a]?i[a]=nil:"object"==typeof this[a]?null!=this[a].rebuildDerivedValue?i[a]=nil:(null==this[a].deepCopy&&(console.dir(this),console.log(a)),i[a]=this[a].deepCopy(e,t,n,o)):"instanceNumericID"!==a&&(i[a]=this[a]));return e?"$"+l:(i.rebuildDerivedValues(this),null!=this.alignCopiedMorphToBrokenInfoDataStructures&&this.alignCopiedMorphToBrokenInfoDataStructures(i),null!=this.alignCopiedMorphToSteppingStructures&&this.alignCopiedMorphToSteppingStructures(i),null!=this.alignCopiedMorphToReferenceTracker&&this.alignCopiedMorphToReferenceTracker(i),"function"==typeof i.justBeenCopied&&i.justBeenCopied(),i)},rebuildDerivedValues:function(e){var t,n,o;for(t in o=[],this)this.hasOwnProperty(t)&&null!=(null!=(n=e[t])?n.rebuildDerivedValue:void 0)?o.push(e[t].rebuildDerivedValue(this,t)):o.push(void 0);return o},createPristineObjOfSameTypeAsThisOne:function(e){var t;return"object"==typeof this?("function"==typeof(t=Object.create(this.constructor.prototype)).registerThisInstance&&t.registerThisInstance(),e&&(t.className=this.constructor.name),null!=t.assignUniqueID&&t.assignUniqueID(),t):this}})}},window.LayoutSpec=function(){window.LayoutSpec.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.LayoutSpec,"name",{value:"LayoutSpec"}),window.LayoutSpec.__super__=Object.prototype,window.LayoutSpec.ATTACHEDAS_FREEFLOATING=1e5,window.LayoutSpec.ATTACHEDAS_INSET=100001,window.LayoutSpec.ATTACHEDAS_VERTICAL_STACK_ELEMENT=100002,window.LayoutSpec.ATTACHEDAS_WINDOW_CONTENT=100003,window.LayoutSpec.ATTACHEDAS_STACK_HORIZONTAL_VERTICALALIGNMENTS_UNDEFINED=100004,window.LayoutSpec.ATTACHEDAS_STACK_HORIZONTAL_VERTICALALIGNMENTS_STRETCH=100005,window.LayoutSpec.ATTACHEDAS_STACK_HORIZONTAL_VERTICALALIGNMENTS_TOP=100006,window.LayoutSpec.ATTACHEDAS_STACK_HORIZONTAL_VERTICALALIGNMENTS_CENTER=100007,window.LayoutSpec.ATTACHEDAS_STACK_HORIZONTAL_VERTICALALIGNMENTS_BOTTOM=100008,window.LayoutSpec.SPREADABILITY_HANDLES=1,window.LayoutSpec.SPREADABILITY_NONE=10,window.LayoutSpec.SPREADABILITY_LOW=100,window.LayoutSpec.SPREADABILITY_MEDIUM=1e3,window.LayoutSpec.SPREADABILITY_SPACERS=1e8,window.LayoutSpec.instances=new Set,window.PreferredSize=function(){window.PreferredSize.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PreferredSize,"name",{value:"PreferredSize"}),window.PreferredSize.__super__=Object.prototype,window.PreferredSize.THIS_ONE_I_HAVE_NOW=-1,window.PreferredSize.DONT_MIND=-2,window.PreferredSize.instances=new Set,window.VerticalStackLayoutSpec=function(e){return this.elasticity=e,"function"==typeof this.registerThisInstance&&this.registerThisInstance(),nil},Object.defineProperty(window.VerticalStackLayoutSpec,"name",{value:"VerticalStackLayoutSpec"}),window.VerticalStackLayoutSpec.__super__=Object.prototype,window.VerticalStackLayoutSpec.augmentWith(window.DeepCopierMixin,"VerticalStackLayoutSpec"),window.VerticalStackLayoutSpec.prototype.stack=nil,window.VerticalStackLayoutSpec.prototype.element=nil,window.VerticalStackLayoutSpec.prototype.widthOfStackWhenAdded=nil,window.VerticalStackLayoutSpec.prototype.widthOfElementWhenAdded=nil,window.VerticalStackLayoutSpec.prototype.elasticity=1,window.VerticalStackLayoutSpec.prototype.alignment="left",window.VerticalStackLayoutSpec.prototype.rememberInitialDimensions=function(e,t){var n,o;return this.element=e,this.stack=t,n=this.stack.availableWidthForContents(),(o=this.element.widthWithoutSpacing())>n?(this.widthOfElementWhenAdded=n,this.elasticity=1):this.widthOfElementWhenAdded=o,this.widthOfStackWhenAdded=n},window.VerticalStackLayoutSpec.prototype.getWidthInStack=function(){var e,t,n;return t=(e=this.stack.availableWidthForContents())*this.widthOfElementWhenAdded/this.widthOfStackWhenAdded-this.widthOfElementWhenAdded,n=this.widthOfElementWhenAdded+this.elasticity*t,n=Math.round(n),Math.min(n,e)},window.VerticalStackLayoutSpec.prototype.addMorphSpecificMenuEntries=function(e,t){return t.addLine(),t.addMenuItem("layout in stack ➜",!1,this,"vertStackMenu","")},window.VerticalStackLayoutSpec.prototype.vertStackMenu=function(e,t,n,o,i){var r;return(r=new MenuMorph(e,!1,t,!0,!0,nil)).addMenuItem("base width...",!0,this,"baseWidthPopout",""),r.addMenuItem("elasticity...",!0,this,"elasticityPopout",""),"left"!==this.alignment&&r.addMenuItem("align left",!0,this,"setAlignmentToLeft"),"right"!==this.alignment&&r.addMenuItem("align right",!0,this,"setAlignmentToRight"),"center"!==this.alignment&&r.addMenuItem("align center",!0,this,"setAlignmentToCenter"),r.popUpAtHand()},window.VerticalStackLayoutSpec.prototype.setAlignmentToLeft=function(){if("left"!==this.alignment)return this.alignment="left",this.element.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.VerticalStackLayoutSpec.prototype.setAlignmentToRight=function(){if("right"!==this.alignment)return this.alignment="right",this.element.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.VerticalStackLayoutSpec.prototype.setAlignmentToCenter=function(){if("enter"!==this.alignment)return this.alignment="center",this.element.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.VerticalStackLayoutSpec.prototype.elasticityPopout=function(e,t,n,o,i,r,l){return this.element.prompt(e.parent.title+"\nelasticity:",this,"setElasticity",(100*this.elasticity).toString(),nil,0,100,!0)},window.VerticalStackLayoutSpec.prototype.setElasticity=function(e,t){var n;if(n=null!=(null!=t?t.getValue:void 0)?t.getValue():e,n=Number(n),n/=100,this.elasticity!==n)return this.elasticity=n,this.element.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.VerticalStackLayoutSpec.prototype.baseWidthPopout=function(e,t,n,o,i,r,l){return this.element.prompt(e.parent.title+"\nbase width:",this,"setWidthOfElementWhenAdded",this.widthOfElementWhenAdded.toString(),nil,10,1e3,!0)},window.VerticalStackLayoutSpec.prototype.setWidthOfElementWhenAdded=function(e,t){var n;if(n=null!=(null!=t?t.getValue:void 0)?t.getValue():e,(n=Math.round(n))&&this.widthOfElementWhenAdded!==n)return this.widthOfElementWhenAdded=n,this.element.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.VerticalStackLayoutSpec.instances=new Set,window.WindowContentLayoutSpec=function(e,t,n){this.preferredStartingWidth=e,this.preferredStartingHeight=t,WindowContentLayoutSpec.__super__.constructor.call(this,n),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowContentLayoutSpec,"name",{value:"WindowContentLayoutSpec"}),window.WindowContentLayoutSpec.__super__=window.VerticalStackLayoutSpec.prototype,window.WindowContentLayoutSpec=extend(window.WindowContentLayoutSpec,window.VerticalStackLayoutSpec),window.WindowContentLayoutSpec.augmentWith(window.DeepCopierMixin,"WindowContentLayoutSpec"),window.WindowContentLayoutSpec.prototype.preferredStartingWidth=nil,window.WindowContentLayoutSpec.prototype.preferredStartingHeight=nil,window.WindowContentLayoutSpec.prototype.canSetHeightFreely=!0,window.WindowContentLayoutSpec.prototype.resizerCanOverlapContents=!0,window.WindowContentLayoutSpec.prototype.rememberInitialDimensions=function(e,t){var n;if(this.element=e,this.stack=t,WindowContentLayoutSpec.__super__.rememberInitialDimensions.apply(this,arguments),n=this.stack.availableWidthForContents(),this.preferredStartingWidth===PreferredSize.DONT_MIND)return this.widthOfElementWhenAdded=n,this.elasticity=1},window.WindowContentLayoutSpec.instances=new Set,window.TreeNode=function(e=nil,t=[]){this.parent=e,this.children=t,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TreeNode,"name",{value:"TreeNode"}),window.TreeNode.__super__=Object.prototype,window.TreeNode.prototype.parent=nil,window.TreeNode.prototype.children=nil,window.TreeNode.prototype.rootCache=nil,window.TreeNode.prototype.rootCacheChecker=nil,window.TreeNode.prototype.checkFirstParentClippingAtBoundsCache=nil,window.TreeNode.prototype.cachedFirstParentClippingAtBounds=nil,window.TreeNode.prototype.gcSessionIdMark=0,window.TreeNode.prototype.gcReferenceExaminedSessionIdMark=0,window.TreeNode.prototype.toString=function(){return"a TreeNode["+(null!=this.children?this.children.length:"-")+"]"},window.TreeNode.prototype.addChild=function(e,t=nil){return WorldMorph.numberOfAddsAndRemoves++,this.invalidateFullBoundsCache(this),this.invalidateFullClippedBoundsCache(this),null==t?this.children.push(e):this.children.splice(t,0,e),e.parent=this},window.TreeNode.prototype.moveAsLastChild=function(){var e,t;if(null!=this.parent&&-1!==(t=this.parent.children.indexOf(this))&&t!==this.parent.children.length-1)return this.parent.children.splice(t,1),this.parent.children.push(this),"function"==typeof(e=this.parent).childMovedInFrontOfOthers?e.childMovedInFrontOfOthers(this):void 0},window.TreeNode.prototype.removeChild=function(e){return WorldMorph.numberOfAddsAndRemoves++,this.invalidateFullBoundsCache(this),this.invalidateFullClippedBoundsCache(this),this.children.remove(e),e.parent=nil},window.TreeNode.prototype.markReferenceAsVisited=function(e){return this.gcReferenceExaminedSessionIdMark=e},window.TreeNode.prototype.wasReferenceVisited=function(e){return this.gcReferenceExaminedSessionIdMark===e},window.TreeNode.prototype.markItAndItsParentsAsReachable=function(e){if(this.gcSessionId=e,null!=this.parent){if(this.parent.gcSessionId===e)return;if(this.isDirectlyInBasement())return;return this.parent.markItAndItsParentsAsReachable(e)}},window.TreeNode.prototype.isOrphan=function(){var e;return(e=this.root())!==world&&e!==world.hand},window.TreeNode.prototype.isDirectlyInBasement=function(){var e,t;return(null!=(e=this.parent)&&null!=(t=e.parent)?t.parent:void 0)instanceof BasementWdgt},window.TreeNode.prototype.isInBasement=function(){return 1===this.allParentsBottomToTopSuchThat((function(e){return e instanceof BasementWdgt})).length},window.TreeNode.prototype.isInBasementButReachable=function(e){return this.gcSessionId===e||(this.parent.gcSessionId===e||!(this.parent instanceof BasementWdgt)&&this.parent.isInBasementButReachable(e))},window.TreeNode.prototype.SLOWroot=function(){return null!=this.parent?this.parent.SLOWroot():this},window.TreeNode.prototype.root=function(){var e,t;return this.rootCacheChecker===WorldMorph.numberOfAddsAndRemoves||(t=this,null!=this.parent&&(t=this.parent.root()),this.rootCacheChecker=WorldMorph.numberOfAddsAndRemoves,this.rootCache=t),e=this.rootCache,world.doubleCheckCachedMethodsResults&&e!==this.SLOWroot()&&alert("root is broken"),e},window.TreeNode.prototype.pathOfChildrenPositionsRelativeToWorld=function(e){return null==e&&(e={actualPath:[],lengthOfChildrenArrays:[]}),null!=this.parent?(e.actualPath.push(this.parent.children.indexOf(this)),e.lengthOfChildrenArrays.push(this.parent.children.length),this.parent.pathOfChildrenPositionsRelativeToWorld(e)):this===world?(e.actualPath.reverse(),e.lengthOfChildrenArrays.reverse(),e):nil},window.TreeNode.prototype.allChildrenBottomToTop=function(){var e;return e=[this],this.children.forEach((function(t){return e=e.concat(t.allChildrenBottomToTop())})),e},window.TreeNode.prototype.allChildrenTopToBottomSuchThat=function(e){var t,n,o,i;for(t=[],i=n=this.children.length-1;n>=0;i=n+=-1)o=this.children[i],t=t.concat(o.allChildrenTopToBottomSuchThat(e));return e.call(nil,this)&&t.push(this),t},window.TreeNode.prototype.forAllChildrenBottomToTop=function(e){if(e.call(nil,this),this.children.length)return this.children.forEach((function(t){return t.forAllChildrenBottomToTop(e)}))},window.TreeNode.prototype.allParentsBottomToTop=function(){var e;return null!=this.parent?((e=this.parent.allParentsBottomToTop()).push(this),e):[this]},window.TreeNode.prototype.allParentsTopToBottom=function(){return this.allParentsBottomToTop().reverse()},window.TreeNode.prototype.allParentsBottomToTopSuchThat=function(e){var t;return t=[],null!=this.parent&&(t=this.parent.allParentsBottomToTopSuchThat(e)),e.call(nil,this)&&t.push(this),t},window.TreeNode.prototype.allParentsTopToBottomSuchThat=function(e){var t;return t=[],e.call(nil,this)&&(t=[this]),null!=this.parent&&(t=t.concat(this.parent.allParentsTopToBottomSuchThat(e))),t},window.TreeNode.prototype.isAncestorOf=function(e){var t;if(null==e&&"undefined"!=typeof Automator&&null!==Automator&&(console.log("failed to find morph in test: "+world.automator.name),console.log("trying to find item with text label: "+world.automator.player.getCommandBeingPlayed().textLabelOfClickedItem),console.log("...you can likely fix the test by correcting the label above in the test")),e===this)return!0;for(t=e;null!=t.parent;)if((t=t.parent)===this)return!0;return!1},window.TreeNode.prototype.amITheFirstSibling=function(){return this.parent.children[0]===this},window.TreeNode.prototype.amITheLastSibling=function(){return this.parent.children[this.parent.children.length-1]===this},window.TreeNode.prototype.positionAmongSiblings=function(){var e,t,n,o;for(o=0,e=0,t=(n=this.parent.children).length;e<t;e++){if(n[e]===this)return o;o++}},window.TreeNode.prototype.siblingBeforeMeIsA=function(e){return!this.amITheFirstSibling()&&this.parent.children[this.positionAmongSiblings()-1]instanceof e},window.TreeNode.prototype.siblingAfterMeIsA=function(e){return!this.amITheLastSibling()&&this.parent.children[this.positionAmongSiblings()+1]instanceof e},window.TreeNode.prototype.howManySiblingsBeforeMeSuchThat=function(e){var t,n,o,i,r;for(r=0,n=0,o=(i=this.parent.children).length;n<o;n++){if((t=i[n])===this)return r;e.call(nil,t)&&r++}return r},window.TreeNode.prototype.lastSiblingBeforeMeSuchThat=function(e){var t,n,o,i,r,l;for(l=0,o=nil,n=0,i=(r=this.parent.children).length;n<i&&(t=r[n])!==this;n++)e.call(nil,t)&&(o=l),l++;return null!=o?this.parent.children[o]:nil},window.TreeNode.prototype.firstSiblingAfterMeSuchThat=function(e){var t,n,o,i,r;for(r=!1,n=0,o=(i=this.parent.children).length;n<o;n++){if(t=i[n],r&&e.call(nil,t))return t;t===this&&(r=!0)}return nil},window.TreeNode.prototype.childrenNotHandlesNorCarets=function(e=this){return e.children.filter((function(e){return!(e instanceof HandleMorph||e instanceof CaretMorph)}))},window.TreeNode.prototype.nthChildSuchThat=function(e,t){var n,o,i,r,l;for(r=0,n=0,o=(i=this.children).length;n<o;n++)if(l=i[n],t.call(nil,l)&&++r===e)return l;return nil},window.TreeNode.prototype.firstChildSuchThat=function(e){return this.nthChildSuchThat(1,e)},window.TreeNode.prototype.SLOWfirstParentClippingAtBounds=function(e=this){return null!=e.parent?e.parent.clipsAtRectangularBounds?e.parent:e.parent.SLOWfirstParentClippingAtBounds():nil},window.TreeNode.prototype.firstParentClippingAtBounds=function(e=this){var t;return this.checkFirstParentClippingAtBoundsCache===WorldMorph.numberOfAddsAndRemoves&&world.doubleCheckCachedMethodsResults&&this.cachedFirstParentClippingAtBounds!==this.SLOWfirstParentClippingAtBounds(e)&&alert("firstParentClippingAtBounds is broken (cached)"),t=null!=e.parent?e.parent.clipsAtRectangularBounds?e.parent:e.parent.firstParentClippingAtBounds():nil,world.doubleCheckCachedMethodsResults&&t!==this.SLOWfirstParentClippingAtBounds(e)&&alert("firstParentClippingAtBounds is broken (uncached)"),this.checkFirstParentClippingAtBoundsCache=WorldMorph.numberOfAddsAndRemoves,this.cachedFirstParentClippingAtBounds=t},window.TreeNode.prototype.parentThatIsA=function(...e){var t,n,o;for(n=0,o=e.length;n<o;n++)if(this instanceof(t=e[n]))return[this,t];return this.parent?this.parent.parentThatIsA(...e):nil},window.TreeNode.prototype.topWdgtSuchThat=function(e){var t,n,o;if(0===this.children.length)return e.call(nil,this)?this:nil;for(o=n=this.children.length-1;n>=0;o=n+=-1)if(null!=(t=this.children[o].topWdgtSuchThat(e)))return t;return e.call(nil,this)?this:nil},window.TreeNode.prototype.topmostChildSuchThat=function(e){var t,n,o;for(o=t=this.children.length-1;t>=0;o=t+=-1)if(n=this.children[o],e.call(nil,n))return n;return nil},window.TreeNode.prototype.collectAllChildrenBottomToTopSuchThat=function(e){var t;return t=[],e.call(nil,this)&&(t=[this]),this.children.forEach((function(n){return t=t.concat(n.collectAllChildrenBottomToTopSuchThat(e))})),t},window.TreeNode.instances=new Set,window.Color=function(e=0,t=0,n=0,o){this.r=e,this.g=t,this.b=n,this.a=o||(0===o?0:1),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Color,"name",{value:"Color"}),window.Color.__super__=Object.prototype,window.Color.augmentWith(window.DeepCopierMixin,"Color"),window.Color.prototype.a=nil,window.Color.prototype.r=nil,window.Color.prototype.g=nil,window.Color.prototype.b=nil,window.Color.prototype.toString=function(){return"rgba("+Math.round(this.r)+","+Math.round(this.g)+","+Math.round(this.b)+","+this.a+")"},window.Color.prototype.copy=function(){return new this.constructor(this.r,this.g,this.b,this.a)},window.Color.prototype.eq=function(e){return e&&this.r===e.r&&this.g===e.g&&this.b===e.b},window.Color.byName_aliceblue=[240,248,255],window.Color.byName_antiquewhite=[250,235,215],window.Color.byName_aqua=[0,255,255],window.Color.byName_aquamarine=[127,255,212],window.Color.byName_azure=[240,255,255],window.Color.byName_beige=[245,245,220],window.Color.byName_bisque=[255,228,196],window.Color.byName_black=[0,0,0],window.Color.byName_blanchedalmond=[255,235,205],window.Color.byName_blue=[0,0,255],window.Color.byName_blueviolet=[138,43,226],window.Color.byName_brown=[165,42,42],window.Color.byName_burlywood=[222,184,135],window.Color.byName_cadetblue=[95,158,160],window.Color.byName_chartreuse=[127,255,0],window.Color.byName_chocolate=[210,105,30],window.Color.byName_coral=[255,127,80],window.Color.byName_cornflowerblue=[100,149,237],window.Color.byName_cornsilk=[255,248,220],window.Color.byName_crimson=[220,20,60],window.Color.byName_cyan=[0,255,255],window.Color.byName_darkblue=[0,0,139],window.Color.byName_darkcyan=[0,139,139],window.Color.byName_darkgoldenrod=[184,134,11],window.Color.byName_darkgray=[169,169,169],window.Color.byName_darkgrey=[169,169,169],window.Color.byName_darkgreen=[0,100,0],window.Color.byName_darkkhaki=[189,183,107],window.Color.byName_darkmagenta=[139,0,139],window.Color.byName_darkolivegreen=[85,107,47],window.Color.byName_darkorange=[255,140,0],window.Color.byName_darkorchid=[153,50,204],window.Color.byName_darkred=[139,0,0],window.Color.byName_darksalmon=[233,150,122],window.Color.byName_darkseagreen=[143,188,143],window.Color.byName_darkslateblue=[72,61,139],window.Color.byName_darkslategray=[47,79,79],window.Color.byName_darkslategrey=[47,79,79],window.Color.byName_darkturquoise=[0,206,209],window.Color.byName_darkviolet=[148,0,211],window.Color.byName_deeppink=[255,20,147],window.Color.byName_deepskyblue=[0,191,255],window.Color.byName_dimgray=[105,105,105],window.Color.byName_dimgrey=[105,105,105],window.Color.byName_dodgerblue=[30,144,255],window.Color.byName_firebrick=[178,34,34],window.Color.byName_floralwhite=[255,250,240],window.Color.byName_forestgreen=[34,139,34],window.Color.byName_fuchsia=[255,0,255],window.Color.byName_gainsboro=[220,220,220],window.Color.byName_ghostwhite=[248,248,255],window.Color.byName_gold=[255,215,0],window.Color.byName_goldenrod=[218,165,32],window.Color.byName_gray=[128,128,128],window.Color.byName_grey=[128,128,128],window.Color.byName_green=[0,128,0],window.Color.byName_greenyellow=[173,255,47],window.Color.byName_honeydew=[240,255,240],window.Color.byName_hotpink=[255,105,180],window.Color.byName_indianred=[205,92,92],window.Color.byName_indigo=[75,0,130],window.Color.byName_ivory=[255,255,240],window.Color.byName_khaki=[240,230,140],window.Color.byName_lavender=[230,230,250],window.Color.byName_lavenderblush=[255,240,245],window.Color.byName_lawngreen=[124,252,0],window.Color.byName_lemonchiffon=[255,250,205],window.Color.byName_lightblue=[173,216,230],window.Color.byName_lightcoral=[240,128,128],window.Color.byName_lightcyan=[224,255,255],window.Color.byName_lightgoldenrodyellow=[250,250,210],window.Color.byName_lightgrey=[211,211,211],window.Color.byName_lightgray=[211,211,211],window.Color.byName_lightgreen=[144,238,144],window.Color.byName_lightpink=[255,182,193],window.Color.byName_lightsalmon=[255,160,122],window.Color.byName_lightseagreen=[32,178,170],window.Color.byName_lightskyblue=[135,206,250],window.Color.byName_lightslategray=[119,136,153],window.Color.byName_lightslategrey=[119,136,153],window.Color.byName_lightsteelblue=[176,196,222],window.Color.byName_lightyellow=[255,255,224],window.Color.byName_lime=[0,255,0],window.Color.byName_limegreen=[50,205,50],window.Color.byName_linen=[250,240,230],window.Color.byName_mintcream=[245,255,250],window.Color.byName_mistyrose=[255,228,225],window.Color.byName_moccasin=[255,228,181],window.Color.byName_navajowhite=[255,222,173],window.Color.byName_navy=[0,0,128],window.Color.byName_oldlace=[253,245,230],window.Color.byName_olive=[128,128,0],window.Color.byName_olivedrab=[107,142,35],window.Color.byName_orange=[255,165,0],window.Color.byName_orangered=[255,69,0],window.Color.byName_orchid=[218,112,214],window.Color.byName_palegoldenrod=[238,232,170],window.Color.byName_palegreen=[152,251,152],window.Color.byName_paleturquoise=[175,238,238],window.Color.byName_palevioletred=[216,112,147],window.Color.byName_papayawhip=[255,239,213],window.Color.byName_peachpuff=[255,218,185],window.Color.byName_peru=[205,133,63],window.Color.byName_pink=[255,192,203],window.Color.byName_plum=[221,160,221],window.Color.byName_powderblue=[176,224,230],window.Color.byName_purple=[128,0,128],window.Color.byName_red=[255,0,0],window.Color.byName_rosybrown=[188,143,143],window.Color.byName_royalblue=[65,105,225],window.Color.byName_saddlebrown=[139,69,19],window.Color.byName_salmon=[250,128,114],window.Color.byName_sandybrown=[244,164,96],window.Color.byName_seagreen=[46,139,87],window.Color.byName_seashell=[255,245,238],window.Color.byName_sienna=[160,82,45],window.Color.byName_silver=[192,192,192],window.Color.byName_skyblue=[135,206,235],window.Color.byName_slateblue=[106,90,205],window.Color.byName_slategray=[112,128,144],window.Color.byName_slategrey=[112,128,144],window.Color.byName_snow=[255,250,250],window.Color.byName_springgreen=[0,255,127],window.Color.byName_steelblue=[70,130,180],window.Color.byName_tan=[210,180,140],window.Color.byName_teal=[0,128,128],window.Color.byName_thistle=[216,191,216],window.Color.byName_tomato=[255,99,71],window.Color.byName_turquoise=[64,224,208],window.Color.byName_violet=[238,130,238],window.Color.byName_wheat=[245,222,179],window.Color.byName_white=[255,255,255],window.Color.byName_whitesmoke=[245,245,245],window.Color.byName_yellow=[255,255,0],window.Color.byName_yellowgreen=[154,205,50],window.Color.byName_angleColor="angleColor",window.Color.transparent=function(){return new this(0,0,0,0)},window.Color.instances=new Set,window.Widget=function(){var e,t;Widget.__super__.constructor.call(this),this.assignUniqueID(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state===Automator.RECORDING&&(e=world.automator.tagsCollectedWhileRecordingTest,t=this.constructor.name,indexOf.call(e,t)<0&&e.push(this.constructor.name)),this.bounds=Rectangle.EMPTY,this.minimumExtent=new Point(5,5),this.silentRawSetBounds(new Rectangle(0,0,50,40)),this.lastTime=Date.now(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Widget,"name",{value:"Widget"}),window.Widget.__super__=window.TreeNode.prototype,window.Widget=extend(window.Widget,window.TreeNode),window.Widget.augmentWith(window.DeepCopierMixin,"Widget"),window.Widget.prototype.instanceNumericID=0,window.Widget.prototype.appearance=nil,window.Widget.prototype.dragsDropsAndEditingEnabled=!0,window.Widget.prototype.propertyUpTheChain=[1,2,3],window.Widget.prototype.morphMethod=function(){return 3.14},window.Widget.prototype.isMorph=!0,window.Widget.prototype.bounds=nil,window.Widget.prototype.minimumExtent=nil,window.Widget.prototype.color=new Color(80,80,80),window.Widget.prototype.strokeColor=nil,window.Widget.prototype.texture=nil,window.Widget.prototype.cachedTexture=nil,window.Widget.prototype.lastTime=nil,window.Widget.prototype.desiredExtent=nil,window.Widget.prototype.desiredPosition=nil,window.Widget.prototype.alpha=1,window.Widget.prototype.paddingTop=0,window.Widget.prototype.paddingBottom=0,window.Widget.prototype.paddingLeft=0,window.Widget.prototype.paddingRight=0,window.Widget.prototype.backgroundColor=nil,window.Widget.prototype.backgroundTransparency=1,window.Widget.prototype.isVisible=!0,window.Widget.prototype.collapsed=!1,window.Widget.prototype.isTemplate=!1,window.Widget.prototype._acceptsDrops=!1,window.Widget.prototype.noticesTransparentClick=!1,window.Widget.prototype.fps=0,window.Widget.prototype.isLockingToPanels=!1,window.Widget.prototype.defaultRejectDrags=!1,window.Widget.prototype.overridingContextMenu=nil,window.Widget.prototype.takesOverAndCoalescesChildrensMenus=!1,window.Widget.prototype.shadowBlur=10,window.Widget.prototype.onNextStep=nil,window.Widget.prototype.clickOutsideMeOrAnyOfMeChildrenCallback=[nil],window.Widget.prototype.textDescription=nil,window.Widget.prototype.geometryOrPositionPossiblyChanged=!1,window.Widget.prototype.clippedBoundsWhenLastPainted=nil,window.Widget.prototype.fullGeometryOrPositionPossiblyChanged=!1,window.Widget.prototype.fullClippedBoundsWhenLastPainted=nil,window.Widget.prototype.cachedFullBounds=nil,window.Widget.prototype.childrenBoundsUpdatedAt=-1,window.Widget.prototype.cachedFullClippedBounds=nil,window.Widget.prototype.checkFullClippedBoundsCache=nil,window.Widget.prototype.visibleBasedOnIsVisiblePropertyCache=nil,window.Widget.prototype.checkVisibleBasedOnIsVisiblePropertyCache="",window.Widget.prototype.clippedThroughBoundsCache=nil,window.Widget.prototype.checkClippedThroughBoundsCache="",window.Widget.prototype.clipThroughCache=nil,window.Widget.prototype.checkClipThroughCache=nil,window.Widget.prototype.srcBrokenRect=nil,window.Widget.prototype.dstBrokenRect=nil,window.Widget.prototype.layoutIsValid=!0,window.Widget.prototype.layoutSpec=LayoutSpec.ATTACHEDAS_FREEFLOATING,window.Widget.prototype.layoutSpecDetails=nil,window.Widget.prototype._showsAdders=!1,window.Widget.prototype.highlighted=!1,window.Widget.prototype.wdgtThisWdgtIsHighlighting=nil,window.Widget.prototype.destroyed=!1,window.Widget.prototype.shadowInfo=nil,window.Widget.prototype.userMovedThisFromComputedPosition=!1,window.Widget.prototype.positionFractionalInHoldingPanel=nil,window.Widget.prototype.wasPositionedSlightlyOutsidePanel=!1,window.Widget.prototype.connectionsCalculationToken=314,window.Widget.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return this.layoutSpecDetails=new WindowContentLayoutSpec(PreferredSize.THIS_ONE_I_HAVE_NOW,PreferredSize.THIS_ONE_I_HAVE_NOW,1)},window.Widget.prototype.initialiseDefaultVerticalStackLayoutSpec=function(){if(!(this.layoutSpecDetails instanceof VerticalStackLayoutSpec))return this.layoutSpecDetails=new VerticalStackLayoutSpec(1)},window.Widget.prototype.mouseClickRight=function(){return world.hand.openContextMenuAtPointer(this)},window.Widget.prototype.getTextDescription=function(){return null!=this.textDescription?this.textDescription+""+this.constructor.name.replace("Wdgt","")+" (adhoc description of morph)":this.constructor.name.replace("Wdgt","")+" (class name)"},window.Widget.prototype.identifyViaTextLabel=function(){var e,t,n,o;return t=this.getTextDescription(),n=(e=world.allChildrenTopToBottomSuchThat((function(e){return e.getTextDescription()===t}))).indexOf(this),o=e.length,[t,n,o]},window.Widget.prototype.uniqueIDString=function(){return this.morphClassString()+"#"+this.instanceNumericID},window.Widget.prototype.morphClassString=function(){return this.constructor.name||this.constructor.toString().split(" ")[1].split("(")[0]},window.Widget.prototype.assignUniqueID=function(){return this.constructor.instancesCounter++,this.constructor.lastBuiltInstanceNumericID++,this.instanceNumericID=this.constructor.lastBuiltInstanceNumericID},window.Widget.prototype.startCountdownForBubbleHelp=function(e){return ToolTipWdgt.createInAWhileIfHandStillContainedInMorph(this,e)},window.Widget.prototype.registerThisInstance=function(){var e,t;for(e=this.constructor,t=[];null!=e.instances;)e.instances.add(this),t.push(e=e.__super__.constructor);return t},window.Widget.prototype.unregisterThisInstance=function(){var e,t;for(e=this.constructor,t=[];null!=e.instances;)e.instances.delete(this),t.push(e=e.__super__.constructor);return t},window.Widget.prototype.isTransparentAt=function(e){var t;return null!=(t=this.appearance)?t.isTransparentAt(e):void 0},window.Widget.prototype.paintHighlight=function(e,t,n,o,i){var r;return null!=(r=this.appearance)?r.paintHighlight(e,t,n,o,i):void 0},window.Widget.prototype.paintIntoAreaOrBlitFromBackBuffer=function(e,t,n){var o;return null!=(o=this.appearance)?o.paintIntoAreaOrBlitFromBackBuffer(e,t,n):void 0},window.Widget.prototype.paintStroke=function(e,t){if(null!=this.appearance&&null!=this.appearance.paintStroke)return this.appearance.paintStroke(e,t)},window.Widget.prototype.addShapeSpecificMenuItems=function(e){var t;return null!=(null!=(t=this.appearance)?t.addShapeSpecificMenuItems:void 0)?this.appearance.addShapeSpecificMenuItems(e):e},window.Widget.prototype.addShapeSpecificNumericalSetters=function(e,t){var n;return null==e&&(e=[],t=[]),null!=(null!=(n=this.appearance)?n.addShapeSpecificNumericalSetters:void 0)&&([e,t]=this.appearance.addShapeSpecificNumericalSetters(e,t)),this.deduplicateSettersAndSortByMenuEntryString(e,t)},window.Widget.prototype.toString=function(){return"a ","undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.hidingOfMorphsNumberIDInLabels?"a "+this.morphClassString():"a "+this.uniqueIDString()},window.Widget.prototype.close=function(){var e;if(this instanceof WindowWdgt||null==this.parent||!(this.parent instanceof WindowWdgt))return world.wdgtsDetectingClickOutsideMeOrAnyOfMeChildren.delete(this),null!=(e=this.parent)&&"function"==typeof e.childBeingClosed&&e.childBeingClosed(this),null!=world.basementWdgt?world.basementWdgt.scrollPanel.contents.addInPseudoRandomPosition(this):world.inform("There is no\nbasement to go in!");this.parent.close()},window.Widget.prototype.closeFromContainerWindow=function(e){return e.close()},window.Widget.prototype.destroy=function(){var e,t,n,o;return null!=(n=this.parent)&&"function"==typeof n.childBeingDestroyed&&n.childBeingDestroyed(this),this.unregisterThisInstance(),world.wdgtsDetectingClickOutsideMeOrAnyOfMeChildren.delete(this),this.destroyed=!0,null!=(o=this.parent)&&o.invalidateLayout(),this.breakNumberOfRawMovesAndResizesCaches(),WorldMorph.numberOfAddsAndRemoves++,world.steppingWdgts.delete(this),null!=world.caret&&this.isAncestorOf(world.caret.target)&&world.stopEditing(),this.onClickOutsideMeOrAnyOfMyChildren(nil),null!=this.parent&&(t=this.parent,null!=(e=this.firstParentOwningMyShadow())?e.fullChanged():this.fullChanged(),t.removeChild(this),null!=t.childRemoved&&t.childRemoved(this)),0!==this.children.length&&(this.children=[]),nil},window.Widget.prototype.fullDestroy=function(){for(WorldMorph.numberOfAddsAndRemoves++;0!==this.children.length;)this.children[0].fullDestroy();return this.destroy(),nil},window.Widget.prototype.closeChildren=function(){for(WorldMorph.numberOfAddsAndRemoves++;0!==this.children.length;)this.children[0].close();return nil},window.Widget.prototype.fullDestroyChildren=function(){if(0!==this.children.length){for(WorldMorph.numberOfAddsAndRemoves++;0!==this.children.length;)this.children[0].fullDestroy();return nil}},window.Widget.prototype.setLayoutSpec=function(e){var t;if(this.layoutSpec!==e)return this.layoutSpec=e,null!=(t=this.firstChildSuchThat((function(e){return e instanceof HandleMorph})))?t.updateVisibilityAndPosition():void 0},window.Widget.prototype.step=noOperation,window.Widget.prototype.left=function(){return this.bounds.left()},window.Widget.prototype.right=function(){return this.bounds.right()},window.Widget.prototype.top=function(){return this.bounds.top()},window.Widget.prototype.bottom=function(){return this.bounds.bottom()},window.Widget.prototype.center=function(){return this.bounds.center()},window.Widget.prototype.bottomCenter=function(){return this.bounds.bottomCenter()},window.Widget.prototype.bottomLeft=function(){return this.bounds.bottomLeft()},window.Widget.prototype.bottomRight=function(){return this.bounds.bottomRight()},window.Widget.prototype.boundingBox=function(){return this.bounds},window.Widget.prototype.leftTight=function(){return this.bounds.left()+this.paddingLeft},window.Widget.prototype.rightTight=function(){return this.bounds.right()-this.paddingRight},window.Widget.prototype.topTight=function(){return this.bounds.top()+this.paddingTop},window.Widget.prototype.bottomTight=function(){return this.bounds.bottom()-this.paddingBottom},window.Widget.prototype.bottomCenterTight=function(){return this.bounds.bottomCenter().subtract(new Point(0,this.paddingBottom))},window.Widget.prototype.bottomLeftTight=function(){return this.bounds.bottomLeft().add(new Point(this.paddingLeft,-this.paddingBottom))},window.Widget.prototype.bottomRightTight=function(){return this.bounds.bottomRight().subtract(new Point(this.paddingRight,this.paddingBottom))},window.Widget.prototype.boundingBoxTight=function(){return new Rectangle(this.leftTight(),this.topTight(),this.rightTight(),this.bottomTight())},window.Widget.prototype.rawResizeToWithoutSpacing=function(){},window.Widget.prototype.rawSetWidthSizeHeightAccordingly=function(e){if(this.rawSetWidth(e),this.implementsDeferredLayout())return this.invalidateLayout()},window.Widget.prototype.rawSetBounds=function(e){if(!this.bounds.eq(e))return this.bounds.origin.eq(e.origin)||(this.bounds=this.bounds.translateTo(e.origin),this.breakNumberOfRawMovesAndResizesCaches(),this.changed()),this.rawSetExtent(e.extent())},window.Widget.prototype.setBounds=function(e,t=nil){var n,o;if(this.layoutSpec!==LayoutSpec.ATTACHEDAS_FREEFLOATING);else if(e=e.round(),n=new Point(e.width(),e.height()),this.extent().eq(n)||(this.desiredExtent=n,this.invalidateLayout()),o=e.origin.copy(),!this.position().eq(o))return this.desiredPosition=o,this.invalidateLayout()},window.Widget.prototype.silentRawSetBounds=function(e){if(!this.bounds.eq(e))return this.bounds.origin.eq(e.origin)||(this.bounds=this.bounds.translateTo(e.origin),this.breakNumberOfRawMovesAndResizesCaches()),this.silentRawSetExtent(e.extent())},window.Widget.prototype.leftCenter=function(){return this.bounds.leftCenter()},window.Widget.prototype.rightCenter=function(){return this.bounds.rightCenter()},window.Widget.prototype.topCenter=function(){return this.bounds.topCenter()},window.Widget.prototype.topLeft=function(){return this.bounds.origin},window.Widget.prototype.topRight=function(){return this.bounds.topRight()},window.Widget.prototype.position=function(){return this.bounds.origin},window.Widget.prototype.positionFractionalInMorph=function(e){var t,n;return[t,n]=this.positionPixelsInMorph(e),[t/e.width(),n/e.height()]},window.Widget.prototype.extentFractionalInMorph=function(e){var t,n;return n=this.width(),t=this.height(),[n/e.width(),t/e.height()]},window.Widget.prototype.positionPixelsInMorph=function(e){var t;return[(t=this.position().toLocalCoordinatesOf(e)).x,t.y]},window.Widget.prototype.extent=function(){return this.bounds.extent()},window.Widget.prototype.width=function(){return this.bounds.width()},window.Widget.prototype.widthWithoutSpacing=function(){return this.width()},window.Widget.prototype.height=function(){return this.bounds.height()},window.Widget.prototype.leftCenterTight=function(){return this.bounds.leftCenter().add(new Point(this.paddingLeft,0))},window.Widget.prototype.rightCenterTight=function(){return this.bounds.rightCenter().subtract(new Point(this.paddingRight,0))},window.Widget.prototype.topCenterTight=function(){return this.bounds.topCenter().add(new Point(0,this.paddingTop))},window.Widget.prototype.topLeftTight=function(){return this.bounds.origin.add(new Point(this.paddingLeft,this.paddingTop))},window.Widget.prototype.topRightTight=function(){return this.bounds.topRight.add(new Point(-this.paddingRight,this.paddingTop))},window.Widget.prototype.positionTight=function(){return this.bounds.origin.add(new Point(this.paddingLeft,this.paddingTop))},window.Widget.prototype.extentTight=function(){return this.bounds.extent().subtract(new Point-(this.paddingLeft+this.paddingRight),-(this.paddingTop+this.paddingBottom))},window.Widget.prototype.widthTight=function(){return this.bounds.width()-(this.paddingLeft+this.paddingRight)},window.Widget.prototype.heightTight=function(){return this.bounds.height()-(this.paddingTop+this.paddingBottom)},window.Widget.prototype.plausibleTargetAndDestinationMorphs=function(e){var t;return t=[],!this.visibleBasedOnIsVisibleProperty()||this.isCollapsed()||e.isAncestorOf(this)||!this.areBoundsIntersecting(e)||this.anyParentPopUpMarkedForClosure()||(t=[this]),this.children.forEach((function(n){return t=t.concat(n.plausibleTargetAndDestinationMorphs(e))})),t},window.Widget.prototype.surelyNotShowingUpOnScreenBasedOnVisibilityCollapseAndOrphanage=function(){return!this.isVisible||(!!this.isOrphan()||(!this.visibleBasedOnIsVisibleProperty()||!!this.isCollapsed()))},window.Widget.prototype.SLOWvisibleBasedOnIsVisibleProperty=function(){return!!this.isVisible&&(null==this.parent||this.parent.SLOWvisibleBasedOnIsVisibleProperty())},window.Widget.prototype.visibleBasedOnIsVisibleProperty=function(){var e;return this.isVisible?null==this.parent?e=!0:(this.checkVisibleBasedOnIsVisiblePropertyCache===WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges||(this.checkVisibleBasedOnIsVisiblePropertyCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges,this.visibleBasedOnIsVisiblePropertyCache=this.parent.visibleBasedOnIsVisibleProperty()),e=this.visibleBasedOnIsVisiblePropertyCache):(this.checkVisibleBasedOnIsVisiblePropertyCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges,this.visibleBasedOnIsVisiblePropertyCache=!1,e=this.visibleBasedOnIsVisiblePropertyCache),world.doubleCheckCachedMethodsResults&&e!==this.SLOWvisibleBasedOnIsVisibleProperty()&&alert("visibleBasedOnIsVisibleProperty is broken"),e},window.Widget.prototype.invalidateFullBoundsCache=function(){var e;if(null!=this.cachedFullBounds)return this.cachedFullBounds=nil,null!=(null!=(e=this.parent)?e.cachedFullBounds:void 0)?this.parent.invalidateFullBoundsCache(this):void 0},window.Widget.prototype.invalidateFullClippedBoundsCache=function(){var e;if(null!=this.checkFullClippedBoundsCache)return this.checkFullClippedBoundsCache=nil,null!=(null!=(e=this.parent)?e.checkFullClippedBoundsCache:void 0)?this.parent.invalidateFullClippedBoundsCache(this):void 0},window.Widget.prototype.SLOWfullBounds=function(){var e;return e=this.bounds,this.children.forEach((function(t){if(t.visibleBasedOnIsVisibleProperty()&&!t.isCollapsed())return e=e.merge(t.SLOWfullBounds())})),e},window.Widget.prototype.SLOWfullClippedBounds=function(){var e;return this.isOrphan()||!this.visibleBasedOnIsVisibleProperty()||this.isCollapsed()?Rectangle.EMPTY:(e=this.clippedThroughBounds(),this.children.forEach((function(t){if(t.visibleBasedOnIsVisibleProperty()&&!t.isCollapsed())return e=e.merge(t.SLOWfullClippedBounds())})),e)},window.Widget.prototype.subMorphsMergedFullBounds=function(){var e;return e=nil,this.children.length&&(e=this.children[0].bounds,this.children.forEach((function(t){if(!(t instanceof HandleMorph||t instanceof CaretMorph))return e=t.implementsDeferredLayout()?e.merge(t.bounds):e.merge(t.fullBounds())}))),e},window.Widget.prototype.fullBounds=function(){var e;return null!=this.cachedFullBounds?(world.doubleCheckCachedMethodsResults&&(this.cachedFullBounds.eq(this.SLOWfullBounds())||alert("fullBounds is broken (cached)")),this.cachedFullBounds):(e=this.bounds,this.children.forEach((function(t){if(t.visibleBasedOnIsVisibleProperty()&&!t.isCollapsed())return e=e.merge(t.fullBounds())})),world.doubleCheckCachedMethodsResults&&(e.eq(this.SLOWfullBounds())||alert("fullBounds is broken (uncached)")),this.cachedFullBounds=e)},window.Widget.prototype.fullClippedBounds=function(){var e;if(this.isOrphan()||!this.visibleBasedOnIsVisibleProperty()||this.isCollapsed())e=Rectangle.EMPTY;else{if(this.checkFullClippedBoundsCache===WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes)return world.doubleCheckCachedMethodsResults&&(this.cachedFullClippedBounds.eq(this.SLOWfullClippedBounds())||alert("fullClippedBounds is broken")),this.cachedFullClippedBounds;e=this.clippedThroughBounds(),this.children.forEach((function(t){if(t.visibleBasedOnIsVisibleProperty()&&!t.isCollapsed())return e=e.merge(t.fullClippedBounds())}))}return world.doubleCheckCachedMethodsResults&&(e.eq(this.SLOWfullClippedBounds())||alert("fullClippedBounds is broken")),this.checkFullClippedBoundsCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes,this.cachedFullClippedBounds=e},window.Widget.prototype.clippedThroughBounds=function(){return this.checkClippedThroughBoundsCache===WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes?this.clippedThroughBoundsCache:this.isOrphan()||!this.visibleBasedOnIsVisibleProperty()||this.isCollapsed()?(this.checkClippedThroughBoundsCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes,this.clippedThroughBoundsCache=Rectangle.EMPTY,this.clippedThroughBoundsCache):(this.checkClippedThroughBoundsCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes,this.clippedThroughBoundsCache=this.boundingBox().intersect(this.clipThrough()),this.clippedThroughBoundsCache)},window.Widget.prototype.clipThrough=function(){var e,t;return Window,this.checkClipThroughCache===WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes?this.clipThroughCache:this.isOrphan()||!this.visibleBasedOnIsVisibleProperty()||this.isCollapsed()?(this.checkClipThroughCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes,this.clipThroughCache=Rectangle.EMPTY,this.clipThroughCache):(null==(e=this.firstParentClippingAtBounds())&&(e=world),t=e.clipThrough(),this.checkClipThroughCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes,this.clipsAtRectangularBounds?this.clipThroughCache=this.boundingBox().intersect(t):this.clipThroughCache=t,this.clipThroughCache)},window.Widget.prototype.fullRawMoveBy=function(e){if(!e.isZero())return this.breakNumberOfRawMovesAndResizesCaches(),this.fullChanged(),this.bounds=this.bounds.translateBy(e),this.amIDirectlyInsideNonTextWrappingScrollPanelWdgt()&&(this.parent.parent.adjustContentsBounds(),this.parent.parent.adjustScrollBars()),this.parent instanceof SimpleVerticalStackPanelWdgt&&this.parent.adjustContentsBounds(),this.children.forEach((function(t){return t.silentFullRawMoveBy(e)}))},window.Widget.prototype.silentFullRawMoveBy=function(e){return this.breakNumberOfRawMovesAndResizesCaches(),this.bounds=this.bounds.translateBy(e),this.children.forEach((function(t){return t.silentFullRawMoveBy(e)}))},window.Widget.prototype.breakNumberOfRawMovesAndResizesCaches=function(){if(this.invalidateFullBoundsCache(this),this.invalidateFullClippedBoundsCache(this),!(this instanceof ActivePointerWdgt&&0===this.children.length))return WorldMorph.numberOfRawMovesAndResizes++},window.Widget.prototype.fullRawMoveInDesktopToFractionalPosition=function(e){if(null==e&&(e=this.parent.bounds),this.positionFractionalInHoldingPanel[0]>0&&this.fullRawMoveTo(new Point(e.left()+e.width()*this.positionFractionalInHoldingPanel[0],this.top()).round()),this.positionFractionalInHoldingPanel[1]>0)return this.fullRawMoveTo(new Point(this.left(),e.top()+e.height()*this.positionFractionalInHoldingPanel[1]).round())},window.Widget.prototype.fullRawMoveInStretchablePanelToFractionalPosition=function(e){return null==e&&(e=this.parent.bounds),this.fullRawMoveTo(new Point(e.left()+e.width()*this.positionFractionalInHoldingPanel[0],e.top()+e.height()*this.positionFractionalInHoldingPanel[1]).round())},window.Widget.prototype.rawSetExtentToFractionalExtentInPaneUserHasSet=function(e){return null==e&&(e=this.parent.bounds),this.rawSetExtent(new Point(this.extentFractionalInHoldingPanel[0]*e.width(),this.extentFractionalInHoldingPanel[1]*e.height()))},window.Widget.prototype.fullRawMoveTo=function(e){var t;return e.debugIfFloats(),(t=e.toLocalCoordinatesOf(this)).isZero()||(this.breakNumberOfRawMovesAndResizesCaches(),this.fullRawMoveBy(t)),this.bounds.debugIfFloats()},window.Widget.prototype.fullMoveTo=function(e,t=nil){var n,o,i;if(this.layoutSpec!==LayoutSpec.ATTACHEDAS_FREEFLOATING);else if(e=e.round(),o=Math.max(e.x,0),i=Math.max(e.y,0),n=new Point(o,i),!this.position().eq(n)&&(this.desiredPosition=n,this.invalidateLayout(),null!=t&&null!=this.parent&&t instanceof HandleMorph))return this.rememberFractionalPositionInHoldingPanel()},window.Widget.prototype.rememberFractionalPositionInHoldingPanel=function(){return this.positionFractionalInHoldingPanel=this.positionFractionalInMorph(this.parent)},window.Widget.prototype.rememberFractionalExtentInHoldingPanel=function(){return this.extentFractionalInHoldingPanel=this.extentFractionalInMorph(this.parent)},window.Widget.prototype.rememberFractionalSituationInHoldingPanel=function(){return this.rememberFractionalPositionInHoldingPanel(),this.rememberFractionalExtentInHoldingPanel(),this.wasPositionedSlightlyOutsidePanel=!this.parent.bounds.containsRectangle(this.bounds)},window.Widget.prototype.silentFullRawMoveTo=function(e){var t;if(this.breakNumberOfRawMovesAndResizesCaches(),0!==(t=e.toLocalCoordinatesOf(this)).x||0!==t.y)return this.silentFullRawMoveBy(t)},window.Widget.prototype.fullRawMoveLeftSideTo=function(e){return this.fullRawMoveTo(new Point(e,this.top()))},window.Widget.prototype.fullRawMoveRightSideTo=function(e){return this.fullRawMoveTo(new Point(e-this.width(),this.top()))},window.Widget.prototype.fullRawMoveTopSideTo=function(e){return this.fullRawMoveTo(new Point(this.left(),e))},window.Widget.prototype.fullRawMoveBottomSideTo=function(e){return this.fullRawMoveTo(new Point(this.left(),e-this.height()))},window.Widget.prototype.fullRawMoveCenterTo=function(e){return this.fullRawMoveTo(e.subtract(this.extent().floorDivideBy(2)))},window.Widget.prototype.fullRawMoveToSideOf=function(e){return this.fullRawMoveTo(e.topRight().add(new Point(10,-Math.round((this.height()-e.height())/2)))),this.fullRawMoveWithin(this.parent)},window.Widget.prototype.fullRawMoveFullCenterTo=function(e){return this.fullRawMoveTo(e.subtract(this.fullBounds().extent().floorDivideBy(2)))},window.Widget.prototype.fullRawMoveWithin=function(e){var t,n,o,i,r;null!=this.desiredExtent?(o=this.desiredExtent,this.desiredExtent=nil):o=this.extent(),null!=this.desiredPosition?(o=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(o),this.desiredPosition=nil):o=new Rectangle(this.position()).setBoundsWidthAndHeight(o),this.rawSetBounds(o),(i=o.right()-e.right())>0&&(this.fullRawMoveBy(new Point(-i,0)),o=this.bounds),(n=o.left()-e.left())<0&&(this.fullRawMoveBy(new Point(-n,0)),o=this.bounds),(t=o.bottom()-e.bottom())>0&&(this.fullRawMoveBy(new Point(0,-t)),o=this.bounds),(r=o.top()-e.top())<0&&(this.fullRawMoveBy(new Point(0,-r)),o=this.bounds)},window.Widget.prototype.notifyChildrenThatParentHasReLayouted=function(){var e,t,n,o,i;for(i=[],t=0,n=(o=this.children.slice()).length;t<n;t++)e=o[t],i.push(e.parentHasReLayouted());return i},window.Widget.prototype.parentHasReLayouted=function(){return this.notifyChildrenThatParentHasReLayouted()},window.Widget.prototype.layoutInset=function(e=nil){if(null!=this.insetMorph&&this.insetMorph!==e)return this.insetMorph.fullRawMoveTo(this.insetPosition()),this.insetMorph.rawSetExtent(this.insetSpaceExtent(),this)},window.Widget.prototype.layoutSubmorphs=function(e=nil){var t,n,o,i,r;for(this.layoutInset(e),r=[],n=0,o=(i=this.children.slice()).length;n<o;n++)e!==(t=i[n])?r.push(t.parentHasReLayouted()):r.push(void 0);return r},window.Widget.prototype.childChangedExtent=function(e){if(this.insetMorph===e)return this.rawSetExtent(this.extentBasedOnInsetExtent(e),e)},window.Widget.prototype.getMinimumExtent=function(){return this.minimumExtent},window.Widget.prototype.setMinimumExtent=function(e){this.minimumExtent=e},window.Widget.prototype.rawSetExtent=function(e,t=nil){if(this!==t)return null==t&&(t=this),e.eq(this.extent())||(this.breakNumberOfRawMovesAndResizesCaches(),this.silentRawSetExtent(e),this.changed(),this.reLayout(),this.layoutSubmorphs(t),null==this.parent||this.parent===t)?void 0:this.parent.childChangedExtent(this)},window.Widget.prototype.setExtent=function(e,t=nil){var n,o,i;if(this.layoutSpec!==LayoutSpec.ATTACHEDAS_FREEFLOATING);else if(e=e.round(),i=Math.max(e.x,0),o=Math.max(e.y,0),n=new Point(i,o),!this.extent().eq(n)&&(this.desiredExtent=n,this.invalidateLayout(),null!=t&&null!=this.parent&&t instanceof HandleMorph))return this.extentFractionalInHoldingPanel=this.extentFractionalInMorph(this.parent)},window.Widget.prototype.silentRawSetExtent=function(e){var t,n,o,i;if(e=e.round(),t=this.getMinimumExtent(),e.ge(t)||(e=e.max(t)),i=Math.max(e.x,0),o=Math.max(e.y,0),n=new Rectangle(this.bounds.origin,new Point(this.bounds.origin.x+i,this.bounds.origin.y+o)),!this.bounds.eq(n)&&(this.bounds=n,this.breakNumberOfRawMovesAndResizesCaches(),this.amIDirectlyInsideNonTextWrappingScrollPanelWdgt()&&(this.parent.parent.adjustContentsBounds(),this.parent.parent.adjustScrollBars()),this.parent instanceof SimpleVerticalStackPanelWdgt))return this.parent.adjustContentsBounds()},window.Widget.prototype.refreshScrollPanelWdgtOrVerticalStackIfIamInIt=function(){if(this.amIDirectlyInsideScrollPanelWdgt()&&(this.parent.parent.adjustContentsBounds(),this.parent.parent.adjustScrollBars()),this.parent instanceof SimpleVerticalStackPanelWdgt)return this.parent.adjustContentsBounds()},window.Widget.prototype.rawSetWidth=function(e){return this.breakNumberOfRawMovesAndResizesCaches(),this.rawSetExtent(new Point(e||0,this.height()))},window.Widget.prototype.setWidth=function(e){var t,n;if(this.layoutSpec!==LayoutSpec.ATTACHEDAS_FREEFLOATING);else if(n=Math.max(e,0),t=new Point(n,this.height()),!this.extent().eq(t))return this.desiredExtent=t,this.invalidateLayout()},window.Widget.prototype.silentRawSetWidth=function(e){var t;return this.breakNumberOfRawMovesAndResizesCaches(),t=Math.max(Math.round(e||0),0),this.bounds=new Rectangle(this.bounds.origin,new Point(this.bounds.origin.x+t,this.bounds.corner.y))},window.Widget.prototype.rawSetHeight=function(e){return this.breakNumberOfRawMovesAndResizesCaches(),this.rawSetExtent(new Point(this.width(),e||0))},window.Widget.prototype.setHeight=function(e){var t,n;if(this.layoutSpec!==LayoutSpec.ATTACHEDAS_FREEFLOATING);else if(n=Math.max(0,e),t=new Point(this.width(),n),!this.extent().eq(t))return this.desiredExtent=t,this.invalidateLayout()},window.Widget.prototype.silentRawSetHeight=function(e){var t;return this.breakNumberOfRawMovesAndResizesCaches(),t=Math.max(Math.round(e||0),0),this.bounds=new Rectangle(this.bounds.origin,new Point(this.bounds.corner.x,this.bounds.origin.y+t))},window.Widget.prototype.setColor=function(e,t,n,o){var i,r;if(o||n!==this.connectionsCalculationToken){if(this.connectionsCalculationToken=null==n?getRandomInt(-2e4,2e4):n,i=null!=(null!=t?t.getColor:void 0)?t.getColor():e){if(null!=(null!=(r=this.color)?r.eq:void 0)&&this.color.eq(i))return;this.color=i,this.changed()}return i}},window.Widget.prototype.setBackgroundColor=function(e,t,n,o){var i,r;if(o||n!==this.connectionsCalculationToken){if(this.connectionsCalculationToken=null==n?getRandomInt(-2e4,2e4):n,i=null!=(null!=t?t.getColor:void 0)?t.getColor():e){if(null!=(null!=(r=this.backgroundColor)?r.eq:void 0)&&this.backgroundColor.eq(i))return;this.backgroundColor=i,this.changed()}return i}},window.Widget.prototype.boundsContainPoint=function(e){return this.bounds.containsPoint(e)},window.Widget.prototype.areBoundsIntersecting=function(e){return this.bounds.isIntersecting(e.bounds)},window.Widget.prototype.calculateKeyValues=function(e,t){var n,o,i,r,l,a,s,d,h;return(o=t.intersect(this.bounds).round()).isNotEmpty()&&(r=this.position().neg(),a=(s=o.translateBy(r).round()).left()*ceilPixelRatio,d=s.top()*ceilPixelRatio,n=o.left()*ceilPixelRatio,i=o.top()*ceilPixelRatio,h=Math.min(s.width()*ceilPixelRatio,this.width()*ceilPixelRatio-a),l=Math.min(s.height()*ceilPixelRatio,this.height()*ceilPixelRatio-d)),[o,a,d,n,i,h,l]},window.Widget.prototype.turnOnHighlight=function(){if(!this.highlighted)return this.highlighted=!0,world.morphsToBeHighlighted.add(this),this.changed()},window.Widget.prototype.turnOffHighlight=function(){if(this.highlighted)return this.highlighted=!1,world.morphsToBeHighlighted.delete(this),this.changed()},window.Widget.prototype.paintRectangle=function(e,t,n,o,i,r,l=nil,a=!1,s){if(null!=r)return a&&e.save(),e.fillStyle=r.toString(),null!=l&&(e.globalAlpha=(null!=s?s.alpha:1)*l),e.fillRect(Math.round(t),Math.round(n),Math.round(o),Math.round(i)),a?e.restore():void 0},window.Widget.prototype.preliminaryCheckNothingToDraw=function(e,t){return!this.isVisible||(!!e.isEmpty()||(!(t!==world.worldCanvasContext||!this.isOrphan())||(t===world.worldCanvasContext&&!this.visibleBasedOnIsVisibleProperty()||!(t!==world.worldCanvasContext||!this.isCollapsed()))))},window.Widget.prototype.recordDrawnAreaForNextBrokenRects=function(){if(this.childrenBoundsUpdatedAt<WorldMorph.frameCount)return this.childrenBoundsUpdatedAt=WorldMorph.frameCount,this.clippedBoundsWhenLastPainted=this.clippedThroughBounds(),this.fullClippedBoundsWhenLastPainted=this.fullClippedBounds()},window.Widget.prototype.fullPaintIntoAreaOrBlitFromBackBuffer=function(e,t,n){if(world.paintingWidget=this,null==n&&null!=this.shadowInfo&&this.fullPaintIntoAreaOrBlitFromBackBufferJustShadow(e,t,this.shadowInfo),!this.preliminaryCheckNothingToDraw(t,e))return e===world.worldCanvasContext&&this.recordDrawnAreaForNextBrokenRects(),this.fullPaintIntoAreaOrBlitFromBackBufferContentPotentiallyAsShadow(e,t,n)},window.Widget.prototype.fullPaintIntoAreaOrBlitFromBackBufferJustShadow=function(e,t,n){if(t=t.translateBy(-n.offset.x,-n.offset.y),!this.preliminaryCheckNothingToDraw(t,e))return e.save(),e.translate(n.offset.x*ceilPixelRatio,n.offset.y*ceilPixelRatio),this.fullPaintIntoAreaOrBlitFromBackBufferContentPotentiallyAsShadow(e,t,n),e.restore()},window.Widget.prototype.fullPaintIntoAreaOrBlitFromBackBufferContentPotentiallyAsShadow=function(e,t,n){return this.paintIntoAreaOrBlitFromBackBuffer(e,t,n),this.children.forEach((function(o){return o.fullPaintIntoAreaOrBlitFromBackBuffer(e,t,n)}))},window.Widget.prototype.silentHide=function(){if(this.isVisible)return this.isVisible=!1,WorldMorph.numberOfVisibilityFlagsChanges++,this.invalidateFullBoundsCache(this),this.invalidateFullClippedBoundsCache(this)},window.Widget.prototype.hide=function(){var e;if(this.isVisible)return this.silentHide(),null!=(e=this.firstParentOwningMyShadow())?e.fullChanged():this.fullChanged()},window.Widget.prototype.show=function(){var e;if(!this.isVisible&&!0!==this.visibleBasedOnIsVisibleProperty())return this.isVisible=!0,WorldMorph.numberOfVisibilityFlagsChanges++,this.invalidateFullBoundsCache(this),this.invalidateFullClippedBoundsCache(this),null!=(e=this.firstParentOwningMyShadow())?e.fullChanged():this.fullChanged()},window.Widget.prototype.toggleVisibility=function(){return this.isVisible=!this.isVisible,WorldMorph.numberOfVisibilityFlagsChanges++,this.invalidateFullBoundsCache(this),this.invalidateFullClippedBoundsCache(this),this.fullChanged()},window.Widget.prototype.collapse=function(){var e,t;if(!this.collapsed)return null!=(e=this.parent)&&"function"==typeof e.childBeingCollapsed&&e.childBeingCollapsed(this),this.collapsed=!0,WorldMorph.numberOfCollapseFlagsChanges++,this.invalidateFullBoundsCache(this),this.invalidateFullClippedBoundsCache(this),this.invalidateLayout(),this.fullChanged(),null!=(t=this.parent)&&"function"==typeof t.childCollapsed?t.childCollapsed(this):void 0},window.Widget.prototype.unCollapse=function(){var e,t;if(this.collapsed&&this.isCollapsed())return null!=(e=this.parent)&&"function"==typeof e.childBeingUnCollapsed&&e.childBeingUnCollapsed(this),this.collapsed=!1,WorldMorph.numberOfCollapseFlagsChanges++,this.invalidateFullBoundsCache(this),this.invalidateFullClippedBoundsCache(this),this.invalidateLayout(),this.fullChanged(),null!=(t=this.parent)&&"function"==typeof t.childUnCollapsed?t.childUnCollapsed(this):void 0},window.Widget.prototype.isCollapsed=function(){return!!this.collapsed||null!=this.parent&&this.parent.isCollapsed()},window.Widget.prototype.removeFromTree=function(){var e;return null!=(e=this.parent)&&e.invalidateLayout(),this.breakNumberOfRawMovesAndResizesCaches(),WorldMorph.numberOfAddsAndRemoves++,this.parent.removeChild(this),this.fullChanged()},window.Widget.prototype.colloquialName=function(){return"generic widget"},window.Widget.prototype.representativeIcon=function(){return new WidgetIconWdgt},window.Widget.prototype.createPointerMorph=function(){var e,t;return t=this.positionAmongSiblings(),e=new PointerMorph(this),this.parent.add(e,t),e.fullMoveTo(this.position()),e.setExtent(new Point(150,20)),e.fullChanged(),this.removeFromTree()},window.Widget.prototype.createReference=function(e,t=world){var n,o,i,r,l;for(null!=e&&"string"!=typeof e&&(e=nil,t=world),n=0,o=(r=t.children).length;n<o;n++)if((l=r[n])instanceof IconicDesktopSystemShortcutWdgt&&l.target===this)return;return i=new IconicDesktopSystemDocumentShortcutWdgt(this,e),t.add(i),i.setExtent(new Point(75,75)),i.fullChanged(),this.bringToForeground()},window.Widget.prototype.createReferenceAndClose=function(e,t=world){return this.createReference(e,t),this.close()},window.Widget.prototype.fullImageAsItAppearsOnScreen=function(){var e,t;return t=this.fullBounds(),(e=newCanvas(t.extent().scaleBy(ceilPixelRatio))).getContext("2d").drawImage(world.worldCanvas,t.topLeft().x*ceilPixelRatio,t.topLeft().y*ceilPixelRatio,t.width()*ceilPixelRatio,t.height()*ceilPixelRatio,0,0,t.width()*ceilPixelRatio,t.height()*ceilPixelRatio),e.toDataURL("image/png")},window.Widget.prototype.addShadow=function(e=new Point(4,4),t=.2){return this.silentAddShadow(e,t),this.fullChanged()},window.Widget.prototype.silentAddShadow=function(e,t){return this.shadowInfo=new ShadowInfo(e,t)},window.Widget.prototype.hasShadow=function(){return null!=this.shadowInfo},window.Widget.prototype.removeShadow=function(){if(this.hasShadow())return this.shadowInfo=nil,this.fullChanged()},window.Widget.prototype.changed=function(){if(trackChanges[trackChanges.length-1]){if(this.isBeingFloatDragged())return void world.hand.fullChanged();this.geometryOrPositionPossiblyChanged||this.fullGeometryOrPositionPossiblyChanged||(window.morphsThatMaybeChangedGeometryOrPosition.push(this),this.geometryOrPositionPossiblyChanged=!0)}if(this.parent)return this.parent.childChanged(this)},window.Widget.prototype.hasMaybeChangedGeometryOrPosition=function(){return!(!this.fullGeometryOrPositionPossiblyChanged&&!this.geometryOrPositionPossiblyChanged)||null!=this.parent&&this.parent.hasMaybeChangedGeometryOrPosition()},window.Widget.prototype.fullChanged=function(){if(trackChanges[trackChanges.length-1]&&!this.fullGeometryOrPositionPossiblyChanged)return window.morphsThatMaybeChangedFullGeometryOrPosition.push(this),this.fullGeometryOrPositionPossiblyChanged=!0},window.Widget.prototype.childChanged=function(){if(this.parent)return this.parent.childChanged(this)},window.Widget.prototype.iHaveBeenAddedTo=function(e,t){return this.reLayout()},window.Widget.prototype.addAsSiblingAfterMe=function(e,t=nil,n=LayoutSpec.ATTACHEDAS_FREEFLOATING){var o;return o=this.positionAmongSiblings(),this.parent.add(e,o+1,n)},window.Widget.prototype.addAsSiblingBeforeMe=function(e,t=nil,n=LayoutSpec.ATTACHEDAS_FREEFLOATING){var o;return o=this.positionAmongSiblings(),this.parent.add(e,o,n)},window.Widget.prototype.add=function(e,t=nil,n=LayoutSpec.ATTACHEDAS_FREEFLOATING,o){if(e instanceof HighlighterMorph||e instanceof CaretMorph||(this===world?(e.addShadow(),e instanceof ToolTipWdgt||ToolTipWdgt.cancelAllScheduledToolTips()):e.removeShadow()),this.addRaw(...arguments),this===world)return e.rememberFractionalPositionInHoldingPanel()},window.Widget.prototype.addRaw=function(e,t=nil,n=LayoutSpec.ATTACHEDAS_FREEFLOATING,o){var i,r,l;return e.isAncestorOf(this)?nil:(r=e.parent,null!=(l=e.parent)&&l.invalidateLayout(),null!=(i=e.firstParentOwningMyShadow())?i.fullChanged():e.fullChanged(),e.setLayoutSpec(n),n!==LayoutSpec.ATTACHEDAS_FREEFLOATING&&this.invalidateLayout(),e.fullChanged(),this.silentAdd(e,!0,t),e.iHaveBeenAddedTo(this,o),null!=(null!=r?r.childRemoved:void 0)&&r.childRemoved(this),null!=this.childAdded&&this.childAdded(e),e)},window.Widget.prototype.addInset=function(e){return null!=e.parent&&e.changed(),this.insetMorph=e,this.add(e,0),e.fullRawMoveTo(this.insetPosition()),e.rawSetExtent(this.insetSpaceExtent(),this)},window.Widget.prototype.sourceChanged=function(){return"function"==typeof this.reLayout&&this.reLayout(),"function"==typeof this.changed?this.changed():void 0},window.Widget.prototype.reLayout=function(){},window.Widget.prototype.calculateAndUpdateExtent=function(){},window.Widget.prototype.silentAdd=function(e,t,n=nil){var o;if(null!=(o=e.parent)&&o.removeChild(e),null!=e.isPopUpMarkedForClosure&&(e.isPopUpMarkedForClosure=!1),this.addChild(e,n),!t)return e.calculateAndUpdateExtent()},window.Widget.prototype.duplicateMenuAction=function(){var e;return(e=this.fullCopy()).unlockFromPanels(),world.add(e),e.fullRawMoveTo(this.position().add(new Point(10,10))),e.rememberFractionalSituationInHoldingPanel()},window.Widget.prototype.duplicateMenuActionAndPickItUp=function(){var e;return null!=(e=this.fullCopy())?e.pickUp():void 0},window.Widget.prototype.alignCopiedMorphToBrokenInfoDataStructures=function(e){if(window.morphsThatMaybeChangedGeometryOrPosition.includes(this)&&!window.morphsThatMaybeChangedGeometryOrPosition.includes(e)&&window.morphsThatMaybeChangedGeometryOrPosition.push(e),window.morphsThatMaybeChangedFullGeometryOrPosition.includes(this)&&!window.morphsThatMaybeChangedFullGeometryOrPosition.includes(e))return window.morphsThatMaybeChangedFullGeometryOrPosition.push(e)},window.Widget.prototype.alignCopiedMorphToSteppingStructures=function(e){if(world.steppingWdgts.has(this))return world.steppingWdgts.add(e)},window.Widget.prototype.fullCopy=function(){var e;return this.destroyed?(this.inform("The item you are\ntrying to copy\nis dead!"),nil):(e=this.allChildrenBottomToTop(),this.deepCopy(!1,[],[],e))},window.Widget.prototype.serialize=function(){var e,t,n,o,i,r,l;for(e=this.allChildrenBottomToTop(),t=[],n=[],this.deepCopy(!0,t,n,e),l="",i=0,r=n.length;i<r;i++){o=n[i];try{console.log(JSON.stringify(o)+"\n// --------------------------- \n")}catch(e){e}l=l+JSON.stringify(o)+"\n// --------------------------- \n"}return l},window.Widget.prototype.deserialize=function(e){var t,n,o,i,r,l,a,s,d,h,p,c,u,w,g,T,f,y,m,S,W,P,C;for((f=e.split(/^\/\/.*$/gm)).pop(),n=[],p=0,u=f.length;p<u;p++)a=f[p],n.push(JSON.parse(a));for(t=[],c=0,w=n.length;c<w;c++)"Canvas"===(l=n[c]).className?(o=(C=newCanvas(new Point(l.width,l.height))).getContext("2d"),(d=new Image).src=l.data,o.drawImage(d,0,0)):l.constructor!==Array?null!=(C=Object.create(window[l.className].prototype)).assignUniqueID&&C.assignUniqueID():C=[],t.push(C);for(s=g=0,m=t.length;0<=m?g<m:g>m;s=0<=m?++g:--g)if((r=t[s]).constructor===HTMLCanvasElement);else if(r.constructor!==Array)for(y in n[s])n[s].hasOwnProperty(y)&&(console.log("looking at property: "+y),t[s][y]=n[s][y],"string"==typeof t[s][y]&&t[s][y].startsWith("$")&&(P=t[s][y].substring(1),W=parseInt(P),t[s][y]=t[W]));else for(h=T=0,S=n[s].length;0<=S?T<S:T>S;h=0<=S?++T:--T)i=n[s][h],t[s][h]=n[s][h],"string"==typeof i&&i.startsWith("$")&&(P=i.substring(1),W=parseInt(P),t[s][h]=t[W]);return t[0]},window.Widget.prototype.injectProperty=function(e,t){return this.evaluateString("@"+e+" = "+t),isFunction(this[e])&&(this[e+"_source"]=t),this.sourceChanged()},window.Widget.prototype.injectProperties=function(e){var t,n,o;for(e=e.replace(/^[ \t]*$/gm,"\n"),e+="\n# end injected code",n=/^([a-zA-Z_$][0-9a-zA-Z_$]*)[ \t]*=[ \t]*([^]*?)(?=^[\w#$])/gm,o=[];null!=(t=n.exec(e));)t.index===n.lastIndex&&n.lastIndex++,o.push(this.injectProperty(t[1],t[2]));return o},window.Widget.prototype.grabsToParentWhenDragged=function(){return null!=this.parent&&(this.parent instanceof WorldMorph?this.isLockingToPanels:this.amIDirectlyInsideScrollPanelWdgt()?!(!this.parent.parent.canScrollByDraggingForeground||!this.parent.parent.anyScrollBarShowing())||this.isLockingToPanels:!(this.parent instanceof PanelWdgt)||this.isLockingToPanels)},window.Widget.prototype.rejectDrags=function(){return this.defaultRejectDrags},window.Widget.prototype.findFirstLooseMorph=function(){var e;if(this.rejectDrags())return nil;if(null!=this.nonFloatDragging)return this;if(!this.grabsToParentWhenDragged())return this;for(e=this;null!=e.parent;){if((e=e.parent).rejectDrags())return nil;if(null!=e.nonFloatDragging)return e;if(!e.grabsToParentWhenDragged())return e}return nil},window.Widget.prototype.findRootForGrab=function(){return this.findFirstLooseMorph()},window.Widget.prototype.amIDirectlyInsideScrollPanelWdgt=function(){return null!=this.parent&&(this.parent instanceof PanelWdgt||this.parent instanceof SimpleVerticalStackPanelWdgt)&&null!=this.parent.parent&&this.parent.parent instanceof ScrollPanelWdgt&&!(this.parent.parent instanceof ListMorph)},window.Widget.prototype.amIPanelOfScrollPanelWdgt=function(){return null!=this.parent&&this.parent instanceof ScrollPanelWdgt&&!(this.parent instanceof ListMorph)},window.Widget.prototype.amIDirectlyInsideNonTextWrappingScrollPanelWdgt=function(){return!(!this.amIDirectlyInsideScrollPanelWdgt()||this.parent.parent.isTextLineWrapping)},window.Widget.prototype.firstParentOwningMyShadow=function(){var e;if(this.hasShadow())return this;for(e=this;null!=e.parent;){if((e=e.parent).clipsAtRectangularBounds)return nil;if(e.hasShadow())return e}return nil},window.Widget.prototype.detachesWhenDragged=function(){return!0},window.Widget.prototype.isBeingFloatDragged=function(){return null!=world.hand&&(null==world.hand.nonFloatDraggedWdgt&&this.root()instanceof ActivePointerWdgt)},window.Widget.prototype.firstParentThatIsAPopUp=function(){return null==this.parent?this:this.parent.firstParentThatIsAPopUp()},window.Widget.prototype.anyParentPopUpMarkedForClosure=function(){return!!this.isPopUpMarkedForClosure||null!=this.parent&&this.parent.anyParentPopUpMarkedForClosure()},window.Widget.prototype.rootForFocus=function(){return null==this.parent||this.parent instanceof WorldMorph?this:this.parent.rootForFocus()},window.Widget.prototype.moveInFrontOfSiblings=function(){return this.moveAsLastChild(),this.fullChanged()},window.Widget.prototype.bringToForeground=function(){var e,t;return null!=(e=this.rootForFocus())&&e.moveAsLastChild(),null!=(t=this.rootForFocus())?t.fullChanged():void 0},window.Widget.prototype.propagateKillPopUps=function(){if(null!=this.parent)return this.parent.propagateKillPopUps()},window.Widget.prototype.mouseDownLeft=function(e){return this.bringToForeground(),this.escalateEvent("mouseDownLeft",e)},window.Widget.prototype.mouseClickLeft=function(e){return this.escalateEvent("mouseClickLeft",e)},window.Widget.prototype.onClickOutsideMeOrAnyOfMyChildren=function(e,t,n,o){return null!=e?(this.clickOutsideMeOrAnyOfMeChildrenCallback=[e,t,n,o],world.wdgtsDetectingClickOutsideMeOrAnyOfMeChildren.add(this)):world.wdgtsDetectingClickOutsideMeOrAnyOfMeChildren.delete(this)},window.Widget.prototype.justDropped=function(e){return this.rememberFractionalSituationInHoldingPanel()},window.Widget.prototype.wantsDropOf=function(e){return this._acceptsDrops},window.Widget.prototype.enableDrops=function(){return this._acceptsDrops=!0},window.Widget.prototype.disableDrops=function(){return this._acceptsDrops=!1},window.Widget.prototype.pickUp=function(){var e;return null!=(e=this.parent)&&"function"==typeof e.childBeingPickedUp&&e.childBeingPickedUp(this),world.hand.grab(this),null!=this.desiredExtent?this.fullRawMoveTo(world.hand.position().subtract(this.desiredExtent.floorDivideBy(2))):this.fullRawMoveTo(world.hand.position().subtract(this.fullBounds().extent().floorDivideBy(2))),null!=e&&"function"==typeof e.childPickedUp?e.childPickedUp(this):void 0},window.Widget.prototype.grabbedWidgetSwitcheroo=function(){return this},window.Widget.prototype.situation=function(){return this.parent?{origin:this.parent,position:this.position().subtract(this.parent.position())}:nil},window.Widget.prototype.showResizeAndMoveHandlesAndLayoutAdjusters=function(){return this.layoutSpec===LayoutSpec.ATTACHEDAS_FREEFLOATING?(world.temporaryHandlesAndLayoutAdjusters.add(new HandleMorph(this,"resizeHorizontalHandle")),world.temporaryHandlesAndLayoutAdjusters.add(new HandleMorph(this,"resizeVerticalHandle")),world.temporaryHandlesAndLayoutAdjusters.add(new HandleMorph(this,"moveHandle")),world.temporaryHandlesAndLayoutAdjusters.add(new HandleMorph(this,"resizeBothDimensionsHandle"))):(null==this.lastSiblingBeforeMeSuchThat((function(e){return e.layoutSpec===LayoutSpec.ATTACHEDAS_STACK_HORIZONTAL_VERTICALALIGNMENTS_UNDEFINED}))||this.siblingBeforeMeIsA(StackElementsSizeAdjustingMorph)||world.temporaryHandlesAndLayoutAdjusters.add(this.addAsSiblingBeforeMe(new StackElementsSizeAdjustingMorph,nil,LayoutSpec.ATTACHEDAS_STACK_HORIZONTAL_VERTICALALIGNMENTS_UNDEFINED)),null==this.firstSiblingAfterMeSuchThat((function(e){return e.layoutSpec===LayoutSpec.ATTACHEDAS_STACK_HORIZONTAL_VERTICALALIGNMENTS_UNDEFINED}))||this.siblingAfterMeIsA(StackElementsSizeAdjustingMorph)||world.temporaryHandlesAndLayoutAdjusters.add(this.addAsSiblingAfterMe(new StackElementsSizeAdjustingMorph,nil,LayoutSpec.ATTACHEDAS_STACK_HORIZONTAL_VERTICALALIGNMENTS_UNDEFINED)),null!=this.parent?this.parent.showResizeAndMoveHandlesAndLayoutAdjusters():void 0)},window.Widget.prototype.showMoveHandle=function(){return world.temporaryHandlesAndLayoutAdjusters.add(new HandleMorph(this,"moveHandle"))},window.Widget.prototype.inform=function(e){var t,n;return n=e,e?e.toString&&(n=e.toString()):n="NULL",(t=new MenuMorph(this,!1,this,!0,!0,n)).addMenuItem("Ok"),t.popUpCenteredAtHand(world)},window.Widget.prototype.prompt=function(e,t,n,o,i,r,l,a){var s;return(s=new PromptMorph(this,e,t,n,o,i,r,l,a)).popUpAtHand(),s.tempPromptEntryField.text.edit()},window.Widget.prototype.textPrompt=function(e,t,n,o,i,r,l,a){var s,d;return s=new CodePromptMorph(e,t,n,o,i,r,l,a),(d=new WindowWdgt(nil,nil,s)).setExtent(new Point(460,400)),d.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),d.fullRawMoveWithin(world),world.add(d),d.changed()},window.Widget.prototype.pickColor=function(e,t,n){var o,i;return o=new ColorPickerMorph(n),(i=new MenuMorph(this,!1,this,!0,!0,e||"",o)).silentAdd(o),i.addLine(2),i.addMenuItem("Ok",!0,this,t),i.addMenuItem("Close",!0,i,"close"),i.popUpAtHand()},window.Widget.prototype.inspect=function(e){return this.spawnInspector(this)},window.Widget.prototype.inspect2=function(e){return this.spawnInspector2(this)},window.Widget.prototype.spawnInspector=function(e){var t;return(t=new InspectorMorph(e)).fullRawMoveTo(world.hand.position()),t.fullRawMoveWithin(world),world.add(t),t.changed()},window.Widget.prototype.spawnInspector2=function(e){var t,n;return t=new InspectorMorph2(e),(n=new WindowWdgt(nil,nil,t)).setExtent(new Point(560,410)),n.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),n.fullRawMoveWithin(world),world.add(n),n.changed()},window.Widget.prototype.createConsole=function(){var e,t;return e=new ConsoleWdgt(this),(t=new WindowWdgt(nil,nil,e)).setExtent(new Point(285,290)),t.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),t.fullRawMoveWithin(world),world.add(t),t.changed()},window.Widget.prototype.spawnNextTo=function(e,t){return null==t&&(t=e.parent),t.add(this),this.fullRawMoveTo(e.center()),this.fullRawMoveWithin(t)},window.Widget.prototype.buildContextMenu=function(){var e,t,n;return n=this,null!=(e=this.allParentsTopToBottomSuchThat((function(e){return e instanceof ScrollPanelWdgt&&e.takesOverAndCoalescesChildrensMenus})))&&e.length>0&&(n=e[0]),n.overridingContextMenu?n.overridingContextMenu():world.isDevMode?(t=n.getHierarchyMenuMorphs(),n.parent===world?n.buildMorphContextMenu():t.length<2?t[0].buildMorphContextMenu():n.buildHierarchyMenu(t)):void 0},window.Widget.prototype.getHierarchyMenuMorphs=function(){var e;return e=[],this.allParentsTopToBottom().forEach((function(t){if(t.buildMorphContextMenu&&t!==world&&!t.anyParentPopUpMarkedForClosure()&&!(t instanceof SimpleVerticalStackPanelWdgt&&t.parent instanceof SimpleVerticalStackScrollPanelWdgt||t instanceof PanelWdgt&&t.parent instanceof ScrollPanelWdgt||t instanceof ScrollPanelWdgt&&t.parent instanceof FolderWindowWdgt))return e.push(t)})),e},window.Widget.prototype.buildHierarchyMenu=function(e){var t;return null==e&&(e=this.getHierarchyMenuMorphs()),t=new MenuMorph(this,!1,this,!0,!0,nil),e.forEach((function(e){var n;return n=(n=e.toString().slice(0,50)).replace("Wdgt",""),t.addMenuItem(n+" ➜",!1,e,"popupDeveloperMenu",nil,nil,nil,nil,nil,nil,nil,!0)})),t},window.Widget.prototype.popupDeveloperMenu=function(e){return this.buildMorphContextMenu(e).popUpAtHand()},window.Widget.prototype.popUpColorSetter=function(){return this.pickColor("color:","setColor",new Color(0,0,0))},window.Widget.prototype.transparencyPopout=function(e){return this.prompt(e.parent.title+"\nalpha\nvalue:",this,"setAlphaScaled",(100*this.alpha).toString(),nil,1,100,!0)},window.Widget.prototype.createNewStringMorph2WithBackground=function(){var e;return(e=new StringMorph2("Hello World! ⎲ƒ⎳⎷ ⎸⎹ aaa",nil,nil,nil,nil,nil,nil,nil,new Color(230,230,130),1)).isEditable=!0,world.create(e)},window.Widget.prototype.createNewStringMorph2WithoutBackground=function(){var e;return(e=new StringMorph2("Hello World! ⎲ƒ⎳⎷ ⎸⎹ aaa")).isEditable=!0,world.create(e)},window.Widget.prototype.createNewTextMorph2WithBackground=function(){var e;return(e=new TextMorph2("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer rhoncus pharetra nulla, vel maximus lectus posuere a. Phasellus finibus blandit ex vitae varius. Vestibulum blandit velit elementum, ornare ipsum sollicitudin, blandit nunc. Mauris a sapien nibh. Nulla nec bibendum quam, eu condimentum nisl. Cras consequat efficitur nisi sed ornare. Pellentesque vitae urna vitae libero malesuada pharetra.\n\nPellentesque commodo, nulla mattis vulputate porttitor, elit augue vestibulum est, nec congue ex dui a velit. Nullam lectus leo, lobortis eget erat ac, lobortis dignissim magna. Morbi ac odio in purus blandit dignissim. Maecenas at sagittis odio. Suspendisse tempus mattis erat id euismod. Duis semper mauris nec odio sagittis vulputate. Praesent varius ac erat id fringilla. Suspendisse porta sollicitudin bibendum. Pellentesque imperdiet at eros nec euismod. Etiam ac mattis odio, ac finibus nisi.",nil,nil,nil,nil,nil,new Color(230,230,130),1)).isEditable=!0,world.create(e)},window.Widget.prototype.createNewWrappingSimplePlainTextWdgtWithBackground=function(){var e;return(e=new SimplePlainTextWdgt("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer rhoncus pharetra nulla, vel maximus lectus posuere a. Phasellus finibus blandit ex vitae varius. Vestibulum blandit velit elementum, ornare ipsum sollicitudin, blandit nunc. Mauris a sapien nibh. Nulla nec bibendum quam, eu condimentum nisl. Cras consequat efficitur nisi sed ornare. Pellentesque vitae urna vitae libero malesuada pharetra.\n\nPellentesque commodo, nulla mattis vulputate porttitor, elit augue vestibulum est, nec congue ex dui a velit. Nullam lectus leo, lobortis eget erat ac, lobortis dignissim magna. Morbi ac odio in purus blandit dignissim. Maecenas at sagittis odio. Suspendisse tempus mattis erat id euismod. Duis semper mauris nec odio sagittis vulputate. Praesent varius ac erat id fringilla. Suspendisse porta sollicitudin bibendum. Pellentesque imperdiet at eros nec euismod. Etiam ac mattis odio, ac finibus nisi.",nil,nil,nil,nil,nil,new Color(230,230,130),1)).isEditable=!0,world.add(e),e.fullRawMoveTo(new Point(25,40)),e.rawSetExtent(new Point(500,300))},window.Widget.prototype.createNewNonWrappingSimplePlainTextWdgtWithBackground=function(){var e;return(e=new SimplePlainTextWdgt("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer rhoncus pharetra nulla, vel maximus lectus posuere a. Phasellus finibus blandit ex vitae varius.\n\nPellentesque commodo, nulla mattis vulputate porttitor, elit augue vestibulum est, nec congue ex dui a velit. Nullam lectus leo, lobortis eget erat ac, lobortis dignissim magna.",nil,nil,nil,nil,nil,new Color(230,230,130),1)).isEditable=!0,e.maxTextWidth=nil,world.add(e),e.fullRawMoveTo(new Point(540,40)),e.rawSetExtent(new Point(500,300))},window.Widget.prototype.createNewWrappingAndNonWrappingSimplePlainTextWdgtWithBackground=function(){return this.createNewWrappingSimplePlainTextWdgtWithBackground(),this.createNewNonWrappingSimplePlainTextWdgtWithBackground()},window.Widget.prototype.createWrappingSimplePlainTextScrollPanelWdgt=function(){var e;return e=new SimplePlainTextScrollPanelWdgt("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer rhoncus pharetra nulla, vel maximus lectus posuere a. Phasellus finibus blandit ex vitae varius. Vestibulum blandit velit elementum, ornare ipsum sollicitudin, blandit nunc. Mauris a sapien nibh. Nulla nec bibendum quam, eu condimentum nisl. Cras consequat efficitur nisi sed ornare. Pellentesque vitae urna vitae libero malesuada pharetra.\n\nPellentesque commodo, nulla mattis vulputate porttitor, elit augue vestibulum est, nec congue ex dui a velit. Nullam lectus leo, lobortis eget erat ac, lobortis dignissim magna. Morbi ac odio in purus blandit dignissim. Maecenas at sagittis odio. Suspendisse tempus mattis erat id euismod. Duis semper mauris nec odio sagittis vulputate. Praesent varius ac erat id fringilla. Suspendisse porta sollicitudin bibendum. Pellentesque imperdiet at eros nec euismod. Etiam ac mattis odio, ac finibus nisi.",!0,10),world.add(e),e.fullRawMoveTo(new Point(20,25)),e.rawSetExtent(new Point(390,305))},window.Widget.prototype.createNonWrappingSimplePlainTextScrollPanelWdgt=function(){var e;return e=new SimplePlainTextScrollPanelWdgt("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer rhoncus pharetra nulla, vel maximus \n\nPellentesque commodo, nulla mattis vulputate porttitor, elit augue vestibulum est, nec congue nisi.",!1,10),world.add(e),e.fullRawMoveTo(new Point(430,25)),e.rawSetExtent(new Point(390,305))},window.Widget.prototype.createWrappingAndNonWrappingSimplePlainTextScrollPanelWdgt=function(){return this.createWrappingSimplePlainTextScrollPanelWdgt(),this.createNonWrappingSimplePlainTextScrollPanelWdgt()},window.Widget.prototype.createWrappingSimplePlainTextPanelWdgt=function(){var e;return e=new SimplePlainTextPanelWdgt("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer rhoncus pharetra nulla, vel maximus lectus posuere a. Phasellus finibus blandit ex vitae varius. Vestibulum blandit velit elementum, ornare ipsum sollicitudin, blandit nunc. Mauris a sapien nibh. Nulla nec bibendum quam, eu condimentum nisl. Cras consequat efficitur nisi sed ornare. Pellentesque vitae urna vitae libero malesuada pharetra.\n\nPellentesque commodo, nulla mattis vulputate porttitor, elit augue vestibulum est, nec congue ex dui a velit. Nullam lectus leo, lobortis eget erat ac, lobortis dignissim magna. Morbi ac odio in purus blandit dignissim. Maecenas at sagittis odio. Suspendisse tempus mattis erat id euismod. Duis semper mauris nec odio sagittis vulputate. Praesent varius ac erat id fringilla. Suspendisse porta sollicitudin bibendum. Pellentesque imperdiet at eros nec euismod. Etiam ac mattis odio, ac finibus nisi.",!0,10),world.add(e),e.fullRawMoveTo(new Point(20,25)),e.rawSetExtent(new Point(390,305))},window.Widget.prototype.createNonWrappingSimplePlainTextPanelWdgt=function(){var e;return e=new SimplePlainTextPanelWdgt("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer rhoncus pharetra nulla, vel maximus \n\nPellentesque commodo, nulla mattis vulputate porttitor, elit augue vestibulum est, nec congue nisi.",!1,10),world.add(e),e.fullRawMoveTo(new Point(430,25)),e.rawSetExtent(new Point(390,305))},window.Widget.prototype.createWrappingAndNonWrappingSimplePlainTextPanelWdgt=function(){return this.createWrappingSimplePlainTextPanelWdgt(),this.createNonWrappingSimplePlainTextPanelWdgt()},window.Widget.prototype.createNewStringMorph3WithBackground=function(){var e;return(e=new StringMorph3("Hello World! ⎲ƒ⎳⎷ ⎸⎹ aaa",nil,nil,nil,nil,nil,nil,nil,new Color(230,230,130),1)).isEditable=!0,world.create(e)},window.Widget.prototype.createNewTextMorph3WithBackground=function(){var e;return(e=new TextMorph3("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer rhoncus pharetra nulla, vel maximus lectus posuere a. Phasellus finibus blandit ex vitae varius. Vestibulum blandit velit elementum, ornare ipsum sollicitudin, blandit nunc. Mauris a sapien nibh. Nulla nec bibendum quam, eu condimentum nisl. Cras consequat efficitur nisi sed ornare. Pellentesque vitae urna vitae libero malesuada pharetra.\n\nPellentesque commodo, nulla mattis vulputate porttitor, elit augue vestibulum est, nec congue ex dui a velit. Nullam lectus leo, lobortis eget erat ac, lobortis dignissim magna. Morbi ac odio in purus blandit dignissim. Maecenas at sagittis odio. Suspendisse tempus mattis erat id euismod. Duis semper mauris nec odio sagittis vulputate. Praesent varius ac erat id fringilla. Suspendisse porta sollicitudin bibendum. Pellentesque imperdiet at eros nec euismod. Etiam ac mattis odio, ac finibus nisi.",nil,nil,nil,nil,nil,new Color(255,255,54),.5)).isEditable=!0,world.create(e)},window.Widget.prototype.createSimpleVerticalStackPanelWdgt=function(){var e;return e=new SimpleVerticalStackPanelWdgt,world.add(e),e.fullRawMoveTo(new Point(35,30)),e.rawSetExtent(new Point(370,325))},window.Widget.prototype.createSimpleVerticalStackScrollPanelWdgt=function(){var e;return e=new SimpleVerticalStackScrollPanelWdgt,world.add(e),e.fullRawMoveTo(new Point(430,25)),e.rawSetExtent(new Point(370,325))},window.Widget.prototype.createSimpleVerticalStackPanelWdgtAndScrollPanel=function(){return this.createSimpleVerticalStackPanelWdgt(),this.createSimpleVerticalStackScrollPanelWdgt()},window.Widget.prototype.createSimpleVerticalStackPanelWdgtFreeContentsWidth=function(){var e;return e=new SimpleVerticalStackPanelWdgt(null,null,null,!1),world.add(e),e.fullRawMoveTo(new Point(35,30)),e.rawSetExtent(new Point(370,325))},window.Widget.prototype.createSimpleVerticalStackScrollPanelWdgtFreeContentsWidth=function(){var e;return e=new SimpleVerticalStackScrollPanelWdgt(!1),world.add(e),e.fullRawMoveTo(new Point(430,25)),e.rawSetExtent(new Point(370,325))},window.Widget.prototype.createSimpleVerticalStackPanelWdgtAndScrollPanelFreeContentsWidth=function(){return this.createSimpleVerticalStackPanelWdgt(),this.createSimpleVerticalStackScrollPanelWdgt()},window.Widget.prototype.createSimpleDocumentScrollPanelWdgt=function(){var e;return e=new SimpleDocumentScrollPanelWdgt,world.add(e),e.fullRawMoveTo(new Point(35,30)),e.rawSetExtent(new Point(370,325))},window.Widget.prototype.showOutputPins=function(e,t,n,o){return world.morphsToBePinouted.add(t)},window.Widget.prototype.removeOutputPins=function(e,t,n,o){return world.morphsToBePinouted.delete(t)},window.Widget.prototype.testMenu=function(e,t){var n;return(n=new MenuMorph(e,!1,t,!0,!0,nil)).addMenuItem("serialise morph to memory",!0,t,"serialiseToMemory"),n.addMenuItem("deserialize from memory and attach to world",!0,t,"deserialiseFromMemoryAndAttachToWorld"),n.addMenuItem("deserialize from memory and attach to hand",!0,t,"deserialiseFromMemoryAndAttachToHand"),n.addMenuItem("attach with horizontal layout",!0,this,"attachWithHorizLayout"),n.addMenuItem("make spacers transparent",!0,this,"makeSpacersTransparent"),n.addMenuItem("make spacers opaque",!0,this,"makeSpacersOpaque"),n.addMenuItem("show adders",!0,this,"showAdders"),n.addMenuItem("remove adders",!0,this,"removeAdders"),n.addMenuItem("StringMorph2 without background",!0,this,"createNewStringMorph2WithoutBackground"),n.addMenuItem("StringMorph2 with background",!0,this,"createNewStringMorph2WithBackground"),n.addMenuItem("TextMorph2 with background",!0,this,"createNewTextMorph2WithBackground"),n.addMenuItem("StringMorph3 with background",!0,this,"createNewStringMorph3WithBackground"),n.addMenuItem("TextMorph3 with background",!0,this,"createNewTextMorph3WithBackground"),world.morphsToBePinouted.has(t)?n.addMenuItem("remove output pins",!0,this,"removeOutputPins"):n.addMenuItem("show output pins",!0,this,"showOutputPins"),t.collapsed?n.addMenuItem("un-collapse",!0,this,"unCollapse"):n.addMenuItem("collapse",!0,this,"collapse"),n.addMenuItem("others ➜",!1,this,"popUpFirstMenu","others"),n.addMenuItem("others 2 ➜",!1,this,"popUpSecondMenu","others"),n.popUpAtHand()},window.Widget.prototype.analogClock=function(){return world.create(new AnalogClockWdgt)},window.Widget.prototype.popUpIconsMenu=function(e){var t;return(t=new MenuMorph(e,!1,this,!0,!0,"icons")).addMenuItem("Destroy icon",!0,menusHelper,"createDestroyIconMorph"),t.addMenuItem("Under the carpet icon",!0,menusHelper,"createUnderCarpetIconMorph"),t.addMenuItem("Collapsed state icon",!0,menusHelper,"createCollapsedStateIconMorph"),t.addMenuItem("Uncollapsed state icon",!0,menusHelper,"createUncollapsedStateIconMorph"),t.addMenuItem("Close icon",!0,menusHelper,"createCloseIconButtonMorph"),t.addMenuItem("Scratch area icon",!0,menusHelper,"createScratchAreaIconMorph"),t.addMenuItem("Flora icon",!0,menusHelper,"createFloraIconMorph"),t.addMenuItem("Scooter icon",!0,menusHelper,"createScooterIconMorph"),t.addMenuItem("Heart icon",!0,menusHelper,"createHeartIconMorph"),t.addMenuItem("more 1 ➜",!1,menusHelper,"popUpMore1IconsMenu","others"),t.addMenuItem("more 2 ➜",!1,menusHelper,"popUpMore2IconsMenu","others"),t.addMenuItem("arrows ➜",!1,menusHelper,"popUpArrowsIconsMenu","others"),t.addMenuItem("maps ➜",!1,menusHelper,"popUpMapsMenu","maps"),t.addMenuItem("more 3 ➜",!1,menusHelper,"popUpMore3IconsMenu","maps"),t.popUpAtHand()},window.Widget.prototype.popUpVerticalStackMenu=function(e){var t;return(t=new MenuMorph(e,!1,this,!0,!0,"Vertical stack")).addMenuItem("vertical stack constrained contents width",!0,this,"createSimpleVerticalStackPanelWdgt"),t.addMenuItem("vertical stack scrollpanel constrained contents width",!0,this,"createSimpleVerticalStackScrollPanelWdgt"),t.addMenuItem("vertical stack panel and scrollpanel constrained contents width",!0,this,"createSimpleVerticalStackPanelWdgtAndScrollPanel"),t.addMenuItem("vertical stack free contents width",!0,this,"createSimpleVerticalStackPanelWdgtFreeContentsWidth"),t.addMenuItem("vertical stack scrollpanel free contents width",!0,this,"createSimpleVerticalStackScrollPanelWdgtFreeContentsWidth"),t.addMenuItem("vertical stack panel and scrollpanel free contents width",!0,this,"createSimpleVerticalStackPanelWdgtAndScrollPanelFreeContentsWidth"),t.popUpAtHand()},window.Widget.prototype.popUpDocumentMenu=function(e){var t;return(t=new MenuMorph(e,!1,this,!0,!0,"Document")).addMenuItem("simple document scrollpanel",!0,this,"createSimpleDocumentScrollPanelWdgt"),t.addMenuItem("simple document",!0,menusHelper,"createSimpleDocumentWdgt"),t.popUpAtHand()},window.Widget.prototype.popUpWindowsMenu=function(e){var t;return(t=new MenuMorph(e,!1,this,!0,!0,"Windows")).addMenuItem("empty window",!0,this,"createEmptyWindow"),t.addMenuItem("empty internal window",!0,this,"createEmptyInternalWindow"),t.popUpAtHand()},window.Widget.prototype.popUpShortcutsAndScriptsMenu=function(e){var t;return(t=new MenuMorph(e,!1,this,!0,!0,"Shortcuts & Scripts")).addMenuItem("basement shortcut",!0,menusHelper,"basementIconAndText"),t.addMenuItem("new script",!0,menusHelper,"newScriptWindow"),t.addMenuItem("Fizzypaint launcher",!0,menusHelper,"createFizzyPaintLauncherAndItsIcon"),t.addMenuItem("Simple doc launcher",!0,menusHelper,"createSimpleDocumentLauncherAndItsIcon"),t.addMenuItem("Simple slide launcher",!0,menusHelper,"createSimpleSlideLauncherAndItsIcon"),t.addMenuItem("Link",!0,menusHelper,"createSimpleLinkWdgt"),t.addMenuItem("Video link",!0,menusHelper,"createSimpleVideoLinkWdgt"),t.popUpAtHand()},window.Widget.prototype.popUpPatchProgrammingMenu=function(e){var t;return(t=new MenuMorph(e,!1,this,!0,!0,"Patch Programming")).addMenuItem("fanout",!0,menusHelper,"createFanout"),t.addMenuItem("calculating node",!0,menusHelper,"createCalculatingPatchNode"),t.addMenuItem("diffing node",!0,menusHelper,"createDiffingPatchNode"),t.addMenuItem("slider",!0,menusHelper,"createSliderWithSmallestValueAtBottomEnd"),t.addMenuItem("regex subst. node",!0,menusHelper,"createRegexSubstitutionPatchNodeWdgt"),t.popUpAtHand()},window.Widget.prototype.createEmptyInternalWindow=function(){var e;return(e=new WindowWdgt(nil,nil,nil,!0)).fullRawMoveTo(world.hand.position()),e.fullRawMoveWithin(world),world.add(e),e.changed()},window.Widget.prototype.createEmptyWindow=function(){var e;return(e=new WindowWdgt(nil,nil,nil)).fullRawMoveTo(world.hand.position()),e.fullRawMoveWithin(world),world.add(e),e.changed()},window.Widget.prototype.popUpSimplePlainTextWdgtMenu=function(e){var t;return(t=new MenuMorph(e,!1,this,!0,!0,"Simple plain text")).addMenuItem("simple plain text wrapping",!0,this,"createNewWrappingSimplePlainTextWdgtWithBackground"),t.addMenuItem("simple plain text not wrapping",!0,this,"createNewNonWrappingSimplePlainTextWdgtWithBackground"),t.addMenuItem("simple plain text (wrapping / not wrapping)",!0,this,"createNewWrappingAndNonWrappingSimplePlainTextWdgtWithBackground"),t.addMenuItem("simple plain text panel wrapping",!0,this,"createWrappingSimplePlainTextPanelWdgt"),t.addMenuItem("simple plain text panel not wrapping",!0,this,"createNonWrappingSimplePlainTextPanelWdgt"),t.addMenuItem("simple plain text panel (wrapping / not wrapping)",!0,this,"createWrappingAndNonWrappingSimplePlainTextPanelWdgt"),t.addMenuItem("simple plain text scrollpanel wrapping",!0,this,"createWrappingSimplePlainTextScrollPanelWdgt"),t.addMenuItem("simple plain text scrollpanel not wrapping",!0,this,"createNonWrappingSimplePlainTextScrollPanelWdgt"),t.addMenuItem("simple plain text scrollpanel (wrapping / not wrapping)",!0,this,"createWrappingAndNonWrappingSimplePlainTextScrollPanelWdgt"),t.popUpAtHand()},window.Widget.prototype.buildBaseMorphClassContextMenu=function(e){var t,n;return t=new MenuMorph(e,!1,this,!0,!0,this.constructor.name.replace("Wdgt","")||this.constructor.toString().replace("Wdgt","").split(" ")[1].split("(")[0]),world.isIndexPage?(t.addMenuItem("color...",!0,this,"popUpColorSetter","choose another color \nfor this morph"),t.addMenuItem("transparency...",!0,this,"transparencyPopout","set this morph's\nalpha value"),t.addMenuItem("resize/move...",!0,this,"showResizeAndMoveHandlesAndLayoutAdjusters","show a handle\nwhich can be floatDragged\nto change this morph's extent"),t.addLine(),t.addMenuItem("duplicate",!0,this,"duplicateMenuAction","make a copy"),t.addMenuItem("create shortcut",!0,this,"createReference","creates a reference to this wdgt and leaves it on the desktop"),t.addMenuItem("pick up",!0,this,"pickUp","disattach and put \ninto the hand")):(t.addMenuItem("color...",!0,this,"popUpColorSetter","choose another color \nfor this morph"),t.addMenuItem("transparency...",!0,this,"transparencyPopout","set this morph's\nalpha value"),t.addMenuItem("resize/move...",!0,this,"showResizeAndMoveHandlesAndLayoutAdjusters","show a handle\nwhich can be floatDragged\nto change this morph's extent"),t.addLine(),t.addMenuItem("duplicate",!0,this,"duplicateMenuActionAndPickItUp","make a copy\nand pick it up"),t.addMenuItem("pick up",!0,this,"pickUp","disattach and put \ninto the hand"),t.addMenuItem("attach...",!0,this,"attach","stick this morph\nto another one"),t.addMenuItem("inspect",!0,this,"inspect","open a window\non all properties"),t.addMenuItem("create shortcut",!0,this,"createReference","creates a reference to this wdgt and leaves it on the desktop"),t.addMenuItem("test menu ➜",!1,this,"testMenu","debugging and testing operations"),t.addLine()),this.parent instanceof PanelWdgt&&!(this.parent instanceof ScrollPanelWdgt)&&(n=this.parent instanceof WorldMorph?"desktop":"panel",this.isLockingToPanels?t.addMenuItem("unlock from "+n,!0,this,"toggleIsLockingToPanels","make this morph\nunmovable"):t.addMenuItem("lock to "+n,!0,this,"toggleIsLockingToPanels","make this morph\nmovable")),world.isIndexPage||t.addMenuItem("hide",!0,this,"hide"),this instanceof WindowWdgt?t.addMenuItem("close",!0,this,"close"):t.addMenuItem("delete",!0,this,"close"),world.isIndexPage?(t.addLine(),t.addMenuItem("dev ➜",!1,menusHelper,"popUpDevToolsMenu","dev tools")):t.addMenuItem("destroy",!0,this,"fullDestroy"),t},window.Widget.prototype.addMorphSpecificMenuEntries=function(e,t){var n;if(this.layoutSpec===LayoutSpec.ATTACHEDAS_VERTICAL_STACK_ELEMENT&&(null!=(n=this.parent)?n.constrainContentWidth:void 0))return this.layoutSpecDetails.addMorphSpecificMenuEntries(e,t)},window.Widget.prototype.buildMorphContextMenu=function(e){var t;return t=this.buildBaseMorphClassContextMenu(e),this.addMorphSpecificMenuEntries(e,t),null!=this.addShapeSpecificMenuItems&&(t=this.addShapeSpecificMenuItems(t)),t},window.Widget.prototype.calculateAlphaScaled=function(e){var t,n;return"number"==typeof e?(n=e/100,Math.min(Math.max(n,.1),1)):(t=parseFloat(e),isNaN(t)?void 0:(n=t/100,Math.min(Math.max(n,.1),1)))},window.Widget.prototype.setPadding=function(e,t){var n;return n=null!=(null!=t?t.getValue:void 0)?t.getValue():e,this.paddingTop===n&&this.paddingBottom===n&&this.paddingLeft===n&&this.paddingRight===n||(this.paddingTop=n,this.paddingBottom=n,this.paddingLeft=n,this.paddingRight=n,this.changed()),n},window.Widget.prototype.setPaddingTop=function(e,t){var n;return(n=null!=(null!=t?t.getValue:void 0)?t.getValue():e)&&this.paddingTop!==n&&(this.paddingTop=n,this.changed()),n},window.Widget.prototype.setPaddingBottom=function(e,t){var n;return(n=null!=(null!=t?t.getValue:void 0)?t.getValue():e)&&this.paddingBottom!==n&&(this.paddingBottom=n,this.changed()),n},window.Widget.prototype.setPaddingLeft=function(e,t){var n;return(n=null!=(null!=t?t.getValue:void 0)?t.getValue():e)&&this.paddingLeft!==n&&(this.paddingLeft=n,this.changed()),n},window.Widget.prototype.setPaddingRight=function(e,t){var n;return(n=null!=(null!=t?t.getValue:void 0)?t.getValue():e)&&this.paddingRight!==n&&(this.paddingRight=n,this.changed()),n},window.Widget.prototype.setAlphaScaled=function(e,t){var n;return(n=null!=(null!=t?t.getValue:void 0)?t.getValue():e)&&(n=this.calculateAlphaScaled(n),this.alpha!==n&&(this.alpha=n,this.changed())),n},window.Widget.prototype.newParentChoice=function(e,t){if(this.add(t),this instanceof ScrollPanelWdgt)return this.adjustContentsBounds(),this.adjustScrollBars()},window.Widget.prototype.newParentChoiceWithHorizLayout=function(e,t){if(this.add(t,nil,LayoutSpec.ATTACHEDAS_STACK_HORIZONTAL_VERTICALALIGNMENTS_UNDEFINED),this instanceof ScrollPanelWdgt)return this.adjustContentsBounds(),this.adjustScrollBars()},window.Widget.prototype.attach=function(){var e,t,n;return e=world.plausibleTargetAndDestinationMorphs(this),t=[],e.forEach(e=>{if(e!==this.parent)return t.push(e)}),t.length>0?(n=new MenuMorph(this,!1,this,!0,!0,"choose new parent:"),t.forEach(e=>n.addMenuItem(e.toString().slice(0,50),!0,e,"newParentChoice",nil,nil,nil,nil,nil,nil,nil,!0))):n=new MenuMorph(this,!1,this,!0,!0,"no morphs to attach to"),n.popUpAtHand()},window.Widget.prototype.attachWithHorizLayout=function(){var e,t,n;return e=world.plausibleTargetAndDestinationMorphs(this),t=[],e.forEach(e=>{if(e!==this.parent)return t.push(e)}),t.length>0?(n=new MenuMorph(this,!1,this,!0,!0,"choose new parent:"),t.forEach(e=>n.addMenuItem(e.toString().slice(0,50),!0,e,"newParentChoiceWithHorizLayout",nil,nil,nil,nil,nil,nil,nil,!0))):n=new MenuMorph(this,!1,this,!0,!0,"no morphs to attach to"),n.popUpAtHand()},window.Widget.prototype.toggleIsLockingToPanels=function(){return this.isLockingToPanels=!this.isLockingToPanels},window.Widget.prototype.lockToPanels=function(){return this.isLockingToPanels=!0},window.Widget.prototype.unlockFromPanels=function(){return this.isLockingToPanels=!1},window.Widget.prototype.enableDragsDropsAndEditing=function(){var e,t,n,o,i,r,l;if(!this.dragsDropsAndEditingEnabled){if(this.dragsDropsAndEditingEnabled=!0,null!=this.contents){if((l=this.contents).dragsDropsAndEditingEnabled)return;l.dragsDropsAndEditingEnabled=!0}else l=this;if(null!=(i=this.parent)&&"function"==typeof i.makePencilYellow&&i.makePencilYellow(),l.dragsDropsAndEditingEnabled=!0,l.enableDrops(),null!=(e=this.childrenNotHandlesNorCarets(l))){for(r=[],n=0,o=e.length;n<o;n++)(t=e[n]).unlockFromPanels(),"function"==typeof t.contrastOutFromPanelColor&&t.contrastOutFromPanelColor(),null!=t.isEditable?r.push(t.isEditable=!0):r.push(void 0);return r}}},window.Widget.prototype.disableDragsDropsAndEditing=function(){var e,t,n,o,i,r,l,a;if(this.dragsDropsAndEditingEnabled){if(this.dragsDropsAndEditingEnabled=!1,null!=this.contents){if(!(a=this.contents).dragsDropsAndEditingEnabled)return;a.dragsDropsAndEditingEnabled=!1}else a=this;if(null!=(i=this.parent)&&"function"==typeof i.makePencilClear&&i.makePencilClear(),a.disableDrops(),a.dragsDropsAndEditingEnabled=!1,null!=(e=this.childrenNotHandlesNorCarets(a))){for(l=[],n=0,o=e.length;n<o;n++)(t=e[n]).lockToPanels(),"function"==typeof t.blendInWithPanelColor&&t.blendInWithPanelColor(),null!=t.isEditable?(t.isEditable=!1,(null!=(r=world.caret)?r.target:void 0)===t?l.push(world.stopEditing()):l.push(void 0)):l.push(void 0);return l}}},window.Widget.prototype.prepareToBeGrabbed=function(){return this.userMovedThisFromComputedPosition=!0,this.unlockFromPanels(),this.setLayoutSpec(LayoutSpec.ATTACHEDAS_FREEFLOATING)},window.Widget.prototype.deduplicateSettersAndSortByMenuEntryString=function(e,t){var n,o,i;for(e=e.uniqueKeepOrder(),t=t.uniqueKeepOrder(),i=[],n=0;n<e.length;)i.push({menuEntriesStrings:e[n],functionNamesStrings:t[n]}),n++;for(i.sort((function(e,t){return e.menuEntriesStrings<t.menuEntriesStrings?-1:e.menuEntriesStrings===t.menuEntriesStrings?0:1})),o=0;o<i.length;)e[o]=i[o].menuEntriesStrings,t[o]=i[o].functionNamesStrings,o++;return[e,t]},window.Widget.prototype.colorSetters=function(e,t){return null==e&&(e=[],t=[]),e.push("color","background color"),t.push("setColor","setBackgroundColor"),this.deduplicateSettersAndSortByMenuEntryString(e,t)},window.Widget.prototype.stringSetters=function(e,t){return null==e&&(e=[],t=[]),[e,t]},window.Widget.prototype.numericalSetters=function(e,t){return null==e&&(e=[],t=[]),e.push("width","height","alpha 0-100","padding","padding top","padding bottom","padding left","padding right"),t.push("rawSetWidth","rawSetHeight","setAlphaScaled","setPadding","setPaddingTop","setPaddingBottom","setPaddingLeft","setPaddingRight"),null!=this.addShapeSpecificNumericalSetters&&([e,t]=this.addShapeSpecificNumericalSetters(e,t)),this.deduplicateSettersAndSortByMenuEntryString(e,t)},window.Widget.prototype.allSetters=function(e,t){return null==e&&(e=[],t=[]),[e,t]=this.colorSetters(e,t),[e,t]=this.stringSetters(e,t),[e,t]=this.numericalSetters(e,t),[e,t]},window.Widget.prototype.allEntryFields=function(){return this.collectAllChildrenBottomToTopSuchThat((function(e){return e.isEditable&&(e instanceof StringMorph||e instanceof StringMorph2||e instanceof TextMorph||e instanceof SimplePlainTextWdgt)}))},window.Widget.prototype.nextEntryField=function(e){var t,n;return-1!==(n=(t=this.allEntryFields()).indexOf(e))&&t.length>n+1?t[n+1]:t[0]},window.Widget.prototype.previousEntryField=function(e){var t,n;return-1!==(n=(t=this.allEntryFields()).indexOf(e))?n>0?t[n-1]:t[t.length-1]:t[0]},window.Widget.prototype.tab=function(e){return this.nextTab?this.nextTab(e):this.parent?this.parent.tab(e):void 0},window.Widget.prototype.backTab=function(e){return this.previousTab?this.previousTab(e):this.parent?this.parent.backTab(e):void 0},window.Widget.prototype.escalateEvent=function(e,t,n,o,i,r,l){var a;if(null!=(a=this.parent)){for(;!a[e]&&null!=a.parent;)a=a.parent;if(a[e])return a[e](t,n,o,i,r,l)}},window.Widget.prototype.evaluateString=function(codeSource){var result;return result=eval(compileFGCode(codeSource,!0)),this.reLayout(),this.changed()},window.Widget.prototype.isTouching=function(e){var t,n;return t=(n=this.overlappingImage(e)).getContext("2d").getImageData(1,1,n.width,n.height).data,null!=detect(t,(function(e){return 0!==e}))},window.Widget.prototype.overlappingImage=function(e){var t,n,o,i,r;return n=this.fullBounds(),r=e.fullBounds(),i=n.intersect(r),(t=(o=newCanvas(i.extent().scaleBy(ceilPixelRatio))).getContext("2d")).scale(ceilPixelRatio,ceilPixelRatio),i.width()<1||i.height()<1?newCanvas(new Point(1,1).scaleBy(ceilPixelRatio)):(t.drawImage(this.fullImage(),Math.round(i.origin.x-n.origin.x),Math.round(i.origin.y-n.origin.y)),t.globalCompositeOperation="source-in",t.drawImage(e.fullImage(),Math.round(r.origin.x-i.origin.x),Math.round(r.origin.y-i.origin.y)),o)},window.Widget.prototype.minWidth=10,window.Widget.prototype.desiredWidth=20,window.Widget.prototype.maxWidth=100,window.Widget.prototype.minHeight=10,window.Widget.prototype.desiredHeight=20,window.Widget.prototype.maxHeight=100,window.Widget.prototype.invalidateLayout=function(){if(this.layoutIsValid&&window.morphsThatMaybeChangedLayout.push(this),this.layoutIsValid=!1,this.layoutSpec!==LayoutSpec.ATTACHEDAS_FREEFLOATING&&null!=this.parent)return this.parent.invalidateLayout()},window.Widget.prototype.implementsDeferredLayout=function(){return this.doLayout!==Widget.prototype.doLayout},window.Widget.prototype.doLayout=function(e){return null==e&&(null!=this.desiredExtent?(e=this.desiredExtent,this.desiredExtent=nil):e=this.extent(),null!=this.desiredPosition?(e=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(e),this.desiredPosition=nil):e=new Rectangle(this.position()).setBoundsWidthAndHeight(e)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(this.fullRawMoveTo(e.origin),this instanceof TextMorph||this instanceof SimplePlainTextWdgt?this.rawSetBounds(e):this.rawSetExtent(e.extent()),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted())},window.Widget.instancesCounter=0,window.Widget.lastBuiltInstanceNumericID=0,window.Widget.morphStaticMethod=function(){return 3.14},window.Widget.morphFromUniqueIDString=function(e){var t;return null==(t=world.topWdgtSuchThat(t=>t.uniqueIDString()===e))&&alert("theUniqueID "+e+" not found!"),t},window.Widget.roundNumericIDsToNextThousand=function(){return this.lastBuiltInstanceNumericID%1e3==0&&this.lastBuiltInstanceNumericID++,this.lastBuiltInstanceNumericID=1e3*Math.ceil(this.lastBuiltInstanceNumericID/1e3)},window.Widget.instances=new Set,window.ActivePointerWdgt=function(e){this.world=e,this.mouseOverList=new Set,ActivePointerWdgt.__super__.constructor.call(this),this.minimumExtent=new Point(0,0),this.silentRawSetBounds(Rectangle.EMPTY),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ActivePointerWdgt,"name",{value:"ActivePointerWdgt"}),window.ActivePointerWdgt.__super__=window.Widget.prototype,window.ActivePointerWdgt=extend(window.ActivePointerWdgt,window.Widget),window.ActivePointerWdgt.prototype.world=nil,window.ActivePointerWdgt.prototype.mouseButton=nil,window.ActivePointerWdgt.prototype.mouseDownWdgt=nil,window.ActivePointerWdgt.prototype.mouseDownPosition=nil,window.ActivePointerWdgt.prototype.wdgtToGrab=nil,window.ActivePointerWdgt.prototype.grabOrigin=nil,window.ActivePointerWdgt.prototype.mouseOverList=nil,window.ActivePointerWdgt.prototype.doubleClickWdgt=nil,window.ActivePointerWdgt.prototype.tripleClickWdgt=nil,window.ActivePointerWdgt.prototype.nonFloatDraggedWdgt=nil,window.ActivePointerWdgt.prototype.nonFloatDragPositionWithinWdgtAtStart=nil,window.ActivePointerWdgt.prototype.previousNonFloatDraggingPos=nil,window.ActivePointerWdgt.prototype.clippedThroughBounds=function(){return this.checkClippedThroughBoundsCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes,this.clippedThroughBoundsCache=this.boundingBox(),this.clippedThroughBoundsCache},window.ActivePointerWdgt.prototype.clipThrough=function(){return this.checkClipThroughCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes,this.clipThroughCache=this.boundingBox(),this.clipThroughCache},window.ActivePointerWdgt.prototype.topWdgtUnderPointer=function(){var e;return null!=(e=world.topWdgtSuchThat(e=>e.clippedThroughBounds().containsPoint(this.position())&&e.visibleBasedOnIsVisibleProperty()&&!e.isCollapsed()&&(e.noticesTransparentClick||!e.isTransparentAt(this.position()))&&!(e instanceof CaretMorph)&&null==e.wdgtThisWdgtIsHighlighting&&null==e.wdgtThisWdgtIsPinouting))?e:this.world},window.ActivePointerWdgt.prototype.menuAtPointer=function(){return world.topWdgtSuchThat(e=>e.clippedThroughBounds().containsPoint(this.position())&&e.visibleBasedOnIsVisibleProperty()&&!e.isCollapsed()&&(e.noticesTransparentClick||!e.isTransparentAt(this.position()))&&e instanceof MenuMorph)},window.ActivePointerWdgt.prototype.openContextMenuAtPointer=function(e){var t;for(this.destroyTemporaryHandlesAndLayoutAdjustersIfHandHasNotActionedThem(e),this.stopEditingIfWidgetDoesntNeedCaretOrActionIsElsewhere(e),"undefined"!=typeof Automator&&null!==Automator&&Automator.state===Automator.PLAYING&&(Automator.fade("rightMouseButtonIndicator",0,1,10,(new Date).getTime()),setTimeout(()=>Automator.fade("rightMouseButtonIndicator",1,0,500,(new Date).getTime()),100)),t=e.buildContextMenu();!t&&e.parent;)t=(e=e.parent).buildContextMenu();if(t)return t.popUpAtHand()},window.ActivePointerWdgt.prototype.allWdgtsAtPointer=function(){return world.collectAllChildrenBottomToTopSuchThat(e=>e.visibleBasedOnIsVisibleProperty()&&!e.isCollapsed()&&e.clippedThroughBounds().containsPoint(this.position()))},window.ActivePointerWdgt.prototype.dropTargetFor=function(e){var t;for(t=this.topWdgtUnderPointer();!t.wantsDropOf(e);)t=t.parent;return t},window.ActivePointerWdgt.prototype.grab=function(e,t,n){var o,i;return e instanceof WorldMorph?nil:(i=e.parent,this.isThisPointerFloatDraggingSomething()?void 0:("undefined"!=typeof Automator&&null!==Automator&&(world.automator.recorder.addGrabCommand(),Automator.state===Automator.RECORDING&&("grab",o=world.automator.tagsCollectedWhileRecordingTest,indexOf.call(o,"grab")<0&&o.push("grab"))),world.stopEditing(),n?(e.fullRawMoveTo(this.position().subtract(e.extent().floorDivideBy(2))),e.fullRawMoveWithin(world)):null!=e.extentToGetWhenDraggedFromGlassBox&&i instanceof GlassBoxBottomWdgt?(e.rawSetExtent(e.extentToGetWhenDraggedFromGlassBox),e.fullRawMoveTo(this.position().subtract(e.extent().floorDivideBy(2))),e.fullRawMoveWithin(world)):null!=t&&e.fullMoveTo(e.position().add(t)),this.grabOrigin=e.situation(),"function"==typeof e.prepareToBeGrabbed&&e.prepareToBeGrabbed(),this.add(e),"function"==typeof e.justBeenGrabbed&&e.justBeenGrabbed(i),e.addShadow(new Point(6,6),.1),this.fullChanged(),null!=i&&"function"==typeof i.reactToGrabOf?i.reactToGrabOf(e):void 0))},window.ActivePointerWdgt.prototype.isThisPointerDraggingSomething=function(){return this.isThisPointerFloatDraggingSomething()||this.isThisPointerNonFloatDraggingSomething()},window.ActivePointerWdgt.prototype.isThisPointerFloatDraggingSomething=function(){return this.children.length>0},window.ActivePointerWdgt.prototype.isThisPointerNonFloatDraggingSomething=function(){return null!=this.nonFloatDraggedWdgt},window.ActivePointerWdgt.prototype.drop=function(){var e,t,n;if(this.isThisPointerFloatDraggingSomething())return"undefined"!=typeof Automator&&null!==Automator&&(world.automator.recorder.addDropCommand(),Automator.state===Automator.RECORDING&&("drop",e=world.automator.tagsCollectedWhileRecordingTest,indexOf.call(e,"drop")<0&&e.push("drop"))),t=("function"==typeof(n=this.children[0]).rejectsBeingDropped?n.rejectsBeingDropped():void 0)?world:this.dropTargetFor(n),this.fullChanged(),"function"==typeof n.aboutToBeDropped&&n.aboutToBeDropped(t),"function"==typeof t.aboutToDrop&&t.aboutToDrop(n),t.add(n,nil,nil,!0,nil,this.position()),n.fullChanged(),n instanceof HorizontalMenuPanelWdgt||(world.lastNonTextPropertyChangerButtonClickedOrDropped=n),this.children=[],this.rawSetExtent(new Point),"function"==typeof t.reactToDropOf&&t.reactToDropOf(n,this),"function"==typeof n.justDropped?n.justDropped(t):void 0},window.ActivePointerWdgt.prototype.destroyTemporaryHandlesAndLayoutAdjustersIfHandHasNotActionedThem=function(e){if(world.temporaryHandlesAndLayoutAdjusters.size>0&&!world.temporaryHandlesAndLayoutAdjusters.has(e))return world.temporaryHandlesAndLayoutAdjusters.forEach(e=>e.fullDestroy()),world.temporaryHandlesAndLayoutAdjusters.clear()},window.ActivePointerWdgt.prototype.stopEditingIfWidgetDoesntNeedCaretOrActionIsElsewhere=function(e){var t;if(null!=world.caret){if(null!=e.editorContentPropertyChangerButton&&e.editorContentPropertyChangerButton)return;if(null!=e.parent&&e.parent instanceof SimpleButtonMorph&&null!=e.parent.editorContentPropertyChangerButton&&e.parent.editorContentPropertyChangerButton)return;if(e!==world.caret.target){if(null==(t=world.mostRecentlyCreatedPopUp()))return world.stopEditing();if(!t.isAncestorOf(e))return world.stopEditing()}}},window.ActivePointerWdgt.prototype.processMouseDown=function(e,t,n,o,i,r){var l,a,s;if(world.destroyToolTips(),this.wdgtToGrab=nil,"undefined"!=typeof Automator&&null!==Automator&&Automator.state===Automator.PLAYING&&(2===e||n?Automator.fade("rightMouseButtonIndicator",0,1,10,(new Date).getTime()):Automator.fade("leftMouseButtonIndicator",0,1,10,(new Date).getTime())),this.mouseDownPosition=this.position(),this.isThisPointerFloatDraggingSomething())return this.drop(),this.mouseButton=nil;for(s=this.topWdgtUnderPointer(),this.destroyTemporaryHandlesAndLayoutAdjustersIfHandHasNotActionedThem(s),this.stopEditingIfWidgetDoesntNeedCaretOrActionIsElsewhere(s),s.firstParentThatIsAPopUp()instanceof MenuMorph||this.cleanupMenuWdgts(nil,s,!0),this.wdgtToGrab=s.findRootForGrab(),2===e||n?(this.mouseButton="right",l="mouseDownRight",a="mouseClickRight"):(this.mouseButton="left",l="mouseDownLeft",a="mouseClickLeft"),this.mouseDownWdgt=s;!this.mouseDownWdgt[a];)this.mouseDownWdgt=this.mouseDownWdgt.parent;for(;null==s[l]&&null!=s.parent;)s=s.parent;return null!=s[l]?s[l](this.position()):void 0},window.ActivePointerWdgt.prototype.processMouseUp=function(e,t,n,o,i,r){var l,a,s,d,h,p,c,u,w,g,T,f,y;if("undefined"!=typeof Automator&&null!==Automator&&Automator.state===Automator.PLAYING&&(2===e?Automator.fade("rightMouseButtonIndicator",1,0,500,(new Date).getTime()):Automator.fade("leftMouseButtonIndicator",1,0,500,(new Date).getTime())),w=this.topWdgtUnderPointer(),l=!1,world.destroyToolTips(),world.freshlyCreatedPopUps.clear(),this.isThisPointerFloatDraggingSomething())this.drop();else{for(this.isThisPointerNonFloatDraggingSomething()&&"function"==typeof(a=this.nonFloatDraggedWdgt).endOfNonFloatDrag&&a.endOfNonFloatDrag(),this.previousNonFloatDraggingPos=nil,p=nil,null!=(f=w.parentThatIsA(MenuItemMorph))&&([u,p]=f,u&&world.mostRecentlyCreatedPopUp()===u.parent&&(c=u.labelString,g=u.howManySiblingsBeforeMeSuchThat((function(e){return e.labelString===c})),"undefined"!=typeof Automator&&null!==Automator&&world.automator.recorder.addCommandLeftOrRightClickOnMenuItem(this.mouseButton,c,g+1),l=!0)),"left"===this.mouseButton?h="mouseClickLeft":(h="mouseClickRight",this.mouseButton&&(l||"undefined"!=typeof Automator&&null!==Automator&&world.automator.recorder.addOpenContextMenuCommand(w.uniqueIDString())));!w[h]&&null!=(w=w.parent););if(null!=w&&w===this.mouseDownWdgt){switch(h){case"mouseClickLeft":T=world.getPointerAndWdgtInfo(),"undefined"!=typeof Automator&&null!==Automator&&world.automator.recorder.addMouseClickCommand(0,nil,...T),"function"==typeof w.mouseUpLeft&&w.mouseUpLeft(this.position(),e,t,n,o,i,r);break;case"mouseClickRight":T=world.getPointerAndWdgtInfo(),"undefined"!=typeof Automator&&null!==Automator&&world.automator.recorder.addMouseClickCommand(2,nil,...T),"function"==typeof w.mouseUpRight&&w.mouseUpRight(this.position(),e,t,n,o,i,r)}d=!1,null!=this.doubleClickWdgt?"left"===this.mouseButton&&this.doubleClickWdgt===w&&this.doubleClickPosition.distanceTo(this.position())<WorldMorph.preferencesAndSettings.grabDragThreshold?(this.doubleClickWdgt=nil,s=!1,"undefined"!=typeof Automator&&null!==Automator&&Automator.state===Automator.PLAYING&&(world.automator.player.runningInSlowMode()||(s=!0)),s||(d=!0,this.rememberTripleClickWdgtsForAWhile(w))):this.forgetDoubleClickWdgts():this.rememberDoubleClickWdgtsForAWhile(w),y=!1,d||"left"===this.mouseButton&&this.tripleClickWdgt===w&&this.tripleClickPosition.distanceTo(this.position())<WorldMorph.preferencesAndSettings.grabDragThreshold&&(this.tripleClickWdgt===w?(this.tripleClickWdgt=nil,s=!1,"undefined"!=typeof Automator&&null!==Automator&&Automator.state===Automator.PLAYING&&(world.automator.player.runningInSlowMode()||(s=!0)),s||(y=!0)):this.forgetTripleClickWdgts()),w.editorContentPropertyChangerButton||w instanceof HorizontalMenuPanelWdgt||(world.lastNonTextPropertyChangerButtonClickedOrDropped=w),w[h](this.position(),e,t,n,o,i,r,d,y),d&&this.processDoubleClick(w),y&&this.processTripleClick(w)}null==this.nonFloatDraggedWdgt&&this.cleanupMenuWdgts(h,w)}return this.mouseButton=nil,this.nonFloatDraggedWdgt=nil},window.ActivePointerWdgt.prototype.forgetDoubleClickWdgts=function(){return this.doubleClickWdgt=nil,this.doubleClickPosition=nil},window.ActivePointerWdgt.prototype.rememberDoubleClickWdgtsForAWhile=function(e){return this.doubleClickWdgt=e,this.doubleClickPosition=this.position(),setTimeout(()=>(this.forgetDoubleClickWdgts(),!1),300)},window.ActivePointerWdgt.prototype.forgetTripleClickWdgts=function(){return this.tripleClickWdgt=nil,this.tripleClickPosition=nil},window.ActivePointerWdgt.prototype.rememberTripleClickWdgtsForAWhile=function(e){return this.tripleClickWdgt=e,this.tripleClickPosition=this.position(),setTimeout(()=>(this.forgetTripleClickWdgts(),!1),300)},window.ActivePointerWdgt.prototype.cleanupMenuWdgts=function(e,t,n){var o,i;for(world.hierarchyOfClickedWdgts.clear(),world.hierarchyOfClickedMenus.clear(),world.closePopUpsMarkedForClosure(),o=t,world.hierarchyOfClickedWdgts.clear(),world.hierarchyOfClickedWdgts.add(o);null!=o.parent;)o=o.parent,world.hierarchyOfClickedWdgts.add(o);return null!=(null!=(i=t.firstParentThatIsAPopUp())?i.hierarchyOfPopUps:void 0)&&(world.hierarchyOfClickedMenus=i.hierarchyOfPopUps()),world.wdgtsDetectingClickOutsideMeOrAnyOfMeChildren.forEach(e=>{if(!world.hierarchyOfClickedMenus.has(e)&&!world.hierarchyOfClickedWdgts.has(e)&&(n||!world.freshlyCreatedPopUps.has(e))&&null!=e.clickOutsideMeOrAnyOfMeChildrenCallback[0])return e[e.clickOutsideMeOrAnyOfMeChildrenCallback[0]].call(e,e.clickOutsideMeOrAnyOfMeChildrenCallback[1],e.clickOutsideMeOrAnyOfMeChildrenCallback[2],e.clickOutsideMeOrAnyOfMeChildrenCallback[3])})},window.ActivePointerWdgt.prototype.processDoubleClick=function(e=this.topWdgtUnderPointer()){var t;if(t=world.getPointerAndWdgtInfo(e),"undefined"!=typeof Automator&&null!==Automator&&world.automator.recorder.addMouseDoubleClickCommand(nil,...t),world.destroyToolTips(),this.isThisPointerFloatDraggingSomething())this.drop();else{for(;e&&!e.mouseDoubleClick;)e=e.parent;e&&e.mouseDoubleClick(this.position())}return this.mouseButton=nil},window.ActivePointerWdgt.prototype.processTripleClick=function(e=this.topWdgtUnderPointer()){var t;if(t=world.getPointerAndWdgtInfo(e),"undefined"!=typeof Automator&&null!==Automator&&world.automator.recorder.addMouseTripleClickCommand(nil,...t),world.destroyToolTips(),this.isThisPointerFloatDraggingSomething())this.drop();else{for(;e&&!e.mouseTripleClick;)e=e.parent;e&&e.mouseTripleClick(this.position())}return this.mouseButton=nil},window.ActivePointerWdgt.prototype.processWheel=function(e,t,n,o,i,r){var l;for(l=this.topWdgtUnderPointer();l&&!l.wheel;)l=l.parent;if(null!=l)return l.wheel(e,t,n,o,i,r)},window.ActivePointerWdgt.prototype.processDrop=function(e){var t,n,o,i,r,l,a,s,d,h,p,c,u,w,g,T,f;if(n=e instanceof FileList?e:e.target.files||e.dataTransfer.files,f=e.dataTransfer?e.dataTransfer.getData("URL"):nil,T=e.dataTransfer?e.dataTransfer.getData("Text/HTML"):nil,g=this.topWdgtUnderPointer(),o=new Image,h=function(e){var t,n;for(n=new Image;!g.droppedSVG;)g=g.parent;return n.onload=function(){return g.droppedSVG(n,e.name)},(t=new FileReader).onloadend=function(e){return n.src=e.target.result},t.readAsDataURL(e)},d=function(e){var t,n;for(n=new Image;!g.droppedImage;)g=g.parent;return n.onload=function(){var t;return(t=newCanvas(new Point(n.width,n.height))).getContext("2d").drawImage(n,0,0),g.droppedImage(t,e.name)},(t=new FileReader).onloadend=function(e){return n.src=e.target.result},t.readAsDataURL(e)},a=function(e){var t,n;for(n=new Audio,t=new FileReader;!g.droppedAudio;)g=g.parent;return t.onloadend=function(t){return n.src=t.target.result,g.droppedAudio(n,e.name)},t.readAsDataURL(e)},p=function(e){var t;for(t=new FileReader;!g.droppedText;)g=g.parent;return t.onloadend=function(t){return g.droppedText(t.target.result,e.name)},t.readAsText(e)},s=function(e){var t;for(t=new FileReader;!g.droppedBinary;)g=g.parent;return t.onloadend=function(t){return g.droppedBinary(t.target.result,e.name)},t.readAsArrayBuffer(e)},l=function(e){var t,n,o,i,r,l;if(f="",-1===(l=e.indexOf('<img src="')))return nil;for(n=o=i=l+=10,r=e.length;i<=r?o<r:o>r;n=i<=r?++o:--o){if('"'===(t=e[n]))return f;f=f.concat(t)}return nil},n.length){for(u=[],i=0,r=n.length;i<r;i++)(t=n[i]).type.includes("svg")&&!WorldMorph.preferencesAndSettings.rasterizeSVGs?u.push(h(t)):t.type.startsWith("image")?u.push(d(t)):t.type.startsWith("audio")?u.push(a(t)):t.type.startsWith("text")?u.push(p(t)):u.push(s(t));return u}if(f){if("gif"===(c=f.slice(f.lastIndexOf(".")+1).toLowerCase())||"png"===c||"jpg"===c||"jpeg"===c||"bmp"===c){for(;!g.droppedImage;)g=g.parent;return(o=new Image).onload=function(){var e;return(e=newCanvas(new Point(o.width,o.height))).getContext("2d").drawImage(o,0,0),g.droppedImage(e)},o.src=f}}else if(T){for(;!g.droppedImage;)g=g.parent;if((o=new Image).onload=function(){var e;return(e=newCanvas(new Point(o.width,o.height))).getContext("2d").drawImage(o,0,0),g.droppedImage(e)},w=l(T))return o.src=w}},window.ActivePointerWdgt.prototype.fullRawMoveBy=function(e){if(!e.isZero())return trackChanges.push(!1),this.breakNumberOfRawMovesAndResizesCaches(),ActivePointerWdgt.__super__.fullRawMoveBy.call(this,e),trackChanges.pop(),this.fullChanged()},window.ActivePointerWdgt.prototype.processMouseMove=function(e,t,n,o,i,r,l,a){var s,d,h,p,c;return h=new Point(e,t),this.fullRawMoveTo(h),"undefined"!=typeof Automator&&null!==Automator&&Automator.state===Automator.PLAYING&&((d=document.getElementById("mousePointerIndicator")).style.display="block",p=getDocumentPositionOf(world.worldCanvas),d.style.left=p.x+e-d.clientWidth/2+"px",d.style.top=p.y+t-d.clientHeight/2+"px"),c=this.topWdgtUnderPointer(),s=new Set(c.allParentsBottomToTop()),this.determineGrabs(h,c,s),this.dispatchEventsFollowingMouseMove(s)},window.ActivePointerWdgt.prototype.checkDraggingTreshold=function(){var e,t;if(e=nil,t=!1,"undefined"!=typeof Automator&&null!==Automator&&Automator.state===Automator.PLAYING&&null==window[""+world.automator.player.currentlyPlayingTestName()].grabDragThreshold&&(t=!0),!t){if((this.wdgtToGrab.parent!==world||null==this.wdgtToGrab.isEditable||this.wdgtToGrab.isEditable)&&this.mouseDownPosition.distanceTo(this.position())<WorldMorph.preferencesAndSettings.grabDragThreshold)return[!0,nil];e=this.position().subtract(this.mouseDownPosition)}return[!1,e]},window.ActivePointerWdgt.prototype.determineGrabs=function(e,t,n){var o,i,r,l,a,s,d;if(!this.isThisPointerDraggingSomething()&&"left"===this.mouseButton&&(a=t.findRootForGrab(),t.mouseMove&&t.mouseMove(e),this.wdgtToGrab)){if(this.wdgtToGrab.isTemplate){if([d,r]=this.checkDraggingTreshold(),d)return;(a=this.wdgtToGrab.fullCopy()).isTemplate=!1,this.grab(a,r),this.grabOrigin=this.wdgtToGrab.situation()}else if(this.wdgtToGrab.detachesWhenDragged()){if([d,r]=this.checkDraggingTreshold(),d)return;s=this.wdgtToGrab,this.wdgtToGrab=this.wdgtToGrab.grabbedWidgetSwitcheroo(),a=this.wdgtToGrab,this.grab(a,r,s!==a)}else this.nonFloatDraggedWdgt=this.wdgtToGrab,this.nonFloatDragPositionWithinWdgtAtStart=e.subtract(this.nonFloatDraggedWdgt.position());a&&((l=a.fullBounds()).containsPoint(e)||(this.rawSetExtent(this.extent().subtract(l.extent().floorDivideBy(2))),this.grab(a),this.fullRawMoveTo(e)))}if(this.isThisPointerNonFloatDraggingSomething()&&this.mouseButton)return i=null!=this.previousNonFloatDraggingPos?e.subtract(this.previousNonFloatDraggingPos):nil,this.previousNonFloatDraggingPos=e.copy(),"function"==typeof(o=this.nonFloatDraggedWdgt).nonFloatDragging?o.nonFloatDragging(this.nonFloatDragPositionWithinWdgtAtStart,e,i):void 0},window.ActivePointerWdgt.prototype.nonFloatDragWdgtFarAwayToHere=function(e,t){var n;return n=new Set(e.allParentsBottomToTop()),this.previousNonFloatDraggingPos=e.center(),this.nonFloatDragPositionWithinWdgtAtStart=new Point(e.width()/2,e.height()/2).round(),this.nonFloatDraggedWdgt=e,this.determineGrabs(t,e,n)},window.ActivePointerWdgt.prototype.reCheckMouseEntersAndMouseLeavesAfterPotentialGeometryChanges=function(){var e,t;return t=this.topWdgtUnderPointer(),e=new Set(t.allParentsBottomToTop()),this.dispatchEventsFollowingMouseMove(e)},window.ActivePointerWdgt.prototype.dispatchEventsFollowingMouseMove=function(e){return this.mouseOverList.forEach(t=>{if(!e.has(t)&&("function"==typeof t.mouseLeave&&t.mouseLeave(),this.mouseButton))return"function"==typeof t.mouseLeavefloatDragging?t.mouseLeavefloatDragging():void 0}),e.forEach(e=>{var t;if(null!=this.mouseDownPosition&&this.mouseDownPosition.eq(this.position())||"function"==typeof e.mouseMove&&e.mouseMove(this.position(),this.mouseButton),this.mouseOverList.has(e)||("function"==typeof e.mouseEnter&&e.mouseEnter(),this.mouseButton&&"function"==typeof e.mouseEnterfloatDragging&&e.mouseEnterfloatDragging()),this.isThisPointerFloatDraggingSomething()&&(null==(t=this.children[0]).rejectsBeingDropped||!t.rejectsBeingDropped())&&e instanceof ScrollPanelWdgt&&e.wantsDropOf(t)&&!e.boundingBox().insetBy(3*WorldMorph.preferencesAndSettings.scrollBarsThickness).containsPoint(this.position()))return e.startAutoScrolling()}),this.mouseOverList=e},window.ActivePointerWdgt.instances=new Set,window.AlignmentSpecHorizontal=function(){window.AlignmentSpecHorizontal.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AlignmentSpecHorizontal,"name",{value:"AlignmentSpecHorizontal"}),window.AlignmentSpecHorizontal.__super__=Object.prototype,window.AlignmentSpecHorizontal.LEFT=0,window.AlignmentSpecHorizontal.CENTER=1,window.AlignmentSpecHorizontal.RIGHT=2,window.AlignmentSpecHorizontal.instances=new Set,window.AlignmentSpecVertical=function(){window.AlignmentSpecVertical.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AlignmentSpecVertical,"name",{value:"AlignmentSpecVertical"}),window.AlignmentSpecVertical.__super__=Object.prototype,window.AlignmentSpecVertical.TOP=3,window.AlignmentSpecVertical.MIDDLE=4,window.AlignmentSpecVertical.BOTTOM=5,window.AlignmentSpecVertical.instances=new Set,window.Appearance=function(e,t){this.morph=e,this.ownColorInsteadOfWidgetColor=t,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Appearance,"name",{value:"Appearance"}),window.Appearance.__super__=Object.prototype,window.Appearance.augmentWith(window.DeepCopierMixin,"Appearance"),window.Appearance.prototype.morph=nil,window.Appearance.prototype.ownColorInsteadOfWidgetColor=nil,window.Appearance.prototype.isTransparentAt=function(e){},window.Appearance.prototype.paintHighlight=function(e,t,n,o,i){},window.Appearance.prototype.paintIntoAreaOrBlitFromBackBuffer=function(e,t,n){},window.Appearance.instances=new Set,HighlightableMixin={onceAddedClassProperties:function(e){return this.addInstanceProperties(e,{color_hover:new Color(192,192,192),color_pressed:new Color(128,128,128),color_normal:new Color(245,244,245),state:0,STATE_NORMAL:0,STATE_HIGHLIGHTED:1,STATE_PRESSED:2,updateColor:function(){return this.setColor(function(){switch(this.state){case this.STATE_NORMAL:return this.color_normal;case this.STATE_HIGHLIGHTED:return this.color_hover;case this.STATE_PRESSED:return this.color_pressed}}.call(this)),this.changed()},mouseEnter:function(){if(this.state=this.STATE_HIGHLIGHTED,this.updateColor(),this.toolTipMessage)return"function"==typeof this.startCountdownForBubbleHelp?this.startCountdownForBubbleHelp(this.toolTipMessage):void 0},mouseLeave:function(){if(this.state=this.STATE_NORMAL,this.updateColor(),this.toolTipMessage)return world.destroyToolTips()},mouseDownLeft:function(){return this.state=this.STATE_PRESSED,this.updateColor(),window[this[arguments.callee.name+"_class_injected_in"]],window[this[arguments.callee.name+"_class_injected_in"]].__super__[arguments.callee.name].apply(this,arguments)},mouseUpLeft:function(){return this.state=this.STATE_NORMAL,this.updateColor()}})}},window.WidgetHolderWithCaptionWdgt=function(e,t){this.labelContent=e,this.icon=t,WidgetHolderWithCaptionWdgt.__super__.constructor.call(this),null==this.icon&&(this.icon=new SimpleDropletWdgt("icon")),this.rawSetExtent(new Point(95,95)),this.add(this.icon),this.label=new StringMorph2(this.labelContent,WorldMorph.preferencesAndSettings.shortcutsFontSize),this.label.fittingSpecWhenBoundsTooLarge=FittingSpecTextInLargerBounds.SCALEUP,this.label.color=new Color(255,255,255),this.label.hasDarkOutline=!0,this.add(this.label,nil,nil,!0),this.label.alignCenter(),this.label.alignMiddle(),this.label.isEditable=!0,this.invalidateLayout(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WidgetHolderWithCaptionWdgt,"name",{value:"WidgetHolderWithCaptionWdgt"}),window.WidgetHolderWithCaptionWdgt.__super__=window.Widget.prototype,window.WidgetHolderWithCaptionWdgt=extend(window.WidgetHolderWithCaptionWdgt,window.Widget),window.WidgetHolderWithCaptionWdgt.prototype.labl=nil,window.WidgetHolderWithCaptionWdgt.prototype.setColor=function(e,t,n,o){if(o||n!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==n?getRandomInt(-2e4,2e4):n,this.icon.setColor(e)},window.WidgetHolderWithCaptionWdgt.prototype.widthWithoutSpacing=function(){return Math.min(this.width(),this.height())},window.WidgetHolderWithCaptionWdgt.prototype.rawResizeToWithoutSpacing=function(){return this.rawSetExtent(new Point(this.widthWithoutSpacing(),this.widthWithoutSpacing())),this.invalidateLayout()},window.WidgetHolderWithCaptionWdgt.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return WidgetHolderWithCaptionWdgt.__super__.initialiseDefaultWindowContentLayoutSpec.apply(this,arguments),this.layoutSpecDetails.canSetHeightFreely=!1},window.WidgetHolderWithCaptionWdgt.prototype.rawSetWidthSizeHeightAccordingly=function(e){return this.rawResizeToWithoutSpacing(),this.rawSetExtent(new Point(e,e)),this.invalidateLayout()},window.WidgetHolderWithCaptionWdgt.prototype.doLayout=function(e){var t,n,o,i;return null==e&&(null!=this.desiredExtent?(e=this.desiredExtent,this.desiredExtent=nil):e=this.extent(),null!=this.desiredPosition?(e=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(e),this.desiredPosition=nil):e=new Rectangle(this.position()).setBoundsWidthAndHeight(e)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(this.rawSetBounds(e),trackChanges.push(!1),t=this.height(),i=this.width(),o=Math.min(i,t),n=(n=(n=this.topLeft()).add(new Point(i/2,t/2))).subtract(new Point(o/2,o/2)),this.icon.setExtent(new Point(o,8*o/10).round()),this.icon.fullRawMoveTo(n.round()),this.label.setExtent(new Point(o,2*o/10).round()),this.label.fullRawMoveTo(n.add(new Point(0,8*o/10)).round()),trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0)},window.WidgetHolderWithCaptionWdgt.instances=new Set,window.IconicDesktopSystemLinkWdgt=function(){window.IconicDesktopSystemLinkWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.IconicDesktopSystemLinkWdgt,"name",{value:"IconicDesktopSystemLinkWdgt"}),window.IconicDesktopSystemLinkWdgt.__super__=window.WidgetHolderWithCaptionWdgt.prototype,window.IconicDesktopSystemLinkWdgt=extend(window.IconicDesktopSystemLinkWdgt,window.WidgetHolderWithCaptionWdgt),window.IconicDesktopSystemLinkWdgt.prototype.moveOnTopOfTopReference=function(){var e,t;return null!=(t=this.parent.topmostChildSuchThat(e=>e!==this&&e instanceof WidgetHolderWithCaptionWdgt))?(this.parent.children.remove(this),e=this.parent.children.indexOf(t),this.parent.children.splice(e+1,0,this)):(this.parent.children.remove(this),this.parent.children.unshift(this))},window.IconicDesktopSystemLinkWdgt.instances=new Set,window.BasementOpenerWdgt=function(){BasementOpenerWdgt.__super__.constructor.call(this,"Basement",new GenericShortcutIconWdgt(new BasementIconWdgt)),this.target=world.basementWdgt,this.rawSetExtent(new Point(75,75)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BasementOpenerWdgt,"name",{value:"BasementOpenerWdgt"}),window.BasementOpenerWdgt.__super__=window.IconicDesktopSystemLinkWdgt.prototype,window.BasementOpenerWdgt=extend(window.BasementOpenerWdgt,window.IconicDesktopSystemLinkWdgt),window.BasementOpenerWdgt.augmentWith(window.HighlightableMixin,"BasementOpenerWdgt"),window.BasementOpenerWdgt.prototype.color_hover=new Color(90,90,90),window.BasementOpenerWdgt.prototype.color_pressed=new Color(128,128,128),window.BasementOpenerWdgt.prototype.color_normal=new Color(0,0,0),window.BasementOpenerWdgt.prototype._acceptsDrops=!0,window.BasementOpenerWdgt.prototype.iHaveBeenAddedTo=function(e,t){if(BasementOpenerWdgt.__super__.iHaveBeenAddedTo.apply(this,arguments),e===world&&!this.userMovedThisFromComputedPosition)return this.fullMoveTo(world.bottomRight().subtract(this.extent().add(world.desktopSidesPadding)))},window.BasementOpenerWdgt.prototype.justDropped=function(e){if(BasementOpenerWdgt.__super__.justDropped.apply(this,arguments),e===world)return this.userMovedThisFromComputedPosition=!0},window.BasementOpenerWdgt.prototype.mouseDoubleClick=function(){var e;return this.target.isOrphan()?(this.target.unCollapse(),e=new WindowWdgt(nil,nil,this.target),world.add(e),e.rawSetExtent(new Point(460,400)),e.fullRawMoveTo(new Point(140,90)),e.rememberFractionalSituationInHoldingPanel(),menusHelper.createBasementOneOffInfoWindowNextTo(e)):(this.target.parent.spawnNextTo(this),this.target.parent.rememberFractionalSituationInHoldingPanel())},window.BasementOpenerWdgt.prototype.reactToDropOf=function(e){return this.target.scrollPanel.contents.addInPseudoRandomPosition(e)},window.BasementOpenerWdgt.prototype.rejectsBeingDropped=function(){return!0},window.BasementOpenerWdgt.instances=new Set,window.BoxMorph=function(e=4){this.cornerRadius=e,BoxMorph.__super__.constructor.call(this),this.appearance=new BoxyAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BoxMorph,"name",{value:"BoxMorph"}),window.BoxMorph.__super__=window.Widget.prototype,window.BoxMorph=extend(window.BoxMorph,window.Widget),window.BoxMorph.prototype.cornerRadius=nil,window.BoxMorph.prototype.colloquialName=function(){return"box"},window.BoxMorph.prototype.insetPosition=function(){return this.position().add(this.cornerRadius-Math.round(this.cornerRadius/Math.sqrt(2)))},window.BoxMorph.prototype.insetSpaceExtent=function(){return this.extent().subtract(2*(this.cornerRadius-Math.round(this.cornerRadius/Math.sqrt(2))))},window.BoxMorph.prototype.extentBasedOnInsetExtent=function(e){return e.extent().add(2*(this.cornerRadius-Math.round(this.cornerRadius/Math.sqrt(2))))},window.BoxMorph.prototype.choiceOfMorphToBePicked=function(e,t){if(t.addInset(this),this instanceof ScrollPanelWdgt)return this.adjustContentsBounds(),this.adjustScrollBars()},window.BoxMorph.prototype.setCornerRadius=function(e,t){var n,o;return"number"==typeof(o=null!=(null!=t?t.getValue:void 0)?t.getValue():e)?this.cornerRadius=Math.max(o,0):(n=parseFloat(o),isNaN(n)||(this.cornerRadius=Math.max(n,0))),this.layoutInset(),this.changed()},window.BoxMorph.prototype.pickInset=function(){var e,t,n;return e=world.plausibleTargetAndDestinationMorphs(this),t=[],e.forEach(e=>{if(e!==this.parent)return t.push(e)}),t.length>0?(n=new MenuMorph(this,!1,this,!0,!0,"choose Widget to put as inset:"),t.forEach(e=>n.addMenuItem(e.toString().slice(0,50),!0,e,"choiceOfMorphToBePicked"))):n=new MenuMorph(this,!1,this,!0,!0,"no morphs to pick"),n.popUpAtHand()},window.BoxMorph.instances=new Set,window.BasementWdgt=function(){BasementWdgt.__super__.constructor.call(this),this.silentRawSetExtent(new Point(340,270)),this.color=new Color(60,60,60),this.padding=5,this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BasementWdgt,"name",{value:"BasementWdgt"}),window.BasementWdgt.__super__=window.BoxMorph.prototype,window.BasementWdgt=extend(window.BasementWdgt,window.BoxMorph),window.BasementWdgt.prototype.scrollPanel=nil,window.BasementWdgt.prototype.resizer=nil,window.BasementWdgt.prototype.hideUsedWdgtsOnButton=nil,window.BasementWdgt.prototype.hideUsedWdgtsOffButton=nil,window.BasementWdgt.prototype.hideUsedWdgtsToggle=nil,window.BasementWdgt.prototype.showingLostItemsOnly=!1,window.BasementWdgt.prototype.colloquialName=function(){return"Basement"},window.BasementWdgt.prototype.closeFromContainerWindow=function(e){return this.removeFromTree(),e.fullDestroy()},window.BasementWdgt.prototype.empty=function(){var e,t;return null!=(e=this.scrollPanel)&&null!=(t=e.contents)?t.fullDestroyChildren():void 0},window.BasementWdgt.prototype.buildAndConnectChildren=function(){return this.scrollPanel=new ScrollPanelWdgt,this.add(this.scrollPanel),this.hideUsedWdgtsOnButton=new SimpleButtonMorph(!0,this,"showAllWidgets","☒ only show lost items"),this.hideUsedWdgtsOffButton=new SimpleButtonMorph(!0,this,"hideUsedWidgets","☐ only show lost items"),this.hideUsedWdgtsToggle=new ToggleButtonMorph(this.hideUsedWdgtsOffButton,this.hideUsedWdgtsOnButton,0),this.add(this.hideUsedWdgtsToggle),this.resizer=new HandleMorph(this),this.invalidateLayout()},window.BasementWdgt.prototype.doGC=function(){var e,t,n;for(e of(world.incrementalGcSessionId++,t=world.incrementalGcSessionId,world.widgetsReferencingOtherWidgets))e.isOrphan()&&e.markReferenceAsVisited(t);for(e of world.widgetsReferencingOtherWidgets)e.wasReferenceVisited(t)||e.isInBasement()||(e.target.markItAndItsParentsAsReachable(t),e.markReferenceAsVisited(t));for(n=!0;n;)for(e of(n=!1,world.widgetsReferencingOtherWidgets))e.wasReferenceVisited(t)||e.isInBasementButReachable(t)&&(n=!0,e.target.markItAndItsParentsAsReachable(t),e.markReferenceAsVisited(t));return t},window.BasementWdgt.prototype.hideUsedWidgets=function(){var e,t,n,o,i,r;for(this.showingLostItemsOnly=!0,n=this.doGC(),i=new Set,e=0,t=(o=this.scrollPanel.contents.children).length;e<t;e++)(r=o[e]).isInBasementButReachable(n)&&i.add(r);return i.forEach(e=>e.hide())},window.BasementWdgt.prototype.showAllWidgets=function(){var e,t,n,o,i;for(this.showingLostItemsOnly=!1,o=[],e=0,t=(n=this.scrollPanel.contents.children).length;e<t;e++)i=n[e],o.push(i.show());return o},window.BasementWdgt.prototype.childAddedInScrollPanel=function(){return this.showingLostItemsOnly?this.hideUsedWidgets():this.showAllWidgets()},window.BasementWdgt.prototype.doLayout=function(e){var t,n,o,i;return null==e&&(null!=this.desiredExtent?(e=this.desiredExtent,this.desiredExtent=nil):e=this.extent(),null!=this.desiredPosition?(e=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(e),this.desiredPosition=nil):e=new Rectangle(this.position()).setBoundsWidthAndHeight(e)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(this.rawSetBounds(e),trackChanges.push(!1),o=this.left()+this.cornerRadius,i=this.top()+2,n=this.width()-this.cornerRadius,n-=this.cornerRadius,t=this.bottom()-2*this.cornerRadius-WorldMorph.preferencesAndSettings.handleSize-i,this.scrollPanel.fullRawMoveTo(new Point(o,i)),this.scrollPanel.rawSetExtent(new Point(n,t)),o=this.scrollPanel.left(),i=this.scrollPanel.bottom()+this.cornerRadius,t=WorldMorph.preferencesAndSettings.handleSize,n=this.scrollPanel.width()-t-this.cornerRadius,this.hideUsedWdgtsToggle.doLayout(new Rectangle(0,0,n,t).translateBy(new Point(o,i))),trackChanges.pop(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted())},window.BasementWdgt.instances=new Set,window.BouncerWdgt=function(){for(BouncerWdgt.__super__.constructor.call(this),this.fps=60,world.steppingWdgts.add(this),this.rawSetExtent(new Point(5,5)),this.appearance=new RectangularAppearance(this);null==this.velocity||0===this.velocity.x||0===this.velocity.y;)this.velocity=new Point(getRandomInt(-10,10),getRandomInt(-10,10));"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BouncerWdgt,"name",{value:"BouncerWdgt"}),window.BouncerWdgt.__super__=window.Widget.prototype,window.BouncerWdgt=extend(window.BouncerWdgt,window.Widget),window.BouncerWdgt.prototype.velocity=nil,window.BouncerWdgt.prototype.step=function(){var e,t,n,o,i,r;if(t=this.position(),i=this.velocity.x,r=this.velocity.y,n=t.x+i,o=t.y+r,e=!1,n>this.parent.right()&&(n=this.parent.right()-(n-this.parent.right()),i=-i,e=!0),o>this.parent.bottom()&&(o=this.parent.bottom()-(o-this.parent.bottom()),r=-r,e=!0),n<this.parent.left()&&(n=this.parent.left()-(n-this.parent.left()),i=-i,e=!0),o<this.parent.top()&&(o=this.parent.top()-(o-this.parent.top()),r=-r,e=!0),this.fullMoveTo(new Point(n,o)),e)return this.velocity=new Point(i,r)},window.BouncerWdgt.instances=new Set,window.BoxyAppearance=function(e){BoxyAppearance.__super__.constructor.call(this,e),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BoxyAppearance,"name",{value:"BoxyAppearance"}),window.BoxyAppearance.__super__=window.Appearance.prototype,window.BoxyAppearance=extend(window.BoxyAppearance,window.Appearance),window.BoxyAppearance.prototype.getCornerRadius=function(){return null!=this.morph.cornerRadius?this.morph.cornerRadius:4},window.BoxyAppearance.prototype.isTransparentAt=function(e){var t,n,o;if(!this.morph.boundsContainPoint(e))return!0;if(o=this.morph.position(),t=Math.max(this.getCornerRadius(),0),(n=new Point(e.x-o.x,e.y-o.y)).x<t&&n.y<t){if(n.distanceTo(new Point(t,t))>t)return!0}else if(n.x>this.morph.width()-t&&n.y<t){if(n.distanceTo(new Point(this.morph.width()-t,t))>t)return!0}else if(n.x<t&&n.y>this.morph.height()-t){if(n.distanceTo(new Point(t,this.morph.height()-t))>t)return!0}else if(n.x>this.morph.width()-t&&n.y>this.morph.height()-t&&n.distanceTo(new Point(this.morph.width()-t,this.morph.height()-t))>t)return!0;return!1},window.BoxyAppearance.prototype.paintIntoAreaOrBlitFromBackBuffer=function(e,t,n){var o,i,r,l,a,s,d,h;return this.morph.preliminaryCheckNothingToDraw(t,e)?nil:([i,s,d,o,r,h,l]=this.morph.calculateKeyValues(e,t),h<1||l<1||i.isEmpty()?nil:(e.save(),e.clipToRectangle(o,r,h,l),e.globalAlpha=(null!=n?n.alpha:1)*this.morph.alpha,e.scale(ceilPixelRatio,ceilPixelRatio),a=this.morph.position(),e.translate(a.x,a.y),this.morph.color,e.fillStyle=this.morph.color.toString(),null!=n&&(e.fillStyle="black"),e.beginPath(),this.outlinePath(e,this.getCornerRadius(),!1),e.closePath(),e.fill(),null!=this.morph.strokeColor&&null==n&&(e.lineWidth=1,e.strokeStyle=this.morph.strokeColor.toString(),e.beginPath(),this.outlinePath(e,this.getCornerRadius(),!0),e.closePath(),e.stroke()),e.restore(),this.paintHighlight(e,o,r,h,l)))},window.BoxyAppearance.prototype.outlinePath=function(e,t,n){var o,i,r;return i=t,n&&(i+=.5),r=this.morph.width(),o=this.morph.height(),e.arc(i,i,t,-Math.PI,-Math.PI/2),e.arc(r-i,i,t,-Math.PI/2,0),e.arc(r-i,o-i,t,0,Math.PI/2),e.arc(i,o-i,t,Math.PI/2,Math.PI)},window.BoxyAppearance.prototype.cornerRadiusPopout=function(e){return this.morph.prompt(e.parent.title+"\ncorner\nradius:",this.morph,"setCornerRadius",this.morph.cornerRadius.toString(),nil,0,100,!0)},window.BoxyAppearance.prototype.addShapeSpecificMenuItems=function(e){return e.addLine(),e.addMenuItem("corner radius...",!0,this,"cornerRadiusPopout","set the corner's\nradius"),e.addMenuItem("pick inset...",!0,this.morph,"pickInset","put a morph as inset"),e},window.BoxyAppearance.prototype.addShapeSpecificNumericalSetters=function(e,t){return null==e&&(e=[],t=[]),e.push("corner radius"),t.push("setCornerRadius"),this.deduplicateSettersAndSortByMenuEntryString(e,t)},window.BoxyAppearance.instances=new Set,window.BubblyAppearance=function(e){BubblyAppearance.__super__.constructor.call(this,e),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BubblyAppearance,"name",{value:"BubblyAppearance"}),window.BubblyAppearance.__super__=window.BoxyAppearance.prototype,window.BubblyAppearance=extend(window.BubblyAppearance,window.BoxyAppearance),window.BubblyAppearance.prototype.outlinePath=function(e,t){var n,o,i,r,l;return o=t,l=this.morph.width(),r=(n=this.morph.height())/5,i=n/5,e.arc(o,o,t,degreesToRadians(-180),degreesToRadians(-90)),e.arc(l-o,o,t,degreesToRadians(-90),degreesToRadians(-0)),e.arc(l-o,n-r-t,t,degreesToRadians(0),degreesToRadians(90)),e.lineTo(o+t+i,n-r),e.lineTo(o,n),e.arc(o,n-r-t,t,degreesToRadians(90),degreesToRadians(180))},window.BubblyAppearance.instances=new Set,window.EmptyButtonMorph=function(e=!0,t=nil,n=nil,o=nil,i=nil,r,l=nil,a=nil,s=nil,d=nil,h=!1,p=0){this.ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked=e,this.target=t,this.action=n,this.faceMorph=o,this.dataSourceMorphForTarget=i,this.morphEnv=r,this.toolTipMessage=l,this.doubleClickAction=a,this.argumentToAction1=s,this.argumentToAction2=d,this.representsAMorph=h,this.padding=p,EmptyButtonMorph.__super__.constructor.call(this),this.defaultRejectDrags=!0,null!=this.faceMorph&&("string"==typeof this.faceMorph&&(this.faceMorph=new StringMorph2(this.faceMorph,WorldMorph.preferencesAndSettings.textInButtonsFontSize).alignCenter()),this.add(this.faceMorph),this.invalidateLayout()),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.EmptyButtonMorph,"name",{value:"EmptyButtonMorph"}),window.EmptyButtonMorph.__super__=window.Widget.prototype,window.EmptyButtonMorph=extend(window.EmptyButtonMorph,window.Widget),window.EmptyButtonMorph.augmentWith(window.HighlightableMixin,"EmptyButtonMorph"),window.EmptyButtonMorph.prototype.target=nil,window.EmptyButtonMorph.prototype.action=nil;window.EmptyButtonMorph.prototype.dataSourceMorphForTarget=nil,window.EmptyButtonMorph.prototype.morphEnv=nil,window.EmptyButtonMorph.prototype.doubleClickAction=nil,window.EmptyButtonMorph.prototype.argumentToAction1=nil,window.EmptyButtonMorph.prototype.argumentToAction2=nil,window.EmptyButtonMorph.prototype.toolTipMessage=nil,window.EmptyButtonMorph.prototype.ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked=!0,window.EmptyButtonMorph.prototype.representsAMorph=!1,window.EmptyButtonMorph.prototype.padding=0,window.EmptyButtonMorph.prototype.color=new Color(255,255,255),window.EmptyButtonMorph.prototype.doLayout=function(e){var t;return null==e&&(null!=this.desiredExtent?(e=this.desiredExtent,this.desiredExtent=nil):e=this.extent(),null!=this.desiredPosition?(e=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(e),this.desiredPosition=nil):e=new Rectangle(this.position()).setBoundsWidthAndHeight(e)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(this.rawSetBounds(e),(null!=(t=this.faceMorph)?t.parent:void 0)===this&&this.faceMorph.rawSetBounds(e.insetBy(this.padding)),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted())},window.EmptyButtonMorph.prototype.getTextDescription=function(){},window.EmptyButtonMorph.prototype.trigger=function(){null!=this.action&&""!==this.action&&this.target[this.action].call(this.target,this.dataSourceMorphForTarget,this.morphEnv,this.argumentToAction1,this.argumentToAction2)},window.EmptyButtonMorph.prototype.triggerDoubleClick=function(){if(this.doubleClickAction)return this.target[this.doubleClickAction]()},window.EmptyButtonMorph.prototype.mouseClickLeft=function(){return this.ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked&&this.propagateKillPopUps(),this.trigger(),this.escalateEvent("mouseClickLeft")},window.EmptyButtonMorph.prototype.mouseDoubleClick=function(){return this.triggerDoubleClick()},window.EmptyButtonMorph.prototype.rejectDrags=function(){return!(this.parent instanceof WorldMorph)&&this.defaultRejectDrags},window.EmptyButtonMorph.instances=new Set,window.SimpleRectangularButtonMorph=function(e=!0,t=nil,n=nil,o=nil,i=nil,r,l=nil,a=nil,s=nil,d=nil,h=!1){this.ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked=e,this.target=t,this.action=n,this.faceMorph=o,this.dataSourceMorphForTarget=i,this.morphEnv=r,this.toolTipMessage=l,this.doubleClickAction=a,this.argumentToAction1=s,this.argumentToAction2=d,this.representsAMorph=h,SimpleRectangularButtonMorph.__super__.constructor.apply(this,arguments),this.appearance=new RectangularAppearance(this),this.strokeColor=new Color(196,195,196),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleRectangularButtonMorph,"name",{value:"SimpleRectangularButtonMorph"}),window.SimpleRectangularButtonMorph.__super__=window.EmptyButtonMorph.prototype,window.SimpleRectangularButtonMorph=extend(window.SimpleRectangularButtonMorph,window.EmptyButtonMorph),window.SimpleRectangularButtonMorph.instances=new Set,window.CodeInjectingSimpleRectangularButtonMorph=function(e,t,n){this.wdgtToBeNotifiedForNewCode=e,this.wdgtWhereToInject=t,CodeInjectingSimpleRectangularButtonMorph.__super__.constructor.call(this,!0,this,"injectCodeIntoTarget",n),this.strokeColor=new Color(0,0,0),this.setColor(new Color(150,150,150)),this.toolTipMessage=n.toolTipMessage,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CodeInjectingSimpleRectangularButtonMorph,"name",{value:"CodeInjectingSimpleRectangularButtonMorph"}),window.CodeInjectingSimpleRectangularButtonMorph.__super__=window.SimpleRectangularButtonMorph.prototype,window.CodeInjectingSimpleRectangularButtonMorph=extend(window.CodeInjectingSimpleRectangularButtonMorph,window.SimpleRectangularButtonMorph),window.CodeInjectingSimpleRectangularButtonMorph.prototype.sourceCodeToBeInjected="",window.CodeInjectingSimpleRectangularButtonMorph.prototype.wdgtWhereToInject=nil,window.CodeInjectingSimpleRectangularButtonMorph.prototype.wdgtToBeNotifiedForNewCode=nil,window.CodeInjectingSimpleRectangularButtonMorph.prototype.editInjectableSource=function(){return this.textPrompt("Code",this,"modifyCodeToBeInjected",this.sourceCodeToBeInjected)},window.CodeInjectingSimpleRectangularButtonMorph.prototype.injectCodeIntoTarget=function(){return this.wdgtWhereToInject.injectProperties(this.sourceCodeToBeInjected)},window.CodeInjectingSimpleRectangularButtonMorph.prototype.modifyCodeToBeInjected=function(e,t){var n;return this.sourceCodeToBeInjected=t.text,"function"==typeof(n=this.wdgtToBeNotifiedForNewCode).newCodeToInjectFromButton?n.newCodeToInjectFromButton(this):void 0},window.CodeInjectingSimpleRectangularButtonMorph.instances=new Set,window.CodePromptMorph=function(e,t,n,o){this.msg=e,this.target=t,this.callback=n,this.defaultContents=o,CodePromptMorph.__super__.constructor.call(this,new Point(200,400)),this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CodePromptMorph,"name",{value:"CodePromptMorph"}),window.CodePromptMorph.__super__=window.Widget.prototype,window.CodePromptMorph=extend(window.CodePromptMorph,window.Widget),window.CodePromptMorph.prototype.tempPromptEntryField=nil,window.CodePromptMorph.prototype.defaultContents="",window.CodePromptMorph.prototype.textMorph=nil,window.CodePromptMorph.prototype.cancelButton=nil,window.CodePromptMorph.prototype.saveButton=nil,window.CodePromptMorph.prototype.okButton=nil,window.CodePromptMorph.prototype.saveTextWdgt=nil,window.CodePromptMorph.prototype.externalPadding=0,window.CodePromptMorph.prototype.internalPadding=5,window.CodePromptMorph.prototype.colloquialName=function(){return"Edit tool code"},window.CodePromptMorph.prototype.buildAndConnectChildren=function(){return"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.tempPromptEntryField=new SimplePlainTextScrollPanelWdgt(this.defaultContents,!1,5),this.tempPromptEntryField.disableDrops(),this.tempPromptEntryField.contents.disableDrops(),this.tempPromptEntryField.color=new Color(255,255,255),this.tempPromptEntryField.addModifiedContentIndicator(),this.tempPromptEntryField.widgetToBeNotifiedOfTextModificationChange=this,this.textMorph=this.tempPromptEntryField.textWdgt,this.textMorph.backgroundColor=new Color(0,0,0,0),this.textMorph.setFontName(nil,nil,this.textMorph.monoFontStack),this.textMorph.isEditable=!0,this.textMorph.enableSelecting(),this.add(this.tempPromptEntryField),this.cancelButton=new SimpleButtonMorph(!0,this,"close","cancel"),this.add(this.cancelButton),this.saveTextWdgt=new StringMorph2("save",WorldMorph.preferencesAndSettings.textInButtonsFontSize),this.saveTextWdgt.alignCenter(),this.saveButton=new SimpleButtonMorph(!0,this,"informTarget",this.saveTextWdgt),this.add(this.saveButton),this.okButton=new SimpleButtonMorph(!0,this,"notifyTargetAndClose","ok"),this.add(this.okButton),this.tempPromptEntryField.checkIfTextContentWasModifiedFromTextAtStart(),this.invalidateLayout()},window.CodePromptMorph.prototype.textContentModified=function(){return this.saveTextWdgt.setColor(new Color(0,0,0))},window.CodePromptMorph.prototype.textContentUnmodified=function(){return this.saveTextWdgt.setColor(new Color(200,200,200))},window.CodePromptMorph.prototype.informTarget=function(){return this.target[this.callback].call(this.target,nil,this.textMorph),this.textMorph.considerCurrentTextAsReferenceText(),this.tempPromptEntryField.checkIfTextContentWasModifiedFromTextAtStart()},window.CodePromptMorph.prototype.notifyTargetAndClose=function(){return this.informTarget(),this.close()},window.CodePromptMorph.prototype.doLayout=function(e){var t,n,o,i;return this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(CodePromptMorph.__super__.doLayout.apply(this,arguments),trackChanges.push(!1),i=this.height()-2*this.externalPadding-this.internalPadding-15,o=this.top()+this.externalPadding+i,this.tempPromptEntryField.parent===this&&(this.tempPromptEntryField.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.top()+this.externalPadding)),this.tempPromptEntryField.rawSetExtent(new Point(this.width()-2*this.externalPadding,i))),n=(this.width()-2*this.externalPadding-3*this.internalPadding-WorldMorph.preferencesAndSettings.handleSize)/3,this.cancelButton.parent===this&&(t=(t=new Rectangle(new Point(this.left()+this.externalPadding+0*(n+this.internalPadding),o+this.internalPadding))).setBoundsWidthAndHeight(n,15),this.cancelButton.doLayout(t)),this.saveButton.parent===this&&(t=(t=new Rectangle(new Point(this.left()+this.externalPadding+1*(n+this.internalPadding),o+this.internalPadding))).setBoundsWidthAndHeight(n,15),this.saveButton.doLayout(t)),this.okButton.parent===this&&(t=(t=new Rectangle(new Point(this.left()+this.externalPadding+2*(n+this.internalPadding),o+this.internalPadding))).setBoundsWidthAndHeight(n,15),this.okButton.doLayout(t)),trackChanges.pop(),this.fullChanged(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted())},window.CodePromptMorph.instances=new Set,ControllerMixin={onceAddedClassProperties:function(e){return this.addInstanceProperties(e,{openTargetSelector:function(){var e,t;return(e=world.plausibleTargetAndDestinationMorphs(this)).length>0?(t=new MenuMorph(this,!1,this,!0,!0,"choose target:"),e.forEach(e=>{if(!(e instanceof FanoutPinWdgt))return t.addMenuItem(e.toString().replace("Wdgt","").slice(0,50)+" ➜",!1,this,"openTargetPropertySelector",nil,nil,nil,nil,nil,e,nil,!0)})):t=new MenuMorph(this,!1,this,!0,!0,"no targets available"),t.popUpAtHand()},setTargetAndActionWithOnesPickedFromMenu:function(e,t,n,o){return this.target=n,this.action=o,null!=this.target[this.action+"IsConnected"]&&(this.target[this.action+"IsConnected"]=!0),this.connectionsCalculationToken=getRandomInt(-2e4,2e4),"function"==typeof this.reactToTargetConnection?this.reactToTargetConnection():void 0}})}},BackBufferMixin={onceAddedClassProperties:function(e){return this.addInstanceProperties(e,{backBuffer:nil,backBufferContext:nil,backBufferContext_isDerivedValue:!0,calculateKeyValues:function(e,t){var n,o,i,r,l,a,s,d,h;return(o=t.intersect(this.boundingBox()).round()).isNotEmpty()&&(r=this.position().neg(),a=(s=o.translateBy(r).round()).left()*ceilPixelRatio,d=s.top()*ceilPixelRatio,n=o.left()*ceilPixelRatio,i=o.top()*ceilPixelRatio,h=Math.min(s.width()*ceilPixelRatio,this.backBuffer.width-a),l=Math.min(s.height()*ceilPixelRatio,this.backBuffer.height-d)),[o,a,d,n,i,h,l]},isTransparentAt:function(e){return this.bounds.debugIfFloats(),!!this.boundsContainPoint(e)&&(!this.texture&&0===this.getPixelColor(e).a)},getPixelColor:function(e){var t,n;return[this.backBuffer,this.backBufferContext]=this.createRefreshOrGetBackBuffer(),n=e.toLocalCoordinatesOf(this),t=this.backBufferContext.getImageData(n.x*ceilPixelRatio,n.y*ceilPixelRatio,1,1),new Color(t.data[0],t.data[1],t.data[2],t.data[3])},paintIntoAreaOrBlitFromBackBuffer:function(e,t,n){var o,i,r,l,a,s,d;return"function"==typeof this.justBeforeBeingPainted&&this.justBeforeBeingPainted(),!this.visibleBasedOnIsVisibleProperty()||this.isCollapsed()?nil:([this.backBuffer,this.backBufferContext]=this.createRefreshOrGetBackBuffer(),null==this.backBuffer?nil:([i,a,s,o,r,d,l]=this.calculateKeyValues(e,t),d<1||l<1||i.isEmpty()?nil:(e.save(),e.globalAlpha=(null!=n?n.alpha:1)*this.alpha,e.drawImage(this.backBuffer,Math.round(a),Math.round(s),Math.round(d),Math.round(l),Math.round(o),Math.round(r),Math.round(d),Math.round(l)),e.restore(),this.paintHighlight(e,o,r,d,l))))}})}},window.ColorPaletteMorph=function(e=nil,t){this.target=e,ColorPaletteMorph.__super__.constructor.call(this),this.silentRawSetExtent(t||new Point(80,50)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ColorPaletteMorph,"name",{value:"ColorPaletteMorph"}),window.ColorPaletteMorph.__super__=window.Widget.prototype,window.ColorPaletteMorph=extend(window.ColorPaletteMorph,window.Widget),window.ColorPaletteMorph.augmentWith(window.ControllerMixin,"ColorPaletteMorph"),window.ColorPaletteMorph.augmentWith(window.BackBufferMixin,"ColorPaletteMorph"),window.ColorPaletteMorph.prototype.target=nil,window.ColorPaletteMorph.prototype.action=nil,window.ColorPaletteMorph.prototype.argumentToAction=nil,window.ColorPaletteMorph.prototype.choice=nil,window.ColorPaletteMorph.prototype.colloquialName=function(){return"color palette"},window.ColorPaletteMorph.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return this.layoutSpecDetails=new WindowContentLayoutSpec(PreferredSize.DONT_MIND,PreferredSize.DONT_MIND,1)},window.ColorPaletteMorph.prototype.detachesWhenDragged=function(){return!1},window.ColorPaletteMorph.prototype.createRefreshOrGetBackBuffer=function(){var e,t,n,o,i,r,l,a,s,d,h,p,c,u;if(i=this.constructor.name+"-"+this.extent().toString(),null!=(o=world.cacheForImmutableBackBuffers.get(i)))return o;for(r=this.extent(),(t=(e=newCanvas(r.scaleBy(ceilPixelRatio))).getContext("2d")).scale(ceilPixelRatio,ceilPixelRatio),this.choice=new Color,c=a=0,h=r.x;0<=h?a<=h:a>=h;c=0<=h?++a:--a)for(l=360*c/r.x,u=0,u=s=0,p=r.y;0<=p?s<=p:s>=p;u=0<=p?++s:--s)d=100-u/r.y*100,t.fillStyle="hsl("+l+",100%,"+d+"%)",t.fillRect(c,u,1,1);return n=[e,t],world.cacheForImmutableBackBuffers.set(i,n),n},window.ColorPaletteMorph.prototype.nonFloatDragging=function(e,t,n){return this.choice=this.getPixelColor(t.add(n||new Point(0,0))),this.connectionsCalculationToken=getRandomInt(-2e4,2e4),this.updateTarget()},window.ColorPaletteMorph.prototype.mouseDownLeft=function(e){return this.choice=this.getPixelColor(e),this.connectionsCalculationToken=getRandomInt(-2e4,2e4),this.updateTarget()},window.ColorPaletteMorph.prototype.stringSetters=function(e,t){return[e,t]=ColorPaletteMorph.__super__.stringSetters.call(this,e,t),e.push("bang!"),t.push("bang"),this.deduplicateSettersAndSortByMenuEntryString(e,t)},window.ColorPaletteMorph.prototype.numericalSetters=function(e,t){return[e,t]=ColorPaletteMorph.__super__.numericalSetters.call(this,e,t),e.push("bang!"),t.push("bang"),this.deduplicateSettersAndSortByMenuEntryString(e,t)},window.ColorPaletteMorph.prototype.colorSetters=function(e,t){return[e,t]=ColorPaletteMorph.__super__.colorSetters.call(this,e,t),e.push("bang!"),t.push("bang"),this.deduplicateSettersAndSortByMenuEntryString(e,t)},window.ColorPaletteMorph.prototype.bang=function(e,t,n,o){if(null!=this.choice&&(o||n!==this.connectionsCalculationToken))return this.connectionsCalculationToken=null==n?getRandomInt(-2e4,2e4):n,this.updateTarget()},window.ColorPaletteMorph.prototype.updateTarget=function(){null!=this.target&&(null==this.action&&(this.action="setColor"),this.target[this.action].call(this.target,this.choice,nil,this.connectionsCalculationToken))},window.ColorPaletteMorph.prototype.reactToTargetConnection=function(){},window.ColorPaletteMorph.prototype.addMorphSpecificMenuEntries=function(e,t){return ColorPaletteMorph.__super__.addMorphSpecificMenuEntries.apply(this,arguments),t.addLine(),world.isIndexPage?t.addMenuItem("connect to ➜",!0,this,"openTargetSelector","connect to\nanother widget"):t.addMenuItem("set target",!0,this,"openTargetSelector","choose another morph\nwhose color property\n will be controlled by this one")},window.ColorPaletteMorph.prototype.openTargetPropertySelector=function(e,t,n){var o,i,r,l,a,s;for([a,o]=n.colorSetters(),l=new MenuMorph(this,!1,this,!0,!0,"choose target property:"),i=r=0,s=a.length;0<=s?r<s:r>s;i=0<=s?++r:--r)l.addMenuItem(a[i],!0,this,"setTargetAndActionWithOnesPickedFromMenu",nil,nil,nil,nil,nil,n,o[i]);return 0===a.length&&(l=new MenuMorph(this,!1,this,!0,!0,"no target properties available")),l.popUpAtHand()},window.ColorPaletteMorph.instances=new Set,window.ColorPickerMorph=function(e=new Color(255,255,255)){this.choice=e,ColorPickerMorph.__super__.constructor.call(this),this.appearance=new RectangularAppearance(this),this.color=new Color(255,255,255),this.rawSetExtent(new Point(80,80)),this.buildSubmorphs(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ColorPickerMorph,"name",{value:"ColorPickerMorph"}),window.ColorPickerMorph.__super__=window.Widget.prototype,window.ColorPickerMorph=extend(window.ColorPickerMorph,window.Widget),window.ColorPickerMorph.prototype.feedback=nil,window.ColorPickerMorph.prototype.choice=nil,window.ColorPickerMorph.prototype.colorPalette=nil,window.ColorPickerMorph.prototype.grayPalette=nil,window.ColorPickerMorph.prototype.colloquialName=function(){return"color picker"},window.ColorPickerMorph.prototype.buildSubmorphs=function(){return this.feedback=new RectangleMorph(new Point(20,20),this.choice),this.colorPalette=new ColorPaletteMorph(this.feedback,new Point(this.width(),50)),this.grayPalette=new GrayPaletteMorph(this.feedback,new Point(this.width(),5)),this.add(this.colorPalette),this.add(this.grayPalette),this.add(this.feedback),this.invalidateLayout()},window.ColorPickerMorph.prototype.iHaveBeenAddedTo=function(e,t){},window.ColorPickerMorph.prototype.getColor=function(){return this.feedback.color},window.ColorPickerMorph.prototype.rawSetExtent=function(e){return ColorPickerMorph.__super__.rawSetExtent.apply(this,arguments),this.invalidateLayout()},window.ColorPickerMorph.prototype.doLayout=function(e){var t,n;return null==e&&(null!=this.desiredExtent?(e=this.desiredExtent,this.desiredExtent=nil):e=this.extent(),null!=this.desiredPosition?(e=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(e),this.desiredPosition=nil):e=new Rectangle(this.position()).setBoundsWidthAndHeight(e)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(trackChanges.push(!1),this.rawSetBounds(e),this.colorPalette.fullRawMoveTo(this.position()),this.colorPalette.rawSetExtent(new Point(this.width(),Math.round(.625*this.height()))),this.grayPalette.fullRawMoveTo(this.colorPalette.bottomLeft()),this.grayPalette.rawSetExtent(new Point(this.width(),Math.round(.0625*this.height()))),t=this.grayPalette.left()+Math.floor((this.grayPalette.width()-this.feedback.width())/2),n=this.grayPalette.bottom()+Math.floor((this.bottom()-this.grayPalette.bottom()-this.feedback.height())/2),this.feedback.fullRawMoveTo(new Point(t,n)),this.feedback.rawSetExtent(new Point(Math.min(this.width(),Math.round(.25*this.height())),Math.round(.25*this.height()))),trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0)},window.ColorPickerMorph.instances=new Set,window.RectangularAppearance=function(){window.RectangularAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.RectangularAppearance,"name",{value:"RectangularAppearance"}),window.RectangularAppearance.__super__=window.Appearance.prototype,window.RectangularAppearance=extend(window.RectangularAppearance,window.Appearance),window.RectangularAppearance.prototype.isTransparentAt=function(e){return!this.morph.boundingBoxTight().containsPoint(e)&&!(null!=this.morph.backgroundTransparency&&null!=this.morph.backgroundColor&&this.morph.backgroundTransparency>0&&this.morph.boundsContainPoint(e))},window.RectangularAppearance.prototype.paintHighlight=function(e,t,n,o,i){},window.RectangularAppearance.prototype.paintIntoAreaOrBlitFromBackBuffer=function(e,t,n){var o,i,r,l,a,s,d,h,p,c;return this.morph.preliminaryCheckNothingToDraw(t,e)?nil:([i,d,h,o,r,c,s]=this.morph.calculateKeyValues(e,t),c<1||s<1||i.isEmpty()?nil:("function"==typeof(l=this.morph).justBeforeBeingPainted&&l.justBeforeBeingPainted(),e.save(),e.globalAlpha=(null!=n?n.alpha:1)*this.morph.alpha,this.morph.color,e.fillStyle=this.morph.color.toString(),p=new Rectangle(o,r,o+c,r+s),null!=this.morph.backgroundColor&&(a=this.morph.backgroundColor,null!=n&&(a="black"),this.morph.paintRectangle(e,p.left(),p.top(),p.width(),p.height(),a)),p=p.intersect(this.morph.boundingBoxTight().scaleBy(ceilPixelRatio)),a=this.morph.color,null!=n&&(a="black"),this.morph.paintRectangle(e,p.left(),p.top(),p.width(),p.height(),a),"function"==typeof this.drawAdditionalPartsOnBaseShape&&this.drawAdditionalPartsOnBaseShape(!1,!1,n,e,o,r,c,s),null==n&&this.paintStroke(e,t),e.restore(),this.paintHighlight(e,o,r,c,s)))},window.RectangularAppearance.prototype.paintStroke=function(e,t){var n,o,i,r,l,a,s,d,h;return this.morph.preliminaryCheckNothingToDraw(t,e)?nil:([o,a,s,n,i,h,l]=this.morph.calculateKeyValues(e,t),h<1||l<1||o.isEmpty()?nil:("function"==typeof(r=this.morph).justBeforeBeingPainted&&r.justBeforeBeingPainted(),e.save(),d=(d=new Rectangle(n,i,n+h,i+l)).intersect(this.morph.boundingBoxTight().scaleBy(ceilPixelRatio)),null!=this.morph.strokeColor&&(e.beginPath(),e.rect(Math.round(d.left()),Math.round(d.top()),Math.round(d.width()),Math.round(d.height())),e.clip(),e.globalAlpha=this.morph.alpha,e.lineWidth=1,e.strokeStyle=this.morph.strokeColor.toString(),e.strokeRect(Math.round(this.morph.left()*ceilPixelRatio)+.5,Math.round(this.morph.top()*ceilPixelRatio)+.5,Math.round(this.morph.width()*ceilPixelRatio)-1,Math.round(this.morph.height()*ceilPixelRatio)-1)),e.restore()))},window.RectangularAppearance.instances=new Set,window.DesktopAppearance=function(){window.DesktopAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DesktopAppearance,"name",{value:"DesktopAppearance"}),window.DesktopAppearance.__super__=window.RectangularAppearance.prototype,window.DesktopAppearance=extend(window.DesktopAppearance,window.RectangularAppearance),window.DesktopAppearance.prototype.currentPattern=nil,window.DesktopAppearance.prototype.paintIntoAreaOrBlitFromBackBuffer=function(e,t,n){var o,i,r,l,a,s,d,h,p,c,u;if(this.morph.preliminaryCheckNothingToDraw(t,e))return nil;if(null!=this.morph.patternName&&this.morph.patternName===this.morph.pattern1&&(this.currentPattern=this.morph.patternName,this.pattern=nil),null!=this.morph.patternName&&this.morph.patternName!==this.currentPattern){switch(this.currentPattern=this.morph.patternName,this.pattern=document.createElement("canvas"),this.pattern.width=5*ceilPixelRatio,this.pattern.height=5*ceilPixelRatio,(d=this.pattern.getContext("2d")).scale(ceilPixelRatio,ceilPixelRatio),this.morph.patternName){case this.morph.pattern2:d.fillStyle="rgb(244, 243, 244)",d.fillRect(0,0,5,5),d.lineWidth=.25,d.beginPath(),d.arc(2,2,2,0,2*Math.PI),d.fillStyle="rgb(220, 219, 220)",d.fill();break;case this.morph.pattern3:d.fillStyle="rgb(244, 243, 244)",d.fillRect(0,0,5,5),d.moveTo(1,0),d.lineTo(1,5),d.strokeStyle="rgb(225, 224, 225)",d.stroke();break;case this.morph.pattern4:d.fillStyle="rgb(244, 243, 244)",d.fillRect(0,0,5,5),d.moveTo(0,5),d.lineTo(5,0),d.strokeStyle="rgb(225, 224, 225)",d.stroke();break;case this.morph.pattern5:d.fillStyle="rgb(244, 243, 244)",d.fillRect(0,0,5,5),d.moveTo(2,2),d.lineTo(4,4),d.strokeStyle="rgb(225, 224, 225)",d.stroke();break;case this.morph.pattern6:d.fillStyle="rgb(244, 243, 244)",d.fillRect(0,0,5,5),d.moveTo(0,0),d.lineTo(3,3),d.lineTo(5,0),d.strokeStyle="rgb(225, 224, 225)",d.stroke();break;case this.morph.pattern7:d.fillStyle="rgb(244, 243, 244)",d.fillRect(0,0,5,5),d.moveTo(0,5),d.lineTo(5,0),d.moveTo(2.5,2.5),d.lineTo(0,0),d.strokeStyle="rgb(225, 224, 225)",d.stroke()}this.pattern=e.createPattern(this.pattern,"repeat")}return[i,h,p,o,r,u,s]=this.morph.calculateKeyValues(e,t),u<1||s<1||i.isEmpty()?nil:("function"==typeof(l=this.morph).justBeforeBeingPainted&&l.justBeforeBeingPainted(),e.save(),e.globalAlpha=(null!=n?n.alpha:1)*this.morph.alpha,this.morph.color,e.fillStyle=this.morph.color.toString(),c=new Rectangle(o,r,o+u,r+s),null!=this.morph.backgroundColor&&(a=this.morph.backgroundColor,null!=n&&(a="black"),this.morph.paintRectangle(e,c.left(),c.top(),c.width(),c.height(),a)),c=c.intersect(this.morph.boundingBoxTight().scaleBy(ceilPixelRatio)),a=this.morph.color,null!=n&&(a="black"),this.morph.paintRectangle(e,c.left(),c.top(),c.width(),c.height(),a),"function"==typeof this.drawAdditionalPartsOnBaseShape&&this.drawAdditionalPartsOnBaseShape(!1,!1,n,e,o,r,u,s),null==n&&this.paintStroke(e,t),null!=this.pattern&&(e.fillStyle=this.pattern,e.fillRect(c.left(),c.top(),c.width(),c.height())),e.restore(),this.paintHighlight(e,o,r,u,s))},window.DesktopAppearance.instances=new Set,UpperRightInternalHaloMixin={onceAddedClassProperties:function(e){return this.addInstanceProperties(e,{isLockingToPanels:!1,proportionOfParent:.5,fixedSize:0,positionWithinParent:"topRight",parentHasReLayouted:function(){return this.updateResizerPosition(),this.moveInFrontOfSiblings(),window[this[arguments.callee.name+"_class_injected_in"]].__super__[arguments.callee.name].apply(this,arguments)},updateResizerPosition:function(){if(this.parent)return this.silentUpdateResizerPosition(),this.changed()},silentUpdateResizerPosition:function(){var e,t,n;if(this.parent){if(t=this.parent.width(),n=this.parent.height(),e=Math.min(t,n)*this.proportionOfParent+this.fixedSize,this.silentRawSetExtent(new Point(e,e)),"topLeft"===this.positionWithinParent)return this.silentFullRawMoveTo(new Point(this.parent.left(),this.parent.top()));if("topRight"===this.positionWithinParent)return this.silentFullRawMoveTo(new Point(this.parent.right()-e,this.parent.top()))}},makeSolidWithParentMorph:function(e,t,n){return n.add(this),this.updateResizerPosition(),this.noticesTransparentClick=!0},attach:function(){var e,t;if(e=world.plausibleTargetAndDestinationMorphs(this),t=new MenuMorph(this,!1,this,!0,!0,"choose parent:"),e.length>0?e.forEach(e=>t.addMenuItem(e.toString().slice(0,50)+" ➜",!0,this,"makeSolidWithParentMorph",nil,nil,nil,nil,nil,e,nil,!0)):t=new MenuMorph(this,!1,this,!0,!0,"no morphs to attach to"),e.length)return t.popUpAtHand()}})}},window.UpperRightTriangle=function(e=nil,t=.5){var n;this.proportionOfParent=t,UpperRightTriangle.__super__.constructor.call(this),this.appearance=new UpperRightTriangleAppearance(this),this.noticesTransparentClick=!1,n=WorldMorph.preferencesAndSettings.handleSize,this.silentRawSetExtent(new Point(n,n)),e&&e.add(this),this.updateResizerPosition(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.UpperRightTriangle,"name",{value:"UpperRightTriangle"}),window.UpperRightTriangle.__super__=window.Widget.prototype,window.UpperRightTriangle=extend(window.UpperRightTriangle,window.Widget),window.UpperRightTriangle.augmentWith(window.UpperRightInternalHaloMixin,"UpperRightTriangle"),window.UpperRightTriangle.instances=new Set,window.UpperRightTriangleIconicButton=function(e=nil){UpperRightTriangleIconicButton.__super__.constructor.apply(this,arguments),this.pencilIconMorph=new PencilIconMorph(new Color(0,0,0)),this.pencilIconMorph.parentHasReLayouted=function(){return this.updateResizerPosition(),this.moveInFrontOfSiblings()},this.pencilIconMorph.updateResizerPosition=function(){if(this.parent)return this.silentUpdateResizerPosition(),this.changed()},this.pencilIconMorph.silentUpdateResizerPosition=function(){var e,t,n;if(this.parent)return t=this.parent.width(),n=this.parent.height(),e=Math.min(t,n)/2,this.silentRawSetExtent(new Point(e,e)),this.silentFullRawMoveTo(new Point(this.parent.right()-e,this.parent.top()))},this.add(this.pencilIconMorph),this.pencilIconMorph.updateResizerPosition(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.UpperRightTriangleIconicButton,"name",{value:"UpperRightTriangleIconicButton"}),window.UpperRightTriangleIconicButton.__super__=window.UpperRightTriangle.prototype,window.UpperRightTriangleIconicButton=extend(window.UpperRightTriangleIconicButton,window.UpperRightTriangle),window.UpperRightTriangleIconicButton.augmentWith(window.HighlightableMixin,"UpperRightTriangleIconicButton"),window.UpperRightTriangleIconicButton.prototype.color=new Color(255,255,255),window.UpperRightTriangleIconicButton.prototype.pencilIconMorph=nil,window.UpperRightTriangleIconicButton.instances=new Set,window.EditableMarkMorph=function(e=nil,t,n){this.editObject=t,this.editMethodAsString=n,EditableMarkMorph.__super__.constructor.call(this,e),this.toolTipMessage="edit code for the tool","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.EditableMarkMorph,"name",{value:"EditableMarkMorph"}),window.EditableMarkMorph.__super__=window.UpperRightTriangleIconicButton.prototype,window.EditableMarkMorph=extend(window.EditableMarkMorph,window.UpperRightTriangleIconicButton),window.EditableMarkMorph.prototype.editObject=nil,window.EditableMarkMorph.prototype.editMethodAsString="",window.EditableMarkMorph.prototype.mouseClickLeft=function(){return this.editObject[this.editMethodAsString].call(this.editObject)},window.EditableMarkMorph.instances=new Set,ClippingAtRectangularBoundsMixin={onceAddedClassProperties:function(e){return this.addInstanceProperties(e,{clipsAtRectangularBounds:!0,plausibleTargetAndDestinationMorphs:function(e){var t;return t=[],!this.visibleBasedOnIsVisibleProperty()||this.isCollapsed()||e.isAncestorOf(this)||!this.areBoundsIntersecting(e)||this.anyParentPopUpMarkedForClosure()||(t=[this]),this.areBoundsIntersecting(e)&&this.children.forEach((function(n){return t=t.concat(n.plausibleTargetAndDestinationMorphs(e))})),t},invalidateFullBoundsCache:function(e){if(e===this)return window[this[arguments.callee.name+"_class_injected_in"]].__super__[arguments.callee.name].call(this,this)},invalidateFullClippedBoundsCache:function(e){if(e===this)return window[this[arguments.callee.name+"_class_injected_in"]].__super__[arguments.callee.name].call(this,this)},SLOWfullBounds:function(){return this.bounds},SLOWfullClippedBounds:function(){return this.isOrphan()||!this.visibleBasedOnIsVisibleProperty()||this.isCollapsed()?Rectangle.EMPTY:this.clippedThroughBounds()},fullBounds:function(){var e;return null!=this.cachedFullBounds?(world.doubleCheckCachedMethodsResults&&(this.cachedFullBounds.eq(this.SLOWfullBounds())||alert("fullBounds is broken (cached)")),this.cachedFullBounds):(e=this.bounds,world.doubleCheckCachedMethodsResults&&(e.eq(this.SLOWfullBounds())||alert("fullBounds is broken (uncached)")),this.cachedFullBounds=e)},fullClippedBounds:function(){var e;if(this.isOrphan()||!this.visibleBasedOnIsVisibleProperty()||this.isCollapsed())e=Rectangle.EMPTY;else{if(null!=this.cachedFullClippedBounds&&this.checkFullClippedBoundsCache===WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes)return world.doubleCheckCachedMethodsResults&&(this.cachedFullClippedBounds.eq(this.SLOWfullClippedBounds())||alert("fullClippedBounds is broken")),this.cachedFullClippedBounds;e=this.clippedThroughBounds()}return world.doubleCheckCachedMethodsResults&&(e.eq(this.SLOWfullClippedBounds())||alert("fullClippedBounds is broken")),this.checkFullClippedBoundsCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes,this.cachedFullClippedBounds=e},fullPaintIntoAreaOrBlitFromBackBuffer:function(e,t,n){if(window[this[arguments.callee.name+"_class_injected_in"]].__super__[arguments.callee.name].apply(this,arguments),!this.preliminaryCheckNothingToDraw(t,e)&&null==n)return this.paintStroke,this.paintStroke(e,t)},fullPaintIntoAreaOrBlitFromBackBufferContentPotentiallyAsShadow:function(e,t,n){var o;if(!(o=this.boundingBox().intersect(t)).isEmpty())return e===world.worldCanvasContext&&this.recordDrawnAreaForNextBrokenRects(),this.paintIntoAreaOrBlitFromBackBuffer(e,o,n),this.children.forEach(t=>t.fullPaintIntoAreaOrBlitFromBackBuffer(e,o,n))},fullPaintIntoAreaOrBlitFromBackBufferJustShadow:function(e,t,n){var o;if(t=t.translateBy(-n.offset.x,-n.offset.y),!this.preliminaryCheckNothingToDraw(t,e)&&!(o=this.boundingBox().intersect(t)).isEmpty())return e.save(),e.translate(n.offset.x*ceilPixelRatio,n.offset.y*ceilPixelRatio),this.paintIntoAreaOrBlitFromBackBuffer(e,o,n),1!==this.alpha&&this.children.forEach(t=>t.fullPaintIntoAreaOrBlitFromBackBuffer(e,o,n)),e.restore()},fullRawMoveBy:function(e){return this.bounds=this.bounds.translateBy(e),this.breakNumberOfRawMovesAndResizesCaches(),this.children.forEach((function(t){return t.silentFullRawMoveBy(e)})),this.changed()}})}},window.PanelWdgt=function(e=nil){this.scrollPanel=e,PanelWdgt.__super__.constructor.call(this),this.dragsDropsAndEditingEnabled=!0,this.appearance=new RectangularAppearance(this),this.color=WorldMorph.preferencesAndSettings.defaultPanelsBackgroundColor,this.strokeColor=WorldMorph.preferencesAndSettings.defaultPanelsStrokeColor,this.scrollPanel&&(this.noticesTransparentClick=!1),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PanelWdgt,"name",{value:"PanelWdgt"}),window.PanelWdgt.__super__=window.Widget.prototype,window.PanelWdgt=extend(window.PanelWdgt,window.Widget),window.PanelWdgt.augmentWith(window.ClippingAtRectangularBoundsMixin,"PanelWdgt"),window.PanelWdgt.prototype.scrollPanel=nil,window.PanelWdgt.prototype.extraPadding=0,window.PanelWdgt.prototype._acceptsDrops=!0,window.PanelWdgt.prototype.providesAmenitiesForEditing=!0,window.PanelWdgt.prototype.colloquialName=function(){return"panel"},window.PanelWdgt.prototype.makeFolder=function(e,t,n){var o;return(o=new FolderWindowWdgt).close(),o.createReference(n||world.getNextUntitledFolderShortcutName(),this),world.howManyUntitledShortcuts++,o},window.PanelWdgt.prototype.setColor=function(e,t,n,o){var i,r;if(o||n!==this.connectionsCalculationToken){if(this.connectionsCalculationToken=null==n?getRandomInt(-2e4,2e4):n,i=PanelWdgt.__super__.setColor.call(this,e,t,n,!0),this.scrollPanel){if(null!=(null!=(r=this.scrollPanel.color)?r.eq:void 0)&&this.scrollPanel.color.eq(i))return;this.scrollPanel.color=i,this.scrollPanel.changed()}return i}},window.PanelWdgt.prototype.setAlphaScaled=function(e,t){var n;return n=PanelWdgt.__super__.setAlphaScaled.call(this,e,t),this.scrollPanel&&this.scrollPanel.alpha!==n&&(this.scrollPanel.alpha=n),n},window.PanelWdgt.prototype.mouseClickLeft=function(e,t,n,o,i,r,l){var a;if(this.bringToForeground(),null!=this.parent&&this.parent instanceof ScrollPanelWdgt&&1===this.children.filter((function(e){return!(e instanceof CaretMorph)})).length)return null!=(a=this.firstChildSuchThat((function(e){return(e instanceof TextMorph||e instanceof SimplePlainTextWdgt)&&e.isEditable})))?a.mouseClickLeft(a.bottomRight(),t,n,o,i,r,l):void 0},window.PanelWdgt.prototype.reactToDropOf=function(){var e;if(null!=this.parent&&null!=this.parent.adjustContentsBounds)return this.parent.adjustContentsBounds(),"function"==typeof(e=this.parent).adjustScrollBars?e.adjustScrollBars():void 0},window.PanelWdgt.prototype.childRemoved=function(e){var t,n;if(null!=this.parent&&("function"==typeof(t=this.parent).grandChildRemoved&&t.grandChildRemoved(),null!=this.parent.adjustContentsBounds))return this.parent.adjustContentsBounds(),"function"==typeof(n=this.parent).adjustScrollBars?n.adjustScrollBars():void 0},window.PanelWdgt.prototype.childAdded=function(e){var t;if(null!=this.parent&&("function"==typeof(t=this.parent).grandChildAdded&&t.grandChildAdded(),null!=this.parent.parent&&null!=this.parent.parent.childAddedInScrollPanel))return this.parent.parent.childAddedInScrollPanel(e)},window.PanelWdgt.prototype.addInPseudoRandomPosition=function(e){var t,n,o,i,r;if(r=this.width(),t=this.height(),o=Math.abs(hashCode(e.toString()))%r,i=Math.abs(hashCode(e.toString()+"x"))%t,n=this.position().add(new Point(o,i)),this.add(e),e.fullRawMoveTo(n),null!=this.parent&&null!=this.parent.adjustContentsBounds)return this.parent.adjustContentsBounds(),this.parent.adjustScrollBars()},window.PanelWdgt.prototype.detachesWhenDragged=function(){if(null!=this.parent)return!(this.parent instanceof ScrollPanelWdgt)&&PanelWdgt.__super__.detachesWhenDragged.apply(this,arguments)},window.PanelWdgt.prototype.grabsToParentWhenDragged=function(){return null!=this.parent&&(this.parent instanceof ScrollPanelWdgt?!this.parent.canScrollByDraggingBackground||!this.parent.anyScrollBarShowing():PanelWdgt.__super__.grabsToParentWhenDragged.apply(this,arguments))},window.PanelWdgt.prototype.reactToGrabOf=function(){var e;if(null!=this.parent&&null!=this.parent.adjustContentsBounds)return this.parent.adjustContentsBounds(),"function"==typeof(e=this.parent).adjustScrollBars?e.adjustScrollBars():void 0},window.PanelWdgt.prototype.addMorphSpecificMenuEntries=function(e,t){if(PanelWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),this.children.length)return t.addLine(),t.addMenuItem("move all inside",!0,this,"keepAllSubmorphsWithin","keep all submorphs\nwithin and visible")},window.PanelWdgt.prototype.keepAllSubmorphsWithin=function(){return this.children.forEach(e=>e.fullRawMoveWithin(this))},window.PanelWdgt.prototype.editButtonPressedFromWindowBar=function(){return this.dragsDropsAndEditingEnabled?this.disableDragsDropsAndEditing(this):this.enableDragsDropsAndEditing(this)},window.PanelWdgt.instances=new Set,window.ScrollPanelWdgt=function(e,t=WorldMorph.preferencesAndSettings.scrollBarsThickness,n){this.contents=e,this.scrollBarsThickness=t,this.sliderColor=n,this.alpha=0,ScrollPanelWdgt.__super__.constructor.call(this),null==this.contents&&(this.contents=new PanelWdgt(this)),this.addRaw(this.contents),this.color=this.contents.color,this.alpha=this.contents.alpha,this.hBar=new SliderMorph(nil,nil,nil,nil,this.sliderColor),this.hBar.rawSetHeight(this.scrollBarsThickness),this.hBar.target=this,this.addRaw(this.hBar),this.vBar=new SliderMorph(nil,nil,nil,nil,this.sliderColor),this.vBar.rawSetWidth(this.scrollBarsThickness),this.vBar.target=this,this.addRaw(this.vBar),this.hBar.target=this,this.hBar.action="adjustContentsBasedOnHBar",this.vBar.target=this,this.vBar.action="adjustContentsBasedOnVBar",this.adjustScrollBars(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ScrollPanelWdgt,"name",{value:"ScrollPanelWdgt"}),window.ScrollPanelWdgt.__super__=window.PanelWdgt.prototype,window.ScrollPanelWdgt=extend(window.ScrollPanelWdgt,window.PanelWdgt),window.ScrollPanelWdgt.prototype.autoScrollTrigger=nil,window.ScrollPanelWdgt.prototype.hasVelocity=!0,window.ScrollPanelWdgt.prototype.padding=0,window.ScrollPanelWdgt.prototype.growth=0,window.ScrollPanelWdgt.prototype.isTextLineWrapping=!1,window.ScrollPanelWdgt.prototype.isScrollingByfloatDragging=!0,window.ScrollPanelWdgt.prototype.scrollBarsThickness=nil,window.ScrollPanelWdgt.prototype.contents=nil,window.ScrollPanelWdgt.prototype.vBar=nil,window.ScrollPanelWdgt.prototype.hBar=nil,window.ScrollPanelWdgt.prototype._adjustingContentsBounds=!1,window.ScrollPanelWdgt.prototype.canScrollByDraggingBackground=!1,window.ScrollPanelWdgt.prototype.canScrollByDraggingForeground=!1,window.ScrollPanelWdgt.prototype.wantsDropOf=function(e){return!(this.contents instanceof FolderPanelWdgt)&&this._acceptsDrops},window.ScrollPanelWdgt.prototype.colloquialName=function(){return this.contents instanceof FolderPanelWdgt?"folder":this.contents instanceof ToolPanelWdgt?"toolbar":"scrollable panel"},window.ScrollPanelWdgt.prototype.adjustContentsBasedOnHBar=function(e){return this.contents.fullRawMoveTo(new Point(this.left()-e,this.contents.position().y)),this.adjustContentsBounds(),this.adjustScrollBars()},window.ScrollPanelWdgt.prototype.adjustContentsBasedOnVBar=function(e){return this.contents.fullRawMoveTo(new Point(this.contents.position().x,this.top()-e)),this.adjustContentsBounds(),this.adjustScrollBars()},window.ScrollPanelWdgt.prototype.setColor=function(e,t,n,o){var i;if(o||n!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==n?getRandomInt(-2e4,2e4):n,i=ScrollPanelWdgt.__super__.setColor.call(this,e,t,n,!0),this.contents.setColor(e,t,n),i},window.ScrollPanelWdgt.prototype.setAlphaScaled=function(e,t){var n;return n=ScrollPanelWdgt.__super__.setAlphaScaled.apply(this,arguments),this.contents.setAlphaScaled(e,t),n},window.ScrollPanelWdgt.prototype.anyScrollBarShowing=function(){return!!(this.hBar.visibleBasedOnIsVisibleProperty()&&!this.hBar.isCollapsed()||this.vBar.visibleBasedOnIsVisibleProperty()&&!this.vBar.isCollapsed())},window.ScrollPanelWdgt.prototype.adjustScrollBars=function(){var e,t,n,o;if(t=Math.max(this.scrollBarsThickness,WorldMorph.preferencesAndSettings.handleSize)+2*this.padding,e=this.width()-t,o=this.height()-t,this.parent instanceof ListMorph||this.changed(),this.hBar.target===this&&(this.contents.width()>=this.width()+1?(this.hBar.show(),this.hBar.width()!==e&&this.hBar.rawSetWidth(e),this.hBar.parent===this&&this.hBar.fullRawMoveTo(new Point(this.left(),this.bottom()-this.hBar.height())),n=this.contents.width()-this.width(),this.hBar.updateSpecs(0,n,this.left()-this.contents.left(),this.width()/this.contents.width()*n)):this.hBar.hide()),this.vBar.target===this)return this.contents.height()>=this.height()+1?(this.vBar.show(),this.vBar.height()!==o&&this.vBar.rawSetHeight(o),this.vBar.parent===this&&this.vBar.fullRawMoveTo(new Point(this.right()-this.vBar.width(),this.top())),n=this.contents.height()-this.height(),this.vBar.updateSpecs(0,n,this.top()-this.contents.top(),this.height()/this.contents.height()*n)):this.vBar.hide()},window.ScrollPanelWdgt.prototype.add=function(e,t=nil,n=LayoutSpec.ATTACHEDAS_FREEFLOATING,o,i,r){return e instanceof ModifiedTextTriangleAnnotationWdgt?ScrollPanelWdgt.__super__.add.apply(this,arguments):(this.contents.add(e,t,n,o,nil,r),this.adjustContentsBounds(),this.adjustScrollBars())},window.ScrollPanelWdgt.prototype.addMany=function(e){return this.contents.addMany(e),this.adjustContentsBounds(),this.adjustScrollBars()},window.ScrollPanelWdgt.prototype.showResizeAndMoveHandlesAndLayoutAdjusters=function(){return ScrollPanelWdgt.__super__.showResizeAndMoveHandlesAndLayoutAdjusters.apply(this,arguments),this.adjustContentsBounds(),this.adjustScrollBars()},window.ScrollPanelWdgt.prototype.setContents=function(e,t){return this.extraPadding=t,this.contents.closeChildren(),this.contents.fullRawMoveTo(this.position()),e.fullRawMoveTo(this.position().add(this.padding+this.extraPadding)),this.add(e)},window.ScrollPanelWdgt.prototype.rawSetExtent=function(e){if(!e.eq(this.extent()))return this.breakNumberOfRawMovesAndResizesCaches(),!this.isTextLineWrapping||this.contents instanceof SimpleVerticalStackPanelWdgt||this.contents.fullRawMoveTo(this.position()),ScrollPanelWdgt.__super__.rawSetExtent.call(this,e),this.contents.rawSetExtent(e),this.adjustContentsBounds(),this.adjustScrollBars()},window.ScrollPanelWdgt.prototype.reactToDropOf=function(){return this.adjustContentsBounds(),this.adjustScrollBars()},window.ScrollPanelWdgt.prototype.reactToGrabOf=function(){return this.adjustContentsBounds(),this.adjustScrollBars()},window.ScrollPanelWdgt.prototype.adjustContentsBounds=function(){var e,t,n,o,i,r,l;if(!this._adjustingContentsBounds)return this._adjustingContentsBounds=!0,t=Math.floor(this.extraPadding+this.padding),l=2*t,this.contents instanceof SimpleVerticalStackPanelWdgt?this.contents.adjustContentsBounds():this.isTextLineWrapping&&this.contents instanceof PanelWdgt&&this.contents.children.forEach(e=>{if(e instanceof TextMorph||e instanceof SimplePlainTextWdgt)return e.rawSetWidth(this.contents.width()-l),e.maxTextWidth=this.contents.width()-l,this.contents.rawSetHeight(Math.max(e.height(),this.height())-l)}),(r=null!=(n=this.contents.subMorphsMergedFullBounds())?n.ceil():void 0)?(null!=this.contents.externalPadding&&(r=r.expandBy(this.contents.externalPadding)),this.isTextLineWrapping||this instanceof SimplePlainTextScrollPanelWdgt||this instanceof SimpleVerticalStackScrollPanelWdgt?((e=(e=r.expandBy(t).ceil()).merge(new Rectangle(this.contents.left(),this.contents.top(),this.contents.left()+this.width(),this.contents.top()+1))).height()<this.height()&&(e=e.growBy(new Point(0,this.height()-e.height()))),e.width()<this.width()&&(e=e.growBy(new Point(this.width()-e.width(),0)))):e=r.expandBy(t).merge(null!=(o=this.boundingBox())?o.ceil():void 0)):e=null!=(i=this.boundingBox())?i.ceil():void 0,this.contents.boundingBox().eq(e)||(this.contents.silentRawSetBounds(e),this.contents.reLayout()),this.keepContentsInScrollPanelWdgt(),this._adjustingContentsBounds=!1},window.ScrollPanelWdgt.prototype.keepContentsInScrollPanelWdgt=function(){if(this.contents.left()>this.left()&&this.contents.fullRawMoveBy(new Point(this.left()-this.contents.left(),0)),this.contents.right()<this.right()&&this.contents.fullRawMoveBy(new Point(this.right()-this.contents.right(),0)),this.contents.top()>this.top()&&this.contents.fullRawMoveBy(new Point(0,this.top()-this.contents.top())),this.contents.bottom()<this.bottom())return this.contents.fullRawMoveBy(new Point(0,this.bottom()-this.contents.bottom()))},window.ScrollPanelWdgt.prototype.scrollX=function(e){var t,n,o,i,r;return t=this.contents.left(),o=this.left(),(i=t+e)+(n=this.contents.width())<(r=this.right())&&(i=r-n),i>o&&(i=o),i!==t&&(this.contents.fullRawMoveLeftSideTo(i),!0)},window.ScrollPanelWdgt.prototype.scrollTo=function(e){return this.contents.fullRawMoveLeftSideTo(-e.x),this.contents.fullRawMoveTopSideTo(-e.y),this.adjustScrollBars()},window.ScrollPanelWdgt.prototype.scrollToBottom=function(){return this.scrollY(-1e5),this.adjustScrollBars()},window.ScrollPanelWdgt.prototype.scrollY=function(e){var t,n,o,i,r;return o=this.contents.top(),r=this.top(),(i=o+e)+(n=this.contents.height())<(t=this.bottom())&&(i=t-n),i>r&&(i=r),i!==o&&(this.contents.fullRawMoveTopSideTo(i),!0)},window.ScrollPanelWdgt.prototype.mouseDownLeft=function(e){var t,n,o,i;return this.isScrollingByfloatDragging?(i=e,t=0,n=0,o=.8,world.steppingWdgts.add(this),this.step=()=>{var e,r,l;if(l=!1,world.hand.mouseButton&&!world.hand.isThisPointerFloatDraggingSomething()&&!(null!=(r=world.hand.wdgtToGrab)?r.detachesWhenDragged():void 0)&&this.boundsContainPoint(world.hand.position())?(e=world.hand.position(),this.hBar.visibleBasedOnIsVisibleProperty()&&!this.hBar.isCollapsed()&&0!==(t=e.x-i.x)&&(l||(l=this.scrollX(t))),this.vBar.visibleBasedOnIsVisibleProperty()&&!this.vBar.isCollapsed()&&0!==(n=e.y-i.y)&&(l||(l=this.scrollY(n))),i=e):this.hasVelocity?Math.abs(t)<.5&&Math.abs(n)<.5?(this.step=noOperation,world.steppingWdgts.delete(this)):(this.hBar.visibleBasedOnIsVisibleProperty()&&!this.hBar.isCollapsed()&&0!==(t*=o)&&(l||(l=this.scrollX(Math.round(t)))),this.vBar.visibleBasedOnIsVisibleProperty()&&!this.vBar.isCollapsed()&&0!==(n*=o)&&(l||(l=this.scrollY(Math.round(n))))):(this.step=noOperation,world.steppingWdgts.delete(this)),l)return this.adjustContentsBounds(),this.adjustScrollBars()},ScrollPanelWdgt.__super__.mouseDownLeft.apply(this,arguments)):nil},window.ScrollPanelWdgt.prototype.startAutoScrolling=function(){var e,t;return t=3*WorldMorph.preferencesAndSettings.scrollBarsThickness,this.isOrphan()?nil:(e=world.hand,this.autoScrollTrigger||(this.autoScrollTrigger=Date.now()),world.steppingWdgts.add(this),this.step=()=>{var n,o;return o=e.position(),n=this.boundingBox().insetBy(t),this.boundsContainPoint(o)&&!n.containsPoint(o)&&e.isThisPointerFloatDraggingSomething()?this.autoScroll(o):(this.step=noOperation,world.steppingWdgts.delete(this),this.autoScrollTrigger=nil)})},window.ScrollPanelWdgt.prototype.autoScroll=function(e){var t,n;return Date.now()-this.autoScrollTrigger<500?nil:(t=3*WorldMorph.preferencesAndSettings.scrollBarsThickness,n=!1,this.topLeft().extent(new Point(this.width(),t)).containsPoint(e)&&(n||(n=this.scrollY(t-(e.y-this.top())))),this.topLeft().extent(new Point(t,this.height())).containsPoint(e)&&(n||(n=this.scrollX(t-(e.x-this.left())))),new Point(this.right()-t,this.top()).extent(new Point(t,this.height())).containsPoint(e)&&(n||(n=this.scrollX(-(t-(this.right()-e.x))))),new Point(this.left(),this.bottom()-t).extent(new Point(this.width(),t)).containsPoint(e)&&(n||(n=this.scrollY(-(t-(this.bottom()-e.y))))),n?(this.adjustContentsBounds(),this.adjustScrollBars()):void 0)},window.ScrollPanelWdgt.prototype.scrollCaretIntoView=function(e){var t,n,o,i,r,l,a,s,d;return e.target,i=this.top()+this.padding,t=this.bottom()-this.padding,n=this.left()+this.padding,o=this.right()-this.padding,this.adjustContentsBounds(),r=this.padding,null!=this.extraPadding&&(r+=this.extraPadding),e.top()<i?(d=this.contents.top()+i-e.top(),this.contents.fullRawMoveTopSideTo(d+r),e.fullRawMoveTopSideTo(i)):e.bottom()>t&&(l=this.contents.bottom()+t-e.bottom(),this.contents.fullRawMoveBottomSideTo(l-r),e.fullRawMoveBottomSideTo(t)),e.left()<n?(a=this.contents.left()+n-e.left(),this.contents.fullRawMoveLeftSideTo(a+r),e.fullRawMoveLeftSideTo(n)):e.right()>o&&(s=this.contents.right()+o-e.right(),this.contents.fullRawMoveRightSideTo(s-r),e.fullRawMoveRightSideTo(o)),this.adjustContentsBounds(),this.adjustScrollBars()},window.ScrollPanelWdgt.prototype.wheel=function(e,t,n,o,i,r){var l,a,s;if(a=e,s=t,n,world.hand.destroyTemporaryHandlesAndLayoutAdjustersIfHandHasNotActionedThem(this),l=!1,Math.abs(s)<Math.abs(a)&&(s=0),Math.abs(a)<Math.abs(s)&&(a=0),WorldMorph.preferencesAndSettings.invertWheelX&&(a*=-1),WorldMorph.preferencesAndSettings.invertWheelY&&(s*=-1),WorldMorph.preferencesAndSettings.invertWheelZ&&-1,0!==s&&(s>0&&this.contents.top()>=this.top()-1||s<0&&this.contents.bottom()<=this.bottom()+1?this.escalateEvent("wheel",e,t,n,o,i,r):(l=!0,this.scrollY(s*WorldMorph.preferencesAndSettings.wheelScaleY))),0!==a&&(a>0&&this.contents.left()>=this.left()-1||a<0&&this.contents.right()<=this.right()+1?this.escalateEvent("wheel",e,t,n,o,i,r):(l=!0,this.scrollX(a*WorldMorph.preferencesAndSettings.wheelScaleX))),l)return this.adjustContentsBounds(),this.adjustScrollBars()},window.ScrollPanelWdgt.prototype.addMorphSpecificMenuEntries=function(e,t){var n;return this.takesOverAndCoalescesChildrensMenus?(this.contents&&(n=this.childrenNotHandlesNorCarets(this.contents)),null!=n&&1===n.length?n[0].addMorphSpecificMenuEntries(e,t):void 0):ScrollPanelWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments)},window.ScrollPanelWdgt.prototype.enableDragsDropsAndEditing=function(e){var t;if(null==e&&(e=this),!this.dragsDropsAndEditingEnabled)return null!=(t=this.parent)&&"function"==typeof t.makePencilYellow&&t.makePencilYellow(),this.enableDrops(),this.dragsDropsAndEditingEnabled=!0,this.contents.enableDragsDropsAndEditing(this)},window.ScrollPanelWdgt.prototype.disableDragsDropsAndEditing=function(e){var t;if(null==e&&(e=this),this.dragsDropsAndEditingEnabled)return null!=(t=this.parent)&&"function"==typeof t.makePencilClear&&t.makePencilClear(),this.disableDrops(),this.dragsDropsAndEditingEnabled=!1,this.contents.disableDragsDropsAndEditing(this),this.invalidateLayout()},window.ScrollPanelWdgt.instances=new Set,window.SimplePlainTextScrollPanelWdgt=function(e,t,n){SimplePlainTextScrollPanelWdgt.__super__.constructor.call(this),this.takesOverAndCoalescesChildrensMenus=!0,this.disableDrops(),this.contents.disableDrops(),this.isTextLineWrapping=t,this.color=new Color(255,255,255),this.textWdgt=new SimplePlainTextWdgt(e,nil,nil,nil,nil,nil,new Color(230,230,130),1),this.textWdgt.isEditable=!0,t||(this.textWdgt.maxTextWidth=0),this.textWdgt.enableSelecting(),this.setContents(this.textWdgt,n),this.textWdgt.lockToPanels(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimplePlainTextScrollPanelWdgt,"name",{value:"SimplePlainTextScrollPanelWdgt"}),window.SimplePlainTextScrollPanelWdgt.__super__=window.ScrollPanelWdgt.prototype,window.SimplePlainTextScrollPanelWdgt=extend(window.SimplePlainTextScrollPanelWdgt,window.ScrollPanelWdgt),window.SimplePlainTextScrollPanelWdgt.prototype.textWdgt=nil,window.SimplePlainTextScrollPanelWdgt.prototype.modifiedTextTriangleAnnotation=nil,window.SimplePlainTextScrollPanelWdgt.prototype.widgetToBeNotifiedOfTextModificationChange=nil,window.SimplePlainTextScrollPanelWdgt.prototype.colloquialName=function(){return"text"},window.SimplePlainTextScrollPanelWdgt.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return this.layoutSpecDetails=new WindowContentLayoutSpec(PreferredSize.DONT_MIND,PreferredSize.DONT_MIND,1)},window.SimplePlainTextScrollPanelWdgt.prototype.checkIfTextContentWasModifiedFromTextAtStart=function(){return this.textWdgt.checkIfTextContentWasModifiedFromTextAtStart()},window.SimplePlainTextScrollPanelWdgt.prototype.addModifiedContentIndicator=function(){return this.modifiedTextTriangleAnnotation=new ModifiedTextTriangleAnnotationWdgt(this),this.textWdgt.widgetToBeNotifiedOfTextModificationChange=this,this.textWdgt.checkIfTextContentWasModifiedFromTextAtStart()},window.SimplePlainTextScrollPanelWdgt.prototype.textContentModified=function(){var e,t;return null!=(e=this.modifiedTextTriangleAnnotation)&&e.show(),null!=(t=this.widgetToBeNotifiedOfTextModificationChange)?t.textContentModified():void 0},window.SimplePlainTextScrollPanelWdgt.prototype.textContentUnmodified=function(){var e,t;return null!=(e=this.modifiedTextTriangleAnnotation)&&e.hide(),null!=(t=this.widgetToBeNotifiedOfTextModificationChange)?t.textContentUnmodified():void 0},window.SimplePlainTextScrollPanelWdgt.instances=new Set,window.SimpleButtonMorph=function(e=!0,t=nil,n=nil,o=nil,i=nil,r,l=nil,a=nil,s=nil,d=nil,h=!1,p=0){this.ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked=e,this.target=t,this.action=n,this.faceMorph=o,this.dataSourceMorphForTarget=i,this.morphEnv=r,this.toolTipMessage=l,this.doubleClickAction=a,this.argumentToAction1=s,this.argumentToAction2=d,this.representsAMorph=h,this.padding=p,SimpleButtonMorph.__super__.constructor.apply(this,arguments),this.appearance=new BoxyAppearance(this),this.strokeColor=new Color(196,195,196),this.color=new Color(245,244,245),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleButtonMorph,"name",{value:"SimpleButtonMorph"}),window.SimpleButtonMorph.__super__=window.EmptyButtonMorph.prototype,window.SimpleButtonMorph=extend(window.SimpleButtonMorph,window.EmptyButtonMorph),window.SimpleButtonMorph.instances=new Set,window.SwitchButtonMorph=function(e){var t,n,o,i;for(this.buttons=e,SwitchButtonMorph.__super__.constructor.call(this),n=0,o=(i=this.buttons).length;n<o;n++)t=i[n],this.add(t);this.invalidateLayout(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SwitchButtonMorph,"name",{value:"SwitchButtonMorph"}),window.SwitchButtonMorph.__super__=window.Widget.prototype,window.SwitchButtonMorph=extend(window.SwitchButtonMorph,window.Widget),window.SwitchButtonMorph.prototype.buttons=nil,window.SwitchButtonMorph.prototype.highlightColor=new Color(192,192,192),window.SwitchButtonMorph.prototype.pressColor=new Color(128,128,128),window.SwitchButtonMorph.prototype.ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked=!0,window.SwitchButtonMorph.prototype.buttonShown=0,window.SwitchButtonMorph.prototype.color=new Color(255,255,255),window.SwitchButtonMorph.prototype.iHaveBeenAddedTo=function(e,t){return this.resetSwitchButton()},window.SwitchButtonMorph.prototype.doLayout=function(e){var t,n,o,i,r;for(null==e&&(null!=this.desiredExtent?(e=this.desiredExtent,this.desiredExtent=nil):e=this.extent(),null!=this.desiredPosition?(e=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(e),this.desiredPosition=nil):e=new Rectangle(this.position()).setBoundsWidthAndHeight(e)),this.rawSetBounds(e),t=0,o=0,i=(r=this.buttons).length;o<i;o++)(n=r[o]).parent===this&&(n.doLayout(this.bounds),t%this.buttons.length===this.buttonShown?n.show():n.hide()),t++;return this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted()},window.SwitchButtonMorph.prototype.getTextDescription=function(){},window.SwitchButtonMorph.prototype.isSelected=function(){return 0!==this.buttonShown},window.SwitchButtonMorph.prototype.mouseClickLeft=function(){return this.buttonShown++,this.buttonShown=this.buttonShown%this.buttons.length,this.invalidateLayout(),this.escalateEvent("mouseClickLeft",this)},window.SwitchButtonMorph.prototype.resetSwitchButton=function(){return this.buttonShown=0,this.invalidateLayout()},window.SwitchButtonMorph.instances=new Set,window.ToggleButtonMorph=function(e,t,n=0){0===n?ToggleButtonMorph.__super__.constructor.call(this,[e,t]):ToggleButtonMorph.__super__.constructor.call(this,[t,e]),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ToggleButtonMorph,"name",{value:"ToggleButtonMorph"}),window.ToggleButtonMorph.__super__=window.SwitchButtonMorph.prototype,window.ToggleButtonMorph=extend(window.ToggleButtonMorph,window.SwitchButtonMorph),window.ToggleButtonMorph.prototype.mouseClickLeft=function(){if(null==this.parent.wantsButtonsToBehaveLikeRadioButtons||!this.parent.wantsButtonsToBehaveLikeRadioButtons||null!=this.parent.allowsRadioButtonsToBeAllDisabled&&this.parent.allowsRadioButtonsToBeAllDisabled||1!==this.buttonShown)return ToggleButtonMorph.__super__.mouseClickLeft.apply(this,arguments)},window.ToggleButtonMorph.prototype.select=function(e){if(this.buttonShown!==e)return this.buttons[this.buttonShown].mouseClickLeft()},window.ToggleButtonMorph.prototype.toggle=function(){return this.buttons[this.buttonShown].mouseClickLeft()},window.ToggleButtonMorph.instances=new Set,window.ErrorsLogViewerMorph=function(e,t,n,o){this.msg=e,this.target=t,this.callback=n,this.defaultContents=o,ErrorsLogViewerMorph.__super__.constructor.call(this,new Point(200,400)),this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ErrorsLogViewerMorph,"name",{value:"ErrorsLogViewerMorph"}),window.ErrorsLogViewerMorph.__super__=window.Widget.prototype,window.ErrorsLogViewerMorph=extend(window.ErrorsLogViewerMorph,window.Widget),window.ErrorsLogViewerMorph.prototype.tempPromptEntryField=nil,window.ErrorsLogViewerMorph.prototype.defaultContents="",window.ErrorsLogViewerMorph.prototype.textMorph=nil,window.ErrorsLogViewerMorph.prototype.clearButton=nil,window.ErrorsLogViewerMorph.prototype.pauseToggle=nil,window.ErrorsLogViewerMorph.prototype.okButton=nil,window.ErrorsLogViewerMorph.prototype.externalPadding=0,window.ErrorsLogViewerMorph.prototype.internalPadding=5,window.ErrorsLogViewerMorph.prototype.paused=!1,window.ErrorsLogViewerMorph.prototype.colloquialName=function(){return"Error log"},window.ErrorsLogViewerMorph.prototype.closeFromContainerWindow=function(e){return this.parent.hide()},window.ErrorsLogViewerMorph.prototype.addText=function(e){var t;return t=0!==this.textMorph.text.length?this.textMorph.text:"",this.textMorph.setText(t+"\n\n-----------------------------------------\n\n"+e)},window.ErrorsLogViewerMorph.prototype.showUpWithError=function(e){var t;if(this.paused||(t="",0!==world.widgetsGivingErrorWhileRepainting.length&&(t+="Some widgets crashed while painting themselves and\n",t+="hence have been banned from re-painting themseves.\n",t+="Edit/save any source code to give them another chance.\n\n"),t+=e,null!=e.stack&&(t+="\n\nStack:\n"+e.stack),this.addText(t)),!this.parent.isVisible)return this.parent.show(),this.parent.bringToForeground()},window.ErrorsLogViewerMorph.prototype.buildAndConnectChildren=function(){var e,t;return"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.tempPromptEntryField=new SimplePlainTextScrollPanelWdgt(this.defaultContents,!1,5),this.tempPromptEntryField.disableDrops(),this.tempPromptEntryField.contents.disableDrops(),this.tempPromptEntryField.color=new Color(255,255,255),this.textMorph=this.tempPromptEntryField.textWdgt,this.textMorph.backgroundColor=new Color(0,0,0,0),this.textMorph.setFontName(nil,nil,this.textMorph.monoFontStack),this.textMorph.isEditable=!0,this.textMorph.enableSelecting(),this.add(this.tempPromptEntryField),this.clearButton=new SimpleButtonMorph(!0,this,"clearTextPane","clear"),this.add(this.clearButton),e=new SimpleButtonMorph(!0,this,"pauseErrors","pause"),t=new SimpleButtonMorph(!0,this,"unpauseErrors","un-pause"),this.pauseToggle=new ToggleButtonMorph(e,t,this.paused?1:0),this.add(this.pauseToggle),this.okButton=new SimpleButtonMorph(!0,this,"closeFromContainerWindow","ok"),this.add(this.okButton),this.invalidateLayout()},window.ErrorsLogViewerMorph.prototype.pauseErrors=function(){return this.paused=!0},window.ErrorsLogViewerMorph.prototype.unpauseErrors=function(){return this.paused=!1},window.ErrorsLogViewerMorph.prototype.clearTextPane=function(){return this.textMorph.setText("")},window.ErrorsLogViewerMorph.prototype.informTarget=function(){return this.target[this.callback].call(this.target,nil,this.textMorph)},window.ErrorsLogViewerMorph.prototype.notifyTargetAndClose=function(){return this.informTarget(),this.close()},window.ErrorsLogViewerMorph.prototype.doLayout=function(e){var t,n,o,i;return null==e&&(null!=this.desiredExtent?(e=this.desiredExtent,this.desiredExtent=nil):e=this.extent(),null!=this.desiredPosition?(e=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(e),this.desiredPosition=nil):e=new Rectangle(this.position()).setBoundsWidthAndHeight(e)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(this.rawSetBounds(e),trackChanges.push(!1),i=this.height()-2*this.externalPadding-this.internalPadding-WorldMorph.preferencesAndSettings.handleSize,o=this.top()+this.externalPadding+i,this.tempPromptEntryField.parent===this&&(this.tempPromptEntryField.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.top()+this.externalPadding)),this.tempPromptEntryField.rawSetExtent(new Point(this.width()-2*this.externalPadding,i))),n=(this.width()-2*this.externalPadding-3*this.internalPadding-WorldMorph.preferencesAndSettings.handleSize)/3,this.clearButton.parent===this&&(t=(t=new Rectangle(new Point(this.left()+this.externalPadding+0*(n+this.internalPadding),o+this.internalPadding))).setBoundsWidthAndHeight(n,15),this.clearButton.doLayout(t)),this.pauseToggle.parent===this&&(t=(t=new Rectangle(new Point(this.left()+this.externalPadding+1*(n+this.internalPadding),o+this.internalPadding))).setBoundsWidthAndHeight(n,15),this.pauseToggle.doLayout(t)),this.okButton.parent===this&&(t=(t=new Rectangle(new Point(this.left()+this.externalPadding+2*(n+this.internalPadding),o+this.internalPadding))).setBoundsWidthAndHeight(n,15),this.okButton.doLayout(t)),trackChanges.pop(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted())},window.ErrorsLogViewerMorph.instances=new Set,window.FittingSpecText=function(){window.FittingSpecText.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FittingSpecText,"name",{value:"FittingSpecText"}),window.FittingSpecText.__super__=Object.prototype,window.FittingSpecText.FIT_TEXT_TO_BOX=!0,window.FittingSpecText.FIT_BOX_TO_TEXT=!1,window.FittingSpecText.instances=new Set,window.FittingSpecTextBoxFittingTextTightOrLoose=function(){window.FittingSpecTextBoxFittingTextTightOrLoose.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FittingSpecTextBoxFittingTextTightOrLoose,"name",{value:"FittingSpecTextBoxFittingTextTightOrLoose"}),window.FittingSpecTextBoxFittingTextTightOrLoose.__super__=Object.prototype,window.FittingSpecTextBoxFittingTextTightOrLoose.TIGHT=!1,window.FittingSpecTextBoxFittingTextTightOrLoose.LOOSE=!0,window.FittingSpecTextBoxFittingTextTightOrLoose.instances=new Set,window.FittingSpecTextInLargerBounds=function(){window.FittingSpecTextInLargerBounds.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FittingSpecTextInLargerBounds,"name",{value:"FittingSpecTextInLargerBounds"}),window.FittingSpecTextInLargerBounds.__super__=Object.prototype,window.FittingSpecTextInLargerBounds.FLOAT=!1,window.FittingSpecTextInLargerBounds.SCALEUP=!0,window.FittingSpecTextInLargerBounds.instances=new Set,window.FittingSpecTextInSmallerBounds=function(){window.FittingSpecTextInSmallerBounds.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FittingSpecTextInSmallerBounds,"name",{value:"FittingSpecTextInSmallerBounds"}),window.FittingSpecTextInSmallerBounds.__super__=Object.prototype,window.FittingSpecTextInSmallerBounds.CROP=!0,window.FittingSpecTextInSmallerBounds.SCALEDOWN=!1,window.FittingSpecTextInSmallerBounds.instances=new Set,GridPositioningOfAddedShortcutsMixin={onceAddedClassProperties:function(e){return this.addInstanceProperties(e,{numberOfIconsOnDesktop:0,laysIconsHorizontallyInGrid:!0,iconsLayingInGridWrapCount:3,iconsPaddingFromContainerEdges:5,add:function(e,t,n,o){var i,r;if(null==t&&(t=nil),null==n&&(n=LayoutSpec.ATTACHEDAS_FREEFLOATING),window[this[arguments.callee.name+"_class_injected_in"]].__super__[arguments.callee.name].apply(this,arguments),!o&&e instanceof WidgetHolderWithCaptionWdgt&&!(e instanceof BasementOpenerWdgt))return this.laysIconsHorizontallyInGrid?(i=this.numberOfIconsOnDesktop%this.iconsLayingInGridWrapCount,r=Math.floor(this.numberOfIconsOnDesktop/this.iconsLayingInGridWrapCount)):(i=Math.floor(this.numberOfIconsOnDesktop/this.iconsLayingInGridWrapCount),r=this.numberOfIconsOnDesktop%this.iconsLayingInGridWrapCount),e.fullRawMoveTo(this.position().add(new Point(85*i,85*r)).add(this.iconsPaddingFromContainerEdges)),this.numberOfIconsOnDesktop++}})}},KeepIconicDesktopSystemLinksBackMixin={onceAddedClassProperties:function(e){return this.addInstanceProperties(e,{childAdded:function(e){if(e instanceof IconicDesktopSystemLinkWdgt)return e.moveOnTopOfTopReference()},childMovedInFrontOfOthers:function(e){if(e instanceof IconicDesktopSystemLinkWdgt)return e.moveOnTopOfTopReference()}})}},CreateShortcutOfDroppedItemsMixin={onceAddedClassProperties:function(e){return this.addInstanceProperties(e,{aboutToDrop:function(e){return e instanceof IconicDesktopSystemShortcutWdgt?e.fullRawMoveWithin(this):e.fullRawMoveTo(this.position().add(new Point(10,10)))},reactToDropOf:function(e){if(window[this[arguments.callee.name+"_class_injected_in"]].__super__[arguments.callee.name].apply(this,arguments),!(e instanceof IconicDesktopSystemShortcutWdgt))return e.createReferenceAndClose(nil,this)}})}},window.FolderPanelWdgt=function(){window.FolderPanelWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FolderPanelWdgt,"name",{value:"FolderPanelWdgt"}),window.FolderPanelWdgt.__super__=window.PanelWdgt.prototype,window.FolderPanelWdgt=extend(window.FolderPanelWdgt,window.PanelWdgt),window.FolderPanelWdgt.augmentWith(window.GridPositioningOfAddedShortcutsMixin,"FolderPanelWdgt"),window.FolderPanelWdgt.augmentWith(window.KeepIconicDesktopSystemLinksBackMixin,"FolderPanelWdgt"),window.FolderPanelWdgt.augmentWith(window.CreateShortcutOfDroppedItemsMixin,"FolderPanelWdgt"),window.FolderPanelWdgt.prototype.addMorphSpecificMenuEntries=function(e,t){return FolderPanelWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),t.addLine(),t.addMenuItem("new folder",!0,this,"makeFolder","make a new folder")},window.FolderPanelWdgt.instances=new Set,window.DoubleLinkedList=function(){this.headNode=this.tailNode=nil,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DoubleLinkedList,"name",{value:"DoubleLinkedList"}),window.DoubleLinkedList.__super__=Object.prototype,window.DoubleLinkedList.prototype.remove=function(e){return e.pre?e.pre.next=e.next:this.headNode=e.next,e.next?e.next.pre=e.pre:this.tailNode=e.pre},window.DoubleLinkedList.prototype.insertBeginning=function(e){return this.headNode?(e.next=this.headNode,this.headNode.pre=e,this.headNode=e):this.headNode=this.tailNode=e},window.DoubleLinkedList.prototype.moveToHead=function(e){return this.remove(e),this.insertBeginning(e)},window.DoubleLinkedList.prototype.clear=function(){return this.headNode=this.tailNode=nil},window.DoubleLinkedList.instances=new Set,window.LRUCache=function(e=10,t=6e4){this.capacity=e,this.maxAge=t,this._linkList=new DoubleLinkedList,this.reset(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.LRUCache,"name",{value:"LRUCache"}),window.LRUCache.__super__=Object.prototype,window.LRUCache.prototype.keys=function(){return Object.keys(this._hash)},window.LRUCache.prototype.remove=function(e){var t;if(null!=this._hash[e])return t=this._hash[e],this._linkList.remove(t),delete this._hash[e],t.data.onDispose&&t.data.onDispose.call(this,t.data.key,t.data.value),this.size--},window.LRUCache.prototype.reset=function(){return this._hash={},this.size=0,this._linkList.clear()},window.LRUCache.prototype.set=function(e,t,n){var o;if(o=this._hash[e])return o.data.value=t,o.data.onDispose=n,this._refreshNode(o);this.size===this.capacity&&this.remove(this._linkList.tailNode.data.key),(o=function(e,t,n){return{data:e,pre:t,next:n}}({key:e,value:t,onDispose:n})).data.lastVisitTime=Date.now(),this._linkList.insertBeginning(o),this._hash[e]=o,this.size++},window.LRUCache.prototype.get=function(e){var t;if(t=this._hash[e]){if(!this._isExpiredNode(t))return this._refreshNode(t),t.data.value;this.remove(e)}},window.LRUCache.prototype._refreshNode=function(e){return e.data.lastVisitTime=Date.now(),this._linkList.moveToHead(e)},window.LRUCache.prototype._isExpiredNode=function(e){return Date.now()-e.data.lastVisitTime>this.maxAge},window.LRUCache.prototype.has=function(e){return null!=this._hash[e]},window.LRUCache.instances=new Set,window.PreferencesAndSettings=function(){this.setMouseInputMode(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PreferencesAndSettings,"name",{value:"PreferencesAndSettings"}),window.PreferencesAndSettings.__super__=Object.prototype,window.PreferencesAndSettings.augmentWith(window.DeepCopierMixin,"PreferencesAndSettings"),window.PreferencesAndSettings.prototype.inputMode=nil,window.PreferencesAndSettings.prototype.minimumFontHeight=nil,window.PreferencesAndSettings.prototype.shortcutsFontSize=nil,window.PreferencesAndSettings.prototype.menuFontName=nil,window.PreferencesAndSettings.prototype.menuFontSize=nil,window.PreferencesAndSettings.prototype.menuHeaderFontSize=nil,window.PreferencesAndSettings.prototype.menuHeaderColor=nil,window.PreferencesAndSettings.prototype.menuHeaderBold=nil,window.PreferencesAndSettings.prototype.menuStrokeColor=nil,window.PreferencesAndSettings.prototype.menuBackgroundColor=nil,window.PreferencesAndSettings.prototype.menuButtonsLabelColor=nil,window.PreferencesAndSettings.prototype.normalTextFontSize=nil,window.PreferencesAndSettings.prototype.textInButtonsFontSize=nil,window.PreferencesAndSettings.prototype.titleBarTextFontSize=nil,window.PreferencesAndSettings.prototype.titleBarBoldText=nil,window.PreferencesAndSettings.prototype.titleBarTextHeight=nil,window.PreferencesAndSettings.prototype.bubbleHelpFontSize=nil,window.PreferencesAndSettings.prototype.prompterFontName=nil,window.PreferencesAndSettings.prototype.prompterFontSize=nil,window.PreferencesAndSettings.prototype.prompterSliderSize=nil,window.PreferencesAndSettings.prototype.handleSize=nil,window.PreferencesAndSettings.prototype.scrollBarsThickness=nil,window.PreferencesAndSettings.prototype.outlineColor=nil,window.PreferencesAndSettings.prototype.outlineColorString=nil,window.PreferencesAndSettings.prototype.wheelScaleX=1,window.PreferencesAndSettings.prototype.wheelScaleY=1,window.PreferencesAndSettings.prototype.wheelScaleZ=1,window.PreferencesAndSettings.prototype.invertWheelX=!0,window.PreferencesAndSettings.prototype.invertWheelY=!0,window.PreferencesAndSettings.prototype.invertWheelZ=!0,window.PreferencesAndSettings.prototype.useSliderForInput=nil,window.PreferencesAndSettings.prototype.useVirtualKeyboard=nil,window.PreferencesAndSettings.prototype.isTouchDevice=nil,window.PreferencesAndSettings.prototype.rasterizeSVGs=nil,window.PreferencesAndSettings.prototype.isFlat=nil,window.PreferencesAndSettings.prototype.grabDragThreshold=7,window.PreferencesAndSettings.prototype.toggleInputMode=function(){return this.inputMode===PreferencesAndSettings.INPUT_MODE_MOUSE?this.setTouchInputMode():this.setMouseInputMode()},window.PreferencesAndSettings.prototype.setMouseInputMode=function(){return this.inputMode=PreferencesAndSettings.INPUT_MODE_MOUSE,this.minimumFontHeight=getMinimumFontHeight(),this.menuFontName="sans-serif",this.menuFontSize=12,this.menuHeaderFontSize=12,this.menuHeaderColor=new Color(77,77,77),this.menuHeaderBold=!0,this.menuStrokeColor=new Color(210,210,210),this.menuBackgroundColor=new Color(249,249,249),this.menuButtonsLabelColor=new Color(0,0,0),this.externalWindowBarBackgroundColor=new Color(125,125,125),this.externalWindowBarStrokeColor=new Color(100,100,100),this.internalWindowBarBackgroundColor=new Color(172,172,172),this.internalWindowBarStrokeColor=new Color(150,150,150),this.normalTextFontSize=12,this.textInButtonsFontSize=12,this.titleBarTextFontSize=12,this.titleBarTextHeight=15,this.titleBarBoldText=!0,this.bubbleHelpFontSize=10,this.prompterFontName="sans-serif",this.prompterFontSize=12,this.prompterSliderSize=10,this.defaultPanelsBackgroundColor=new Color(255,250,245),this.defaultPanelsStrokeColor=new Color(100,100,100),this.editableItemBackgroundColor=new Color(240,240,240),this.outlineColor=new Color(244,243,244),this.outlineColorString=this.outlineColor.toString(),this.iconDarkLineColor=new Color(0,0,0),this.shortcutsFontSize=12,this.handleSize=15,this.scrollBarsThickness=10,this.wheelScaleX=1,this.wheelScaleY=1,this.wheelScaleZ=1,this.invertWheelX=!0,this.invertWheelY=!0,this.invertWheelZ=!0,this.useSliderForInput=!1,this.useVirtualKeyboard=!0,this.isTouchDevice=!1,this.rasterizeSVGs=!1,this.isFlat=!1},window.PreferencesAndSettings.prototype.setTouchInputMode=function(){return this.inputMode=PreferencesAndSettings.INPUT_MODE_TOUCH,this.minimumFontHeight=getMinimumFontHeight(),this.menuFontName="sans-serif",this.menuFontSize=24,this.bubbleHelpFontSize=18,this.prompterFontName="sans-serif",this.prompterFontSize=24,this.prompterSliderSize=20,this.handleSize=26,this.scrollBarsThickness=24,this.wheelScaleX=1,this.wheelScaleY=1,this.wheelScaleZ=1,this.invertWheelX=!0,this.invertWheelY=!0,this.invertWheelZ=!0,this.useSliderForInput=!0,this.useVirtualKeyboard=!0,this.isTouchDevice=!1,this.rasterizeSVGs=!1,this.isFlat=!1},window.PreferencesAndSettings.INPUT_MODE_MOUSE=0,window.PreferencesAndSettings.INPUT_MODE_TOUCH=1,window.PreferencesAndSettings.decimalFloatFiguresOfFontSizeGranularity=0,window.PreferencesAndSettings.instances=new Set,window.ProfilingDataCollector=function(){window.ProfilingDataCollector.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ProfilingDataCollector,"name",{value:"ProfilingDataCollector"}),window.ProfilingDataCollector.__super__=Object.prototype,window.ProfilingDataCollector.overallProfilingEnabled=!1,window.ProfilingDataCollector.enableProfiling=function(){return this.overallProfilingEnabled=!0},window.ProfilingDataCollector.disableProfiling=function(){return this.overallProfilingEnabled=!1},window.ProfilingDataCollector.brokenRectsProfilingEnabled=!1,window.ProfilingDataCollector.shortSessionCumulativeNumberOfBrokenRects=0,window.ProfilingDataCollector.overallSessionCumulativeNumberOfBrokenRects=0,window.ProfilingDataCollector.shortSessionMaxNumberOfBrokenRects=0,window.ProfilingDataCollector.overallSessionMaxNumberOfBrokenRects=0,window.ProfilingDataCollector.shortSessionCumulativeTotalAreaOfBrokenRects=0,window.ProfilingDataCollector.overallSessionCumulativeTotalAreaOfBrokenRects=0,window.ProfilingDataCollector.shortSessionMaxTotalAreaOfBrokenRects=0,window.ProfilingDataCollector.overallSessionMaxTotalAreaOfBrokenRects=0,window.ProfilingDataCollector.shortSessionCumulativeDuplicatedBrokenRects=0,window.ProfilingDataCollector.overallSessionCumulativeDuplicatedBrokenRects=0,window.ProfilingDataCollector.shortSessionMaxDuplicatedBrokenRects=0,window.ProfilingDataCollector.overallSessionMaxDuplicatedBrokenRects=0,window.ProfilingDataCollector.shortSessionCumulativeMergedSourceAndDestination=0,window.ProfilingDataCollector.overallSessionCumulativeMergedSourceAndDestination=0,window.ProfilingDataCollector.shortSessionMaxMergedSourceAndDestination=0,window.ProfilingDataCollector.overallSessionMaxMergedSourceAndDestination=0,window.ProfilingDataCollector.shortSessionCumulativeNumberOfAllocatedCanvases=0,window.ProfilingDataCollector.shortSessionMaxNumberOfAllocatedCanvases=0,window.ProfilingDataCollector.shortSessionCumulativeSizeOfAllocatedCanvases=0,window.ProfilingDataCollector.shortSessionCumulativeNumberOfBlitOperations=0,window.ProfilingDataCollector.shortSessionMaxNumberOfBlits=0,window.ProfilingDataCollector.shortSessionCumulativeAreaOfBlits=0,window.ProfilingDataCollector.shortSessionMaxAreaOfBlits=0,window.ProfilingDataCollector.shortSessionBiggestBlitArea=0,window.ProfilingDataCollector.shortSessionCumulativeTimeSpentRedrawing=0,window.ProfilingDataCollector.shortSessionMaxTimeSpentRedrawing=0,window.ProfilingDataCollector.enableBrokenRectsProfiling=function(){return this.overallProfilingEnabled=!0,this.brokenRectsProfilingEnabled=!0},window.ProfilingDataCollector.disableBrokenRectsProfiling=function(){return this.brokenRectsProfilingEnabled=!1},window.ProfilingDataCollector.profileBrokenRects=function(e,t,n){var o,i,r,l,a;if(this.overallProfilingEnabled&&this.brokenRectsProfilingEnabled){for(l=e.length,this.shortSessionCumulativeNumberOfBrokenRects+=l,l>this.shortSessionMaxNumberOfBrokenRects&&(this.shortSessionMaxNumberOfBrokenRects=l),this.overallSessionCumulativeNumberOfBrokenRects+=l,l>this.overallSessionMaxNumberOfBrokenRects&&(this.overallSessionMaxNumberOfBrokenRects=l),a=0,i=0,r=e.length;i<r;i++)null!=(o=e[i])&&(a+=o.area());return this.shortSessionCumulativeTotalAreaOfBrokenRects+=a,this.overallSessionCumulativeTotalAreaOfBrokenRects+=a,a>this.shortSessionMaxTotalAreaOfBrokenRects&&(this.shortSessionMaxTotalAreaOfBrokenRects=a),a>this.overallSessionMaxTotalAreaOfBrokenRects&&(this.overallSessionMaxTotalAreaOfBrokenRects=a),this.shortSessionCumulativeDuplicatedBrokenRects+=t,this.overallSessionCumulativeDuplicatedBrokenRects+=t,t>this.shortSessionMaxDuplicatedBrokenRects&&(this.shortSessionMaxDuplicatedBrokenRects=t),t>this.overallSessionMaxDuplicatedBrokenRects&&(this.overallSessionMaxDuplicatedBrokenRects=t),this.shortSessionCumulativeMergedSourceAndDestination+=n,this.overallSessionCumulativeMergedSourceAndDestination+=n,n>this.shortSessionMaxMergedSourceAndDestination&&(this.shortSessionMaxMergedSourceAndDestination=n),n>this.overallSessionMaxMergedSourceAndDestination?this.overallSessionMaxMergedSourceAndDestination=n:void 0}},window.ProfilingDataCollector.instances=new Set,window.WorldMorph=function(e,t=!0){this.worldCanvas=e,this.automaticallyAdjustToFillEntireBrowserAlsoOnResize=t,window.location.href.includes("worldWithSystemTestHarness")?this.isIndexPage=!1:this.isIndexPage=!0,WorldMorph.preferencesAndSettings=new PreferencesAndSettings,WorldMorph.__super__.constructor.call(this),this.patternName=this.pattern1,this.appearance=new DesktopAppearance(this),this.color=new Color(205,205,205),this.strokeColor=nil,this.alpha=1,this.stamp=Date.now(),this.isDevMode=!1,this.hand=new ActivePointerWdgt(this),this.keyboardEventsReceiver=nil,this.lastEditedText=nil,this.caret=nil,this.temporaryHandlesAndLayoutAdjusters=new Set,this.inputDOMElementForVirtualKeyboard=nil,this.automaticallyAdjustToFillEntireBrowserAlsoOnResize&&this.isIndexPage?this.stretchWorldToFillEntirePage():this.sizeCanvasToTestScreenResolution(),this.setBounds(new Rectangle(0,0,this.worldCanvas.width/ceilPixelRatio,this.worldCanvas.height/ceilPixelRatio)),this.initEventListeners(),"undefined"!=typeof Automator&&null!==Automator&&(this.automator=new Automator),this.worldCanvasContext=this.worldCanvas.getContext("2d"),this.canvasForTextMeasurements=newCanvas(),this.canvasContextForTextMeasurements=this.canvasForTextMeasurements.getContext("2d"),this.canvasContextForTextMeasurements.scale(ceilPixelRatio,ceilPixelRatio),this.canvasContextForTextMeasurements.textAlign="left",this.canvasContextForTextMeasurements.textBaseline="bottom",this.cacheForTextMeasurements=new LRUCache(1e3,864e5),this.cacheForTextParagraphSplits=new LRUCache(300,864e5),this.cacheForParagraphsWordsSplits=new LRUCache(300,864e5),this.cacheForParagraphsWrappingData=new LRUCache(300,864e5),this.cacheForTextWrappingData=new LRUCache(300,864e5),this.cacheForImmutableBackBuffers=new LRUCache(1e3,864e5),this.cacheForTextBreakingIntoLinesTopLevel=new LRUCache(10,864e5),this.changed(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WorldMorph,"name",{value:"WorldMorph"}),window.WorldMorph.__super__=window.PanelWdgt.prototype,window.WorldMorph=extend(window.WorldMorph,window.PanelWdgt),window.WorldMorph.augmentWith(window.GridPositioningOfAddedShortcutsMixin,"WorldMorph"),window.WorldMorph.augmentWith(window.KeepIconicDesktopSystemLinksBackMixin,"WorldMorph"),window.WorldMorph.prototype.mousedownBrowserEventListener=nil,window.WorldMorph.prototype.mouseupBrowserEventListener=nil,window.WorldMorph.prototype.mousemoveBrowserEventListener=nil,window.WorldMorph.prototype.contextmenuEventListener=nil,window.WorldMorph.prototype.keydownBrowserEventListener=nil,window.WorldMorph.prototype.keyupBrowserEventListener=nil,window.WorldMorph.prototype.keypressBrowserEventListener=nil,window.WorldMorph.prototype.wheelBrowserEventListener=nil,window.WorldMorph.prototype.copyBrowserEventListener=nil,window.WorldMorph.prototype.pasteBrowserEventListener=nil,window.WorldMorph.prototype.clipboardTextIfTestRunning=nil,window.WorldMorph.prototype.errorConsole=nil,window.WorldMorph.prototype.lastSerializationString="",window.WorldMorph.prototype.inputDOMElementForVirtualKeyboardKeydownBrowserEventListener=nil,window.WorldMorph.prototype.inputDOMElementForVirtualKeyboardKeyupBrowserEventListener=nil,window.WorldMorph.prototype.inputDOMElementForVirtualKeyboardKeypressBrowserEventListener=nil,window.WorldMorph.prototype.keyComboResetWorldEventListener=nil,window.WorldMorph.prototype.keyComboTurnOnAnimationsPacingControl=nil,window.WorldMorph.prototype.keyComboTurnOffAnimationsPacingControl=nil,window.WorldMorph.prototype.keyComboTakeScreenshotEventListener=nil,window.WorldMorph.prototype.keyComboStopTestRecordingEventListener=nil,window.WorldMorph.prototype.keyComboCheckStringsOfItemsInMenuOrderImportant=nil,window.WorldMorph.prototype.keyComboCheckStringsOfItemsInMenuOrderUnimportant=nil,window.WorldMorph.prototype.keyComboAddTestCommentEventListener=nil,window.WorldMorph.prototype.keyComboCheckNumberOfMenuItemsEventListener=nil,window.WorldMorph.prototype.dragoverEventListener=nil,window.WorldMorph.prototype.dropBrowserEventListener=nil,window.WorldMorph.prototype.resizeBrowserEventListener=nil,window.WorldMorph.prototype.otherTasksToBeRunOnStep=[],window.WorldMorph.prototype.showRedraws=!1,window.WorldMorph.prototype.doubleCheckCachedMethodsResults=!1,window.WorldMorph.prototype.automator=nil,window.WorldMorph.prototype.worldCanvas=nil,window.WorldMorph.prototype.worldCanvasContext=nil,window.WorldMorph.prototype.canvasForTextMeasurements=nil,window.WorldMorph.prototype.canvasContextForTextMeasurements=nil,window.WorldMorph.prototype.cacheForTextMeasurements=nil,window.WorldMorph.prototype.cacheForTextParagraphSplits=nil,window.WorldMorph.prototype.cacheForParagraphsWordsSplits=nil,window.WorldMorph.prototype.cacheForParagraphsWrappingData=nil,window.WorldMorph.prototype.cacheForTextWrappingData=nil,window.WorldMorph.prototype.cacheForTextBreakingIntoLinesTopLevel=nil,window.WorldMorph.prototype.automaticallyAdjustToFillEntireBrowserAlsoOnResize=!0,window.WorldMorph.prototype.wdgtsDetectingClickOutsideMeOrAnyOfMeChildren=new Set,window.WorldMorph.prototype.hierarchyOfClickedWdgts=new Set,window.WorldMorph.prototype.hierarchyOfClickedMenus=new Set,window.WorldMorph.prototype.popUpsMarkedForClosure=new Set,window.WorldMorph.prototype.freshlyCreatedPopUps=new Set,window.WorldMorph.prototype.openPopUps=new Set,window.WorldMorph.prototype.toolTipsList=new Set,window.WorldMorph.prototype.broken=nil,window.WorldMorph.prototype.duplicatedBrokenRectsTracker=nil,window.WorldMorph.prototype.numberOfDuplicatedBrokenRects=0,window.WorldMorph.prototype.numberOfMergedSourceAndDestination=0,window.WorldMorph.prototype.morphsToBeHighlighted=new Set,window.WorldMorph.prototype.currentHighlightingMorphs=new Set,window.WorldMorph.prototype.morphsBeingHighlighted=new Set,window.WorldMorph.prototype.morphsToBePinouted=new Set,window.WorldMorph.prototype.currentPinoutingMorphs=new Set,window.WorldMorph.prototype.morphsBeingPinouted=new Set,window.WorldMorph.prototype.steppingWdgts=new Set,window.WorldMorph.prototype.basementWdgt=nil,window.WorldMorph.prototype.maxShadowSize=6,window.WorldMorph.prototype.events=[],window.WorldMorph.prototype.outstandingTimerTriggeredOperationsCounter=[],window.WorldMorph.prototype.widgetsReferencingOtherWidgets=new Set,window.WorldMorph.prototype.incrementalGcSessionId=0,window.WorldMorph.prototype.desktopSidesPadding=10,window.WorldMorph.prototype.laysIconsHorizontallyInGrid=!1,window.WorldMorph.prototype.iconsLayingInGridWrapCount=5,window.WorldMorph.prototype.errorsWhileRepainting=[],window.WorldMorph.prototype.paintingWidget=nil,window.WorldMorph.prototype.widgetsGivingErrorWhileRepainting=[],window.WorldMorph.prototype.lastNonTextPropertyChangerButtonClickedOrDropped=nil,window.WorldMorph.prototype.patternName=nil,window.WorldMorph.prototype.pattern1="plain",window.WorldMorph.prototype.pattern2="circles",window.WorldMorph.prototype.pattern3="vert. stripes",window.WorldMorph.prototype.pattern4="oblique stripes",window.WorldMorph.prototype.pattern5="dots",window.WorldMorph.prototype.pattern6="zigzag",window.WorldMorph.prototype.pattern7="bricks",window.WorldMorph.prototype.howManyUntitledShortcuts=0,window.WorldMorph.prototype.howManyUntitledFoldersShortcuts=0,window.WorldMorph.prototype.isIndexPage=nil,window.WorldMorph.prototype.doublePressOfZeroKeypadKey=nil,window.WorldMorph.prototype.colloquialName=function(){return"Desktop"},window.WorldMorph.prototype.makePrettier=function(){return WorldMorph.preferencesAndSettings.menuFontSize=14,WorldMorph.preferencesAndSettings.menuHeaderFontSize=13,WorldMorph.preferencesAndSettings.menuHeaderColor=new Color(125,125,125),WorldMorph.preferencesAndSettings.menuHeaderBold=!1,WorldMorph.preferencesAndSettings.menuStrokeColor=new Color(186,186,186),WorldMorph.preferencesAndSettings.menuBackgroundColor=new Color(250,250,250),WorldMorph.preferencesAndSettings.menuButtonsLabelColor=new Color(50,50,50),WorldMorph.preferencesAndSettings.normalTextFontSize=13,WorldMorph.preferencesAndSettings.titleBarTextFontSize=13,WorldMorph.preferencesAndSettings.titleBarTextHeight=16,WorldMorph.preferencesAndSettings.titleBarBoldText=!1,WorldMorph.preferencesAndSettings.bubbleHelpFontSize=12,WorldMorph.preferencesAndSettings.iconDarkLineColor=new Color(37,37,37),WorldMorph.preferencesAndSettings.defaultPanelsBackgroundColor=new Color(249,249,249),WorldMorph.preferencesAndSettings.defaultPanelsStrokeColor=new Color(198,198,198),this.setPattern(nil,nil,"dots"),this.changed()},window.WorldMorph.prototype.getNextUntitledShortcutName=function(){var e;return e="Untitled",this.howManyUntitledShortcuts>0&&(e+=" "+(this.howManyUntitledShortcuts+1)),this.howManyUntitledShortcuts++,e},window.WorldMorph.prototype.getNextUntitledFolderShortcutName=function(){var e;return e="new folder",this.howManyUntitledFoldersShortcuts>0&&(e+=" "+(this.howManyUntitledFoldersShortcuts+1)),this.howManyUntitledFoldersShortcuts++,e},window.WorldMorph.prototype.wantsDropOf=function(e){return this._acceptsDrops},window.WorldMorph.prototype.createErrorConsole=function(){var e,t;return e=new ErrorsLogViewerMorph("Errors",this,"modifyCodeToBeInjected",""),(t=new WindowWdgt(nil,nil,e)).setExtent(new Point(460,400)),world.add(t),t.changed(),this.errorConsole=t,this.errorConsole.fullMoveTo(new Point(190,10)),this.errorConsole.setExtent(new Point(550,415)),this.errorConsole.hide()},window.WorldMorph.prototype.removeSpinnerAndFakeDesktop=function(){var e,t;return(e=document.getElementById("spinner")).parentNode.removeChild(e),(t=document.getElementById("splashScreenFakeDesktop")).parentNode.removeChild(t)},window.WorldMorph.prototype.createDesktop=function(){var e,t;if(this.isIndexPage&&(this.setColor(new Color(244,243,244)),this.makePrettier()),this.isIndexPage||console.log("booting"),this.basementWdgt=new BasementWdgt,ProfilingDataCollector.enableProfiling(),ProfilingDataCollector.enableBrokenRectsProfiling(),this.isIndexPage)return(e=new AnalogClockWdgt).rawSetExtent(new Point(80,80)),e.fullRawMoveTo(new Point(this.right()-80-this.desktopSidesPadding,this.top()+this.desktopSidesPadding)),this.add(e),menusHelper.createWelcomeMessageWindowAndShortcut(),menusHelper.createHowToSaveMessageOpener(),menusHelper.basementIconAndText(),menusHelper.createSimpleDocumentLauncher(),menusHelper.createFizzyPaintLauncher(),menusHelper.createSimpleSlideLauncher(),menusHelper.createDashboardsLauncher(),menusHelper.createPatchProgrammingLauncher(),menusHelper.createGenericPanelLauncher(),menusHelper.createToolbarsOpener(),t=this.makeFolder(nil,nil,"examples"),menusHelper.createDegreesConverterOpener(t),menusHelper.createSampleSlideOpener(t),menusHelper.createSampleDashboardOpener(t),menusHelper.createSampleDocOpener(t)},window.WorldMorph.prototype.mostRecentlyCreatedPopUp=function(){var e;return e=nil,-1,this.openPopUps.forEach(t=>t.isOrphan()?this.openPopUps.delete(t):t.instanceNumericID>=-1?e=t:void 0),e},window.WorldMorph.prototype.closePopUpsMarkedForClosure=function(){return this.popUpsMarkedForClosure.forEach(e=>e.close()),this.popUpsMarkedForClosure.clear()},window.WorldMorph.prototype.fullPaintIntoAreaOrBlitFromBackBuffer=function(e,t){return WorldMorph.__super__.fullPaintIntoAreaOrBlitFromBackBuffer.call(this,e,t),this.hand.fullPaintIntoAreaOrBlitFromBackBuffer(e,t)},window.WorldMorph.prototype.clippedThroughBounds=function(){return this.checkClippedThroughBoundsCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes,this.clippedThroughBoundsCache=this.boundingBox(),this.clippedThroughBoundsCache},window.WorldMorph.prototype.clipThrough=function(){return this.checkClipThroughCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes,this.clipThroughCache=this.boundingBox(),this.clipThroughCache},window.WorldMorph.prototype.pushBrokenRect=function(e,t,n){return null!=this.duplicatedBrokenRectsTracker[t.toString()]?this.numberOfDuplicatedBrokenRects++:(n?e.srcBrokenRect=this.broken.length:e.dstBrokenRect=this.broken.length,this.broken.push(t)),this.duplicatedBrokenRectsTracker[t.toString()]=!0},window.WorldMorph.prototype.mergeBrokenRectsIfCloseOrPushBoth=function(e,t,n){var o,i;return(o=t.merge(n)).area()<(i=t.area()+n.area())+i/10?(this.pushBrokenRect(e,o,!0),this.numberOfMergedSourceAndDestination++):(this.pushBrokenRect(e,t,!0),this.pushBrokenRect(e,n,!1))},window.WorldMorph.prototype.checkARectWithHierarchy=function(e,t,n){var o,i;for(o=t,i=[];null!=o.parent;)null!=(o=o.parent).srcBrokenRect&&(this.broken[o.srcBrokenRect],this.broken[o.srcBrokenRect].containsRectangle(e)?n?(this.broken[t.srcBrokenRect]=nil,t.srcBrokenRect=nil):(this.broken[t.dstBrokenRect]=nil,t.dstBrokenRect=nil):e.containsRectangle(this.broken[o.srcBrokenRect])&&(this.broken[o.srcBrokenRect]=nil,o.srcBrokenRect=nil)),null!=o.dstBrokenRect?(this.broken[o.dstBrokenRect],this.broken[o.dstBrokenRect].containsRectangle(e)?n?(this.broken[t.srcBrokenRect]=nil,i.push(t.srcBrokenRect=nil)):(this.broken[t.dstBrokenRect]=nil,i.push(t.dstBrokenRect=nil)):e.containsRectangle(this.broken[o.dstBrokenRect])?(this.broken[o.dstBrokenRect]=nil,i.push(o.dstBrokenRect=nil)):i.push(void 0)):i.push(void 0);return i},window.WorldMorph.prototype.rectAlreadyIncludedInParentBrokenMorph=function(){var e,t,n,o,i,r,l,a,s;for(n=0,i=(l=window.morphsThatMaybeChangedGeometryOrPosition).length;n<i;n++)null!=(t=l[n]).srcBrokenRect&&(e=this.broken[t.srcBrokenRect],this.checkARectWithHierarchy(e,t,!0)),null!=t.dstBrokenRect&&(e=this.broken[t.dstBrokenRect],this.checkARectWithHierarchy(e,t,!1));for(s=[],o=0,r=(a=window.morphsThatMaybeChangedFullGeometryOrPosition).length;o<r;o++)null!=(t=a[o]).srcBrokenRect&&(e=this.broken[t.srcBrokenRect],this.checkARectWithHierarchy(e,t)),null!=t.dstBrokenRect?(e=this.broken[t.dstBrokenRect],s.push(this.checkARectWithHierarchy(e,t))):s.push(void 0);return s},window.WorldMorph.prototype.cleanupSrcAndDestRectsOfMorphs=function(){var e,t,n,o,i,r,l,a;for(t=0,o=(r=window.morphsThatMaybeChangedGeometryOrPosition).length;t<o;t++)(e=r[t]).srcBrokenRect=nil,e.dstBrokenRect=nil;for(a=[],n=0,i=(l=window.morphsThatMaybeChangedFullGeometryOrPosition).length;n<i;n++)(e=l[n]).srcBrokenRect=nil,a.push(e.dstBrokenRect=nil);return a},window.WorldMorph.prototype.fleshOutBroken=function(){var e,t,n,o,i,r,l,a;for(a=nil,n=nil,l=[],o=0,i=(r=window.morphsThatMaybeChangedGeometryOrPosition).length;o<i;o++)null!=(t=r[o]).clippedBoundsWhenLastPainted&&t.clippedBoundsWhenLastPainted.isNotEmpty()&&(a=t.clippedBoundsWhenLastPainted.expandBy(1).growBy(this.maxShadowSize)),t.surelyNotShowingUpOnScreenBasedOnVisibilityCollapseAndOrphanage()||(e=t.clippedThroughBounds()).isNotEmpty()&&(n=e.spread().expandBy(1).growBy(this.maxShadowSize)),null!=a&&null!=n?this.mergeBrokenRectsIfCloseOrPushBoth(t,a,n):null==a&&null==n||(null!=a?this.pushBrokenRect(t,a,!0):this.pushBrokenRect(t,n,!0)),t.geometryOrPositionPossiblyChanged=!1,l.push(t.clippedBoundsWhenLastPainted=nil);return l},window.WorldMorph.prototype.fleshOutFullBroken=function(){var e,t,n,o,i,r,l,a;for(a=nil,n=nil,l=[],o=0,i=(r=window.morphsThatMaybeChangedFullGeometryOrPosition).length;o<i;o++)null!=(t=r[o]).fullClippedBoundsWhenLastPainted&&t.fullClippedBoundsWhenLastPainted.isNotEmpty()&&(a=t.fullClippedBoundsWhenLastPainted.expandBy(1).growBy(this.maxShadowSize)),t.surelyNotShowingUpOnScreenBasedOnVisibilityCollapseAndOrphanage()||(e=t.fullClippedBounds()).isNotEmpty()&&(n=e.spread().expandBy(1).growBy(this.maxShadowSize)),null!=a&&null!=n?this.mergeBrokenRectsIfCloseOrPushBoth(t,a,n):null==a&&null==n||(null!=a?this.pushBrokenRect(t,a,!0):this.pushBrokenRect(t,n,!0)),t.fullGeometryOrPositionPossiblyChanged=!1,l.push(t.fullClippedBoundsWhenLastPainted=nil);return l},window.WorldMorph.prototype.showBrokenRects=function(e){var t,n,o,i,r,l,a;for(e.save(),e.globalAlpha=.5,e.scale(ceilPixelRatio,ceilPixelRatio),n=0,o=(a=this.broken).length;n<o;n++)null!=(t=a[n])&&(l=Math.round(255*Math.random()),r=Math.round(255*Math.random()),i=Math.round(255*Math.random()),e.fillStyle="rgb("+l+","+r+","+i+")",e.fillRect(Math.round(t.origin.x),Math.round(t.origin.y),Math.round(t.width()),Math.round(t.height())));return e.restore()},window.WorldMorph.prototype.recalculateLayouts=function(){for(var e,t;0!==morphsThatMaybeChangedLayout.length;){for(;(t=morphsThatMaybeChangedLayout[morphsThatMaybeChangedLayout.length-1]).layoutIsValid;)if(morphsThatMaybeChangedLayout.pop(),0===morphsThatMaybeChangedLayout.length)return;for(;null!=t.parent&&t.layoutSpec!==LayoutSpec.ATTACHEDAS_FREEFLOATING&&!t.parent.layoutIsValid;)t=t.parent;try{t.doLayout()}catch(t){e=t,this.softResetWorld(),null==world.errorConsole&&world.createErrorConsole(),this.errorConsole.contents.showUpWithError(e)}}},window.WorldMorph.prototype.clearGeometryOrPositionPossiblyChangedFlags=function(){var e,t,n,o,i;for(i=[],e=0,t=(o=window.morphsThatMaybeChangedGeometryOrPosition).length;e<t;e++)n=o[e],i.push(n.geometryOrPositionPossiblyChanged=!1);return i},window.WorldMorph.prototype.clearFullGeometryOrPositionPossiblyChangedFlags=function(){var e,t,n,o,i;for(i=[],e=0,t=(o=window.morphsThatMaybeChangedFullGeometryOrPosition).length;e<t;e++)n=o[e],i.push(n.fullGeometryOrPositionPossiblyChanged=!1);return i},window.WorldMorph.prototype.updateBroken=function(){if(this.broken=[],this.duplicatedBrokenRectsTracker={},this.numberOfDuplicatedBrokenRects=0,this.numberOfMergedSourceAndDestination=0,this.fleshOutFullBroken(),this.fleshOutBroken(),this.rectAlreadyIncludedInParentBrokenMorph(),this.cleanupSrcAndDestRectsOfMorphs(),this.clearGeometryOrPositionPossiblyChangedFlags(),this.clearFullGeometryOrPositionPossiblyChangedFlags(),window.morphsThatMaybeChangedGeometryOrPosition=[],window.morphsThatMaybeChangedFullGeometryOrPosition=[],window.healingRectanglesPhase=!0,this.errorsWhileRepainting=[],this.broken.forEach(e=>{var t;if(null!=e&&e.isNotEmpty())try{return this.fullPaintIntoAreaOrBlitFromBackBuffer(this.worldCanvasContext,e)}catch(e){return t=e,this.resetWorldCanvasContext(),this.queueErrorForLaterReporting(t),this.hideOffendingWidget(),this.softResetWorld()}}),0!==this.errorsWhileRepainting.length&&this.findOutAllOtherOffendingWidgetsAndPaintWholeScreen(),world.showRedraws&&this.showBrokenRects(this.worldCanvasContext),this.resetDataStructuresForBrokenRects(),window.healingRectanglesPhase=!1,1!==trackChanges.length&&!0!==trackChanges[0])return alert("trackChanges array should have only one element (true)")},window.WorldMorph.prototype.findOutAllOtherOffendingWidgetsAndPaintWholeScreen=function(){var e,t,n,o;for(e=this.errorsWhileRepainting.length,n=nil,0,o=[];n!==e;){0;try{this.fullPaintIntoAreaOrBlitFromBackBuffer(this.worldCanvasContext,this.bounds)}catch(e){t=e,this.resetWorldCanvasContext(),this.queueErrorForLaterReporting(t),this.hideOffendingWidget(),this.softResetWorld()}n=e,o.push(e=this.errorsWhileRepainting.length)}return o},window.WorldMorph.prototype.resetWorldCanvasContext=function(){var e,t,n,o;for(this.worldCanvasContext.closePath(),"function"==typeof(e=this.worldCanvasContext).resetClip&&e.resetClip(),"function"==typeof(t=this.worldCanvasContext).resetTransform&&t.resetTransform(),o=[],n=1;n<2e3;++n)o.push(this.worldCanvasContext.restore());return o},window.WorldMorph.prototype.queueErrorForLaterReporting=function(e){if(this.errorsWhileRepainting.push(e),!this.widgetsGivingErrorWhileRepainting.includes(this.paintingWidget))return this.widgetsGivingErrorWhileRepainting.push(this.paintingWidget),this.paintingWidget.silentHide()},window.WorldMorph.prototype.hideOffendingWidget=function(){if(!this.widgetsGivingErrorWhileRepainting.includes(this.paintingWidget))return this.widgetsGivingErrorWhileRepainting.push(this.paintingWidget),this.paintingWidget.silentHide()},window.WorldMorph.prototype.resetDataStructuresForBrokenRects=function(){return this.broken=[],this.duplicatedBrokenRectsTracker={},this.numberOfDuplicatedBrokenRects=0,this.numberOfMergedSourceAndDestination=0},window.WorldMorph.prototype.addPinoutingMorphs=function(){return this.currentPinoutingMorphs.forEach(e=>{var t;return this.morphsToBePinouted.has(e.wdgtThisWdgtIsPinouting)?e.wdgtThisWdgtIsPinouting.hasMaybeChangedGeometryOrPosition()?(t=e.wdgtThisWdgtIsPinouting.clippedThroughBounds(),e.fullRawMoveTo(new Point(t.right()+10,t.top()))):void 0:(this.currentPinoutingMorphs.delete(e),this.morphsBeingPinouted.delete(e.wdgtThisWdgtIsPinouting),e.wdgtThisWdgtIsPinouting=nil,e.fullDestroy())}),this.morphsToBePinouted.forEach(e=>{var t,n;if(!this.morphsBeingPinouted.has(e))return t=new StringMorph2(e.toString()),world.add(t),t.wdgtThisWdgtIsPinouting=e,n=e.clippedThroughBounds(),t.fullRawMoveTo(new Point(n.right()+10,n.top())),t.setColor(new Color(0,0,255)),t.setWidth(400),this.currentPinoutingMorphs.add(t),this.morphsBeingPinouted.add(e)})},window.WorldMorph.prototype.addHighlightingMorphs=function(){return this.currentHighlightingMorphs.forEach(e=>this.morphsToBeHighlighted.has(e.wdgtThisWdgtIsHighlighting)?e.wdgtThisWdgtIsHighlighting.hasMaybeChangedGeometryOrPosition()?e.rawSetBounds(e.wdgtThisWdgtIsHighlighting.clippedThroughBounds()):void 0:(this.currentHighlightingMorphs.delete(e),this.morphsBeingHighlighted.delete(e.wdgtThisWdgtIsHighlighting),e.wdgtThisWdgtIsHighlighting=nil,e.fullDestroy())),this.morphsToBeHighlighted.forEach(e=>{var t;if(!this.morphsBeingHighlighted.has(e))return t=new HighlighterMorph,world.add(t),t.wdgtThisWdgtIsHighlighting=e,t.rawSetBounds(e.clippedThroughBounds()),t.setColor(new Color(0,0,255)),t.setAlphaScaled(50),this.currentHighlightingMorphs.add(t),this.morphsBeingHighlighted.add(e)})},window.WorldMorph.prototype.playQueuedEvents=function(){var e,t,n,o,i,r,l,a,s,d;try{for(o=i=0,r=this.events.length;i<r;o=i+=2)switch(n=this.events[o],t=this.events[o+1],n){case"inputDOMElementForVirtualKeyboardKeydownBrowserEvent":null!=(l=this.keyboardEventsReceiver)&&l.processKeyDown(t),"U+0009"!==t.keyIdentifier&&"Tab"!==t.keyIdentifier||null!=(a=this.keyboardEventsReceiver)&&a.processKeyPress(t);break;case"inputDOMElementForVirtualKeyboardKeyupBrowserEvent":null!=(s=this.keyboardEventsReceiver)&&"function"==typeof s.processKeyUp&&s.processKeyUp(t);break;case"inputDOMElementForVirtualKeyboardKeypressBrowserEvent":null!=(d=this.keyboardEventsReceiver)&&d.processKeyPress(t);break;case"mousedownBrowserEvent":this.mousedownBrowserEventHandler(t.button,t.buttons,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey);break;case"mouseupBrowserEvent":this.mouseupBrowserEventHandler(t.button,t.ctrlKey,t.buttons,t.shiftKey,t.altKey,t.metaKey);break;case"mousemoveBrowserEvent":this.mousemoveBrowserEventHandler(t.pageX,t.pageY,t.button,t.buttons,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey);break;case"wheelBrowserEvent":this.wheelBrowserEventHandler(t.deltaX,t.deltaY,t.deltaZ,t.altKey,t.button,t.buttons);break;case"keydownBrowserEvent":this.keydownBrowserEventHandler(t.keyCode,t.shiftKey,t.ctrlKey,t.altKey,t.metaKey);break;case"keyupBrowserEvent":this.keyupBrowserEventHandler(t.keyCode,t.shiftKey,t.ctrlKey,t.altKey,t.metaKey);break;case"keypressBrowserEvent":this.keypressBrowserEventHandler(t.keyCode,this.getChar(t),t.shiftKey,t.ctrlKey,t.altKey,t.metaKey);break;case"cutBrowserEvent":this.cutBrowserEventHandler(t);break;case"copyBrowserEvent":this.copyBrowserEventHandler(t);break;case"pasteBrowserEvent":this.pasteBrowserEventHandler(t);break;case"dropBrowserEvent":this.dropBrowserEventHandler(t);break;case"resizeBrowserEvent":this.resizeBrowserEventHandler()}}catch(t){e=t,this.softResetWorld(),null==world.errorConsole&&world.createErrorConsole(),this.errorConsole.contents.showUpWithError(e)}return this.events=[]},window.WorldMorph.prototype.loadAPartOfFizzyGumSourceIfNeeded=function(){if(window.srcLoadsSteps.length>0)return window.srcLoadsSteps.shift().call()},window.WorldMorph.prototype.showErrorsHappenedInRepaintingStepInPreviousCycle=function(){var e,t,n,o,i;for(i=[],t=0,n=(o=this.errorsWhileRepainting).length;t<n;t++)e=o[t],null==world.errorConsole&&world.createErrorConsole(),i.push(this.errorConsole.contents.showUpWithError(e));return i},window.WorldMorph.prototype.doOneCycle=function(){return WorldMorph.currentTime=Date.now(),WorldMorph.currentDate=new Date,this.showErrorsHappenedInRepaintingStepInPreviousCycle(),this.playQueuedEvents(),"undefined"!=typeof AutomatorPlayer&&null!==AutomatorPlayer&&Automator.state===Automator.PLAYING&&this.automator.player.replayTestCommands(),this.runOtherTasksStepFunction(),this.loadAPartOfFizzyGumSourceIfNeeded(),this.runChildrensStepFunction(),this.hand.reCheckMouseEntersAndMouseLeavesAfterPotentialGeometryChanges(),window.recalculatingLayouts=!0,this.recalculateLayouts(),window.recalculatingLayouts=!1,this.addPinoutingMorphs(),this.addHighlightingMorphs(),this.updateBroken(),WorldMorph.frameCount++},window.WorldMorph.prototype.runChildrensStepFunction=function(){return this.steppingWdgts.forEach(e=>{var t,n;if(t=Math.round(1e3/e.fps),e.fps<=0?n=0:e.synchronisedStepping?(n=t-WorldMorph.currentTime%t,0!==e.previousMillisecondsRemainingToWaitedFrame&&n>e.previousMillisecondsRemainingToWaitedFrame&&(n=0),e.previousMillisecondsRemainingToWaitedFrame=n):n=t-(WorldMorph.currentTime-e.lastTime),n<=0)return this.stepWidget(e),e.lastTime=WorldMorph.currentTime-(WorldMorph.currentTime-e.lastTime)%t})},window.WorldMorph.prototype.stepWidget=function(e){var t,n;e.onNextStep&&(n=e.onNextStep,e.onNextStep=nil,n.call(e)),e.step;try{return e.step()}catch(e){return t=e,this.softResetWorld(),null==world.errorConsole&&world.createErrorConsole(),this.errorConsole.contents.showUpWithError(t)}},window.WorldMorph.prototype.runOtherTasksStepFunction=function(){var e,t,n,o,i;for(o=[],e=0,t=(n=this.otherTasksToBeRunOnStep).length;e<t;e++)i=n[e],o.push(i());return o},window.WorldMorph.prototype.stretchWorldToFillEntirePage=function(){var e,t,n;if(this.automaticallyAdjustToFillEntireBrowserAlsoOnResize=!0,n=getDocumentPositionOf(this.worldCanvas),e=window.innerHeight,t=window.innerWidth,n.x>0&&(this.worldCanvas.style.position="absolute",this.worldCanvas.style.left="0px",n.x=0),n.y>0&&(this.worldCanvas.style.position="absolute",this.worldCanvas.style.top="0px",n.y=0),document.body.scrollTop&&(e=document.documentElement.clientHeight),document.body.scrollLeft&&(t=document.documentElement.clientWidth),this.worldCanvas.width!==t||this.worldCanvas.height!==e)return this.fullChanged(),this.worldCanvas.width=t*ceilPixelRatio,this.worldCanvas.style.width=t+"px",this.worldCanvas.height=e*ceilPixelRatio,this.worldCanvas.style.height=e+"px",this.rawSetExtent(new Point(t,e)),this.desktopReLayout()},window.WorldMorph.prototype.desktopReLayout=function(){var e,t;return null!=(t=this.firstChildSuchThat((function(e){return e instanceof BasementOpenerWdgt})))&&(t.userMovedThisFromComputedPosition?(t.fullRawMoveInDesktopToFractionalPosition(),t.wasPositionedSlightlyOutsidePanel||t.fullRawMoveWithin(this)):t.fullMoveTo(this.bottomRight().subtract(new Point(75,75).add(this.desktopSidesPadding)))),null!=(e=this.firstChildSuchThat((function(e){return e instanceof AnalogClockWdgt})))&&(e.userMovedThisFromComputedPosition?(e.fullRawMoveInDesktopToFractionalPosition(),e.wasPositionedSlightlyOutsidePanel||e.fullRawMoveWithin(this)):e.fullMoveTo(new Point(this.right()-80-this.desktopSidesPadding,this.top()+this.desktopSidesPadding))),this.children.forEach(n=>{if(!(n===t||n===e||n instanceof WidgetHolderWithCaptionWdgt||(null!=n.positionFractionalInHoldingPanel&&n.fullRawMoveInDesktopToFractionalPosition(),n.wasPositionedSlightlyOutsidePanel)))return n.fullRawMoveWithin(this)})},window.WorldMorph.prototype.getPointerAndWdgtInfo=function(e=this.hand.topWdgtUnderPointer()){var t,n,o,i,r,l,a;return t=e.boundingBox().asArray_xywh(),o=e.identifyViaTextLabel(),i=e.pathOfChildrenPositionsRelativeToWorld(),r=this.hand.positionFractionalInMorph(e),l=this.hand.positionPixelsInMorph(e),a=this.hand.position(),n=null!=e.parentThatIsA(ListMorph),[e.uniqueIDString(),i,o,t,r,l,a,n]},window.WorldMorph.prototype.addMouseChangeCommand=function(e,t,n,o,i,r,l){var a;if("undefined"!=typeof Automator&&null!==Automator&&Automator.state===Automator.RECORDING)return a=this.getPointerAndWdgtInfo(),this.automator.recorder.addMouseChangeCommand(e,t,n,o,i,r,l,...a)},window.WorldMorph.prototype.mousedownBrowserEventHandler=function(e,t,n,o,i,r){return this.addMouseChangeCommand("down",e,t,n,o,i,r),this.hand.processMouseDown(e,t,n,o,i,r)},window.WorldMorph.prototype.mouseupBrowserEventHandler=function(e,t,n,o,i,r){return this.addMouseChangeCommand("up",e,t,n,o,i,r),this.hand.processMouseUp(e,t,n,o,i,r)},window.WorldMorph.prototype.mousemoveBrowserEventHandler=function(e,t,n,o,i,r,l,a){var s,d,h,p;if(h=e-(d=getDocumentPositionOf(this.worldCanvas)).x,p=t-d.y,this.hand.processMouseMove(h,p,n,o,i,r,l,a),this.hand.isThisPointerFloatDraggingSomething()&&"undefined"!=typeof Automator&&null!==Automator&&Automator.state===Automator.RECORDING&&("floatDrag",s=world.automator.tagsCollectedWhileRecordingTest,indexOf.call(s,"floatDrag")<0&&s.push("floatDrag")),"undefined"!=typeof Automator&&null!==Automator&&Automator.state===Automator.RECORDING)return this.automator.recorder.addMouseMoveCommand(h,p,this.hand.isThisPointerFloatDraggingSomething(),n,o,i,r,l,a)},window.WorldMorph.prototype.wheelBrowserEventHandler=function(e,t,n,o,i,r){var l;return"undefined"!=typeof Automator&&null!==Automator&&Automator.state===Automator.RECORDING&&(l=this.getPointerAndWdgtInfo(),this.automator.recorder.addWheelCommand(e,t,n,o,i,r,...l)),this.hand.processWheel(e,t,n,o,i,r)},window.WorldMorph.prototype.getChar=function(e){return null==e.which?String.fromCharCode(e.keyCode):0!==e.which&&0!==e.charCode?String.fromCharCode(e.which):nil},window.WorldMorph.prototype.keydownBrowserEventHandler=function(e,t,n,o,i){var r;return"undefined"!=typeof Automator&&null!==Automator&&Automator.state===Automator.RECORDING&&this.automator.recorder.addKeyDownCommand(e,t,n,o,i),null!=(r=this.keyboardEventsReceiver)?r.processKeyDown(e,t,n,o,i):void 0},window.WorldMorph.prototype.keyupBrowserEventHandler=function(e,t,n,o,i){var r;return"undefined"!=typeof Automator&&null!==Automator&&Automator.state===Automator.RECORDING&&this.automator.recorder.addKeyUpCommand(e,t,n,o,i),null!=(r=this.keyboardEventsReceiver)&&"function"==typeof r.processKeyUp?r.processKeyUp(e,t,n,o,i):void 0},window.WorldMorph.prototype.keypressBrowserEventHandler=function(e,t,n,o,i,r){var l;return"undefined"!=typeof Automator&&null!==Automator&&Automator.state===Automator.RECORDING&&this.automator.recorder.addKeyPressCommand(e,t,n,o,i,r),t===this.constructor.KEYPAD_0_mappedToThaiKeyboard_Q?(null==this.doublePressOfZeroKeypadKey?(this.doublePressOfZeroKeypadKey=1,setTimeout(()=>(this.doublePressOfZeroKeypadKey=nil,!1),300)):this.doublePressOfZeroKeypadKey=nil,!1):null!=(l=this.keyboardEventsReceiver)?l.processKeyPress(e,t,n,o,i,r):void 0},window.WorldMorph.prototype.cutBrowserEventHandler=function(e){var t;if(null!=(t=this.caret)&&t.processCut(e),"undefined"!=typeof Automator&&null!==Automator&&Automator.state===Automator.RECORDING)return this.automator.recorder.addCutCommand(e)},window.WorldMorph.prototype.copyBrowserEventHandler=function(e){if("undefined"!=typeof Automator&&null!==Automator&&Automator.state===Automator.RECORDING)return this.automator.recorder.addCopyCommand(e)},window.WorldMorph.prototype.pasteBrowserEventHandler=function(e){if(this.caret&&(this.caret.processPaste(e),"undefined"!=typeof Automator&&null!==Automator&&Automator.state===Automator.RECORDING))return this.automator.recorder.addPasteCommand(selectedText)},window.WorldMorph.prototype.dropBrowserEventHandler=function(e){return this.hand.processDrop(e)},window.WorldMorph.prototype.resizeBrowserEventHandler=function(){if(this.automaticallyAdjustToFillEntireBrowserAlsoOnResize)return this.stretchWorldToFillEntirePage()},window.WorldMorph.prototype.initMouseEventListeners=function(){var e;return e=this.worldCanvas,this.mousedownBrowserEventListener=e=>(this.events.push("mousedownBrowserEvent"),this.events.push(e)),e.addEventListener("mousedown",this.mousedownBrowserEventListener,!1),this.mouseupBrowserEventListener=e=>(this.events.push("mouseupBrowserEvent"),this.events.push(e)),e.addEventListener("mouseup",this.mouseupBrowserEventListener,!1),this.mousemoveBrowserEventListener=e=>(this.events.push("mousemoveBrowserEvent"),this.events.push(e)),e.addEventListener("mousemove",this.mousemoveBrowserEventListener,!1)},window.WorldMorph.prototype.initKeyboardEventListeners=function(){var e;return e=this.worldCanvas,this.keydownBrowserEventListener=e=>{var t,n;if(this.events.push("keydownBrowserEvent"),this.events.push(e),n=!1,8===e.keyCode&&(n=("INPUT"!==(t=e.srcElement||e.target).tagName.toUpperCase()||"TEXT"!==t.type.toUpperCase()&&"PASSWORD"!==t.type.toUpperCase()&&"FILE"!==t.type.toUpperCase()&&"SEARCH"!==t.type.toUpperCase()&&"EMAIL"!==t.type.toUpperCase()&&"NUMBER"!==t.type.toUpperCase()&&"DATE"!==t.type.toUpperCase())&&"TEXTAREA"!==t.tagName.toUpperCase()||(t.readOnly||t.disabled)),32===e.keyCode&&e.target===this.worldCanvas&&(n=!0),9===e.keyCode&&e.target===this.worldCanvas&&(n=!0),n)return e.preventDefault()},e.addEventListener("keydown",this.keydownBrowserEventListener,!1),this.keyupBrowserEventListener=e=>(this.events.push("keyupBrowserEvent"),this.events.push(e)),e.addEventListener("keyup",this.keyupBrowserEventListener,!1),this.keypressBrowserEventListener=e=>(this.events.push("keypressBrowserEvent"),this.events.push(e)),e.addEventListener("keypress",this.keypressBrowserEventListener,!1)},window.WorldMorph.prototype.initClipboardEventListeners=function(){return this.cutBrowserEventListener=e=>{var t;return t="",this.caret&&(t=this.caret.target.selection(),(null!=e?e.clipboardData:void 0)&&(e.preventDefault(),e.clipboardData.setData("text/plain",t)),window.clipboardData&&(e.returnValue=!1,window.clipboardData.setData("Text",t))),this.events.push("cutBrowserEvent"),this.events.push(t)},document.body.addEventListener("cut",this.cutBrowserEventListener,!1),this.copyBrowserEventListener=e=>{var t;return t="",this.caret&&(t="undefined"!=typeof clipboardTextIfTestRunning&&null!==clipboardTextIfTestRunning?clipboardTextIfTestRunning:this.caret.target.selection(),(null!=e?e.clipboardData:void 0)&&(e.preventDefault(),e.clipboardData.setData("text/plain",t)),window.clipboardData&&(e.returnValue=!1,window.clipboardData.setData("Text",t))),this.events.push("copyBrowserEvent"),this.events.push(t)},document.body.addEventListener("copy",this.copyBrowserEventListener,!1),this.pasteBrowserEventListener=e=>{var t;return this.caret&&null!=e&&(e.clipboardData&&(t=e.clipboardData.getData("text/plain")),window.clipboardData&&(t=window.clipboardData.getData("Text"))),this.events.push("pasteBrowserEvent"),this.events.push(t)},document.body.addEventListener("paste",this.pasteBrowserEventListener,!1)},window.WorldMorph.prototype.initKeyCombosEventListeners=function(){return this.keyComboResetWorldEventListener=e=>("undefined"!=typeof AutomatorRecorder&&null!==AutomatorRecorder&&this.automator.recorder.resetWorld(),!1),Mousetrap.bind(["alt+d"],this.keyComboResetWorldEventListener),this.keyComboTurnOnAnimationsPacingControl=e=>("undefined"!=typeof Automator&&null!==Automator&&this.automator.recorder.turnOnAnimationsPacingControl(),!1),Mousetrap.bind(["alt+e"],this.keyComboTurnOnAnimationsPacingControl),this.keyComboTurnOffAnimationsPacingControl=e=>("undefined"!=typeof Automator&&null!==Automator&&this.automator.recorder.turnOffAnimationsPacingControl(),!1),Mousetrap.bind(["alt+u"],this.keyComboTurnOffAnimationsPacingControl),this.keyComboTakeScreenshotEventListener=e=>("undefined"!=typeof AutomatorRecorder&&null!==AutomatorRecorder&&this.automator.recorder.addTakeScreenshotCommand(),!1),Mousetrap.bind(["alt+c"],this.keyComboTakeScreenshotEventListener),this.keyComboStopTestRecordingEventListener=e=>("undefined"!=typeof Automator&&null!==Automator&&this.automator.recorder.stopTestRecording(),!1),Mousetrap.bind(["alt+t"],this.keyComboStopTestRecordingEventListener),this.keyComboAddTestCommentEventListener=e=>("undefined"!=typeof Automator&&null!==Automator&&this.automator.recorder.addTestComment(),!1),Mousetrap.bind(["alt+m"],this.keyComboAddTestCommentEventListener),this.keyComboCheckNumberOfMenuItemsEventListener=e=>("undefined"!=typeof AutomatorRecorder&&null!==AutomatorRecorder&&this.automator.recorder.addCheckNumberOfItemsInMenuCommand(),!1),Mousetrap.bind(["alt+k"],this.keyComboCheckNumberOfMenuItemsEventListener),this.keyComboCheckStringsOfItemsInMenuOrderImportant=e=>("undefined"!=typeof AutomatorRecorder&&null!==AutomatorRecorder&&this.automator.recorder.addCheckStringsOfItemsInMenuOrderImportantCommand(),!1),Mousetrap.bind(["alt+a"],this.keyComboCheckStringsOfItemsInMenuOrderImportant),this.keyComboCheckStringsOfItemsInMenuOrderUnimportant=e=>("undefined"!=typeof AutomatorRecorder&&null!==AutomatorRecorder&&this.automator.recorder.addCheckStringsOfItemsInMenuOrderUnimportantCommand(),!1),Mousetrap.bind(["alt+z"],this.keyComboCheckStringsOfItemsInMenuOrderUnimportant)},window.WorldMorph.prototype.initOtherMiscEventListeners=function(){var e;return e=this.worldCanvas,this.contextmenuEventListener=function(e){return e.preventDefault()},e.addEventListener("contextmenu",this.contextmenuEventListener,!1),this.wheelBrowserEventListener=e=>(this.events.push("wheelBrowserEvent"),this.events.push(e),e.preventDefault()),e.addEventListener("wheel",this.wheelBrowserEventListener,!1),this.dragoverEventListener=function(e){return e.preventDefault()},window.addEventListener("dragover",this.dragoverEventListener,!1),this.dropBrowserEventListener=e=>(this.events.push("dropBrowserEvent"),this.events.push(e),e.preventDefault()),window.addEventListener("drop",this.dropBrowserEventListener,!1),this.resizeBrowserEventListener=()=>(this.events.push("resizeBrowserEvent"),this.events.push(nil)),window.addEventListener("resize",this.resizeBrowserEventListener,!1)},window.WorldMorph.prototype.initEventListeners=function(){return this.initMouseEventListeners(),this.initKeyboardEventListeners(),this.initClipboardEventListeners(),this.initKeyCombosEventListeners(),this.initOtherMiscEventListeners()},window.WorldMorph.prototype.removeEventListeners=function(){var e;return(e=this.worldCanvas).removeEventListener("mousedown",this.mousedownBrowserEventListener),e.removeEventListener("mouseup",this.mouseupBrowserEventListener),e.removeEventListener("mousemove",this.mousemoveBrowserEventListener),e.removeEventListener("contextmenu",this.contextmenuEventListener),e.removeEventListener("keydown",this.keydownBrowserEventListener),e.removeEventListener("keyup",this.keyupBrowserEventListener),e.removeEventListener("keypress",this.keypressBrowserEventListener),e.removeEventListener("wheel",this.wheelBrowserEventListener),e.removeEventListener("cut",this.cutBrowserEventListener),e.removeEventListener("copy",this.copyBrowserEventListener),e.removeEventListener("paste",this.pasteBrowserEventListener),Mousetrap.reset(),e.removeEventListener("dragover",this.dragoverEventListener),e.removeEventListener("drop",this.dropBrowserEventListener),e.removeEventListener("resize",this.resizeBrowserEventListener)},window.WorldMorph.prototype.mouseDownLeft=function(){return noOperation},window.WorldMorph.prototype.mouseClickLeft=function(){return noOperation},window.WorldMorph.prototype.mouseDownRight=function(){return noOperation},window.WorldMorph.prototype.droppedImage=function(){return nil},window.WorldMorph.prototype.droppedSVG=function(){return nil},window.WorldMorph.prototype.nextTab=function(e){var t;if(t=this.nextEntryField(e))return this.switchTextFieldFocus(e,t)},window.WorldMorph.prototype.previousTab=function(e){var t;if(t=this.previousEntryField(e))return this.switchTextFieldFocus(e,t)},window.WorldMorph.prototype.switchTextFieldFocus=function(e,t){return e.clearSelection(),t.bringToForeground(),t.selectAll(),t.edit()},window.WorldMorph.prototype.softResetWorld=function(){return this.hand.drop(),this.hand.mouseOverList.clear(),this.hand.nonFloatDraggedWdgt=nil,this.wdgtsDetectingClickOutsideMeOrAnyOfMeChildren.clear(),this.lastNonTextPropertyChangerButtonClickedOrDropped=nil},window.WorldMorph.prototype.fullDestroyChildren=function(){var e,t,n,o;for("Morph","Wdgt","Widget",n=0,o=(e=Object.keys(window).filter((function(e){return e.includes("Morph",e.length-"Morph".length)||e.includes("Wdgt",e.length-"Wdgt".length)||e.includes("Widget",e.length-"Widget".length)}))).length;n<o;n++)"WorldMorph"!==(t=e[n])&&(window[t].lastBuiltInstanceNumericID=0);return"undefined"!=typeof Automator&&null!==Automator&&(world.automator.recorder.turnOffAnimationsPacingControl(),world.automator.recorder.turnOffAlignmentOfMorphIDsMechanism(),world.automator.recorder.turnOffHidingOfMorphsContentExtractInLabels(),world.automator.recorder.turnOffHidingOfMorphsNumberIDInLabels()),WorldMorph.__super__.fullDestroyChildren.call(this)},window.WorldMorph.prototype.destroyToolTips=function(){return this.toolTipsList.forEach(e=>{if(!e.boundsContainPoint(this.position()))return e.fullDestroy(),this.toolTipsList.delete(e)})},window.WorldMorph.prototype.buildContextMenu=function(){var e;return this.isIndexPage?((e=new MenuMorph(this,!1,this,!0,!0,"Desktop")).addMenuItem("wallpapers ➜",!1,this,"wallpapersMenu","choose a wallpaper for the Desktop"),e.addMenuItem("new folder",!0,this,"makeFolder"),e):(e=this.isDevMode?new MenuMorph(this,!1,this,!0,!0,this.constructor.name||this.constructor.toString().split(" ")[1].split("(")[0]):new MenuMorph(this,!1,this,!0,!0,"Widgetic"),this.isDevMode&&(e.addMenuItem("demo ➜",!1,this,"popUpDemoMenu","sample morphs"),e.addLine(),e.addMenuItem("show all",!0,this,"showAllMinimised"),e.addMenuItem("hide all",!0,this,"minimiseAll"),e.addMenuItem("delete all",!0,this,"closeChildren"),e.addMenuItem("move all inside",!0,this,"keepAllSubmorphsWithin","keep all submorphs\nwithin and visible"),e.addMenuItem("inspect",!0,this,"inspect","open a window on\nall properties"),e.addMenuItem("test menu ➜",!1,this,"testMenu","debugging and testing operations"),e.addLine(),e.addMenuItem("restore display",!0,this,"changed","redraw the\nscreen once"),e.addMenuItem("fit whole page",!0,this,"stretchWorldToFillEntirePage","let the World automatically\nadjust to browser resizings"),e.addMenuItem("color...",!0,this,"popUpColorSetter","choose the World's\nbackground color"),e.addMenuItem("wallpapers ➜",!1,this,"wallpapersMenu","choose a wallpaper for the Desktop"),WorldMorph.preferencesAndSettings.inputMode===PreferencesAndSettings.INPUT_MODE_MOUSE?e.addMenuItem("touch screen settings",!0,WorldMorph.preferencesAndSettings,"toggleInputMode","bigger menu fonts\nand sliders"):e.addMenuItem("standard settings",!0,WorldMorph.preferencesAndSettings,"toggleInputMode","smaller menu fonts\nand sliders"),e.addLine()),"undefined"!=typeof Automator&&null!==Automator&&e.addMenuItem("system tests ➜",!1,this,"popUpSystemTestsMenu",""),this.isDevMode?e.addMenuItem("switch to user mode",!0,this,"toggleDevMode","disable developers'\ncontext menus"):e.addMenuItem("switch to dev mode",!0,this,"toggleDevMode"),e.addMenuItem("new folder",!0,this,"makeFolder"),e.addMenuItem("about Fizzygum...",!0,this,"about"),e)},window.WorldMorph.prototype.wallpapersMenu=function(e,t){var n;return(n=new MenuMorph(this,!1,t,!0,!0,"Wallpapers")).addMenuItem(untick+this.pattern1,!0,this,"setPattern",nil,nil,nil,nil,nil,this.pattern1),n.addMenuItem(untick+this.pattern2,!0,this,"setPattern",nil,nil,nil,nil,nil,this.pattern2),n.addMenuItem(untick+this.pattern3,!0,this,"setPattern",nil,nil,nil,nil,nil,this.pattern3),n.addMenuItem(untick+this.pattern4,!0,this,"setPattern",nil,nil,nil,nil,nil,this.pattern4),n.addMenuItem(untick+this.pattern5,!0,this,"setPattern",nil,nil,nil,nil,nil,this.pattern5),n.addMenuItem(untick+this.pattern6,!0,this,"setPattern",nil,nil,nil,nil,nil,this.pattern6),n.addMenuItem(untick+this.pattern7,!0,this,"setPattern",nil,nil,nil,nil,nil,this.pattern7),this.updatePatternsMenuEntriesTicks(n),n.popUpAtHand()},window.WorldMorph.prototype.setPattern=function(e,t,n){if(this.patternName!==n)return this.patternName=n,this.changed(),null!=(null!=e?e.parent:void 0)&&e.parent instanceof MenuMorph?this.updatePatternsMenuEntriesTicks(e.parent):void 0},window.WorldMorph.prototype.updatePatternsMenuEntriesTicks=function(e){var t,n,o,i,r,l,a;switch(t=n=o=i=r=l=a=untick,this.patternName){case this.pattern1:t=tick;break;case this.pattern2:n=tick;break;case this.pattern3:o=tick;break;case this.pattern4:i=tick;break;case this.pattern5:r=tick;break;case this.pattern6:l=tick;break;case this.pattern7:a=tick}return e.children[1].label.setText(t+this.pattern1),e.children[2].label.setText(n+this.pattern2),e.children[3].label.setText(o+this.pattern3),e.children[4].label.setText(i+this.pattern4),e.children[5].label.setText(r+this.pattern5),e.children[6].label.setText(l+this.pattern6),e.children[7].label.setText(a+this.pattern7)},window.WorldMorph.prototype.create=function(e){return e.pickUp()},window.WorldMorph.prototype.edit=function(e){var t,n;if(this.caret&&(n=this.lastEditedText,this.lastEditedText=this.caret.target,this.lastEditedText!==n&&this.lastEditedText.clearSelection(),this.caret=this.caret.fullDestroy()),this.caret=new CaretMorph(e),e.parent.add(this.caret),this.keyboardEventsReceiver=this.caret,WorldMorph.preferencesAndSettings.isTouchDevice&&WorldMorph.preferencesAndSettings.useVirtualKeyboard)return this.initVirtualKeyboard(),t=getDocumentPositionOf(this.worldCanvas),this.inputDOMElementForVirtualKeyboard.style.top=this.caret.top()+t.y+"px",this.inputDOMElementForVirtualKeyboard.style.left=this.caret.left()+t.x+"px",this.inputDOMElementForVirtualKeyboard.focus()},window.WorldMorph.prototype.stopEditing=function(){return this.caret&&(this.lastEditedText=this.caret.target,this.lastEditedText.clearSelection(),this.caret=this.caret.fullDestroy()),this.keyboardEventsReceiver=nil,this.inputDOMElementForVirtualKeyboard&&(this.inputDOMElementForVirtualKeyboard.blur(),document.body.removeChild(this.inputDOMElementForVirtualKeyboard),this.inputDOMElementForVirtualKeyboard=nil),this.worldCanvas.focus()},window.WorldMorph.prototype.anyReferenceToWdgt=function(e){var t;for(t of this.widgetsReferencingOtherWidgets)if(t.target===e)return!0;return!1},window.WorldMorph.preferencesAndSettings=nil,window.WorldMorph.currentTime=nil,window.WorldMorph.currentDate=nil,window.WorldMorph.KEYPAD_TAB_mappedToThaiKeyboard_A="ฟ",window.WorldMorph.KEYPAD_SLASH_mappedToThaiKeyboard_B="ิ",window.WorldMorph.KEYPAD_MULTIPLY_mappedToThaiKeyboard_C="แ",window.WorldMorph.KEYPAD_DELETE_mappedToThaiKeyboard_D="ก",window.WorldMorph.KEYPAD_7_mappedToThaiKeyboard_E="ำ",window.WorldMorph.KEYPAD_8_mappedToThaiKeyboard_F="ด",window.WorldMorph.KEYPAD_9_mappedToThaiKeyboard_G="เ",window.WorldMorph.KEYPAD_MINUS_mappedToThaiKeyboard_H="้",window.WorldMorph.KEYPAD_4_mappedToThaiKeyboard_I="ร",window.WorldMorph.KEYPAD_5_mappedToThaiKeyboard_J="่",window.WorldMorph.KEYPAD_6_mappedToThaiKeyboard_K="า",window.WorldMorph.KEYPAD_PLUS_mappedToThaiKeyboard_L="ส",window.WorldMorph.KEYPAD_1_mappedToThaiKeyboard_M="ท",window.WorldMorph.KEYPAD_2_mappedToThaiKeyboard_N="ท",window.WorldMorph.KEYPAD_3_mappedToThaiKeyboard_O="ื",window.WorldMorph.KEYPAD_ENTER_mappedToThaiKeyboard_P="น",window.WorldMorph.KEYPAD_0_mappedToThaiKeyboard_Q="ย",window.WorldMorph.KEYPAD_DOT_mappedToThaiKeyboard_R="พ",window.WorldMorph.ongoingUrlActionNumber=0,window.WorldMorph.frameCount=0,window.WorldMorph.numberOfAddsAndRemoves=0,window.WorldMorph.numberOfVisibilityFlagsChanges=0,window.WorldMorph.numberOfCollapseFlagsChanges=0,window.WorldMorph.numberOfRawMovesAndResizes=0,window.WorldMorph.instances=new Set,window.TextEditingState=function(e,t,n,o,i){this.selectionStart=e,this.selectionEnd=t,this.cursorPos=n,this.textContent=o,this.isJustFirstClickToPositionCursor=i,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TextEditingState,"name",{value:"TextEditingState"}),window.TextEditingState.__super__=Object.prototype,window.TextEditingState.augmentWith(window.DeepCopierMixin,"TextEditingState"),window.TextEditingState.prototype.selectionStart=nil,window.TextEditingState.prototype.selectionEnd=nil,window.TextEditingState.prototype.cursorPos=nil,window.TextEditingState.prototype.textContent=nil,window.TextEditingState.prototype.isJustFirstClickToPositionCursor=nil,window.TextEditingState.instances=new Set,window.StringMorph2=function(e=(""===text?"":"StringMorph2"),t=WorldMorph.preferencesAndSettings.normalTextFontSize,n=this.justArialFontStack,o=!1,i=!1,r=!1,l=!1,a=new Color(37,37,37),s,d){this.text=e,this.originallySetFontSize=t,this.fontName=n,this.isBold=o,this.isItalic=i,this.isHeaderLine=r,this.isNumeric=l,this.color=a,this.textPossiblyCroppedToFit=this.transformTextOneToOne(this.text),null!=s&&(this.backgroundColor=s),null!=d&&(this.backgroundTransparency=d),this.undoHistory=[],this.redoHistory=[],StringMorph2.__super__.constructor.call(this),this.noticesTransparentClick=!0,this.changed(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.StringMorph2,"name",{value:"StringMorph2"}),window.StringMorph2.__super__=window.Widget.prototype,window.StringMorph2=extend(window.StringMorph2,window.Widget),window.StringMorph2.augmentWith(window.BackBufferMixin,"StringMorph2"),window.StringMorph2.augmentWith(window.ControllerMixin,"StringMorph2"),window.StringMorph2.prototype.text="",window.StringMorph2.prototype.textPossiblyCroppedToFit="",window.StringMorph2.prototype.fittingFontSize=nil,window.StringMorph2.prototype.originallySetFontSize=nil,window.StringMorph2.prototype.fontName=nil,window.StringMorph2.prototype.isBold=nil,window.StringMorph2.prototype.isItalic=nil,window.StringMorph2.prototype.hasDarkOutline=!1,window.StringMorph2.prototype.isHeaderLine=nil,window.StringMorph2.prototype.isEditable=!1,window.StringMorph2.prototype.isNumeric=nil,window.StringMorph2.prototype.isPassword=!1,window.StringMorph2.prototype.isShowingBlanks=!1,window.StringMorph2.prototype.blanksColor=new Color(180,140,140),window.StringMorph2.prototype.isScrollable=!0,window.StringMorph2.prototype.startMark=nil,window.StringMorph2.prototype.endMark=nil,window.StringMorph2.prototype.markedTextColor=new Color(255,255,255),window.StringMorph2.prototype.markedBackgoundColor=new Color(60,60,120),window.StringMorph2.prototype.horizontalAlignment=AlignmentSpecHorizontal.LEFT,window.StringMorph2.prototype.verticalAlignment=AlignmentSpecVertical.TOP,window.StringMorph2.prototype.fittingSpecWhenBoundsTooLarge=FittingSpecTextInLargerBounds.FLOAT,window.StringMorph2.prototype.fittingSpecWhenBoundsTooSmall=FittingSpecTextInSmallerBounds.CROP,window.StringMorph2.prototype.caretHorizPositionForVertMovement=nil,window.StringMorph2.prototype.emptyCharacter="⁣",window.StringMorph2.prototype.justArialFontStack="Arial, sans-serif",window.StringMorph2.prototype.timesFontStack='Cambria, "Hoefler Text", Utopia, "Liberation Serif", "Nimbus Roman No9 L Regular", Times, "Times New Roman", serif',window.StringMorph2.prototype.georgiaFontStack='Constantia, "Lucida Bright", Lucidabright, "Lucida Serif", Lucida, "DejaVu Serif", "Bitstream Vera Serif", "Liberation Serif", Georgia, serif',window.StringMorph2.prototype.garamoFontStack='"Palatino Linotype", Palatino, Palladio, "URW Palladio L", "Book Antiqua", Baskerville, "Bookman Old Style", "Bitstream Charter", "Nimbus Roman No9 L", Garamond, "Apple Garamond", "ITC Garamond Narrow", "New Century Schoolbook", "Century Schoolbook", "Century Schoolbook L", Georgia, serif',window.StringMorph2.prototype.helveFontStack='Frutiger, "Frutiger Linotype", Univers, Calibri, "Gill Sans", "Gill Sans MT", "Myriad Pro", Myriad, "DejaVu Sans Condensed", "Liberation Sans", "Nimbus Sans L", Tahoma, Geneva, "Helvetica Neue", Helvetica, Arial, sans-serif',window.StringMorph2.prototype.verdaFontStack='Corbel, "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", "DejaVu Sans", "Bitstream Vera Sans", "Liberation Sans", Verdana, "Verdana Ref", sans-serif',window.StringMorph2.prototype.trebuFontStack='"Segoe UI", Candara, "Bitstream Vera Sans", "DejaVu Sans", "Bitstream Vera Sans", "Trebuchet MS", Verdana, "Verdana Ref", sans-serif',window.StringMorph2.prototype.heavyFontStack='Impact, Haettenschweiler, "Franklin Gothic Bold", Charcoal, "Helvetica Inserat", "Bitstream Vera Sans Bold", "Arial Black", sans-serif',window.StringMorph2.prototype.monoFontStack='Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace',window.StringMorph2.prototype.hashOfTextConsideredAsReference=nil,window.StringMorph2.prototype.widgetToBeNotifiedOfTextModificationChange=nil,window.StringMorph2.prototype.undoHistory=nil,window.StringMorph2.prototype.redoHistory=nil,window.StringMorph2.prototype.actualFontSizeUsedInRendering=function(){return this.reflowText(),this.fittingFontSize},window.StringMorph2.prototype.pushUndoState=function(e,t){var n,o,i,r,l;if(!(this.undoHistory.length>0&&(o=this.undoHistory[this.undoHistory.length-1]).selectionStart===this.startMark&&o.selectionEnd===this.endMark&&o.textContent===this.text&&Math.abs(e-o.cursorPos)<=1))return this.undoHistory.length>1&&(o=this.undoHistory[this.undoHistory.length-1],(n=this.undoHistory[this.undoHistory.length-2]).selectionStart===(i=o.selectionStart)&&i===this.startMark&&n.selectionEnd===(r=o.selectionEnd)&&r===this.endMark&&n.textContent===(l=o.textContent)&&l===this.text&&this.undoHistory.pop()),this.redoHistory=[],this.undoHistory.push(new TextEditingState(this.startMark,this.endMark,e,this.text,t))},window.StringMorph2.prototype.popRedoState=function(e){var t;return null!=(t=this.redoHistory.pop())&&this.undoHistory.push(t),t},window.StringMorph2.prototype.popUndoState=function(){var e;return null!=(e=this.undoHistory.pop())&&this.redoHistory.push(e),e},window.StringMorph2.prototype.setHorizontalAlignment=function(e){if(this.horizontalAlignment!==e)return this.horizontalAlignment=e,this.changed()},window.StringMorph2.prototype.setVerticalAlignment=function(e){if(this.verticalAlignment!==e)return this.verticalAlignment=e,this.changed()},window.StringMorph2.prototype.alignLeft=function(){return this.setHorizontalAlignment(AlignmentSpecHorizontal.LEFT),this},window.StringMorph2.prototype.alignCenter=function(){return this.setHorizontalAlignment(AlignmentSpecHorizontal.CENTER),this},window.StringMorph2.prototype.alignRight=function(){return this.setHorizontalAlignment(AlignmentSpecHorizontal.RIGHT),this},window.StringMorph2.prototype.alignTop=function(){return this.setVerticalAlignment(AlignmentSpecVertical.TOP),this},window.StringMorph2.prototype.alignMiddle=function(){return this.setVerticalAlignment(AlignmentSpecVertical.MIDDLE),this},window.StringMorph2.prototype.alignBottom=function(){return this.setVerticalAlignment(AlignmentSpecVertical.BOTTOM),this},window.StringMorph2.prototype.toString=function(){var e;return e=StringMorph2.__super__.toString.call(this),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.hidingOfMorphsContentExtractInLabels?e:e+' ("'+this.text.slice(0,30).replace(/(?:\r\n|\r|\n)/g,"↵")+'...")'},window.StringMorph2.prototype.getTextDescription=function(){return null!=this.textDescription?this.textDescription+" (adhoc description of string)":this.text.replace(/#\d*/,"").slice(0,30)+" (content of string)"},window.StringMorph2.prototype.buildCanvasFontProperty=function(e=this.fittingFontSize){var t;return t="",this.isBold&&(t+="bold "),this.isItalic&&(t+="italic "),t+e+"px "+this.fontName},window.StringMorph2.prototype.searchLargestFittingFont=function(e){var t,n,o;if(PreferencesAndSettings.decimalFloatFiguresOfFontSizeGranularity=0,n=0,o=Math.round(200*Math.pow(10,PreferencesAndSettings.decimalFloatFiguresOfFontSizeGranularity)),!this.doesTextFitInExtent(e,n))return-1;if(this.doesTextFitInExtent(e,o))return o/Math.pow(10,PreferencesAndSettings.decimalFloatFiguresOfFontSizeGranularity);for(;n!==(t=Math.floor((n+o)/2));)this.doesTextFitInExtent(e,t/Math.pow(10,PreferencesAndSettings.decimalFloatFiguresOfFontSizeGranularity))?n=t:o=t;return n/Math.pow(10,PreferencesAndSettings.decimalFloatFiguresOfFontSizeGranularity)},window.StringMorph2.prototype.generateTextWithEllipsis=function(e){return""!==e?e+"…":""},window.StringMorph2.prototype.searchLongestFittingTextByMultiCroppingIt=function(e){var t,n,o,i,r,l,a,s,d,h,p;if(e=this.transformTextOneToOne(this.text),this.doesTextFitInExtent(e,this.originallySetFontSize))return e;for(t="",n=o=0,a=(s=e.split(/\n/)).length;0<=a?o<a:o>a;n=0<=a?++o:--o)if(t+=s[n],n!==s.length-1&&(t+="\n"),!this.doesTextFitInExtent(t,this.originallySetFontSize)){for(d=0,h=t.length;d!==(r=Math.floor((d+h)/2));)p=t.substring(0,r),this.doesTextFitInExtent(p,this.originallySetFontSize)?d=r:h=r;if(d!==t.length){for(i=!1,"\n"===t.substr(t.length-1)&&(i=!0),l=0;d-l>0&&!this.doesTextFitInExtent(this.generateTextWithEllipsis(t.substring(0,d-l)),this.originallySetFontSize);)l++;if(t=d-l==0?this.doesTextFitInExtent("…",this.originallySetFontSize)?"…":"":this.generateTextWithEllipsis(t.substring(0,d-l)),i){if(!this.doesTextFitInExtent(t+"\n",this.originallySetFontSize))break;t+="\n"}this.doesTextFitInExtent(t,this.originallySetFontSize)||(alert("something wrong, this really should have fit: >"+t+"<"),this.doesTextFitInExtent(t,this.originallySetFontSize))}}return 0===t.length&&(t=this.doesTextFitInExtent("…",this.originallySetFontSize)?"…":""),t},window.StringMorph2.prototype.synchroniseTextAndActualText=function(){var e;return e=this.transformTextOneToOne(this.text),this.doesTextFitInExtent(e,this.originallySetFontSize)||this.fittingSpecWhenBoundsTooSmall===FittingSpecTextInSmallerBounds.SCALEDOWN?this.textPossiblyCroppedToFit=e:void 0},window.StringMorph2.prototype.eliminateInvisibleCharacter=function(e){return e.replace(this.emptyCharacter,"")},window.StringMorph2.prototype.measureText=function(e=this.fittingFontSize,t){var n,o,i;return i=this.buildCanvasFontProperty(e)+"-"+hashCode(t),null!=(o=world.cacheForTextMeasurements.get(i))?o:(world.canvasContextForTextMeasurements.font=this.buildCanvasFontProperty(e),n=world.canvasContextForTextMeasurements.measureText(this.eliminateInvisibleCharacter(t)).width,world.cacheForTextMeasurements.set(i,n),n)},window.StringMorph2.prototype.transformTextOneToOne=function(e){return this.isPassword?this.obfuscateAsPassword("*",e.length):e},window.StringMorph2.prototype.doesTextFitInExtent=function(e=this.transformTextOneToOne(this.text),t){return this.measureText,""===e||new Point(Math.ceil(this.measureText(t,e)),fontHeight(t)).le(this.extent())},window.StringMorph2.prototype.fitToExtent=function(){var e;return e=this.transformTextOneToOne(this.text),this.doesTextFitInExtent(e,this.originallySetFontSize)?(this.textPossiblyCroppedToFit=e,this.fittingSpecWhenBoundsTooLarge===FittingSpecTextInLargerBounds.SCALEUP?this.searchLargestFittingFont(e):this.originallySetFontSize):this.fittingSpecWhenBoundsTooSmall===FittingSpecTextInSmallerBounds.CROP?(this.textPossiblyCroppedToFit=this.searchLongestFittingTextByMultiCroppingIt(e),this.originallySetFontSize):(this.textPossiblyCroppedToFit=e,this.searchLargestFittingFont(e))},window.StringMorph2.prototype.calculateTextWidth=function(e,t){return this.measureText(t,e)},window.StringMorph2.prototype.setFittingFontSize=function(e){if(this.fittingFontSize!==e)return this.fittingFontSize=e,this.changed()},window.StringMorph2.prototype.createBufferCacheKey=function(){return this.extent().toString()+"-"+this.isPassword+"-"+this.isShowingBlanks+"-"+this.originallySetFontSize+"-"+this.buildCanvasFontProperty()+"-"+this.hasDarkOutline+"-"+this.isHeaderLine+"-"+this.color.toString()+"-"+(null!=this.backgroundColor?this.backgroundColor.toString():"transp")+"-"+(null!=this.backgroundTransparency?this.backgroundTransparency.toString():"transp")+"-"+hashCode(this.text)+"-"+hashCode(this.textPossiblyCroppedToFit)+"-"+this.startMark+"-"+this.endMark+"-"+this.markedBackgoundColor.toString()+"-"+this.horizontalAlignment+"-"+this.verticalAlignment+"-"+this.fittingSpecWhenBoundsTooLarge+"-"+this.fittingSpecWhenBoundsTooSmall},window.StringMorph2.prototype.textVerticalPosition=function(e){switch(this.verticalAlignment){case AlignmentSpecVertical.TOP:return 0;case AlignmentSpecVertical.MIDDLE:return(this.height()-e)/2;case AlignmentSpecVertical.BOTTOM:return this.height()-e}},window.StringMorph2.prototype.textHorizontalPosition=function(e){switch(this.horizontalAlignment){case AlignmentSpecHorizontal.LEFT:return 0;case AlignmentSpecHorizontal.CENTER:return this.width()/2-e/2;case AlignmentSpecHorizontal.RIGHT:return this.width()-e}},window.StringMorph2.prototype.createRefreshOrGetBackBuffer=function(){var e,t,n,o,i,r,l,a,s,d,h,p;return i=this.createBufferCacheKey(this.horizontalAlignment,this.verticalAlignment),null!=(o=world.cacheForImmutableBackBuffers.get(i))?(this.backBuffer!==o[0]&&null!=world.caret&&world.caret.changed(),o):(this.reflowText(),null!=world.caret&&world.caret.changed(),a=this.textPossiblyCroppedToFit,p=this.calculateTextWidth(a),l=fontHeight(this.fittingFontSize),null!=this.backgroundColor||this.verticalAlignment!==AlignmentSpecVertical.TOP||this.horizontalAlignment!==AlignmentSpecHorizontal.LEFT||this.fittingSpecWhenBoundsTooLarge===FittingSpecTextInLargerBounds.FLOAT?(h=this.width(),r=this.height()):(h=p,r=l),(t=(e=newCanvas(new Point(h,r).scaleBy(ceilPixelRatio))).getContext("2d")).scale(ceilPixelRatio,ceilPixelRatio),t.font=this.buildCanvasFontProperty(),t.textAlign="left",t.textBaseline="bottom",this.backgroundColor&&(t.save(),t.fillStyle=this.backgroundColor.toString(),t.globalAlpha=this.backgroundTransparency,t.fillRect(0,0,Math.round(this.width()),Math.round(this.height())),t.restore()),d=this.textVerticalPosition(fontHeight(this.fittingFontSize))+fontHeight(this.fittingFontSize),s=this.textHorizontalPosition(p),this.hasDarkOutline&&(t.fillStyle="black",t.fillText(a,s+0,d+0),t.fillText(a,s+1.5,d+0),t.fillText(a,s-1.5,d+0),t.fillText(a,s+0,d+1.5),t.fillText(a,s+1.5,d+1.5),t.fillText(a,s-1.5,d+1.5),t.fillText(a,s+0,d-1.5),t.fillText(a,s+1.5,d-1.5),t.fillText(a,s-1.5,d-1.5)),t.fillStyle=this.color.toString(),t.fillText(a,s,d),this.isHeaderLine&&(t.strokeStyle=new Color(198,198,198),t.beginPath(),t.moveTo(0,d-l/2),t.lineTo(s-5,d-l/2),t.moveTo(s+p+5,d-l/2),t.lineTo(this.width(),d-l/2),t.stroke()),this.drawSelection(t),n=[e,t],world.cacheForImmutableBackBuffers.set(i,n),n)},window.StringMorph2.prototype.drawSelection=function(e){var t,n,o,i,r,l,a;for(a=[],n=o=r=this.firstSelectedSlot(),l=this.lastSelectedSlot();r<=l?o<l:o>l;n=r<=l?++o:--o)i=this.slotCoordinates(n).subtract(this.position()),t=this.textPossiblyCroppedToFit.charAt(n),e.fillStyle=this.markedBackgoundColor.toString(),e.fillRect(i.x,i.y,Math.ceil(this.measureText(nil,t))+1,Math.ceil(fontHeight(this.fittingFontSize))),e.fillStyle=this.markedTextColor.toString(),a.push(e.fillText(t,i.x,i.y+Math.ceil(fontHeight(this.fittingFontSize))));return a},window.StringMorph2.prototype.slotCoordinates=function(e){var t,n,o,i,r,l,a;return this.transformTextOneToOne(this.text)!==this.textPossiblyCroppedToFit&&this.fittingSpecWhenBoundsTooSmall===FittingSpecTextInSmallerBounds.CROP?(world.stopEditing(),this.edit(),nil):(n=this.text,e!==(t=Math.min(Math.max(e,0),n.length))&&alert("something wrong - slot is out of range"),e=t,l=Math.ceil(this.calculateTextWidth(n.substring(0,e))),r=this.left()+l,a=this.top(),i=this.calculateTextWidth(n),o=this.textVerticalPosition(fontHeight(this.fittingFontSize)),r+=this.textHorizontalPosition(i),a+=o,new Point(r,a))},window.StringMorph2.prototype.slotAtSingleLineString=function(e,t){var n,o,i,r;if(r=this.calculateTextWidth(t),(e-=this.textHorizontalPosition(r))-this.left()>=r)return"⁣"===t[t.length-1]?t.length-1:t.length;for(i=0,n=0;;){if(n>e-this.left()){if(Math.abs(e-this.left()-o)<Math.abs(e-this.left()-n))return i-1;break}if(o=n,n+=this.calculateTextWidth(t[i]),(i+=1)===t.length&&this.calculateTextWidth(t)-this.calculateTextWidth(t[i-1])/2<e-this.left())return i}return i},window.StringMorph2.prototype.pointIsAboveFirstLine=function(e){var t;return t=this.textVerticalPosition(fontHeight(this.fittingFontSize)),e.y-this.top()<t&&0},window.StringMorph2.prototype.pointIsUnderLastLine=function(e){var t;return t=this.textVerticalPosition(fontHeight(this.fittingFontSize))+fontHeight(this.fittingFontSize),e.y-t-this.top()>Math.ceil(fontHeight(this.fittingFontSize))&&this.textPossiblyCroppedToFit.length},window.StringMorph2.prototype.slotAt=function(e){var t,n;return!1!==(t=this.pointIsAboveFirstLine(e))?t:!1!==(n=this.pointIsUnderLastLine(e))?n:this.slotAtSingleLineString(e.x,this.textPossiblyCroppedToFit)},window.StringMorph2.prototype.upFrom=function(e){return this.startOfLine()},window.StringMorph2.prototype.downFrom=function(e){return this.endOfLine()},window.StringMorph2.prototype.startOfLine=function(){return 0},window.StringMorph2.prototype.endOfLine=function(){return this.textPossiblyCroppedToFit.length},window.StringMorph2.prototype.fontSizePopup=function(e){return this.prompt(e.parent.title+"\nfont\nsize:",this,"setFontSize",this.originallySetFontSize.toString(),nil,6,500,!0)},window.StringMorph2.prototype.editPopup=function(e){var t;return t=null!=e?e.parent.title+"\nedit:":"edit:",this.prompt(t,this,"setText",this.text,nil,6,nil,!0)},window.StringMorph2.prototype.setFontName=function(e,t,n){if(this.fontName!==n&&(this.fontName=n,this.changed(),null!=(null!=e?e.parent:void 0)&&e.parent instanceof MenuMorph))return this.updateFontsMenuEntriesTicks(e.parent)},window.StringMorph2.prototype.fontsMenu=function(e,t){var n;return(n=new MenuMorph(this,!1,t,!0,!0,"Fonts")).addMenuItem(untick+"Arial",!0,this,"setFontName",nil,nil,nil,nil,nil,this.justArialFontStack),n.addMenuItem(untick+"Times",!0,this,"setFontName",nil,nil,nil,nil,nil,this.timesFontStack),n.addMenuItem(untick+"Georgia",!0,this,"setFontName",nil,nil,nil,nil,nil,this.georgiaFontStack),n.addMenuItem(untick+"Garamo",!0,this,"setFontName",nil,nil,nil,nil,nil,this.garamoFontStack),n.addMenuItem(untick+"Helve",!0,this,"setFontName",nil,nil,nil,nil,nil,this.helveFontStack),n.addMenuItem(untick+"Verda",!0,this,"setFontName",nil,nil,nil,nil,nil,this.verdaFontStack),n.addMenuItem(untick+"Treby",!0,this,"setFontName",nil,nil,nil,nil,nil,this.trebuFontStack),n.addMenuItem(untick+"Heavy",!0,this,"setFontName",nil,nil,nil,nil,nil,this.heavyFontStack),n.addMenuItem(untick+"Mono",!0,this,"setFontName",nil,nil,nil,nil,nil,this.monoFontStack),this.updateFontsMenuEntriesTicks(n),n.popUpAtHand()},window.StringMorph2.prototype.updateFontsMenuEntriesTicks=function(e){var t,n,o,i,r,l,a,s,d;switch(r=a=n=t=i=d=s=o=l=untick,this.fontName){case this.justArialFontStack:r=tick;break;case this.timesFontStack:a=tick;break;case this.georgiaFontStack:n=tick;break;case this.garamoFontStack:t=tick;break;case this.helveFontStack:i=tick;break;case this.verdaFontStack:d=tick;break;case this.trebuFontStack:s=tick;break;case this.heavyFontStack:o=tick;break;case this.monoFontStack:l=tick}return e.children[1].label.setText(r+"Arial"),e.children[2].label.setText(a+"Times"),e.children[3].label.setText(n+"Georgia"),e.children[4].label.setText(t+"Garamo"),e.children[5].label.setText(i+"Helve"),e.children[6].label.setText(d+"Verda"),e.children[7].label.setText(s+"Treby"),e.children[8].label.setText(o+"Heavy"),e.children[9].label.setText(l+"Mono")},window.StringMorph2.prototype.addMorphSpecificMenuEntries=function(e,t){if(StringMorph2.__super__.addMorphSpecificMenuEntries.apply(this,arguments),t.addLine(),t.addMenuItem("edit...",!0,this,"editPopup","set this String's\ncontent"),t.addMenuItem("font size...",!0,this,"fontSizePopup","set this String's\nfont point size"),t.addMenuItem("font ➜",!1,this,"fontsMenu","pick a font"),this.isBold?t.addMenuItem("normal weight",!0,this,"toggleWeight"):t.addMenuItem("bold",!0,this,"toggleWeight"),this.isItalic?t.addMenuItem("non-italic",!0,this,"toggleItalic"):t.addMenuItem("italic",!0,this,"toggleItalic"),this.isHeaderLine?t.addMenuItem("no header line",!0,this,"toggleHeaderLine"):t.addMenuItem("header line",!0,this,"toggleHeaderLine"),this.isPassword?t.addMenuItem("show characters",!0,this,"toggleIsPassword"):t.addMenuItem("hide characters",!0,this,"toggleIsPassword"),t.addLine(),this.horizontalAlignment!==AlignmentSpecHorizontal.LEFT&&t.addMenuItem("← align left",!0,this,"alignLeft"),this.horizontalAlignment!==AlignmentSpecHorizontal.CENTER&&t.addMenuItem("∸ align center",!0,this,"alignCenter"),this.horizontalAlignment!==AlignmentSpecHorizontal.RIGHT&&t.addMenuItem("→ align right",!0,this,"alignRight"),t.addLine(),this.verticalAlignment!==AlignmentSpecVertical.TOP&&t.addMenuItem("↑ align top",!0,this,"alignTop"),this.verticalAlignment!==AlignmentSpecVertical.MIDDLE&&t.addMenuItem("⍿ align middle",!0,this,"alignMiddle"),this.verticalAlignment!==AlignmentSpecVertical.BOTTOM&&t.addMenuItem("↓ align bottom",!0,this,"alignBottom"),t.addLine(),this.fittingSpecWhenBoundsTooLarge===FittingSpecTextInLargerBounds.SCALEUP?t.addMenuItem("←☓→ don't expand to fill",!0,this,"togglefittingSpecWhenBoundsTooLarge"):t.addMenuItem("←→ expand to fill",!0,this,"togglefittingSpecWhenBoundsTooLarge"),this.fittingSpecWhenBoundsTooSmall===FittingSpecTextInSmallerBounds.CROP?t.addMenuItem("→← shrink to fit",!0,this,"togglefittingSpecWhenBoundsTooSmall"):t.addMenuItem("→⋯← crop to fit",!0,this,"togglefittingSpecWhenBoundsTooSmall"),world.isIndexPage)return t.addLine(),world.isIndexPage?t.addMenuItem("connect to ➜",!0,this,"openTargetSelector","connect to\nanother widget"):t.addMenuItem("set target",!0,this,"openTargetSelector","choose another morph\nwhose numerical property\n will be controlled by this one")},window.StringMorph2.prototype.togglefittingSpecWhenBoundsTooSmall=function(){return this.fittingSpecWhenBoundsTooSmall=!this.fittingSpecWhenBoundsTooSmall,this.changed(),world.stopEditing()},window.StringMorph2.prototype.togglefittingSpecWhenBoundsTooLarge=function(){return world.stopEditing(),this.fittingSpecWhenBoundsTooLarge=!this.fittingSpecWhenBoundsTooLarge,this.changed()},window.StringMorph2.prototype.toggleShowBlanks=function(){return this.isShowingBlanks=!this.isShowingBlanks,this.changed()},window.StringMorph2.prototype.toggleWeight=function(){return this.isBold=!this.isBold,this.changed()},window.StringMorph2.prototype.toggleItalic=function(){return this.isItalic=!this.isItalic,this.changed()},window.StringMorph2.prototype.toggleHeaderLine=function(){return this.isHeaderLine=!this.isHeaderLine,this.changed()},window.StringMorph2.prototype.toggleIsPassword=function(){return world.stopEditing(),this.isPassword=!this.isPassword,this.changed()},window.StringMorph2.prototype.changed=function(){if(StringMorph2.__super__.changed.apply(this,arguments),null!=world.caret)return world.caret.changed()},window.StringMorph2.prototype.reflowText=function(){return this.synchroniseTextAndActualText(),this.setFittingFontSize(this.fitToExtent())},window.StringMorph2.prototype.setText=function(e,t,n,o){var i;if(o||n!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==n?getRandomInt(-2e4,2e4):n,null!=t&&(e=t.text.text),i=e+"",this.text!==i&&(this.clearSelection(),this.text=i,this.checkIfTextContentWasModifiedFromTextAtStart(),this.synchroniseTextAndActualText(),this.changed()),this.updateTarget()},window.StringMorph2.prototype.considerCurrentTextAsReferenceText=function(){return this.hashOfTextConsideredAsReference=hashCode(this.text)},window.StringMorph2.prototype.checkIfTextContentWasModifiedFromTextAtStart=function(){var e,t;if(null!=this.widgetToBeNotifiedOfTextModificationChange)return this.hashOfTextConsideredAsReference===hashCode(this.text)?"function"==typeof(e=this.widgetToBeNotifiedOfTextModificationChange).textContentUnmodified?e.textContentUnmodified():void 0:"function"==typeof(t=this.widgetToBeNotifiedOfTextModificationChange).textContentModified?t.textContentModified():void 0},window.StringMorph2.prototype.setFontSize=function(e,t){var n,o;if("number"==typeof(o=null!=(null!=t?t.getValue:void 0)?t.getValue():e)?n=Math.round(Math.min(Math.max(o,4),500)):(n=parseFloat(o),isNaN(n)||(n=Math.round(Math.min(Math.max(n,4),500)))),n!==this.originallySetFontSize)return this.originallySetFontSize=n,this.changed()},window.StringMorph2.prototype.openTargetPropertySelector=function(e,t,n){var o,i,r,l,a,s;for([a,o]=n.stringSetters(),l=new MenuMorph(this,!1,this,!0,!0,"choose target property:"),i=r=0,s=a.length;0<=s?r<s:r>s;i=0<=s?++r:--r)l.addMenuItem(a[i],!0,this,"setTargetAndActionWithOnesPickedFromMenu",nil,nil,nil,nil,nil,n,o[i]);return 0===a.length&&(l=new MenuMorph(this,!1,this,!0,!0,"no target properties available")),l.popUpAtHand()},window.StringMorph2.prototype.numericalSetters=function(e,t){return[e,t]=StringMorph2.__super__.numericalSetters.call(this,e,t),e.push("alpha 0-100","font size","text"),t.push("setAlphaScaled","setFontSize","setText"),this.deduplicateSettersAndSortByMenuEntryString(e,t)},window.StringMorph2.prototype.stringSetters=function(e,t){return[e,t]=StringMorph2.__super__.stringSetters.call(this,e,t),e.push("bang!","text"),t.push("bang","setText"),this.deduplicateSettersAndSortByMenuEntryString(e,t)},window.StringMorph2.prototype.updateTarget=function(){this.action&&""!==this.action&&this.target[this.action].call(this.target,this.text,nil,this.connectionsCalculationToken)},window.StringMorph2.prototype.reactToTargetConnection=function(){return this.updateTarget()},window.StringMorph2.prototype.edit=function(){return this.textPossiblyCroppedToFit===this.transformTextOneToOne(this.text)?(world.edit(this),!0):(this.editPopup(),nil)},window.StringMorph2.prototype.selection=function(){var e,t;return e=Math.min(this.startMark,this.endMark),t=Math.max(this.startMark,this.endMark),this.text.slice(e,t)},window.StringMorph2.prototype.firstSelectedSlot=function(){return null==this.startMark||null==this.endMark?nil:Math.min(this.startMark,this.endMark)},window.StringMorph2.prototype.lastSelectedSlot=function(){return null==this.startMark||null==this.endMark?nil:Math.max(this.startMark,this.endMark)},window.StringMorph2.prototype.currentlySelecting=function(){return null!=this.startMark||null!=this.endMark},window.StringMorph2.prototype.clearSelection=function(){if(null!=this.startMark||null!=this.endMark)return this.startMark=nil,this.endMark=nil,this.changed()},window.StringMorph2.prototype.setEndMark=function(e){return this.endMark=e,this.changed()},window.StringMorph2.prototype.selectBetween=function(e,t){return this.startMark=Math.min(e,t),this.endMark=Math.max(e,t),this.changed()},window.StringMorph2.prototype.deleteSelection=function(){var e,t;return e=Math.min(this.startMark,this.endMark),t=Math.max(this.startMark,this.endMark),this.setText(this.text.slice(0,e)+this.text.slice(t))},window.StringMorph2.prototype.selectAll=function(){return this.startMark=0,this.endMark=this.textPossiblyCroppedToFit.length,this.changed()},window.StringMorph2.prototype.startSelectionUpToSlot=function(e,t){return this.startMark=e,this.endMark=t,this.changed()},window.StringMorph2.prototype.extendSelectionUpToSlot=function(e){return this.endMark=e,this.changed()},window.StringMorph2.prototype.mouseDoubleClick=function(){var e,t,n,o,i;if(this.isEditable){for(n=null!=(o=world.caret)?o.slot:void 0,t=0;n+t<this.text.length&&this.text[n+t].isLetter();)t++;for(e=0;n+e-1>=0&&this.text[n+e-1].isLetter();)e--;return this.selectBetween(n+e,n+t),null!=(i=world.caret)?i.gotoSlot(n+t):void 0}},window.StringMorph2.prototype.mouseTripleClick=function(){var e;if(this.isEditable)return this.selectAll(),null!=(e=world.caret)?e.gotoSlot(this.text.length):void 0},window.StringMorph2.prototype.mouseClickLeft=function(e,t,n,o,i,r,l){var a,s,d,h,p;return this.bringToForeground(),null!=(d=world.caret)&&d.bringToForeground(),this.isEditable?(a=!0,s=null!=(h=world.caret)?h.slot:void 0,this.currentlySelecting()||(a=this.edit()),p=this.slotAt(e),i?this.currentlySelecting()?this.extendSelectionUpToSlot(p):null!=s&&this.startSelectionUpToSlot(s,p):this.clearSelection(),null!=a?(world.caret.gotoSlot(p,!0),world.caret.show(),this.caretHorizPositionForVertMovement=world.caret.slot):void 0):this.escalateEvent("mouseClickLeft",e)},window.StringMorph2.prototype.enableSelecting=function(){return this.mouseDownLeft=function(e){if(this.clearSelection(),this.isEditable&&!this.grabsToParentWhenDragged())return this.edit(),world.caret.gotoPos(e),this.startMark=this.slotAt(e),this.endMark=this.startMark},this.mouseMove=function(e){var t;return this.isEditable&&this.currentlySelecting()?(t=this.slotAt(e))!==this.endMark?(this.endMark=t,this.changed()):void 0:this.disableSelecting()}},window.StringMorph2.prototype.disableSelecting=function(){return this.clearSelection(),this.mouseDownLeft=StringMorph2.prototype.mouseDownLeft,delete this.mouseMove},window.StringMorph2.instances=new Set,window.TextMorph2=function(e="TextMorph2",t=WorldMorph.preferencesAndSettings.normalTextFontSize,n=this.justArialFontStack,o=!1,i=!1,r,l=nil,a=nil){this.text=e,this.originallySetFontSize=t,this.fontName=n,this.isBold=o,this.isItalic=i,this.color=r,this.backgroundColor=l,this.backgroundTransparency=a,TextMorph2.__super__.constructor.call(this,this.text,this.originallySetFontSize,this.fontName,this.isBold,this.isItalic,!1,!1,this.color,this.backgroundColor,this.backgroundTransparency),this.markedTextColor=new Color(255,255,255),this.markedBackgoundColor=new Color(60,60,120),this.textPossiblyCroppedToFit=this.transformTextOneToOne(this.text),this.noticesTransparentClick=!0,this.fittingSpecWhenBoundsTooLarge=FittingSpecTextInLargerBounds.SCALEUP,this.fittingSpecWhenBoundsTooSmall=FittingSpecTextInSmallerBounds.CROP,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TextMorph2,"name",{value:"TextMorph2"}),window.TextMorph2.__super__=window.StringMorph2.prototype,window.TextMorph2=extend(window.TextMorph2,window.StringMorph2),window.TextMorph2.prototype.wrappedLines=[],window.TextMorph2.prototype.wrappedLineSlots=[],window.TextMorph2.prototype.softWrap=!0,window.TextMorph2.prototype.backgroundColor=nil,window.TextMorph2.prototype.receiver=nil,window.TextMorph2.prototype.heightOfPossiblyCroppedText=nil,window.TextMorph2.prototype.widthOfPossiblyCroppedText=nil,window.TextMorph2.prototype.doesTextFitInExtent=function(e=this.transformTextOneToOne(this.text),t){return""===e||this.breakTextIntoLines(e,t,this.extent())},window.TextMorph2.prototype.getParagraphs=function(e){var t,n;return t=hashCode(e),null!=(n=world.cacheForTextParagraphSplits.get(t))||(n=e.split("\n"),world.cacheForTextParagraphSplits.set(t,n)),n},window.TextMorph2.prototype.getWordsOfParapraph=function(e){var t,n;return t=hashCode(e),null!=(n=world.cacheForParagraphsWordsSplits.get(t))||((n=e.split(" ")).push("\n"),world.cacheForParagraphsWordsSplits.set(t,n)),n},window.TextMorph2.prototype.replaceLastSpaceWithInvisibleCarriageReturn=function(e){return(e=e.substr(0,e.length-1))+this.emptyCharacter},window.TextMorph2.prototype.getWrappingData=function(e,t,n,o){var i,r,l,a,s,d,h,p,c,u,w,g;if(i=this.buildCanvasFontProperty(e)+"-"+t+"-"+hashCode(n),null!=(w=world.cacheForParagraphsWrappingData.get(i)))return w;for(u=[],c=[],d=0,r="",h=0,"",l=0,a=o.length;l<a;l++)"\n"===(p=o[l])?(r=this.replaceLastSpaceWithInvisibleCarriageReturn(r),u.push(r),c.push(h),d=Math.max(d,Math.ceil(this.measureText(e,r))),r=""):(t>0?(s=r+p+" ",Math.ceil(this.measureText(e,s))>t?((r=this.replaceLastSpaceWithInvisibleCarriageReturn(r))!==this.emptyCharacter&&(u.push(r),c.push(h),d=Math.max(d,Math.ceil(this.measureText(e,r)))),r=p+" "):r=s):r=r+p+" ",h+=p.length+1);return g=[u,c,d,h],world.cacheForParagraphsWrappingData.set(i,g),g},window.TextMorph2.prototype.getTextWrappingData=function(e,t,n,o,i){var r,l,a,s,d,h,p,c,u,w,g,T,f,y,m,S,W,P;if(this instanceof SimplePlainTextWdgt&&(i=null,e=this.originallySetFontSize),l=this.buildCanvasFontProperty(e)+"-"+t+"-"+hashCode(n)+"-"+i,null!=(g=world.cacheForTextWrappingData.get(l)))return g;for(W=[],m=[0],c=0,a=0,u=0,d=0,h=o.length;d<h;d++)if(s=o[d],f=this.getWordsOfParapraph(s),P=this.getWrappingData(e,t,s,f),[S,y,p,w]=P,u=a,a+=w,W=W.concat(S),r=y.map((function(e){return e+u})),m=m.concat(r),c=Math.max(c,p),null!=i&&((m.length-1)*Math.ceil(fontHeight(e))>i.y||c>i.x))return world.cacheForTextWrappingData.set(l,!1),!1;return null!=i?(world.cacheForTextWrappingData.set(l,!0),!0):(T=[W,m,c,W.length*Math.ceil(fontHeight(e))],world.cacheForTextWrappingData.set(l,T),T)},window.TextMorph2.prototype.breakTextIntoLines=function(e=this.transformTextOneToOne(this.text),t,n){var o,i,r,l;return this instanceof SimplePlainTextWdgt&&(t=this.originallySetFontSize),i=this.softWrap?this.width():Number.MAX_VALUE,o=hashCode(e)+"-"+this.buildCanvasFontProperty(t)+"-"+i+"-"+n,null!=(l=world.cacheForTextBreakingIntoLinesTopLevel.get(o))||(r=this.getParagraphs(e),l=this.getTextWrappingData(t,i,e,r,n),world.cacheForTextBreakingIntoLinesTopLevel.set(o,l)),l},window.TextMorph2.prototype.reflowText=function(){return TextMorph2.__super__.reflowText.apply(this,arguments),[this.wrappedLines,this.wrappedLineSlots,this.widthOfPossiblyCroppedText,this.heightOfPossiblyCroppedText]=this.breakTextIntoLines(this.textPossiblyCroppedToFit,this.fittingFontSize),this.heightOfPossiblyCroppedText},window.TextMorph2.prototype.createBufferCacheKey=function(){return TextMorph2.__super__.createBufferCacheKey.call(this)+"-"+this.softWrap},window.TextMorph2.prototype.createRefreshOrGetBackBuffer=function(){var e,t,n,o,i,r,l,a,s,d,h,p,c,u,w,g,T,f,y;if(i=this.createBufferCacheKey(),null!=(o=world.cacheForImmutableBackBuffers.get(i)))return this.backBuffer!==o[0]&&null!=world.caret&&world.caret.changed(),o;for(r=this.reflowText(),this instanceof SimplePlainTextWdgt&&(r=this.wrappedLines.length*Math.ceil(fontHeight(this.originallySetFontSize))),null!=world.caret&&world.caret.changed(),t=(e=newCanvas()).getContext("2d"),e.width=this.width()*ceilPixelRatio,e.height=this.height()*ceilPixelRatio,t.scale(ceilPixelRatio,ceilPixelRatio),t.font=this.buildCanvasFontProperty(),t.textAlign="left",t.textBaseline="bottom",this.backgroundColor&&(t.save(),t.fillStyle=this.backgroundColor.toString(),t.globalAlpha=this.backgroundTransparency,t.fillRect(0,0,Math.round(this.width()),Math.round(this.height())),t.restore()),w=this.textVerticalPosition(r),t.fillStyle=this.color.toString(),a=0,s=0,d=(p=this.wrappedLines).length;s<d;s++)h=p[s],g=Math.ceil(this.measureText(nil,h)),f=function(){switch(this.horizontalAlignment){case AlignmentSpecHorizontal.RIGHT:return this.width()-g;case AlignmentSpecHorizontal.CENTER:return(this.width()-g)/2;default:return 0}}.call(this),y=(a+1)*Math.ceil(fontHeight(this.fittingFontSize)),a++,t.fillText(this.eliminateInvisibleCharacter(h),f,y+w),this.isHeaderLine&&this.wrappedLines.length<=1&&(l=fontHeight(this.fittingFontSize),c=f,u=y+w,T=g,t.strokeStyle=new Color(198,198,198),t.beginPath(),t.moveTo(0,u-l/2),t.lineTo(c-5,u-l/2),t.moveTo(c+T+5,u-l/2),t.lineTo(this.width(),u-l/2),t.stroke());return this.drawSelection(t),n=[e,t],world.cacheForImmutableBackBuffers.set(i,n),n},window.TextMorph2.prototype.slotRowAndColumn=function(e){var t,n,o,i,r,l,a;for(this.reflowText(),o=0,a=n=0,r=this.wrappedLines.length;0<=r?n<r:n>r;a=0<=r?++n:--n)for(o=this.wrappedLineSlots[a],t=i=0,l=this.wrappedLines[a].length;0<=l?i<l:i>l;t=0<=l?++i:--i){if(o===e)return[a,t];o+=1}return[this.wrappedLines.length-1,this.wrappedLines[this.wrappedLines.length-1].length-1]},window.TextMorph2.prototype.slotCoordinates=function(e){var t,n,o,i,r,l,a,s,d;return this.transformTextOneToOne(this.text)!==this.textPossiblyCroppedToFit&&this.fittingSpecWhenBoundsTooSmall===FittingSpecTextInSmallerBounds.CROP?(world.stopEditing(),this.edit(),nil):(this.reflowText(),[o,n]=this.slotRowAndColumn(e),t=this.measureText(nil,this.wrappedLines[o]),a=Math.ceil(this.measureText(nil,this.wrappedLines[o].substring(0,n))),d=o*Math.ceil(fontHeight(this.fittingFontSize)),r=this.textVerticalPosition(this.heightOfPossiblyCroppedText),i=this.textHorizontalPosition(t),l=this.left()+a+i,s=this.top()+d+r,new Point(l,s))},window.TextMorph2.prototype.slotAtRow=function(e,t){return e>this.wrappedLines.length?this.textPossiblyCroppedToFit.length:this.wrappedLineSlots[Math.max(e-1,0)]+this.slotAtSingleLineString(t,this.wrappedLines[e-1])},window.TextMorph2.prototype.pointIsAboveFirstLine=function(e){var t;return t=this.textVerticalPosition(this.heightOfPossiblyCroppedText),e.y-this.top()<t&&0},window.TextMorph2.prototype.slotAt=function(e){var t,n,o;if(!1!==(t=this.pointIsAboveFirstLine(e)))return t;for(o=this.textVerticalPosition(this.heightOfPossiblyCroppedText),n=0;e.y-this.top()>o+n*Math.ceil(fontHeight(this.fittingFontSize));)n+=1;return n=Math.max(n,1),this.slotAtRow(n,e.x)},window.TextMorph2.prototype.upFrom=function(e){var t,n;return[n,t]=this.slotRowAndColumn(e),n<1?0:this.slotAtRow(n,this.slotCoordinates(this.caretHorizPositionForVertMovement).x)},window.TextMorph2.prototype.downFrom=function(e){var t,n;return[n,t]=this.slotRowAndColumn(e),n>this.wrappedLines.length-2?this.textPossiblyCroppedToFit.length:this.slotAtRow(n+2,this.slotCoordinates(this.caretHorizPositionForVertMovement).x)},window.TextMorph2.prototype.startOfLine=function(e){return this.wrappedLineSlots[this.slotRowAndColumn(e).y]},window.TextMorph2.prototype.endOfLine=function(e){return this.startOfLine(e)+this.wrappedLines[this.slotRowAndColumn(e).y].length-1},window.TextMorph2.prototype.toggleSoftWrap=function(){return this.softWrap=!this.softWrap,this.changed(),world.stopEditing()},window.TextMorph2.prototype.addMorphSpecificMenuEntries=function(e,t){var n,o;return TextMorph2.__super__.addMorphSpecificMenuEntries.apply(this,arguments),t.addLine(),this.softWrap?t.addMenuItem("soft wrap".tick(),!0,this,"toggleSoftWrap"):t.addMenuItem("soft wrap",!0,this,"toggleSoftWrap"),t.addLine(),null!=(null!=(n=this.parent)&&null!=(o=n.parent)?o.parent:void 0)&&this.parent.parent.parent instanceof ConsoleWdgt?(this.currentlySelecting()&&t.addMenuItem("run selection",!0,this.parent.parent.parent,"doSelection"),t.addMenuItem("run contents",!0,this.parent.parent.parent,"doAll")):t.addMenuItem("run contents",!0,this,"doContents")},window.TextMorph2.prototype.setAlignmentToLeft=function(){return this.alignment="left",this.changed()},window.TextMorph2.prototype.setAlignmentToRight=function(){return this.alignment="right",this.changed()},window.TextMorph2.prototype.setAlignmentToCenter=function(){return this.alignment="center",this.changed()},window.TextMorph2.prototype.evaluationMenu=function(){var e;return e=this.buildHierarchyMenu(),this.text.length>0&&(e.prependLine(),e.prependMenuItem("select all",!0,this,"selectAllAndEdit"),e.prependMenuItem("do all",!0,this,"doAll")),""!==this.selection().replace(/^\s\s*/,"").replace(/\s\s*$/,"")&&(e.prependLine(),e.prependMenuItem("inspect selection",!0,this,"inspectSelection","evaluate the\nselected expression\nand inspect the result"),e.prependMenuItem("show selection",!0,this,"showSelection","evaluate the\nselected expression\nand show the result"),e.prependMenuItem("do selection",!0,this,"doSelection","evaluate the\nselected expression")),e},window.TextMorph2.prototype.edit=function(){return this.changed(),TextMorph2.__super__.edit.apply(this,arguments)},window.TextMorph2.prototype.selectAllAndEdit=function(){return this.edit(),this.selectAll()},window.TextMorph2.prototype.doAll=function(){return this.receiver.evaluateString(this.text)},window.TextMorph2.prototype.setReceiver=function(e){return this.receiver=e,this.overridingContextMenu=this.evaluationMenu},window.TextMorph2.prototype.doSelection=function(){return this.receiver.evaluateString(this.selection()),this.edit()},window.TextMorph2.prototype.doContents=function(){return null!=this.receiver?this.receiver.evaluateString(this.text):this.evaluateString(this.text)},window.TextMorph2.prototype.showSelection=function(){var e;if(null!=(e=this.receiver.evaluateString(this.selection())))return this.inform(e)},window.TextMorph2.prototype.inspectSelection=function(){var e;if(null!=(e=this.receiver.evaluateString(this.selection())))return this.spawnInspector(e)};window.TextMorph2.prototype.mouseTripleClick=function(){var e,t,n,o,i,r;if(this.isEditable)return[o,e]=this.slotRowAndColumn(null!=(t=world.caret)?t.slot:void 0),i=this.slotAtRow(o+1,0),r=this.wrappedLineSlots[o+1],this.selectBetween(i,r),null!=(n=world.caret)?n.gotoSlot(r):void 0},window.TextMorph2.instances=new Set,window.WindowContentsPlaceholderText=function(){WindowContentsPlaceholderText.__super__.constructor.call(this,"Drop a widget in here",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1),this.alignCenter(),this.alignMiddle(),this.fittingSpecWhenBoundsTooLarge=!1,this.changed(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowContentsPlaceholderText,"name",{value:"WindowContentsPlaceholderText"}),window.WindowContentsPlaceholderText.__super__=window.TextMorph2.prototype,window.WindowContentsPlaceholderText=extend(window.WindowContentsPlaceholderText,window.TextMorph2),window.WindowContentsPlaceholderText.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return this.layoutSpecDetails=new WindowContentLayoutSpec(PreferredSize.DONT_MIND,PreferredSize.DONT_MIND,1)},window.WindowContentsPlaceholderText.instances=new Set,window.SimpleVerticalStackPanelWdgt=function(e,t,n,o=!0){this.padding=n,this.constrainContentWidth=o,SimpleVerticalStackPanelWdgt.__super__.constructor.call(this),this.appearance=new RectangularAppearance(this),null!=e&&this.silentRawSetExtent(e),null!=t&&(this.color=t),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleVerticalStackPanelWdgt,"name",{value:"SimpleVerticalStackPanelWdgt"}),window.SimpleVerticalStackPanelWdgt.__super__=window.Widget.prototype,window.SimpleVerticalStackPanelWdgt=extend(window.SimpleVerticalStackPanelWdgt,window.Widget),window.SimpleVerticalStackPanelWdgt.augmentWith(window.ClippingAtRectangularBoundsMixin,"SimpleVerticalStackPanelWdgt"),window.SimpleVerticalStackPanelWdgt.prototype._acceptsDrops=!0,window.SimpleVerticalStackPanelWdgt.prototype.tight=!0,window.SimpleVerticalStackPanelWdgt.prototype.constrainContentWidth=!0,window.SimpleVerticalStackPanelWdgt.prototype._adjustingContentsBounds=!1,window.SimpleVerticalStackPanelWdgt.prototype.colloquialName=function(){return"stack"},window.SimpleVerticalStackPanelWdgt.prototype.add=function(e,t=nil,n=LayoutSpec.ATTACHEDAS_FREEFLOATING,o,i,r){var l,a,s,d,h;if(e.rawResizeToWithoutSpacing(),l=this.childrenNotHandlesNorCarets(),d=nil,l.length>0&&r instanceof Point)for(d=0,a=0,s=l.length;a<s&&(d++,!((h=l[a]).top()<r.y&&h.bottom()>r.y));a++);return null!=d?SimpleVerticalStackPanelWdgt.__super__.add.call(this,e,d,n,o):SimpleVerticalStackPanelWdgt.__super__.add.apply(this,arguments)},window.SimpleVerticalStackPanelWdgt.prototype.childRemoved=function(){return this.amIPanelOfScrollPanelWdgt()?(this.parent.adjustContentsBounds(),void this.parent.adjustScrollBars()):this.adjustContentsBounds()},window.SimpleVerticalStackPanelWdgt.prototype.reactToDropOf=function(){return this.amIPanelOfScrollPanelWdgt()?(this.parent.adjustContentsBounds(),void this.parent.adjustScrollBars()):this.adjustContentsBounds()},window.SimpleVerticalStackPanelWdgt.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return SimpleVerticalStackPanelWdgt.__super__.initialiseDefaultWindowContentLayoutSpec.apply(this,arguments),this.layoutSpecDetails.canSetHeightFreely=!1},window.SimpleVerticalStackPanelWdgt.prototype.availableWidthForContents=function(){return this.width()-2*this.padding},window.SimpleVerticalStackPanelWdgt.prototype.adjustContentsBounds=function(){var e,t,n,o;if(!this._adjustingContentsBounds)return this._adjustingContentsBounds=!0,this.padding=5,n=0,o=0,(e=this.childrenNotHandlesNorCarets()).forEach(e=>{if(e.layoutSpec!==LayoutSpec.ATTACHEDAS_VERTICAL_STACK_ELEMENT)return e.initialiseDefaultVerticalStackLayoutSpec(),e.layoutSpecDetails.rememberInitialDimensions(e,this),e.setLayoutSpec(LayoutSpec.ATTACHEDAS_VERTICAL_STACK_ELEMENT)}),e.forEach(e=>{var t,i;return o+=this.padding,this.constrainContentWidth?(i=e.layoutSpecDetails.getWidthInStack(),e.rawSetWidthSizeHeightAccordingly(i),(e instanceof TextMorph||e instanceof SimplePlainTextWdgt)&&(e.maxTextWidth=i),t="right"===e.layoutSpecDetails.alignment?this.left()+this.width()-this.padding-i:"center"===e.layoutSpecDetails.alignment?this.left()+Math.floor((this.width()-i)/2):this.left()+this.padding):t=this.left()+this.padding,e.fullRawMoveTo(new Point(t,this.top()+o+n)),n+=e.height()}),t=n+o+this.padding,this.tight&&0!==e.length||(t=Math.max(t,this.height())),this.rawSetHeight(t),this._adjustingContentsBounds=!1},window.SimpleVerticalStackPanelWdgt.prototype.rawSetExtent=function(e){if(!e.eq(this.extent()))return this.breakNumberOfRawMovesAndResizesCaches(),SimpleVerticalStackPanelWdgt.__super__.rawSetExtent.call(this,e),this.adjustContentsBounds()},window.SimpleVerticalStackPanelWdgt.instances=new Set,window.WindowWdgt=function(e="my window",t,n,o=!1,i=!1){var r;this.labelContent=e,this.closeButton=t,this.contents=n,this.internal=o,this.alwaysShowInternalExternalButton=i,WindowWdgt.__super__.constructor.call(this,nil,nil,40,!0),this.internal?this.appearance=new RectangularAppearance(this):this.appearance=new BoxyAppearance(this),this.strokeColor=new Color(125,125,125),this.tight=!0,this.defaultContents=new WindowContentsPlaceholderText,null==this.contents&&(this.contents=this.defaultContents),this.padding=5,this.color=new Color(248,248,248),this.buildAndConnectChildren(),this.contents===this.defaultContents?this.setEmptyWindowLabel():(this.disableDrops(),"window"===(r=this.contents.colloquialName())&&(r="window with another "+r),"internal window"===r&&(r="window with an "+r),this.label.setText(r)),this.rawSetExtent(new Point(300,300)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowWdgt,"name",{value:"WindowWdgt"}),window.WindowWdgt.__super__=window.SimpleVerticalStackPanelWdgt.prototype,window.WindowWdgt=extend(window.WindowWdgt,window.SimpleVerticalStackPanelWdgt),window.WindowWdgt.prototype.label=nil,window.WindowWdgt.prototype.closeButton=nil,window.WindowWdgt.prototype.editButton=nil,window.WindowWdgt.prototype.collapseUncollapseSwitchButton=nil,window.WindowWdgt.prototype.labelContent=nil,window.WindowWdgt.prototype.resizer=nil,window.WindowWdgt.prototype.padding=nil,window.WindowWdgt.prototype.contents=nil,window.WindowWdgt.prototype.titlebarBackground=nil,window.WindowWdgt.prototype.contentNeverSetInPlaceYet=!0,window.WindowWdgt.prototype._adjustingContentsBounds=!1,window.WindowWdgt.prototype.internal=!1,window.WindowWdgt.prototype.defaultContents=nil,window.WindowWdgt.prototype.reInflating=!1,window.WindowWdgt.prototype.internalExternalSwitchButton=nil,window.WindowWdgt.prototype.alwaysShowInternalExternalButton=nil,window.WindowWdgt.prototype.createReference=function(e,t){var n;return null!=e&&"string"!=typeof e&&(e=nil,t=world),null!=this.contents&&this.contents instanceof ScriptWdgt?(n=new IconicDesktopSystemScriptShortcutWdgt(this,e),t.add(n),n.setExtent(new Point(75,75)),n.fullChanged(),this.bringToForeground()):WindowWdgt.__super__.createReference.apply(this,arguments)},window.WindowWdgt.prototype.makeInternal=function(){if(!this.internal)return this.internal=!0,this.setAppearanceAndColorOfTitleBackground()},window.WindowWdgt.prototype.makeExternal=function(){var e,t;if(this.internal&&(this.internal=!1,this.unlockFromPanels(),this.setAppearanceAndColorOfTitleBackground(),e=this.parent,world.add(this),null!=(t=this.contents)&&"function"==typeof t.holderWindowMadeIntoExternal&&t.holderWindowMadeIntoExternal(),e!==world))return this.fullRawMoveTo(this.position().add(new Point(10,10))),this.fullRawMoveWithin(world),this.rememberFractionalSituationInHoldingPanel()},window.WindowWdgt.prototype.setTitle=function(e){return this.label.setText(this.contents.colloquialName()+": "+e)},window.WindowWdgt.prototype.setTitleWithoutPrependedContentName=function(e){return this.label.setText(e)},window.WindowWdgt.prototype.representativeIcon=function(){return this.contents===this.defaultContents?WindowWdgt.__super__.representativeIcon.apply(this,arguments):this.contents.representativeIcon()},window.WindowWdgt.prototype.closeFromWindowBar=function(){var e;return null!=(e=this.contents)?e.closeFromContainerWindow(this):void 0},window.WindowWdgt.prototype.contentsRecursivelyCanSetHeightFreely=function(){return this.contents instanceof WindowWdgt?this.contents.contentsRecursivelyCanSetHeightFreely():this.contents.layoutSpecDetails.canSetHeightFreely&&!this.contents.isCollapsed()&&!this.reInflating},window.WindowWdgt.prototype.recursivelyAttachedAsFreeFloating=function(){return this.layoutSpec===LayoutSpec.ATTACHEDAS_FREEFLOATING||null!=this.parent&&this.parent instanceof WindowWdgt&&this.parent.recursivelyAttachedAsFreeFloating()},window.WindowWdgt.prototype.rejectsBeingDropped=function(){return!this.internal},window.WindowWdgt.prototype.setEmptyWindowLabel=function(){return this.internal?this.label.setText("empty internal window"):this.label.setText("empty window")},window.WindowWdgt.prototype.colloquialName=function(){return this.internal?"internal window":"window"},window.WindowWdgt.prototype.add=function(e,t=nil,n,o,i){var r,l;return i||e instanceof CaretMorph||e instanceof HandleMorph?WindowWdgt.__super__.add.call(this,e,t,LayoutSpec.ATTACHEDAS_FREEFLOATING,o):(this.contentNeverSetInPlaceYet=!0,"window"===(l=e.colloquialName())&&(l="window with another "+l),"internal window"===l&&(l="window with an "+l),this.label.setText(l),this.removeChild(this.contents),this.contents=e,this.adjustContentsBounds(),WindowWdgt.__super__.add.call(this,e,t,LayoutSpec.ATTACHEDAS_WINDOW_CONTENT,o)),null!=(r=this.resizer)?r.moveInFrontOfSiblings():void 0},window.WindowWdgt.prototype.childBeingDestroyed=function(e){if(e===this.contents)return this.resetToDefaultContents()},window.WindowWdgt.prototype.childBeingPickedUp=function(e){if(e===this.contents)return this.resetToDefaultContents()},window.WindowWdgt.prototype.childBeingClosed=function(e){if(e===this.contents)return this.resetToDefaultContents()},window.WindowWdgt.prototype.childBeingCollapsed=function(e){var t,n;if(e===this.contents)return this.widthWhenUnCollapsed=this.width(),this.contentsExtentWhenCollapsed=this.contents.extent(),this.extentWhenCollapsed=this.extent(),null!=(t=this.editButton)&&t.destroy(),this.editButton=nil,null!=(n=this.internalExternalSwitchButton)&&n.destroy(),this.internalExternalSwitchButton=nil},window.WindowWdgt.prototype.childBeingUnCollapsed=function(e){return e===this.contents&&(this.widthWhenCollapsed=this.width()),this.createAndAddEditButton(),this.createAndAddInternalExternalSwitchButton()},window.WindowWdgt.prototype.childCollapsed=function(e){if(e===this.contents)return null!=this.widthWhenCollapsed&&this.rawSetWidth(this.widthWhenCollapsed),this.adjustContentsBounds(),this.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.WindowWdgt.prototype.childUnCollapsed=function(e){if(e===this.contents)return this.reInflating=!0,this.rawSetExtent(this.extentWhenCollapsed),this.contents.rawSetExtent(this.contentsExtentWhenCollapsed),null!=this.widthWhenUnCollapsed&&this.rawSetWidth(this.widthWhenUnCollapsed),this.adjustContentsBounds(),this.reInflating=!1,this.rememberFractionalSituationInHoldingPanel(),this.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.WindowWdgt.prototype.resetToDefaultContents=function(){if(this.enableDrops(),this.contents=this.defaultContents,this.buildAndConnectChildren(),this.setEmptyWindowLabel(),this.recursivelyAttachedAsFreeFloating())return this.rawSetExtent(new Point(300,300))},window.WindowWdgt.prototype.aboutToDrop=function(){return this.removeChild(this.contents)},window.WindowWdgt.prototype.justDropped=function(e){var t;return WindowWdgt.__super__.justDropped.apply(this,arguments),null!=(t=this.contents)&&"function"==typeof t.holderWindowJustDropped?t.holderWindowJustDropped(e):void 0},window.WindowWdgt.prototype.justBeenGrabbed=function(e){var t;return null!=(t=this.contents)&&"function"==typeof t.holderWindowJustBeenGrabbed?t.holderWindowJustBeenGrabbed(e):void 0},window.WindowWdgt.prototype.reactToDropOf=function(e){return this.contents=e,WindowWdgt.__super__.reactToDropOf.apply(this,arguments),this.disableDrops(),this.buildAndConnectChildren()},window.WindowWdgt.prototype.setAppearanceAndColorOfTitleBackground=function(){return this.internal?this.titlebarBackground.appearance=new RectangularAppearance(this.titlebarBackground):this.titlebarBackground.appearance=new BoxyAppearance(this.titlebarBackground),this.internal?(this.titlebarBackground.setColor(WorldMorph.preferencesAndSettings.internalWindowBarBackgroundColor),this.titlebarBackground.strokeColor=WorldMorph.preferencesAndSettings.internalWindowBarStrokeColor):(this.titlebarBackground.setColor(WorldMorph.preferencesAndSettings.externalWindowBarBackgroundColor),this.titlebarBackground.strokeColor=WorldMorph.preferencesAndSettings.externalWindowBarStrokeColor)},window.WindowWdgt.prototype.buildTitlebarBackground=function(){return null!=this.titlebarBackground&&this.titlebarBackground.fullDestroy(),this.internal?this.titlebarBackground=new RectangleMorph:this.titlebarBackground=new BoxMorph,this.setAppearanceAndColorOfTitleBackground(),this.add(this.titlebarBackground,nil,nil,nil,!0)},window.WindowWdgt.prototype.buildAndConnectChildren=function(){var e,t,n;if(null==this.titlebarBackground&&this.buildTitlebarBackground(),null!=(t=this.label)&&t.fullDestroy(),this.label=new StringMorph2(this.labelContent,WorldMorph.preferencesAndSettings.titleBarTextFontSize),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?this.label.isBold=!0:this.label.isBold=WorldMorph.preferencesAndSettings.titleBarBoldText,this.label.color=new Color(255,255,255),this.add(this.label,nil,nil,nil,!0),null==this.closeButton&&(this.closeButton=new CloseIconButtonMorph),this.add(this.closeButton,nil,nil,nil,!0),null==this.collapseUncollapseSwitchButton&&(e=new CollapseIconButtonMorph,n=new UncollapseIconButtonMorph,this.collapseUncollapseSwitchButton=new SwitchButtonMorph([e,n])),this.add(this.collapseUncollapseSwitchButton,nil,nil,nil,!0),this.createAndAddInternalExternalSwitchButton(),this.createAndAddEditButton(),this.add(this.contents),null==this.resizer)return this.resizer=new HandleMorph(this)},window.WindowWdgt.prototype.createAndAddInternalExternalSwitchButton=function(){var e,t,n,o;if(((null!=(o=this.contents)?o.providesAmenitiesForEditing:void 0)||this.alwaysShowInternalExternalButton)&&null==this.internalExternalSwitchButton)return e=new ExternalIconButtonWdgt,t=new InternalIconButtonWdgt,n=this.internal?[t,e]:[e,t],this.internalExternalSwitchButton=new SwitchButtonMorph(n),this.add(this.internalExternalSwitchButton,nil,nil,nil,!0)},window.WindowWdgt.prototype.makePencilYellow=function(){var e,t,n;return null!=(e=this.editButton)&&(e.color_normal=new Color(248,188,58)),null!=(t=this.editButton)&&t.setColor(new Color(248,188,58)),null!=(n=this.editButton)?n.changed():void 0},window.WindowWdgt.prototype.makePencilClear=function(){var e,t,n;return null!=(e=this.editButton)&&(e.color_normal=new Color(245,244,245)),null!=(t=this.editButton)&&t.setColor(new Color(245,244,245)),null!=(n=this.editButton)?n.changed():void 0},window.WindowWdgt.prototype.createAndAddEditButton=function(){var e;if((null!=(e=this.contents)?e.providesAmenitiesForEditing:void 0)&&null==this.editButton)return this.editButton=new EditIconButtonWdgt(this),this.add(this.editButton,nil,nil,nil,!0),this.contents.dragsDropsAndEditingEnabled?this.makePencilYellow():this.makePencilClear()},window.WindowWdgt.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return WindowWdgt.__super__.initialiseDefaultWindowContentLayoutSpec.apply(this,arguments),this.layoutSpecDetails.canSetHeightFreely=!1},window.WindowWdgt.prototype.adjustContentsBounds=function(){var e,t,n,o,i,r,l,a,s,d,h,p,c,u,w,g,T,f;if(!this._adjustingContentsBounds)return this._adjustingContentsBounds=!0,16,null!=this.closeButton&&this.closeButton.parent===this&&(e=(e=new Rectangle(new Point(this.left()+this.padding,this.top()+this.padding))).setBoundsWidthAndHeight(16,16),this.closeButton.doLayout(e)),null!=this.collapseUncollapseSwitchButton&&this.collapseUncollapseSwitchButton.parent===this&&(e=(e=new Rectangle(new Point(this.left()+16+2*this.padding,this.top()+this.padding))).setBoundsWidthAndHeight(16,16),this.collapseUncollapseSwitchButton.doLayout(e)),T=0,null==this.contents||this.contents.collapsed||(this.contents.layoutSpec!==LayoutSpec.ATTACHEDAS_WINDOW_CONTENT&&(this.contents.initialiseDefaultWindowContentLayoutSpec(),this.contents.setLayoutSpec(LayoutSpec.ATTACHEDAS_WINDOW_CONTENT)),this.contentNeverSetInPlaceYet?(this.contents.layoutSpecDetails.preferredStartingWidth===PreferredSize.THIS_ONE_I_HAVE_NOW?(h=this.contents.width(),f=this.recursivelyAttachedAsFreeFloating()?h+2*this.padding:Math.min(this.width(),h+2*this.padding),this.rawSetWidth(f)):this.contents.layoutSpecDetails.preferredStartingWidth===PreferredSize.DONT_MIND?h=this.width()-2*this.padding:(h=this.contents.layoutSpecDetails.preferredStartingWidth,f=this.recursivelyAttachedAsFreeFloating()?h+2*this.padding:Math.min(this.width(),h+2*this.padding),this.rawSetWidth(f)),this.contents.layoutSpecDetails.rememberInitialDimensions(this.contents,this)):h=this.contents.layoutSpecDetails.getWidthInStack(),d=this.contents.layoutSpecDetails.resizerCanOverlapContents?Math.round(16+this.padding+this.padding+2*this.padding):Math.round(16+this.padding+this.padding+3*this.padding+WorldMorph.preferencesAndSettings.handleSize),this.contentNeverSetInPlaceYet?(this.contents.layoutSpecDetails.preferredStartingHeight===PreferredSize.THIS_ONE_I_HAVE_NOW?(t=this.contents.height(),this.recursivelyAttachedAsFreeFloating()||(t=Math.min(t,this.height()-d)),this.contents.rawSetWidth(h),this.rawSetWidth(f),this.contents.rawSetHeight(t)):this.contents.layoutSpecDetails.preferredStartingHeight===PreferredSize.DONT_MIND?(this.contents.rawSetWidth(h),t=Math.round(this.height()-d),this.contents.rawSetHeight(t)):(this.contents.rawSetWidthSizeHeightAccordingly(h),t=this.contents.height()),this.contentNeverSetInPlaceYet=!1):(this.contents.rawSetWidthSizeHeightAccordingly(h),t=this.contents.height(),this.contentsRecursivelyCanSetHeightFreely()&&(t=Math.round(this.height()-d),this.contents.rawSetHeight(t))),(this.contents instanceof TextMorph||this.contents instanceof SimplePlainTextWdgt)&&(this.contents.maxTextWidth=h),a=this.left()+Math.floor((this.width()-h)/2),this.contents.fullRawMoveTo(new Point(a,this.top()+(16+this.padding+this.padding)+this.padding)),T+=t),null!=this.contents&&this.contents.collapsed&&(d=Math.round(16+this.padding+this.padding)),s=T+d,this.rawSetHeight(s),this.titlebarBackground.rawSetExtent(new Point(this.width(),16+2*this.padding).subtract(new Point(2,2))),this.titlebarBackground.fullRawMoveTo(this.position().add(new Point(1,1))),this.width()<4*(16+this.padding)+this.padding?null!=(p=this.editButton)&&p.collapse():null!=(c=this.editButton)&&c.unCollapse(),this.width()<3*(16+this.padding)+this.padding?null!=(u=this.internalExternalSwitchButton)&&u.collapse():null!=(w=this.internalExternalSwitchButton)&&w.unCollapse(),null!=this.label&&this.label.parent===this&&(o=this.left()+this.padding+2*(16+this.padding),r=this.top()+this.padding,i=this.right()-this.padding,null==this.editButton||this.editButton.isCollapsed()||(i-=1*(16+this.padding)),null==this.internalExternalSwitchButton||this.internalExternalSwitchButton.isCollapsed()||(i-=1*(16+this.padding)),l=i-o,n=(n=new Rectangle(new Point(o,r))).setBoundsWidthAndHeight(l,WorldMorph.preferencesAndSettings.titleBarTextHeight),this.label.rawSetBounds(n)),null==this.editButton||this.editButton.isCollapsed()||this.editButton.parent!==this||(e=(e=new Rectangle(new Point(this.right()-2*(16+this.padding),this.top()+this.padding))).setBoundsWidthAndHeight(16,16),this.editButton.doLayout(e)),null==this.internalExternalSwitchButton||this.internalExternalSwitchButton.isCollapsed()||this.internalExternalSwitchButton.parent!==this||(e=(e=new Rectangle(new Point(this.right()-1*(16+this.padding),this.top()+this.padding))).setBoundsWidthAndHeight(16,16),this.internalExternalSwitchButton.doLayout(e)),null!=(g=this.resizer)&&g.silentUpdateResizerHandlePosition(),this._adjustingContentsBounds=!1},window.WindowWdgt.instances=new Set,window.FolderWindowWdgt=function(e,t,n,o=!1){this.labelContent=e,this.closeButton=t,this.contents=n,this.internal=o,this.contents=new ScrollPanelWdgt(new FolderPanelWdgt),FolderWindowWdgt.__super__.constructor.call(this,"",this.closeButton,this.contents,this.internal),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FolderWindowWdgt,"name",{value:"FolderWindowWdgt"}),window.FolderWindowWdgt.__super__=window.WindowWdgt.prototype,window.FolderWindowWdgt=extend(window.FolderWindowWdgt,window.WindowWdgt),window.FolderWindowWdgt.prototype.representativeIcon=function(){return new GenericShortcutIconWdgt(new FolderIconWdgt)},window.FolderWindowWdgt.prototype.closeFromWindowBar=function(){return world.anyReferenceToWdgt(this)?this.close():new SaveShortcutPromptWdgt(this,this).popUpAtHand()},window.FolderWindowWdgt.prototype.addMorphSpecificMenuEntries=function(e,t){return FolderWindowWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),this.contents.contents.addMorphSpecificMenuEntries(e,t)},window.FolderWindowWdgt.prototype.createReference=function(e,t){var n;return null!=e&&"string"!=typeof e&&(e=nil),n=new IconicDesktopSystemFolderShortcutWdgt(this,e),t.add(n),n.setExtent(new Point(75,75)),n.fullChanged(),this.bringToForeground()},window.FolderWindowWdgt.instances=new Set,window.GlassBoxBottomWdgt=function(){GlassBoxBottomWdgt.__super__.constructor.apply(this,arguments),this.setColor(new Color(230,230,230)),this.strokeColor=new Color(196,195,196),this.setAlphaScaled(50),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.GlassBoxBottomWdgt,"name",{value:"GlassBoxBottomWdgt"}),window.GlassBoxBottomWdgt.__super__=window.BoxMorph.prototype,window.GlassBoxBottomWdgt=extend(window.GlassBoxBottomWdgt,window.BoxMorph),window.GlassBoxBottomWdgt.prototype.reLayout=function(){var e,t,n,o,i,r;for(trackChanges.push(!1),i=this.width(),t=0,n=(e=this.childrenNotHandlesNorCarets()).length;t<n;t++)(r=e[t])instanceof MenuItemMorph?r.fullRawMoveTo(this.topLeft().add(new Point(0,(this.height()-r.height())/2).round())):(null!=r.idealRatioWidthToHeight?(o=r.idealRatioWidthToHeight)>1?r.rawSetExtent(new Point(i,i/o)):r.rawSetExtent(new Point(i*o,i)):r.rawSetExtent(new Point(i,i)),r.fullRawMoveTo(this.topLeft().add(new Point((i-r.width())/2,(i-r.height())/2).round())));return trackChanges.pop(),this.fullChanged()},window.GlassBoxBottomWdgt.instances=new Set,WidgetCreatorAndSmartPlacerOnClickMixin={onceAddedClassProperties:function(e){return this.addInstanceProperties(e,{mouseClickLeft:function(e,t,n,o,i,r,l,a){var s,d;if(!a)return d=this.createWidgetToBeHandled(),null!=(s=world.topmostChildSuchThat((function(e){return e instanceof WindowWdgt&&null!=e.contents&&(e.contents instanceof StretchableEditableWdgt||e.contents instanceof SimpleDocumentWdgt||e.contents instanceof PatchProgrammingWdgt||e.contents instanceof SimpleSlideWdgt)&&e.contents.dragsDropsAndEditingEnabled})))?s.contents instanceof StretchableEditableWdgt||s.contents instanceof PatchProgrammingWdgt||s.contents instanceof SimpleSlideWdgt?(d.fullRawMoveTo(s.contents.stretchableWidgetContainer.center().round().subtract(d.extent().floorDivideBy(2))),s.contents.stretchableWidgetContainer.add(d),d.rememberFractionalSituationInHoldingPanel(),s.contents.stretchableWidgetContainer.bringToForeground(),this.bringToForeground()):(s.contents.simpleDocumentScrollPanel.add(d),s.contents.simpleDocumentScrollPanel.scrollToBottom(),s.contents.simpleDocumentScrollPanel.bringToForeground(),this.bringToForeground()):(d.fullRawMoveTo(this.topRight().add(new Point(20,-40))),d.fullRawMoveWithin(world),world.add(d))}})}},window.GlassBoxTopWdgt=function(){window.GlassBoxTopWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.GlassBoxTopWdgt,"name",{value:"GlassBoxTopWdgt"}),window.GlassBoxTopWdgt.__super__=window.Widget.prototype,window.GlassBoxTopWdgt=extend(window.GlassBoxTopWdgt,window.Widget),window.GlassBoxTopWdgt.augmentWith(window.HighlightableMixin,"GlassBoxTopWdgt"),window.GlassBoxTopWdgt.augmentWith(window.WidgetCreatorAndSmartPlacerOnClickMixin,"GlassBoxTopWdgt"),window.GlassBoxTopWdgt.prototype.createWidgetToBeHandled=function(){var e;return(e=this.parent.children[0].fullCopy()).isTemplate=!1,e},window.GlassBoxTopWdgt.prototype.findRootForGrab=function(){return this.parent.children[0]},window.GlassBoxTopWdgt.prototype.setColor=function(e,t,n,o){var i;if(o||n!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==n?getRandomInt(-2e4,2e4):n,null!=(i=this.parent)?i.setColor(e,t,n):void 0},window.GlassBoxTopWdgt.instances=new Set,window.GrayPaletteMorph=function(e=nil,t){this.target=e,GrayPaletteMorph.__super__.constructor.call(this,this.target,t||new Point(80,10)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.GrayPaletteMorph,"name",{value:"GrayPaletteMorph"}),window.GrayPaletteMorph.__super__=window.ColorPaletteMorph.prototype,window.GrayPaletteMorph=extend(window.GrayPaletteMorph,window.ColorPaletteMorph),window.GrayPaletteMorph.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return this.layoutSpecDetails=new WindowContentLayoutSpec(PreferredSize.DONT_MIND,PreferredSize.DONT_MIND,1)},window.GrayPaletteMorph.prototype.colloquialName=function(){return"shades of gray"},window.GrayPaletteMorph.prototype.createRefreshOrGetBackBuffer=function(){var e,t,n,o,i,r,l;return i=this.constructor.name+"-"+this.extent().toString(),null!=(o=world.cacheForImmutableBackBuffers.get(i))?o:(r=this.extent(),(t=(e=newCanvas(r.scaleBy(ceilPixelRatio))).getContext("2d")).scale(ceilPixelRatio,ceilPixelRatio),this.choice=new Color,(l=t.createLinearGradient(0,r.y,r.x,r.y)).addColorStop(0,"black"),l.addColorStop(1,"white"),t.fillStyle=l,t.fillRect(0,0,r.x,r.y),n=[e,t],world.cacheForImmutableBackBuffers.set(i,n),n)},window.GrayPaletteMorph.instances=new Set,window.HandleMorph=function(e=nil,t="resizeBothDimensionsHandle"){var n,o;this.target=e,this.type=t,null!=(null!=(n=this.target)?n.padding:void 0)?this.inset=new Point(Math.max(this.target.padding,2),Math.max(this.target.padding,2)):this.inset=new Point(2,2),HandleMorph.__super__.constructor.call(this),this.color=new Color(255,255,255),this.noticesTransparentClick=!0,o=WorldMorph.preferencesAndSettings.handleSize,this.silentRawSetExtent(new Point(o,o)),this.target&&this.target.add(this),this.updateResizerHandlePosition(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.HandleMorph,"name",{value:"HandleMorph"}),window.HandleMorph.__super__=window.Widget.prototype,window.HandleMorph=extend(window.HandleMorph,window.Widget),window.HandleMorph.prototype.target=nil,window.HandleMorph.prototype.inset=nil,window.HandleMorph.prototype.type=nil,window.HandleMorph.prototype.state=0,window.HandleMorph.prototype.STATE_NORMAL=0,window.HandleMorph.prototype.STATE_HIGHLIGHTED=1,window.HandleMorph.prototype.detachesWhenDragged=function(){return this.parent instanceof WorldMorph},window.HandleMorph.prototype.grabsToParentWhenDragged=function(){return!1},window.HandleMorph.prototype.updateVisibilityAndPosition=function(){if(this.updateVisibility(),this.parent.layoutSpec===LayoutSpec.ATTACHEDAS_FREEFLOATING)return this.updateResizerHandlePosition(),this.moveInFrontOfSiblings()},window.HandleMorph.prototype.updateVisibility=function(){return this.parent.layoutSpec===LayoutSpec.ATTACHEDAS_FREEFLOATING?this.show():this.hide()},window.HandleMorph.prototype.parentHasReLayouted=function(){if(this.updateVisibilityAndPosition(),this.parent.layoutSpec===LayoutSpec.ATTACHEDAS_FREEFLOATING)return HandleMorph.__super__.parentHasReLayouted.apply(this,arguments)},window.HandleMorph.prototype.updateResizerHandlePosition=function(){if(this.target){switch(this.type){case"moveHandle":if(this.target.width()<2*this.width())return void this.hide();this.show();break;case"resizeHorizontalHandle":if(this.target.height()<3*this.height())return void this.hide();this.show();break;case"resizeVerticalHandle":if(this.target.width()<3*this.width())return void this.hide();this.show()}return this.silentUpdateResizerHandlePosition(),this.changed()}},window.HandleMorph.prototype.silentUpdateResizerHandlePosition=function(){var e;if(this.target)switch(this.type){case"resizeBothDimensionsHandle":return this.silentFullRawMoveTo(this.target.bottomRight().subtract(this.extent().add(this.inset)));case"moveHandle":return this.silentFullRawMoveTo(this.target.topLeft().add(this.inset));case"resizeHorizontalHandle":return e=new Point(this.extent().x+this.inset.x,Math.floor(this.extent().y/2)),this.silentFullRawMoveTo(this.target.rightCenter().subtract(e));case"resizeVerticalHandle":return e=new Point(Math.floor(this.extent().x/2),this.extent().y+this.inset.y),this.silentFullRawMoveTo(this.target.bottomCenter().subtract(e))}},window.HandleMorph.prototype.paintIntoAreaOrBlitFromBackBuffer=function(e,t,n){var o,i,r,l,a,s,d,h;if(!this.preliminaryCheckNothingToDraw(t,e))return[i,s,d,o,r,h,l]=this.calculateKeyValues(e,t),h<1||l<1||i.isEmpty()?nil:(e.save(),e.clipToRectangle(o,r,h,l),e.globalAlpha=(null!=n?n.alpha:1)*this.alpha,e.scale(ceilPixelRatio,ceilPixelRatio),a=this.position(),e.translate(a.x,a.y),this.state===this.STATE_NORMAL&&this.handleMorphRenderingHelper(e,this.color,new Color(150,150,150)),this.state===this.STATE_HIGHLIGHTED&&this.handleMorphRenderingHelper(e,new Color(255,255,255),new Color(200,200,255)),e.restore(),this.paintHighlight(e,o,r,h,l))},window.HandleMorph.prototype.drawArrow=function(e,t,n,o,i,r,l){return e.beginPath(),e.moveTo(.5+t.x,.5+t.y),e.lineTo(.5+t.x+o.x,.5+t.y+o.y),e.moveTo(.5+t.x,.5+t.y),e.lineTo(.5+t.x+i.x,.5+t.y+i.y),e.moveTo(.5+t.x,.5+t.y),e.lineTo(.5+n.x,.5+n.y),e.lineTo(.5+n.x+r.x,.5+n.y+r.y),e.moveTo(.5+n.x,.5+n.y),e.lineTo(.5+n.x+l.x,.5+n.y+l.y),e.closePath(),e.stroke()},window.HandleMorph.prototype.drawHandle=function(e){var t,n,o,i,r,l,a,s,d,h,p,c,u,w,g;if("resizeHorizontalHandle"!==this.type&&"moveHandle"!==this.type||(d=(h=(h=this.bottomLeft().subtract(this.position())).subtract(new Point(0,Math.ceil(this.height()/2)))).add(new Point(Math.ceil(this.width()/15),0)),u=h.add(new Point(this.width()-Math.ceil(this.width()/14),0)),n=new Point(Math.ceil(this.width()/5),-Math.ceil(this.height()/5)),t=new Point(Math.ceil(this.width()/5),Math.ceil(this.height()/5)),i=new Point(-Math.ceil(this.width()/5),-Math.ceil(this.height()/5)),o=new Point(-Math.ceil(this.width()/5),Math.ceil(this.height()/5)),this.drawArrow(e,d,u,n,t,i,o)),"resizeVerticalHandle"!==this.type&&"moveHandle"!==this.type||(d=(h=this.bottomCenter().subtract(this.position())).add(new Point(0,-Math.ceil(this.height()/14))),u=h.add(new Point(0,-this.height()+Math.ceil(this.height()/15))),n=new Point(-Math.ceil(this.width()/5),-Math.ceil(this.height()/5)),t=new Point(Math.ceil(this.width()/5),-Math.ceil(this.height()/5)),i=new Point(-Math.ceil(this.width()/5),Math.ceil(this.height()/5)),o=new Point(Math.ceil(this.width()/5),Math.ceil(this.height()/5)),this.drawArrow(e,d,u,n,t,i,o)),"resizeBothDimensionsHandle"===this.type){for(r=this.bottomLeft().subtract(this.position()),w=this.topRight().subtract(this.position()),l=r.copy(),g=w.copy(),c=[],a=s=0,p=this.height();s<=p;a=s+=6)l.x=r.x+a,g.y=w.y+a,e.beginPath(),e.moveTo(l.x,l.y),e.lineTo(g.x,g.y),e.closePath(),c.push(e.stroke());return c}},window.HandleMorph.prototype.handleMorphRenderingHelper=function(e,t,n){return e.lineWidth=.5,e.lineCap="round",e.save(),e.strokeStyle=n.toString(),e.translate(1,1),this.drawHandle(e),e.translate(1,0),this.drawHandle(e),e.restore(),e.strokeStyle=t.toString(),this.drawHandle(e)},window.HandleMorph.prototype.mouseClickLeft=function(){},window.HandleMorph.prototype.mouseUpLeft=function(){},window.HandleMorph.prototype.mouseDownLeft=function(e){return this.target?this.target.bringToForeground():nil},window.HandleMorph.prototype.nonFloatDragging=function(e,t,n){var o,i,r,l;switch(r=t.subtract(e),this.type){case"resizeBothDimensionsHandle":return o=r.add(this.extent().add(this.inset)).subtract(this.target.position()),this.target.setExtent(o,this);case"moveHandle":return this.target.fullMoveTo(r.subtract(this.inset),this);case"resizeHorizontalHandle":return l=r.x+this.extent().x+this.inset.x-this.target.left(),this.target.setWidth(l);case"resizeVerticalHandle":return i=r.y+this.extent().y+this.inset.y-this.target.top(),this.target.setHeight(i)}},window.HandleMorph.prototype.mouseEnter=function(){return this.state=this.STATE_HIGHLIGHTED,this.changed()},window.HandleMorph.prototype.mouseLeave=function(){return this.state=this.STATE_NORMAL,this.changed()},window.HandleMorph.prototype.makeHandleSolidWithParentMorph=function(e,t,n){return this.target=n,this.target.add(this),this.updateResizerHandlePosition(),this.noticesTransparentClick=!0},window.HandleMorph.prototype.attach=function(){var e,t;if(e=world.plausibleTargetAndDestinationMorphs(this),t=new MenuMorph(this,!1,this,!0,!0,"choose target:"),e.length>0?e.forEach(e=>t.addMenuItem(e.toString().replace("Wdgt","").slice(0,50)+" ➜",!0,this,"makeHandleSolidWithParentMorph",nil,nil,nil,nil,nil,e,nil,!0)):t=new MenuMorph(this,!1,this,!0,!0,"no morphs to attach to"),e.length)return t.popUpAtHand()},window.HandleMorph.instances=new Set,window.RectangleMorph=function(e,t){RectangleMorph.__super__.constructor.call(this),this.appearance=new RectangularAppearance(this),null!=e&&this.silentRawSetExtent(e),null!=t&&(this.color=t),this.toolTipMessage="rectangle","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.RectangleMorph,"name",{value:"RectangleMorph"}),window.RectangleMorph.__super__=window.Widget.prototype,window.RectangleMorph=extend(window.RectangleMorph,window.Widget),window.RectangleMorph.prototype.colloquialName=function(){return"rectangle"},window.RectangleMorph.instances=new Set,window.HighlighterMorph=function(){window.HighlighterMorph.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.HighlighterMorph,"name",{value:"HighlighterMorph"}),window.HighlighterMorph.__super__=window.RectangleMorph.prototype,window.HighlighterMorph=extend(window.HighlighterMorph,window.RectangleMorph),window.HighlighterMorph.instances=new Set,window.HorizontalMenuPanelWdgt=function(){HorizontalMenuPanelWdgt.__super__.constructor.apply(this,arguments),this.rawSetExtent(new Point(300,15)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.HorizontalMenuPanelWdgt,"name",{value:"HorizontalMenuPanelWdgt"}),window.HorizontalMenuPanelWdgt.__super__=window.PanelWdgt.prototype,window.HorizontalMenuPanelWdgt=extend(window.HorizontalMenuPanelWdgt,window.PanelWdgt),window.HorizontalMenuPanelWdgt.prototype.numberOfIconsOnPanel=0,window.HorizontalMenuPanelWdgt.prototype.internalPadding=5,window.HorizontalMenuPanelWdgt.prototype.thumbnailSize=30,window.HorizontalMenuPanelWdgt.prototype.add=function(e,t=nil,n=LayoutSpec.ATTACHEDAS_FREEFLOATING,o,i,r){var l,a,s,d,h,p,c,u;if(e instanceof ModifiedTextTriangleAnnotationWdgt||e instanceof HandleMorph)return HorizontalMenuPanelWdgt.__super__.add.apply(this,arguments);if(e.isTemplate=!0,null==e.extentToGetWhenDraggedFromGlassBox&&(e.extentToGetWhenDraggedFromGlassBox=e.extent()),e instanceof GlassBoxBottomWdgt||((s=new GlassBoxBottomWdgt).add(e),e.actionableAsThumbnail||(d=new GlassBoxTopWdgt,s.add(d),d.toolTipMessage=e.toolTipMessage),s.fullRawMoveTo(this.topLeft().add(new Point(this.internalPadding,this.internalPadding))),e instanceof MenuItemMorph?(e.shrinkToTextSize(),s.rawSetExtent(new Point(e.width(),this.thumbnailSize))):s.rawSetExtent(new Point(this.thumbnailSize,this.thumbnailSize)),s.reLayout(),e=s),l=this.childrenNotHandlesNorCarets(),a=!1,null!=r&&l.length>0)for(c=0,h=0,p=l.length;h<p;h++){if((u=l[h]).bounds.growBy(this.internalPadding).containsPoint(r)){a=!0,u.bounds.growBy(this.internalPadding).rightHalf().containsPoint(r)&&c++;break}c++}return a?HorizontalMenuPanelWdgt.__super__.add.call(this,e,c,n,o):HorizontalMenuPanelWdgt.__super__.add.call(this,e,this.numberOfIconsOnPanel,n,o),this.numberOfIconsOnPanel++,this.reLayout()},window.HorizontalMenuPanelWdgt.prototype.rawSetExtent=function(e){return HorizontalMenuPanelWdgt.__super__.rawSetExtent.apply(this,arguments),this.reLayout()},window.HorizontalMenuPanelWdgt.prototype.reLayout=function(){var e,t,n,o,i,r,l,a,s,d,h,p,c,u;for(trackChanges.push(!1),e=this.childrenNotHandlesNorCarets(),u=this.internalPadding,t=0,o=0,l=e.length;o<l&&(p=e[o],!(u+this.internalPadding+p.width()>this.width()));o++)u+=this.internalPadding+p.width(),t++;for(c=this.internalPadding,n=i=0,a=t;0<=a?i<a:i>a;n=0<=a?++i:--i)e[n].unCollapse(),h=this.position().add(new Point((this.width()-u)/2,0)),e[n].fullRawMoveTo(h.add(new Point(c,(this.height()-e[n].height())/2)).round()),c+=e[n].width()+this.internalPadding;for(n=r=s=t,d=e.length;s<=d?r<d:r>d;n=s<=d?++r:--r)e[n].collapse();return trackChanges.pop(),this.fullChanged()},window.HorizontalMenuPanelWdgt.instances=new Set,KeepsRatioWhenInVerticalStackMixin={onceAddedClassProperties:function(e){return this.addInstanceProperties(e,{rawSetWidthSizeHeightAccordingly:function(e){var t;return"function"==typeof this.rawResizeToWithoutSpacing&&this.rawResizeToWithoutSpacing(),t=this.height()/this.width(),this.rawSetExtent(new Point(e,Math.round(e*t)))},holderWindowJustBeenGrabbed:function(e){if(e instanceof SimpleVerticalStackPanelWdgt)return this.freeFromRatioConstraints()},holderWindowMadeIntoExternal:function(){return this.freeFromRatioConstraints()},freeFromRatioConstraints:function(){var e;if(null!=this.layoutSpecDetails&&(this.layoutSpecDetails.canSetHeightFreely=!0,e=world.height()-20,this.parent.height()>e))return this.parent.rawSetExtent(new Point(Math.min(this.width()/this.height()*e,world.width()),e).round()),this.parent.fullRawMoveTo(world.hand.position().subtract(this.parent.extent().floorDivideBy(2))),this.parent.fullRawMoveWithin(world)},holderWindowJustDropped:function(e){if(e instanceof SimpleVerticalStackPanelWdgt&&!(e instanceof WindowWdgt))return this.constrainToRatio()},constrainToRatio:function(){if(null!=this.layoutSpecDetails)return this.layoutSpecDetails.canSetHeightFreely=!1,this.rawSetWidthSizeHeightAccordingly(this.width())}})}},window.IconMorph=function(e=WorldMorph.preferencesAndSettings.iconDarkLineColor){this.color=e,IconMorph.__super__.constructor.call(this),this.appearance=new IconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.IconMorph,"name",{value:"IconMorph"}),window.IconMorph.__super__=window.Widget.prototype,window.IconMorph=extend(window.IconMorph,window.Widget),window.IconMorph.augmentWith(window.KeepsRatioWhenInVerticalStackMixin,"IconMorph"),window.IconMorph.prototype.widthWithoutSpacing=function(){return this.appearance.widthWithoutSpacing()},window.IconMorph.prototype.rawResizeToWithoutSpacing=function(){return this.rawSetExtent(this.appearance.calculateRectangleOfIcon().extent())},window.IconMorph.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return IconMorph.__super__.initialiseDefaultWindowContentLayoutSpec.apply(this,arguments),this.layoutSpecDetails.canSetHeightFreely=!1},window.IconMorph.instances=new Set,window.IconicDesktopSystemShortcutWdgt=function(e,t,n){this.target=e,this.title=t,this.icon=n,null==this.title&&(this.title=this.target.colloquialName()),IconicDesktopSystemShortcutWdgt.__super__.constructor.call(this,this.title,this.icon),world.widgetsReferencingOtherWidgets.add(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.IconicDesktopSystemShortcutWdgt,"name",{value:"IconicDesktopSystemShortcutWdgt"}),window.IconicDesktopSystemShortcutWdgt.__super__=window.IconicDesktopSystemLinkWdgt.prototype,window.IconicDesktopSystemShortcutWdgt=extend(window.IconicDesktopSystemShortcutWdgt,window.IconicDesktopSystemLinkWdgt),window.IconicDesktopSystemShortcutWdgt.augmentWith(window.HighlightableMixin,"IconicDesktopSystemShortcutWdgt"),window.IconicDesktopSystemShortcutWdgt.prototype.color_hover=new Color(90,90,90),window.IconicDesktopSystemShortcutWdgt.prototype.color_pressed=new Color(128,128,128),window.IconicDesktopSystemShortcutWdgt.prototype.color_normal=new Color(0,0,0),window.IconicDesktopSystemShortcutWdgt.prototype.reactToDropOf=function(e){},window.IconicDesktopSystemShortcutWdgt.prototype.destroy=function(){return IconicDesktopSystemShortcutWdgt.__super__.destroy.apply(this,arguments),world.widgetsReferencingOtherWidgets.delete(this)},window.IconicDesktopSystemShortcutWdgt.prototype.alignCopiedMorphToReferenceTracker=function(e){return world.widgetsReferencingOtherWidgets.add(e)},window.IconicDesktopSystemShortcutWdgt.instances=new Set,window.IconicDesktopSystemDocumentShortcutWdgt=function(e,t,n){this.target=e,this.title=t,this.icon=n,null==this.icon&&(this.icon=new GenericShortcutIconWdgt(new GenericObjectIconWdgt(this.target.representativeIcon()))),IconicDesktopSystemDocumentShortcutWdgt.__super__.constructor.call(this,this.target,this.title,this.icon),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.IconicDesktopSystemDocumentShortcutWdgt,"name",{value:"IconicDesktopSystemDocumentShortcutWdgt"}),window.IconicDesktopSystemDocumentShortcutWdgt.__super__=window.IconicDesktopSystemShortcutWdgt.prototype,window.IconicDesktopSystemDocumentShortcutWdgt=extend(window.IconicDesktopSystemDocumentShortcutWdgt,window.IconicDesktopSystemShortcutWdgt),window.IconicDesktopSystemDocumentShortcutWdgt.prototype.reactToDropOf=function(e){},window.IconicDesktopSystemDocumentShortcutWdgt.prototype.mouseDoubleClick=function(){var e;if(this.target.destroyed)this.inform("The referenced item\nis dead!");else{if(!this.target.isAncestorOf(this))return this.target.show(),null==(e=this.target.findRootForGrab())&&this.target.isDirectlyInBasement()&&(e=this.target),null==e?this.inform("The referenced item does exist\nhowever it's part of something\nthat can't be grabbed!"):(e.show(),e.spawnNextTo(this,world),e.rememberFractionalSituationInHoldingPanel(),"function"==typeof e.setTitle?e.setTitle(this.label.text):void 0);this.inform("The referenced item is\nalready open and containing\nwhat you just clicked on!")}},window.IconicDesktopSystemDocumentShortcutWdgt.instances=new Set,window.IconicDesktopSystemFolderShortcutWdgt=function(e,t){this.target=e,this.title=t,IconicDesktopSystemFolderShortcutWdgt.__super__.constructor.call(this,this.target,this.title,new GenericShortcutIconWdgt(new FolderIconWdgt)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.IconicDesktopSystemFolderShortcutWdgt,"name",{value:"IconicDesktopSystemFolderShortcutWdgt"}),window.IconicDesktopSystemFolderShortcutWdgt.__super__=window.IconicDesktopSystemShortcutWdgt.prototype,window.IconicDesktopSystemFolderShortcutWdgt=extend(window.IconicDesktopSystemFolderShortcutWdgt,window.IconicDesktopSystemShortcutWdgt),window.IconicDesktopSystemFolderShortcutWdgt.prototype._acceptsDrops=!0,window.IconicDesktopSystemFolderShortcutWdgt.prototype.reactToDropOf=function(e){return e instanceof IconicDesktopSystemLinkWdgt?this.target.contents.contents.add(e):e.createReferenceAndClose(nil,this.target.contents.contents)},window.IconicDesktopSystemFolderShortcutWdgt.prototype.mouseDoubleClick=function(){var e;if(this.target.destroyed)this.inform("The referenced item\nis dead!");else{if(!this.target.isAncestorOf(this))return this.target.show(),null==(e=this.target.findRootForGrab())&&this.target.isDirectlyInBasement()&&(e=this.target),null==e?this.inform("The referenced item does exist\nhowever it's part of something\nthat can't be grabbed!"):(e.show(),e.spawnNextTo(this,world),e.rememberFractionalSituationInHoldingPanel(),"function"==typeof e.setTitle?e.setTitle(this.label.text):void 0);this.inform("The referenced item is\nalready open and containing\nwhat you just clicked on!")}},window.IconicDesktopSystemFolderShortcutWdgt.instances=new Set,window.IconicDesktopSystemScriptShortcutWdgt=function(e,t,n){this.target=e,this.title=t,this.icon=n,null==this.icon&&(this.icon=new GenericShortcutIconWdgt(new ScriptIconWdgt)),IconicDesktopSystemScriptShortcutWdgt.__super__.constructor.call(this,this.target,this.title,this.icon),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.IconicDesktopSystemScriptShortcutWdgt,"name",{value:"IconicDesktopSystemScriptShortcutWdgt"}),window.IconicDesktopSystemScriptShortcutWdgt.__super__=window.IconicDesktopSystemShortcutWdgt.prototype,window.IconicDesktopSystemScriptShortcutWdgt=extend(window.IconicDesktopSystemScriptShortcutWdgt,window.IconicDesktopSystemShortcutWdgt),window.IconicDesktopSystemScriptShortcutWdgt.prototype.mouseDoubleClick=function(){if(!this.target.destroyed)return this.target.contents.doAll();this.inform("The referenced item\nis dead!")},window.IconicDesktopSystemScriptShortcutWdgt.prototype.addMorphSpecificMenuEntries=function(e,t){return t.addLine(),t.addMenuItem("edit script...",!0,this,"editScript"),t},window.IconicDesktopSystemScriptShortcutWdgt.prototype.editScript=function(){var e;if(this.target.destroyed)this.inform("The referenced item\nis dead!");else{if(!this.target.isAncestorOf(this))return this.target.show(),null==(e=this.target.findRootForGrab())&&this.target.isDirectlyInBasement()&&(e=this.target),null==e?this.inform("The referenced item does exist\nhowever it's part of something\nthat can't be grabbed!"):(e.show(),e.spawnNextTo(this,world),e.rememberFractionalSituationInHoldingPanel(),"function"==typeof e.setTitle?e.setTitle(this.label.text):void 0);this.inform("The referenced item is\nalready open and containing\nwhat you just clicked on!")}},window.IconicDesktopSystemScriptShortcutWdgt.instances=new Set,window.ListMorph=function(e,t,n=[],o=function(e){return"function"==typeof this.registerThisInstance&&this.registerThisInstance(),isString(e)?e:("function"==typeof this.registerThisInstance&&this.registerThisInstance(),e.toSource?e.toSource():e.toString())},i=[],r=nil){this.target=e,this.action=t,this.elements=n,this.labelGetter=o,this.format=i,this.doubleClickAction=r,ListMorph.__super__.constructor.call(this),this.contents.disableDrops(),this.color=new Color(255,255,255),this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ListMorph,"name",{value:"ListMorph"}),window.ListMorph.__super__=window.ScrollPanelWdgt.prototype,window.ListMorph=extend(window.ListMorph,window.ScrollPanelWdgt),window.ListMorph.prototype.elements=nil,window.ListMorph.prototype.labelGetter=nil,window.ListMorph.prototype.format=nil,window.ListMorph.prototype.listContents=nil,window.ListMorph.prototype.selected=nil,window.ListMorph.prototype.active=nil,window.ListMorph.prototype.action=nil,window.ListMorph.prototype.target=nil,window.ListMorph.prototype.doubleClickAction=nil,window.ListMorph.prototype.buildAndConnectChildren=function(){return this.listContents=new MenuMorph(this,!0,this,!1,!1,nil,nil),this.listContents.isLockingToPanels=!0,this.elements.length||(this.elements=["(empty)"]),trackChanges.push(!1),this.elements.forEach(e=>{var t,n,o;return n=nil,t=!1,o=!1,this.format.forEach((function(i){if(i[1].call(nil,e))switch(i[0]){case"bold":return t=!0;case"italic":return o=!0;default:return n=i[0]}})),this.listContents.addMenuItem(this.labelGetter(e),!0,this,"select",nil,n,t,o,this.doubleClickAction)}),trackChanges.pop(),this.listContents.silentFullRawMoveTo(this.contents.position()),this.listContents.reLayout(),this.add(this.listContents)},window.ListMorph.prototype.select=function(e,t){this.selected=e,this.active=t,null!=this.action&&""!==this.action&&this.target[this.action].call(this.target,e.labelString)},window.ListMorph.prototype.rawSetExtent=function(e){var t,n;if(!e.eq(this.extent()))return this.breakNumberOfRawMovesAndResizesCaches(),t=this.listContents.boundingBox(),(n=this.bounds.origin.corner(this.bounds.origin.add(e))).right()>t.right()&&n.width()<=t.width()&&this.listContents.fullRawMoveRightSideTo(n.right()),n.bottom()>t.bottom()&&n.height()<=t.height()&&this.listContents.fullRawMoveBottomSideTo(n.bottom()),ListMorph.__super__.rawSetExtent.call(this,e)},window.ListMorph.instances=new Set,window.ModifiedTextTriangleAnnotationWdgt=function(e=nil,t=0,n=10){var o;this.proportionOfParent=t,this.fixedSize=n,ModifiedTextTriangleAnnotationWdgt.__super__.constructor.call(this),this.appearance=new UpperRightTriangleAppearance(this,this.positionWithinParent),this.noticesTransparentClick=!1,o=WorldMorph.preferencesAndSettings.handleSize,this.silentRawSetExtent(new Point(o,o)),e&&e.add(this),this.updateResizerPosition(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ModifiedTextTriangleAnnotationWdgt,"name",{value:"ModifiedTextTriangleAnnotationWdgt"}),window.ModifiedTextTriangleAnnotationWdgt.__super__=window.Widget.prototype,window.ModifiedTextTriangleAnnotationWdgt=extend(window.ModifiedTextTriangleAnnotationWdgt,window.Widget),window.ModifiedTextTriangleAnnotationWdgt.augmentWith(window.UpperRightInternalHaloMixin,"ModifiedTextTriangleAnnotationWdgt"),window.ModifiedTextTriangleAnnotationWdgt.prototype.positionWithinParent="topLeft",window.ModifiedTextTriangleAnnotationWdgt.instances=new Set,window.PopUpWdgt=function(e,t=!0,n=!0){this.morphOpeningThePopUp=e,this.killThisPopUpIfClickOutsideDescendants=t,this.killThisPopUpIfClickOnDescendantsTriggers=n,PopUpWdgt.__super__.constructor.call(this),this.isLockingToPanels=!1,world.freshlyCreatedPopUps.add(this),world.openPopUps.add(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PopUpWdgt,"name",{value:"PopUpWdgt"}),window.PopUpWdgt.__super__=window.Widget.prototype,window.PopUpWdgt=extend(window.PopUpWdgt,window.Widget),window.PopUpWdgt.prototype.killThisPopUpIfClickOnDescendantsTriggers=!0,window.PopUpWdgt.prototype.killThisPopUpIfClickOutsideDescendants=!0,window.PopUpWdgt.prototype.isPopUpMarkedForClosure=!1,window.PopUpWdgt.prototype.morphOpeningThePopUp=nil,window.PopUpWdgt.prototype.hierarchyOfPopUps=function(){var e,t;for(e=this,t=new Set([e]);null!=(null!=e?e.getParentPopUp:void 0);)null!=(e=e.getParentPopUp())&&t.add(e);return t},window.PopUpWdgt.prototype.propagateKillPopUps=function(){var e;if(this.killThisPopUpIfClickOnDescendantsTriggers)return null!=(e=this.getParentPopUp())&&e.propagateKillPopUps(),this.markPopUpForClosure()},window.PopUpWdgt.prototype.markPopUpForClosure=function(){return world.popUpsMarkedForClosure.add(this),this.isPopUpMarkedForClosure=!0},window.PopUpWdgt.prototype.isPopUpPinned=function(){return!(this.killThisPopUpIfClickOnDescendantsTriggers||this.killThisPopUpIfClickOutsideDescendants)},window.PopUpWdgt.prototype.getParentPopUp=function(){return this.isPopUpPinned()?this.parent:null!=this.morphOpeningThePopUp?this.morphOpeningThePopUp.firstParentThatIsAPopUp():nil},window.PopUpWdgt.prototype.firstParentThatIsAPopUp=function(){return this.isPopUpMarkedForClosure&&null!=this.parent?this.parent.firstParentThatIsAPopUp():this},window.PopUpWdgt.prototype.pinPopUp=function(e){var t;return this.killThisPopUpIfClickOnDescendantsTriggers=!1,this.killThisPopUpIfClickOutsideDescendants=!1,this.onClickOutsideMeOrAnyOfMyChildren(nil),null!=e?e.firstParentThatIsAPopUp().propagateKillPopUps():null!=(t=this.getParentPopUp())&&t.propagateKillPopUps(),world.closePopUpsMarkedForClosure(),this.updatePopUpShadow()},window.PopUpWdgt.prototype.fullCopy=function(){var e;return(e=PopUpWdgt.__super__.fullCopy.apply(this,arguments)).onClickOutsideMeOrAnyOfMyChildren(nil),e.killThisPopUpIfClickOnDescendantsTriggers=!1,e.killThisPopUpIfClickOutsideDescendants=!1,e},window.PopUpWdgt.prototype.addMorphSpecificMenuEntries=function(e,t){return PopUpWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),t.addLine(),t.addMenuItem("pin",!1,this,"pin")},window.PopUpWdgt.prototype.justDropped=function(e){return PopUpWdgt.__super__.justDropped.apply(this,arguments),e!==world&&this.pinPopUp(),this.updatePopUpShadow()},window.PopUpWdgt.prototype.updatePopUpShadow=function(){return this.isPopUpPinned()?this.parent===world?this.addShadow():this.removeShadow():this.addShadow()},window.PopUpWdgt.prototype.addShadow=function(e=new Point(5,5),t=.2,n){if(!this.isPopUpPinned()||this.parent!==world)return PopUpWdgt.__super__.addShadow.call(this,e,t);PopUpWdgt.__super__.addShadow.call(this,new Point(3,3),.3)},window.PopUpWdgt.prototype.popUpCenteredAtHand=function(e){return this.popUp(e.hand.position().subtract(this.extent().floorDivideBy(2)),e)},window.PopUpWdgt.prototype.popUpCenteredInWorld=function(e){return this.popUp(e.center().subtract(this.extent().floorDivideBy(2)),e)},window.PopUpWdgt.prototype.popUpAtHand=function(){return this.popUp(world.hand.position(),world)},window.PopUpWdgt.prototype.popUp=function(e,t){return this.silentFullRawMoveTo(e),t.add(this),this.fullRawMoveWithin(world),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.addShadow(),this.fullChanged()},window.PopUpWdgt.prototype.destroy=function(){return PopUpWdgt.__super__.destroy.call(this),world.openPopUps.delete(this)},window.PopUpWdgt.prototype.close=function(){return PopUpWdgt.__super__.close.call(this),world.openPopUps.delete(this)},window.PopUpWdgt.instances=new Set,window.ProfilerData=function(){window.ProfilerData.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ProfilerData,"name",{value:"ProfilerData"}),window.ProfilerData.__super__=Object.prototype,window.ProfilerData.prototype.nothing=nil,window.ProfilerData.instances=new Set,window.MenuMorph=function(e,t=!1,n,o=!0,i=!0,r=nil,l=nil,a=nil){this.morphOpeningThePopUp=e,this.isListContents=t,this.target=n,this.killThisPopUpIfClickOutsideDescendants=o,this.killThisPopUpIfClickOnDescendantsTriggers=i,this.title=r,this.environment=l,this.fontSize=a,"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.isListContents||this.killThisPopUpIfClickOutsideDescendants&&this.onClickOutsideMeOrAnyOfMyChildren("close"),MenuMorph.__super__.constructor.call(this,this.morphOpeningThePopUp,this.killThisPopUpIfClickOutsideDescendants,this.killThisPopUpIfClickOnDescendantsTriggers),this.isLockingToPanels=!1,this.appearance=new MenuAppearance(this),this.strokeColor=WorldMorph.preferencesAndSettings.menuStrokeColor,this.isListContents&&(world.freshlyCreatedPopUps.delete(this),world.openPopUps.delete(this)),this.isListContents||this.title&&(this.createLabel(),this.silentAdd(this.label)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.MenuMorph,"name",{value:"MenuMorph"}),window.MenuMorph.__super__=window.PopUpWdgt.prototype,window.MenuMorph=extend(window.MenuMorph,window.PopUpWdgt),window.MenuMorph.prototype.target=nil,window.MenuMorph.prototype.title=nil,window.MenuMorph.prototype.environment=nil,window.MenuMorph.prototype.fontSize=nil,window.MenuMorph.prototype.label=nil,window.MenuMorph.prototype.isListContents=!1,window.MenuMorph.prototype.colloquialName=function(){return this.title?'"'+this.title+'" menu':"menu"},window.MenuMorph.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return this.layoutSpecDetails=new WindowContentLayoutSpec(PreferredSize.THIS_ONE_I_HAVE_NOW,PreferredSize.THIS_ONE_I_HAVE_NOW,0),this.layoutSpecDetails.canSetHeightFreely=!1},window.MenuMorph.prototype.createLine=function(e=1){var t;return(t=new RectangleMorph).setMinimumExtent(new Point(5,1)),t.color=new Color(230,230,230),t.rawSetHeight(e+2),t},window.MenuMorph.prototype.addLine=function(e){var t;return t=this.createLine(e),this.silentAdd(t)},window.MenuMorph.prototype.prependLine=function(e){var t;return t=this.createLine(e),this.silentAdd(t,nil,0)},window.MenuMorph.prototype.createLabel=function(){return this.label=new MenuHeader(this.title)},window.MenuMorph.prototype.createMenuItem=function(e,t=!0,n,o,i,r,l=!1,a=!1,s,d,h,p=!1){var c;return c=new MenuItemMorph(t,n,o,e||"close",this.fontSize||WorldMorph.preferencesAndSettings.menuFontSize,WorldMorph.preferencesAndSettings.menuFontName,!1,this.target,this.environment,i,r,l,a,s,d,h,p),null==this.environment&&(c.dataSourceMorphForTarget=c,c.morphEnv=this.target),c},window.MenuMorph.prototype.removeMenuItem=function(e){var t;if(null!=(t=this.firstChildSuchThat((function(t){return null!=t.label&&t.label.text===e}))))return t.fullDestroy()},window.MenuMorph.prototype.removeConsecutiveLines=function(){var e,t,n,o,i,r;for(e=!1,r=[],t=0,o=(i=this.children.slice()).length;t<o;t++)n=i[t],e&&n instanceof RectangleMorph&&n.fullDestroy(),n instanceof RectangleMorph?e=!0:r.push(e=!1);return r},window.MenuMorph.prototype.addMenuItem=function(e,t,n,o,i,r,l,a,s,d,h,p){var c;return c=this.createMenuItem(e,t,n,o,i,r,l,a,s,d,h,p),this.silentAdd(c)},window.MenuMorph.prototype.prependMenuItem=function(e,t,n,o,i,r,l,a,s,d,h,p){var c;return c=this.createMenuItem(e,t,n,o,i,r,l,a,s,d,h,p),this.silentAdd(c,nil,0)},window.MenuMorph.prototype.reLayout=function(){var e,t,n,o,i,r,l;for(MenuMorph.__super__.reLayout.call(this),trackChanges.push(!1),this.isListContents||(this.cornerRadius=WorldMorph.preferencesAndSettings.isFlat?0:5),this.color=new Color(238,238,238),this.silentRawSetExtent(new Point(0,0)),l=this.top(),r=this.left()+2,this.notifyChildrenThatParentHasReLayouted(),this.isListContents||(this.title?(this.label.fullRawMoveTo(this.position().add(2)),l=this.label.bottom()):l=this.top()),l+=1,this.removeShadow(),t=0,o=(i=this.children).length;t<o;t++)(n=i[t])!==this.label&&(n.fullRawMoveTo(new Point(r,l)),l+=n.height());return this.adjustWidthsOfMenuEntries(),e=this.fullBounds(),this.silentRawSetExtent(e.extent().add(2)),trackChanges.pop(),this.fullChanged()},window.MenuMorph.prototype.maxWidthOfMenuEntries=function(){var e;return e=0,this.children.forEach((function(t){return t instanceof MenuItemMorph?(t.children[0],e=Math.max(e,t.children[0].width()+8)):t instanceof StringFieldMorph||t instanceof ColorPickerMorph||t instanceof SliderMorph?e=Math.max(e,t.width()):void 0})),this.label&&(e=Math.max(e,this.label.width())),e},window.MenuMorph.prototype.adjustWidthsOfMenuEntries=function(){var e;return e=this.maxWidthOfMenuEntries(),this.children.forEach(t=>(trackChanges.push(!1),t.rawSetWidth(e),trackChanges.pop()))},window.MenuMorph.prototype.unselectAllItems=function(){return this.children.forEach((function(e){if(e instanceof MenuItemMorph)return e.state=e.STATE_NORMAL})),this.changed()},window.MenuMorph.instances=new Set,window.PromptMorph=function(e,t,n,o,i,r,l,a,s){var d,h;this.msg=t,this.target=n,this.callback=o,this.defaultContents=i,this.intendedWidth=r,this.floorNum=l,this.ceilingNum=a,this.isRounded=s,this.ceilingNum&&(d=!0),this.tempPromptEntryField=new StringFieldMorph(this.defaultContents||"",this.intendedWidth||100,WorldMorph.preferencesAndSettings.prompterFontSize,WorldMorph.preferencesAndSettings.prompterFontName,!1,!1,d),PromptMorph.__super__.constructor.call(this,e,!1,this.target,!0,!0,this.msg||"",this.tempPromptEntryField),this.silentAdd(this.tempPromptEntryField),(this.ceilingNum||WorldMorph.preferencesAndSettings.useSliderForInput)&&((h=new SliderMorph(this.floorNum||0,this.ceilingNum,parseFloat(this.defaultContents),Math.floor((this.ceilingNum-this.floorNum)/4))).alpha=1,h.color=new Color(225,225,225),h.button.color=new Color(60,60,60),h.button.highlightColor=h.button.color.copy(),h.button.highlightColor.b+=100,h.button.pressColor=h.button.color.copy(),h.button.pressColor.b+=150,h.silentRawSetHeight(WorldMorph.preferencesAndSettings.prompterSliderSize),h.target=this,h.argumentToAction=this,h.action="reactToSliderAction",this.silentAdd(h)),this.addLine(2),this.addMenuItem("Ok",!0,this.target,this.callback),this.addMenuItem("Close",!0,this,"close"),this.reLayout(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PromptMorph,"name",{value:"PromptMorph"}),window.PromptMorph.__super__=window.MenuMorph.prototype,window.PromptMorph=extend(window.PromptMorph,window.MenuMorph),window.PromptMorph.prototype.tempPromptEntryField=nil,window.PromptMorph.prototype.reactToSliderAction=function(e){return this.tempPromptEntryField.changed(),this.tempPromptEntryField.text.text=Math.round(e).toString(),this.tempPromptEntryField.text.reLayout(),this.tempPromptEntryField.text.changed(),this.tempPromptEntryField.text.edit()},window.PromptMorph.prototype.reLayout=function(){return PromptMorph.__super__.reLayout.call(this),this.buildSubmorphs(),this.notifyChildrenThatParentHasReLayouted()},window.PromptMorph.prototype.buildSubmorphs=function(){},window.PromptMorph.prototype.iHaveBeenAddedTo=function(e,t){},window.PromptMorph.instances=new Set,window.RadioButtonsHolderMorph=function(){RadioButtonsHolderMorph.__super__.constructor.call(this),this.appearance=new RectangularAppearance(this),this.setColor(new Color(230,230,230)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.RadioButtonsHolderMorph,"name",{value:"RadioButtonsHolderMorph"}),window.RadioButtonsHolderMorph.__super__=window.Widget.prototype,window.RadioButtonsHolderMorph=extend(window.RadioButtonsHolderMorph,window.Widget),window.RadioButtonsHolderMorph.prototype.wantsButtonsToBehaveLikeRadioButtons=!0,window.RadioButtonsHolderMorph.prototype.allowsRadioButtonsToBeAllDisabled=!0,window.RadioButtonsHolderMorph.prototype.mouseClickLeft=function(e){var t,n,o,i,r;for(i=[],t=0,n=(o=this.children).length;t<n;t++)(r=o[t])!==e?i.push("function"==typeof r.resetSwitchButton?r.resetSwitchButton():void 0):i.push(void 0);return i},window.RadioButtonsHolderMorph.prototype.whichButtonSelected=function(){return this.firstChildSuchThat(e=>e.isSelected())},window.RadioButtonsHolderMorph.prototype.unselectAll=function(){var e,t,n,o;if(this.allowsRadioButtonsToBeAllDisabled)for(e=0,t=(n=this.children).length;e<t;e++)(o=n[e]).isSelected()&&o.toggle();return null},window.RadioButtonsHolderMorph.instances=new Set,window.SaveShortcutPromptWdgt=function(e,t,n,o=100,i){this.target=t,this.defaultContents=n,this.intendedWidth=o,this.wdgtWhereReferenceWillGo=i,this.defaultContents||(this.defaultContents=world.getNextUntitledShortcutName()),this.tempPromptEntryField=new StringFieldWdgt2(this.defaultContents,150,WorldMorph.preferencesAndSettings.prompterFontSize,WorldMorph.preferencesAndSettings.prompterFontName,!1,!1,!1),SaveShortcutPromptWdgt.__super__.constructor.call(this,e,!1,this.target,!0,!0,this.msg,this.tempPromptEntryField),this.silentAdd(this.tempPromptEntryField),this.addMenuItem("Don't save",!0,this.target,"destroy"),this.addMenuItem("Cancel",!0,this,"close"),this.addMenuItem("Ok",!0,this,"createReferenceAndClose"),this.reLayout(),this.rawSetWidth(150),this.tempPromptEntryField.text.edit(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SaveShortcutPromptWdgt,"name",{value:"SaveShortcutPromptWdgt"}),window.SaveShortcutPromptWdgt.__super__=window.MenuMorph.prototype,window.SaveShortcutPromptWdgt=extend(window.SaveShortcutPromptWdgt,window.MenuMorph),window.SaveShortcutPromptWdgt.prototype.msg=" save as...         ",window.SaveShortcutPromptWdgt.prototype.tempPromptEntryField=nil,window.SaveShortcutPromptWdgt.prototype.reLayout=function(){return SaveShortcutPromptWdgt.__super__.reLayout.call(this),this.buildSubmorphs(),this.notifyChildrenThatParentHasReLayouted()},window.SaveShortcutPromptWdgt.prototype.buildSubmorphs=function(){},window.SaveShortcutPromptWdgt.prototype.iHaveBeenAddedTo=function(e,t){},window.SaveShortcutPromptWdgt.prototype.createReferenceAndClose=function(){return this.target.createReferenceAndClose(this.tempPromptEntryField.text.text,this.wdgtWhereReferenceWillGo),this.close()},window.SaveShortcutPromptWdgt.instances=new Set,window.ScriptWdgt=function(e=""){this.savedScript=e,ScriptWdgt.__super__.constructor.call(this,new Point(200,400)),this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ScriptWdgt,"name",{value:"ScriptWdgt"}),window.ScriptWdgt.__super__=window.Widget.prototype,window.ScriptWdgt=extend(window.ScriptWdgt,window.Widget),window.ScriptWdgt.prototype.tempPromptEntryField=nil,window.ScriptWdgt.prototype.textMorph=nil,window.ScriptWdgt.prototype.runItButton=nil,window.ScriptWdgt.prototype.saveButton=nil,window.ScriptWdgt.prototype.saveTextWdgt=nil,window.ScriptWdgt.prototype.savedScript=nil,window.ScriptWdgt.prototype.functionFromCompiledCode=nil,window.ScriptWdgt.prototype.externalPadding=0,window.ScriptWdgt.prototype.internalPadding=5,window.ScriptWdgt.prototype.colloquialName=function(){return"script"},window.ScriptWdgt.prototype.representativeIcon=function(){return new ScriptIconWdgt},window.ScriptWdgt.prototype.closeFromContainerWindow=function(e){return world.anyReferenceToWdgt(e)?e.close():new SaveShortcutPromptWdgt(this,e).popUpAtHand()},window.ScriptWdgt.prototype.buildAndConnectChildren=function(){return"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.tempPromptEntryField=new SimplePlainTextScrollPanelWdgt(this.savedScript,!1,5),this.tempPromptEntryField.disableDrops(),this.tempPromptEntryField.contents.disableDrops(),this.tempPromptEntryField.color=new Color(255,255,255),this.tempPromptEntryField.addModifiedContentIndicator(),this.tempPromptEntryField.widgetToBeNotifiedOfTextModificationChange=this,this.textMorph=this.tempPromptEntryField.textWdgt,this.textMorph.backgroundColor=new Color(0,0,0,0),this.textMorph.setFontName(nil,nil,this.textMorph.monoFontStack),this.textMorph.isEditable=!0,this.textMorph.enableSelecting(),this.add(this.tempPromptEntryField),this.runItButton=new SimpleButtonMorph(!0,this,"tryIt","try it"),this.add(this.runItButton),this.saveTextWdgt=new StringMorph2("save + close",WorldMorph.preferencesAndSettings.textInButtonsFontSize),this.saveTextWdgt.alignCenter(),this.saveButton=new SimpleButtonMorph(!0,this,"saveScriptAndClose",this.saveTextWdgt),this.add(this.saveButton),this.tempPromptEntryField.checkIfTextContentWasModifiedFromTextAtStart(),this.invalidateLayout()},window.ScriptWdgt.prototype.saveScript=function(){var e;return this.savedScript=this.textMorph.text,e=compileFGCode(this.savedScript,!0),this.functionFromCompiledCode=new Function(e),this.textMorph.considerCurrentTextAsReferenceText(),this.tempPromptEntryField.checkIfTextContentWasModifiedFromTextAtStart()},window.ScriptWdgt.prototype.saveScriptAndClose=function(){return this.saveScript(),this.closeFromContainerWindow(this.parent)},window.ScriptWdgt.prototype.doAll=function(){var e;return null!=(e=this.functionFromCompiledCode)?e.call(world):void 0},window.ScriptWdgt.prototype.tryIt=function(){return world.evaluateString(this.textMorph.text)},window.ScriptWdgt.prototype.textContentModified=function(){},window.ScriptWdgt.prototype.textContentUnmodified=function(){},window.ScriptWdgt.prototype.doLayout=function(e){var t,n,o,i,r;return this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(ScriptWdgt.__super__.doLayout.apply(this,arguments),trackChanges.push(!1),i=this.height()-2*this.externalPadding-this.internalPadding-15,o=this.top()+this.externalPadding+i,r=this.width()-2*this.externalPadding,n=Math.round((r-2*this.internalPadding-WorldMorph.preferencesAndSettings.handleSize)/2),this.tempPromptEntryField.parent===this&&(this.tempPromptEntryField.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.top()+this.externalPadding)),this.tempPromptEntryField.rawSetExtent(new Point(r,i))),this.runItButton.parent===this&&(t=(t=new Rectangle(new Point(this.left()+this.externalPadding,o+this.internalPadding))).setBoundsWidthAndHeight(n,15),this.runItButton.doLayout(t)),this.saveButton.parent===this&&(t=(t=new Rectangle(new Point(t.right()+this.internalPadding,o+this.internalPadding))).setBoundsWidthAndHeight(n,15),this.saveButton.doLayout(t)),trackChanges.pop(),this.fullChanged(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted())},window.ScriptWdgt.instances=new Set,window.ShadowInfo=function(e=new Point(7,7),t=.2){this.offset=e,this.alpha=t,this.offset.debugIfFloats(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ShadowInfo,"name",{value:"ShadowInfo"}),window.ShadowInfo.__super__=Object.prototype,window.ShadowInfo.augmentWith(window.DeepCopierMixin,"ShadowInfo"),window.ShadowInfo.prototype.offset=nil,window.ShadowInfo.prototype.alpha=0,window.ShadowInfo.noShadow=function(){return new ShadowInfo(new Point(0,0),0)},window.ShadowInfo.instances=new Set,window.SimpleDocumentPanelWdgt=function(){window.SimpleDocumentPanelWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleDocumentPanelWdgt,"name",{value:"SimpleDocumentPanelWdgt"}),window.SimpleDocumentPanelWdgt.__super__=window.SimpleVerticalStackPanelWdgt.prototype,window.SimpleDocumentPanelWdgt=extend(window.SimpleDocumentPanelWdgt,window.SimpleVerticalStackPanelWdgt),window.SimpleDocumentPanelWdgt.prototype.colloquialName=function(){return"document"},window.SimpleDocumentPanelWdgt.instances=new Set,window.SimpleVerticalStackScrollPanelWdgt=function(e=!0){var t,n;this.isTextLineWrapping=e,t=new SimpleVerticalStackPanelWdgt,this.isTextLineWrapping||(t.constrainContentWidth=!1),t.tight=!1,t.isLockingToPanels=!0,SimpleVerticalStackScrollPanelWdgt.__super__.constructor.call(this,t),this.disableDrops(),(n=new SimplePlainTextWdgt("A small string\n\n\nhere another.",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).isEditable=!0,n.enableSelecting(),this.setContents(n,5),this.setColor(new Color(249,249,249)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleVerticalStackScrollPanelWdgt,"name",{value:"SimpleVerticalStackScrollPanelWdgt"}),window.SimpleVerticalStackScrollPanelWdgt.__super__=window.ScrollPanelWdgt.prototype,window.SimpleVerticalStackScrollPanelWdgt=extend(window.SimpleVerticalStackScrollPanelWdgt,window.ScrollPanelWdgt),window.SimpleVerticalStackScrollPanelWdgt.prototype.colloquialName=function(){return"stack"},window.SimpleVerticalStackScrollPanelWdgt.prototype.addMorphSpecificMenuEntries=function(e,t){var n;return SimpleVerticalStackScrollPanelWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),t.removeMenuItem("move all inside"),null!=this.contents&&(n=this.childrenNotHandlesNorCarets(this.contents)),null!=n&&n.length>0&&(t.addLine(),this.dragsDropsAndEditingEnabled?t.addMenuItem("disable editing",!0,this,"disableDragsDropsAndEditing","prevents dragging content in and out"):t.addMenuItem("enable editing",!0,this,"enableDragsDropsAndEditing","lets you drag content in and out")),t.removeConsecutiveLines()},window.SimpleVerticalStackScrollPanelWdgt.prototype.enableDragsDropsAndEditing=function(e){var t;if(null==e&&(e=this),!this.dragsDropsAndEditingEnabled)return null!=(t=this.parent)&&"function"==typeof t.makePencilYellow&&t.makePencilYellow(),null!=this.parent&&this.parent!==e&&this.parent instanceof SimpleDocumentWdgt?this.parent.enableDragsDropsAndEditing(this):SimpleVerticalStackScrollPanelWdgt.__super__.enableDragsDropsAndEditing.call(this,this)},window.SimpleVerticalStackScrollPanelWdgt.prototype.disableDragsDropsAndEditing=function(e){var t;if(null==e&&(e=this),this.dragsDropsAndEditingEnabled)return null!=(t=this.parent)&&"function"==typeof t.makePencilClear&&t.makePencilClear(),null!=this.parent&&this.parent!==e&&this.parent instanceof SimpleDocumentWdgt?this.parent.disableDragsDropsAndEditing(this):SimpleVerticalStackScrollPanelWdgt.__super__.disableDragsDropsAndEditing.call(this,this)},window.SimpleVerticalStackScrollPanelWdgt.instances=new Set,window.SimpleDocumentScrollPanelWdgt=function(){window.SimpleDocumentScrollPanelWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleDocumentScrollPanelWdgt,"name",{value:"SimpleDocumentScrollPanelWdgt"}),window.SimpleDocumentScrollPanelWdgt.__super__=window.SimpleVerticalStackScrollPanelWdgt.prototype,window.SimpleDocumentScrollPanelWdgt=extend(window.SimpleDocumentScrollPanelWdgt,window.SimpleVerticalStackScrollPanelWdgt),window.SimpleDocumentScrollPanelWdgt.prototype.colloquialName=function(){return"document"},window.SimpleDocumentScrollPanelWdgt.prototype.getNormalParagraph=function(e){var t;return(t=new SimplePlainTextWdgt(e,nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).isEditable=!0,t.enableSelecting(),t},window.SimpleDocumentScrollPanelWdgt.prototype.makeAllContentIntoTemplates=function(){var e,t,n,o,i;for(o=[],t=0,n=(e=this.childrenNotHandlesNorCarets(this.contents)).length;t<n;t++)i=e[t],o.push(i.isTemplate=!0);return o},window.SimpleDocumentScrollPanelWdgt.prototype.addNormalParagraph=function(e){var t;return t=this.getNormalParagraph(e),this.add(t),t},window.SimpleDocumentScrollPanelWdgt.prototype.addDivider=function(){var e;return(e=this.getNormalParagraph("")).toggleHeaderLine(),this.add(e),e},window.SimpleDocumentScrollPanelWdgt.prototype.addIndentedText=function(e){var t;return(t=this.getNormalParagraph(e)).rawSetExtent(new Point(Math.round(92*this.width()/100),335)),this.add(t),t.layoutSpecDetails.setAlignmentToRight(),t},window.SimpleDocumentScrollPanelWdgt.prototype.addBulletPoint=function(e){return this.addIndentedText("• "+e)},window.SimpleDocumentScrollPanelWdgt.prototype.addCodeBlock=function(e){var t;return(t=this.addIndentedText("a code block with\n  some example\n    code in here")).setFontName(nil,nil,t.monoFontStack),this.add(t),t},window.SimpleDocumentScrollPanelWdgt.prototype.addSpacer=function(e=1){var t,n;return t=function(e,t){var n;for(n="";t>0;)n+=e,t--;return n},(n=this.getNormalParagraph(t("\n",e-1))).isEditable=!0,n.enableSelecting(),this.add(n),n},window.SimpleDocumentScrollPanelWdgt.instances=new Set,window.SimpleDropletAppearance=function(){window.SimpleDropletAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleDropletAppearance,"name",{value:"SimpleDropletAppearance"}),window.SimpleDropletAppearance.__super__=window.RectangularAppearance.prototype,window.SimpleDropletAppearance=extend(window.SimpleDropletAppearance,window.RectangularAppearance),window.SimpleDropletAppearance.prototype.drawAdditionalPartsOnBaseShape=function(e,t,n,o,i,r,l,a){var s,d,h,p,c,u,w,g,T;if(null==n)return d=this.morph.height(),T=this.morph.width(),g=Math.min(T/2,d/2),c=(h=(h=(h=this.morph.bottomLeft()).subtract(new Point(0,Math.ceil(d/2)))).add(new Point((T-g)/2,0))).add(new Point(Math.ceil(g/15),0)),u=h.add(new Point(g-Math.ceil(g/15),0)),w=h.add(new Point(Math.ceil(g/2),-Math.ceil(g/3))),p=h.add(new Point(Math.ceil(g/2),Math.ceil(g/3))),s=new Color(255,255,255),o.save(),o.lineWidth=1,o.lineCap="round",o.strokeStyle=s.toString(),e||o.clipToRectangle(i,r,l,a),t||o.scale(ceilPixelRatio,ceilPixelRatio),o.beginPath(),o.moveTo(.5+c.x,.5+c.y),o.lineTo(.5+u.x,.5+u.y),o.moveTo(.5+w.x,.5+w.y),o.lineTo(.5+p.x,.5+p.y),o.closePath(),o.stroke(),o.restore()},window.SimpleDropletAppearance.instances=new Set,window.SimpleLinkWdgt=function(e="insert link caption here",t="http://www.google.com"){this.descriptionString=e,this.linkString=t,SimpleLinkWdgt.__super__.constructor.call(this,new Point(405,50)),this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleLinkWdgt,"name",{value:"SimpleLinkWdgt"}),window.SimpleLinkWdgt.__super__=window.Widget.prototype,window.SimpleLinkWdgt=extend(window.SimpleLinkWdgt,window.Widget),window.SimpleLinkWdgt.prototype.tempPromptEntryField=nil,window.SimpleLinkWdgt.prototype.textMorph=nil,window.SimpleLinkWdgt.prototype.outputTextArea=nil,window.SimpleLinkWdgt.prototype.outputTextAreaText=nil,window.SimpleLinkWdgt.prototype.externalLinkIcon=nil,window.SimpleLinkWdgt.prototype.externalPadding=5,window.SimpleLinkWdgt.prototype.internalPadding=5,window.SimpleLinkWdgt.prototype.descriptionString=nil,window.SimpleLinkWdgt.prototype.linkString=nil,window.SimpleLinkWdgt.prototype.colloquialName=function(){return"Simple link"},window.SimpleLinkWdgt.prototype.buildAndConnectChildren=function(){return"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.tempPromptEntryField=new StringMorph2(this.descriptionString),this.tempPromptEntryField.isEditable=!0,this.tempPromptEntryField.fittingSpecWhenBoundsTooLarge=FittingSpecTextInLargerBounds.SCALEUP,this.tempPromptEntryField.fittingSpecWhenBoundsTooSmall=FittingSpecTextInSmallerBounds.SCALEDOWN,this.tempPromptEntryField.alignMiddle(),this.tempPromptEntryField.alignRight(),this.add(this.tempPromptEntryField),this.outputTextArea=new StringMorph2(this.linkString),this.outputTextArea.isEditable=!0,this.outputTextArea.fittingSpecWhenBoundsTooLarge=FittingSpecTextInLargerBounds.SCALEUP,this.outputTextArea.fittingSpecWhenBoundsTooSmall=FittingSpecTextInSmallerBounds.SCALEDOWN,this.outputTextArea.alignMiddle(),this.outputTextArea.alignRight(),this.add(this.outputTextArea),this.createLinkIcon(),this.add(this.externalLinkIcon),this.invalidateLayout()},window.SimpleLinkWdgt.prototype.createLinkIcon=function(){return this.externalLinkIcon=new ExternalLinkButtonWdgt},window.SimpleLinkWdgt.prototype.rawSetExtent=function(e){return SimpleLinkWdgt.__super__.rawSetExtent.apply(this,arguments),this.invalidateLayout()},window.SimpleLinkWdgt.prototype.doLayout=function(e){var t,n,o,i;return this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(SimpleLinkWdgt.__super__.doLayout.apply(this,arguments),trackChanges.push(!1),i=(t=this.height()-2*this.externalPadding-this.internalPadding)-(o=Math.round(50*t/100))-this.externalPadding,n=Math.min(this.width(),this.height()-2*this.externalPadding),this.tempPromptEntryField.parent===this&&(this.tempPromptEntryField.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.top()+this.externalPadding)),this.tempPromptEntryField.rawSetExtent(new Point(this.width()-2*this.externalPadding-this.internalPadding-n,o))),this.outputTextArea.parent===this&&(this.outputTextArea.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.tempPromptEntryField.bottom()+this.internalPadding)),this.outputTextArea.rawSetExtent(new Point(this.width()-2*this.externalPadding-this.internalPadding-n,i))),this.externalLinkIcon.parent===this&&(this.externalLinkIcon.fullRawMoveTo(new Point(this.right()-this.externalPadding-n,this.top()+this.externalPadding)),this.externalLinkIcon.rawSetExtent(new Point(n,n))),trackChanges.pop(),this.fullChanged(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted())},window.SimpleLinkWdgt.instances=new Set,window.SimplePlainTextPanelWdgt=function(e,t,n){var o;SimplePlainTextPanelWdgt.__super__.constructor.call(this),this.takesOverAndCoalescesChildrensMenus=!0,this.disableDrops(),this.disableDrops(),this.isTextLineWrapping=t,this.color=new Color(255,255,255),(o=new SimplePlainTextWdgt(e,nil,nil,nil,nil,nil,new Color(230,230,130),1)).isEditable=!0,t||(o.maxTextWidth=0),o.enableSelecting(),this.add(o),o.lockToPanels(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimplePlainTextPanelWdgt,"name",{value:"SimplePlainTextPanelWdgt"}),window.SimplePlainTextPanelWdgt.__super__=window.PanelWdgt.prototype,window.SimplePlainTextPanelWdgt=extend(window.SimplePlainTextPanelWdgt,window.PanelWdgt),window.SimplePlainTextPanelWdgt.instances=new Set,window.SimplePlainTextWdgt=function(e="SimplePlainText",t=12,n=this.justArialFontStack,o=!1,i=!1,r=new Color(0,0,0),l=nil,a=nil){this.text=e,this.originallySetFontSize=t,this.fontName=n,this.isBold=o,this.isItalic=i,this.color=r,this.backgroundColor=l,this.backgroundTransparency=a,SimplePlainTextWdgt.__super__.constructor.apply(this,arguments),this.silentRawSetBounds(new Rectangle(0,0,400,40)),this.fittingSpecWhenBoundsTooLarge=FittingSpecTextInLargerBounds.FLOAT,this.fittingSpecWhenBoundsTooSmall=FittingSpecTextInSmallerBounds.SCALEDOWN,this.maxTextWidth=!0,this.reLayout(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimplePlainTextWdgt,"name",{value:"SimplePlainTextWdgt"}),window.SimplePlainTextWdgt.__super__=window.TextMorph2.prototype,window.SimplePlainTextWdgt=extend(window.SimplePlainTextWdgt,window.TextMorph2),window.SimplePlainTextWdgt.augmentWith(window.ControllerMixin,"SimplePlainTextWdgt"),window.SimplePlainTextWdgt.prototype.colloquialName=function(){return"text"},window.SimplePlainTextWdgt.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return SimplePlainTextWdgt.__super__.initialiseDefaultWindowContentLayoutSpec.apply(this,arguments),this.layoutSpecDetails.canSetHeightFreely=!1},window.SimplePlainTextWdgt.prototype.openTargetPropertySelector=function(e,t,n){var o,i,r,l,a,s;for([a,o]=n.stringSetters(),l=new MenuMorph(this,!1,this,!0,!0,"choose target property:"),i=r=0,s=a.length;0<=s?r<s:r>s;i=0<=s?++r:--r)l.addMenuItem(a[i],!0,this,"setTargetAndActionWithOnesPickedFromMenu",nil,nil,nil,nil,nil,n,o[i]);return 0===a.length&&(l=new MenuMorph(this,!1,this,!0,!0,"no target properties available")),l.popUpAtHand()},window.SimplePlainTextWdgt.prototype.stringSetters=function(e,t){return[e,t]=SimplePlainTextWdgt.__super__.stringSetters.call(this,e,t),e.push("bang!","text"),t.push("bang","setText"),this.deduplicateSettersAndSortByMenuEntryString(e,t)},window.SimplePlainTextWdgt.prototype.addMorphSpecificMenuEntries=function(e,t){return SimplePlainTextWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),t.removeMenuItem("soft wrap"),t.removeMenuItem("soft wrap".tick()),t.removeMenuItem("soft wrap"),t.removeMenuItem("←☓→ don't expand to fill"),t.removeMenuItem("←→ expand to fill"),t.removeMenuItem("→← shrink to fit"),t.removeMenuItem("→⋯← crop to fit"),t.removeMenuItem("header line"),t.removeMenuItem("no header line"),t.removeMenuItem("↑ align top"),t.removeMenuItem("⍿ align middle"),t.removeMenuItem("↓ align bottom"),t.addLine(),world.isIndexPage?t.addMenuItem("connect to ➜",!0,this,"openTargetSelector","connect to\nanother widget"):t.addMenuItem("set target",!0,this,"openTargetSelector","choose another morph\nwhose numerical property\n will be controlled by this one"),this.amIDirectlyInsideScrollPanelWdgt()&&1===this.parent.children.filter((function(e){return!(e instanceof CaretMorph)})).length&&(t.addLine(),this.parent.parent.isTextLineWrapping?t.addMenuItem("☒ soft wrap",!0,this,"softWrapOff"):t.addMenuItem("☐ soft wrap",!0,this,"softWrapOn")),t.removeConsecutiveLines()},window.SimplePlainTextWdgt.prototype.softWrapOn=function(){return this.parent.parent.isTextLineWrapping=!0,this.maxTextWidth=!0,this.parent.fullRawMoveTo(this.parent.parent.position()),this.parent.rawSetExtent(this.parent.parent.extent()),this.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.SimplePlainTextWdgt.prototype.softWrapOff=function(){return this.parent.parent.isTextLineWrapping=!1,this.maxTextWidth=nil,this.reLayout(),this.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.SimplePlainTextWdgt.prototype.bang=function(e,t,n,o){if(o||n!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==n?getRandomInt(-2e4,2e4):n,this.updateTarget()},window.SimplePlainTextWdgt.prototype.setText=function(e,t,n,o){if(o||n!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==n?getRandomInt(-2e4,2e4):n,SimplePlainTextWdgt.__super__.setText.call(this,e,t,n,!0),this.reLayout(),this.refreshScrollPanelWdgtOrVerticalStackIfIamInIt(),this.updateTarget()},window.SimplePlainTextWdgt.prototype.updateTarget=function(){this.action&&""!==this.action&&this.target[this.action].call(this.target,this.text,nil,this.connectionsCalculationToken)},window.SimplePlainTextWdgt.prototype.reactToTargetConnection=function(){return this.updateTarget()},window.SimplePlainTextWdgt.prototype.toggleShowBlanks=function(){return SimplePlainTextWdgt.__super__.toggleShowBlanks.apply(this,arguments),this.reLayout(),this.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.SimplePlainTextWdgt.prototype.toggleWeight=function(){return SimplePlainTextWdgt.__super__.toggleWeight.apply(this,arguments),this.reLayout(),this.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.SimplePlainTextWdgt.prototype.toggleItalic=function(){return SimplePlainTextWdgt.__super__.toggleItalic.apply(this,arguments),this.reLayout(),this.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.SimplePlainTextWdgt.prototype.toggleIsPassword=function(){return SimplePlainTextWdgt.__super__.toggleIsPassword.apply(this,arguments),this.reLayout(),this.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.SimplePlainTextWdgt.prototype.rawSetExtent=function(e){return SimplePlainTextWdgt.__super__.rawSetExtent.apply(this,arguments),this.reLayout()},window.SimplePlainTextWdgt.prototype.setFontSize=function(e,t){return SimplePlainTextWdgt.__super__.setFontSize.apply(this,arguments),this.reLayout(),this.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.SimplePlainTextWdgt.prototype.setFontName=function(e,t,n){return SimplePlainTextWdgt.__super__.setFontName.apply(this,arguments),this.reLayout(),this.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.SimplePlainTextWdgt.prototype.blendInWithPanelColor=function(){if(this.backgroundColor.eq(WorldMorph.preferencesAndSettings.editableItemBackgroundColor))return this.setBackgroundColor(new Color(249,249,249))},window.SimplePlainTextWdgt.prototype.contrastOutFromPanelColor=function(){if(this.backgroundColor.eq(new Color(249,249,249)))return this.setBackgroundColor(WorldMorph.preferencesAndSettings.editableItemBackgroundColor)},window.SimplePlainTextWdgt.prototype.reLayout=function(){var e,t,n;return SimplePlainTextWdgt.__super__.reLayout.call(this),null!=this.maxTextWidth&&0!==this.maxTextWidth?(this.softWrap=!0,[this.wrappedLines,this.wrappedLineSlots,this.widthOfPossiblyCroppedText,this.heightOfPossiblyCroppedText]=this.breakTextIntoLines(this.text,this.originallySetFontSize,this.extent()),n=this.width()):(this.softWrap=!1,t=new Point(1e7,1e7),[this.wrappedLines,this.wrappedLineSlots,this.widthOfPossiblyCroppedText,this.heightOfPossiblyCroppedText]=this.breakTextIntoLines(this.text,this.originallySetFontSize,t),n=this.widthOfPossiblyCroppedText),e=this.wrappedLines.length*Math.ceil(fontHeight(this.originallySetFontSize)),this.silentRawSetExtent(new Point(n,e)),this.changed(),this.notifyChildrenThatParentHasReLayouted()},window.SimplePlainTextWdgt.instances=new Set,window.SimpleVideoLinkWdgt=function(e,t="https://goo.gl/9xZrmG"){this.descriptionString=e,this.linkString=t,SimpleVideoLinkWdgt.__super__.constructor.call(this,this.descriptionString,this.linkString),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleVideoLinkWdgt,"name",{value:"SimpleVideoLinkWdgt"}),window.SimpleVideoLinkWdgt.__super__=window.SimpleLinkWdgt.prototype,window.SimpleVideoLinkWdgt=extend(window.SimpleVideoLinkWdgt,window.SimpleLinkWdgt),window.SimpleVideoLinkWdgt.prototype.createLinkIcon=function(){return this.externalLinkIcon=new VideoPlayButtonWdgt},window.SimpleVideoLinkWdgt.instances=new Set,window.SpeechBubbleWdgt=function(e="hello"){this.contents=e,SpeechBubbleWdgt.__super__.constructor.call(this),this.color=WorldMorph.preferencesAndSettings.menuBackgroundColor,this.padding=0,this.strokeColor=WorldMorph.preferencesAndSettings.menuStrokeColor,this.cornerRadius=6,this.appearance=new BubblyAppearance(this),this.toolTipMessage="speech bubble",this.buildAndConnectChildren(),this.minimumExtent=new Point(10,10),this.extentToGetWhenDraggedFromGlassBox=new Point(105,80),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SpeechBubbleWdgt,"name",{value:"SpeechBubbleWdgt"}),window.SpeechBubbleWdgt.__super__=window.Widget.prototype,window.SpeechBubbleWdgt=extend(window.SpeechBubbleWdgt,window.Widget),window.SpeechBubbleWdgt.prototype.contents=nil,window.SpeechBubbleWdgt.prototype.padding=nil,window.SpeechBubbleWdgt.prototype.morphInvokingThis=nil,window.SpeechBubbleWdgt.prototype.colloquialName=function(){return"speech bubble"},window.SpeechBubbleWdgt.prototype.buildAndConnectChildren=function(){return this.contentsMorph=new TextMorph2(this.contents,WorldMorph.preferencesAndSettings.bubbleHelpFontSize,nil,!1,!0,"center"),this.contentsMorph.fittingSpecWhenBoundsTooLarge=FittingSpecTextInLargerBounds.SCALEUP,this.contentsMorph.fittingSpecWhenBoundsTooSmall=FittingSpecTextInSmallerBounds.SCALEDOWN,this.contentsMorph.alignMiddle(),this.contentsMorph.alignCenter(),this.contentsMorph.isEditable=!0,this.add(this.contentsMorph),this.invalidateLayout()},window.SpeechBubbleWdgt.prototype.rawSetExtent=function(e){return SpeechBubbleWdgt.__super__.rawSetExtent.apply(this,arguments),this.doLayout(this.bounds)},window.SpeechBubbleWdgt.prototype.doLayout=function(e){return null==e&&(null!=this.desiredExtent?(e=this.desiredExtent,this.desiredExtent=nil):e=this.extent(),null!=this.desiredPosition?(e=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(e),this.desiredPosition=nil):e=new Rectangle(this.position()).setBoundsWidthAndHeight(e)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(trackChanges.push(!1),this.silentRawSetWidth(e.width()),this.silentRawSetHeight(e.height()),this.contentsMorph.rawSetWidth(e.width()-2*this.cornerRadius),this.contentsMorph.rawSetHeight(e.height()-2*this.cornerRadius-e.height()/5),this.contentsMorph.fullRawMoveTo(this.position().add(new Point(this.padding+this.cornerRadius,this.padding+this.cornerRadius))),trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0)},window.SpeechBubbleWdgt.instances=new Set,window.CanvasMorph=function(){CanvasMorph.__super__.constructor.apply(this,arguments),this.color=new Color(255,255,255),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CanvasMorph,"name",{value:"CanvasMorph"}),window.CanvasMorph.__super__=window.PanelWdgt.prototype,window.CanvasMorph=extend(window.CanvasMorph,window.PanelWdgt),window.CanvasMorph.augmentWith(window.BackBufferMixin,"CanvasMorph"),window.CanvasMorph.prototype.iHaveBeenAddedTo=function(e,t){},window.CanvasMorph.prototype.createRefreshOrGetBackBuffer=function(){var e,t;return e=this.extent(),null!=this.backBuffer?(new Point(this.backBuffer.width,this.backBuffer.height).eq(e.scaleBy(ceilPixelRatio))||(t=this.backBuffer,this.backBuffer=newCanvas(e.scaleBy(ceilPixelRatio)),this.backBufferContext=this.backBuffer.getContext("2d"),null!=this.color&&(this.backBufferContext.fillStyle=this.color.toString(),this.backBufferContext.fillRect(0,0,e.x*ceilPixelRatio,e.y*ceilPixelRatio)),this.backBufferContext.drawImage(t,0,0),this.backBufferContext.scale(ceilPixelRatio,ceilPixelRatio)),[this.backBuffer,this.backBufferContext]):(this.backBuffer=newCanvas(e.scaleBy(ceilPixelRatio)),this.backBufferContext=this.backBuffer.getContext("2d"),null!=this.color&&(this.backBufferContext.fillStyle=this.color.toString(),this.backBufferContext.fillRect(0,0,e.x*ceilPixelRatio,e.y*ceilPixelRatio)),this.backBufferContext.scale(ceilPixelRatio,ceilPixelRatio),[this.backBuffer,this.backBufferContext])},window.CanvasMorph.prototype.clear=function(e=this.color){var t;return null==this.backBuffer&&this.createRefreshOrGetBackBuffer(),t=new Point(this.backBuffer.width,this.backBuffer.height),this.backBufferContext.setTransform(1,0,0,1,0,0),this.backBufferContext.fillStyle=e.toString(),this.backBufferContext.fillRect(0,0,t.x,t.y),this.backBufferContext.scale(ceilPixelRatio,ceilPixelRatio),this.changed()},window.CanvasMorph.prototype.drawLine=function(e,t,n,o){var i,r,l;return null==this.backBuffer&&this.createRefreshOrGetBackBuffer(),r=e,l=t,(i=this.backBufferContext).lineWidth=n,i.strokeStyle=o.toString(),i.lineCap="round",i.lineJoin="round",i.beginPath(),i.moveTo(r.x,r.y),i.lineTo(l.x,l.y),i.stroke(),this.changed()},window.CanvasMorph.instances=new Set,window.StretchableCanvasWdgt=function(){window.StretchableCanvasWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.StretchableCanvasWdgt,"name",{value:"StretchableCanvasWdgt"}),window.StretchableCanvasWdgt.__super__=window.CanvasMorph.prototype,window.StretchableCanvasWdgt=extend(window.StretchableCanvasWdgt,window.CanvasMorph),window.StretchableCanvasWdgt.prototype.anythingPaintedYet=!1,window.StretchableCanvasWdgt.prototype.extentWhenCanvasGotDirty=nil,window.StretchableCanvasWdgt.prototype.behindTheScenesBackBuffer=nil,window.StretchableCanvasWdgt.prototype.behindTheScenesBackBufferContext=nil,window.StretchableCanvasWdgt.prototype.createRefreshOrGetBackBuffer=function(){var e;return e=this.extent(),null==this.backBuffer&&this.createNewFrontFacingBuffer(e),this.anythingPaintedYet||null==this.color||(this.backBufferContext.fillStyle=this.color.toString(),this.backBufferContext.fillRect(0,0,e.x*ceilPixelRatio,e.y*ceilPixelRatio)),this.anythingPaintedYet&&(this.backBufferContext.setTransform(1,0,0,1,0,0),this.backBufferContext.scale(this.width()/this.extentWhenCanvasGotDirty.x,this.height()/this.extentWhenCanvasGotDirty.y),this.backBufferContext.drawImage(this.behindTheScenesBackBuffer,0,0)),this.backBufferContext.scale(ceilPixelRatio,ceilPixelRatio),[this.backBuffer,this.backBufferContext]},window.StretchableCanvasWdgt.prototype.clear=function(e=this.color){throw new Error("not implemented yet")},window.StretchableCanvasWdgt.prototype.createNewBehindTheScenesBuffer=function(e){return this.behindTheScenesBackBuffer=newCanvas(e.scaleBy(ceilPixelRatio)),this.behindTheScenesBackBufferContext=this.behindTheScenesBackBuffer.getContext("2d"),null!=this.color&&(this.behindTheScenesBackBufferContext.fillStyle=this.color.toString(),this.behindTheScenesBackBufferContext.fillRect(0,0,e.x*ceilPixelRatio,e.y*ceilPixelRatio)),this.behindTheScenesBackBufferContext.scale(ceilPixelRatio,ceilPixelRatio)},window.StretchableCanvasWdgt.prototype.createNewFrontFacingBuffer=function(e){return this.backBuffer=newCanvas(e.scaleBy(ceilPixelRatio)),this.backBufferContext=this.backBuffer.getContext("2d"),this.backBufferContext.scale(ceilPixelRatio,ceilPixelRatio)},window.StretchableCanvasWdgt.prototype.rawSetExtent=function(e){if(!e.eq(this.extent()))return null!=this.behindTheScenesBackBuffer&&this.anythingPaintedYet||this.createNewBehindTheScenesBuffer(e),this.createNewFrontFacingBuffer(e),StretchableCanvasWdgt.__super__.rawSetExtent.apply(this,arguments),this.doLayout(this.bounds)},window.StretchableCanvasWdgt.prototype.getContextForPainting=function(){var e;return null!=(null!=(e=this.parent)?e.setRatio:void 0)&&null==this.parent.ratio&&(this.parent.setRatio(this.width()/this.height()),this.extentWhenCanvasGotDirty=this.extent(),this.anythingPaintedYet=!0),this.behindTheScenesBackBufferContext.setTransform(1,0,0,1,0,0),this.behindTheScenesBackBufferContext.scale(ceilPixelRatio,ceilPixelRatio),this.behindTheScenesBackBufferContext.scale(this.extentWhenCanvasGotDirty.x/this.width(),this.extentWhenCanvasGotDirty.y/this.height()),this.behindTheScenesBackBufferContext.translate(-this.bounds.origin.x,-this.bounds.origin.y),this.behindTheScenesBackBufferContext},window.StretchableCanvasWdgt.prototype.drawLine=function(e,t,n,o){throw new Error("not implemented yet")},window.StretchableCanvasWdgt.prototype.paintImage=function(e,t){var n,o;return o=this.extent(),null==this.backBuffer&&this.createNewFrontFacingBuffer(o),null==this.behindTheScenesBackBuffer&&this.createNewBehindTheScenesBuffer(o),n=this.getContextForPainting(),this.behindTheScenesBackBufferContext.scale(1/ceilPixelRatio,1/ceilPixelRatio),n.drawImage(t,e.x*ceilPixelRatio,e.y*ceilPixelRatio),this.behindTheScenesBackBufferContext.scale(ceilPixelRatio,ceilPixelRatio)},window.StretchableCanvasWdgt.prototype.reactToDropOf=function(e){return this.paintImage(e.position(),e.fullImage(nil,!1,!0)),world.add(e,nil,nil,!0)},window.StretchableCanvasWdgt.prototype.doLayout=function(e){var t,n,o;if(null==e&&(null!=this.desiredExtent?(e=this.desiredExtent,this.desiredExtent=nil):e=this.extent(),null!=this.desiredPosition?(e=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(e),this.desiredPosition=nil):e=new Rectangle(this.position()).setBoundsWidthAndHeight(e)),this.isCollapsed())return this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted();for(trackChanges.push(!1),this.rawSetBounds(e),n=0,o=(t=this.childrenNotHandlesNorCarets()).length;n<o;n++)t[n].rawSetBounds(this.bounds);return trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0},window.StretchableCanvasWdgt.instances=new Set,window.StretchableEditableWdgt=function(){StretchableEditableWdgt.__super__.constructor.apply(this,arguments),this.buildAndConnectChildren(),this.invalidateLayout(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.StretchableEditableWdgt,"name",{value:"StretchableEditableWdgt"}),window.StretchableEditableWdgt.__super__=window.Widget.prototype,window.StretchableEditableWdgt=extend(window.StretchableEditableWdgt,window.Widget),window.StretchableEditableWdgt.augmentWith(window.KeepsRatioWhenInVerticalStackMixin,"StretchableEditableWdgt"),window.StretchableEditableWdgt.prototype.toolsPanel=nil,window.StretchableEditableWdgt.prototype.stretchableWidgetContainer=nil,window.StretchableEditableWdgt.prototype.externalPadding=0,window.StretchableEditableWdgt.prototype.internalPadding=5,window.StretchableEditableWdgt.prototype.providesAmenitiesForEditing=!0,window.StretchableEditableWdgt.prototype.colloquialName=function(){return"Generic panel"},window.StretchableEditableWdgt.prototype.representativeIcon=function(){return new GenericPanelIconWdgt},window.StretchableEditableWdgt.prototype.createToolsPanel=function(){},window.StretchableEditableWdgt.prototype.createNewStretchablePanel=function(){return this.stretchableWidgetContainer=new StretchableWidgetContainerWdgt,this.add(this.stretchableWidgetContainer)},window.StretchableEditableWdgt.prototype.reLayout=function(){var e,t,n,o;return trackChanges.push(!1),e=this.top()+this.externalPadding,o=this.width()-2*this.externalPadding,t=this.height()-2*this.externalPadding,n=this.left()+this.externalPadding,this.stretchableWidgetContainer.parent===this&&(this.stretchableWidgetContainer.fullRawMoveTo(new Point(n,e)),this.stretchableWidgetContainer.setExtent(new Point(o,t))),trackChanges.pop(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted()},window.StretchableEditableWdgt.prototype.rawSetExtent=function(e){return StretchableEditableWdgt.__super__.rawSetExtent.apply(this,arguments),this.reLayout()},window.StretchableEditableWdgt.prototype.hasStartingContentBeenChangedByUser=function(){var e;return null!=(null!=(e=this.stretchableWidgetContainer)?e.ratio:void 0)},window.StretchableEditableWdgt.prototype.closeFromContainerWindow=function(e){return this.hasStartingContentBeenChangedByUser()||world.anyReferenceToWdgt(e)?world.anyReferenceToWdgt(e)?e.close():new SaveShortcutPromptWdgt(this,e).popUpAtHand():e.fullDestroy()},window.StretchableEditableWdgt.prototype.editButtonPressedFromWindowBar=function(){return this.dragsDropsAndEditingEnabled?this.disableDragsDropsAndEditing(this):this.enableDragsDropsAndEditing(this)},window.StretchableEditableWdgt.prototype.constrainToRatio=function(){var e;if(null!=this.layoutSpecDetails&&(this.layoutSpecDetails.canSetHeightFreely=!1,null!=(null!=(e=this.stretchableWidgetContainer)?e.ratio:void 0)))return this.rawSetExtent(new Point(this.width(),0))},window.StretchableEditableWdgt.prototype.enableDragsDropsAndEditing=function(e){var t;if(null==e&&(e=this),!this.dragsDropsAndEditingEnabled)return null!=(t=this.parent)&&"function"==typeof t.makePencilYellow&&t.makePencilYellow(),this.dragsDropsAndEditingEnabled=!0,this.createToolsPanel(),this.stretchableWidgetContainer.enableDragsDropsAndEditing(this)},window.StretchableEditableWdgt.prototype.rawSetWidthSizeHeightAccordingly=function(e){var t;if(null!=(t=this.layoutSpecDetails)?t.canSetHeightFreely:void 0)StretchableEditableWdgt.__super__.rawSetWidthSizeHeightAccordingly.apply(this,arguments);else if(null!=this.stretchableWidgetContainer){if(null!=this.stretchableWidgetContainer.ratio)return this.rawSetExtent(new Point(e,Math.round(e/this.stretchableWidgetContainer.ratio)));StretchableEditableWdgt.__super__.rawSetWidthSizeHeightAccordingly.apply(this,arguments)}else StretchableEditableWdgt.__super__.rawSetWidthSizeHeightAccordingly.apply(this,arguments)},window.StretchableEditableWdgt.prototype.disableDragsDropsAndEditing=function(e){var t,n;if(null==e&&(e=this),this.dragsDropsAndEditingEnabled)return null!=(n=this.parent)&&"function"==typeof n.makePencilClear&&n.makePencilClear(),this.dragsDropsAndEditingEnabled=!1,null!=this.toolsPanel&&("function"==typeof(t=this.toolsPanel).unselectAll&&t.unselectAll(),this.toolsPanel.destroy(),this.toolsPanel=nil),this.stretchableWidgetContainer.disableDragsDropsAndEditing(this),this.invalidateLayout()},window.StretchableEditableWdgt.prototype.buildAndConnectChildren=function(){return"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.createNewStretchablePanel(),this.createToolsPanel(),this.invalidateLayout()},window.StretchableEditableWdgt.prototype.childPickedUp=function(e){if(e===this.stretchableWidgetContainer)return this.createNewStretchablePanel(),this.invalidateLayout()},window.StretchableEditableWdgt.prototype.addMorphSpecificMenuEntries=function(e,t){var n;return StretchableEditableWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),null!=(n=this.childrenNotHandlesNorCarets())&&n.length>0&&(t.addLine(),this.dragsDropsAndEditingEnabled?t.addMenuItem("disable editing",!0,this,"disableDragsDropsAndEditing","prevents dragging content in and out"):t.addMenuItem("enable editing",!0,this,"enableDragsDropsAndEditing","lets you drag content in and out")),t.removeConsecutiveLines()},window.StretchableEditableWdgt.instances=new Set,window.StretchablePanelWdgt=function(){window.StretchablePanelWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.StretchablePanelWdgt,"name",{value:"StretchablePanelWdgt"}),window.StretchablePanelWdgt.__super__=window.PanelWdgt.prototype,window.StretchablePanelWdgt=extend(window.StretchablePanelWdgt,window.PanelWdgt),window.StretchablePanelWdgt.prototype.childRemoved=function(e){var t;if(StretchablePanelWdgt.__super__.childRemoved.apply(this,arguments),null!=(null!=(t=this.parent)?t.setRatio:void 0)&&null!=this.parent.ratio&&0===this.childrenNotHandlesNorCarets().length)return this.parent.resetRatio()},window.StretchablePanelWdgt.prototype.childAdded=function(e){var t;if(StretchablePanelWdgt.__super__.childAdded.apply(this,arguments),null!=(null!=(t=this.parent)?t.setRatio:void 0)&&null==this.parent.ratio&&0!==this.childrenNotHandlesNorCarets().length)return this.parent.setRatio(this.width()/this.height())},window.StretchablePanelWdgt.prototype.rawSetExtent=function(e){if(!e.eq(this.extent()))return StretchablePanelWdgt.__super__.rawSetExtent.apply(this,arguments),this.doLayout(this.bounds)},window.StretchablePanelWdgt.prototype.doLayout=function(e){var t,n,o,i;if(null==e&&(null!=this.desiredExtent?(e=this.desiredExtent,this.desiredExtent=nil):e=this.extent(),null!=this.desiredPosition?(e=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(e),this.desiredPosition=nil):e=new Rectangle(this.position()).setBoundsWidthAndHeight(e)),this.isCollapsed())return this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted();for(trackChanges.push(!1),n=0,o=(t=this.childrenNotHandlesNorCarets()).length;n<o;n++)(i=t[n]).fullRawMoveInStretchablePanelToFractionalPosition(e),i.rawSetExtentToFractionalExtentInPaneUserHasSet(e);return this.rawSetBounds(e),trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0},window.StretchablePanelWdgt.prototype.addMorphSpecificMenuEntries=function(e,t){var n;return StretchablePanelWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),null!=(n=this.childrenNotHandlesNorCarets())&&n.length>0&&(t.addLine(),this.dragsDropsAndEditingEnabled?t.addMenuItem("disable editing",!0,this,"disableDragsDropsAndEditing","prevents dragging content in and out"):t.addMenuItem("enable editing",!0,this,"enableDragsDropsAndEditing","lets you drag content in and out")),t.removeConsecutiveLines()},window.StretchablePanelWdgt.prototype.enableDragsDropsAndEditing=function(e){var t;if(null==e&&(e=this),!this.dragsDropsAndEditingEnabled)return null!=(t=this.parent)&&"function"==typeof t.makePencilYellow&&t.makePencilYellow(),null!=this.parent&&this.parent!==e&&this.parent instanceof StretchableWidgetContainerWdgt?this.parent.enableDragsDropsAndEditing(this):StretchablePanelWdgt.__super__.enableDragsDropsAndEditing.call(this,this)},window.StretchablePanelWdgt.prototype.disableDragsDropsAndEditing=function(e){var t;if(null==e&&(e=this),this.dragsDropsAndEditingEnabled)return null!=(t=this.parent)&&"function"==typeof t.makePencilClear&&t.makePencilClear(),null!=this.parent&&this.parent!==e&&this.parent instanceof StretchableWidgetContainerWdgt?this.parent.disableDragsDropsAndEditing(this):StretchablePanelWdgt.__super__.disableDragsDropsAndEditing.call(this,this)},window.StretchablePanelWdgt.instances=new Set,window.StretchableWidgetContainerWdgt=function(e){StretchableWidgetContainerWdgt.__super__.constructor.call(this,new Point(300,300)),null==e&&(e=new StretchablePanelWdgt),this.add(e),this.contents=e,this.rawSetExtent(new Point(300,300)),this.contents.rawSetExtent(new Point(this.width(),this.height())),this.invalidateLayout(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.StretchableWidgetContainerWdgt,"name",{value:"StretchableWidgetContainerWdgt"}),window.StretchableWidgetContainerWdgt.__super__=window.Widget.prototype,window.StretchableWidgetContainerWdgt=extend(window.StretchableWidgetContainerWdgt,window.Widget),window.StretchableWidgetContainerWdgt.prototype.ratio=nil,window.StretchableWidgetContainerWdgt.prototype.contents=nil,window.StretchableWidgetContainerWdgt.prototype.add=function(e,t=nil,n=LayoutSpec.ATTACHEDAS_FREEFLOATING,o){return null==this.contents||e instanceof ModifiedTextTriangleAnnotationWdgt||e instanceof HandleMorph?StretchableWidgetContainerWdgt.__super__.add.apply(this,arguments):(this.contents.add(e,t,n,o),"function"==typeof this.grandChildAdded?this.grandChildAdded():void 0)},window.StretchableWidgetContainerWdgt.prototype.setRatio=function(e){var t;return this.ratio=e,null!=(t=this.layoutSpecDetails)?t.canSetHeightFreely=!1:void 0},window.StretchableWidgetContainerWdgt.prototype.resetRatio=function(){var e;if(null!=this.ratio)return this.ratio=nil,null!=(e=this.layoutSpecDetails)&&(e.canSetHeightFreely=!0),this.invalidateLayout()},window.StretchableWidgetContainerWdgt.prototype.colloquialName=function(){return"stretchable panel"},window.StretchableWidgetContainerWdgt.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return StretchableWidgetContainerWdgt.__super__.initialiseDefaultWindowContentLayoutSpec.apply(this,arguments),this.layoutSpecDetails.canSetHeightFreely=null==this.ratio},window.StretchableWidgetContainerWdgt.prototype.widthWithoutSpacing=function(){var e,t,n,o;return e=this.height(),n=this.width(),null==this.ratio?n:(o=e*this.ratio,t=n/this.ratio,o<=n?o:t<=e?n:void 0)},window.StretchableWidgetContainerWdgt.prototype.rawResizeToWithoutSpacing=function(){if(null!=this.ratio)return this.rawSetExtent(new Point(this.widthWithoutSpacing(),Math.round(this.widthWithoutSpacing()/this.ratio))),this.invalidateLayout()},window.StretchableWidgetContainerWdgt.prototype.rawSetWidthSizeHeightAccordingly=function(e){var t;return 0!==this.childrenNotHandlesNorCarets(this.contents).length?(null==this.ratio&&(this.ratio=this.width()/this.height(),null!=(t=this.layoutSpecDetails)&&(t.canSetHeightFreely=!1)),this.rawSetExtent(new Point(e,Math.round(e/this.ratio))),this.invalidateLayout()):(this.rawSetExtent(new Point(e,this.height())),this.invalidateLayout())},window.StretchableWidgetContainerWdgt.prototype.rawSetExtent=function(e){if(!e.eq(this.extent()))return StretchableWidgetContainerWdgt.__super__.rawSetExtent.apply(this,arguments),this.doLayout(this.bounds)},window.StretchableWidgetContainerWdgt.prototype.doLayout=function(e){var t,n,o,i,r,l,a;return null==e&&(null!=this.desiredExtent?(e=this.desiredExtent,this.desiredExtent=nil):e=this.extent(),null!=this.desiredPosition?(e=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(e),this.desiredPosition=nil):e=new Rectangle(this.position()).setBoundsWidthAndHeight(e)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(this.rawSetBounds(e),trackChanges.push(!1),t=this.height(),l=this.width(),null!=this.ratio?(a=t*this.ratio,n=l/this.ratio,r=this.topLeft(),a<=l?(r=r.add(new Point((l-a)/2,0)),i=new Point(a,t)):n<=t&&(r=r.add(new Point(0,(t-n)/2)),i=new Point(l,n)),o=new Rectangle(r).setBoundsWidthAndHeight(i),this.contents.doLayout(o.round())):this.contents.doLayout(this.bounds),trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0)},window.StretchableWidgetContainerWdgt.prototype.addMorphSpecificMenuEntries=function(e,t){var n;return StretchableWidgetContainerWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),null!=(n=this.childrenNotHandlesNorCarets())&&n.length>0&&(t.addLine(),this.dragsDropsAndEditingEnabled?t.addMenuItem("disable editing",!0,this,"disableDragsDropsAndEditing","prevents dragging content in and out"):t.addMenuItem("enable editing",!0,this,"enableDragsDropsAndEditing","lets you drag content in and out")),t.removeConsecutiveLines()},window.StretchableWidgetContainerWdgt.prototype.enableDragsDropsAndEditing=function(e){var t;if(null==e&&(e=this),!this.dragsDropsAndEditingEnabled)return null!=(t=this.parent)&&"function"==typeof t.makePencilYellow&&t.makePencilYellow(),null!=this.parent&&this.parent!==e&&this.parent instanceof SimpleSlideWdgt?this.parent.enableDragsDropsAndEditing(this):StretchableWidgetContainerWdgt.__super__.enableDragsDropsAndEditing.call(this,this)},window.StretchableWidgetContainerWdgt.prototype.disableDragsDropsAndEditing=function(e){var t;if(null==e&&(e=this),this.dragsDropsAndEditingEnabled)return null!=(t=this.parent)&&"function"==typeof t.makePencilClear&&t.makePencilClear(),null!=this.parent&&this.parent!==e&&this.parent instanceof SimpleSlideWdgt?this.parent.disableDragsDropsAndEditing(this):StretchableWidgetContainerWdgt.__super__.disableDragsDropsAndEditing.call(this,this)},window.StretchableWidgetContainerWdgt.instances=new Set,window.ToolPanelWdgt=function(){window.ToolPanelWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ToolPanelWdgt,"name",{value:"ToolPanelWdgt"}),window.ToolPanelWdgt.__super__=window.PanelWdgt.prototype,window.ToolPanelWdgt=extend(window.ToolPanelWdgt,window.PanelWdgt),window.ToolPanelWdgt.prototype.numberOfIconsOnPanel=0,window.ToolPanelWdgt.prototype.internalPadding=5,window.ToolPanelWdgt.prototype.externalPadding=10,window.ToolPanelWdgt.prototype.thumbnailSize=30,window.ToolPanelWdgt.prototype.addMany=function(e){var t,n,o;for(n=0,o=e.length;n<o;n++)t=e[n],this.add(t,nil,nil,nil,nil,nil,!0);return this.reLayout()},window.ToolPanelWdgt.prototype.add=function(e,t=nil,n=LayoutSpec.ATTACHEDAS_FREEFLOATING,o,i,r,l){var a,s,d,h,p,c,u,w;if(e instanceof ModifiedTextTriangleAnnotationWdgt||e instanceof HandleMorph)return ToolPanelWdgt.__super__.add.apply(this,arguments);if(e.grabbedWidgetSwitcheroo===Widget.prototype.grabbedWidgetSwitcheroo&&(e.isTemplate=!0),null==e.extentToGetWhenDraggedFromGlassBox&&(e.extentToGetWhenDraggedFromGlassBox=e.extent()),e instanceof GlassBoxBottomWdgt||((d=new GlassBoxBottomWdgt).add(e),e.actionableAsThumbnail||((h=new GlassBoxTopWdgt).toolTipMessage=e.toolTipMessage,d.add(h)),d.fullRawMoveTo(this.topLeft().add(new Point(this.externalPadding,this.externalPadding))),d.rawSetExtent(new Point(this.thumbnailSize,this.thumbnailSize)),d.reLayout(),e=d),a=this.childrenNotHandlesNorCarets(),s=!1,null!=r&&a.length>0)for(u=0,p=0,c=a.length;p<c;p++){if((w=a[p]).bounds.growBy(this.internalPadding).containsPoint(r)){s=!0,w.bounds.growBy(this.internalPadding).rightHalf().containsPoint(r)&&u++;break}u++}return s?ToolPanelWdgt.__super__.add.call(this,e,u,n,o):ToolPanelWdgt.__super__.add.call(this,e,this.numberOfIconsOnPanel,n,o),this.numberOfIconsOnPanel++,l?void 0:this.reLayout()},window.ToolPanelWdgt.prototype.rawSetExtent=function(e){return ToolPanelWdgt.__super__.rawSetExtent.apply(this,arguments),this.reLayout()},window.ToolPanelWdgt.prototype.reLayout=function(){var e,t,n,o,i,r,l,a,s,d,h,p;for(trackChanges.push(!1),e=this.childrenNotHandlesNorCarets(),r=0,l=0,i=0,null!=this.parent&&(d=this.parent instanceof ScrollPanelWdgt?this.parent.width():this.width()),n=0,o=e.length;n<o;n++)s=e[n],h=r*(this.thumbnailSize+this.internalPadding),p=l*(this.thumbnailSize+this.internalPadding),this.externalPadding+h+this.thumbnailSize+this.externalPadding>d&&(0!==i&&l++,h=(r=0)*(this.thumbnailSize+this.internalPadding),p=l*(this.thumbnailSize+this.internalPadding)),t=(this.thumbnailSize-s.width())/2,a=(this.thumbnailSize-s.height())/2,s.fullRawMoveTo(this.position().add(new Point(this.externalPadding,this.externalPadding)).add(new Point(h,p)).add(new Point(t,a)).round()),r++,i++;return trackChanges.pop(),this.layoutIsValid=!0,this.fullChanged()},window.ToolPanelWdgt.instances=new Set,window.ToolTipWdgt=function(e="text here",t,n=WorldMorph.preferencesAndSettings.menuBackgroundColor,o,i=0){this.contents=e,this.morphInvokingThis=t,this.color=n,this.padding=i,ToolTipWdgt.__super__.constructor.call(this),this.strokeColor=WorldMorph.preferencesAndSettings.menuStrokeColor,this.cornerRadius=o||6,this.appearance=new BubblyAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ToolTipWdgt,"name",{value:"ToolTipWdgt"}),window.ToolTipWdgt.__super__=window.Widget.prototype,window.ToolTipWdgt=extend(window.ToolTipWdgt,window.Widget),window.ToolTipWdgt.prototype.contents=nil,window.ToolTipWdgt.prototype.padding=nil,window.ToolTipWdgt.prototype.morphInvokingThis=nil,window.ToolTipWdgt.prototype.openAt=function(e){return this.buildAndConnectChildren(),this.fullRawMoveTo(e.subtract(new Point(8,this.height()))),this.fullRawMoveWithin(world),world.add(this),this.addShadow(),this.fullChanged(),world.destroyToolTips(),world.toolTipsList.add(this)},window.ToolTipWdgt.prototype.buildAndConnectChildren=function(){return this.contentsMorph&&(this.contentsMorph=this.contentsMorph.destroy()),this.contents instanceof Widget?this.contentsMorph=this.contents:isString(this.contents)?this.contentsMorph=new TextMorph(this.contents,WorldMorph.preferencesAndSettings.bubbleHelpFontSize,nil,!1,!0,"center"):this.contents instanceof HTMLCanvasElement?(this.contentsMorph=new Widget,this.contentsMorph.silentRawSetWidth(this.contents.width),this.contentsMorph.silentRawSetHeight(this.contents.height),this.contentsMorph.backBuffer=this.contents,this.contentsMorph.backBufferContext=this.contentsMorph.backBuffer.getContext("2d")):this.contentsMorph=new TextMorph(this.contents.toString(),WorldMorph.preferencesAndSettings.bubbleHelpFontSize,nil,!1,!0,"center"),this.add(this.contentsMorph),this.silentRawSetWidth(this.contentsMorph.width()+(this.padding?2*this.padding:2*this.cornerRadius)),this.silentRawSetHeight(this.contentsMorph.height()+this.cornerRadius+2*this.padding+2),this.contentsMorph.fullRawMoveTo(this.position().add(new Point(this.padding||this.cornerRadius,this.padding+1)))},window.ToolTipWdgt.ongoingTimeouts=new Set,window.ToolTipWdgt.createBubbleHelpIfHandStillOnMorph=function(e,t){if(t.root()===world&&t.boundsContainPoint(world.hand.position()))return new this(e,t).openAt(t.topRight())},window.ToolTipWdgt.cancelAllScheduledToolTips=function(){return this.ongoingTimeouts.forEach(e=>clearTimeout(e)),this.ongoingTimeouts.clear()},window.ToolTipWdgt.createInAWhileIfHandStillContainedInMorph=function(e,t,n=500){return"undefined"!=typeof Automator&&null!==Automator&&Automator.animationsPacingControl&&Automator.state!==Automator.IDLE?this.createBubbleHelpIfHandStillOnMorph(t,e):this.ongoingTimeouts.add(setTimeout(()=>this.createBubbleHelpIfHandStillOnMorph(t,e),n))},window.ToolTipWdgt.instances=new Set,window.UpperRightTriangleAppearance=function(e,t="topRight"){this.positionWithinParent=t,UpperRightTriangleAppearance.__super__.constructor.call(this,e),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.UpperRightTriangleAppearance,"name",{value:"UpperRightTriangleAppearance"}),window.UpperRightTriangleAppearance.__super__=window.Appearance.prototype,window.UpperRightTriangleAppearance=extend(window.UpperRightTriangleAppearance,window.Appearance),window.UpperRightTriangleAppearance.prototype.positionWithinParent=nil,window.UpperRightTriangleAppearance.prototype.paintIntoAreaOrBlitFromBackBuffer=function(e,t,n){var o,i,r,l,a,s,d,h;return this.morph.preliminaryCheckNothingToDraw(t,e)?nil:([i,s,d,o,r,h,l]=this.morph.calculateKeyValues(e,t),h<1||l<1||i.isEmpty()?nil:(e.save(),e.clipToRectangle(o,r,h,l),e.globalAlpha=(null!=n?n.alpha:1)*this.morph.alpha,e.scale(ceilPixelRatio,ceilPixelRatio),a=this.morph.position(),e.translate(a.x,a.y),this.renderingHelper(e,this.morph.color),e.restore(),this.paintHighlight(e,o,r,h,l)))},window.UpperRightTriangleAppearance.prototype.renderingHelper=function(e,t){return e.lineWidth=1,e.lineCap="round",e.save(),e.fillStyle=t.toString(),e.beginPath(),"topRight"===this.positionWithinParent?(e.moveTo(0,0),e.lineTo(this.morph.width(),this.morph.height()),e.lineTo(this.morph.width(),0)):"topLeft"===this.positionWithinParent&&(e.moveTo(0,0),e.lineTo(0,this.morph.height()),e.lineTo(this.morph.width(),0)),e.closePath(),e.fill(),e.restore()},window.UpperRightTriangleAppearance.prototype.isTransparentAt=function(e){var t,n;return!this.morph.boundsContainPoint(e)||(n=this.morph.position(),(t=new Point(e.x-n.x,e.y-n.y)).x/t.y<this.morph.width()/this.morph.height())},window.UpperRightTriangleAppearance.instances=new Set,window.AnalogClockWdgt=function(){this.fps=1,this.synchronisedStepping=!0,this.dateLastTicked=WorldMorph.currentDate,world.steppingWdgts.add(this),AnalogClockWdgt.__super__.constructor.call(this),this.setColor(new Color(255,125,125)),this.rawSetExtent(new Point(200,200)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AnalogClockWdgt,"name",{value:"AnalogClockWdgt"}),window.AnalogClockWdgt.__super__=window.Widget.prototype,window.AnalogClockWdgt=extend(window.AnalogClockWdgt,window.Widget),window.AnalogClockWdgt.prototype.hoursHandAngle=0,window.AnalogClockWdgt.prototype.minutesHandAngle=0,window.AnalogClockWdgt.prototype.secondsHandAngle=0,window.AnalogClockWdgt.prototype.strokeSizeToClockDimensionRatio=.004,window.AnalogClockWdgt.prototype.dateLastTicked=nil,window.AnalogClockWdgt.prototype.colloquialName=function(){return"analog clock"},window.AnalogClockWdgt.prototype.widthWithoutSpacing=function(){return Math.min(this.width(),this.height())},window.AnalogClockWdgt.prototype.rawResizeToWithoutSpacing=function(){return this.rawSetExtent(new Point(this.widthWithoutSpacing(),this.widthWithoutSpacing()))},window.AnalogClockWdgt.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return AnalogClockWdgt.__super__.initialiseDefaultWindowContentLayoutSpec.apply(this,arguments),this.layoutSpecDetails.canSetHeightFreely=!1},window.AnalogClockWdgt.prototype.rawSetWidthSizeHeightAccordingly=function(e){return this.rawSetExtent(new Point(e,e))},window.AnalogClockWdgt.prototype.paintIntoAreaOrBlitFromBackBuffer=function(e,t,n){var o,i,r,l,a,s,d,h;if(!this.preliminaryCheckNothingToDraw(t,e))return[i,s,d,o,r,h,l]=this.calculateKeyValues(e,t),i.isNotEmpty()?h<1||l<1?nil:(e.save(),e.clipToRectangle(o,r,h,l),e.globalAlpha=(null!=n?n.alpha:1)*this.backgroundTransparency,this.paintRectangle(e,o,r,h,l,this.backgroundColor),e.scale(ceilPixelRatio,ceilPixelRatio),a=this.position(),e.translate(a.x,a.y),this.renderingHelper(e,new Color(255,255,255),n),e.restore(),this.paintHighlight(e,o,r,h,l)):void 0},window.AnalogClockWdgt.prototype.step=function(){return this.dateLastTicked=WorldMorph.currentDate,this.changed()},window.AnalogClockWdgt.prototype.calculateHandsAngles=function(){var e,t,n;return"undefined"!=typeof Automator&&null!==Automator&&Automator.animationsPacingControl&&Automator.state===Automator.PLAYING&&(this.dateLastTicked=new Date(2011,10,30)),n=this.dateLastTicked.getSeconds()+this.dateLastTicked.getMilliseconds()/1e3,t=this.dateLastTicked.getMinutes(),e=(e=this.dateLastTicked.getHours())>=12?e-12:e,this.hoursHandAngle=e*Math.PI/6+Math.PI/360*t+Math.PI/21600*n,this.minutesHandAngle=Math.PI/30*t+Math.PI/1800*n,this.secondsHandAngle=n*Math.PI/30},window.AnalogClockWdgt.prototype.renderingHelper=function(e,t,n){var o,i,r,l;for(o=this.height(),l=this.width(),e.lineWidth=1*Math.min(l,o)*this.strokeSizeToClockDimensionRatio,e.lineCap="round",e.save(),e.globalAlpha=(null!=n?n.alpha:1)*this.alpha,r=Math.min(l/2,o/2),e.translate(l/2,o/2),e.scale(.9,.9),e.rotate(-Math.PI/2),e.strokeStyle="black",e.fillStyle="white",e.lineWidth=6*Math.min(l,o)*this.strokeSizeToClockDimensionRatio,e.lineCap="round",e.save(),i=0;i<12;)e.beginPath(),e.rotate(Math.PI/6),e.moveTo(2.4*r/3,0),e.lineTo(r,0),e.stroke(),i++;for(e.restore(),e.save(),e.lineWidth=5*Math.min(l,o)*this.strokeSizeToClockDimensionRatio,i=0;i<60;)i%5!=0&&(e.beginPath(),e.moveTo(2.7*r/3,0),e.lineTo(r,0),e.stroke()),e.rotate(Math.PI/30),i++;return e.restore(),e.fillStyle="black",this.calculateHandsAngles(),this.drawHoursHand(e,r),this.drawMinutesHand(e,r),this.drawSecondsHand(e,r),this.drawDotInMiddleOfFace(e,r),e.beginPath(),e.lineWidth=10*Math.min(l,o)*this.strokeSizeToClockDimensionRatio,e.strokeStyle="#325FA2",e.arc(0,0,r,0,2*Math.PI),e.stroke(),e.restore(),e.strokeStyle=t.toString()},window.AnalogClockWdgt.prototype.drawHoursHand=function(e,t){var n,o;return n=this.height(),o=this.width(),e.save(),e.rotate(this.hoursHandAngle),e.lineWidth=8*Math.min(o,n)*this.strokeSizeToClockDimensionRatio,e.beginPath(),e.moveTo(-t/7,0),e.lineTo(t/2,0),e.stroke(),e.restore()},window.AnalogClockWdgt.prototype.drawMinutesHand=function(e,t){var n,o;return n=this.height(),o=this.width(),e.save(),e.rotate(this.minutesHandAngle),e.lineWidth=5*Math.min(o,n)*this.strokeSizeToClockDimensionRatio,e.beginPath(),e.moveTo(-t/5,0),e.lineTo(t/1.3,0),e.stroke(),e.restore()},window.AnalogClockWdgt.prototype.drawSecondsHand=function(e,t){var n,o;return n=this.height(),o=this.width(),e.save(),e.rotate(this.secondsHandAngle),e.strokeStyle="#D40000",e.fillStyle="#D40000",e.lineWidth=6*Math.min(o,n)*this.strokeSizeToClockDimensionRatio,e.beginPath(),e.moveTo(-t/5,0),e.lineTo(t/1.3,0),e.stroke(),e.restore()},window.AnalogClockWdgt.prototype.drawDotInMiddleOfFace=function(e,t){var n,o;return n=this.height(),o=this.width(),e.save(),e.fillStyle="#D40000",e.lineWidth=6*Math.min(o,n)*this.strokeSizeToClockDimensionRatio,e.beginPath(),e.arc(0,0,Math.min(o,n)/30,0,2*Math.PI),e.fill(),e.restore()},window.AnalogClockWdgt.instances=new Set,window.DashboardsWdgt=function(){window.DashboardsWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DashboardsWdgt,"name",{value:"DashboardsWdgt"}),window.DashboardsWdgt.__super__=window.StretchableEditableWdgt.prototype,window.DashboardsWdgt=extend(window.DashboardsWdgt,window.StretchableEditableWdgt),window.DashboardsWdgt.prototype.colloquialName=function(){return"Dashboards Maker"},window.DashboardsWdgt.prototype.representativeIcon=function(){return new DashboardsIconWdgt},window.DashboardsWdgt.prototype.createToolsPanel=function(){return this.toolsPanel=new ScrollPanelWdgt(new ToolPanelWdgt),this.toolsPanel.addMany([new TextBoxCreatorButtonWdgt,new ExternalLinkCreatorButtonWdgt,new ScatterPlotWithAxesCreatorButtonWdgt,new FunctionPlotWithAxesCreatorButtonWdgt,new BarPlotWithAxesCreatorButtonWdgt,new Plot3DCreatorButtonWdgt,new WorldMapCreatorButtonWdgt,new USAMapCreatorButtonWdgt,new MapPinIconWdgt,new SpeechBubbleWdgt,new ArrowNIconWdgt,new ArrowSIconWdgt,new ArrowWIconWdgt,new ArrowEIconWdgt,new ArrowNWIconWdgt,new ArrowNEIconWdgt,new ArrowSWIconWdgt,new ArrowSEIconWdgt]),this.toolsPanel.disableDragsDropsAndEditing(),this.add(this.toolsPanel),this.dragsDropsAndEditingEnabled=!0,this.invalidateLayout()},window.DashboardsWdgt.prototype.createNewStretchablePanel=function(){return this.stretchableWidgetContainer=new StretchableWidgetContainerWdgt,this.add(this.stretchableWidgetContainer)},window.DashboardsWdgt.prototype.reLayout=function(){var e,t,n,o,i;return trackChanges.push(!1),this.left()+this.externalPadding,this.right()-this.externalPadding,e=this.top()+this.externalPadding,(null!=(t=this.toolsPanel)?t.parent:void 0)===this&&(this.toolsPanel.fullRawMoveTo(new Point(this.left()+this.externalPadding,e)),this.toolsPanel.rawSetExtent(new Point(95,this.height()-2*this.externalPadding))),i=this.width()-2*this.externalPadding,this.dragsDropsAndEditingEnabled&&(i-=this.toolsPanel.width()+this.internalPadding),n=this.height()-2*this.externalPadding,o=this.dragsDropsAndEditingEnabled?this.toolsPanel.right()+this.internalPadding:this.left()+this.externalPadding,this.stretchableWidgetContainer.parent===this&&(this.stretchableWidgetContainer.fullRawMoveTo(new Point(o,e)),this.stretchableWidgetContainer.setExtent(new Point(i,n))),trackChanges.pop(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted()},window.DashboardsWdgt.instances=new Set,window.PatchProgrammingWdgt=function(){window.PatchProgrammingWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PatchProgrammingWdgt,"name",{value:"PatchProgrammingWdgt"}),window.PatchProgrammingWdgt.__super__=window.StretchableEditableWdgt.prototype,window.PatchProgrammingWdgt=extend(window.PatchProgrammingWdgt,window.StretchableEditableWdgt),window.PatchProgrammingWdgt.prototype.colloquialName=function(){return"Patch Programming"},window.PatchProgrammingWdgt.prototype.representativeIcon=function(){return new PatchProgrammingIconWdgt},window.PatchProgrammingWdgt.prototype.createToolsPanel=function(){return this.toolsPanel=new ScrollPanelWdgt(new ToolPanelWdgt),this.toolsPanel.addMany([new TextBoxCreatorButtonWdgt,new SliderNodeCreatorButtonWdgt,new ColorPaletteNodeCreatorButtonWdgt,new GrayscalePaletteNodeCreatorButtonWdgt,new CalculatingNodeCreatorButtonWdgt]),this.toolsPanel.disableDragsDropsAndEditing(),this.add(this.toolsPanel),this.dragsDropsAndEditingEnabled=!0,this.invalidateLayout()},window.PatchProgrammingWdgt.prototype.createNewStretchablePanel=function(){return this.stretchableWidgetContainer=new StretchableWidgetContainerWdgt,this.add(this.stretchableWidgetContainer)},window.PatchProgrammingWdgt.prototype.reLayout=function(){var e,t,n,o,i;return trackChanges.push(!1),this.left()+this.externalPadding,this.right()-this.externalPadding,e=this.top()+this.externalPadding,(null!=(t=this.toolsPanel)?t.parent:void 0)===this&&(this.toolsPanel.fullRawMoveTo(new Point(this.left()+this.externalPadding,e)),this.toolsPanel.rawSetExtent(new Point(95,this.height()-2*this.externalPadding))),i=this.width()-2*this.externalPadding,this.dragsDropsAndEditingEnabled&&(i-=this.toolsPanel.width()+this.internalPadding),n=this.height()-2*this.externalPadding,o=this.dragsDropsAndEditingEnabled?this.toolsPanel.right()+this.internalPadding:this.left()+this.externalPadding,this.stretchableWidgetContainer.parent===this&&(this.stretchableWidgetContainer.fullRawMoveTo(new Point(o,e)),this.stretchableWidgetContainer.setExtent(new Point(i,n))),trackChanges.pop(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted()},window.PatchProgrammingWdgt.instances=new Set,window.ReconfigurablePaintWdgt=function(){window.ReconfigurablePaintWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ReconfigurablePaintWdgt,"name",{value:"ReconfigurablePaintWdgt"}),window.ReconfigurablePaintWdgt.__super__=window.StretchableEditableWdgt.prototype,window.ReconfigurablePaintWdgt=extend(window.ReconfigurablePaintWdgt,window.StretchableEditableWdgt),window.ReconfigurablePaintWdgt.prototype.mainCanvas=nil,window.ReconfigurablePaintWdgt.prototype.overlayCanvas=nil,window.ReconfigurablePaintWdgt.prototype.pencilToolButton=nil,window.ReconfigurablePaintWdgt.prototype.brushToolButton=nil,window.ReconfigurablePaintWdgt.prototype.toothpasteToolButton=nil,window.ReconfigurablePaintWdgt.prototype.eraserToolButton=nil,window.ReconfigurablePaintWdgt.prototype.highlightedToolIconColor=new Color(245,126,0),window.ReconfigurablePaintWdgt.prototype.colloquialName=function(){return"Drawings Maker"},window.ReconfigurablePaintWdgt.prototype.representativeIcon=function(){return new PaintBucketIconWdgt},window.ReconfigurablePaintWdgt.prototype.isToolPressed=function(e){var t;return null!=(t=this.toolsPanel.whichButtonSelected())&&t===e.parent},window.ReconfigurablePaintWdgt.prototype.newCodeToInjectFromButton=function(e){if(this.isToolPressed(e))return e.injectCodeIntoTarget()},window.ReconfigurablePaintWdgt.prototype.createNewStretchablePanel=function(){return this.stretchableWidgetContainer=new StretchableWidgetContainerWdgt(new StretchableCanvasWdgt),this.stretchableWidgetContainer.disableDrops(),this.add(this.stretchableWidgetContainer),this.mainCanvas=this.stretchableWidgetContainer.contents,this.overlayCanvas=new CanvasGlassTopWdgt,this.overlayCanvas.underlyingCanvasMorph=this.mainCanvas,this.overlayCanvas.disableDrops(),this.mainCanvas.add(this.overlayCanvas),this.overlayCanvas.noticesTransparentClick=!0,this.overlayCanvas.injectProperty("mouseLeave","# don't leave any trace behind then the pointer\n# moves out.\n(pos) ->\n    context = @backBufferContext\n    context.setTransform 1, 0, 0, 1, 0, 0\n    context.clearRect 0, 0, @width() * ceilPixelRatio, @height() * ceilPixelRatio\n    @changed()")},window.ReconfigurablePaintWdgt.prototype.createToolsPanel=function(){var e,t,n,o,i,r,l,a;return this.toolsPanel=new RadioButtonsHolderMorph,this.add(this.toolsPanel),(i=new CodeInjectingSimpleRectangularButtonMorph(this,this.overlayCanvas,new Pencil2IconMorph)).alpha=.1,i.sourceCodeToBeInjected='mouseMove = (pos, mouseButton) ->\n    if world.hand.isThisPointerDraggingSomething() then return\n    context = @backBufferContext\n    context.setTransform 1, 0, 0, 1, 0, 0\n    context.clearRect 0, 0, @width() * ceilPixelRatio, @height() * ceilPixelRatio\n    context.scale ceilPixelRatio, ceilPixelRatio\n\n    # give it a little bit of a tint so\n    # you can see the canvas when you take it\n    # apart from the paint tool.\n    #context.fillStyle = (new Color 0,255,0,0.5).toString()\n    #context.fillRect 0, 0, @width(), @height()\n\n    context.translate -@bounds.origin.x, -@bounds.origin.y\n    context.translate pos.x, pos.y\n\n    context.beginPath()\n    context.lineWidth="2"\n\n    if mouseButton == \'left\'\n        contextMain = @underlyingCanvasMorph.getContextForPainting()\n        contextMain.translate pos.x, pos.y\n\n        contextMain.beginPath()\n        contextMain.lineWidth="2"\n        contextMain.fillStyle = "black"\n        contextMain.rect(-2,-2,4,4)\n        contextMain.fill()\n        @underlyingCanvasMorph.changed()\n\n    else\n        context.strokeStyle="red"\n        context.rect(-2,-2,4,4)\n        context.stroke()\n    @changed()',(r=new CodeInjectingSimpleRectangularButtonMorph(this,this.overlayCanvas,new Pencil2IconMorph(this.highlightedToolIconColor))).alpha=.1,r.sourceCodeToBeInjected="mouseMove = -> return",this.pencilToolButton=new ToggleButtonMorph(i,r),(e=new CodeInjectingSimpleRectangularButtonMorph(this,this.overlayCanvas,new BrushIconMorph)).alpha=.1,e.sourceCodeToBeInjected='mouseMove = (pos, mouseButton) ->\n    if world.hand.isThisPointerDraggingSomething() then return\n    context = @backBufferContext\n    context.setTransform 1, 0, 0, 1, 0, 0\n    context.clearRect 0, 0, @width() * ceilPixelRatio, @height() * ceilPixelRatio\n    context.scale ceilPixelRatio, ceilPixelRatio\n\n    context.translate -@bounds.origin.x, -@bounds.origin.y\n    context.translate pos.x, pos.y\n\n    context.beginPath()\n    context.lineWidth="2"\n\n    if mouseButton == \'left\'\n        context.fillStyle = "red"\n\n        contextMain = @underlyingCanvasMorph.getContextForPainting()\n        contextMain.translate pos.x, pos.y\n        contextMain.fillStyle = "black"\n\n        # the brush is 16 x 16, so center it\n        contextMain.translate -8, -8\n\n        # for convenience, the brush has been\n        # drawn first using 6x6 squares, so now\n        # scale those back\n        contextMain.scale 1/6, 1/6\n\n        contextMain.beginPath()\n        contextMain.rect 48, 0, 6, 6\n        contextMain.rect 36, 6, 6, 6\n        contextMain.rect 54, 6, 6, 6\n        contextMain.rect 66, 6, 6, 6\n        contextMain.rect 30, 12, 12, 6\n        contextMain.rect 48, 12, 6, 6\n        contextMain.rect 72, 12, 6, 6\n        contextMain.rect 12, 18, 36, 6\n        contextMain.rect 60, 18, 6, 6\n        contextMain.rect 78, 18, 6, 6\n        contextMain.rect 24, 24, 42, 6\n        contextMain.rect 72, 24, 6, 6\n        contextMain.rect 90, 24, 6, 6\n        contextMain.rect 18, 30, 42, 6\n        contextMain.rect 66, 30, 6, 6\n        contextMain.rect 18, 36, 36, 6\n        contextMain.rect 6, 36, 6, 6\n        contextMain.rect 60, 36, 12, 6\n        contextMain.rect 78, 36, 6, 6\n        contextMain.rect 90, 36, 6, 6\n        contextMain.rect 24, 42, 36, 6\n        contextMain.rect 66, 42, 12, 6\n        contextMain.rect 6, 48, 6, 6\n        contextMain.rect 18, 48, 6, 6\n        contextMain.rect 30, 48, 12, 6\n        contextMain.rect 54, 48, 6, 6\n        contextMain.rect 78, 48, 6, 6\n        contextMain.rect 36, 54, 6, 12\n        contextMain.rect 48, 54, 6, 6\n        contextMain.rect 60, 54, 12, 6\n        contextMain.rect 90, 54, 6, 6\n        contextMain.rect 6, 60, 6, 6\n        contextMain.rect 18, 60, 12, 6\n        contextMain.rect 54, 60, 6, 12\n        contextMain.rect 78, 60, 6, 6\n        contextMain.rect 0, 66, 6, 6\n        contextMain.rect 42, 66, 6, 12\n        contextMain.rect 66, 66, 6, 6\n        contextMain.rect 18, 72, 6, 6\n        contextMain.rect 30, 72, 6, 6\n        contextMain.rect 60, 78, 6, 6\n        contextMain.rect 78, 78, 6, 6\n        contextMain.rect 12, 84, 6, 6\n        contextMain.rect 36, 84, 6, 6\n        contextMain.rect 54, 84, 6, 6\n        contextMain.rect 42, 90, 6, 6\n        contextMain.rect 18, 6, 6, 6\n        contextMain.rect 6, 24, 6, 6\n        contextMain.rect 0, 42, 6, 6\n        contextMain.fill()\n\n\n        @underlyingCanvasMorph.changed()\n\n    else\n        context.strokeStyle="green"\n    context.rect(-5,-5,10,10)\n    context.stroke()\n    @changed()',(t=new CodeInjectingSimpleRectangularButtonMorph(this,this.overlayCanvas,new BrushIconMorph(this.highlightedToolIconColor))).alpha=.1,t.sourceCodeToBeInjected="mouseMove = -> return",this.brushToolButton=new ToggleButtonMorph(e,t),(l=new CodeInjectingSimpleRectangularButtonMorph(this,this.overlayCanvas,new ToothpasteIconMorph)).alpha=.1,l.sourceCodeToBeInjected='# Toothpaste graphics\n# original implementation by Ward Cunningham, from Tektronix Smalltalk\n# implementation of Smalltalk 80\n# on the Magnolia (1980-1983) and the Tek 4404 (1984)\n# "Draw spheres ala Ken Knowlton, Computer Graphics, v15 n4 p352."\n\npaintBrush = (contextMain) ->\n    contextMain.save()\n    # the brush is 16 x 16, so center it\n    contextMain.translate -8, -8\n\n    # for convenience, the brush has been\n    # drawn first using 6x6 squares, so now\n    # scale those back\n    contextMain.scale 1/6, 1/6\n\n    contextMain.beginPath()\n    contextMain.rect 48, 0, 6, 6\n    contextMain.rect 36, 6, 6, 6\n    contextMain.rect 54, 6, 6, 6\n    contextMain.rect 66, 6, 6, 6\n    contextMain.rect 30, 12, 12, 6\n    contextMain.rect 48, 12, 6, 6\n    contextMain.rect 72, 12, 6, 6\n    contextMain.rect 12, 18, 36, 6\n    contextMain.rect 60, 18, 6, 6\n    contextMain.rect 78, 18, 6, 6\n    contextMain.rect 24, 24, 42, 6\n    contextMain.rect 72, 24, 6, 6\n    contextMain.rect 90, 24, 6, 6\n    contextMain.rect 18, 30, 42, 6\n    contextMain.rect 66, 30, 6, 6\n    contextMain.rect 18, 36, 36, 6\n    contextMain.rect 6, 36, 6, 6\n    contextMain.rect 60, 36, 12, 6\n    contextMain.rect 78, 36, 6, 6\n    contextMain.rect 90, 36, 6, 6\n    contextMain.rect 24, 42, 36, 6\n    contextMain.rect 66, 42, 12, 6\n    contextMain.rect 6, 48, 6, 6\n    contextMain.rect 18, 48, 6, 6\n    contextMain.rect 30, 48, 12, 6\n    contextMain.rect 54, 48, 6, 6\n    contextMain.rect 78, 48, 6, 6\n    contextMain.rect 36, 54, 6, 12\n    contextMain.rect 48, 54, 6, 6\n    contextMain.rect 60, 54, 12, 6\n    contextMain.rect 90, 54, 6, 6\n    contextMain.rect 6, 60, 6, 6\n    contextMain.rect 18, 60, 12, 6\n    contextMain.rect 54, 60, 6, 12\n    contextMain.rect 78, 60, 6, 6\n    contextMain.rect 0, 66, 6, 6\n    contextMain.rect 42, 66, 6, 12\n    contextMain.rect 66, 66, 6, 6\n    contextMain.rect 18, 72, 6, 6\n    contextMain.rect 30, 72, 6, 6\n    contextMain.rect 60, 78, 6, 6\n    contextMain.rect 78, 78, 6, 6\n    contextMain.rect 12, 84, 6, 6\n    contextMain.rect 36, 84, 6, 6\n    contextMain.rect 54, 84, 6, 6\n    contextMain.rect 42, 90, 6, 6\n    contextMain.rect 18, 6, 6, 6\n    contextMain.rect 6, 24, 6, 6\n    contextMain.rect 0, 42, 6, 6\n    contextMain.fill()\n\n    contextMain.restore()\n\n# you\'d be tempted to initialise the queue\n# on mouseDown but it would be a bad idea\n# because the mouse could come "already-pressed"\n# from outside the canvas\ninitialiseQueueIfNeeded = ->\n    if !@queue?\n        @queue = [0..24].map -> nil\n\nmouseUpLeft = ->\n    if world.hand.isThisPointerDraggingSomething() then return\n    if @queue?\n        # draining the queue\n        contextMain = @underlyingCanvasMorph.getContextForPainting()\n        \n        until @queue.length == 0\n            previousPos = @queue[0]\n            @queue.shift()\n            if previousPos?\n                contextMain.save()\n                contextMain.translate previousPos.x, previousPos.y\n                contextMain.fillStyle = "white"\n                @paintBrush contextMain\n                contextMain.restore()\n        delete @queue\n\nmouseMove = (pos, mouseButton) ->\n    if world.hand.isThisPointerDraggingSomething() then return\n    context = @backBufferContext\n    context.setTransform 1, 0, 0, 1, 0, 0\n    context.clearRect 0, 0, @width() * ceilPixelRatio, @height() * ceilPixelRatio\n    context.scale ceilPixelRatio, ceilPixelRatio\n\n    context.translate -@bounds.origin.x, -@bounds.origin.y\n    context.translate pos.x, pos.y\n\n    context.beginPath()\n    context.lineWidth="2"\n\n    if mouseButton == \'left\'\n        @initialiseQueueIfNeeded()\n        @queue.push pos\n        context.fillStyle = "red"\n\n        contextMain = @underlyingCanvasMorph.getContextForPainting()\n        \n        contextMain.save()\n        contextMain.translate pos.x, pos.y\n        contextMain.fillStyle = "black"\n        #@paintBrush contextMain\n        contextMain.beginPath()\n        contextMain.arc 0,0,9,0,2*Math.PI\n        contextMain.fill()\n        contextMain.restore()\n\n\n        previousPos = @queue[0]\n        @queue.shift()\n        if previousPos?\n            contextMain.save()\n            contextMain.translate previousPos.x, previousPos.y\n            contextMain.fillStyle = "white"\n            @paintBrush contextMain\n            contextMain.restore()\n\n\n        @underlyingCanvasMorph.changed()\n\n    else\n        context.strokeStyle="green"\n    context.rect(-5,-5,10,10)\n    context.stroke()\n    @changed()',(a=new CodeInjectingSimpleRectangularButtonMorph(this,this.overlayCanvas,new ToothpasteIconMorph(this.highlightedToolIconColor))).alpha=.1,a.sourceCodeToBeInjected="mouseMove = -> return",this.toothpasteToolButton=new ToggleButtonMorph(l,a),(n=new CodeInjectingSimpleRectangularButtonMorph(this,this.overlayCanvas,new EraserIconMorph)).alpha=.1,n.sourceCodeToBeInjected='mouseMove = (pos, mouseButton) ->\n    if world.hand.isThisPointerDraggingSomething() then return\n    context = @backBufferContext\n    context.setTransform 1, 0, 0, 1, 0, 0\n    context.clearRect 0, 0, @width() * ceilPixelRatio, @height() * ceilPixelRatio\n    context.scale ceilPixelRatio, ceilPixelRatio\n\n    context.translate -@bounds.origin.x, -@bounds.origin.y\n    context.translate pos.x, pos.y\n\n    context.beginPath()\n    context.lineWidth="2"\n\n    if mouseButton == \'left\'\n        context.fillStyle = "red"\n\n        contextMain = @underlyingCanvasMorph.getContextForPainting()\n        contextMain.translate pos.x, pos.y\n\n        contextMain.beginPath()\n        contextMain.lineWidth="2"\n        contextMain.fillStyle = (new Color 255, 255, 255).toString()\n        contextMain.rect(-5,-5,10,10)\n        contextMain.fill()\n        @underlyingCanvasMorph.changed()\n\n    else\n        context.strokeStyle="green"\n    context.rect(-5,-5,10,10)\n    context.stroke()\n    @changed()',(o=new CodeInjectingSimpleRectangularButtonMorph(this,this.overlayCanvas,new EraserIconMorph(this.highlightedToolIconColor))).alpha=.1,o.sourceCodeToBeInjected="mouseMove = -> return",this.eraserToolButton=new ToggleButtonMorph(n,o),new EditableMarkMorph(this.pencilToolButton,i,"editInjectableSource"),new EditableMarkMorph(this.brushToolButton,e,"editInjectableSource"),new EditableMarkMorph(this.toothpasteToolButton,l,"editInjectableSource"),new EditableMarkMorph(this.eraserToolButton,n,"editInjectableSource"),this.toolsPanel.add(this.pencilToolButton),this.toolsPanel.add(this.brushToolButton),this.toolsPanel.add(this.toothpasteToolButton),this.toolsPanel.add(this.eraserToolButton),this.pencilToolButton.toggle(),this.invalidateLayout()},window.ReconfigurablePaintWdgt.prototype.reLayout=function(){var e,t,n,o,i,r;return trackChanges.push(!1),this.left()+this.externalPadding,this.right()-this.externalPadding,t=this.top()+this.externalPadding,r=null!=this.toolsPanel&&this.toolsPanel.parent===this?new Point(93,55):new Point(0,0),null!=this.toolsPanel&&this.toolsPanel.parent===this&&(this.toolsPanel.fullRawMoveTo(new Point(this.left()+this.externalPadding,t)),this.toolsPanel.rawSetExtent(new Point(2*this.internalPadding+r.width(),this.height()-2*this.externalPadding)),this.pencilToolButton.parent===this.toolsPanel&&(e=(e=new Rectangle(new Point(this.toolsPanel.left()+this.internalPadding,t+this.internalPadding))).setBoundsWidthAndHeight(r),this.pencilToolButton.doLayout(e)),this.brushToolButton.parent===this.toolsPanel&&(e=(e=new Rectangle(new Point(this.toolsPanel.left()+this.internalPadding,this.pencilToolButton.bottom()+this.internalPadding))).setBoundsWidthAndHeight(r),this.brushToolButton.doLayout(e)),this.toothpasteToolButton.parent===this.toolsPanel&&(e=(e=new Rectangle(new Point(this.toolsPanel.left()+this.internalPadding,this.brushToolButton.bottom()+this.internalPadding))).setBoundsWidthAndHeight(r),this.toothpasteToolButton.doLayout(e)),this.eraserToolButton.parent===this.toolsPanel&&(e=(e=new Rectangle(new Point(this.toolsPanel.left()+this.internalPadding,this.toothpasteToolButton.bottom()+this.internalPadding))).setBoundsWidthAndHeight(r),this.eraserToolButton.doLayout(e))),i=null!=this.toolsPanel&&this.toolsPanel.parent===this?this.width()-this.toolsPanel.width()-2*this.externalPadding-this.internalPadding:this.width()-2*this.externalPadding,n=this.height()-2*this.externalPadding,o=null!=this.toolsPanel&&this.toolsPanel.parent===this?this.toolsPanel.right()+this.internalPadding:this.left()+this.externalPadding,this.stretchableWidgetContainer.parent===this&&(this.stretchableWidgetContainer.fullRawMoveTo(new Point(o,t)),this.stretchableWidgetContainer.setExtent(new Point(i,n))),trackChanges.pop(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted()},window.ReconfigurablePaintWdgt.instances=new Set,window.SimpleDocumentWdgt=function(e=""){this.defaultContents=e,SimpleDocumentWdgt.__super__.constructor.call(this,new Point(368,335)),this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleDocumentWdgt,"name",{value:"SimpleDocumentWdgt"}),window.SimpleDocumentWdgt.__super__=window.Widget.prototype,window.SimpleDocumentWdgt=extend(window.SimpleDocumentWdgt,window.Widget),window.SimpleDocumentWdgt.prototype.toolsPanel=nil,window.SimpleDocumentWdgt.prototype.defaultContents=nil,window.SimpleDocumentWdgt.prototype.textMorph=nil,window.SimpleDocumentWdgt.prototype.simpleDocumentScrollPanel=nil,window.SimpleDocumentWdgt.prototype.simpleDocumentScrollPanelText=nil,window.SimpleDocumentWdgt.prototype.externalPadding=0,window.SimpleDocumentWdgt.prototype.internalPadding=5,window.SimpleDocumentWdgt.prototype.providesAmenitiesForEditing=!0,window.SimpleDocumentWdgt.prototype.startingText="Your text here.",window.SimpleDocumentWdgt.prototype.colloquialName=function(){return"Docs Maker"},window.SimpleDocumentWdgt.prototype.representativeIcon=function(){return new TypewriterIconWdgt},window.SimpleDocumentWdgt.prototype.hasStartingContentBeenChangedByUser=function(){return!(1===this.simpleDocumentScrollPanel.contents.children.length&&this.simpleDocumentScrollPanel.contents.children[0]instanceof SimplePlainTextWdgt&&this.simpleDocumentScrollPanel.contents.children[0].text===this.startingText)},window.SimpleDocumentWdgt.prototype.closeFromContainerWindow=function(e){return this.hasStartingContentBeenChangedByUser()||world.anyReferenceToWdgt(e)?world.anyReferenceToWdgt(e)?e.close():new SaveShortcutPromptWdgt(this,e).popUpAtHand():e.fullDestroy()},window.SimpleDocumentWdgt.prototype.buildAndConnectChildren=function(){var e;return"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.createToolsPanel(),this.simpleDocumentScrollPanel=new SimpleDocumentScrollPanelWdgt,e=new SimplePlainTextWdgt(this.startingText,nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1),this.simpleDocumentScrollPanel.setContents(e,5),e.isEditable=!0,e.enableSelecting(),this.add(this.simpleDocumentScrollPanel),this.invalidateLayout()},window.SimpleDocumentWdgt.prototype.createToolsPanel=function(){return this.toolsPanel=new HorizontalMenuPanelWdgt,this.toolsPanel.strokeColor=nil,this.toolsPanel.rawSetExtent(new Point(300,10)),this.toolsPanel.add(new ChangeFontButtonWdgt(this)),this.toolsPanel.add(new BoldButtonWdgt),this.toolsPanel.add(new ItalicButtonWdgt),this.toolsPanel.add(new FormatAsCodeButtonWdgt),this.toolsPanel.add(new IncreaseFontSizeButtonWdgt),this.toolsPanel.add(new DecreaseFontSizeButtonWdgt),this.toolsPanel.add(new AlignLeftButtonWdgt),this.toolsPanel.add(new AlignCenterButtonWdgt),this.toolsPanel.add(new AlignRightButtonWdgt),this.toolsPanel.add(new TemplatesButtonWdgt),this.add(this.toolsPanel),this.toolsPanel.disableDragsDropsAndEditing(),this.dragsDropsAndEditingEnabled=!0,this.invalidateLayout()},window.SimpleDocumentWdgt.prototype.editButtonPressedFromWindowBar=function(){return this.dragsDropsAndEditingEnabled?this.disableDragsDropsAndEditing(this):this.enableDragsDropsAndEditing(this)},window.SimpleDocumentWdgt.prototype.enableDragsDropsAndEditing=function(e){var t;if(null==e&&(e=this),!this.dragsDropsAndEditingEnabled)return null!=(t=this.parent)&&"function"==typeof t.makePencilYellow&&t.makePencilYellow(),this.dragsDropsAndEditingEnabled=!0,this.createToolsPanel(),this.simpleDocumentScrollPanel.enableDragsDropsAndEditing(this)},window.SimpleDocumentWdgt.prototype.disableDragsDropsAndEditing=function(e){var t;if(null==e&&(e=this),this.dragsDropsAndEditingEnabled)return null!=(t=this.parent)&&"function"==typeof t.makePencilClear&&t.makePencilClear(),this.toolsPanel.destroy(),this.toolsPanel=nil,this.dragsDropsAndEditingEnabled=!1,this.simpleDocumentScrollPanel.disableDragsDropsAndEditing(this),this.invalidateLayout()},window.SimpleDocumentWdgt.prototype.doLayout=function(e){var t,n,o,i,r;return this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(SimpleDocumentWdgt.__super__.doLayout.apply(this,arguments),trackChanges.push(!1),t=this.height()-2*this.externalPadding,i=this.top()+this.externalPadding,r=0,this.dragsDropsAndEditingEnabled&&(r=35,t-=this.internalPadding,i+=r+this.internalPadding),o=t-r,(null!=(n=this.toolsPanel)?n.parent:void 0)===this&&(this.toolsPanel.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.top()+this.externalPadding)),this.toolsPanel.rawSetExtent(new Point(this.width()-2*this.externalPadding,r))),this.simpleDocumentScrollPanel.parent===this&&(this.simpleDocumentScrollPanel.fullRawMoveTo(new Point(this.left()+this.externalPadding,i)),this.simpleDocumentScrollPanel.rawSetExtent(new Point(this.width()-2*this.externalPadding,o))),trackChanges.pop(),this.fullChanged(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted())},window.SimpleDocumentWdgt.prototype.addMorphSpecificMenuEntries=function(e,t){var n;return SimpleDocumentWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),null!=(n=this.childrenNotHandlesNorCarets())&&n.length>0&&(t.addLine(),this.dragsDropsAndEditingEnabled?t.addMenuItem("disable editing",!0,this,"disableDragsDropsAndEditing","prevents dragging content in and out"):t.addMenuItem("enable editing",!0,this,"enableDragsDropsAndEditing","lets you drag content in and out")),t.removeConsecutiveLines()},window.SimpleDocumentWdgt.instances=new Set,window.SimpleSlideWdgt=function(){window.SimpleSlideWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleSlideWdgt,"name",{value:"SimpleSlideWdgt"}),window.SimpleSlideWdgt.__super__=window.StretchableEditableWdgt.prototype,window.SimpleSlideWdgt=extend(window.SimpleSlideWdgt,window.StretchableEditableWdgt),window.SimpleSlideWdgt.prototype.colloquialName=function(){return"Slides Maker"},window.SimpleSlideWdgt.prototype.representativeIcon=function(){return new SimpleSlideIconWdgt},window.SimpleSlideWdgt.prototype.createToolsPanel=function(){return this.toolsPanel=new ScrollPanelWdgt(new ToolPanelWdgt),this.toolsPanel.addMany([new TextBoxCreatorButtonWdgt,new ExternalLinkCreatorButtonWdgt,new VideoPlayCreatorButtonWdgt,new WorldMapCreatorButtonWdgt,new USAMapCreatorButtonWdgt,new RectangleMorph,new MapPinIconWdgt,new SpeechBubbleWdgt,new DestroyIconMorph,new ScratchAreaIconMorph,new FloraIconMorph,new ScooterIconMorph,new HeartIconMorph,new FizzygumLogoIconWdgt,new FizzygumLogoWithTextIconWdgt,new VaporwaveBackgroundIconWdgt,new VaporwaveSunIconWdgt,new ArrowNIconWdgt,new ArrowSIconWdgt,new ArrowWIconWdgt,new ArrowEIconWdgt,new ArrowNWIconWdgt,new ArrowNEIconWdgt,new ArrowSWIconWdgt,new ArrowSEIconWdgt]),this.toolsPanel.disableDragsDropsAndEditing(),this.add(this.toolsPanel),this.dragsDropsAndEditingEnabled=!0,this.invalidateLayout()},window.SimpleSlideWdgt.prototype.createNewStretchablePanel=function(){return this.stretchableWidgetContainer=new StretchableWidgetContainerWdgt,this.add(this.stretchableWidgetContainer)},window.SimpleSlideWdgt.prototype.reLayout=function(){var e,t,n,o,i;return trackChanges.push(!1),this.left()+this.externalPadding,this.right()-this.externalPadding,e=this.top()+this.externalPadding,(null!=(t=this.toolsPanel)?t.parent:void 0)===this&&(this.toolsPanel.fullRawMoveTo(new Point(this.left()+this.externalPadding,e)),this.toolsPanel.rawSetExtent(new Point(95,this.height()-2*this.externalPadding))),i=this.width()-2*this.externalPadding,this.dragsDropsAndEditingEnabled&&(i-=this.toolsPanel.width()+this.internalPadding),n=this.height()-2*this.externalPadding,o=this.dragsDropsAndEditingEnabled?this.toolsPanel.right()+this.internalPadding:this.left()+this.externalPadding,this.stretchableWidgetContainer.parent===this&&(this.stretchableWidgetContainer.fullRawMoveTo(new Point(o,e)),this.stretchableWidgetContainer.setExtent(new Point(i,n))),trackChanges.pop(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted()},window.SimpleSlideWdgt.instances=new Set,window.Point=function(e=0,t=0){this.x=e,this.y=t,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Point,"name",{value:"Point"}),window.Point.__super__=Object.prototype,window.Point.augmentWith(window.DeepCopierMixin,"Point"),window.Point.prototype.x=nil,window.Point.prototype.y=nil,window.Point.prototype.debugIfFloats=function(){},window.Point.prototype.toString=function(){return Math.round(this.x)+"@"+Math.round(this.y)},window.Point.prototype.copy=function(){return new this.constructor(this.x,this.y)},window.Point.prototype.isZero=function(e){return 0===this.x&&0===this.y},window.Point.prototype.eq=function(e){return this.x===e.x&&this.y===e.y},window.Point.prototype.lt=function(e){return this.x<e.x&&this.y<e.y},window.Point.prototype.gt=function(e){return this.x>e.x&&this.y>e.y},window.Point.prototype.ge=function(e){return this.x>=e.x&&this.y>=e.y},window.Point.prototype.le=function(e){return this.x<=e.x&&this.y<=e.y},window.Point.prototype.max=function(e){return this.debugIfFloats(),new this.constructor(Math.max(this.x,e.x),Math.max(this.y,e.y))},window.Point.prototype.min=function(e){return this.debugIfFloats(),new this.constructor(Math.min(this.x,e.x),Math.min(this.y,e.y))},window.Point.prototype.round=function(){return new this.constructor(Math.round(this.x),Math.round(this.y))},window.Point.prototype.abs=function(){return this.debugIfFloats(),new this.constructor(Math.abs(this.x),Math.abs(this.y))},window.Point.prototype.neg=function(){return this.debugIfFloats(),new this.constructor(-this.x,-this.y)},window.Point.prototype.mirror=function(){return this.debugIfFloats(),new this.constructor(this.y,this.x)},window.Point.prototype.floor=function(){return new this.constructor(Math.max(Math.floor(this.x),0),Math.max(Math.floor(this.y),0))},window.Point.prototype.ceil=function(){return new this.constructor(Math.ceil(this.x),Math.ceil(this.y))},window.Point.prototype.width=function(){return this.x},window.Point.prototype.height=function(){return this.y},window.Point.prototype.add=function(e){return this.debugIfFloats(),e instanceof Point?new this.constructor(this.x+e.x,this.y+e.y):new this.constructor(this.x+e,this.y+e)},window.Point.prototype.subtract=function(e){return this.debugIfFloats(),e instanceof Point?new this.constructor(this.x-e.x,this.y-e.y):new this.constructor(this.x-e,this.y-e)},window.Point.prototype.multiplyBy=function(e){return this.debugIfFloats(),e instanceof Point?new this.constructor(this.x*e.x,this.y*e.y):new this.constructor(this.x*e,this.y*e)},window.Point.prototype.divideBy=function(e){return this.debugIfFloats(),e instanceof Point?new this.constructor(this.x/e.x,this.y/e.y):new this.constructor(this.x/e,this.y/e)},window.Point.prototype.floorDivideBy=function(e){return this.debugIfFloats(),e instanceof Point?new this.constructor(Math.floor(this.x/e.x),Math.floor(this.y/e.y)):new this.constructor(Math.floor(this.x/e),Math.floor(this.y/e))},window.Point.prototype.toLocalCoordinatesOf=function(e){return new this.constructor(this.x-e.left(),this.y-e.top())},window.Point.prototype.r=function(){var e;return e=this.multiplyBy(this),Math.sqrt(e.x+e.y)},window.Point.prototype.degrees=function(){var e,t;return 0===this.x?this.y>=0?90:270:(e=this.y/this.x,t=Math.atan(e),this.x>=0?this.y>=0?radiansToDegrees(t):360+radiansToDegrees(t):180+radiansToDegrees(t))},window.Point.prototype.theta=function(){var e,t;return 0===this.x?this.y>=0?degreesToRadians(90):degreesToRadians(270):(e=this.y/this.x,t=Math.atan(e),this.x>=0?this.y>=0?t:degreesToRadians(360)+t:degreesToRadians(180)+t)},window.Point.prototype.distanceTo=function(e){return e.subtract(this).r()},window.Point.prototype.rotate=function(e,t){var n;return n=this.subtract(t),"right"===e?new this.constructor(-n.y,n.y).add(t):"left"===e?new this.constructor(n.y,-n.y).add(t):t.subtract(n)},window.Point.prototype.flip=function(e,t){return"vertical"===e?new this.constructor(this.x,2*t.y-this.y):new this.constructor(2*t.x-this.x,this.y)},window.Point.prototype.distanceAngle=function(e,t){var n,o,i;return(n=t)>270?n-=360:n<-270&&(n+=360),-90<=n&&n<=90?(o=Math.sin(degreesToRadians(n))*e,i=Math.sqrt(e*e-o*o),new this.constructor(o+this.x,this.y-i)):(o=Math.sin(degreesToRadians(180-n))*e,i=Math.sqrt(e*e-o*o),new this.constructor(o+this.x,this.y+i))},window.Point.prototype.scaleBy=function(e){return this.multiplyBy(e)},window.Point.prototype.translateBy=function(e){return this.add(e)},window.Point.prototype.rotateBy=function(e,t=new this.constructor(0,0)){var n,o,i;return o=(n=this.subtract(t)).r(),i=e-n.theta(),new this.constructor(t.x+o*Math.cos(i),t.y-o*Math.sin(i))},window.Point.prototype.asArray=function(){return[this.x,this.y]},window.Point.prototype.corner=function(e){return new Rectangle(this.x,this.y,e.x,e.y)},window.Point.prototype.rectangle=function(e){var t,n;return n=this.min(e),t=this.max(e),new Rectangle(n.x,n.y,t.x,t.y)},window.Point.prototype.extent=function(e){var t;return t=this.add(e),new Rectangle(this.x,this.y,t.x,t.y)},window.Point.instances=new Set,window.Rectangle=function(e=0,t=0,n=0,o=0){"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof o?(this.origin=new Point(e,t),this.corner=new Point(n,o)):e instanceof Point&&"number"==typeof t&&"number"==typeof n?(this.origin=e,this.corner=new Point(t,n)):"number"==typeof e&&"number"==typeof t&&n instanceof Point?(this.origin=new Point(e,t),this.corner=n):e instanceof Point&&t instanceof Point?(this.origin=e,this.corner=t):e instanceof Point?(this.origin=e,this.corner=new Point(0,0)):e instanceof Rectangle&&(this.origin=e.origin,this.corner=t.origin),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Rectangle,"name",{value:"Rectangle"}),window.Rectangle.__super__=Object.prototype,window.Rectangle.augmentWith(window.DeepCopierMixin,"Rectangle"),window.Rectangle.prototype.origin=nil,window.Rectangle.prototype.corner=nil,window.Rectangle.prototype.toString=function(){return"["+this.origin+" | "+this.extent()+"]"},window.Rectangle.prototype.onlyContainingIntegers=function(){return Math.floor(this.origin.x)===this.origin.x&&Math.floor(this.origin.y)===this.origin.y&&Math.floor(this.corner.x)===this.corner.x&&Math.floor(this.corner.y)===this.corner.y},window.Rectangle.prototype.debugIfFloats=function(){},window.Rectangle.prototype.copy=function(){return this.debugIfFloats(),new this.constructor(this.left(),this.top(),this.right(),this.bottom())},window.Rectangle.prototype.setTo=function(e,t,n,o){return this.debugIfFloats(),this.origin=new Point(e||(0===e?0:this.left()),t||(0===t?0:this.top())),this.corner=new Point(n||(0===n?0:this.right()),o||(0===o?0:this.bottom()))},window.Rectangle.prototype.setBoundsWidthAndHeight=function(e,t){var n;return n=this.copy(),"number"==typeof e&&"number"==typeof t?n.corner=new Point(e+n.origin.x,t+n.origin.y):e instanceof Point&&(n.corner=new Point(e.x+n.origin.x,e.y+n.origin.y)),n},window.Rectangle.prototype.area=function(){var e;return this.debugIfFloats(),(e=this.width())<0?0:Math.max(e*this.height(),0)},window.Rectangle.prototype.bottom=function(){return this.debugIfFloats(),this.corner.y},window.Rectangle.prototype.bottomCenter=function(){return this.debugIfFloats(),new Point(this.center().x,this.bottom())},window.Rectangle.prototype.bottomLeft=function(){return this.debugIfFloats(),new Point(this.origin.x,this.corner.y)},window.Rectangle.prototype.bottomRight=function(){return this.debugIfFloats(),this.corner.copy()},window.Rectangle.prototype.boundingBox=function(){return this.debugIfFloats(),this},window.Rectangle.prototype.center=function(){return this.debugIfFloats(),this.origin.add(this.corner.subtract(this.origin).floorDivideBy(2))},window.Rectangle.prototype.extent=function(){return this.debugIfFloats(),this.corner.subtract(this.origin)},window.Rectangle.prototype.isEmpty=function(){return this.debugIfFloats(),this.width()<=0||this.height()<=0},window.Rectangle.prototype.isNotEmpty=function(){return!this.isEmpty()},window.Rectangle.prototype.height=function(){return this.debugIfFloats(),this.corner.y-this.origin.y},window.Rectangle.prototype.left=function(){return this.debugIfFloats(),this.origin.x},window.Rectangle.prototype.leftCenter=function(){return this.debugIfFloats(),new Point(this.left(),this.center().y)},window.Rectangle.prototype.right=function(){return this.debugIfFloats(),this.corner.x},window.Rectangle.prototype.rightCenter=function(){return this.debugIfFloats(),new Point(this.right(),this.center().y)},window.Rectangle.prototype.top=function(){return this.debugIfFloats(),this.origin.y},window.Rectangle.prototype.topCenter=function(){return this.debugIfFloats(),new Point(this.center().x,this.top())},window.Rectangle.prototype.topLeft=function(){return this.debugIfFloats(),this.origin},window.Rectangle.prototype.topRight=function(){return this.debugIfFloats(),new Point(this.corner.x,this.origin.y)},window.Rectangle.prototype.width=function(){return this.debugIfFloats(),this.corner.x-this.origin.x},window.Rectangle.prototype.position=function(){return this.debugIfFloats(),this.origin},window.Rectangle.prototype.eq=function(e){return null!=e&&(this.debugIfFloats(),this.origin.eq(e.origin)&&this.corner.eq(e.corner))},window.Rectangle.prototype.abs=function(){var e,t;return this.debugIfFloats(),t=this.origin.abs(),e=this.corner.max(t),t.corner(e)},window.Rectangle.prototype.insetBy=function(e){var t;return this.debugIfFloats(),(t=new this.constructor).origin=this.origin.add(e),t.corner=this.corner.subtract(e),t.debugIfFloats(),t},window.Rectangle.prototype.rightHalf=function(){var e;return this.debugIfFloats(),(e=new this.constructor).origin=this.origin.add(new Point(Math.round(this.width()/2),0)),e.corner=this.corner.copy(),e.debugIfFloats(),e},window.Rectangle.prototype.expandBy=function(e){var t;return this.debugIfFloats(),(t=new this.constructor).origin=this.origin.subtract(e),t.corner=this.corner.add(e),t.debugIfFloats(),t},window.Rectangle.prototype.growBy=function(e){var t;return this.debugIfFloats(),(t=new this.constructor).origin=this.origin.copy(),t.corner=this.corner.add(e),t.debugIfFloats(),t},window.Rectangle.prototype.intersect=function(e){var t,n,o;return this.debugIfFloats(),t=this.zeroIfNegative(),n=e.zeroIfNegative(),t.isEmpty()||n.isEmpty()?this.constructor.EMPTY:((o=new this.constructor).origin=t.origin.max(n.origin),o.corner=t.corner.min(n.corner),(o=o.zeroIfNegative()).debugIfFloats(),o)},window.Rectangle.prototype.zeroIfNegative=function(){return this.debugIfFloats(),this.isEmpty()?this.constructor.EMPTY:this},window.Rectangle.prototype.merge=function(e){var t,n,o;return this.debugIfFloats(),t=this.zeroIfNegative(),n=e.zeroIfNegative(),t.isEmpty()?n:n.isEmpty()?t:((o=new this.constructor).origin=t.origin.min(n.origin),o.corner=t.corner.max(e.corner),o.debugIfFloats(),o)},window.Rectangle.prototype.round=function(){return this.origin.round().corner(this.corner.round())},window.Rectangle.prototype.floor=function(){return this.origin.floor().corner(this.corner.floor())},window.Rectangle.prototype.ceil=function(){return this.origin.ceil().corner(this.corner.ceil())},window.Rectangle.prototype.spread=function(){return this.debugIfFloats(),this.origin.floor().corner(this.corner.ceil())},window.Rectangle.prototype.toLocalCoordinatesOf=function(e){return new this.constructor(this.origin.x-e.left(),this.origin.y-e.top(),this.corner.x-e.left(),this.corner.y-e.top())},window.Rectangle.prototype.containsPoint=function(e){return this.debugIfFloats(),this.origin.le(e)&&e.lt(this.corner)},window.Rectangle.prototype.containsRectangle=function(e){return this.debugIfFloats(),e.origin.ge(this.origin)&&e.corner.le(this.corner)},window.Rectangle.prototype.isIntersecting=function(e){var t,n;return this.debugIfFloats(),n=e.origin,(t=e.corner).x>=this.origin.x&&t.y>=this.origin.y&&n.x<=this.corner.x&&n.y<=this.corner.y},window.Rectangle.prototype.scaleBy=function(e){var t,n;return this.debugIfFloats(),n=this.origin.multiplyBy(e),t=this.corner.multiplyBy(e),new this.constructor(n.x,n.y,t.x,t.y)},window.Rectangle.prototype.translateBy=function(e){var t,n;return this.debugIfFloats(),n=this.origin.add(e),t=this.corner.add(e),new this.constructor(n.x,n.y,t.x,t.y)},window.Rectangle.prototype.translateTo=function(e){var t;return this.debugIfFloats(),t=this.corner,new this.constructor(e.x,e.y,t.x,t.y)},window.Rectangle.prototype.asArray=function(){return this.debugIfFloats(),[this.left(),this.top(),this.right(),this.bottom()]},window.Rectangle.prototype.asArray_xywh=function(){return this.debugIfFloats(),[this.left(),this.top(),this.width(),this.height()]},window.Rectangle.EMPTY=new Rectangle,window.Rectangle.instances=new Set,window.BlinkerMorph=function(e=2){this.fps=e,world.steppingWdgts.add(this),BlinkerMorph.__super__.constructor.call(this),this.appearance=new RectangularAppearance(this),this.color=new Color(0,0,0),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BlinkerMorph,"name",{value:"BlinkerMorph"}),window.BlinkerMorph.__super__=window.Widget.prototype,window.BlinkerMorph=extend(window.BlinkerMorph,window.Widget),window.BlinkerMorph.prototype.step=function(){if("undefined"==typeof Automator||null===Automator||!Automator.animationsPacingControl||Automator.state===Automator.IDLE)return this.toggleVisibility()},window.BlinkerMorph.instances=new Set,window.CanvasGlassTopWdgt=function(){CanvasGlassTopWdgt.__super__.constructor.apply(this,arguments),this.color=nil,this.isLockingToPanels=!0,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CanvasGlassTopWdgt,"name",{value:"CanvasGlassTopWdgt"}),window.CanvasGlassTopWdgt.__super__=window.CanvasMorph.prototype,window.CanvasGlassTopWdgt=extend(window.CanvasGlassTopWdgt,window.CanvasMorph),window.CanvasGlassTopWdgt.prototype.underlyingCanvasMorph=nil,window.CanvasGlassTopWdgt.prototype.defaultRejectDrags=!0,window.CanvasGlassTopWdgt.instances=new Set,window.CaretMorph=function(e){var t;this.target=e,this.slot=this.target.text.length,CaretMorph.__super__.constructor.call(this),1===(null!=(t=this.target.undoHistory)?t.length:void 0)&&this.target.undoHistory[this.target.undoHistory.length-1].isJustFirstClickToPositionCursor&&(this.target.undoHistory=[]),this.minimumExtent=new Point(1,1),this.target instanceof TextMorph&&"left"!==this.target.alignment&&this.target.setAlignmentToLeft(),this.adjustAccordingToTargetText(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()};Object.defineProperty(window.CaretMorph,"name",{value:"CaretMorph"}),window.CaretMorph.__super__=window.BlinkerMorph.prototype,window.CaretMorph=extend(window.CaretMorph,window.BlinkerMorph),window.CaretMorph.prototype.keyDownEventUsed=!1,window.CaretMorph.prototype.target=nil,window.CaretMorph.prototype.slot=nil,window.CaretMorph.prototype.viewPadding=1,window.CaretMorph.prototype.currentCaretFontSize=nil,window.CaretMorph.prototype.adjustAccordingToTargetText=function(){return this.updateDimension(),this.gotoSlot(this.slot)},window.CaretMorph.prototype.justBeforeBeingPainted=function(){return this.adjustAccordingToTargetText()},window.CaretMorph.prototype.updateDimension=function(){var e;if((e=fontHeight(this.target.actualFontSizeUsedInRendering()))!==this.currentCaretFontSize)return this.currentCaretFontSize=e,this.rawSetExtent(new Point(Math.max(Math.floor(e/20),1),e))},window.CaretMorph.prototype.processKeyPress=function(e,t,n,o,i,r){return this.keyDownEventUsed?(this.keyDownEventUsed=!1,this.updateDimension(),nil):(o?this.ctrl(e,n):r?this.cmd(e,n):this.insert(t,n),this.target.escalateEvent("reactToKeystroke",e,t,n,o,i,r),this.updateDimension())},window.CaretMorph.prototype.processKeyDown=function(e,t,n,o,i){if(this.keyDownEventUsed=!1,n)return this.ctrl(e,t),this.target.escalateEvent("reactToKeystroke",e,nil,t,n,o,i),void this.updateDimension();if(i)return this.cmd(e,t),this.target.escalateEvent("reactToKeystroke",e,nil,t,n,o,i),void this.updateDimension();switch(e){case 32:this.insert(" "),this.keyDownEventUsed=!0;break;case 37:this.goLeft(t),this.keyDownEventUsed=!0;break;case 39:this.goRight(t),this.keyDownEventUsed=!0;break;case 38:this.goUp(t),this.keyDownEventUsed=!0;break;case 40:this.goDown(t),this.keyDownEventUsed=!0;break;case 36:this.goHome(t),this.keyDownEventUsed=!0;break;case 35:this.goEnd(t),this.keyDownEventUsed=!0;break;case 46:this.deleteRight(),this.keyDownEventUsed=!0;break;case 8:this.deleteLeft(),this.keyDownEventUsed=!0;break;case 9:if(this.keyDownEventUsed=!0,null!=this.target){if(t)return this.target.backTab(this.target);if(!(this.target instanceof SimplePlainTextWdgt))return this.target.tab(this.target);this.insert("  "),this.keyDownEventUsed=!0}break;case 13:"StringMorph"===this.target.constructor.name||"StringMorph2"===this.target.constructor.name?this.accept():this.insert("\n"),this.keyDownEventUsed=!0;break;case 27:this.cancel(),this.keyDownEventUsed=!0}return this.target.escalateEvent("reactToKeystroke",e,nil,t,n,o,i),this.updateDimension()},window.CaretMorph.prototype.processCut=function(e){return world.outstandingTimerTriggeredOperationsCounter.push(!0),window.setTimeout(()=>(this.deleteLeft(),world.outstandingTimerTriggeredOperationsCounter.pop()),50,!0)},window.CaretMorph.prototype.processCopy=function(e){},window.CaretMorph.prototype.processPaste=function(e){return world.outstandingTimerTriggeredOperationsCounter.push(!0),window.setTimeout(()=>(this.insert(e),world.outstandingTimerTriggeredOperationsCounter.pop()),50,!0)},window.CaretMorph.prototype.gotoSlot=function(e,t){var n,o,i,r,l,a;if(i=this.target.text.length,this.slot=e<0?0:e>i?i:e,null!=(r=this.target.slotCoordinates(this.slot))&&(this.parent&&this.target.isScrollable&&(a=this.parent.right()-this.viewPadding,o=this.parent.left()+this.viewPadding,r.x>a&&(this.target.fullRawMoveLeftSideTo(this.target.left()+a-r.x),r.x=a),r.x<o&&(o=Math.min(this.parent.left(),o),this.target.fullRawMoveLeftSideTo(this.target.left()+o-r.x),r.x=o),this.target.right()<a&&a-this.target.width()<o&&(r.x+=a-this.target.right(),this.target.fullRawMoveRightSideTo(a))),this.show(),this.fullRawMoveTo(r.floor()),this.amIDirectlyInsideScrollPanelWdgt()&&this.target.isScrollable&&this.parent.parent.scrollCaretIntoView(this)),t&&0===(null!=(l=this.target.undoHistory)?l.length:void 0))return"function"==typeof(n=this.target).pushUndoState?n.pushUndoState(this.slot,!0):void 0},window.CaretMorph.prototype.goLeft=function(e){return e||null==this.target.firstSelectedSlot()?(this.updateSelection(e),this.gotoSlot(this.slot-1),this.updateSelection(e),this.clearSelectionIfStartAndEndMeet(e)):(this.gotoSlot(this.target.firstSelectedSlot()),this.updateSelection(e)),this.target.caretHorizPositionForVertMovement=this.slot},window.CaretMorph.prototype.goRight=function(e,t){return e||null==this.target.lastSelectedSlot()?(this.updateSelection(e),this.gotoSlot(this.slot+(t||1)),this.updateSelection(e),this.clearSelectionIfStartAndEndMeet(e)):(this.gotoSlot(this.target.lastSelectedSlot()),this.updateSelection(e)),this.target.caretHorizPositionForVertMovement=this.slot},window.CaretMorph.prototype.goUp=function(e){return e||null==this.target.lastSelectedSlot()?(this.updateSelection(e),this.gotoSlot(this.target.upFrom(this.slot)),this.updateSelection(e),this.clearSelectionIfStartAndEndMeet(e)):(this.gotoSlot(this.target.firstSelectedSlot()),this.updateSelection(e))},window.CaretMorph.prototype.goDown=function(e){return e||null==this.target.lastSelectedSlot()?(this.updateSelection(e),this.gotoSlot(this.target.downFrom(this.slot)),this.updateSelection(e),this.clearSelectionIfStartAndEndMeet(e)):(this.gotoSlot(this.target.lastSelectedSlot()),this.updateSelection(e))},window.CaretMorph.prototype.goHome=function(e){return this.updateSelection(e),this.gotoSlot(this.target.startOfLine(this.slot)),this.updateSelection(e),this.clearSelectionIfStartAndEndMeet(e)},window.CaretMorph.prototype.goEnd=function(e){return this.updateSelection(e),this.gotoSlot(this.target.endOfLine(this.slot)),this.updateSelection(e),this.clearSelectionIfStartAndEndMeet(e)},window.CaretMorph.prototype.gotoPos=function(e){var t;return t=this.target.slotAt(e),this.gotoSlot(t),this.show(),t},window.CaretMorph.prototype.clearSelectionIfStartAndEndMeet=function(e){if(e&&this.target.startMark===this.target.endMark)return this.target.clearSelection()},window.CaretMorph.prototype.updateSelection=function(e){return e?null==this.target.endMark&&null==this.target.startMark?this.target.selectBetween(this.slot,this.slot):this.target.endMark!==this.slot?this.target.setEndMark(this.slot):void 0:this.target.clearSelection()},window.CaretMorph.prototype.accept=function(){return world.stopEditing(),this.escalateEvent("accept",nil)},window.CaretMorph.prototype.cancel=function(){return world.stopEditing(),this.escalateEvent("cancel",nil)},window.CaretMorph.prototype.undo=function(e){var t,n;if(null!=this.target.undoHistory)if(e){if(null!=(t=this.target.popRedoState()))return this.bringTextAndCaretToState(t)}else if(this.target.undoHistory.length>1)return this.target.popUndoState(),n=this.target.undoHistory[this.target.undoHistory.length-1],this.bringTextAndCaretToState(n)},window.CaretMorph.prototype.bringTextAndCaretToState=function(e){return this.target.setText(e.textContent,nil,nil),this.gotoSlot(e.cursorPos),null!=e.selectionStart&&null!=e.selectionEnd?this.target.selectBetween(e.selectionStart,e.selectionEnd):this.target.clearSelection()},window.CaretMorph.prototype.insert=function(e,t){var n,o,i;if(!this.target.isNumeric||!isNaN(parseFloat(e))||"-"===e||"."===e)return"function"==typeof(n=this.target).pushUndoState&&n.pushUndoState(this.slot),""!==this.target.selection()&&(this.gotoSlot(this.target.firstSelectedSlot()),this.target.deleteSelection()),i=(i=this.target.text).slice(0,this.slot)+e+i.slice(this.slot),this.target.setText(i,nil,nil),this.goRight(!1,e.length),this.updateDimension(),"function"==typeof(o=this.target).pushUndoState?o.pushUndoState(this.slot):void 0},window.CaretMorph.prototype.ctrl=function(e,t){switch(e){case 97:case 65:return this.target.selectAll();case 90:return this.undo(t);case 123:return this.insert("{");case 125:return this.insert("}");case 91:return this.insert("[");case 93:return this.insert("]");case 64:return this.insert("@")}},window.CaretMorph.prototype.cmd=function(e,t){switch(e){case 65:return this.target.selectAll();case 90:return this.undo(t)}},window.CaretMorph.prototype.deleteRight=function(){var e;return""!==this.target.selection()?(this.gotoSlot(this.target.firstSelectedSlot()),this.target.deleteSelection()):(e=(e=this.target.text).slice(0,this.slot)+e.slice(this.slot+1),this.target.setText(e,nil,nil))},window.CaretMorph.prototype.deleteLeft=function(){var e;return this.target.selection()?(this.gotoSlot(this.target.firstSelectedSlot()),this.target.deleteSelection()):(e=this.target.text,this.target.setText(e.substring(0,this.slot-1)+e.substr(this.slot),nil,nil),this.goLeft()),this.updateSelection(!1),this.gotoSlot(this.slot),this.updateSelection(!1),this.clearSelectionIfStartAndEndMeet(!1)},window.CaretMorph.prototype.inspectKeyEvent=function(e){return this.inform("Key pressed: "+String.fromCharCode(e.charCode)+"\n------------------------\ncharCode: "+e.charCode+"\nkeyCode: "+e.keyCode+"\naltKey: "+e.altKey+"\nctrlKey: "+e.ctrlKey+"\ncmdKey: "+e.metaKey)},window.CaretMorph.instances=new Set,window.CircleBoxMorph=function(){CircleBoxMorph.__super__.constructor.call(this),this.appearance=new CircleBoxyAppearance(this),this.silentRawSetExtent(new Point(20,100)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CircleBoxMorph,"name",{value:"CircleBoxMorph"}),window.CircleBoxMorph.__super__=window.Widget.prototype,window.CircleBoxMorph=extend(window.CircleBoxMorph,window.Widget),window.CircleBoxMorph.prototype.colloquialName=function(){return"circle-box"},window.CircleBoxMorph.prototype.autoOrientation=function(){return this.height()>this.width()?"vertical":"horizontal"},window.CircleBoxMorph.instances=new Set,window.CircleBoxyAppearance=function(e){CircleBoxyAppearance.__super__.constructor.call(this,e),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CircleBoxyAppearance,"name",{value:"CircleBoxyAppearance"}),window.CircleBoxyAppearance.__super__=window.Appearance.prototype,window.CircleBoxyAppearance=extend(window.CircleBoxyAppearance,window.Appearance),window.CircleBoxyAppearance.prototype.autoOrientation=function(){return this.morph.height()>this.morph.width()?"vertical":"horizontal"},window.CircleBoxyAppearance.prototype.calculateKeyPoints=function(){var e,t,n,o,i,r;return"vertical"===this.autoOrientation()?(n=this.morph.width()/2,i=this.morph.center().x,e=new Point(i,this.morph.top()+n).round(),t=new Point(i,this.morph.bottom()-n).round(),o=this.morph.topLeft().add(new Point(0,n)).corner(this.morph.bottomRight().subtract(new Point(0,n)))):(n=this.morph.height()/2,r=this.morph.center().y,e=new Point(this.morph.left()+n,r).round(),t=new Point(this.morph.right()-n,r).round(),o=this.morph.topLeft().add(new Point(n,0)).corner(this.morph.bottomRight().subtract(new Point(n,0)))),[n,e,t,o]},window.CircleBoxyAppearance.prototype.isTransparentAt=function(e){var t,n,o,i;return!this.morph.boundsContainPoint(e)||([o,t,n,i]=this.calculateKeyPoints(),!(t.distanceTo(e)<o||n.distanceTo(e)<o||i.containsPoint(e)))},window.CircleBoxyAppearance.prototype.paintIntoAreaOrBlitFromBackBuffer=function(e,t,n){var o,i,r,l,a,s,d,h,p,c,u,w,g,T;return this.morph.preliminaryCheckNothingToDraw(t,e)?nil:([i,w,g,o,r,T,d]=this.morph.calculateKeyValues(e,t),T<1||d<1||i.isEmpty()?nil:(e.save(),e.clipToRectangle(o,r,T,d),e.globalAlpha=(null!=n?n.alpha:1)*this.morph.alpha,e.scale(ceilPixelRatio,ceilPixelRatio),h=this.morph.position(),e.translate(h.x,h.y),[c,l,a,u]=this.calculateKeyPoints(),p=[l.toLocalCoordinatesOf(this.morph),a.toLocalCoordinatesOf(this.morph)],s=this.morph.color,e.fillStyle=null!=n?"black":s.toString(),e.beginPath(),e.arc(p[0].x,p[0].y,c,0,2*Math.PI),e.arc(p[1].x,p[1].y,c,0,2*Math.PI),u=(u=u.floor()).toLocalCoordinatesOf(this.morph),e.moveTo(u.origin.x,u.origin.y),e.lineTo(u.origin.x+u.width(),u.origin.y),e.lineTo(u.origin.x+u.width(),u.origin.y+u.height()),e.lineTo(u.origin.x,u.origin.y+u.height()),e.closePath(),e.fill(),e.restore(),this.paintHighlight(e,o,r,T)))},window.CircleBoxyAppearance.instances=new Set,window.ClippingBoxMorph=function(){window.ClippingBoxMorph.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ClippingBoxMorph,"name",{value:"ClippingBoxMorph"}),window.ClippingBoxMorph.__super__=window.BoxMorph.prototype,window.ClippingBoxMorph=extend(window.ClippingBoxMorph,window.BoxMorph),window.ClippingBoxMorph.augmentWith(window.ClippingAtRectangularBoundsMixin,"ClippingBoxMorph"),window.ClippingBoxMorph.instances=new Set,window.SliderButtonMorph=function(){SliderButtonMorph.__super__.constructor.apply(this,arguments),this.isLockingToPanels=!1,this.color=this.normalColor.copy(),this.noticesTransparentClick=!0,this.alpha=.4,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SliderButtonMorph,"name",{value:"SliderButtonMorph"}),window.SliderButtonMorph.__super__=window.CircleBoxMorph.prototype,window.SliderButtonMorph=extend(window.SliderButtonMorph,window.CircleBoxMorph),window.SliderButtonMorph.prototype.highlightColor=new Color(110,110,110),window.SliderButtonMorph.prototype.pressColor=new Color(100,100,100),window.SliderButtonMorph.prototype.normalColor=new Color(0,0,0),window.SliderButtonMorph.prototype.state=0,window.SliderButtonMorph.prototype.STATE_NORMAL=0,window.SliderButtonMorph.prototype.STATE_HIGHLIGHTED=1,window.SliderButtonMorph.prototype.STATE_PRESSED=2,window.SliderButtonMorph.prototype.detachesWhenDragged=function(){return!(this.parent instanceof SliderMorph)},window.SliderButtonMorph.prototype.reLayout=function(){var e,t,n,o,i;if(SliderButtonMorph.__super__.reLayout.call(this),null!=this.parent)return i=this.parent.value,isNaN(i)&&(i=0),"vertical"===this.parent.autoOrientation()?(t=this.parent.width()-2,e=Math.max(t,Math.round(this.parent.height()*this.parent.ratio())),this.silentRawSetExtent(new Point(t,e)),n=1,o=Math.max(0,Math.min(Math.round((i-this.parent.start)*this.parent.unitSize()),this.parent.height()-this.height())),this.parent.smallestValueIsAtBottomEnd&&(o=this.parent.height()-(o+this.height()))):(e=this.parent.height()-2,t=Math.max(e,Math.round(this.parent.width()*this.parent.ratio())),this.silentRawSetExtent(new Point(t,e)),o=1,n=Math.max(0,Math.min(Math.round((i-this.parent.start)*this.parent.unitSize()),this.parent.width()-this.width()))),this.silentFullRawMoveTo(new Point(n,o).add(this.parent.position())),this.notifyChildrenThatParentHasReLayouted()},window.SliderButtonMorph.prototype.grabsToParentWhenDragged=function(){return!(this.parent instanceof SliderMorph)&&SliderButtonMorph.__super__.grabsToParentWhenDragged.apply(this,arguments)},window.SliderButtonMorph.prototype.nonFloatDragging=function(e,t,n){var o,i,r,l;if(this.offset=t.subtract(e),world.hand.mouseButton&&this.visibleBasedOnIsVisibleProperty()&&!this.isCollapsed()&&(l=this.position(),"vertical"===this.parent.autoOrientation()?(i=this.left(),r=Math.max(Math.min(this.offset.y,this.parent.bottom()-this.height()),this.parent.top())):(r=this.top(),i=Math.max(Math.min(this.offset.x,this.parent.right()-this.width()),this.parent.left())),o=new Point(i,r),!l.eq(o)))return this.fullRawMoveTo(o),this.parent.updateValue()},window.SliderButtonMorph.prototype.endOfNonFloatDrag=function(){if(this.state!==this.STATE_NORMAL)return this.state=this.STATE_NORMAL,this.color=this.normalColor.copy(),this.changed()},window.SliderButtonMorph.prototype.setHiglightedColor=function(){if(this.state!==this.STATE_HIGHLIGHTED)return this.state=this.STATE_HIGHLIGHTED,this.color=this.highlightColor.copy(),this.changed()},window.SliderButtonMorph.prototype.setNormalColor=function(){if(this.state!==this.STATE_NORMAL)return this.state=this.STATE_NORMAL,this.color=this.normalColor.copy(),this.changed()},window.SliderButtonMorph.prototype.setPressedColor=function(){if(this.state!==this.STATE_PRESSED)return this.state=this.STATE_PRESSED,this.color=this.pressColor.copy(),this.changed()},window.SliderButtonMorph.prototype.mouseMove=function(){if(this.state!==this.STATE_PRESSED&&!world.hand.isThisPointerDraggingSomething())return this.setHiglightedColor()},window.SliderButtonMorph.prototype.mouseEnter=function(){if(!world.hand.isThisPointerDraggingSomething())return this.setHiglightedColor()},window.SliderButtonMorph.prototype.mouseLeave=function(){if(!world.hand.isThisPointerDraggingSomething())return this.setNormalColor()},window.SliderButtonMorph.prototype.mouseDownLeft=function(e){return this.bringToForeground(),this.setPressedColor()},window.SliderButtonMorph.prototype.mouseClickLeft=function(){return this.bringToForeground(),this.setHiglightedColor()},window.SliderButtonMorph.instances=new Set,window.SliderMorph=function(e=1,t=100,n=50,o=10,i=new Color(0,0,0),r=!1){this.start=e,this.stop=t,this.value=n,this.size=o,this.color=i,this.smallestValueIsAtBottomEnd=r,this.button=new SliderButtonMorph,SliderMorph.__super__.constructor.call(this,this.alpha=.1),this.silentRawSetExtent(new Point(20,100)),this.silentAdd(this.button),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SliderMorph,"name",{value:"SliderMorph"}),window.SliderMorph.__super__=window.CircleBoxMorph.prototype,window.SliderMorph=extend(window.SliderMorph,window.CircleBoxMorph),window.SliderMorph.augmentWith(window.ControllerMixin,"SliderMorph"),window.SliderMorph.prototype.target=nil,window.SliderMorph.prototype.action=nil,window.SliderMorph.prototype.start=nil,window.SliderMorph.prototype.stop=nil,window.SliderMorph.prototype.value=nil,window.SliderMorph.prototype.size=nil,window.SliderMorph.prototype.offset=nil,window.SliderMorph.prototype.button=nil,window.SliderMorph.prototype.argumentToAction=nil,window.SliderMorph.prototype.smallestValueIsAtBottomEnd=!1,window.SliderMorph.prototype.idealRatioWidthToHeight=1/4,window.SliderMorph.prototype.colloquialName=function(){return"slider"},window.SliderMorph.prototype.initialiseDefaultVerticalStackLayoutSpec=function(){if(!(this.layoutSpecDetails instanceof VerticalStackLayoutSpec))return this.layoutSpecDetails=new VerticalStackLayoutSpec(0)},window.SliderMorph.prototype.iHaveBeenAddedTo=function(e,t){return this.reLayout(),null!=this.button&&this.button instanceof SliderButtonMorph&&this.button.reLayout(),this.changed()},window.SliderMorph.prototype.rawSetExtent=function(e){if(!e.eq(this.extent()))return this.breakNumberOfRawMovesAndResizesCaches(),SliderMorph.__super__.rawSetExtent.call(this,e),this.button.reLayout()},window.SliderMorph.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return this.layoutSpecDetails=new WindowContentLayoutSpec(PreferredSize.THIS_ONE_I_HAVE_NOW,PreferredSize.THIS_ONE_I_HAVE_NOW,0),this.layoutSpecDetails.resizerCanOverlapContents=!1},window.SliderMorph.prototype.rangeSize=function(){return this.stop-this.start},window.SliderMorph.prototype.ratio=function(){return this.size/this.rangeSize()},window.SliderMorph.prototype.unitSize=function(){return null!=this.button&&this.button instanceof SliderButtonMorph?"vertical"===this.autoOrientation()?(this.height()-this.button.height())/this.rangeSize():(this.width()-this.button.width())/this.rangeSize():1},window.SliderMorph.prototype.setValue=function(e,t,n,o){if(o||n!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==n?getRandomInt(-2e4,2e4):n,this.value=Number(e),this.updateTarget(),this.reLayout(),this.button.reLayout(),this.changed()},window.SliderMorph.prototype.updateValue=function(){var e,t;if(t="vertical"===this.autoOrientation()?this.smallestValueIsAtBottomEnd?this.bottom()-this.button.bottom():this.button.top()-this.top():this.button.left()-this.left(),e=Math.round(t/this.unitSize()+this.start),this.value!==e)return this.setValue(e,nil,nil)},window.SliderMorph.prototype.bang=function(e,t,n,o){if(o||n!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==n?getRandomInt(-2e4,2e4):n,this.updateTarget()},window.SliderMorph.prototype.updateTarget=function(){this.action&&""!==this.action&&this.target[this.action].call(this.target,this.value,this.argumentToAction,this.connectionsCalculationToken)},window.SliderMorph.prototype.reactToTargetConnection=function(){return this.updateTarget()},window.SliderMorph.prototype.addMorphSpecificMenuEntries=function(e,t){return SliderMorph.__super__.addMorphSpecificMenuEntries.apply(this,arguments),t.addLine(),t.addMenuItem("show value",!0,this,"showValue","display a dialog box\nshowing the selected number"),t.addMenuItem("floor...",!0,this,(function(){return this.prompt(t.title+"\nfloor:",this.setStart,this.start.toString(),nil,0,this.stop-this.size,!0)}),"set the minimum value\nwhich can be selected"),t.addMenuItem("ceiling...",!0,this,(function(){return this.prompt(t.title+"\nceiling:",this.setStop,this.stop.toString(),nil,this.start+this.size,100*this.size,!0)}),"set the maximum value\nwhich can be selected"),t.addMenuItem("button size...",!0,this,(function(){return this.prompt(t.title+"\nbutton size:",this.setSize,this.size.toString(),nil,1,this.stop-this.start,!0)}),"set the range\ncovered by\nthe slider button"),t.addLine(),world.isIndexPage?t.addMenuItem("connect to ➜",!0,this,"openTargetSelector","connect to\nanother widget"):t.addMenuItem("set target",!0,this,"openTargetSelector","choose another morph\nwhose numerical property\n will be controlled by this one")},window.SliderMorph.prototype.showValue=function(){return this.inform(this.value)},window.SliderMorph.prototype.userSetStart=function(e){return this.start=Math.max(e,this.stop)},window.SliderMorph.prototype.updateSpecs=function(e,t,n,o){return null!=e&&(this.start=e),null!=t&&(this.stop=t),null!=n&&(this.value=n),null!=o&&(this.size=o),this.reLayout(),this.button.reLayout(),this.parent!==this.target?this.changed():this.parent.fullChanged()},window.SliderMorph.prototype.setStart=function(e){var t,n;return"number"==typeof(n=null!=e.getValue?e.getValue():e)?this.start=Math.min(Math.max(n,0),this.stop-this.size):(t=parseFloat(n),isNaN(t)||(this.start=Math.min(Math.max(t,0),this.stop-this.size))),this.value=Math.max(this.value,this.start),this.updateTarget(),this.reLayout(),this.button.reLayout(),this.changed()},window.SliderMorph.prototype.setStop=function(e){var t,n;return"number"==typeof(n=null!=e.getValue?e.getValue():e)?this.stop=Math.max(n,this.start+this.size):(t=parseFloat(n),isNaN(t)||(this.stop=Math.max(t,this.start+this.size))),this.value=Math.min(this.value,this.stop),this.updateTarget(),this.reLayout(),this.button.reLayout(),this.changed()},window.SliderMorph.prototype.mouseDownLeft=function(e){return this.button.parent===this&&(this.parent instanceof ScrollPanelWdgt||this.parent instanceof PromptMorph)?(world.hand.nonFloatDragWdgtFarAwayToHere(this.button,e),this.button.setPressedColor()):this.escalateEvent("mouseDownLeft",e)},window.SliderMorph.prototype.setSize=function(e){var t,n;return"number"==typeof(n=null!=e.getValue?e.getValue():e)?this.size=Math.min(Math.max(n,1),this.stop-this.start):(t=parseFloat(n),isNaN(t)||(this.size=Math.min(Math.max(t,1),this.stop-this.start))),this.value=Math.min(this.value,this.stop-this.size),this.reLayout(),this.button.reLayout(),this.changed()},window.SliderMorph.prototype.openTargetPropertySelector=function(e,t,n){var o,i,r,l,a,s;for([a,o]=n.numericalSetters(),l=new MenuMorph(this,!1,this,!0,!0,"choose target property:"),i=r=0,s=a.length;0<=s?r<s:r>s;i=0<=s?++r:--r)l.addMenuItem(a[i],!0,this,"setTargetAndActionWithOnesPickedFromMenu",nil,nil,nil,nil,nil,n,o[i]);return 0===a.length&&(l=new MenuMorph(this,!1,this,!0,!0,"no target properties available")),l.popUpAtHand()},window.SliderMorph.prototype.stringSetters=function(e,t){return[e,t]=SliderMorph.__super__.stringSetters.call(this,e,t),e.push("bang!","value"),t.push("bang","setValue"),this.deduplicateSettersAndSortByMenuEntryString(e,t)},window.SliderMorph.prototype.numericalSetters=function(e,t){return[e,t]=SliderMorph.__super__.numericalSetters.call(this,e,t),e.push("bang!","value","start","stop","size"),t.push("bang","setValue","setStart","setStop","setSize"),this.deduplicateSettersAndSortByMenuEntryString(e,t)},window.SliderMorph.prototype.colorSetters=function(e,t){return[e,t]=SliderMorph.__super__.colorSetters.call(this,e,t),e.push("bang!"),t.push("bang"),this.deduplicateSettersAndSortByMenuEntryString(e,t)},window.SliderMorph.instances=new Set,window.StringFieldMorph=function(e="",t=100,n=12,o="sans-serif",i=!1,r=!1,l=!1){this.defaultContents=e,this.minTextWidth=t,this.fontSize=n,this.fontStyle=o,this.isBold=i,this.isItalic=r,this.isNumeric=l,StringFieldMorph.__super__.constructor.call(this),this.color=new Color(255,255,255),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.StringFieldMorph,"name",{value:"StringFieldMorph"}),window.StringFieldMorph.__super__=window.PanelWdgt.prototype,window.StringFieldMorph=extend(window.StringFieldMorph,window.PanelWdgt),window.StringFieldMorph.prototype.defaultContents=nil,window.StringFieldMorph.prototype.minTextWidth=nil,window.StringFieldMorph.prototype.fontSize=nil,window.StringFieldMorph.prototype.fontStyle=nil,window.StringFieldMorph.prototype.isBold=nil,window.StringFieldMorph.prototype.isItalic=nil,window.StringFieldMorph.prototype.isNumeric=nil,window.StringFieldMorph.prototype.text=nil,window.StringFieldMorph.prototype.isEditable=!0,window.StringFieldMorph.prototype.rawSetWidth=function(e){return StringFieldMorph.__super__.rawSetWidth.apply(this,arguments),this.text.rawSetWidth(e)},window.StringFieldMorph.prototype.calculateAndUpdateExtent=function(){var e,t;return t=this.text?this.getValue():this.defaultContents,e=new StringMorph(t,this.fontSize,this.fontStyle,this.isBold,this.isItalic,this.isNumeric),this.rawSetWidth(Math.max(this.minTextWidth,e.width()))},window.StringFieldMorph.prototype.reLayout=function(){var e;return StringFieldMorph.__super__.reLayout.call(this),e=this.text?this.getValue():this.defaultContents,null==this.text&&(this.text=new StringMorph(e,this.fontSize,this.fontStyle,this.isBold,this.isItalic,this.isNumeric),this.text.isNumeric=this.isNumeric,this.text.isEditable=this.isEditable,this.text.enableSelecting(),this.add(this.text)),this.text.fullRawMoveTo(this.position()),this.silentRawSetExtent(new Point(Math.max(this.width(),this.minTextWidth),this.text.height())),this.notifyChildrenThatParentHasReLayouted()},window.StringFieldMorph.prototype.getValue=function(){return this.text.text},window.StringFieldMorph.prototype.mouseClickLeft=function(e){return this.bringToForeground(),this.isEditable?this.text.edit():this.escalateEvent("mouseClickLeft",e)},window.StringFieldMorph.instances=new Set,window.StringFieldWdgt2=function(e="",t=100,n=12,o="sans-serif",i=!1,r=!1,l=!1){this.defaultContents=e,this.minTextWidth=t,this.fontSize=n,this.fontStyle=o,this.isBold=i,this.isItalic=r,this.isNumeric=l,StringFieldWdgt2.__super__.constructor.call(this),this.color=new Color(255,255,255),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.StringFieldWdgt2,"name",{value:"StringFieldWdgt2"}),window.StringFieldWdgt2.__super__=window.PanelWdgt.prototype,window.StringFieldWdgt2=extend(window.StringFieldWdgt2,window.PanelWdgt),window.StringFieldWdgt2.prototype.defaultContents=nil,window.StringFieldWdgt2.prototype.minTextWidth=nil,window.StringFieldWdgt2.prototype.fontSize=nil,window.StringFieldWdgt2.prototype.fontStyle=nil,window.StringFieldWdgt2.prototype.isBold=nil,window.StringFieldWdgt2.prototype.isItalic=nil,window.StringFieldWdgt2.prototype.isNumeric=nil,window.StringFieldWdgt2.prototype.text=nil,window.StringFieldWdgt2.prototype.isEditable=!0,window.StringFieldWdgt2.prototype.rawSetWidth=function(e){return StringFieldWdgt2.__super__.rawSetWidth.apply(this,arguments),this.text.rawSetWidth(300)},window.StringFieldWdgt2.prototype.calculateAndUpdateExtent=function(){var e,t;return t=this.text?this.getValue():this.defaultContents,(e=new StringMorph2(t,this.fontSize,this.fontStyle,this.isBold,this.isItalic,!1,this.isNumeric)).fittingSpecWhenBoundsTooSmall=FittingSpecTextInSmallerBounds.SCALEDOWN,this.rawSetWidth(Math.max(this.minTextWidth,e.width()))},window.StringFieldWdgt2.prototype.reLayout=function(){var e;return StringFieldWdgt2.__super__.reLayout.call(this),e=this.text?this.getValue():this.defaultContents,null==this.text&&(this.text=new StringMorph2(e,this.fontSize,this.fontStyle,this.isBold,this.isItalic,!1,this.isNumeric),this.text.isNumeric=this.isNumeric,this.text.isEditable=this.isEditable,this.text.enableSelecting(),this.text.fittingSpecWhenBoundsTooSmall=FittingSpecTextInSmallerBounds.SCALEDOWN,this.add(this.text)),this.text.fullRawMoveTo(this.position().add(new Point(5,2))),this.text.rawSetExtent(new Point(300,18)),this.silentRawSetExtent(new Point(this.width(),18)),this.notifyChildrenThatParentHasReLayouted()},window.StringFieldWdgt2.prototype.getValue=function(){return this.text.text},window.StringFieldWdgt2.prototype.mouseClickLeft=function(e){return this.bringToForeground(),this.isEditable?this.text.edit():this.escalateEvent("mouseClickLeft",e)},window.StringFieldWdgt2.instances=new Set,window.StringMorph=function(e=(""===text?"":"StringMorph"),t=12,n="sans-serif",o=!1,i=!1,r=!1,l=new Color(0,0,0),a=""){this.text=e,this.fontSize=t,this.fontStyle=n,this.isBold=o,this.isItalic=i,this.isNumeric=r,this.color=l,this.fontName=a,StringMorph.__super__.constructor.call(this),this.noticesTransparentClick=!0,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.StringMorph,"name",{value:"StringMorph"}),window.StringMorph.__super__=window.Widget.prototype,window.StringMorph=extend(window.StringMorph,window.Widget),window.StringMorph.augmentWith(window.BackBufferMixin,"StringMorph"),window.StringMorph.prototype.text="",window.StringMorph.prototype.fontSize=nil,window.StringMorph.prototype.fontName=nil,window.StringMorph.prototype.fontStyle=nil,window.StringMorph.prototype.isBold=nil,window.StringMorph.prototype.isItalic=nil,window.StringMorph.prototype.isEditable=!1,window.StringMorph.prototype.isNumeric=nil,window.StringMorph.prototype.isPassword=!1,window.StringMorph.prototype.isShowingBlanks=!1,window.StringMorph.prototype.blanksColor=new Color(180,140,140),window.StringMorph.prototype.isScrollable=!0,window.StringMorph.prototype.currentlySelecting=!1,window.StringMorph.prototype.startMark=nil,window.StringMorph.prototype.endMark=nil,window.StringMorph.prototype.markedTextColor=new Color(255,255,255),window.StringMorph.prototype.markedBackgoundColor=new Color(60,60,120),window.StringMorph.prototype.setText=function(e,t,n,o){if(o||n!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==n?getRandomInt(-2e4,2e4):n,null!=t&&(e=t.text.text),e+="",this.text!==e?(this.text=e,this.reLayout(),this.changed()):void 0},window.StringMorph.prototype.actualFontSizeUsedInRendering=function(){return this.fontSize},window.StringMorph.prototype.toString=function(){var e;return e=StringMorph.__super__.toString.call(this),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.hidingOfMorphsContentExtractInLabels?e:e+' ("'+this.text.slice(0,30).replace(/(?:\r\n|\r|\n)/g,"↵")+'...")'},window.StringMorph.prototype.getTextDescription=function(){return null!=this.textDescription?this.textDescription+" (adhoc description of string)":this.text.replace(/#\d*/,"").slice(0,30)+" (content of string)"},window.StringMorph.prototype.password=function(e,t){var n,o,i;for(n="",o=0,i=t;0<=i?o<i:o>i;0<=i?++o:--o)n+=e;return n},window.StringMorph.prototype.buildCanvasFontProperty=function(){var e;return e="",this.isBold&&(e+="bold "),this.isItalic&&(e+="italic "),e+this.fontSize+"px "+(this.fontName?this.fontName+", ":"")+this.fontStyle},window.StringMorph.prototype.widthOfText=function(e=this.text){return e=this.isPassword?this.password("*",e.length):e,world.canvasContextForTextMeasurements.font=this.buildCanvasFontProperty(),Math.ceil(Math.max(world.canvasContextForTextMeasurements.measureText(e).width,1))},window.StringMorph.prototype.reLayout=function(){var e;return StringMorph.__super__.reLayout.call(this),e=this.widthOfText(this.text),this.silentRawSetExtent(new Point(e,fontHeight(this.fontSize))),this.notifyChildrenThatParentHasReLayouted()},window.StringMorph.prototype.reflowText=function(){return this.reLayout()},window.StringMorph.prototype.createRefreshOrGetBackBuffer=function(){var e,t,n,o,i,r,l,a,s,d,h,p,c;if(r=this.extent().toString()+"-"+this.isPassword+"-"+this.isShowingBlanks+"-"+this.buildCanvasFontProperty()+"-"+this.alignment+"-"+this.color.toString()+"-"+hashCode(this.text)+"-"+this.startMark+"-"+this.endMark+"-"+this.markedBackgoundColor.toString(),null!=(i=world.cacheForImmutableBackBuffers.get(r)))return i;for(p=this.isPassword?this.password("*",this.text.length):this.text,c=this.widthOfText(this.text),(t=(e=newCanvas(new Point(c,this.height()).scaleBy(ceilPixelRatio))).getContext("2d")).scale(ceilPixelRatio,ceilPixelRatio),t.font=this.buildCanvasFontProperty(),t.textAlign="left",t.textBaseline="bottom",t.fillStyle=this.color.toString(),this.isShowingBlanks?this.renderWithBlanks(t,0,fontHeight(this.fontSize)):t.fillText(p,0,fontHeight(this.fontSize)),l=a=d=Math.min(this.startMark,this.endMark),h=Math.max(this.startMark,this.endMark);d<=h?a<h:a>h;l=d<=h?++a:--a)s=this.slotCoordinates(l).subtract(this.position()),n=p.charAt(l),t.fillStyle=this.markedBackgoundColor.toString(),t.fillRect(s.x,s.y,Math.ceil(t.measureText(n).width)+1,fontHeight(this.fontSize)),t.fillStyle=this.markedTextColor.toString(),t.fillText(n,s.x,fontHeight(this.fontSize));return o=[e,t],world.cacheForImmutableBackBuffers.set(r,o),o},window.StringMorph.prototype.renderWithBlanks=function(e,t=0,n){var o,i,r,l,a,s;return r=function(){return e.drawImage(o,Math.round(t),0),t+=a},a=Math.ceil(e.measureText(" ").width),i=(o=newCanvas(new Point(a,this.height()).scaleBy(ceilPixelRatio))).getContext("2d"),s=this.text.split(" "),l=!0,i.fillStyle=this.blanksColor.toString(),i.arc(a/2,o.height/2,a/2,degreesToRadians(0),degreesToRadians(360)),i.fill(),s.forEach((function(o){if(l||r(),l=!1,""!==o)return e.fillText(o,t,n),t+=Math.ceil(e.measureText(o).width)}))},window.StringMorph.prototype.slotCoordinates=function(e){var t,n,o,i,r;return n=this.isPassword?this.password("*",this.text.length):this.text,e!==(t=Math.min(Math.max(e,0),n.length))&&alert("something wrong - slot is out of range"),e=t,i=Math.ceil(this.widthOfText(n.substring(0,e))),o=this.left()+i,r=this.top(),new Point(o,r)},window.StringMorph.prototype.slotAt=function(e){var t,n,o;for(o=this.isPassword?this.password("*",this.text.length):this.text,n=0,t=0;e.x-this.left()>t;)if(t+=Math.ceil(this.widthOfText(o[n])),(n+=1)===o.length&&Math.ceil(this.widthOfText(o))-Math.ceil(this.widthOfText(o[n-1]))/2<e.x-this.left())return n;return n-1},window.StringMorph.prototype.upFrom=function(e){return this.startOfLine()},window.StringMorph.prototype.downFrom=function(e){return this.endOfLine()},window.StringMorph.prototype.startOfLine=function(){return 0},window.StringMorph.prototype.endOfLine=function(){return this.text.length},window.StringMorph.prototype.fontSizePopup=function(e){return this.prompt(e.parent.title+"\nfont\nsize:",this,"setFontSize",this.fontSize.toString(),nil,6,500,!0)},window.StringMorph.prototype.addMorphSpecificMenuEntries=function(e,t){return StringMorph.__super__.addMorphSpecificMenuEntries.apply(this,arguments),t.addLine(),t.addMenuItem("edit",!0,this,"edit"),t.addMenuItem("font size...",!0,this,"fontSizePopup","set this String's\nfont point size"),"serif"!==this.fontStyle&&t.addMenuItem("serif",!0,this,"setSerif"),"sans-serif"!==this.fontStyle&&t.addMenuItem("sans-serif",!0,this,"setSansSerif"),this.isBold?t.addMenuItem("normal weight",!0,this,"toggleWeight"):t.addMenuItem("bold",!0,this,"toggleWeight"),this.isItalic?t.addMenuItem("normal style",!0,this,"toggleItalic"):t.addMenuItem("italic",!0,this,"toggleItalic"),this.isShowingBlanks?t.addMenuItem("hide blanks",!0,this,"toggleShowBlanks"):t.addMenuItem("show blanks",!0,this,"toggleShowBlanks"),this.isPassword?t.addMenuItem("show characters",!0,this,"toggleIsPassword"):t.addMenuItem("hide characters",!0,this,"toggleIsPassword")},window.StringMorph.prototype.toggleShowBlanks=function(){return this.isShowingBlanks=!this.isShowingBlanks,this.reLayout(),this.changed()},window.StringMorph.prototype.toggleWeight=function(){return this.isBold=!this.isBold,this.reLayout(),this.changed()},window.StringMorph.prototype.toggleItalic=function(){return this.isItalic=!this.isItalic,this.reLayout(),this.changed()},window.StringMorph.prototype.toggleIsPassword=function(){return this.isPassword=!this.isPassword,this.reLayout(),this.changed()},window.StringMorph.prototype.setSerif=function(){return this.fontStyle="serif",this.reLayout(),this.changed()},window.StringMorph.prototype.setSansSerif=function(){return this.fontStyle="sans-serif",this.reLayout(),this.changed()},window.StringMorph.prototype.setFontSize=function(e,t){var n,o;return"number"==typeof(o=null!=(null!=t?t.getValue:void 0)?t.getValue():e)?this.fontSize=Math.round(Math.min(Math.max(o,4),500)):(n=parseFloat(o),isNaN(n)||(this.fontSize=Math.round(Math.min(Math.max(n,4),500)))),this.reLayout(),this.changed()},window.StringMorph.prototype.numericalSetters=function(e,t){return[e,t]=StringMorph.__super__.numericalSetters.call(this,e,t),e.push("alpha 0-100","font size","text"),t.push("setAlphaScaled","setFontSize","setText"),this.deduplicateSettersAndSortByMenuEntryString(e,t)},window.StringMorph.prototype.edit=function(){return world.edit(this)},window.StringMorph.prototype.selection=function(){var e,t;return e=Math.min(this.startMark,this.endMark),t=Math.max(this.startMark,this.endMark),this.text.slice(e,t)},window.StringMorph.prototype.firstSelectedSlot=function(){return null==this.startMark||null==this.endMark?nil:Math.min(this.startMark,this.endMark)},window.StringMorph.prototype.lastSelectedSlot=function(){return null==this.startMark||null==this.endMark?nil:Math.max(this.startMark,this.endMark)},window.StringMorph.prototype.clearSelection=function(){return this.currentlySelecting=!1,this.startMark=nil,this.endMark=nil,this.changed()},window.StringMorph.prototype.setEndMark=function(e){return this.endMark=e,this.changed()},window.StringMorph.prototype.selectBetween=function(e,t){return this.startMark=Math.min(e,t),this.endMark=Math.max(e,t),this.changed()},window.StringMorph.prototype.deleteSelection=function(){var e,t,n;return n=this.text,e=Math.min(this.startMark,this.endMark),t=Math.max(this.startMark,this.endMark),this.text=n.slice(0,e)+n.slice(t),this.changed(),this.clearSelection()},window.StringMorph.prototype.selectAll=function(){return this.startMark=0,this.endMark=this.text.length,this.changed()},window.StringMorph.prototype.mouseClickLeft=function(e){var t;return this.bringToForeground(),t=world.caret,this.isEditable?(this.currentlySelecting||this.edit(),t&&t.gotoPos(e),world.caret.gotoPos(e),this.currentlySelecting=!0):this.escalateEvent("mouseClickLeft",e)},window.StringMorph.prototype.enableSelecting=function(){return this.mouseDownLeft=function(e){if(this.clearSelection(),this.isEditable&&!this.grabsToParentWhenDragged())return this.edit(),world.caret.gotoPos(e),this.startMark=this.slotAt(e),this.endMark=this.startMark,this.currentlySelecting=!0},this.mouseMove=function(e){var t;return this.isEditable&&this.currentlySelecting?(t=this.slotAt(e))!==this.endMark?(this.endMark=t,this.changed()):void 0:this.disableSelecting()}},window.StringMorph.prototype.disableSelecting=function(){return this.clearSelection(),this.mouseDownLeft=StringMorph.prototype.mouseDownLeft,delete this.mouseMove},window.StringMorph.instances=new Set,window.TextMorph=function(e="TextMorph",t=12,n="sans-serif",o=!1,i=!1,r="left",l=0,a="",s=new Point(0,0),d=nil){this.text=e,this.fontSize=t,this.fontStyle=n,this.isBold=o,this.isItalic=i,this.alignment=r,this.maxTextWidth=l,this.fontName=a,this.shadowOffset=s,this.shadowColor=d,TextMorph.__super__.constructor.call(this,this.text,this.fontSize,this.fontStyle,this.isBold,this.isItalic,nil,this.shadowOffset,this.shadowColor,nil,this.fontName),this.markedTextColor=new Color(255,255,255),this.markedBackgoundColor=new Color(60,60,120),this.color=new Color(0,0,0),this.noticesTransparentClick=!0,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TextMorph,"name",{value:"TextMorph"}),window.TextMorph.__super__=window.StringMorph.prototype,window.TextMorph=extend(window.TextMorph,window.StringMorph),window.TextMorph.prototype.words=[],window.TextMorph.prototype.lines=[],window.TextMorph.prototype.lineSlots=[],window.TextMorph.prototype.alignment=nil,window.TextMorph.prototype.maxTextWidth=nil,window.TextMorph.prototype.maxLineWidth=0,window.TextMorph.prototype.backgroundColor=nil,window.TextMorph.prototype.receiver=nil,window.TextMorph.prototype.breakTextIntoLines=function(){var e,t,n,o,i;return o=this.text.split("\n"),e=newCanvas(),(t=e.getContext("2d")).scale(ceilPixelRatio,ceilPixelRatio),n="",i=0,t.font=this.buildCanvasFontProperty(),this.maxLineWidth=0,this.lines=[],this.lineSlots=[0],this.words=[],o.forEach(e=>(this.words=this.words.concat(e.split(" ")),this.words.push("\n"))),this.words.forEach(e=>{var o;return"\n"===e?(this.lines.push(n),this.lineSlots.push(i),this.maxLineWidth=Math.max(this.maxLineWidth,Math.ceil(t.measureText(n).width)),n=""):(this.maxTextWidth>0?(o=n+e+" ",Math.ceil(t.measureText(o).width)>this.maxTextWidth?(this.lines.push(n),this.lineSlots.push(i),this.maxLineWidth=Math.max(this.maxLineWidth,Math.ceil(t.measureText(n).width)),n=e+" "):n=o):n=n+e+" ",i+=e.length+1)})},window.TextMorph.prototype.reLayout=function(){var e,t,n;return TextMorph.__super__.reLayout.call(this),newCanvas().getContext("2d").font=this.buildCanvasFontProperty(),this.breakTextIntoLines(),n=Math.abs(this.shadowOffset.x),t=Math.abs(this.shadowOffset.y),e=this.lines.length*(Math.ceil(fontHeight(this.fontSize))+t),0===this.maxTextWidth?this.silentRawSetExtent(new Point(this.maxLineWidth+n,e)):this.silentRawSetExtent(new Point(this.maxTextWidth+n,e)),this.notifyChildrenThatParentHasReLayouted()},window.TextMorph.prototype.createRefreshOrGetBackBuffer=function(){var e,t,n,o,i,r,l,a,s,d,h,p,c,u,w,g,T,f,y,m,S,W,P,C,b,I;if(r=this.extent().toString()+"-"+this.buildCanvasFontProperty()+"-"+this.alignment+"-"+(null!=(T=this.backgroundColor)?T.toString():void 0)+"-"+this.color.toString()+"-"+hashCode(this.text)+"-"+this.startMark+"-"+this.endMark+"-"+this.markedBackgoundColor.toString(),null!=(i=world.cacheForImmutableBackBuffers.get(r)))return i;if(t=(e=newCanvas()).getContext("2d"),P=Math.abs(this.shadowOffset.x),W=Math.abs(this.shadowOffset.y),e.width=this.width()*ceilPixelRatio,e.height=this.height()*ceilPixelRatio,t.scale(ceilPixelRatio,ceilPixelRatio),t.font=this.buildCanvasFontProperty(),t.textAlign="left",t.textBaseline="bottom",this.backgroundColor&&(t.fillStyle=this.backgroundColor.toString(),t.fillRect(0,0,this.width(),this.height())),this.shadowColor)for(u=Math.max(this.shadowOffset.x,0),w=Math.max(this.shadowOffset.y,0),t.fillStyle=this.shadowColor.toString(),l=0,a=0,h=(f=this.lines).length;a<h;a++)c=f[a],C=Math.ceil(t.measureText(c).width)+P,b=function(){switch(this.alignment){case"right":return this.width()-C;case"center":return(this.width()-C)/2;default:return 0}}.call(this),I=(l+1)*(Math.ceil(fontHeight(this.fontSize))+W)-W,l++,t.fillText(c,b+u,I+w);for(u=Math.abs(Math.min(this.shadowOffset.x,0)),w=Math.abs(Math.min(this.shadowOffset.y,0)),t.fillStyle=this.color.toString(),l=0,s=0,p=(y=this.lines).length;s<p;s++)c=y[s],C=Math.ceil(t.measureText(c).width)+P,b=function(){switch(this.alignment){case"right":return this.width()-C;case"center":return(this.width()-C)/2;default:return 0}}.call(this),I=(l+1)*(Math.ceil(fontHeight(this.fontSize))+W)-W,l++,t.fillText(c,b+u,I+w);for(l=d=m=Math.min(this.startMark,this.endMark),S=Math.max(this.startMark,this.endMark);m<=S?d<S:d>S;l=m<=S?++d:--d)g=this.slotCoordinates(l).subtract(this.position()),n=this.text.charAt(l),t.fillStyle=this.markedBackgoundColor.toString(),t.fillRect(g.x,g.y,Math.ceil(t.measureText(n).width)+1,Math.ceil(fontHeight(this.fontSize))),t.fillStyle=this.markedTextColor.toString(),t.fillText(n,g.x,g.y+Math.ceil(fontHeight(this.fontSize)));return o=[e,t],world.cacheForImmutableBackBuffers.set(r,o),o},window.TextMorph.prototype.rawSetExtent=function(e){if(!e.eq(this.extent()))return this.breakNumberOfRawMovesAndResizesCaches(),this.maxTextWidth=Math.max(e.x,0),this.reLayout(),this.changed()},window.TextMorph.prototype.slotRowAndColumn=function(e){var t,n,o,i,r,l,a;for(o=0,a=n=0,r=this.lines.length;0<=r?n<r:n>r;a=0<=r?++n:--n)for(o=this.lineSlots[a],t=i=0,l=this.lines[a].length;0<=l?i<l:i>l;t=0<=l?++i:--i){if(o===e)return[a,t];o+=1}return[this.lines.length-1,this.lines[this.lines.length-1].length-1]},window.TextMorph.prototype.slotCoordinates=function(e){var t,n,o,i,r,l,a;return[o,n]=this.slotRowAndColumn(e),t=Math.abs(this.shadowOffset.y),a=o*(Math.ceil(fontHeight(this.fontSize))+t),r=Math.ceil(this.backBufferContext.measureText(this.lines[o].substring(0,n)).width),i=this.left()+r,l=this.top()+a,new Point(i,l)},window.TextMorph.prototype.slotAt=function(e){var t,n,o,i;for(t=0,o=0,n=0,i=Math.abs(this.shadowOffset.y);e.y-this.top()>(Math.ceil(fontHeight(this.fontSize))+i)*o;)o+=1;for(o=Math.max(o,1);e.x-this.left()>t;)t+=Math.ceil(this.backBufferContext.measureText(this.lines[o-1][n]).width),n+=1;return this.lineSlots[Math.max(o-1,0)]+n-1},window.TextMorph.prototype.upFrom=function(e){var t,n,o;return[o,n]=this.slotRowAndColumn(e),o<1?e:(t=this.lines[o-1]).length<n-1?this.lineSlots[o-1]+t.length:this.lineSlots[o-1]+n},window.TextMorph.prototype.downFrom=function(e){var t,n,o;return[o,n]=this.slotRowAndColumn(e),o>this.lines.length-2?e:(t=this.lines[o+1]).length<n-1?this.lineSlots[o+1]+t.length:this.lineSlots[o+1]+n},window.TextMorph.prototype.startOfLine=function(e){return this.lineSlots[this.slotRowAndColumn(e).y]},window.TextMorph.prototype.endOfLine=function(e){return this.startOfLine(e)+this.lines[this.slotRowAndColumn(e).y].length-1},window.TextMorph.prototype.addMorphSpecificMenuEntries=function(e,t){return TextMorph.__super__.addMorphSpecificMenuEntries.apply(this,arguments),t.addLine(),"left"!==this.alignment&&t.addMenuItem("align left",!0,this,"setAlignmentToLeft"),"right"!==this.alignment&&t.addMenuItem("align right",!0,this,"setAlignmentToRight"),"center"!==this.alignment&&t.addMenuItem("align center",!0,this,"setAlignmentToCenter"),t.addMenuItem("run contents",!0,this,"doContents")},window.TextMorph.prototype.setAlignmentToLeft=function(){return this.alignment="left",this.reLayout(),this.changed()},window.TextMorph.prototype.setAlignmentToRight=function(){return this.alignment="right",this.reLayout(),this.changed()},window.TextMorph.prototype.setAlignmentToCenter=function(){return this.alignment="center",this.reLayout(),this.changed()},window.TextMorph.prototype.evaluationMenu=function(){var e;return e=this.buildHierarchyMenu(),this.text.length>0&&(e.prependLine(),e.prependMenuItem("select all",!0,this,"selectAllAndEdit"),e.prependMenuItem("do all",!0,this,"doAll")),""!==this.selection().replace(/^\s\s*/,"").replace(/\s\s*$/,"")&&(e.prependLine(),e.prependMenuItem("inspect selection",!0,this,"inspectSelection","evaluate the\nselected expression\nand inspect the result"),e.prependMenuItem("show selection",!0,this,"showSelection","evaluate the\nselected expression\nand show the result"),e.prependMenuItem("do selection",!0,this,"doSelection","evaluate the\nselected expression")),e},window.TextMorph.prototype.selectAllAndEdit=function(){return this.edit(),this.selectAll()},window.TextMorph.prototype.doAll=function(){return this.edit(),this.selectAll(),this.doSelection(),this.clearSelection()},window.TextMorph.prototype.setReceiver=function(e){return this.receiver=e,this.overridingContextMenu=this.evaluationMenu},window.TextMorph.prototype.doSelection=function(){return this.receiver.evaluateString(this.selection()),this.edit()},window.TextMorph.prototype.doContents=function(){return null!=this.receiver?this.receiver.evaluateString(this.text):this.evaluateString(this.text)},window.TextMorph.prototype.showSelection=function(){var e;if(null!=(e=this.receiver.evaluateString(this.selection())))return this.inform(e)},window.TextMorph.prototype.inspectSelection=function(){var e;if(null!=(e=this.receiver.evaluateString(this.selection())))return this.spawnInspector(e)},window.TextMorph.instances=new Set,window.TriggerMorph=function(e=!0,t=nil,n=nil,o=nil,i=WorldMorph.preferencesAndSettings.menuFontSize,r="sans-serif",l=!1,a=nil,s,d=nil,h=WorldMorph.preferencesAndSettings.menuButtonsLabelColor,p=!1,c=!1,u=nil,w=nil,g=nil,T=!1){this.ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked=e,this.target=t,this.action=n,this.labelString=o,this.fontSize=i,this.fontStyle=r,this.centered=l,this.dataSourceMorphForTarget=a,this.morphEnv=s,this.toolTipMessage=d,this.labelColor=h,this.labelBold=p,this.labelItalic=c,this.doubleClickAction=u,this.argumentToAction1=w,this.argumentToAction2=g,this.representsAMorph=T,TriggerMorph.__super__.constructor.call(this),this.defaultRejectDrags=!0,this.color=WorldMorph.preferencesAndSettings.menuBackgroundColor,null!=this.labelString&&this.layoutSubmorphs(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TriggerMorph,"name",{value:"TriggerMorph"}),window.TriggerMorph.__super__=window.Widget.prototype,window.TriggerMorph=extend(window.TriggerMorph,window.Widget),window.TriggerMorph.prototype.target=nil,window.TriggerMorph.prototype.action=nil,window.TriggerMorph.prototype.dataSourceMorphForTarget=nil,window.TriggerMorph.prototype.morphEnv=nil,window.TriggerMorph.prototype.label=nil,window.TriggerMorph.prototype.labelString=nil,window.TriggerMorph.prototype.labelColor=nil,window.TriggerMorph.prototype.labelBold=nil,window.TriggerMorph.prototype.labelItalic=nil,window.TriggerMorph.prototype.doubleClickAction=nil,window.TriggerMorph.prototype.argumentToAction1=nil,window.TriggerMorph.prototype.argumentToAction2=nil,window.TriggerMorph.prototype.toolTipMessage=nil,window.TriggerMorph.prototype.fontSize=nil,window.TriggerMorph.prototype.fontStyle=nil,window.TriggerMorph.prototype.highlightColor=new Color(192,192,192),window.TriggerMorph.prototype.pressColor=new Color(128,128,128),window.TriggerMorph.prototype.centered=!1,window.TriggerMorph.prototype.ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked=!0,window.TriggerMorph.prototype.representsAMorph=!1,window.TriggerMorph.prototype.state=0,window.TriggerMorph.prototype.STATE_NORMAL=0,window.TriggerMorph.prototype.STATE_HIGHLIGHTED=1,window.TriggerMorph.prototype.STATE_PRESSED=2,window.TriggerMorph.prototype.layoutSubmorphs=function(e=nil){if(TriggerMorph.__super__.layoutSubmorphs.call(this),null==this.label&&this.createLabel(),this.centered)return this.label.fullRawMoveTo(this.center().subtract(this.label.extent().floorDivideBy(2)))},window.TriggerMorph.prototype.getTextDescription=function(){return null!=this.textDescription?this.textDescription+" (adhoc description of button)":this.labelString?this.labelString.replace(/#\d*/,"")+" (text in button)":TriggerMorph.__super__.getTextDescription.call(this)},window.TriggerMorph.prototype.setLabel=function(e){return this.labelString=e,null!=this.label&&(this.label=this.label.fullDestroy()),this.layoutSubmorphs()},window.TriggerMorph.prototype.alignCenter=function(){if(!this.centered)return this.centered=!0,this.layoutSubmorphs()},window.TriggerMorph.prototype.alignLeft=function(){if(this.centered)return this.centered=!1,this.layoutSubmorphs()},window.TriggerMorph.prototype.paintIntoAreaOrBlitFromBackBuffer=function(e,t,n){var o,i,r,l,a,s,d,h;return!this.visibleBasedOnIsVisibleProperty()||this.isCollapsed()?nil:([i,s,d,o,r,h,a]=this.calculateKeyValues(e,t),h<1||a<1||i.isEmpty()?nil:(l=null!=n?"black":function(){switch(this.state){case this.STATE_NORMAL:return this.color;case this.STATE_HIGHLIGHTED:return this.highlightColor;case this.STATE_PRESSED:return this.pressColor}}.call(this),this.paintRectangle(e,o,r,h,a,l,this.alpha,!0,n),this.paintHighlight(e,o,r,h,a)))},window.TriggerMorph.prototype.createLabel=function(){return this.label=new StringMorph(this.labelString||"",this.fontSize,this.fontStyle,this.labelBold,this.labelItalic,!1,this.labelColor),this.add(this.label)},window.TriggerMorph.prototype.rejectDrags=function(){return!(this.parent instanceof WorldMorph)&&this.defaultRejectDrags},window.TriggerMorph.prototype.trigger=function(){this.action&&""!==this.action&&this.target[this.action].call(this.target,this.dataSourceMorphForTarget,this.morphEnv,this.argumentToAction1,this.argumentToAction2)},window.TriggerMorph.prototype.triggerDoubleClick=function(){if(this.doubleClickAction)return this.target[this.doubleClickAction]()},window.TriggerMorph.prototype.mouseEnter=function(){if(this.state=this.STATE_HIGHLIGHTED,this.changed(),this.toolTipMessage)return this.startCountdownForBubbleHelp(this.toolTipMessage)},window.TriggerMorph.prototype.justBeenCopied=function(){return this.mouseLeave()},window.TriggerMorph.prototype.mouseLeave=function(){if(this.state=this.STATE_NORMAL,this.changed(),this.toolTipMessage)return world.destroyToolTips()},window.TriggerMorph.prototype.mouseDownLeft=function(){return this.state=this.STATE_PRESSED,this.changed(),TriggerMorph.__super__.mouseDownLeft.apply(this,arguments)},window.TriggerMorph.prototype.mouseClickLeft=function(){return this.bringToForeground(),this.state=this.STATE_HIGHLIGHTED,this.changed(),this.ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked&&this.propagateKillPopUps(),this.trigger()},window.TriggerMorph.prototype.mouseDoubleClick=function(){return this.triggerDoubleClick()},window.TriggerMorph.instances=new Set,window.MenuAppearance=function(){window.MenuAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.MenuAppearance,"name",{value:"MenuAppearance"}),window.MenuAppearance.__super__=window.BoxyAppearance.prototype,window.MenuAppearance=extend(window.MenuAppearance,window.BoxyAppearance),window.MenuAppearance.prototype.nothing=nil,window.MenuAppearance.instances=new Set,window.MenuHeader=function(e){MenuHeader.__super__.constructor.call(this,3),this.color=WorldMorph.preferencesAndSettings.menuHeaderColor,this.text=new TextMorph(e,this.fontSize||WorldMorph.preferencesAndSettings.menuHeaderFontSize,WorldMorph.preferencesAndSettings.menuFontName,WorldMorph.preferencesAndSettings.menuHeaderBold,!1,"center"),this.text.alignment="center",this.text.color=new Color(255,255,255),this.text.backgroundColor=this.color.copy(),this.add(this.text),this.rawSetExtent(this.text.extent().add(2)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.MenuHeader,"name",{value:"MenuHeader"}),window.MenuHeader.__super__=window.BoxMorph.prototype,window.MenuHeader=extend(window.MenuHeader,window.BoxMorph),window.MenuHeader.prototype.text=nil,window.MenuHeader.prototype.rawSetWidth=function(e){return MenuHeader.__super__.rawSetWidth.apply(this,arguments),this.text.fullRawMoveTo(this.center().subtract(this.text.extent().floorDivideBy(2)))},window.MenuHeader.prototype.mouseClickLeft=function(){var e;if(MenuHeader.__super__.mouseClickLeft.apply(this,arguments),null!=this.parent)return null!=(e=this.firstParentThatIsAPopUp())?e.pinPopUp(this):void 0},window.MenuHeader.instances=new Set,window.MenuItemMorph=function(e,t,n,o,i,r,l,a,s,d,h,p,c,u,w,g,T){MenuItemMorph.__super__.constructor.call(this,e,t,n,o,i,r,l,a,s,d,h,p,c,u,w,g,T),this.actionableAsThumbnail=!0,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.MenuItemMorph,"name",{value:"MenuItemMorph"}),window.MenuItemMorph.__super__=window.TriggerMorph.prototype,window.MenuItemMorph=extend(window.MenuItemMorph,window.TriggerMorph),window.MenuItemMorph.prototype.getTextDescription=function(){return null!=this.textDescription?this.textDescription+" (adhoc description of menu item)":this.labelString?this.labelString.replace(/#\d*/,"")+" (text in button)":MenuItemMorph.__super__.getTextDescription.call(this)},window.MenuItemMorph.prototype.isTicked=function(){return this.label.text.isTicked()},window.MenuItemMorph.prototype.toggleTick=function(){return this.label.text.isTicked()||this.label.text.isUnticked()?(this.label.text=this.label.text.toggleTick(),this.label.reLayout(),this.label.changed()):void 0},window.MenuItemMorph.prototype.createLabel=function(){var e,t,n,o;return isString(this.labelString)?this.label=this.createLabelString(this.labelString):this.labelString instanceof Array?(this.label=new Widget,this.label.alpha=0,e=this.createIcon(this.labelString[0]),this.label.add(e),t=this.createLabelString(this.labelString[1]),this.label.add(t),t.fullRawMoveCenterTo(e.center()),t.fullRawMoveLeftSideTo(e.right()+4),this.label.rawSetBounds(e.boundingBox().merge(t.boundingBox()))):this.label=this.createIcon(this.labelString),this.add(this.label),o=this.width(),this.silentRawSetExtent(this.label.extent().add(new Point(8,0))),this.silentRawSetWidth(o),n=this.position().add(new Point(4,0)),this.label.silentFullRawMoveTo(n)},window.MenuItemMorph.prototype.createIcon=function(e){var t,n;return(t=new Widget).backBuffer=e instanceof Widget?e.fullImage():e,t.backBufferContext=t.backBuffer.getContext("2d"),e instanceof Widget&&e.hasShadow()&&(n=t.backBuffer,t.backBuffer=newCanvas(e.fullBounds().extent().subtract(2*this.shadowBlur).scaleBy(ceilPixelRatio)),t.backBufferContext=t.backBuffer.getContext("2d"),t.backBufferContext.drawImage(n,0,0)),t.silentRawSetWidth(t.backBuffer.width),t.silentRawSetHeight(t.backBuffer.height),t},window.MenuItemMorph.prototype.createLabelString=function(e){var t;return(t=new TextMorph(e,this.fontSize,this.fontStyle)).setColor(this.labelColor),t},window.MenuItemMorph.prototype.shrinkToTextSize=function(){return this.rawSetWidth(this.widthOfLabel()+5)},window.MenuItemMorph.prototype.widthOfLabel=function(){return this.label.width()},window.MenuItemMorph.prototype.mouseEnter=function(){if(this.representsAMorph&&(null!=this.argumentToAction1?this.argumentToAction1:this.target).turnOnHighlight(),this.isListItem()||(this.state=this.STATE_HIGHLIGHTED,this.changed()),this.toolTipMessage)return this.startCountdownForBubbleHelp(this.toolTipMessage)},window.MenuItemMorph.prototype.mouseLeave=function(){if(this.representsAMorph&&(null!=this.argumentToAction1?this.argumentToAction1:this.target).turnOffHighlight(),this.isListItem()||(this.state=this.STATE_NORMAL,this.changed()),this.toolTipMessage)return world.destroyToolTips()},window.MenuItemMorph.prototype.mouseDownLeft=function(e){return this.isListItem()&&(this.parent.unselectAllItems(),this.escalateEvent("mouseDownLeft",e)),this.state=this.STATE_PRESSED,this.changed(),MenuItemMorph.__super__.mouseDownLeft.apply(this,arguments)},window.MenuItemMorph.prototype.isListItem=function(){return!!this.parent&&this.parent.isListContents},window.MenuItemMorph.instances=new Set,window.MenusHelper=function(){window.MenusHelper.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.MenusHelper,"name",{value:"MenusHelper"}),window.MenusHelper.__super__=Object.prototype,window.MenusHelper.augmentWith(window.DeepCopierMixin,"MenusHelper"),window.MenusHelper.prototype.popUpDevToolsMenu=function(e,t){var n;return(n=new MenuMorph(e,!1,this,!0,!0,"Dev Tools")).addMenuItem("inspect",!0,t,"inspect2","open a window\non all properties"),n.addMenuItem("console",!0,t,"createConsole","console"),n.popUpAtHand()},window.MenusHelper.prototype.basementIconAndText=function(){return world.add(new BasementOpenerWdgt)},window.MenusHelper.prototype.newScriptWindow=function(){var e,t;return e=new ScriptWdgt,(t=new WindowWdgt(nil,nil,e)).setExtent(new Point(460,400)),t.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),t.fullRawMoveWithin(world),world.add(t),t.changed()},window.MenusHelper.prototype.createFizzyPaintLauncher=function(){var e,t,n;return(t=new ScriptWdgt("reconfPaint = new ReconfigurablePaintWdgt\nwm = new WindowWdgt nil, nil, reconfPaint\nwm.setExtent new Point 460, 400\nwm.fullRawMoveTo new Point 174, 114\nwm.fullRawMoveWithin world\nworld.add wm\nwm.changed()\n\nmenusHelper.createDrawingsMakerOneOffInfoWindowNextTo wm")).saveScript(),(n=new WindowWdgt(nil,nil,t)).setExtent(new Point(460,400)),n.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),n.fullRawMoveWithin(world),n.changed(),e=new IconicDesktopSystemScriptShortcutWdgt(n,"Draw",new PaintBucketIconWdgt),world.add(e),e.setExtent(new Point(75,75)),e.fullChanged(),n},window.MenusHelper.prototype.createFizzyPaintLauncherAndItsIcon=function(){var e;return e=this.createFizzyPaintLauncher(),world.add(e)},window.MenusHelper.prototype.createSimpleDocumentLauncher=function(){var e,t,n;return(e=new ScriptWdgt("reconfPaint = new SimpleDocumentWdgt\nwm = new WindowWdgt nil, nil, reconfPaint\nwm.setExtent new Point 370, 395\nwm.fullRawMoveTo new Point 170, 88\nwm.fullRawMoveWithin world\nworld.add wm\nwm.changed()\n\nmenusHelper.createDocsMakerOneOffInfoWindowNextTo wm")).saveScript(),(n=new WindowWdgt(nil,nil,e)).setExtent(new Point(460,400)),n.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),n.fullRawMoveWithin(world),n.changed(),t=new IconicDesktopSystemScriptShortcutWdgt(n,"Docs Maker",new TypewriterIconWdgt),world.add(t),t.setExtent(new Point(75,75)),t.fullChanged(),n},window.MenusHelper.prototype.createSimpleDocumentLauncherAndItsIcon=function(){var e;return e=this.createSimpleDocumentLauncher(),world.add(e)},window.MenusHelper.prototype.createSimpleSlideLauncher=function(){var e,t,n;return(e=new ScriptWdgt("reconfPaint = new SimpleSlideWdgt\nwm = new WindowWdgt nil, nil, reconfPaint\nwm.setExtent new Point 460, 400\nwm.fullRawMoveTo new Point 168, 134\nwm.fullRawMoveWithin world\nworld.add wm\nwm.changed()\n \nmenusHelper.createSlidesMakerOneOffInfoWindowNextTo wm\n")).saveScript(),(n=new WindowWdgt(nil,nil,e)).setExtent(new Point(460,400)),n.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),n.fullRawMoveWithin(world),n.changed(),t=new IconicDesktopSystemScriptShortcutWdgt(n,"Slides Maker",new SimpleSlideIconWdgt),world.add(t),t.setExtent(new Point(75,75)),t.fullChanged(),n},window.MenusHelper.prototype.createSimpleSlideLauncherAndItsIcon=function(){var e;return e=this.createSimpleSlideLauncher(),world.add(e)},window.MenusHelper.prototype.createDashboardsLauncher=function(){var e,t,n;return(e=new ScriptWdgt("reconfPaint = new DashboardsWdgt\nwm = new WindowWdgt nil, nil, reconfPaint\nwm.setExtent new Point 460, 400\nwm.fullRawMoveTo world.hand.position()\nwm.fullRawMoveWithin world\nworld.add wm\nwm.changed()\n\nmenusHelper.createDashboardsMakerOneOffInfoWindowNextTo wm")).saveScript(),(n=new WindowWdgt(nil,nil,e)).setExtent(new Point(460,400)),n.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),n.fullRawMoveWithin(world),n.changed(),t=new IconicDesktopSystemScriptShortcutWdgt(n,"Dashboards",new DashboardsIconWdgt),world.add(t),t.setExtent(new Point(75,75)),t.fullChanged(),n},window.MenusHelper.prototype.createPatchProgrammingLauncher=function(){var e,t,n;return(t=new ScriptWdgt("patchProgramming = new PatchProgrammingWdgt\nwm = new WindowWdgt nil, nil, patchProgramming\nwm.setExtent new Point 460, 400\nwm.fullRawMoveTo world.hand.position()\nwm.fullRawMoveWithin world\nworld.add wm\nwm.changed()\n\nmenusHelper.createPatchProgrammingOneOffInfoWindowNextTo wm")).saveScript(),(n=new WindowWdgt(nil,nil,t)).setExtent(new Point(460,400)),n.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),n.fullRawMoveWithin(world),n.changed(),e=new IconicDesktopSystemScriptShortcutWdgt(n,"Patch progr.",new PatchProgrammingIconWdgt),world.add(e),e.setExtent(new Point(75,75)),e.fullChanged(),n},window.MenusHelper.prototype.createGenericPanelLauncher=function(){var e,t,n;return(t=new ScriptWdgt("genericPanel = new StretchableEditableWdgt\nwm = new WindowWdgt nil, nil, genericPanel\nwm.setExtent new Point 460, 400\nwm.fullRawMoveTo world.hand.position()\nwm.fullRawMoveWithin world\nworld.add wm\nwm.changed()\n\nmenusHelper.createGenericPanelOneOffInfoWindowNextTo wm")).saveScript(),(n=new WindowWdgt(nil,nil,t)).setExtent(new Point(460,400)),n.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),n.fullRawMoveWithin(world),n.changed(),e=new IconicDesktopSystemScriptShortcutWdgt(n,"Generic panel",new GenericPanelIconWdgt),world.add(e),e.setExtent(new Point(75,75)),e.fullChanged(),n},window.MenusHelper.prototype.createToolbarsOpener=function(){var e,t,n;return(e=new ScriptWdgt("\n# tools -------------------------------\ntoolsPanel = new ScrollPanelWdgt new ToolPanelWdgt\n\ntoolsPanel.addMany [\n  new TextToolbarCreatorButtonWdgt\n  new UsefulTextSnippetsToolbarCreatorButtonWdgt\n  new SlidesToolbarCreatorButtonWdgt\n  new PlotsToolbarCreatorButtonWdgt\n  new PatchProgrammingComponentsToolbarCreatorButtonWdgt\n  new WindowsToolbarCreatorButtonWdgt\n]\n\ntoolsPanel.disableDragsDropsAndEditing()\n\nwm = new WindowWdgt nil, nil, toolsPanel\nwm.setExtent new Point 60, 261\nwm.fullRawMoveTo new Point 170, 170\nwm.fullRawMoveWithin world\nworld.add wm\nwm.changed()\n\nmenusHelper.createSuperToolbarOneOffInfoWindowNextTo wm\n")).saveScript(),(n=new WindowWdgt(nil,nil,e)).setExtent(new Point(460,400)),n.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),n.fullRawMoveWithin(world),n.changed(),(t=new IconicDesktopSystemScriptShortcutWdgt(n,"Super Toolbar",new ToolbarsIconWdgt)).toolTipMessage="a toolbar to rule them all",world.add(t),t.setExtent(new Point(75,75)),t.fullChanged(),n},window.MenusHelper.prototype.createNewTemplatesWindow=function(){var e,t,n;return(e=new SimpleDocumentScrollPanelWdgt).rawSetExtent(new Point(365,335)),(t=new SimplePlainTextWdgt("Simply drag the items below into your document",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),t.setFontSize(18),t.isEditable=!0,t.enableSelecting(),e.setContents(t,5),(t=new ArrowSIconWdgt).rawSetExtent(new Point(25,25)),e.add(t),t.layoutSpecDetails.setAlignmentToCenter(),e.addDivider(),(t=new SimplePlainTextWdgt("Title",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),t.setFontName(nil,nil,t.georgiaFontStack),t.setFontSize(48),t.isEditable=!0,t.enableSelecting(),e.add(t),(t=new SimplePlainTextWdgt("Section X",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).toggleWeight(),t.isEditable=!0,t.enableSelecting(),t.setFontSize(28),e.add(t),(t=new SimplePlainTextWdgt("Section X.X",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).isEditable=!0,t.enableSelecting(),t.setFontSize(24),e.add(t),e.addNormalParagraph("Normal text."),(t=new SimplePlainTextWdgt("“Be careful--with quotations, you can damn anything.”\n― André Malraux",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).toggleItalic(),t.alignRight(),t.isEditable=!0,t.enableSelecting(),e.add(t),e.addIndentedText("indentedText"),e.addBulletPoint("bullet point"),e.addCodeBlock("a code block with\n  some example\n    code in here"),(t=new SimplePlainTextWdgt("Spacers:",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).toggleWeight(),t.isEditable=!0,t.enableSelecting(),e.add(t),e.addSpacer(),e.addSpacer(2),e.addSpacer(3),(t=new SimplePlainTextWdgt("Divider line:",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).toggleWeight(),t.isEditable=!0,t.enableSelecting(),e.add(t),e.addDivider(),(t=new SimplePlainTextWdgt("Links:",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).toggleWeight(),t.isEditable=!0,t.enableSelecting(),e.add(t),(t=new SimpleLinkWdgt).rawSetExtent(new Point(405,50)),e.add(t),t.layoutSpecDetails.setAlignmentToRight(),(t=new SimpleVideoLinkWdgt).rawSetExtent(new Point(405,50)),e.add(t),t.layoutSpecDetails.setAlignmentToRight(),(t=new SimplePlainTextWdgt("Useful characters:",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).toggleWeight(),t.isEditable=!0,t.enableSelecting(),e.add(t),e.addNormalParagraph("… †‡§ ↵⏎⇧␣ ☐☑☒✓X✗ •‣⁃◦ °±⁻¹²³µ×÷ℓΩ√∛∜∝∞∟∠∡∩∪∿≈⊂⋅⌀▫◽◻□⩽⩾ ¼½¾⅛⅜⅝⅞ ←↑→↓↔↕↵⇎⇏⇑⇒⇓⇔⇕ ©®™ $£€¥").setFontSize(16),e.makeAllContentIntoTemplates(),(n=new WindowWdgt(nil,nil,e)).setExtent(new Point(370,335)),n.setTitleWithoutPrependedContentName("useful snippets"),n.changed(),n},window.MenusHelper.prototype.createFanout=function(){var e;return e=new FanoutWdgt,world.create(e),e.setExtent(new Point(100,100))},window.MenusHelper.prototype.createCalculatingPatchNode=function(){var e,t;return e=new CalculatingPatchNodeWdgt,(t=new WindowWdgt(nil,nil,e,!0)).setExtent(new Point(460,400)),t.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),t.fullRawMoveWithin(world),world.add(t),t.changed()},window.MenusHelper.prototype.createDiffingPatchNode=function(){var e,t;return e=new DiffingPatchNodeWdgt,(t=new WindowWdgt(nil,nil,e,!0)).setExtent(new Point(460,400)),t.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),t.fullRawMoveWithin(world),world.add(t),t.changed()},window.MenusHelper.prototype.createSliderWithSmallestValueAtBottomEnd=function(){return world.create(new SliderMorph(nil,nil,nil,nil,nil,!0))},window.MenusHelper.prototype.createRegexSubstitutionPatchNodeWdgt=function(){var e,t;return e=new RegexSubstitutionPatchNodeWdgt,(t=new WindowWdgt(nil,nil,e,!0)).setExtent(new Point(460,400)),t.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),t.fullRawMoveWithin(world),world.add(t),t.changed()},window.MenusHelper.prototype.throwAnError=function(){throw new Error("you manually threw an error!")},window.MenusHelper.prototype.createStretchablePanel=function(){var e;return e=new StretchableWidgetContainerWdgt,world.create(e),e.setExtent(new Point(400,300))},window.MenusHelper.prototype.createToolsPanel=function(){var e,t;return e=new ScrollPanelWdgt(new ToolPanelWdgt),(t=new WindowWdgt(nil,nil,e,!0)).setExtent(new Point(200,400)),t.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),t.fullRawMoveWithin(world),world.add(t),t.changed()},window.MenusHelper.prototype.createHorizontalMenuPanelPanel=function(){var e,t;return e=new HorizontalMenuPanelWdgt,(t=new WindowWdgt(nil,nil,e,!0)).setExtent(new Point(200,400)),t.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),t.fullRawMoveWithin(world),world.add(t),t.changed()},window.MenusHelper.prototype.createFizzygumLogoWithTextIconWdgt=function(){return world.create(new FizzygumLogoWithTextIconWdgt)},window.MenusHelper.prototype.createVaporwaveBackgroundIconWdgt=function(){return world.create(new VaporwaveBackgroundIconWdgt)},window.MenusHelper.prototype.createCFDegreesConverterIconWdgt=function(){return world.create(new CFDegreesConverterIconWdgt)},window.MenusHelper.prototype.createFizzygumLogoIconWdgt=function(){return world.create(new FizzygumLogoIconWdgt)},window.MenusHelper.prototype.createVaporwaveSunIconWdgt=function(){return world.create(new VaporwaveSunIconWdgt)},window.MenusHelper.prototype.createLittleWorldIconWdgt=function(){return world.create(new LittleWorldIconWdgt)},window.MenusHelper.prototype.createChangeFontIconWdgt=function(){return world.create(new ChangeFontIconWdgt)},window.MenusHelper.prototype.createSimpleSlideIconWdgt=function(){return world.create(new SimpleSlideIconWdgt)},window.MenusHelper.prototype.createTypewriterIconWdgt=function(){return world.create(new TypewriterIconWdgt)},window.MenusHelper.prototype.createLittleUSAIconWdgt=function(){return world.create(new LittleUSAIconWdgt)},window.MenusHelper.prototype.createMapPinIconWdgt=function(){return world.create(new MapPinIconWdgt)},window.MenusHelper.prototype.createSaveIconWdgt=function(){return world.create(new SaveIconWdgt)},window.MenusHelper.prototype.createArrowEIconWdgt=function(){return world.create(new ArrowEIconWdgt)},window.MenusHelper.prototype.createArrowNEIconWdgt=function(){return world.create(new ArrowNEIconWdgt)},window.MenusHelper.prototype.createArrowNIconWdgt=function(){return world.create(new ArrowNIconWdgt)},window.MenusHelper.prototype.createArrowNWIconWdgt=function(){return world.create(new ArrowNWIconWdgt)},window.MenusHelper.prototype.createArrowSEIconWdgt=function(){return world.create(new ArrowSEIconWdgt)},window.MenusHelper.prototype.createArrowSIconWdgt=function(){return world.create(new ArrowSIconWdgt)},window.MenusHelper.prototype.createArrowSWIconWdgt=function(){return world.create(new ArrowSWIconWdgt)},window.MenusHelper.prototype.createArrowWIconWdgt=function(){return world.create(new ArrowWIconWdgt)},window.MenusHelper.prototype.createDecreaseFontSizeIconWdgt=function(){return world.create(new DecreaseFontSizeIconWdgt)},window.MenusHelper.prototype.createExternalLinkIconWdgt=function(){return world.create(new ExternalLinkIconWdgt)},window.MenusHelper.prototype.createIncreaseFontSizeIconWdgt=function(){return world.create(new IncreaseFontSizeIconWdgt)},window.MenusHelper.prototype.createTemplatesIconWdgt=function(){return world.create(new TemplatesIconWdgt)},window.MenusHelper.prototype.createFormatAsCodeIconWdgt=function(){return world.create(new FormatAsCodeIconWdgt)},window.MenusHelper.prototype.createChXIconWdgt=function(){return world.create(new ChapterXIconWdgt)},window.MenusHelper.prototype.createChXXIconWdgt=function(){return world.create(new ChapterXXIconWdgt)},window.MenusHelper.prototype.createChXXXIconWdgt=function(){return world.create(new ChapterXXXIconWdgt)},window.MenusHelper.prototype.createAlignRightIconWdgt=function(){return world.create(new AlignRightIconWdgt)},window.MenusHelper.prototype.createAlignCenterIconWdgt=function(){return world.create(new AlignCenterIconWdgt)},window.MenusHelper.prototype.createAlignLeftIconWdgt=function(){return world.create(new AlignLeftIconWdgt)},window.MenusHelper.prototype.createWorldMapIconMorph=function(){return world.create(new SimpleWorldMapIconWdgt)},window.MenusHelper.prototype.createUSAMapIconMorph=function(){return world.create(new SimpleUSAMapIconWdgt)},window.MenusHelper.prototype.createBoldIconWdgt=function(){return world.create(new BoldIconWdgt)},window.MenusHelper.prototype.createItalicIconWdgt=function(){return world.create(new ItalicIconWdgt)},window.MenusHelper.prototype.createInformationIconWdgt=function(){return world.create(new InformationIconWdgt)},window.MenusHelper.prototype.createTextboxIconWdgt=function(){return world.create(new TextIconWdgt)},window.MenusHelper.prototype.createVideoPlayIconWdgt=function(){return world.create(new VideoPlayIconWdgt)},window.MenusHelper.prototype.createSimpleDocumentWdgt=function(){var e,t;return e=new SimpleDocumentWdgt,(t=new WindowWdgt(nil,nil,e)).setExtent(new Point(368,335)),t.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),t.fullRawMoveWithin(world),world.add(t),t.changed()},window.MenusHelper.prototype.createSimpleLinkWdgt=function(){var e;return(e=new SimpleLinkWdgt).setExtent(new Point(405,50)),world.create(e)},window.MenusHelper.prototype.createSimpleVideoLinkWdgt=function(){var e;return(e=new SimpleVideoLinkWdgt).setExtent(new Point(405,50)),world.create(e)},window.MenusHelper.prototype.create2DAxis=function(){var e;return(e=new AxisWdgt).setExtent(new Point(40,300)),world.create(e)},window.MenusHelper.prototype.createExampleScatterPlot=function(){var e;return(e=new ExampleScatterPlotWdgt).setExtent(new Point(300,300)),world.create(e)},window.MenusHelper.prototype.createExampleScatterPlotWithAxes=function(){var e,t;return e=new ExampleScatterPlotWdgt,(t=new PlotWithAxesWdgt(e)).rawSetExtent(new Point(300,300)),world.create(t)},window.MenusHelper.prototype.createExampleFunctionPlot=function(){var e;return(e=new ExampleFunctionPlotWdgt).setExtent(new Point(300,300)),world.create(e)},window.MenusHelper.prototype.createExampleBarPlot=function(){var e;return(e=new ExampleBarPlotWdgt).setExtent(new Point(300,300)),world.create(e)},window.MenusHelper.prototype.createExample3DPlot=function(){var e;return(e=new Example3DPlotWdgt).setExtent(new Point(300,300)),world.create(e)},window.MenusHelper.prototype.popUpMapsMenu=function(e){var t;return(t=new MenuMorph(e,!1,this,!0,!0,"Maps")).addMenuItem("world map",!0,menusHelper,"createWorldMapIconMorph","others"),t.addMenuItem("USA map",!0,menusHelper,"createUSAMapIconMorph","others"),t.popUpAtHand()},window.MenusHelper.prototype.popUpGraphsMenu=function(e){var t;return(t=new MenuMorph(e,!1,this,!0,!0,"graphs")).addMenuItem("axis",!0,menusHelper,"create2DAxis"),t.addMenuItem("scatter plot",!0,menusHelper,"createExampleScatterPlot"),t.addMenuItem("scatter plot with axes",!0,menusHelper,"createExampleScatterPlotWithAxes"),t.addMenuItem("function plot",!0,menusHelper,"createExampleFunctionPlot"),t.addMenuItem("bar plot",!0,menusHelper,"createExampleBarPlot"),t.addMenuItem("3D plot",!0,menusHelper,"createExample3DPlot"),t.popUpAtHand()},window.MenusHelper.prototype.popUpSupportDocsMenu=function(e){var t;return(t=new MenuMorph(e,!1,this,!0,!0,"Support Docs")).addMenuItem("welcome message",!0,this,"createWelcomeMessageWindowAndShortcut","welcome message"),t.popUpAtHand()},window.MenusHelper.prototype.createWelcomeMessageWindowAndShortcut=function(){var e,t,n,o,i;return(t=(n=new SimpleDocumentWdgt).simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),t.rawSetExtent(new Point(365,405)),(o=new FizzygumLogoIconWdgt).rawSetExtent(new Point(85,85)),t.setContents(o,5),o.layoutSpecDetails.setElasticity(0),o.layoutSpecDetails.setAlignmentToCenter(),(o=new SimplePlainTextWdgt("Welcome to Fizzygum",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),o.setFontSize(24),o.isEditable=!0,o.enableSelecting(),t.add(o),(o=new SimplePlainTextWdgt("version 1.1.7",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),o.setFontSize(9),o.isEditable=!0,o.enableSelecting(),t.add(o),t.addDivider(),t.addNormalParagraph("Tired of stringing libraries together?"),t.addNormalParagraph("Welcome to a powerful new framework designed from the ground up to do complex things, easily."),t.addSpacer(),(o=new SimplePlainTextWdgt("What it can do for you",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),o.setFontSize(22),o.isEditable=!0,o.enableSelecting(),t.add(o),t.addDivider(),t.addNormalParagraph("Fizzygum enables you to do all of this and more:"),t.addBulletPoint("make dashboards and visualise data (plots, maps, ...)"),t.addBulletPoint("author, organise and navigate documents (drawings / text docs / slides)"),t.addBulletPoint("embed live graphs, dynamic calculations or even entire running programs inside any document, via simple drag & drop"),t.addBulletPoint("go beyond traditional embedding: you can now infinitely nest and compose programs and documents. Need a program inside a presentation inside a text? You have it"),t.addBulletPoint("make custom utilities (e.g. temperature converter) by simply connecting existing components - no coding required"),t.addBulletPoint("use the internal development tools to create entirely new apps, or change existing ones while they are running. Add custom features without even needing to refresh the page."),t.addBulletPoint("do all of the above, concurrently"),t.addSpacer(),(o=new SimplePlainTextWdgt("New here?",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),o.setFontSize(22),o.isEditable=!0,o.enableSelecting(),t.add(o),t.addDivider(),t.addNormalParagraph("Feel free to click around this sandbox. Double-click the items on the desktop to open them. Just reload to start again from scratch."),t.addSpacer(),t.addNormalParagraph("Also check out some screenshots here:"),(o=new SimpleLinkWdgt("Screenshots","http://fizzygum.org/screenshots/")).rawSetExtent(new Point(405,50)),t.add(o),o.layoutSpecDetails.setAlignmentToRight(),t.addNormalParagraph("...or watch some quick demos on the Youtube channel:"),(o=new SimpleVideoLinkWdgt("YouTube channel","https://www.youtube.com/channel/UCmYco9RU3h9dofRVN3bqxIw")).rawSetExtent(new Point(405,50)),t.add(o),o.layoutSpecDetails.setAlignmentToRight(),t.addNormalParagraph("...or docs here:"),(o=new SimpleLinkWdgt("Docs","http://fizzygum.org/docs/intro/")).rawSetExtent(new Point(405,50)),t.add(o),o.layoutSpecDetails.setAlignmentToRight(),t.addSpacer(2),(o=new SimplePlainTextWdgt("Get in touch",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),o.setFontSize(22),o.isEditable=!0,o.enableSelecting(),t.add(o),t.addDivider(),t.addNormalParagraph("Mail? Mailing list? Facebook page? Twitter? Chat? We have it all."),(o=new SimpleLinkWdgt("Contacts","http://fizzygum.org/contact/")).rawSetExtent(new Point(405,50)),t.add(o),o.layoutSpecDetails.setAlignmentToRight(),(i=new WindowWdgt(nil,nil,n)).rawSetExtent(new Point(365,405)),i.fullRawMoveFullCenterTo(world.center()),world.add(i),i.setTitleWithoutPrependedContentName("Welcome"),i.changed(),n.disableDragsDropsAndEditing(),e=new IconicDesktopSystemDocumentShortcutWdgt(i,"Welcome",new WelcomeIconWdgt),world.add(e),e.setExtent(new Point(75,75)),e.fullChanged()},window.MenusHelper.prototype.createSuperToolbarOneOffInfoWindowNextTo=function(e){var t,n,o,i;return world.infoDoc_superToolbar_created?nil:((t=(n=new SimpleDocumentWdgt).simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),t.rawSetExtent(new Point(365,405)),(o=new ToolbarsIconWdgt).rawSetExtent(new Point(85,85)),t.setContents(o,5),o.layoutSpecDetails.setElasticity(0),o.layoutSpecDetails.setAlignmentToCenter(),(o=new SimplePlainTextWdgt("Super Toolbar",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),o.setFontSize(22),o.isEditable=!0,o.enableSelecting(),t.add(o),t.addDivider(),t.addNormalParagraph("The Super Toolbar can create all other toolbars for you, and from those toolbars you can create any widget.\n\nThis is handy because any widget can go in any document... so here is a way to access them all.\n\nFor an example on how this is useful, see the video on `mixing widgets`:"),(o=new SimpleVideoLinkWdgt("Mixing widgets","http://fizzygum.org/docs/mixing-widgets/")).rawSetExtent(new Point(405,50)),t.add(o),o.layoutSpecDetails.setAlignmentToRight(),(i=new WindowWdgt(nil,nil,n)).rawSetExtent(new Point(365,405)),i.fullRawMoveFullCenterTo(world.center()),world.add(i),i.setTitleWithoutPrependedContentName("Super Toolbar info"),i.changed(),n.disableDragsDropsAndEditing(),world.infoDoc_superToolbar_created=!0,n.closeFromContainerWindow=function(e){return e.destroy()},i.fullRawMoveToSideOf(e),i.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.prototype.createDocsMakerOneOffInfoWindowNextTo=function(e){var t,n,o,i;return world.infoDoc_docsMaker_created?nil:((t=(n=new SimpleDocumentWdgt).simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),t.rawSetExtent(new Point(365,405)),(o=new TypewriterIconWdgt).rawSetExtent(new Point(85,85)),t.setContents(o,5),o.layoutSpecDetails.setElasticity(0),o.layoutSpecDetails.setAlignmentToCenter(),(o=new SimplePlainTextWdgt("Docs Maker",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),o.setFontSize(22),o.isEditable=!0,o.enableSelecting(),t.add(o),t.addDivider(),t.addNormalParagraph("A basic text editor. But you can drop anything inside it.\n\nNote that the Docs Maker works 'by paragraph': you can drag/drop paragraphs, and when you change the style the whole paragraph is affected.\n\nQuickest way to compose a document is to drag/drop snippets, which you can find by clicking the button that looks like this:"),(o=new GlassBoxBottomWdgt).add(new TemplatesButtonWdgt),o.rawSetExtent(new Point(50,50)),t.add(o),o.layoutSpecDetails.setAlignmentToCenter(),t.addSpacer(),t.addNormalParagraph("Once you are done editing, click the pencil icon on the window bar."),t.addNormalParagraph("To see an example of use, check out the video here:"),(o=new SimpleVideoLinkWdgt("Docs Maker","http://fizzygum.org/docs/documents-maker/")).rawSetExtent(new Point(405,50)),t.add(o),o.layoutSpecDetails.setAlignmentToRight(),(i=new WindowWdgt(nil,nil,n)).rawSetExtent(new Point(365,405)),i.fullRawMoveFullCenterTo(world.center()),world.add(i),i.setTitleWithoutPrependedContentName("Docs Maker info"),i.changed(),n.disableDragsDropsAndEditing(),world.infoDoc_docsMaker_created=!0,n.closeFromContainerWindow=function(e){return e.destroy()},i.fullRawMoveToSideOf(e),i.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.prototype.createDrawingsMakerOneOffInfoWindowNextTo=function(e){var t,n,o,i;return world.infoDoc_drawingsMaker_created?nil:((t=(n=new SimpleDocumentWdgt).simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),t.rawSetExtent(new Point(365,405)),(o=new PaintBucketIconWdgt).rawSetExtent(new Point(85,85)),t.setContents(o,5),o.layoutSpecDetails.setElasticity(0),o.layoutSpecDetails.setAlignmentToCenter(),(o=new SimplePlainTextWdgt("Drawings Maker",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),o.setFontSize(22),o.isEditable=!0,o.enableSelecting(),t.add(o),t.addDivider(),t.addNormalParagraph("Simple paint app. But you can drop anything inside it (try with the clock) to 'use it as a stamp'."),t.addNormalParagraph("Once you are done editing, click the pencil icon on the window bar."),t.addNormalParagraph("To see an example of use, check out the video here:"),(o=new SimpleVideoLinkWdgt("Draw app","http://fizzygum.org/docs/draw-app/")).rawSetExtent(new Point(405,50)),t.add(o),o.layoutSpecDetails.setAlignmentToRight(),t.addNormalParagraph("You can also edit the tools you use, by clicking on the pencil icon next to the tool."),t.addNormalParagraph("To see how an example of editing the tools, see this video:"),(o=new SimpleVideoLinkWdgt("Hacking Fizzygum","http://fizzygum.org/docs/hacking-fizzygum/")).rawSetExtent(new Point(405,50)),t.add(o),o.layoutSpecDetails.setAlignmentToRight(),(i=new WindowWdgt(nil,nil,n)).rawSetExtent(new Point(365,405)),i.fullRawMoveFullCenterTo(world.center()),world.add(i),i.setTitleWithoutPrependedContentName("Drawings Maker info"),i.changed(),n.disableDragsDropsAndEditing(),world.infoDoc_drawingsMaker_created=!0,n.closeFromContainerWindow=function(e){return e.destroy()},i.fullRawMoveToSideOf(e),i.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.prototype.createSlidesMakerOneOffInfoWindowNextTo=function(e){var t,n,o,i;return world.infoDoc_slidesMaker_created?nil:((t=(n=new SimpleDocumentWdgt).simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),t.rawSetExtent(new Point(365,405)),(o=new SimpleSlideIconWdgt).rawSetExtent(new Point(85,85)),t.setContents(o,5),o.layoutSpecDetails.setElasticity(0),o.layoutSpecDetails.setAlignmentToCenter(),(o=new SimplePlainTextWdgt("Slides Maker",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),o.setFontSize(22),o.isEditable=!0,o.enableSelecting(),t.add(o),t.addDivider(),t.addNormalParagraph("Anything you drop inside the slide 'keeps proportion' when resized, which makes it handy to put pins on maps, add callouts, arrange text in custom layouts etc."),t.addNormalParagraph("Once you are done editing, click the pencil icon on the window bar."),t.addNormalParagraph("To see an example of use, check out the video here:"),(o=new SimpleVideoLinkWdgt("Slides Maker","http://fizzygum.org/docs/slides-maker/")).rawSetExtent(new Point(405,50)),t.add(o),o.layoutSpecDetails.setAlignmentToRight(),(i=new WindowWdgt(nil,nil,n)).rawSetExtent(new Point(365,405)),i.fullRawMoveFullCenterTo(world.center()),world.add(i),i.setTitleWithoutPrependedContentName("Slides Maker info"),i.changed(),n.disableDragsDropsAndEditing(),world.infoDoc_slidesMaker_created=!0,n.closeFromContainerWindow=function(e){return e.destroy()},i.fullRawMoveToSideOf(e),i.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.prototype.createDashboardsMakerOneOffInfoWindowNextTo=function(e){var t,n,o,i;return world.infoDoc_dashboardsMaker_created?nil:((t=(n=new SimpleDocumentWdgt).simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),t.rawSetExtent(new Point(365,405)),(o=new DashboardsIconWdgt).rawSetExtent(new Point(85,85)),t.setContents(o,5),o.layoutSpecDetails.setElasticity(0),o.layoutSpecDetails.setAlignmentToCenter(),(o=new SimplePlainTextWdgt("Dashboards Maker",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),o.setFontSize(22),o.isEditable=!0,o.enableSelecting(),t.add(o),t.addDivider(),t.addNormalParagraph("Lets you arrange a choice of graphs/charts/plots/maps in any way you please. The visualisations can also be interactive (as in the 3D plot example, which you can drag to rotate) and/or calculated on the fly.\n\nOn the bar on the left you can find four example graphs and two example maps."),t.addNormalParagraph("Once you are done editing, click the pencil icon on the window bar."),t.addNormalParagraph("To see an example of use, check out the video here:"),(o=new SimpleVideoLinkWdgt("Dashboards Maker","http://fizzygum.org/docs/dashboards/")).rawSetExtent(new Point(405,50)),t.add(o),o.layoutSpecDetails.setAlignmentToRight(),(i=new WindowWdgt(nil,nil,n)).rawSetExtent(new Point(365,405)),i.fullRawMoveFullCenterTo(world.center()),world.add(i),i.setTitleWithoutPrependedContentName("Dashboards Maker info"),i.changed(),n.disableDragsDropsAndEditing(),world.infoDoc_dashboardsMaker_created=!0,n.closeFromContainerWindow=function(e){return e.destroy()},i.fullRawMoveToSideOf(e),i.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.prototype.createPatchProgrammingOneOffInfoWindowNextTo=function(e){var t,n,o,i;return world.infoDoc_patchProgramming_created?nil:((t=(n=new SimpleDocumentWdgt).simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),t.rawSetExtent(new Point(365,405)),(o=new PatchProgrammingIconWdgt).rawSetExtent(new Point(85,85)),t.setContents(o,5),o.layoutSpecDetails.setElasticity(0),o.layoutSpecDetails.setAlignmentToCenter(),(o=new SimplePlainTextWdgt("Patch Programming",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),o.setFontSize(22),o.isEditable=!0,o.enableSelecting(),t.add(o),t.addDivider(),t.addNormalParagraph("'Patch programming' is a type of visual programming where you simply connect together existing widgets. It's useful to make simple applications/utilities quickly."),t.addNormalParagraph("You can imagine the widgets being 'patched together' by imaginary wires."),t.addNormalParagraph("You can see in the `example docs` folder a °C ↔ °F converter example made with this."),t.addNormalParagraph("Once you are done editing, click the pencil icon on the window bar."),t.addNormalParagraph("To see an example of use, check out the videos here:"),(o=new SimpleVideoLinkWdgt("Patch programming - basics","http://fizzygum.org/docs/basic-connections/")).rawSetExtent(new Point(405,50)),t.add(o),o.layoutSpecDetails.setAlignmentToRight(),(o=new SimpleVideoLinkWdgt("Patch programming - advanced","http://fizzygum.org/docs/advanced-connections/")).rawSetExtent(new Point(405,50)),t.add(o),o.layoutSpecDetails.setAlignmentToRight(),(i=new WindowWdgt(nil,nil,n)).rawSetExtent(new Point(365,405)),i.fullRawMoveFullCenterTo(world.center()),world.add(i),i.setTitleWithoutPrependedContentName("Patch Programming info"),i.changed(),n.disableDragsDropsAndEditing(),world.infoDoc_patchProgramming_created=!0,n.closeFromContainerWindow=function(e){return e.destroy()},i.fullRawMoveToSideOf(e),i.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.prototype.createGenericPanelOneOffInfoWindowNextTo=function(e){var t,n,o,i;return world.infoDoc_genericPanel_created?nil:((t=(n=new SimpleDocumentWdgt).simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),t.rawSetExtent(new Point(365,405)),(o=new GenericPanelIconWdgt).rawSetExtent(new Point(85,85)),t.setContents(o,5),o.layoutSpecDetails.setElasticity(0),o.layoutSpecDetails.setAlignmentToCenter(),(o=new SimplePlainTextWdgt("Generic Panel",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),o.setFontSize(22),o.isEditable=!0,o.enableSelecting(),t.add(o),t.addDivider(),t.addNormalParagraph("You can use this panel to temporarily hold widgets, or to put together any mix of widgets. It's just a more generic version of slides and dashboards."),t.addNormalParagraph("Once you are done editing, click the pencil icon on the window bar."),t.addNormalParagraph("To see an example of use, check out the video here:"),(o=new SimpleVideoLinkWdgt("Mixing widgets (using generic panels)","http://fizzygum.org/docs/mixing-widgets/")).rawSetExtent(new Point(405,50)),t.add(o),o.layoutSpecDetails.setAlignmentToRight(),(i=new WindowWdgt(nil,nil,n)).rawSetExtent(new Point(365,405)),i.fullRawMoveFullCenterTo(world.center()),world.add(i),i.setTitleWithoutPrependedContentName("Generic Panels info"),i.changed(),n.disableDragsDropsAndEditing(),world.infoDoc_genericPanel_created=!0,n.closeFromContainerWindow=function(e){return e.destroy()},i.fullRawMoveToSideOf(e),i.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.prototype.createBasementOneOffInfoWindowNextTo=function(e){var t,n,o,i;return world.infoDoc_basement_created?nil:((t=(n=new SimpleDocumentWdgt).simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),t.rawSetExtent(new Point(365,405)),(o=new BasementIconWdgt).rawSetExtent(new Point(85,85)),t.setContents(o,5),o.layoutSpecDetails.setElasticity(0),o.layoutSpecDetails.setAlignmentToCenter(),(o=new SimplePlainTextWdgt("Basement",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),o.setFontSize(22),o.isEditable=!0,o.enableSelecting(),t.add(o),t.addDivider(),t.addNormalParagraph("Drag things in here to recycle them.\n\nClosed or invisible items also end up in here, and the items that can't be used again are automatically recycled."),(i=new WindowWdgt(nil,nil,n)).rawSetExtent(new Point(365,405)),i.fullRawMoveFullCenterTo(world.center()),world.add(i),i.setTitleWithoutPrependedContentName("Basement info"),i.changed(),n.disableDragsDropsAndEditing(),world.infoDoc_basement_created=!0,n.closeFromContainerWindow=function(e){return e.destroy()},i.fullRawMoveToSideOf(e),i.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.prototype.createWindowsToolbarOneOffInfoWindowNextTo=function(e){var t,n,o,i;return world.infoDoc_windowsToolbar_created?nil:((t=(n=new SimpleDocumentWdgt).simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),t.rawSetExtent(new Point(365,405)),(o=new WindowsToolbarIconWdgt).rawSetExtent(new Point(85,85)),t.setContents(o,5),o.layoutSpecDetails.setElasticity(0),o.layoutSpecDetails.setAlignmentToCenter(),(o=new SimplePlainTextWdgt("Types of windows",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),o.setFontSize(22),o.isEditable=!0,o.enableSelecting(),t.add(o),t.addDivider(),t.addNormalParagraph("There are four main types of windows"),t.addBulletPoint("empty windows, with a target area where you can drop other items in"),t.addBulletPoint("windows that crop their content"),t.addBulletPoint("windows with a scroll view on their content"),t.addBulletPoint("windows with an elastic panel, such that when resized the content will resize as well"),(i=new WindowWdgt(nil,nil,n)).rawSetExtent(new Point(365,405)),i.fullRawMoveFullCenterTo(world.center()),world.add(i),i.setTitleWithoutPrependedContentName("Windows info"),i.changed(),n.disableDragsDropsAndEditing(),world.infoDoc_windowsToolbar_created=!0,n.closeFromContainerWindow=function(e){return e.destroy()},i.fullRawMoveToSideOf(e),i.rememberFractionalSituationInHoldingPanel(),i)},window.MenusHelper.prototype.createDegreesConverterOpener=function(e){var t,n,o;return(n=new ScriptWdgt("\nmenusHelper.createDegreesConverterWindowOrBringItUpIfAlreadyCreated()\n\n")).saveScript(),(o=new WindowWdgt(nil,nil,n)).setExtent(new Point(460,400)),o.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),o.fullRawMoveWithin(world),o.changed(),(t=new IconicDesktopSystemScriptShortcutWdgt(o,"°C ↔ °F",new DegreesConverterIconWdgt)).setExtent(new Point(75,75)),null!=e?e.contents.contents.add(t):world.add(t),o},window.MenusHelper.prototype.createSampleDashboardOpener=function(e){var t,n,o;return(n=new ScriptWdgt("\nmenusHelper.createSampleDashboardWindowOrBringItUpIfAlreadyCreated()\n\n")).saveScript(),(o=new WindowWdgt(nil,nil,n)).setExtent(new Point(460,400)),o.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),o.fullRawMoveWithin(world),o.changed(),(t=new IconicDesktopSystemScriptShortcutWdgt(o,"sample dashb",new GenericShortcutIconWdgt(new DashboardsIconWdgt))).setExtent(new Point(75,75)),null!=e?e.contents.contents.add(t):world.add(t),o},window.MenusHelper.prototype.createSampleSlideOpener=function(e){var t,n,o;return(n=new ScriptWdgt("\nmenusHelper.createSampleSlideWindowOrBringItUpIfAlreadyCreated()\n\n")).saveScript(),(o=new WindowWdgt(nil,nil,n)).setExtent(new Point(460,400)),o.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),o.fullRawMoveWithin(world),o.changed(),(t=new IconicDesktopSystemScriptShortcutWdgt(o,"sample slide",new GenericShortcutIconWdgt(new SimpleSlideIconWdgt))).setExtent(new Point(75,75)),null!=e?e.contents.contents.add(t):world.add(t),o},window.MenusHelper.prototype.createSampleDocOpener=function(e){var t,n,o;return(n=new ScriptWdgt("\nmenusHelper.createSampleDocWindowOrBringItUpIfAlreadyCreated()\n\n")).saveScript(),(o=new WindowWdgt(nil,nil,n)).setExtent(new Point(460,400)),o.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),o.fullRawMoveWithin(world),o.changed(),(t=new IconicDesktopSystemScriptShortcutWdgt(o,"sample doc",new GenericShortcutIconWdgt(new TypewriterIconWdgt))).setExtent(new Point(75,75)),null!=e?e.contents.contents.add(t):world.add(t),o},window.MenusHelper.prototype.createSampleSlideWindowOrBringItUpIfAlreadyCreated=function(){var e,t,n,o,i,r,l,a,s;return null==world.sampleSlideWindow||world.sampleSlideWindow.destroyed||null==world.sampleSlideWindow.parent?((e=(i=new SimpleSlideWdgt).stretchableWidgetContainer.contents).rawSetExtent(new Point(575,454)),(a=new WindowWdgt(nil,nil,new ScrollPanelWdgt,!0,!0)).setTitleWithoutPrependedContentName("New York City"),a.fullRawMoveTo(e.position().add(new Point(28,43))),a.rawSetExtent(new Point(322,268)),e.add(a),a.rememberFractionalSituationInHoldingPanel(),(r=new SimpleUSAMapIconWdgt(new Color(183,183,183))).rawSetExtent(new Point(1808,1115)),a.contents.add(r),a.contents.scrollTo(new Point(1484,246)),r.rememberFractionalSituationInHoldingPanel(),n=new MapPinIconWdgt,a.contents.add(n),n.fullRawMoveTo(a.contents.contents.position().add(new Point(1606,343))),n.rememberFractionalSituationInHoldingPanel(),(o=new WindowWdgt(nil,nil,new PlotWithAxesWdgt(new ExampleBarPlotWdgt),!0,!0)).rawSetExtent(new Point(240,104)),a.contents.add(o),o.fullRawMoveTo(a.contents.contents.position().add(new Point(1566,420))),o.setTitleWithoutPrependedContentName("NYC: traffic"),a.contents.disableDragsDropsAndEditing(),(t=new TextMorph2("The City of New York, often called New York City or simply New York, is the most populous city in the United States. With an estimated 2017 population of 8,622,698 distributed over a land area of about 302.6 square miles (784 km2), New York City is also the most densely populated major city in the United States.")).fittingSpecWhenBoundsTooLarge=FittingSpecTextInLargerBounds.SCALEUP,t.fittingSpecWhenBoundsTooSmall=FittingSpecTextInSmallerBounds.SCALEDOWN,t.fullRawMoveTo(e.position().add(new Point(366,40))),t.rawSetExtent(new Point(176,387)),e.add(t),t.rememberFractionalSituationInHoldingPanel(),(l=new SimpleLinkWdgt("New York City Wikipedia page","https://en.wikipedia.org/wiki/New_York_City")).fullRawMoveTo(e.position().add(new Point(110,348))),l.rawSetExtent(new Point(250,50)),e.add(l),l.rememberFractionalSituationInHoldingPanel(),(s=new WindowWdgt(nil,nil,i)).fullRawMoveTo(new Point(114,10)),s.rawSetExtent(new Point(596,592)),world.add(s),s.setTitleWithoutPrependedContentName("Sample slide"),s.changed(),i.disableDragsDropsAndEditing(),i.closeFromContainerWindow=function(e){return e.close()},world.sampleSlideWindow=s):(world.add(world.sampleSlideWindow),world.sampleSlideWindow.bringToForeground(),world.sampleSlideWindow.fullRawMoveTo(world.hand.position().add(new Point(100,-50))),world.sampleSlideWindow.fullRawMoveWithin(world),void world.sampleSlideWindow.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.prototype.createSampleDocWindowOrBringItUpIfAlreadyCreated=function(){var e,t,n,o,i,r;return null==world.sampleDocWindow||world.sampleDocWindow.destroyed||null==world.sampleDocWindow.parent?((t=(n=new SimpleDocumentWdgt).simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),t.rawSetExtent(new Point(365,405)),(i=new SimplePlainTextWdgt("Sample Doc",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),i.setFontSize(22),i.isEditable=!0,i.enableSelecting(),t.setContents(i,5),t.addDivider(),t.addNormalParagraph("Text documents (or simply: docs) don't just contain text or images: they can embed any widget."),t.addNormalParagraph("For example, here is an interactive 3D plot:\n"),(e=new WindowWdgt(nil,nil,new Example3DPlotWdgt,!0,!0)).rawSetExtent(new Point(400,255)),e.contents.constrainToRatio(),t.add(e),t.addSpacer(),t.addNormalParagraph("Connected widgets can be added too, for example this slider below controls the data points of the graph above:\n"),(o=new SliderMorph(nil,nil,nil,nil,nil,!0)).rawSetExtent(new Point(400,24)),t.add(o),o.setTargetAndActionWithOnesPickedFromMenu(nil,nil,e.contents,"setParameter"),t.addSpacer(),t.addNormalParagraph("How to add connected widgets? Simple: just connect any number of them (see the °C ↔ °F converter for an example), then drop them in the doc."),t.addSpacer(),t.addNormalParagraph("What else could be added? Anything! Scripts, maps, maps inside scrolling views, maps with graphs, slides, other docs, and on and on and on..."),(r=new WindowWdgt(nil,nil,n)).rawSetExtent(new Point(331,545)),r.fullRawMoveTo(new Point(257,110)),world.add(r),r.setTitleWithoutPrependedContentName("Sample text document"),r.changed(),n.disableDragsDropsAndEditing(),n.closeFromContainerWindow=function(e){return e.close()},world.sampleDocWindow=r):(world.add(world.sampleDocWindow),world.sampleDocWindow.bringToForeground(),world.sampleDocWindow.fullRawMoveTo(world.hand.position().add(new Point(100,-50))),world.sampleDocWindow.fullRawMoveWithin(world),void world.sampleDocWindow.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.prototype.createSampleDashboardWindowOrBringItUpIfAlreadyCreated=function(){var e,t,n,o,i,r,l,a,s,d,h,p,c,u,w,g,T,f;return null==world.sampleDashboardWindow||world.sampleDashboardWindow.destroyed||null==world.sampleDashboardWindow.parent?((t=(p=new DashboardsWdgt).stretchableWidgetContainer.contents).rawSetExtent(new Point(725,556)),(h=new WindowWdgt(nil,nil,new PlotWithAxesWdgt(new ExampleScatterPlotWdgt),!0,!0)).fullRawMoveTo(t.position().add(new Point(19,86))),h.rawSetExtent(new Point(200,200)),t.add(h),h.rememberFractionalSituationInHoldingPanel(),(o=new WindowWdgt(nil,nil,new PlotWithAxesWdgt(new ExampleFunctionPlotWdgt),!0,!0)).fullRawMoveTo(t.position().add(new Point(251,86))),o.rawSetExtent(new Point(200,200)),t.add(o),o.rememberFractionalSituationInHoldingPanel(),(e=new WindowWdgt(nil,nil,new PlotWithAxesWdgt(new ExampleBarPlotWdgt),!0,!0)).fullRawMoveTo(t.position().add(new Point(19,327))),e.rawSetExtent(new Point(200,200)),t.add(e),e.rememberFractionalSituationInHoldingPanel(),(d=new WindowWdgt(nil,nil,new Example3DPlotWdgt,!0,!0)).fullRawMoveTo(t.position().add(new Point(491,327))),d.rawSetExtent(new Point(200,150)),t.add(d),d.rememberFractionalSituationInHoldingPanel(),(g=new SimpleUSAMapIconWdgt(new Color(183,183,183))).fullRawMoveTo(t.position().add(new Point(242,355))),g.rawSetExtent(new Point(230,145)),t.add(g),g.rememberFractionalSituationInHoldingPanel(),(i=new MapPinIconWdgt).fullRawMoveTo(t.position().add(new Point(226,376))),t.add(i),i.rememberFractionalSituationInHoldingPanel(),(r=new MapPinIconWdgt).fullRawMoveTo(t.position().add(new Point(289,363))),t.add(r),r.rememberFractionalSituationInHoldingPanel(),(l=new MapPinIconWdgt).fullRawMoveTo(t.position().add(new Point(323,397))),t.add(l),l.rememberFractionalSituationInHoldingPanel(),(a=new MapPinIconWdgt).fullRawMoveTo(t.position().add(new Point(360,421))),t.add(a),a.rememberFractionalSituationInHoldingPanel(),(s=new MapPinIconWdgt).fullRawMoveTo(t.position().add(new Point(417,374))),t.add(s),s.rememberFractionalSituationInHoldingPanel(),(f=new SimpleWorldMapIconWdgt(new Color(183,183,183))).fullRawMoveTo(t.position().add(new Point(464,128))),f.rawSetExtent(new Point(240,125)),t.add(f),f.rememberFractionalSituationInHoldingPanel(),(u=new SpeechBubbleWdgt("online")).fullRawMoveTo(t.position().add(new Point(506,123))),u.rawSetExtent(new Point(66,42)),t.add(u),u.rememberFractionalSituationInHoldingPanel(),(w=new SpeechBubbleWdgt("offline")).fullRawMoveTo(t.position().add(new Point(590,105))),w.rawSetExtent(new Point(66,42)),t.add(w),w.rememberFractionalSituationInHoldingPanel(),(n=new TextMorph2("Example dashboard with interactive 3D plot")).alignCenter(),n.alignMiddle(),n.fullRawMoveTo(t.position().add(new Point(161,6))),n.rawSetExtent(new Point(403,50)),t.add(n),n.rememberFractionalSituationInHoldingPanel(),(c=new SliderMorph(nil,nil,nil,nil,nil,!0)).fullRawMoveTo(t.position().add(new Point(491,484))),c.rawSetExtent(new Point(201,24)),t.add(c),c.rememberFractionalSituationInHoldingPanel(),c.setTargetAndActionWithOnesPickedFromMenu(nil,nil,d.contents,"setParameter"),(T=new WindowWdgt(nil,nil,p)).fullRawMoveTo(new Point(114,10)),T.rawSetExtent(new Point(596,592)),world.add(T),T.setTitleWithoutPrependedContentName("Sample dashboard"),T.changed(),p.disableDragsDropsAndEditing(),p.closeFromContainerWindow=function(e){return e.close()},world.sampleDashboardWindow=T):(world.add(world.sampleDashboardWindow),world.sampleDashboardWindow.bringToForeground(),world.sampleDashboardWindow.fullRawMoveTo(world.hand.position().add(new Point(100,-50))),world.sampleDashboardWindow.fullRawMoveWithin(world),void world.sampleDashboardWindow.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.prototype.createDegreesConverterWindowOrBringItUpIfAlreadyCreated=function(){var e,t,n,o,i,r,l,a,s,d,h;return null==world.degreesConverterWindow||world.degreesConverterWindow.destroyed||null==world.degreesConverterWindow.parent?(32,50,(i=(a=new PatchProgrammingWdgt).stretchableWidgetContainer.contents).rawSetExtent(new Point(584,552)),(s=new SliderMorph(nil,nil,nil,nil,nil,!0)).fullRawMoveTo(i.position().add(new Point(75,245))),s.rawSetExtent(new Point(20,100)),i.add(s),s.rememberFractionalSituationInHoldingPanel(),(d=new SliderMorph(nil,nil,nil,nil,nil,!0)).fullRawMoveTo(i.position().add(new Point(504,253))),d.rawSetExtent(new Point(20,100)),i.add(d),d.rememberFractionalSituationInHoldingPanel(),(t=new TextMorph2("0")).fullRawMoveTo(i.position().add(new Point(104,253))),t.rawSetExtent(new Point(150,75)),i.add(t),t.rememberFractionalSituationInHoldingPanel(),(l=new TextMorph2("0")).fullRawMoveTo(i.position().add(new Point(344,255))),l.alignRight(),l.rawSetExtent(new Point(150,75)),i.add(l),l.rememberFractionalSituationInHoldingPanel(),(n=new WindowWdgt(nil,nil,new CalculatingPatchNodeWdgt("# °C → °F formula\n(in1)->Math.round in1*9/5+32"),!0)).fullRawMoveTo(i.position().add(new Point(164,19))),n.rawSetExtent(new Point(241,167)),i.add(n),n.rememberFractionalSituationInHoldingPanel(),(o=new WindowWdgt(nil,nil,new CalculatingPatchNodeWdgt("# °F → °C formula\n(in1)->Math.round (in1-32)*5/9"),!0)).fullRawMoveTo(i.position().add(new Point(164,365))),o.rawSetExtent(new Point(241,167)),i.add(o),o.rememberFractionalSituationInHoldingPanel(),s.setTargetAndActionWithOnesPickedFromMenu(nil,nil,t,"setText"),t.setTargetAndActionWithOnesPickedFromMenu(nil,nil,n.contents,"setInput1"),n.contents.setTargetAndActionWithOnesPickedFromMenu(nil,nil,l,"setText"),l.setTargetAndActionWithOnesPickedFromMenu(nil,nil,d,"setValue"),d.setTargetAndActionWithOnesPickedFromMenu(nil,nil,o.contents,"setInput1"),o.contents.setTargetAndActionWithOnesPickedFromMenu(nil,nil,s,"setValue"),(e=new TextMorph2("°C")).fullRawMoveTo(i.position().add(new Point(32,152))),e.rawSetExtent(new Point(90,90)),i.add(e),e.rememberFractionalSituationInHoldingPanel(),(r=new TextMorph2("°F")).fullRawMoveTo(i.position().add(new Point(454,152))),r.rawSetExtent(new Point(90,90)),i.add(r),r.rememberFractionalSituationInHoldingPanel(),(h=new WindowWdgt(nil,nil,a)).fullRawMoveTo(new Point(114,10)),h.rawSetExtent(new Point(596,592)),world.add(h),h.setTitleWithoutPrependedContentName("°C ↔ °F converter"),h.changed(),a.disableDragsDropsAndEditing(),t.isEditable=!0,l.isEditable=!0,a.closeFromContainerWindow=function(e){return e.close()},world.degreesConverterWindow=h):(world.add(world.degreesConverterWindow),world.degreesConverterWindow.bringToForeground(),world.degreesConverterWindow.fullRawMoveTo(world.hand.position().add(new Point(100,-50))),world.degreesConverterWindow.fullRawMoveWithin(world),void world.degreesConverterWindow.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.prototype.createHowToSaveMessageOpener=function(){var e,t,n;return(e=new ScriptWdgt("\nmenusHelper.createHowToSaveMessageWindowOrBringItUpIfAlreadyCreated()\n\n")).saveScript(),(n=new WindowWdgt(nil,nil,e)).setExtent(new Point(460,400)),n.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),n.fullRawMoveWithin(world),n.changed(),t=new IconicDesktopSystemScriptShortcutWdgt(n,"How to save?",new FloppyDiskIconWdgt),world.add(t),t.setExtent(new Point(75,75)),t.fullChanged(),n},window.MenusHelper.prototype.createHowToSaveMessageWindowOrBringItUpIfAlreadyCreated=function(){var e,t,n,o;return null==world.howToSaveDocWindow||world.howToSaveDocWindow.destroyed||null==world.howToSaveDocWindow.parent?((e=(t=new SimpleDocumentWdgt).simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),e.rawSetExtent(new Point(365,405)),(n=new FloppyDiskIconWdgt).rawSetExtent(new Point(85,85)),e.setContents(n,5),n.layoutSpecDetails.setElasticity(0),n.layoutSpecDetails.setAlignmentToCenter(),(n=new SimplePlainTextWdgt("How to save?",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),n.setFontSize(24),n.isEditable=!0,n.enableSelecting(),e.add(n),e.addDivider(),e.addNormalParagraph("There are a couple of ways to save data in Fizzygum.¹\n\nHowever, \"in-house\" stable saving solutions are only available in private versions.²\n\nIn the meantime that these solutions make their way into the public version, the Fizzygum team can consult for you to tailor 'saving' functionality to your needs (save to file, save to cloud, connect to databases etc. ).\n\nPlease enquiry via one of the Fizzygum contacts here:"),e.addSpacer(),(n=new SimpleLinkWdgt("Contacts","http://fizzygum.org/contact/")).rawSetExtent(new Point(405,50)),e.add(n),n.layoutSpecDetails.setAlignmentToRight(),e.addSpacer(),(n=new SimplePlainTextWdgt("Footnotes",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).toggleWeight(),n.isEditable=!0,n.enableSelecting(),n.toggleHeaderLine(),e.add(n),e.addSpacer(),e.addNormalParagraph('¹ Saving solutions:\n1) saving data with existing formats (e.g. markdown etc.). Advantages: compatibility. Disadvantages: works only with "plain" documents (no live documents, no documents within documents etc.)\n2) serialising objects graph. Advantages: fidelity. Disadvantages: needs some management of versioning of Fizzygum platform and documents\n3) deducing source code to generate content. Advantages: compactness, inspectability of source code, high-level semantics of source code preserved. Disadvantages: only possible with relatively simple objects.\n\n² Why private beta:\nProliferation of saving solutions done without our help could be detrimental to the Fizzygum platform (due to degraded experience on third party sites, incompatibilities between sites, migration issues, security issues, etc.), hence the Fizzygum team decided to withhold this functionality from public until we can package an open turn-key solution that minimises misuse and sub-par experiences.'),(o=new WindowWdgt(nil,nil,t)).fullRawMoveTo(new Point(114,10)),o.rawSetExtent(new Point(365,447)),world.add(o),o.rememberFractionalSituationInHoldingPanel(),o.setTitleWithoutPrependedContentName("How to save?"),o.changed(),t.disableDragsDropsAndEditing(),t.closeFromContainerWindow=function(e){return e.close()},world.howToSaveDocWindow=o):(world.add(world.howToSaveDocWindow),world.howToSaveDocWindow.bringToForeground(),world.howToSaveDocWindow.fullRawMoveTo(world.hand.position().add(new Point(100,-50))),world.howToSaveDocWindow.fullRawMoveWithin(world),void world.howToSaveDocWindow.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.instances=new Set,ParentStainerMixin={onceAddedClassProperties:function(e){return this.addInstanceProperties(e,{setColor:function(e,t,n,o){var i;if(o||n!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==n?getRandomInt(-2e4,2e4):n,window[this[arguments.callee.name+"_class_injected_in"]].__super__[arguments.callee.name].call(this,e,t,n,!0),null!=(i=this.parent)?i.setColor(e,t,n):void 0}})}},window.AlignCenterButtonWdgt=function(e){this.color=e,AlignCenterButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new AlignCenterIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.actionableAsThumbnail=!0,this.editorContentPropertyChangerButton=!0,this.toolTipMessage="align center","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AlignCenterButtonWdgt,"name",{value:"AlignCenterButtonWdgt"}),window.AlignCenterButtonWdgt.__super__=window.Widget.prototype,window.AlignCenterButtonWdgt=extend(window.AlignCenterButtonWdgt,window.Widget),window.AlignCenterButtonWdgt.augmentWith(window.HighlightableMixin,"AlignCenterButtonWdgt"),window.AlignCenterButtonWdgt.augmentWith(window.ParentStainerMixin,"AlignCenterButtonWdgt"),window.AlignCenterButtonWdgt.prototype.color_hover=new Color(90,90,90),window.AlignCenterButtonWdgt.prototype.color_pressed=new Color(128,128,128),window.AlignCenterButtonWdgt.prototype.color_normal=new Color(230,230,230),window.AlignCenterButtonWdgt.prototype.mouseClickLeft=function(){var e,t;return null!=(null!=(t=world.lastNonTextPropertyChangerButtonClickedOrDropped)?t.alignCenter:void 0)?world.lastNonTextPropertyChangerButtonClickedOrDropped.alignCenter():null!=world.lastNonTextPropertyChangerButtonClickedOrDropped&&null!=(null!=(e=world.lastNonTextPropertyChangerButtonClickedOrDropped.findRootForGrab())?e.layoutSpec:void 0)&&e.layoutSpec===LayoutSpec.ATTACHEDAS_VERTICAL_STACK_ELEMENT?e.layoutSpecDetails.setAlignmentToCenter():void 0},window.AlignCenterButtonWdgt.instances=new Set,window.AlignLeftButtonWdgt=function(e){this.color=e,AlignLeftButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new AlignLeftIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.actionableAsThumbnail=!0,this.editorContentPropertyChangerButton=!0,this.toolTipMessage="align left","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AlignLeftButtonWdgt,"name",{value:"AlignLeftButtonWdgt"}),window.AlignLeftButtonWdgt.__super__=window.Widget.prototype,window.AlignLeftButtonWdgt=extend(window.AlignLeftButtonWdgt,window.Widget),window.AlignLeftButtonWdgt.augmentWith(window.HighlightableMixin,"AlignLeftButtonWdgt"),window.AlignLeftButtonWdgt.augmentWith(window.ParentStainerMixin,"AlignLeftButtonWdgt"),window.AlignLeftButtonWdgt.prototype.color_hover=new Color(90,90,90),window.AlignLeftButtonWdgt.prototype.color_pressed=new Color(128,128,128),window.AlignLeftButtonWdgt.prototype.color_normal=new Color(230,230,230),window.AlignLeftButtonWdgt.prototype.mouseClickLeft=function(){var e,t;return null!=(null!=(t=world.lastNonTextPropertyChangerButtonClickedOrDropped)?t.alignLeft:void 0)?world.lastNonTextPropertyChangerButtonClickedOrDropped.alignLeft():null!=world.lastNonTextPropertyChangerButtonClickedOrDropped&&null!=(null!=(e=world.lastNonTextPropertyChangerButtonClickedOrDropped.findRootForGrab())?e.layoutSpec:void 0)&&e.layoutSpec===LayoutSpec.ATTACHEDAS_VERTICAL_STACK_ELEMENT?e.layoutSpecDetails.setAlignmentToLeft():void 0},window.AlignLeftButtonWdgt.instances=new Set,window.AlignRightButtonWdgt=function(e){this.color=e,AlignRightButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new AlignRightIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.actionableAsThumbnail=!0,this.editorContentPropertyChangerButton=!0,this.toolTipMessage="align right","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AlignRightButtonWdgt,"name",{value:"AlignRightButtonWdgt"}),window.AlignRightButtonWdgt.__super__=window.Widget.prototype,window.AlignRightButtonWdgt=extend(window.AlignRightButtonWdgt,window.Widget),window.AlignRightButtonWdgt.augmentWith(window.HighlightableMixin,"AlignRightButtonWdgt"),window.AlignRightButtonWdgt.augmentWith(window.ParentStainerMixin,"AlignRightButtonWdgt"),window.AlignRightButtonWdgt.prototype.color_hover=new Color(90,90,90),window.AlignRightButtonWdgt.prototype.color_pressed=new Color(128,128,128),window.AlignRightButtonWdgt.prototype.color_normal=new Color(230,230,230),window.AlignRightButtonWdgt.prototype.mouseClickLeft=function(){var e,t;return null!=(null!=(t=world.lastNonTextPropertyChangerButtonClickedOrDropped)?t.alignRight:void 0)?world.lastNonTextPropertyChangerButtonClickedOrDropped.alignRight():null!=world.lastNonTextPropertyChangerButtonClickedOrDropped&&null!=(null!=(e=world.lastNonTextPropertyChangerButtonClickedOrDropped.findRootForGrab())?e.layoutSpec:void 0)&&e.layoutSpec===LayoutSpec.ATTACHEDAS_VERTICAL_STACK_ELEMENT?e.layoutSpecDetails.setAlignmentToRight():void 0},window.AlignRightButtonWdgt.instances=new Set,window.CreatorButtonWdgt=function(){CreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.actionableAsThumbnail=!0,this.editorContentPropertyChangerButton=!0,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CreatorButtonWdgt,"name",{value:"CreatorButtonWdgt"}),window.CreatorButtonWdgt.__super__=window.Widget.prototype,window.CreatorButtonWdgt=extend(window.CreatorButtonWdgt,window.Widget),window.CreatorButtonWdgt.augmentWith(window.HighlightableMixin,"CreatorButtonWdgt"),window.CreatorButtonWdgt.augmentWith(window.ParentStainerMixin,"CreatorButtonWdgt"),window.CreatorButtonWdgt.augmentWith(window.WidgetCreatorAndSmartPlacerOnClickMixin,"CreatorButtonWdgt"),window.CreatorButtonWdgt.prototype.color_hover=new Color(90,90,90),window.CreatorButtonWdgt.prototype.color_pressed=new Color(128,128,128),window.CreatorButtonWdgt.prototype.color_normal=new Color(230,230,230),window.CreatorButtonWdgt.prototype.grabbedWidgetSwitcheroo=function(){return this.createWidgetToBeHandled()},window.CreatorButtonWdgt.prototype.grabsToParentWhenDragged=function(){return!1},window.CreatorButtonWdgt.instances=new Set,window.BarPlotWithAxesCreatorButtonWdgt=function(){BarPlotWithAxesCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new BarPlotIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="bar plot","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BarPlotWithAxesCreatorButtonWdgt,"name",{value:"BarPlotWithAxesCreatorButtonWdgt"}),window.BarPlotWithAxesCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.BarPlotWithAxesCreatorButtonWdgt=extend(window.BarPlotWithAxesCreatorButtonWdgt,window.CreatorButtonWdgt),window.BarPlotWithAxesCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var e;return(e=new WindowWdgt(nil,nil,new PlotWithAxesWdgt(new ExampleBarPlotWdgt),!0,!0)).rawSetExtent(new Point(200,200)),e},window.BarPlotWithAxesCreatorButtonWdgt.instances=new Set,window.BoldButtonWdgt=function(){BoldButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new BoldIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.actionableAsThumbnail=!0,this.editorContentPropertyChangerButton=!0,this.toolTipMessage="bold","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BoldButtonWdgt,"name",{value:"BoldButtonWdgt"}),window.BoldButtonWdgt.__super__=window.Widget.prototype,window.BoldButtonWdgt=extend(window.BoldButtonWdgt,window.Widget),window.BoldButtonWdgt.augmentWith(window.HighlightableMixin,"BoldButtonWdgt"),window.BoldButtonWdgt.augmentWith(window.ParentStainerMixin,"BoldButtonWdgt"),window.BoldButtonWdgt.prototype.color_hover=new Color(90,90,90),window.BoldButtonWdgt.prototype.color_pressed=new Color(128,128,128),window.BoldButtonWdgt.prototype.color_normal=new Color(230,230,230),window.BoldButtonWdgt.prototype.mouseClickLeft=function(){var e;if(null!=(null!=(e=world.lastNonTextPropertyChangerButtonClickedOrDropped)?e.toggleWeight:void 0))return world.lastNonTextPropertyChangerButtonClickedOrDropped.toggleWeight()},window.BoldButtonWdgt.instances=new Set,window.CalculatingNodeCreatorButtonWdgt=function(){CalculatingNodeCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new CalculatingNodeIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="calculating node","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CalculatingNodeCreatorButtonWdgt,"name",{value:"CalculatingNodeCreatorButtonWdgt"}),window.CalculatingNodeCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.CalculatingNodeCreatorButtonWdgt=extend(window.CalculatingNodeCreatorButtonWdgt,window.CreatorButtonWdgt),window.CalculatingNodeCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var e;return(e=new WindowWdgt(nil,nil,new CalculatingPatchNodeWdgt,!0)).rawSetExtent(new Point(260,265)),e},window.CalculatingNodeCreatorButtonWdgt.instances=new Set,window.ChangeFontButtonWdgt=function(e){this.simpleDocument=e,ChangeFontButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ChangeFontIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.actionableAsThumbnail=!0,this.editorContentPropertyChangerButton=!0,this.toolTipMessage="change font","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ChangeFontButtonWdgt,"name",{value:"ChangeFontButtonWdgt"}),window.ChangeFontButtonWdgt.__super__=window.IconMorph.prototype,window.ChangeFontButtonWdgt=extend(window.ChangeFontButtonWdgt,window.IconMorph),window.ChangeFontButtonWdgt.augmentWith(window.HighlightableMixin,"ChangeFontButtonWdgt"),window.ChangeFontButtonWdgt.augmentWith(window.ParentStainerMixin,"ChangeFontButtonWdgt"),window.ChangeFontButtonWdgt.prototype.color_hover=new Color(90,90,90),window.ChangeFontButtonWdgt.prototype.color_pressed=new Color(128,128,128),window.ChangeFontButtonWdgt.prototype.color_normal=new Color(230,230,230),window.ChangeFontButtonWdgt.prototype.simpleDocument=nil,window.ChangeFontButtonWdgt.prototype.mouseClickLeft=function(){var e;return null==this.simpleDocument.fontSelectionMenu||this.simpleDocument.fontSelectionMenu.destroyed?((e=new MenuMorph(this,!1,this,!0,!0,"Fonts")).addMenuItem("Arial",!0,this,"setFontName",nil,nil,nil,nil,nil,"justArialFontStack"),e.addMenuItem("Times",!0,this,"setFontName",nil,nil,nil,nil,nil,"timesFontStack"),e.addMenuItem("Georgia",!0,this,"setFontName",nil,nil,nil,nil,nil,"georgiaFontStack"),e.addMenuItem("Garamo",!0,this,"setFontName",nil,nil,nil,nil,nil,"garamoFontStack"),e.addMenuItem("Helve",!0,this,"setFontName",nil,nil,nil,nil,nil,"helveFontStack"),e.addMenuItem("Verda",!0,this,"setFontName",nil,nil,nil,nil,nil,"verdaFontStack"),e.addMenuItem("Treby",!0,this,"setFontName",nil,nil,nil,nil,nil,"trebuFontStack"),e.addMenuItem("Heavy",!0,this,"setFontName",nil,nil,nil,nil,nil,"heavyFontStack"),e.addMenuItem("Mono",!0,this,"setFontName",nil,nil,nil,nil,nil,"monoFontStack"),e.popUp(this.position().subtract(new Point(80,0)),world),e.editorContentPropertyChangerButton=!0,e.forAllChildrenBottomToTop((function(e){return e.editorContentPropertyChangerButton=!0})),this.simpleDocument.fontSelectionMenu=e):this.simpleDocument.fontSelectionMenu.popUp(this.position().subtract(new Point(80,0)),world)},window.ChangeFontButtonWdgt.prototype.setFontName=function(e,t,n){var o,i;if(null!=(null!=(o=world.lastNonTextPropertyChangerButtonClickedOrDropped)?o.setFontName:void 0))return(i=world.lastNonTextPropertyChangerButtonClickedOrDropped).setFontName(nil,t,i[n])},window.ChangeFontButtonWdgt.instances=new Set,window.CloseIconButtonMorph=function(e){this.target=e,CloseIconButtonMorph.__super__.constructor.call(this,!0,this,"actOnClick",new Widget),this.color_hover=new Color(255,0,0),this.color_pressed=this.color_hover,this.appearance=new CloseIconAppearance(this),this.toolTipMessage="close window","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CloseIconButtonMorph,"name",{value:"CloseIconButtonMorph"}),window.CloseIconButtonMorph.__super__=window.EmptyButtonMorph.prototype,window.CloseIconButtonMorph=extend(window.CloseIconButtonMorph,window.EmptyButtonMorph),window.CloseIconButtonMorph.prototype.actOnClick=function(){if(null!=this.parent)return this.parent instanceof WindowWdgt&&null!=this.parent.contents?this.parent.closeFromWindowBar():this.parent.close()},window.CloseIconButtonMorph.instances=new Set,window.CollapseIconButtonMorph=function(e){this.target=e,CollapseIconButtonMorph.__super__.constructor.call(this,!0,this,"actOnClick",new Widget),this.color_hover=new Color(255,153,0),this.color_pressed=this.color_hover,this.appearance=new CollapseIconAppearance(this),this.toolTipMessage="collapse window","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CollapseIconButtonMorph,"name",{value:"CollapseIconButtonMorph"}),window.CollapseIconButtonMorph.__super__=window.EmptyButtonMorph.prototype,window.CollapseIconButtonMorph=extend(window.CollapseIconButtonMorph,window.EmptyButtonMorph),window.CollapseIconButtonMorph.prototype.actOnClick=function(){return this.parent.parent.contents.collapse()},window.CollapseIconButtonMorph.instances=new Set,window.ColorPaletteNodeCreatorButtonWdgt=function(){ColorPaletteNodeCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ColorPalettePatchProgrammingIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="color palette","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ColorPaletteNodeCreatorButtonWdgt,"name",{value:"ColorPaletteNodeCreatorButtonWdgt"}),window.ColorPaletteNodeCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.ColorPaletteNodeCreatorButtonWdgt=extend(window.ColorPaletteNodeCreatorButtonWdgt,window.CreatorButtonWdgt),window.ColorPaletteNodeCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var e;return(e=new WindowWdgt(nil,nil,new ColorPaletteMorph,!0)).rawSetExtent(new Point(200,200)),e},window.ColorPaletteNodeCreatorButtonWdgt.instances=new Set,window.DecreaseFontSizeButtonWdgt=function(){DecreaseFontSizeButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new DecreaseFontSizeIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.actionableAsThumbnail=!0,this.editorContentPropertyChangerButton=!0,this.toolTipMessage="decrease font size","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DecreaseFontSizeButtonWdgt,"name",{value:"DecreaseFontSizeButtonWdgt"}),window.DecreaseFontSizeButtonWdgt.__super__=window.IconMorph.prototype,window.DecreaseFontSizeButtonWdgt=extend(window.DecreaseFontSizeButtonWdgt,window.IconMorph),window.DecreaseFontSizeButtonWdgt.augmentWith(window.HighlightableMixin,"DecreaseFontSizeButtonWdgt"),window.DecreaseFontSizeButtonWdgt.augmentWith(window.ParentStainerMixin,"DecreaseFontSizeButtonWdgt"),window.DecreaseFontSizeButtonWdgt.prototype.color_hover=new Color(90,90,90),window.DecreaseFontSizeButtonWdgt.prototype.color_pressed=new Color(128,128,128),window.DecreaseFontSizeButtonWdgt.prototype.color_normal=new Color(230,230,230),window.DecreaseFontSizeButtonWdgt.prototype.mouseClickLeft=function(){var e,t;if(null!=(null!=(e=world.lastNonTextPropertyChangerButtonClickedOrDropped)?e.originallySetFontSize:void 0))return(t=world.lastNonTextPropertyChangerButtonClickedOrDropped).originallySetFontSize>90?t.setFontSize(t.originallySetFontSize-10):t.originallySetFontSize>80?t.setFontSize(80):t.originallySetFontSize>72?t.setFontSize(72):t.originallySetFontSize>48?t.setFontSize(48):t.originallySetFontSize>36?t.setFontSize(36):t.originallySetFontSize>28?t.setFontSize(28):t.originallySetFontSize>12?t.setFontSize(t.originallySetFontSize-2):t.setFontSize(t.originallySetFontSize-1)},window.DecreaseFontSizeButtonWdgt.instances=new Set,window.EditIconButtonWdgt=function(e){this.target=e,EditIconButtonWdgt.__super__.constructor.call(this,!0,this,"actOnClick",new Widget),this.color_hover=new Color(255,153,0),this.color_pressed=this.color_hover,this.appearance=new PencilIconAppearance(this),this.toolTipMessage="edit contents","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.EditIconButtonWdgt,"name",{value:"EditIconButtonWdgt"}),window.EditIconButtonWdgt.__super__=window.EmptyButtonMorph.prototype,window.EditIconButtonWdgt=extend(window.EditIconButtonWdgt,window.EmptyButtonMorph),window.EditIconButtonWdgt.prototype.actOnClick=function(){var e;if(null!=this.parent&&this.parent instanceof WindowWdgt)return null!=(e=this.parent.contents)&&"function"==typeof e.editButtonPressedFromWindowBar?e.editButtonPressedFromWindowBar():void 0},window.EditIconButtonWdgt.instances=new Set,window.ElasticWindowCreatorButtonWdgt=function(){ElasticWindowCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ElasticWindowIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="elastic panel","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ElasticWindowCreatorButtonWdgt,"name",{value:"ElasticWindowCreatorButtonWdgt"}),window.ElasticWindowCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.ElasticWindowCreatorButtonWdgt=extend(window.ElasticWindowCreatorButtonWdgt,window.CreatorButtonWdgt),window.ElasticWindowCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var e,t;return e=new StretchableEditableWdgt,(t=new WindowWdgt(nil,nil,e,!0,!0)).setTitleWithoutPrependedContentName("elastic panel"),t.rawSetExtent(new Point(200,200)),t},window.ElasticWindowCreatorButtonWdgt.instances=new Set,window.EmptyWindowCreatorButtonWdgt=function(){EmptyWindowCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new EmptyWindowIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="empty window","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.EmptyWindowCreatorButtonWdgt,"name",{value:"EmptyWindowCreatorButtonWdgt"}),window.EmptyWindowCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.EmptyWindowCreatorButtonWdgt=extend(window.EmptyWindowCreatorButtonWdgt,window.CreatorButtonWdgt),window.EmptyWindowCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var e;return(e=new WindowWdgt(nil,nil,nil,!0,!0)).rawSetExtent(new Point(200,200)),e},window.EmptyWindowCreatorButtonWdgt.instances=new Set,window.ExternalIconButtonWdgt=function(e){this.target=e,ExternalIconButtonWdgt.__super__.constructor.call(this,!0,this,"actOnClick",new Widget),this.color_hover=new Color(255,153,0),this.color_pressed=this.color_hover,this.appearance=new ExternalIconAppearance(this),this.toolTipMessage="make this window droppable\ninto other documents","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ExternalIconButtonWdgt,"name",{value:"ExternalIconButtonWdgt"}),window.ExternalIconButtonWdgt.__super__=window.EmptyButtonMorph.prototype,window.ExternalIconButtonWdgt=extend(window.ExternalIconButtonWdgt,window.EmptyButtonMorph),window.ExternalIconButtonWdgt.prototype.actOnClick=function(){var e;if(null!=(null!=(e=this.parent)?e.parent:void 0)&&this.parent.parent instanceof WindowWdgt)return this.parent.parent.makeInternal()},window.ExternalIconButtonWdgt.instances=new Set,window.ExternalLinkButtonWdgt=function(e){this.color=e,ExternalLinkButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ExternalLinkIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ExternalLinkButtonWdgt,"name",{value:"ExternalLinkButtonWdgt"}),window.ExternalLinkButtonWdgt.__super__=window.IconMorph.prototype,window.ExternalLinkButtonWdgt=extend(window.ExternalLinkButtonWdgt,window.IconMorph),window.ExternalLinkButtonWdgt.prototype.mouseClickLeft=function(){if(null!=this.parent&&this.parent instanceof SimpleLinkWdgt)return window.open(this.parent.outputTextArea.text)},window.ExternalLinkButtonWdgt.prototype.mouseEnter=function(){return world.worldCanvas.style.cursor="pointer"},window.ExternalLinkButtonWdgt.prototype.mouseLeave=function(){return world.worldCanvas.style.cursor=""},window.ExternalLinkButtonWdgt.instances=new Set,window.ExternalLinkCreatorButtonWdgt=function(){ExternalLinkCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ExternalLinkIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="external link","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ExternalLinkCreatorButtonWdgt,"name",{value:"ExternalLinkCreatorButtonWdgt"}),window.ExternalLinkCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.ExternalLinkCreatorButtonWdgt=extend(window.ExternalLinkCreatorButtonWdgt,window.CreatorButtonWdgt),window.ExternalLinkCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var e;return(e=new SimpleLinkWdgt).fullRawMoveTo(this.position()),e.rawSetExtent(new Point(330,65)),e},window.ExternalLinkCreatorButtonWdgt.instances=new Set,window.FormatAsCodeButtonWdgt=function(){FormatAsCodeButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new FormatAsCodeIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.actionableAsThumbnail=!0,this.editorContentPropertyChangerButton=!0,this.toolTipMessage="format as code","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FormatAsCodeButtonWdgt,"name",{value:"FormatAsCodeButtonWdgt"}),window.FormatAsCodeButtonWdgt.__super__=window.IconMorph.prototype,window.FormatAsCodeButtonWdgt=extend(window.FormatAsCodeButtonWdgt,window.IconMorph),window.FormatAsCodeButtonWdgt.augmentWith(window.HighlightableMixin,"FormatAsCodeButtonWdgt"),window.FormatAsCodeButtonWdgt.augmentWith(window.ParentStainerMixin,"FormatAsCodeButtonWdgt"),window.FormatAsCodeButtonWdgt.prototype.color_hover=new Color(90,90,90),window.FormatAsCodeButtonWdgt.prototype.color_pressed=new Color(128,128,128),window.FormatAsCodeButtonWdgt.prototype.color_normal=new Color(230,230,230),window.FormatAsCodeButtonWdgt.prototype.mouseClickLeft=function(){var e,t;if(null!=(null!=(e=world.lastNonTextPropertyChangerButtonClickedOrDropped)?e.setFontName:void 0))return(t=world.lastNonTextPropertyChangerButtonClickedOrDropped).fontName!==t.monoFontStack?t.setFontName(nil,nil,t.monoFontStack):t.setFontName(nil,nil,t.justArialFontStack)},window.FormatAsCodeButtonWdgt.instances=new Set,window.FunctionPlotWithAxesCreatorButtonWdgt=function(){FunctionPlotWithAxesCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new FunctionPlotIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="function plot","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FunctionPlotWithAxesCreatorButtonWdgt,"name",{value:"FunctionPlotWithAxesCreatorButtonWdgt"}),window.FunctionPlotWithAxesCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.FunctionPlotWithAxesCreatorButtonWdgt=extend(window.FunctionPlotWithAxesCreatorButtonWdgt,window.CreatorButtonWdgt),window.FunctionPlotWithAxesCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var e;return(e=new WindowWdgt(nil,nil,new PlotWithAxesWdgt(new ExampleFunctionPlotWdgt),!0,!0)).rawSetExtent(new Point(200,200)),e},window.FunctionPlotWithAxesCreatorButtonWdgt.instances=new Set,window.GrayscalePaletteNodeCreatorButtonWdgt=function(){GrayscalePaletteNodeCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new GrayscalePalettePatchProgrammingIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="grayscale palette","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.GrayscalePaletteNodeCreatorButtonWdgt,"name",{value:"GrayscalePaletteNodeCreatorButtonWdgt"}),window.GrayscalePaletteNodeCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.GrayscalePaletteNodeCreatorButtonWdgt=extend(window.GrayscalePaletteNodeCreatorButtonWdgt,window.CreatorButtonWdgt),window.GrayscalePaletteNodeCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var e;return(e=new WindowWdgt(nil,nil,new GrayPaletteMorph,!0)).rawSetExtent(new Point(200,200)),e},window.GrayscalePaletteNodeCreatorButtonWdgt.instances=new Set,window.IncreaseFontSizeButtonWdgt=function(){IncreaseFontSizeButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new IncreaseFontSizeIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.actionableAsThumbnail=!0,this.editorContentPropertyChangerButton=!0,this.toolTipMessage="increase font size","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.IncreaseFontSizeButtonWdgt,"name",{value:"IncreaseFontSizeButtonWdgt"}),window.IncreaseFontSizeButtonWdgt.__super__=window.IconMorph.prototype,window.IncreaseFontSizeButtonWdgt=extend(window.IncreaseFontSizeButtonWdgt,window.IconMorph),window.IncreaseFontSizeButtonWdgt.augmentWith(window.HighlightableMixin,"IncreaseFontSizeButtonWdgt"),window.IncreaseFontSizeButtonWdgt.augmentWith(window.ParentStainerMixin,"IncreaseFontSizeButtonWdgt"),window.IncreaseFontSizeButtonWdgt.prototype.color_hover=new Color(90,90,90),window.IncreaseFontSizeButtonWdgt.prototype.color_pressed=new Color(128,128,128),window.IncreaseFontSizeButtonWdgt.prototype.color_normal=new Color(230,230,230),window.IncreaseFontSizeButtonWdgt.prototype.mouseClickLeft=function(){var e,t;if(null!=(null!=(e=world.lastNonTextPropertyChangerButtonClickedOrDropped)?e.originallySetFontSize:void 0))return(t=world.lastNonTextPropertyChangerButtonClickedOrDropped).originallySetFontSize<12?t.setFontSize(t.originallySetFontSize+1):t.originallySetFontSize<28?t.setFontSize(t.originallySetFontSize+2):t.originallySetFontSize<36?t.setFontSize(36):t.originallySetFontSize<48?t.setFontSize(48):t.originallySetFontSize<72?t.setFontSize(72):t.originallySetFontSize<80?t.setFontSize(80):t.setFontSize(t.originallySetFontSize+10)},window.IncreaseFontSizeButtonWdgt.instances=new Set,window.InternalIconButtonWdgt=function(e){this.target=e,InternalIconButtonWdgt.__super__.constructor.call(this,!0,this,"actOnClick",new Widget),this.color_hover=new Color(255,153,0),this.color_pressed=this.color_hover,this.appearance=new InternalIconAppearance(this),this.toolTipMessage="pop-out window from documents,\nmake it un-droppable\ninto other documents","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.InternalIconButtonWdgt,"name",{value:"InternalIconButtonWdgt"}),window.InternalIconButtonWdgt.__super__=window.EmptyButtonMorph.prototype,window.InternalIconButtonWdgt=extend(window.InternalIconButtonWdgt,window.EmptyButtonMorph),window.InternalIconButtonWdgt.prototype.actOnClick=function(){var e;if(null!=(null!=(e=this.parent)?e.parent:void 0)&&this.parent.parent instanceof WindowWdgt)return this.parent.parent.makeExternal()},window.InternalIconButtonWdgt.instances=new Set,window.ItalicButtonWdgt=function(e){this.color=e,ItalicButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ItalicIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.actionableAsThumbnail=!0,this.editorContentPropertyChangerButton=!0,this.toolTipMessage="italic","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ItalicButtonWdgt,"name",{value:"ItalicButtonWdgt"}),window.ItalicButtonWdgt.__super__=window.Widget.prototype,window.ItalicButtonWdgt=extend(window.ItalicButtonWdgt,window.Widget),window.ItalicButtonWdgt.augmentWith(window.HighlightableMixin,"ItalicButtonWdgt"),window.ItalicButtonWdgt.augmentWith(window.ParentStainerMixin,"ItalicButtonWdgt"),window.ItalicButtonWdgt.prototype.color_hover=new Color(90,90,90),window.ItalicButtonWdgt.prototype.color_pressed=new Color(128,128,128),window.ItalicButtonWdgt.prototype.color_normal=new Color(230,230,230),window.ItalicButtonWdgt.prototype.mouseClickLeft=function(){var e;if(null!=(null!=(e=world.lastNonTextPropertyChangerButtonClickedOrDropped)?e.toggleItalic:void 0))return world.lastNonTextPropertyChangerButtonClickedOrDropped.toggleItalic()},window.ItalicButtonWdgt.instances=new Set,window.ToolbarCreatorButtonWdgt=function(){window.ToolbarCreatorButtonWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ToolbarCreatorButtonWdgt,"name",{value:"ToolbarCreatorButtonWdgt"}),window.ToolbarCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.ToolbarCreatorButtonWdgt=extend(window.ToolbarCreatorButtonWdgt,window.CreatorButtonWdgt),window.ToolbarCreatorButtonWdgt.prototype.mouseClickLeft=function(e,t,n,o,i,r,l,a){var s;if(!a)return(s=this.createWidgetToBeHandled()).fullRawMoveTo(this.topRight().add(new Point(20,-40))),world.add(s),s.fullRawMoveWithin(world)},window.ToolbarCreatorButtonWdgt.instances=new Set,window.PatchProgrammingComponentsToolbarCreatorButtonWdgt=function(){PatchProgrammingComponentsToolbarCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new PatchProgrammingComponentsIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="components that can be connected","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PatchProgrammingComponentsToolbarCreatorButtonWdgt,"name",{value:"PatchProgrammingComponentsToolbarCreatorButtonWdgt"}),window.PatchProgrammingComponentsToolbarCreatorButtonWdgt.__super__=window.ToolbarCreatorButtonWdgt.prototype,window.PatchProgrammingComponentsToolbarCreatorButtonWdgt=extend(window.PatchProgrammingComponentsToolbarCreatorButtonWdgt,window.ToolbarCreatorButtonWdgt),window.PatchProgrammingComponentsToolbarCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var e,t;return(t=new ScrollPanelWdgt(new ToolPanelWdgt)).addMany([new SliderNodeCreatorButtonWdgt,new ColorPaletteNodeCreatorButtonWdgt,new GrayscalePaletteNodeCreatorButtonWdgt,new CalculatingNodeCreatorButtonWdgt]),t.disableDragsDropsAndEditing(),(e=new WindowWdgt(nil,nil,t)).fullRawMoveTo(new Point(90,Math.floor((world.height()-192)/2))),e.fullRawMoveWithin(world),world.add(e),e.rawSetExtent(new Point(61,192)),e},window.PatchProgrammingComponentsToolbarCreatorButtonWdgt.instances=new Set,window.Plot3DCreatorButtonWdgt=function(){Plot3DCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new Plot3DIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="3D plot","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Plot3DCreatorButtonWdgt,"name",{value:"Plot3DCreatorButtonWdgt"}),window.Plot3DCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.Plot3DCreatorButtonWdgt=extend(window.Plot3DCreatorButtonWdgt,window.CreatorButtonWdgt),window.Plot3DCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var e;return(e=new WindowWdgt(nil,nil,new Example3DPlotWdgt,!0,!0)).rawSetExtent(new Point(200,200)),e},window.Plot3DCreatorButtonWdgt.instances=new Set,window.PlotsToolbarCreatorButtonWdgt=function(){PlotsToolbarCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new AllPlotsIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="plots/graphs","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PlotsToolbarCreatorButtonWdgt,"name",{value:"PlotsToolbarCreatorButtonWdgt"}),window.PlotsToolbarCreatorButtonWdgt.__super__=window.ToolbarCreatorButtonWdgt.prototype,window.PlotsToolbarCreatorButtonWdgt=extend(window.PlotsToolbarCreatorButtonWdgt,window.ToolbarCreatorButtonWdgt),window.PlotsToolbarCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var e,t;return(t=new ScrollPanelWdgt(new ToolPanelWdgt)).addMany([new ScatterPlotWithAxesCreatorButtonWdgt,new FunctionPlotWithAxesCreatorButtonWdgt,new BarPlotWithAxesCreatorButtonWdgt,new Plot3DCreatorButtonWdgt]),t.disableDragsDropsAndEditing(),(e=new WindowWdgt(nil,nil,t)).setExtent(new Point(60,192)),e.fullRawMoveTo(new Point(90,Math.floor((world.height()-192)/2))),e.fullRawMoveWithin(world),world.add(e),e.changed(),e},window.PlotsToolbarCreatorButtonWdgt.instances=new Set,window.ScatterPlotWithAxesCreatorButtonWdgt=function(){ScatterPlotWithAxesCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ScatterPlotIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="scatter plot","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ScatterPlotWithAxesCreatorButtonWdgt,"name",{value:"ScatterPlotWithAxesCreatorButtonWdgt"}),window.ScatterPlotWithAxesCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.ScatterPlotWithAxesCreatorButtonWdgt=extend(window.ScatterPlotWithAxesCreatorButtonWdgt,window.CreatorButtonWdgt),window.ScatterPlotWithAxesCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var e;return(e=new WindowWdgt(nil,nil,new PlotWithAxesWdgt(new ExampleScatterPlotWdgt),!0,!0)).rawSetExtent(new Point(200,200)),e},window.ScatterPlotWithAxesCreatorButtonWdgt.instances=new Set,window.SliderNodeCreatorButtonWdgt=function(){SliderNodeCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new SliderNodeIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="slider node","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SliderNodeCreatorButtonWdgt,"name",{value:"SliderNodeCreatorButtonWdgt"}),window.SliderNodeCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.SliderNodeCreatorButtonWdgt=extend(window.SliderNodeCreatorButtonWdgt,window.CreatorButtonWdgt),window.SliderNodeCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){return new SliderMorph(nil,nil,nil,nil,nil,!0)},window.SliderNodeCreatorButtonWdgt.instances=new Set,window.SlidesToolbarCreatorButtonWdgt=function(){SlidesToolbarCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new SlidesToolbarIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="items for slides","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SlidesToolbarCreatorButtonWdgt,"name",{value:"SlidesToolbarCreatorButtonWdgt"}),window.SlidesToolbarCreatorButtonWdgt.__super__=window.ToolbarCreatorButtonWdgt.prototype,window.SlidesToolbarCreatorButtonWdgt=extend(window.SlidesToolbarCreatorButtonWdgt,window.ToolbarCreatorButtonWdgt),window.SlidesToolbarCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var e,t;return(t=new ScrollPanelWdgt(new ToolPanelWdgt)).addMany([new TextBoxCreatorButtonWdgt,new ExternalLinkCreatorButtonWdgt,new VideoPlayCreatorButtonWdgt,new WorldMapCreatorButtonWdgt,new USAMapCreatorButtonWdgt,new RectangleMorph,new MapPinIconWdgt,new SpeechBubbleWdgt,new DestroyIconMorph,new ScratchAreaIconMorph,new FloraIconMorph,new ScooterIconMorph,new HeartIconMorph,new FizzygumLogoIconWdgt,new FizzygumLogoWithTextIconWdgt,new VaporwaveBackgroundIconWdgt,new VaporwaveSunIconWdgt,new ArrowNIconWdgt,new ArrowSIconWdgt,new ArrowWIconWdgt,new ArrowEIconWdgt,new ArrowNWIconWdgt,new ArrowNEIconWdgt,new ArrowSWIconWdgt,new ArrowSEIconWdgt]),t.disableDragsDropsAndEditing(),(e=new WindowWdgt(nil,nil,t)).fullRawMoveTo(new Point(90,Math.floor((world.height()-192)/2))),e.fullRawMoveWithin(world),world.add(e),e.rawSetExtent(new Point(105,300)),e},window.SlidesToolbarCreatorButtonWdgt.instances=new Set,window.TemplatesButtonWdgt=function(){TemplatesButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new TemplatesIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.actionableAsThumbnail=!0,this.editorContentPropertyChangerButton=!0,this.toolTipMessage="useful snippets","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TemplatesButtonWdgt,"name",{value:"TemplatesButtonWdgt"}),window.TemplatesButtonWdgt.__super__=window.IconMorph.prototype,window.TemplatesButtonWdgt=extend(window.TemplatesButtonWdgt,window.IconMorph),window.TemplatesButtonWdgt.augmentWith(window.HighlightableMixin,"TemplatesButtonWdgt"),window.TemplatesButtonWdgt.augmentWith(window.ParentStainerMixin,"TemplatesButtonWdgt"),window.TemplatesButtonWdgt.prototype.color_hover=new Color(90,90,90),window.TemplatesButtonWdgt.prototype.color_pressed=new Color(128,128,128),window.TemplatesButtonWdgt.prototype.color_normal=new Color(230,230,230),window.TemplatesButtonWdgt.prototype.bringTemplatesWindowIntoView=function(){return world.simpleEditorTemplates.bringToForeground(),world.simpleEditorTemplates.fullRawMoveTo(world.hand.position().subtract(new Point(50,50))),world.simpleEditorTemplates.fullRawMoveWithin(world)},window.TemplatesButtonWdgt.prototype.mouseClickLeft=function(){var e;return null==world.simpleEditorTemplates||world.simpleEditorTemplates.destroyed||null==world.simpleEditorTemplates.parent?(e=menusHelper.createNewTemplatesWindow(),this.positionTemplatesWindowAndRegisterIt(e)):null!=world.simpleEditorTemplates.parent&&world.simpleEditorTemplates.parent===world.basementWdgt.scrollPanel.contents?(world.add(world.simpleEditorTemplates),this.bringTemplatesWindowIntoView()):world.simpleEditorTemplates.destroyed||world.simpleEditorTemplates.parent!==world?void 0:this.bringTemplatesWindowIntoView()},window.TemplatesButtonWdgt.prototype.positionTemplatesWindowAndRegisterIt=function(e){return e.fullRawMoveTo(world.hand.position().subtract(new Point(50,50))),e.fullRawMoveWithin(world),world.add(e),world.simpleEditorTemplates=e},window.TemplatesButtonWdgt.instances=new Set,window.TextBoxCreatorButtonWdgt=function(){TextBoxCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new TextIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="text box","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TextBoxCreatorButtonWdgt,"name",{value:"TextBoxCreatorButtonWdgt"}),window.TextBoxCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.TextBoxCreatorButtonWdgt=extend(window.TextBoxCreatorButtonWdgt,window.CreatorButtonWdgt),window.TextBoxCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var e;return(e=new TextMorph2("insert text here")).isEditable=!0,e.fittingSpecWhenBoundsTooLarge=FittingSpecTextInLargerBounds.SCALEUP,e.fittingSpecWhenBoundsTooSmall=FittingSpecTextInSmallerBounds.SCALEDOWN,e.alignMiddle(),e.alignLeft(),e.fullRawMoveTo(this.position()),e.rawSetExtent(new Point(150,75)),e},window.TextBoxCreatorButtonWdgt.instances=new Set,window.TextToolbarCreatorButtonWdgt=function(){TextToolbarCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new TextToolbarIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="Text tools","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TextToolbarCreatorButtonWdgt,"name",{value:"TextToolbarCreatorButtonWdgt"}),window.TextToolbarCreatorButtonWdgt.__super__=window.ToolbarCreatorButtonWdgt.prototype,window.TextToolbarCreatorButtonWdgt=extend(window.TextToolbarCreatorButtonWdgt,window.ToolbarCreatorButtonWdgt),window.TextToolbarCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var e,t;return(t=new ScrollPanelWdgt(new ToolPanelWdgt)).addMany([new ChangeFontButtonWdgt(this),new BoldButtonWdgt,new ItalicButtonWdgt,new FormatAsCodeButtonWdgt,new IncreaseFontSizeButtonWdgt,new DecreaseFontSizeButtonWdgt,new AlignLeftButtonWdgt,new AlignCenterButtonWdgt,new AlignRightButtonWdgt]),t.disableDragsDropsAndEditing(),(e=new WindowWdgt(nil,nil,t)).fullRawMoveTo(new Point(90,Math.floor((world.height()-192)/2))),e.fullRawMoveWithin(world),world.add(e),e.rawSetExtent(new Point(130,156)),e},window.TextToolbarCreatorButtonWdgt.instances=new Set,window.USAMapCreatorButtonWdgt=function(){USAMapCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new LittleUSAIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="USA map","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.USAMapCreatorButtonWdgt,"name",{value:"USAMapCreatorButtonWdgt"}),window.USAMapCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.USAMapCreatorButtonWdgt=extend(window.USAMapCreatorButtonWdgt,window.CreatorButtonWdgt),window.USAMapCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var e;return(e=new SimpleUSAMapIconWdgt).rawSetExtent(new Point(230,145)),e.setColor(new Color(183,183,183)),e},window.USAMapCreatorButtonWdgt.instances=new Set,window.UncollapseIconButtonMorph=function(e){this.target=e,UncollapseIconButtonMorph.__super__.constructor.call(this,!0,this,"actOnClick",new Widget),this.color_hover=new Color(255,153,0),this.color_pressed=this.color_hover,this.appearance=new UncollapseIconAppearance(this),this.toolTipMessage="un-collapse window","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.UncollapseIconButtonMorph,"name",{value:"UncollapseIconButtonMorph"}),window.UncollapseIconButtonMorph.__super__=window.EmptyButtonMorph.prototype,window.UncollapseIconButtonMorph=extend(window.UncollapseIconButtonMorph,window.EmptyButtonMorph),window.UncollapseIconButtonMorph.prototype.actOnClick=function(){return this.parent.parent.contents.unCollapse()},window.UncollapseIconButtonMorph.instances=new Set,window.UsefulTextSnippetsToolbarCreatorButtonWdgt=function(){UsefulTextSnippetsToolbarCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new TemplatesIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="Useful text snippets","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.UsefulTextSnippetsToolbarCreatorButtonWdgt,"name",{value:"UsefulTextSnippetsToolbarCreatorButtonWdgt"}),window.UsefulTextSnippetsToolbarCreatorButtonWdgt.__super__=window.ToolbarCreatorButtonWdgt.prototype,window.UsefulTextSnippetsToolbarCreatorButtonWdgt=extend(window.UsefulTextSnippetsToolbarCreatorButtonWdgt,window.ToolbarCreatorButtonWdgt),window.UsefulTextSnippetsToolbarCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){return menusHelper.createNewTemplatesWindow()},window.UsefulTextSnippetsToolbarCreatorButtonWdgt.instances=new Set,window.VideoPlayButtonWdgt=function(e){this.color=e,VideoPlayButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new VideoPlayIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.VideoPlayButtonWdgt,"name",{value:"VideoPlayButtonWdgt"}),window.VideoPlayButtonWdgt.__super__=window.ExternalLinkButtonWdgt.prototype,window.VideoPlayButtonWdgt=extend(window.VideoPlayButtonWdgt,window.ExternalLinkButtonWdgt),window.VideoPlayButtonWdgt.instances=new Set,window.VideoPlayCreatorButtonWdgt=function(e){this.color=e,VideoPlayCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new VideoPlayIconAppearance(this),this.toolTipMessage="link to video","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.VideoPlayCreatorButtonWdgt,"name",{value:"VideoPlayCreatorButtonWdgt"}),window.VideoPlayCreatorButtonWdgt.__super__=window.ExternalLinkCreatorButtonWdgt.prototype,window.VideoPlayCreatorButtonWdgt=extend(window.VideoPlayCreatorButtonWdgt,window.ExternalLinkCreatorButtonWdgt),window.VideoPlayCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var e;return(e=new SimpleVideoLinkWdgt).fullRawMoveTo(this.position()),e.rawSetExtent(new Point(330,65)),e},window.VideoPlayCreatorButtonWdgt.instances=new Set,window.WindowWithPanelCreatorButtonWdgt=function(){WindowWithPanelCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new WindowWithCroppingPanelIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="cropping panel","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowWithPanelCreatorButtonWdgt,"name",{value:"WindowWithPanelCreatorButtonWdgt"}),window.WindowWithPanelCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.WindowWithPanelCreatorButtonWdgt=extend(window.WindowWithPanelCreatorButtonWdgt,window.CreatorButtonWdgt),window.WindowWithPanelCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var e;return(e=new WindowWdgt(nil,nil,new PanelWdgt,!0,!0)).rawSetExtent(new Point(200,200)),e},window.WindowWithPanelCreatorButtonWdgt.instances=new Set,window.WindowWithScrollPanelCreatorButtonWdgt=function(){WindowWithScrollPanelCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new WindowWithScrollingPanelIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="scroll panel","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowWithScrollPanelCreatorButtonWdgt,"name",{value:"WindowWithScrollPanelCreatorButtonWdgt"}),window.WindowWithScrollPanelCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.WindowWithScrollPanelCreatorButtonWdgt=extend(window.WindowWithScrollPanelCreatorButtonWdgt,window.CreatorButtonWdgt),window.WindowWithScrollPanelCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var e;return(e=new WindowWdgt(nil,nil,new ScrollPanelWdgt,!0,!0)).rawSetExtent(new Point(200,200)),e},window.WindowWithScrollPanelCreatorButtonWdgt.instances=new Set,window.WindowsToolbarCreatorButtonWdgt=function(){WindowsToolbarCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new WindowsToolbarIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="many types of\npre-made windows","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowsToolbarCreatorButtonWdgt,"name",{value:"WindowsToolbarCreatorButtonWdgt"}),window.WindowsToolbarCreatorButtonWdgt.__super__=window.ToolbarCreatorButtonWdgt.prototype,window.WindowsToolbarCreatorButtonWdgt=extend(window.WindowsToolbarCreatorButtonWdgt,window.ToolbarCreatorButtonWdgt),window.WindowsToolbarCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var e,t,n;return(n=new ScrollPanelWdgt(new ToolPanelWdgt)).addMany([new EmptyWindowCreatorButtonWdgt,new WindowWithPanelCreatorButtonWdgt,new WindowWithScrollPanelCreatorButtonWdgt,new ElasticWindowCreatorButtonWdgt]),n.disableDragsDropsAndEditing(),(t=new WindowWdgt(nil,nil,n)).fullRawMoveTo(new Point(90,Math.floor((world.height()-192)/2))),t.fullRawMoveWithin(world),world.add(t),t.rawSetExtent(new Point(61,192)),null!=(e=menusHelper.createWindowsToolbarOneOffInfoWindowNextTo(t))&&e.fullRawMoveTo(new Point(300,200)),null!=e&&e.rememberFractionalSituationInHoldingPanel(),t},window.WindowsToolbarCreatorButtonWdgt.instances=new Set,window.WorldMapCreatorButtonWdgt=function(){WorldMapCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new LittleWorldIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="world map","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WorldMapCreatorButtonWdgt,"name",{value:"WorldMapCreatorButtonWdgt"}),window.WorldMapCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.WorldMapCreatorButtonWdgt=extend(window.WorldMapCreatorButtonWdgt,window.CreatorButtonWdgt),window.WorldMapCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var e;return(e=new SimpleWorldMapIconWdgt).rawSetExtent(new Point(240,125)),e.setColor(new Color(183,183,183)),e},window.WorldMapCreatorButtonWdgt.instances=new Set,window.EventCommand=function(){this.date=new Date,this.dateJSON=this.date.toJSON(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.EventCommand,"name",{value:"EventCommand"}),window.EventCommand.__super__=Object.prototype,window.EventCommand.prototype.dateJSON=nil,window.EventCommand.prototype.date=nil,window.EventCommand.prototype.execute=function(){},window.EventCommand.instances=new Set,window.AxisWdgt=function(e=-15,t=15){this.min=e,this.max=t,AxisWdgt.__super__.constructor.call(this),this.ticksRectangles=[],this.labelsTextBoxes=[],this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AxisWdgt,"name",{value:"AxisWdgt"}),window.AxisWdgt.__super__=window.Widget.prototype,window.AxisWdgt=extend(window.AxisWdgt,window.Widget),window.AxisWdgt.prototype.majorDimLine=nil,window.AxisWdgt.prototype.ticksRectangles=nil,window.AxisWdgt.prototype.labelsTextBoxes=nil,window.AxisWdgt.prototype.min=0,window.AxisWdgt.prototype.max=0,window.AxisWdgt.prototype.buildAndConnectChildren=function(){var e,t,n;for(this.majorDimLine=new RectangleMorph,this.majorDimLine.minimumExtent=new Point(1,1),this.add(this.majorDimLine),e=t=0,n=this.max-this.min+1;0<=n?t<n:t>n;e=0<=n?++t:--t)this.ticksRectangles[e]=new RectangleMorph,this.ticksRectangles[e].minimumExtent=new Point(1,1),this.add(this.ticksRectangles[e]),this.labelsTextBoxes[e]=new StringMorph2(""),this.labelsTextBoxes[e].fittingSpecWhenBoundsTooLarge=FittingSpecTextInLargerBounds.SCALEUP,this.labelsTextBoxes[e].fittingSpecWhenBoundsTooSmall=FittingSpecTextInSmallerBounds.SCALEDOWN,this.add(this.labelsTextBoxes[e]);return this.invalidateLayout()},window.AxisWdgt.prototype.rawSetExtent=function(e){return AxisWdgt.__super__.rawSetExtent.apply(this,arguments),this.invalidateLayout()},window.AxisWdgt.prototype.distanceOfAxisOriginFromEdge=function(){var e,t,n,o;return e=this.height(),o=this.width(),t=this.max-this.min+1,e>o?(n=e/(t+1),new Point(-5,n)):(n=o/(t+1),new Point(n,5))},window.AxisWdgt.prototype.doLayout=function(e){var t,n,o,i,r,l,a,s,d;if(null==e&&(null!=this.desiredExtent?(e=this.desiredExtent,this.desiredExtent=nil):e=this.extent(),null!=this.desiredPosition?(e=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(e),this.desiredPosition=nil):e=new Rectangle(this.position()).setBoundsWidthAndHeight(e)),this.isCollapsed())return this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted();for(this.rawSetBounds(e),trackChanges.push(!1),t=this.height(),d=this.width(),n=((l=this.max-this.min+1)-1)*(s=t>d?t/(l+1):d/(l+1)),2,.7,r=.7*s,t>d?(this.majorDimLine.fullRawMoveTo(new Point(this.right()-5,this.top()+s)),this.majorDimLine.setExtent(new Point(2,n))):(this.majorDimLine.fullRawMoveTo(new Point(this.left()+s,this.top()+5)),this.majorDimLine.setExtent(new Point(n,2))),o=i=0,a=l;0<=a?i<a:i>a;o=0<=a?++i:--i)t>d?(this.ticksRectangles[o].fullRawMoveTo(new Point(this.right()-10,this.top()+s+Math.round(o*s))),this.ticksRectangles[o].setExtent(new Point(7,2)),this.labelsTextBoxes[o].setText(""+(this.max-o)),this.labelsTextBoxes[o].fullRawMoveTo(new Point(this.left(),this.top()+s+Math.round(o*s)-r/2)),this.labelsTextBoxes[o].setExtent(new Point(d-10,r)),this.labelsTextBoxes[o].alignMiddle(),this.labelsTextBoxes[o].alignRight()):(this.ticksRectangles[o].fullRawMoveTo(new Point(this.left()+s+Math.round(o*s),this.top()+5)),this.ticksRectangles[o].setExtent(new Point(2,7)),this.labelsTextBoxes[o].setText(""+(this.min+o)),this.labelsTextBoxes[o].fullRawMoveTo(new Point(this.left()+s+Math.round(o*s)-r/2,this.top()+5+5)),this.labelsTextBoxes[o].setExtent(new Point(r,t-10)),this.labelsTextBoxes[o].alignTop(),this.labelsTextBoxes[o].alignCenter());return trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0},window.AxisWdgt.instances=new Set,window.Point3D=function(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Point3D,"name",{value:"Point3D"}),window.Point3D.__super__=Object.prototype,window.Point3D.augmentWith(window.DeepCopierMixin,"Point3D"),window.Point3D.prototype.x=nil,window.Point3D.prototype.y=nil,window.Point3D.prototype.z=nil,window.Point3D.prototype.rotateX=function(e){var t,n,o,i,r;return n=e*Math.PI/180,t=Math.cos(n),o=Math.sin(n),i=this.y*t-this.z*o,r=this.y*o+this.z*t,new this.constructor(this.x,i,r)},window.Point3D.prototype.rotateY=function(e){var t,n,o,i,r;return n=e*Math.PI/180,t=Math.cos(n),o=Math.sin(n),r=this.z*t-this.x*o,i=this.z*o+this.x*t,new this.constructor(i,this.y,r)},window.Point3D.prototype.rotateZ=function(e){var t,n,o,i,r;return n=e*Math.PI/180,t=Math.cos(n),o=Math.sin(n),i=this.x*t-this.y*o,r=this.x*o+this.y*t,new this.constructor(i,r,this.z)},window.Point3D.prototype.translateXYZ=function(e,t,n){return new this.constructor(this.x+e,this.y+t,this.z+n)},window.Point3D.prototype.project=function(e,t,n,o){var i,r,l;return i=n/(o+this.z),r=this.x*i+e/2,l=this.y*i+t/2,new Point(r,l)},window.Point3D.instances=new Set,window.Example3DPlotWdgt=function(){Example3DPlotWdgt.__super__.constructor.call(this),this.defaultRejectDrags=!0,this.isLockingToPanels=!0,this.fps=0,world.steppingWdgts.add(this),this.setColor(new Color(255,125,125)),this.rawSetExtent(new Point(200,200)),this.edges=[],this.quads=[],this.currentAngle=0,this.step(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Example3DPlotWdgt,"name",{value:"Example3DPlotWdgt"}),window.Example3DPlotWdgt.__super__=window.Widget.prototype,window.Example3DPlotWdgt=extend(window.Example3DPlotWdgt,window.Widget),window.Example3DPlotWdgt.prototype.vertices=nil,window.Example3DPlotWdgt.prototype.quads=nil,window.Example3DPlotWdgt.prototype.currentAngle=nil,window.Example3DPlotWdgt.prototype.planeGrid=nil,window.Example3DPlotWdgt.prototype.graphGrid=nil;window.Example3DPlotWdgt.prototype.previousMousePoint=nil,window.Example3DPlotWdgt.prototype.autoRotate=!0,window.Example3DPlotWdgt.prototype.ratio=nil,window.Example3DPlotWdgt.prototype.parameterValue=0,window.Example3DPlotWdgt.prototype.colloquialName=function(){return"3D plot"},window.Example3DPlotWdgt.prototype.setParameter=function(e,t,n,o){if(o||n!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==n?getRandomInt(-2e4,2e4):n,this.parameterValue=e,this.calculateNewPlotValues()},window.Example3DPlotWdgt.prototype.reactToTargetConnection=function(){return this.calculateNewPlotValues()},window.Example3DPlotWdgt.prototype.numericalSetters=function(e,t){return null==e&&(e=[],t=[]),e.push("param"),t.push("setParameter"),null!=this.addShapeSpecificNumericalSetters&&([e,t]=this.addShapeSpecificNumericalSetters(e,t)),this.deduplicateSettersAndSortByMenuEntryString(e,t)},window.Example3DPlotWdgt.prototype.justDropped=function(e){if(Example3DPlotWdgt.__super__.justDropped.apply(this,arguments),e instanceof SimpleVerticalStackPanelWdgt&&!(e instanceof WindowWdgt))return this.constrainToRatio()},window.Example3DPlotWdgt.prototype.holderWindowJustDropped=function(e){if(e instanceof SimpleVerticalStackPanelWdgt&&!(e instanceof WindowWdgt))return this.constrainToRatio()},window.Example3DPlotWdgt.prototype.constrainToRatio=function(){if(null!=this.layoutSpecDetails)return this.ratio=this.width()/this.height(),this.layoutSpecDetails.canSetHeightFreely=!1,this.rawSetExtent(new Point(this.width(),0))},window.Example3DPlotWdgt.prototype.holderWindowJustBeenGrabbed=function(e){if(e instanceof SimpleVerticalStackPanelWdgt)return this.freeFromRatioConstraints()},window.Example3DPlotWdgt.prototype.justBeenGrabbed=function(e){if(e instanceof SimpleVerticalStackPanelWdgt)return this.freeFromRatioConstraints()},window.Example3DPlotWdgt.prototype.freeFromRatioConstraints=function(){var e;if(null!=this.layoutSpecDetails&&(this.layoutSpecDetails.canSetHeightFreely=!0,this.ratio=nil,e=world.height()-20,this.parent.height()>e))return this.parent.rawSetExtent(new Point(Math.min(this.width()/this.height()*e,world.width()),e).round()),this.parent.fullRawMoveTo(world.hand.position().subtract(this.parent.extent().floorDivideBy(2))),this.parent.fullRawMoveWithin(world)},window.Example3DPlotWdgt.prototype.rawSetWidthSizeHeightAccordingly=function(e){return null!=this.ratio?this.rawSetExtent(new Point(e,Math.round(e/this.ratio))):Example3DPlotWdgt.__super__.rawSetWidthSizeHeightAccordingly.apply(this,arguments)},window.Example3DPlotWdgt.prototype.step=function(){return this.autoRotate&&this.currentAngle++,this.calculateNewPlotValues()},window.Example3DPlotWdgt.prototype.calculateNewPlotValues=function(){var e,t,n,o,i,r;for(this.vertices=[],this.graphGrid=new Grid3D(21,21,[]),e=n=-1;n<=1;e=n+=.1)for(t=o=-1;o<=1;t=o+=.1)this.vertices.push(new Point3D(e,t,Math.sin(e*this.parameterValue/30)+(Math.sin(3*e+this.currentAngle/160)+Math.cos(3*t+this.currentAngle/160))/2)),this.graphGrid.vertexIndexes.push(this.vertices.length-1);for(this.planeGrid=new PlaneGrid3D(21,21),e=i=-1;i<=1;e=i+=.1)this.vertices.push(new Point3D(e,-1,0)),this.planeGrid.vertexIndexes.push(this.vertices.length-1),this.vertices.push(new Point3D(e,1,0)),this.planeGrid.vertexIndexes.push(this.vertices.length-1);for(t=r=-1;r<=1;t=r+=.1)this.vertices.push(new Point3D(-1,t,0)),this.planeGrid.vertexIndexes.push(this.vertices.length-1),this.vertices.push(new Point3D(1,t,0)),this.planeGrid.vertexIndexes.push(this.vertices.length-1);return this.changed()},window.Example3DPlotWdgt.prototype.paintIntoAreaOrBlitFromBackBuffer=function(e,t,n){var o,i,r,l,a,s,d,h;if(!this.preliminaryCheckNothingToDraw(t,e))return[i,s,d,o,r,h,l]=this.calculateKeyValues(e,t),h<1||l<1||i.isEmpty()?nil:(e.save(),e.clipToRectangle(o,r,h,l),e.globalAlpha=(null!=n?n.alpha:1)*this.backgroundTransparency,this.paintRectangle(e,o,r,h,l,this.backgroundColor),e.scale(ceilPixelRatio,ceilPixelRatio),a=this.position(),e.translate(a.x,a.y),this.renderingHelper(e,new Color(255,255,255),n),e.restore(),this.paintHighlight(e,o,r,h,l))},window.Example3DPlotWdgt.prototype.mouseMove=function(e,t){if(!world.hand.isThisPointerDraggingSomething())return"left"===t?(null!=this.previousMousePoint&&(this.currentAngle+=this.previousMousePoint.x-e.x),this.previousMousePoint=e):void 0},window.Example3DPlotWdgt.prototype.mouseDownLeft=function(e){return this.autoRotate=!1,this.bringToForeground()},window.Example3DPlotWdgt.prototype.mouseUpLeft=function(){return this.autoRotate=!0},window.Example3DPlotWdgt.prototype.mouseLeave=function(){return this.autoRotate=!0},window.Example3DPlotWdgt.prototype.renderingHelper=function(e,t,n){var o,i,r,l,a,s,d,h,p,c,u,w,g,T,f,y,m,S,W,P,C,b,I,M,v,A,x,_,B,k,E,D;if(r=this.height(),D=this.width(),null!=n)return e.globalAlpha=n.alpha*this.alpha,e.fillStyle=new Color(80,80,80).toString(),void e.fillRect(0,0,D,r);for(e.fillStyle=WorldMorph.preferencesAndSettings.editableItemBackgroundColor.toString(),e.fillRect(0,0,D,r),E=Math.min(D,r),e.translate((D-E)/2,(r-E)/2),m=[],e.strokeStyle="black",f=e.globalAlpha,e.globalAlpha=.6,e.scale(E/300,E/300),s=0,h=(P=this.vertices).length;s<h;s++)(g=P[s].rotateX(90).rotateY(this.currentAngle/2).translateXYZ(0,.5,0).project(300,300,220,3)).y-=1*E/6,m.push(g);for(d=0,p=(C=this.quads).length;d<p;d++)i=C[d],e.beginPath(),e.moveTo(m[i[0]].x,m[i[0]].y),e.lineTo(m[i[1]].x,m[i[1]].y),e.lineTo(m[i[2]].x,m[i[2]].y),e.lineTo(m[i[3]].x,m[i[3]].y),e.closePath(),e.stroke();for(u=0,c=(b=this.edges).length;u<c;u++)o=b[u],e.beginPath(),e.moveTo(m[o[0]].x,m[o[0]].y),e.lineTo(m[o[1]].x,m[o[1]].y),e.closePath(),e.stroke();for(e.beginPath(),l=w=0,I=this.graphGrid.width-1;0<=I?w<I:w>I;l=0<=I?++w:--w)for(a=T=0,M=this.graphGrid.height;0<=M?T<M:T>M;a=0<=M?++T:--T)l+1+a*this.graphGrid.width<this.graphGrid.vertexIndexes.length&&(e.moveTo(m[this.graphGrid.vertexIndexes[l+a*this.graphGrid.width]].x,m[this.graphGrid.vertexIndexes[l+a*this.graphGrid.width]].y),e.lineTo(m[this.graphGrid.vertexIndexes[l+1+a*this.graphGrid.width]].x,m[this.graphGrid.vertexIndexes[l+1+a*this.graphGrid.width]].y));for(l=y=0,v=this.graphGrid.width;0<=v?y<v:y>v;l=0<=v?++y:--y)for(a=S=0,A=this.graphGrid.height-1;0<=A?S<A:S>A;a=0<=A?++S:--S)l+(a+1)*this.graphGrid.width<this.graphGrid.vertexIndexes.length&&(e.moveTo(m[this.graphGrid.vertexIndexes[l+a*this.graphGrid.width]].x,m[this.graphGrid.vertexIndexes[l+a*this.graphGrid.width]].y),e.lineTo(m[this.graphGrid.vertexIndexes[l+(a+1)*this.graphGrid.width]].x,m[this.graphGrid.vertexIndexes[l+(a+1)*this.graphGrid.width]].y));for(e.closePath(),e.strokeStyle="black",e.stroke(),e.beginPath(),l=W=0,x=this.planeGrid.width-1;0<=x?W<x:W>x;l=0<=x?++W:--W)e.moveTo(m[this.planeGrid.vertexIndexes[2*l]].x,m[this.planeGrid.vertexIndexes[2*l]].y),e.lineTo(m[this.planeGrid.vertexIndexes[2*l+1]].x,m[this.planeGrid.vertexIndexes[2*l+1]].y);for(l=k=_=this.planeGrid.width-1,B=this.planeGrid.width+this.planeGrid.height;_<=B?k<B:k>B;l=_<=B?++k:--k)e.moveTo(m[this.planeGrid.vertexIndexes[2*l]].x,m[this.planeGrid.vertexIndexes[2*l]].y),e.lineTo(m[this.planeGrid.vertexIndexes[2*l+1]].x,m[this.planeGrid.vertexIndexes[2*l+1]].y);return e.closePath(),e.strokeStyle="grey",e.stroke(),e.globalAlpha=f},window.Example3DPlotWdgt.instances=new Set,window.GraphsPlotsChartsWdgt=function(e){this.drawOnlyPartOfBoundingRect=e,GraphsPlotsChartsWdgt.__super__.constructor.call(this),this.setColor(new Color(255,125,125)),this.rawSetExtent(new Point(200,200)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.GraphsPlotsChartsWdgt,"name",{value:"GraphsPlotsChartsWdgt"}),window.GraphsPlotsChartsWdgt.__super__=window.Widget.prototype,window.GraphsPlotsChartsWdgt=extend(window.GraphsPlotsChartsWdgt,window.Widget),window.GraphsPlotsChartsWdgt.augmentWith(window.KeepsRatioWhenInVerticalStackMixin,"GraphsPlotsChartsWdgt"),window.GraphsPlotsChartsWdgt.prototype.drawOnlyPartOfBoundingRect=!1,window.GraphsPlotsChartsWdgt.prototype.seededRandom=function(){var e;return(e=1e4*Math.sin(this.seed++))-Math.floor(e)},window.GraphsPlotsChartsWdgt.prototype.seeded_randn_bm=function(){var e,t;for(e=0,t=0;0===e;)e=this.seededRandom();for(;0===t;)t=this.seededRandom();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t)},window.GraphsPlotsChartsWdgt.prototype.simpleShadow=function(e,t,n){var o,i;if(o=this.height(),i=this.width(),null!=n)return e.globalAlpha=n.alpha*this.alpha,e.fillStyle=new Color(80,80,80).toString(),e.fillRect(0,0,i,o)},window.GraphsPlotsChartsWdgt.prototype.drawBoundingBox=function(e,t,n){var o,i;return o=this.height(),i=this.width(),e.strokeStyle=new Color(30,30,30).toString(),this.drawOnlyPartOfBoundingRect?(e.beginPath(),e.moveTo(0,0),e.lineTo(i,0),e.lineTo(i,o),e.stroke()):e.strokeRect(0,0,i,o)},window.GraphsPlotsChartsWdgt.instances=new Set,window.ExampleBarPlotWdgt=function(e){this.drawOnlyPartOfBoundingRect=e,ExampleBarPlotWdgt.__super__.constructor.call(this),this.fps=.5,world.steppingWdgts.add(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ExampleBarPlotWdgt,"name",{value:"ExampleBarPlotWdgt"}),window.ExampleBarPlotWdgt.__super__=window.GraphsPlotsChartsWdgt.prototype,window.ExampleBarPlotWdgt=extend(window.ExampleBarPlotWdgt,window.GraphsPlotsChartsWdgt),window.ExampleBarPlotWdgt.prototype.graphNumber=1,window.ExampleBarPlotWdgt.prototype.drawOnlyPartOfBoundingRect=!1,window.ExampleBarPlotWdgt.prototype.colloquialName=function(){return"Bar plot"},window.ExampleBarPlotWdgt.prototype.paintIntoAreaOrBlitFromBackBuffer=function(e,t,n){var o,i,r,l,a,s,d,h;if(!this.preliminaryCheckNothingToDraw(t,e))return[i,s,d,o,r,h,l]=this.calculateKeyValues(e,t),h<1||l<1||i.isEmpty()?nil:(e.save(),e.clipToRectangle(o,r,h,l),e.globalAlpha=(null!=n?n.alpha:1)*this.backgroundTransparency,this.paintRectangle(e,o,r,h,l,this.backgroundColor),e.scale(ceilPixelRatio,ceilPixelRatio),a=this.position(),e.translate(a.x,a.y),this.renderingHelper(e,new Color(255,255,255),n),e.restore(),this.paintHighlight(e,o,r,h,l))},window.ExampleBarPlotWdgt.prototype.step=function(){return this.graphNumber++,this.changed()},window.ExampleBarPlotWdgt.prototype.renderingHelper=function(e,t,n){var o,i,r,l,a,s,d;if(this.seed=this.graphNumber,5,i=this.height(),s=this.width(),null==n){for(e.fillStyle=WorldMorph.preferencesAndSettings.editableItemBackgroundColor.toString(),e.fillRect(0,0,s,i),o=i,e.globalAlpha=this.alpha,l=a=0;a<=20;l=++a)d=l/21*s,r=.2+3*Math.sin(l/100)-l/1e4+this.seeded_randn_bm()/20,this.seededRandom()>.5?e.fillStyle="#325FA2":e.fillStyle="#FF0000",e.fillRect(Math.round(d),Math.round(o-o*r),Math.round(.05*s-2),Math.round(o*r));return this.drawBoundingBox(e,t,n)}this.simpleShadow(e,t,n)},window.ExampleBarPlotWdgt.instances=new Set,window.ExampleFunctionPlotWdgt=function(e){this.drawOnlyPartOfBoundingRect=e,ExampleFunctionPlotWdgt.__super__.constructor.call(this),this.fps=2,world.steppingWdgts.add(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ExampleFunctionPlotWdgt,"name",{value:"ExampleFunctionPlotWdgt"}),window.ExampleFunctionPlotWdgt.__super__=window.GraphsPlotsChartsWdgt.prototype,window.ExampleFunctionPlotWdgt=extend(window.ExampleFunctionPlotWdgt,window.GraphsPlotsChartsWdgt),window.ExampleFunctionPlotWdgt.prototype.graphNumber=1,window.ExampleFunctionPlotWdgt.prototype.drawOnlyPartOfBoundingRect=!1,window.ExampleFunctionPlotWdgt.prototype.colloquialName=function(){return"Function plot"},window.ExampleFunctionPlotWdgt.prototype.paintIntoAreaOrBlitFromBackBuffer=function(e,t,n){var o,i,r,l,a,s,d,h;if(!this.preliminaryCheckNothingToDraw(t,e))return[i,s,d,o,r,h,l]=this.calculateKeyValues(e,t),h<1||l<1||i.isEmpty()?nil:(e.save(),e.clipToRectangle(o,r,h,l),e.globalAlpha=(null!=n?n.alpha:1)*this.backgroundTransparency,this.paintRectangle(e,o,r,h,l,this.backgroundColor),e.scale(ceilPixelRatio,ceilPixelRatio),a=this.position(),e.translate(a.x,a.y),this.renderingHelper(e,new Color(255,255,255),n),e.restore(),this.paintHighlight(e,o,r,h,l))},window.ExampleFunctionPlotWdgt.prototype.step=function(){return this.graphNumber++,this.changed()},window.ExampleFunctionPlotWdgt.prototype.renderingHelper=function(e,t,n){var o,i,r,l,a,s,d,h,p;if(this.seed=this.graphNumber,5,r=this.height(),h=this.width(),null==n){for(e.fillStyle=WorldMorph.preferencesAndSettings.editableItemBackgroundColor.toString(),e.fillRect(0,0,h,r),i=r-10,h-10,e.globalAlpha=(null!=n?n.alpha:1)*this.alpha,e.fillStyle="#325FA2",o=this.seededRandom(),p=s=0,d=h;0<=d?s<=d:s>=d;p=0<=d?++s:--s)a=p/h*1e3,l=.5+Math.sin(10*o+a/(300*(o+.01)))/3-a/(5e3+5e4*o),e.fillRect(p,i*l,2,2);return this.drawBoundingBox(e,t,n)}this.simpleShadow(e,t,n)},window.ExampleFunctionPlotWdgt.instances=new Set,window.ExampleScatterPlotWdgt=function(e){this.drawOnlyPartOfBoundingRect=e,ExampleScatterPlotWdgt.__super__.constructor.call(this),this.fps=1,world.steppingWdgts.add(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ExampleScatterPlotWdgt,"name",{value:"ExampleScatterPlotWdgt"}),window.ExampleScatterPlotWdgt.__super__=window.GraphsPlotsChartsWdgt.prototype,window.ExampleScatterPlotWdgt=extend(window.ExampleScatterPlotWdgt,window.GraphsPlotsChartsWdgt),window.ExampleScatterPlotWdgt.prototype.graphNumber=1,window.ExampleScatterPlotWdgt.prototype.drawOnlyPartOfBoundingRect=!1,window.ExampleScatterPlotWdgt.prototype.colloquialName=function(){return"Scatter plot"},window.ExampleScatterPlotWdgt.prototype.paintIntoAreaOrBlitFromBackBuffer=function(e,t,n){var o,i,r,l,a,s,d,h;if(!this.preliminaryCheckNothingToDraw(t,e))return[i,s,d,o,r,h,l]=this.calculateKeyValues(e,t),h<1||l<1||i.isEmpty()?nil:(e.save(),e.clipToRectangle(o,r,h,l),e.globalAlpha=(null!=n?n.alpha:1)*this.backgroundTransparency,this.paintRectangle(e,o,r,h,l,this.backgroundColor),e.scale(ceilPixelRatio,ceilPixelRatio),a=this.position(),e.translate(a.x,a.y),this.renderingHelper(e,new Color(255,255,255),n),e.restore(),this.paintHighlight(e,o,r,h,l))},window.ExampleScatterPlotWdgt.prototype.step=function(){return this.graphNumber++,this.changed()},window.ExampleScatterPlotWdgt.prototype.renderingHelper=function(e,t,n){var o,i,r,l,a,s,d,h;if(this.seed=this.graphNumber,5,r=this.height(),d=this.width(),null==n){for(e.fillStyle=WorldMorph.preferencesAndSettings.editableItemBackgroundColor.toString(),e.fillRect(0,0,d,r),o=r-10,i=d-10,e.globalAlpha=this.alpha,e.lineWidth=1,e.beginPath(),a=0;a<100;++a)h=.4+this.seeded_randn_bm()/10,l=.4+this.seeded_randn_bm()/10,e.moveTo(Math.round(10+i*h),Math.round(5+o*l)),e.arc(Math.round(5+i*h),Math.round(5+o*l),5,0,2*Math.PI);for(e.strokeStyle="#325FA2",e.stroke(),e.beginPath(),s=0;s<100;++s)h=.6+this.seeded_randn_bm()/10,l=.6+this.seeded_randn_bm()/10,e.moveTo(Math.round(10+i*h),Math.round(5+o*l)),e.arc(Math.round(5+i*h),Math.round(5+o*l),5,0,2*Math.PI);return e.strokeStyle="#FF0000",e.stroke(),this.drawBoundingBox(e,t,n)}this.simpleShadow(e,t,n)},window.ExampleScatterPlotWdgt.instances=new Set,window.Grid3D=function(e,t,n=[]){this.width=e,this.height=t,this.vertexIndexes=n,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Grid3D,"name",{value:"Grid3D"}),window.Grid3D.__super__=Object.prototype,window.Grid3D.augmentWith(window.DeepCopierMixin,"Grid3D"),window.Grid3D.prototype.width=nil,window.Grid3D.prototype.height=nil,window.Grid3D.prototype.vertexIndexes=nil,window.Grid3D.instances=new Set,window.PlaneGrid3D=function(e,t,n=[]){this.width=e,this.height=t,this.vertexIndexes=n,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PlaneGrid3D,"name",{value:"PlaneGrid3D"}),window.PlaneGrid3D.__super__=Object.prototype,window.PlaneGrid3D.augmentWith(window.DeepCopierMixin,"PlaneGrid3D"),window.PlaneGrid3D.prototype.width=nil,window.PlaneGrid3D.prototype.height=nil,window.PlaneGrid3D.prototype.vertexIndexes=nil,window.PlaneGrid3D.instances=new Set,window.PlotWithAxesWdgt=function(e){this.plot=e,PlotWithAxesWdgt.__super__.constructor.apply(this,arguments),this.plot.drawOnlyPartOfBoundingRect=!0,this.appearance=new RectangularAppearance(this),this.add(this.plot),this.vertAxis=new AxisWdgt(-5,5),this.add(this.vertAxis),this.horizAxis=new AxisWdgt(-5,5),this.add(this.horizAxis),this.setColor(new Color(242,242,242)),this.invalidateLayout(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PlotWithAxesWdgt,"name",{value:"PlotWithAxesWdgt"}),window.PlotWithAxesWdgt.__super__=window.Widget.prototype,window.PlotWithAxesWdgt=extend(window.PlotWithAxesWdgt,window.Widget),window.PlotWithAxesWdgt.augmentWith(window.KeepsRatioWhenInVerticalStackMixin,"PlotWithAxesWdgt"),window.PlotWithAxesWdgt.prototype.colloquialName=function(){return this.plot.colloquialName()},window.PlotWithAxesWdgt.prototype.rawSetExtent=function(e){return PlotWithAxesWdgt.__super__.rawSetExtent.apply(this,arguments),this.invalidateLayout()},window.PlotWithAxesWdgt.prototype.doLayout=function(e){var t,n,o;return null==e&&(null!=this.desiredExtent?(e=this.desiredExtent,this.desiredExtent=nil):e=this.extent(),null!=this.desiredPosition?(e=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(e),this.desiredPosition=nil):e=new Rectangle(this.position()).setBoundsWidthAndHeight(e)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(this.rawSetBounds(e),trackChanges.push(!1),n=this.height(),o=this.width(),35,this.vertAxis.rawSetExtent(new Point(o/10-4,n).round()),this.vertAxis.fullRawMoveTo(this.position().add(new Point(0,-2)).subtract(new Point(-o/35,n/35).round())),this.horizAxis.rawSetExtent(new Point(o,n/10).round()),t=this.vertAxis.left()+this.horizAxis.distanceOfAxisOriginFromEdge().x-(this.vertAxis.right()+this.vertAxis.distanceOfAxisOriginFromEdge().x),this.horizAxis.fullRawMoveTo(this.bottomLeft().subtract(new Point(t,n/10)).round().subtract(new Point(-o/35,n/35).round())),this.plot.rawSetExtent(new Point(o-2*this.horizAxis.distanceOfAxisOriginFromEdge().x,n-2*this.vertAxis.distanceOfAxisOriginFromEdge().y).round()),this.plot.fullRawMoveTo(this.position().add(new Point(this.horizAxis.distanceOfAxisOriginFromEdge().x-t+1,this.vertAxis.distanceOfAxisOriginFromEdge().y-1)).round().subtract(new Point(-o/35,n/35).round())),trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0)},window.PlotWithAxesWdgt.instances=new Set,window.IconAppearance=function(){window.IconAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.IconAppearance,"name",{value:"IconAppearance"}),window.IconAppearance.__super__=window.Appearance.prototype,window.IconAppearance=extend(window.IconAppearance,window.Appearance),window.IconAppearance.prototype.preferredSize=new Point(200,200),window.IconAppearance.prototype.specificationSize=new Point(200,200),window.IconAppearance.prototype.paintFunction=function(e){var t;return t=this.color,e.beginPath(),e.moveTo(100.5,7),e.bezierCurveTo(50.05,7,9,48.04,9,98.5),e.bezierCurveTo(9,148.95,50.05,190,100.5,190),e.bezierCurveTo(150.95,190,192,148.95,192,98.5),e.bezierCurveTo(192,48.04,150.95,7,100.5,7),e.closePath(),e.moveTo(100.5,20.39),e.bezierCurveTo(143.72,20.39,178.61,55.28,178.61,98.5),e.bezierCurveTo(178.61,141.72,143.72,176.61,100.5,176.61),e.bezierCurveTo(57.28,176.61,22.39,141.72,22.39,98.5),e.bezierCurveTo(22.39,55.28,57.28,20.39,100.5,20.39),e.closePath(),e.fillStyle=t.toString(),e.fill()},window.IconAppearance.prototype.calculateRectangleOfIcon=function(){var e,t,n,o,i,r,l,a,s;return e=this.morph.height(),s=this.morph.width(),a=Math.abs(s/this.preferredSize.width()),l=Math.abs(e/this.preferredSize.height()),l=a=Math.min(a,l),o=(t=new Rectangle(Math.min(0,this.preferredSize.width()),Math.min(0,this.preferredSize.height()),Math.abs(this.preferredSize.width()),Math.abs(this.preferredSize.height()))).width()*a,n=t.height()*l,i=this.morph.left()+(s-o)/2,r=this.morph.top()+(e-n)/2,(t=new Rectangle(i,r,i+o,r+n)).round()},window.IconAppearance.prototype.widthWithoutSpacing=function(){return this.calculateRectangleOfIcon().width()},window.IconAppearance.prototype.paintIntoAreaOrBlitFromBackBuffer=function(e,t,n){var o,i,r,l,a,s,d,h;if(!this.morph.preliminaryCheckNothingToDraw(t,e))return[i,s,d,o,r,h,l]=this.morph.calculateKeyValues(e,t),h<1||l<1||i.isEmpty()?nil:(e.save(),e.clipToRectangle(o,r,h,l),e.globalAlpha=(null!=n?n.alpha:1)*this.morph.alpha,e.scale(ceilPixelRatio,ceilPixelRatio),a=this.calculateRectangleOfIcon(),e.translate(a.left(),a.top()),e.scale(a.width()/this.preferredSize.width(),a.height()/this.preferredSize.height()),e.scale(this.preferredSize.width()/this.specificationSize.width(),this.preferredSize.height()/this.specificationSize.height()),this.paintFunction(e),e.restore())},window.IconAppearance.prototype.oval=function(e,t,n,o,i){e.save(),e.beginPath(),e.translate(t,n),e.scale(o/2,i/2),e.arc(1,1,1,0,2*Math.PI),e.closePath(),e.restore()},window.IconAppearance.prototype.arc=function(e,t,n,o,i,r,l,a){e.save(),e.beginPath(),e.translate(t,n),e.scale(o/2,i/2),e.arc(1,1,1,Math.PI/180*r,Math.PI/180*l),a&&(e.lineTo(1,1),e.closePath()),e.restore()},window.IconAppearance.instances=new Set,window.AlignCenterIconAppearance=function(e){this.morph=e,AlignCenterIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AlignCenterIconAppearance,"name",{value:"AlignCenterIconAppearance"}),window.AlignCenterIconAppearance.__super__=window.IconAppearance.prototype,window.AlignCenterIconAppearance=extend(window.AlignCenterIconAppearance,window.IconAppearance),window.AlignCenterIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(30.5,38.5),e.lineTo(70.5,38.5),e.strokeStyle=n,e.lineWidth=23,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(25.03,61.25),e.lineTo(75.66,61.25),e.strokeStyle=n,e.lineWidth=23,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(15.5,17.5),e.lineTo(86.66,17.46),e.strokeStyle=n,e.lineWidth=23,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(17.16,82.54),e.lineTo(84.66,82.54),e.strokeStyle=n,e.lineWidth=23,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(14,17),e.lineTo(89,17),e.strokeStyle=t,e.lineWidth=8.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(15.75,82),e.lineTo(87,82),e.strokeStyle=t,e.lineWidth=8.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(23.69,60.71),e.lineTo(79,60.71),e.strokeStyle=t,e.lineWidth=8.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(29.88,38.36),e.lineTo(73,38.36),e.strokeStyle=t,e.lineWidth=8.5,e.lineCap="round",e.stroke()},window.AlignCenterIconAppearance.instances=new Set,window.AlignCenterIconWdgt=function(e){this.color=e,AlignCenterIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new AlignCenterIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AlignCenterIconWdgt,"name",{value:"AlignCenterIconWdgt"}),window.AlignCenterIconWdgt.__super__=window.IconMorph.prototype,window.AlignCenterIconWdgt=extend(window.AlignCenterIconWdgt,window.IconMorph),window.AlignCenterIconWdgt.instances=new Set,window.AlignLeftIconAppearance=function(e){this.morph=e,AlignLeftIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AlignLeftIconAppearance,"name",{value:"AlignLeftIconAppearance"}),window.AlignLeftIconAppearance.__super__=window.IconAppearance.prototype,window.AlignLeftIconAppearance=extend(window.AlignLeftIconAppearance,window.IconAppearance),window.AlignLeftIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(15.5,38.5),e.lineTo(55.5,38.5),e.strokeStyle=n,e.lineWidth=23,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(15.03,61.25),e.lineTo(65.66,61.25),e.strokeStyle=n,e.lineWidth=23,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(14.5,17.5),e.lineTo(85.66,17.46),e.strokeStyle=n,e.lineWidth=23,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(14.16,82.54),e.lineTo(81.66,82.54),e.strokeStyle=n,e.lineWidth=23,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(13,17),e.lineTo(88,17),e.strokeStyle=t,e.lineWidth=8.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(12.75,82),e.lineTo(84,82),e.strokeStyle=t,e.lineWidth=8.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(13.69,60.71),e.lineTo(69,60.71),e.strokeStyle=t,e.lineWidth=8.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(13.88,38.36),e.lineTo(57,38.36),e.strokeStyle=t,e.lineWidth=8.5,e.lineCap="round",e.stroke()},window.AlignLeftIconAppearance.instances=new Set,window.AlignLeftIconWdgt=function(e){this.color=e,AlignLeftIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new AlignLeftIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AlignLeftIconWdgt,"name",{value:"AlignLeftIconWdgt"}),window.AlignLeftIconWdgt.__super__=window.IconMorph.prototype,window.AlignLeftIconWdgt=extend(window.AlignLeftIconWdgt,window.IconMorph),window.AlignLeftIconWdgt.instances=new Set,window.AlignRightIconAppearance=function(e){this.morph=e,AlignRightIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AlignRightIconAppearance,"name",{value:"AlignRightIconAppearance"}),window.AlignRightIconAppearance.__super__=window.IconAppearance.prototype,window.AlignRightIconAppearance=extend(window.AlignRightIconAppearance,window.IconAppearance),window.AlignRightIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(44.5,38.5),e.lineTo(84.5,38.5),e.strokeStyle=n,e.lineWidth=23,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(35.03,61.25),e.lineTo(85.66,61.25),e.strokeStyle=n,e.lineWidth=23,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(14.5,17.5),e.lineTo(85.66,17.46),e.strokeStyle=n,e.lineWidth=23,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(18.16,82.54),e.lineTo(85.66,82.54),e.strokeStyle=n,e.lineWidth=23,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(13,17),e.lineTo(88,17),e.strokeStyle=t,e.lineWidth=8.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(16.75,82),e.lineTo(88,82),e.strokeStyle=t,e.lineWidth=8.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(32.69,60.71),e.lineTo(88,60.71),e.strokeStyle=t,e.lineWidth=8.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(43.88,38.36),e.lineTo(87,38.36),e.strokeStyle=t,e.lineWidth=8.5,e.lineCap="round",e.stroke()},window.AlignRightIconAppearance.instances=new Set,window.AlignRightIconWdgt=function(e){this.color=e,AlignRightIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new AlignRightIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AlignRightIconWdgt,"name",{value:"AlignRightIconWdgt"}),window.AlignRightIconWdgt.__super__=window.IconMorph.prototype,window.AlignRightIconWdgt=extend(window.AlignRightIconWdgt,window.IconMorph),window.AlignRightIconWdgt.instances=new Set,window.AllPlotsIconAppearance=function(e){this.morph=e,AllPlotsIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AllPlotsIconAppearance,"name",{value:"AllPlotsIconAppearance"}),window.AllPlotsIconAppearance.__super__=window.IconAppearance.prototype,window.AllPlotsIconAppearance=extend(window.AllPlotsIconAppearance,window.IconAppearance),window.AllPlotsIconAppearance.prototype.paintFunction=function(e){var t;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),e.beginPath(),e.moveTo(7,8),e.lineTo(11.25,8),e.lineTo(11.25,88.76),e.lineTo(92,88.76),e.lineTo(92,93),e.lineTo(7,93),e.lineTo(7,8),e.closePath(),e.fillStyle=t,e.fill(),this.oval(e,37,20,5,5),e.fillStyle=t,e.fill(),this.oval(e,20,39,5,5),e.fillStyle=t,e.fill(),this.oval(e,20,18,5,5),e.fillStyle=t,e.fill(),this.oval(e,29,29,5,5),e.fillStyle=t,e.fill(),this.oval(e,42,29,5,5),e.fillStyle=t,e.fill(),this.oval(e,53,25,5,5),e.fillStyle=t,e.fill(),this.oval(e,53,15,5,5),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(20.06,79.26),e.lineTo(15.23,75.9),e.lineTo(26.06,56.31),e.bezierCurveTo(30.65,47.24,35.32,43.21,40.07,44.24),e.bezierCurveTo(43.14,44.9,54.09,61.41,57.5,57.37),e.bezierCurveTo(58.98,57.16,82.84,11.04,82.84,11.04),e.lineTo(87.75,14.04),e.bezierCurveTo(87.75,14.04,64.04,58.55,62.73,60.59),e.bezierCurveTo(61.13,62.57,59.42,63.75,57.1,63.64),e.bezierCurveTo(54.43,63.84,52,63,48.31,59.85),e.bezierCurveTo(44.62,56.71,41.39,52.14,38.2,51.57),e.bezierCurveTo(35,51,32.45,56.53,30.62,59.61),e.lineTo(20.06,79.26),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.rect(79,41,11,45),e.fillStyle=t,e.fill(),e.beginPath(),e.rect(63,66,11,20),e.fillStyle=t,e.fill(),e.beginPath(),e.rect(47,72,11,14),e.fillStyle=t,e.fill(),e.beginPath(),e.rect(32,66,10,20),e.fillStyle=t,e.fill()},window.AllPlotsIconAppearance.instances=new Set,window.AllPlotsIconWdgt=function(e){this.color=e,AllPlotsIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new AllPlotsIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AllPlotsIconWdgt,"name",{value:"AllPlotsIconWdgt"}),window.AllPlotsIconWdgt.__super__=window.IconMorph.prototype,window.AllPlotsIconWdgt=extend(window.AllPlotsIconWdgt,window.IconMorph),window.AllPlotsIconWdgt.instances=new Set,window.AngledArrowUpLeftIconAppearance=function(){window.AngledArrowUpLeftIconAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AngledArrowUpLeftIconAppearance,"name",{value:"AngledArrowUpLeftIconAppearance"}),window.AngledArrowUpLeftIconAppearance.__super__=window.IconAppearance.prototype,window.AngledArrowUpLeftIconAppearance=extend(window.AngledArrowUpLeftIconAppearance,window.IconAppearance),window.AngledArrowUpLeftIconAppearance.prototype.paintFunction=function(e){var t;return t=this.morph.color,e.save(),e.translate(90,37),e.rotate(90*Math.PI/180),e.beginPath(),e.moveTo(-25,-9.04),e.lineTo(16.6,32.5),e.lineTo(16.6,1.35),e.lineTo(79,1.35),e.lineTo(79,-102.5),e.lineTo(58.2,-102.5),e.lineTo(58.2,-19.42),e.lineTo(16.6,-19.42),e.lineTo(16.6,-50.58),e.bezierCurveTo(-4.2,-29.81,-25,-9.04,-25,-9.04),e.closePath(),e.fillStyle=t.toString(),e.fill(),e.restore()},window.AngledArrowUpLeftIconAppearance.instances=new Set,window.AngledArrowUpLeftIconMorph=function(e){this.color=e,AngledArrowUpLeftIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new AngledArrowUpLeftIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AngledArrowUpLeftIconMorph,"name",{value:"AngledArrowUpLeftIconMorph"}),window.AngledArrowUpLeftIconMorph.__super__=window.IconMorph.prototype,window.AngledArrowUpLeftIconMorph=extend(window.AngledArrowUpLeftIconMorph,window.IconMorph),window.AngledArrowUpLeftIconMorph.instances=new Set,window.ArrowEIconAppearance=function(e){this.morph=e,ArrowEIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowEIconAppearance,"name",{value:"ArrowEIconAppearance"}),window.ArrowEIconAppearance.__super__=window.IconAppearance.prototype,window.ArrowEIconAppearance=extend(window.ArrowEIconAppearance,window.IconAppearance),window.ArrowEIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(49.56,2),e.lineTo(30.42,21.15),e.bezierCurveTo(30.42,21.15,37.12,27.85,46.61,37.35),e.lineTo(2,37.35),e.lineTo(2,63.64),e.lineTo(46.61,63.64),e.lineTo(30.41,79.85),e.lineTo(49.56,99),e.lineTo(98,50.5),e.lineTo(49.56,2),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(49.55,4.94),e.lineTo(33.42,21.09),e.bezierCurveTo(33.42,21.09,42.47,30.15,51.39,39.07),e.lineTo(3.96,39.07),e.lineTo(3.96,61.92),e.lineTo(51.39,61.92),e.lineTo(33.41,79.91),e.lineTo(49.55,96.06),e.lineTo(95.06,50.5),e.lineTo(49.55,4.94),e.closePath(),e.fillStyle=t,e.fill()},window.ArrowEIconAppearance.instances=new Set,window.ArrowEIconWdgt=function(e){this.color=e,ArrowEIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ArrowEIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowEIconWdgt,"name",{value:"ArrowEIconWdgt"}),window.ArrowEIconWdgt.__super__=window.IconMorph.prototype,window.ArrowEIconWdgt=extend(window.ArrowEIconWdgt,window.IconMorph),window.ArrowEIconWdgt.instances=new Set,window.ArrowNEIconAppearance=function(e){this.morph=e,ArrowNEIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowNEIconAppearance,"name",{value:"ArrowNEIconAppearance"}),window.ArrowNEIconAppearance.__super__=window.IconAppearance.prototype,window.ArrowNEIconAppearance=extend(window.ArrowNEIconAppearance,window.IconAppearance),window.ArrowNEIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(16.12,7.13),e.lineTo(16.26,37.43),e.bezierCurveTo(16.26,37.43,26.86,37.47,41.89,37.54),e.lineTo(6.73,72.7),e.lineTo(27.62,93.59),e.lineTo(62.78,58.43),e.lineTo(62.89,84.08),e.lineTo(93.2,84.2),e.lineTo(92.84,7.49),e.lineTo(16.12,7.13),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(18.46,9.47),e.lineTo(18.57,35.02),e.bezierCurveTo(18.57,35.02,32.9,35.08,47.02,35.14),e.lineTo(9.64,72.52),e.lineTo(27.8,90.68),e.lineTo(65.18,53.3),e.lineTo(65.3,81.76),e.lineTo(90.86,81.87),e.lineTo(90.52,9.8),e.lineTo(18.46,9.47),e.closePath(),e.fillStyle=t,e.fill()},window.ArrowNEIconAppearance.instances=new Set,window.ArrowNEIconWdgt=function(e){this.color=e,ArrowNEIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ArrowNEIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowNEIconWdgt,"name",{value:"ArrowNEIconWdgt"}),window.ArrowNEIconWdgt.__super__=window.IconMorph.prototype,window.ArrowNEIconWdgt=extend(window.ArrowNEIconWdgt,window.IconMorph),window.ArrowNEIconWdgt.instances=new Set,window.ArrowNIconAppearance=function(e){this.morph=e,ArrowNIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowNIconAppearance,"name",{value:"ArrowNIconAppearance"}),window.ArrowNIconAppearance.__super__=window.IconAppearance.prototype,window.ArrowNIconAppearance=extend(window.ArrowNIconAppearance,window.IconAppearance),window.ArrowNIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(1.5,50.94),e.lineTo(20.65,70.08),e.bezierCurveTo(20.65,70.08,27.35,63.38,36.85,53.89),e.lineTo(36.85,98.5),e.lineTo(63.14,98.5),e.lineTo(63.14,53.89),e.lineTo(79.35,70.09),e.lineTo(98.5,50.94),e.lineTo(50,2.5),e.lineTo(1.5,50.94),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(4.44,50.95),e.lineTo(20.59,67.08),e.bezierCurveTo(20.59,67.08,29.65,58.03,38.57,49.11),e.lineTo(38.57,96.54),e.lineTo(61.42,96.54),e.lineTo(61.42,49.11),e.lineTo(79.41,67.09),e.lineTo(95.56,50.95),e.lineTo(50,5.44),e.lineTo(4.44,50.95),e.closePath(),e.fillStyle=t,e.fill()},window.ArrowNIconAppearance.instances=new Set,window.ArrowNIconWdgt=function(e){this.color=e,ArrowNIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ArrowNIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowNIconWdgt,"name",{value:"ArrowNIconWdgt"}),window.ArrowNIconWdgt.__super__=window.IconMorph.prototype,window.ArrowNIconWdgt=extend(window.ArrowNIconWdgt,window.IconMorph),window.ArrowNIconWdgt.instances=new Set,window.ArrowNWIconAppearance=function(e){this.morph=e,ArrowNWIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowNWIconAppearance,"name",{value:"ArrowNWIconAppearance"}),window.ArrowNWIconAppearance.__super__=window.IconAppearance.prototype,window.ArrowNWIconAppearance=extend(window.ArrowNWIconAppearance,window.IconAppearance),window.ArrowNWIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(6.63,83.38),e.lineTo(36.93,83.24),e.bezierCurveTo(36.93,83.24,36.97,72.64,37.04,57.61),e.lineTo(72.2,92.77),e.lineTo(93.09,71.88),e.lineTo(57.93,36.72),e.lineTo(83.58,36.61),e.lineTo(83.7,6.3),e.lineTo(6.99,6.66),e.lineTo(6.63,83.38),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(8.97,81.04),e.lineTo(34.52,80.93),e.bezierCurveTo(34.52,80.93,34.58,66.6,34.64,52.48),e.lineTo(72.02,89.86),e.lineTo(90.18,71.7),e.lineTo(52.8,34.32),e.lineTo(81.26,34.2),e.lineTo(81.37,8.64),e.lineTo(9.3,8.98),e.lineTo(8.97,81.04),e.closePath(),e.fillStyle=t,e.fill()},window.ArrowNWIconAppearance.instances=new Set,window.ArrowNWIconWdgt=function(e){this.color=e,ArrowNWIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ArrowNWIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowNWIconWdgt,"name",{value:"ArrowNWIconWdgt"}),window.ArrowNWIconWdgt.__super__=window.IconMorph.prototype,window.ArrowNWIconWdgt=extend(window.ArrowNWIconWdgt,window.IconMorph),window.ArrowNWIconWdgt.instances=new Set,window.ArrowSEIconAppearance=function(e){this.morph=e,ArrowSEIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowSEIconAppearance,"name",{value:"ArrowSEIconAppearance"}),window.ArrowSEIconAppearance.__super__=window.IconAppearance.prototype,window.ArrowSEIconAppearance=extend(window.ArrowSEIconAppearance,window.IconAppearance),window.ArrowSEIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(93.37,16.62),e.lineTo(63.07,16.76),e.bezierCurveTo(63.07,16.76,63.03,27.36,62.96,42.39),e.lineTo(27.8,7.23),e.lineTo(6.91,28.12),e.lineTo(42.07,63.28),e.lineTo(16.42,63.39),e.lineTo(16.3,93.7),e.lineTo(93.01,93.34),e.lineTo(93.37,16.62),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(91.03,18.96),e.lineTo(65.48,19.07),e.bezierCurveTo(65.48,19.07,65.42,33.4,65.36,47.52),e.lineTo(27.98,10.14),e.lineTo(9.82,28.3),e.lineTo(47.2,65.68),e.lineTo(18.74,65.8),e.lineTo(18.63,91.36),e.lineTo(90.7,91.02),e.lineTo(91.03,18.96),e.closePath(),e.fillStyle=t,e.fill()},window.ArrowSEIconAppearance.instances=new Set,window.ArrowSEIconWdgt=function(e){this.color=e,ArrowSEIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ArrowSEIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowSEIconWdgt,"name",{value:"ArrowSEIconWdgt"}),window.ArrowSEIconWdgt.__super__=window.IconMorph.prototype,window.ArrowSEIconWdgt=extend(window.ArrowSEIconWdgt,window.IconMorph),window.ArrowSEIconWdgt.instances=new Set,window.ArrowSIconAppearance=function(e){this.morph=e,ArrowSIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowSIconAppearance,"name",{value:"ArrowSIconAppearance"}),window.ArrowSIconAppearance.__super__=window.IconAppearance.prototype,window.ArrowSIconAppearance=extend(window.ArrowSIconAppearance,window.IconAppearance),window.ArrowSIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(98.5,50.06),e.lineTo(79.35,30.92),e.bezierCurveTo(79.35,30.92,72.65,37.62,63.15,47.11),e.lineTo(63.15,2.5),e.lineTo(36.86,2.5),e.lineTo(36.86,47.11),e.lineTo(20.65,30.91),e.lineTo(1.5,50.06),e.lineTo(50,98.5),e.lineTo(98.5,50.06),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(95.56,50.05),e.lineTo(79.41,33.92),e.bezierCurveTo(79.41,33.92,70.35,42.97,61.43,51.89),e.lineTo(61.43,4.46),e.lineTo(38.58,4.46),e.lineTo(38.58,51.89),e.lineTo(20.59,33.91),e.lineTo(4.44,50.05),e.lineTo(50,95.56),e.lineTo(95.56,50.05),e.closePath(),e.fillStyle=t,e.fill()},window.ArrowSIconAppearance.instances=new Set,window.ArrowSIconWdgt=function(e){this.color=e,ArrowSIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ArrowSIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowSIconWdgt,"name",{value:"ArrowSIconWdgt"}),window.ArrowSIconWdgt.__super__=window.IconMorph.prototype,window.ArrowSIconWdgt=extend(window.ArrowSIconWdgt,window.IconMorph),window.ArrowSIconWdgt.instances=new Set,window.ArrowSWIconAppearance=function(e){this.morph=e,ArrowSWIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowSWIconAppearance,"name",{value:"ArrowSWIconAppearance"}),window.ArrowSWIconAppearance.__super__=window.IconAppearance.prototype,window.ArrowSWIconAppearance=extend(window.ArrowSWIconAppearance,window.IconAppearance),window.ArrowSWIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(83.88,92.87),e.lineTo(83.74,62.57),e.bezierCurveTo(83.74,62.57,73.14,62.53,58.11,62.46),e.lineTo(93.27,27.3),e.lineTo(72.38,6.41),e.lineTo(37.22,41.57),e.lineTo(37.11,15.92),e.lineTo(6.8,15.8),e.lineTo(7.16,92.51),e.lineTo(83.88,92.87),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(81.54,90.53),e.lineTo(81.43,64.98),e.bezierCurveTo(81.43,64.98,67.1,64.92,52.98,64.86),e.lineTo(90.36,27.48),e.lineTo(72.2,9.32),e.lineTo(34.82,46.7),e.lineTo(34.7,18.24),e.lineTo(9.14,18.13),e.lineTo(9.48,90.2),e.lineTo(81.54,90.53),e.closePath(),e.fillStyle=t,e.fill()},window.ArrowSWIconAppearance.instances=new Set,window.ArrowSWIconWdgt=function(e){this.color=e,ArrowSWIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ArrowSWIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowSWIconWdgt,"name",{value:"ArrowSWIconWdgt"}),window.ArrowSWIconWdgt.__super__=window.IconMorph.prototype,window.ArrowSWIconWdgt=extend(window.ArrowSWIconWdgt,window.IconMorph),window.ArrowSWIconWdgt.instances=new Set,window.ArrowWIconAppearance=function(e){this.morph=e,ArrowWIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowWIconAppearance,"name",{value:"ArrowWIconAppearance"}),window.ArrowWIconAppearance.__super__=window.IconAppearance.prototype,window.ArrowWIconAppearance=extend(window.ArrowWIconAppearance,window.IconAppearance),window.ArrowWIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(49.44,99),e.lineTo(68.58,79.85),e.bezierCurveTo(68.58,79.85,61.88,73.15,52.39,63.65),e.lineTo(97,63.65),e.lineTo(97,37.36),e.lineTo(52.39,37.36),e.lineTo(68.59,21.15),e.lineTo(49.44,2),e.lineTo(1,50.5),e.lineTo(49.44,99),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(49.45,96.06),e.lineTo(65.58,79.91),e.bezierCurveTo(65.58,79.91,56.53,70.85,47.61,61.93),e.lineTo(95.04,61.93),e.lineTo(95.04,39.08),e.lineTo(47.61,39.08),e.lineTo(65.59,21.09),e.lineTo(49.45,4.94),e.lineTo(3.94,50.5),e.lineTo(49.45,96.06),e.closePath(),e.fillStyle=t,e.fill()},window.ArrowWIconAppearance.instances=new Set,window.ArrowWIconWdgt=function(e){this.color=e,ArrowWIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ArrowWIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowWIconWdgt,"name",{value:"ArrowWIconWdgt"}),window.ArrowWIconWdgt.__super__=window.IconMorph.prototype,window.ArrowWIconWdgt=extend(window.ArrowWIconWdgt,window.IconMorph),window.ArrowWIconWdgt.instances=new Set,window.BarPlotIconAppearance=function(e){this.morph=e,BarPlotIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BarPlotIconAppearance,"name",{value:"BarPlotIconAppearance"}),window.BarPlotIconAppearance.__super__=window.IconAppearance.prototype,window.BarPlotIconAppearance=extend(window.BarPlotIconAppearance,window.IconAppearance),window.BarPlotIconAppearance.prototype.paintFunction=function(e){var t;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),e.beginPath(),e.moveTo(7,8),e.lineTo(11.25,8),e.lineTo(11.25,88.76),e.lineTo(92,88.76),e.lineTo(92,93),e.lineTo(7,93),e.lineTo(7,8),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.rect(78,43,11,43),e.fillStyle=t,e.fill(),e.beginPath(),e.rect(62,31,11,55),e.fillStyle=t,e.fill(),e.beginPath(),e.rect(45,14,11,72),e.fillStyle=t,e.fill(),e.beginPath(),e.rect(29,22,11,64),e.fillStyle=t,e.fill(),e.beginPath(),e.rect(14,46,10,40),e.fillStyle=t,e.fill()},window.BarPlotIconAppearance.instances=new Set,window.BarPlotIconWdgt=function(e){this.color=e,BarPlotIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new BarPlotIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BarPlotIconWdgt,"name",{value:"BarPlotIconWdgt"}),window.BarPlotIconWdgt.__super__=window.IconMorph.prototype,window.BarPlotIconWdgt=extend(window.BarPlotIconWdgt,window.IconMorph),window.BarPlotIconWdgt.instances=new Set,window.BasementIconAppearance=function(e){this.morph=e,BasementIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BasementIconAppearance,"name",{value:"BasementIconAppearance"}),window.BasementIconAppearance.__super__=window.IconAppearance.prototype,window.BasementIconAppearance=extend(window.BasementIconAppearance,window.IconAppearance),window.BasementIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(49.93,6),e.lineTo(49.93,6),e.bezierCurveTo(49.66,6.01,49.39,6.09,49.16,6.24),e.lineTo(2.75,36),e.lineTo(2.75,36),e.bezierCurveTo(2,36.48,1.77,40.4,2.24,41.18),e.bezierCurveTo(2.54,41.66,3.05,41.96,3.6,41.96),e.lineTo(8.38,41.96),e.lineTo(8.38,90.35),e.lineTo(8.38,90.35),e.bezierCurveTo(8.38,91.26,9.1,92,9.98,92),e.lineTo(90.02,92),e.lineTo(90.02,92),e.bezierCurveTo(90.9,92,91.62,91.26,91.62,90.35),e.lineTo(91.62,41.96),e.lineTo(96.4,41.96),e.lineTo(96.4,41.96),e.bezierCurveTo(97.28,41.96,98,41.22,98,40.3),e.bezierCurveTo(98,39.73,97.72,36.3,97.25,36),e.lineTo(50.84,6.24),e.lineTo(50.84,6.24),e.bezierCurveTo(50.56,6.07,50.25,5.99,49.93,6),e.lineTo(49.93,6),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(50.43,9),e.lineTo(50.43,9),e.bezierCurveTo(50.18,9.01,49.93,9.09,49.71,9.22),e.lineTo(5.72,36.91),e.lineTo(5.72,36.91),e.bezierCurveTo(5.01,37.36,4.79,38.31,5.24,39.03),e.bezierCurveTo(5.52,39.48,6,39.75,6.53,39.75),e.lineTo(11.05,39.75),e.lineTo(11.05,87.46),e.lineTo(11.05,87.46),e.bezierCurveTo(11.05,88.31,11.73,89,12.57,89),e.lineTo(21.67,89),e.lineTo(21.67,89),e.bezierCurveTo(22.51,89,23.19,88.31,23.19,87.46),e.lineTo(23.19,45.91),e.lineTo(77.81,45.91),e.lineTo(77.81,87.46),e.lineTo(77.81,87.46),e.bezierCurveTo(77.81,88.31,78.49,89,79.33,89),e.lineTo(88.43,89),e.lineTo(88.43,89),e.bezierCurveTo(89.27,89,89.95,88.31,89.95,87.46),e.lineTo(89.95,39.75),e.lineTo(94.48,39.75),e.lineTo(94.48,39.75),e.bezierCurveTo(95.31,39.75,95.99,39.06,95.99,38.21),e.bezierCurveTo(95.99,37.68,95.72,37.19,95.28,36.91),e.lineTo(51.3,9.23),e.lineTo(51.29,9.22),e.bezierCurveTo(51.03,9.06,50.73,8.99,50.43,9),e.lineTo(50.43,9),e.closePath(),e.moveTo(50.5,12.35),e.lineTo(89.15,36.68),e.lineTo(88.43,36.68),e.lineTo(88.43,36.68),e.bezierCurveTo(87.59,36.68,86.91,37.37,86.91,38.22),e.lineTo(86.91,85.93),e.lineTo(80.84,85.93),e.lineTo(80.84,44.37),e.lineTo(80.84,44.37),e.bezierCurveTo(80.84,43.52,80.16,42.83,79.33,42.83),e.lineTo(21.67,42.83),e.lineTo(21.67,42.83),e.bezierCurveTo(20.84,42.83,20.16,43.52,20.16,44.37),e.lineTo(20.16,85.93),e.lineTo(14.09,85.93),e.lineTo(14.09,38.22),e.lineTo(14.09,38.22),e.bezierCurveTo(14.09,37.37,13.41,36.68,12.57,36.68),e.lineTo(11.85,36.68),e.lineTo(50.5,12.35),e.closePath(),e.moveTo(54.87,52.06),e.lineTo(54.87,52.06),e.bezierCurveTo(54.79,52.06,54.71,52.07,54.64,52.08),e.lineTo(48.82,52.08),e.lineTo(48.82,52.08),e.bezierCurveTo(47.98,52.08,47.31,52.77,47.31,53.62),e.lineTo(47.31,66.12),e.lineTo(40.55,63.17),e.lineTo(40.55,63.17),e.bezierCurveTo(40.29,63,39.98,62.92,39.67,62.94),e.lineTo(39.65,62.94),e.bezierCurveTo(39.4,62.95,39.16,63.02,38.95,63.14),e.lineTo(30.3,66.92),e.lineTo(30.31,66.92),e.bezierCurveTo(30.06,66.97,29.82,67.09,29.63,67.26),e.lineTo(29.62,67.27),e.bezierCurveTo(29.6,67.29,29.58,67.31,29.56,67.33),e.lineTo(29.58,67.31),e.bezierCurveTo(29.56,67.33,29.54,67.35,29.52,67.37),e.lineTo(29.52,67.37),e.lineTo(29.52,67.38),e.bezierCurveTo(29.12,67.76,28.96,68.34,29.11,68.88),e.lineTo(29.1,80.26),e.lineTo(29.11,80.25),e.bezierCurveTo(29.09,80.39,29.1,80.52,29.12,80.66),e.lineTo(29.12,80.65),e.bezierCurveTo(29.13,80.67,29.13,80.69,29.14,80.7),e.lineTo(29.13,80.69),e.bezierCurveTo(29.14,80.71,29.14,80.73,29.14,80.75),e.lineTo(29.14,80.74),e.bezierCurveTo(29.15,80.77,29.15,80.79,29.16,80.82),e.lineTo(29.16,80.83),e.bezierCurveTo(29.17,80.84,29.17,80.85,29.17,80.86),e.lineTo(29.18,80.87),e.bezierCurveTo(29.19,80.91,29.2,80.95,29.22,80.99),e.lineTo(29.22,80.99),e.bezierCurveTo(29.22,80.99,29.22,81,29.23,81.01),e.lineTo(29.23,81.02),e.bezierCurveTo(29.25,81.06,29.27,81.1,29.29,81.14),e.lineTo(29.28,81.13),e.bezierCurveTo(29.29,81.15,29.3,81.16,29.31,81.18),e.lineTo(29.31,81.18),e.bezierCurveTo(29.5,81.51,29.81,81.76,30.18,81.88),e.lineTo(38.98,85.73),e.lineTo(38.99,85.73),e.bezierCurveTo(39,85.74,39.02,85.75,39.03,85.76),e.lineTo(39.02,85.75),e.bezierCurveTo(39.1,85.79,39.17,85.82,39.24,85.84),e.lineTo(39.24,85.84),e.bezierCurveTo(39.45,85.91,39.68,85.93,39.9,85.91),e.lineTo(39.89,85.91),e.lineTo(39.88,85.91),e.bezierCurveTo(39.91,85.91,39.95,85.9,39.98,85.89),e.lineTo(39.99,85.89),e.bezierCurveTo(40.01,85.89,40.03,85.89,40.04,85.88),e.lineTo(40.04,85.89),e.bezierCurveTo(40.07,85.88,40.11,85.87,40.14,85.86),e.lineTo(40.14,85.86),e.bezierCurveTo(40.16,85.86,40.18,85.85,40.19,85.85),e.lineTo(40.18,85.85),e.bezierCurveTo(40.21,85.84,40.25,85.83,40.28,85.81),e.lineTo(40.28,85.81),e.bezierCurveTo(40.34,85.79,40.39,85.76,40.45,85.73),e.lineTo(47.31,82.73),e.lineTo(47.31,84.39),e.lineTo(47.31,84.39),e.bezierCurveTo(47.31,85.24,47.98,85.93,48.82,85.93),e.lineTo(67.03,85.93),e.lineTo(67.03,85.93),e.bezierCurveTo(67.87,85.93,68.55,85.24,68.55,84.39),e.lineTo(68.55,69),e.lineTo(68.55,53.62),e.lineTo(68.55,53.62),e.bezierCurveTo(68.55,52.77,67.87,52.08,67.03,52.08),e.lineTo(61.2,52.08),e.lineTo(61.2,52.08),e.bezierCurveTo(61.11,52.06,61.03,52.06,60.94,52.06),e.lineTo(60.94,52.06),e.bezierCurveTo(60.86,52.06,60.78,52.07,60.71,52.08),e.lineTo(55.13,52.08),e.lineTo(55.13,52.08),e.bezierCurveTo(55.04,52.06,54.96,52.06,54.87,52.06),e.closePath(),e.moveTo(50.34,55.16),e.lineTo(53.37,55.16),e.lineTo(53.37,59.48),e.lineTo(53.37,59.49),e.bezierCurveTo(53.23,60.33,53.78,61.13,54.6,61.28),e.bezierCurveTo(54.79,61.31,54.97,61.31,55.16,61.27),e.lineTo(55.14,61.27),e.bezierCurveTo(55.16,61.27,55.18,61.27,55.2,61.27),e.lineTo(55.2,61.26),e.bezierCurveTo(55.21,61.26,55.22,61.26,55.23,61.26),e.lineTo(55.23,61.26),e.bezierCurveTo(55.31,61.24,55.4,61.21,55.48,61.17),e.lineTo(55.49,61.17),e.bezierCurveTo(55.5,61.17,55.51,61.16,55.51,61.16),e.lineTo(55.51,61.16),e.bezierCurveTo(55.53,61.15,55.54,61.14,55.56,61.14),e.lineTo(55.64,61.1),e.lineTo(55.64,61.1),e.bezierCurveTo(55.64,61.1,55.65,61.09,55.66,61.09),e.lineTo(57.9,59.95),e.lineTo(60.26,61.14),e.lineTo(60.25,61.14),e.bezierCurveTo(60.52,61.28,60.82,61.33,61.12,61.29),e.lineTo(61.12,61.29),e.bezierCurveTo(61.17,61.29,61.23,61.28,61.28,61.26),e.lineTo(61.29,61.26),e.bezierCurveTo(61.31,61.26,61.32,61.25,61.34,61.25),e.lineTo(61.33,61.25),e.bezierCurveTo(61.36,61.24,61.39,61.24,61.41,61.23),e.lineTo(61.42,61.23),e.bezierCurveTo(61.43,61.23,61.44,61.22,61.44,61.22),e.lineTo(61.43,61.22),e.bezierCurveTo(61.52,61.19,61.61,61.15,61.7,61.11),e.lineTo(61.71,61.1),e.lineTo(61.71,61.09),e.bezierCurveTo(61.76,61.07,61.8,61.04,61.85,61.01),e.lineTo(61.84,61.01),e.lineTo(61.85,61.01),e.bezierCurveTo(61.89,60.97,61.93,60.94,61.97,60.9),e.lineTo(61.97,60.91),e.bezierCurveTo(62,60.88,62.03,60.85,62.06,60.81),e.lineTo(62.07,60.81),e.bezierCurveTo(62.34,60.52,62.48,60.13,62.48,59.73),e.lineTo(62.48,55.16),e.lineTo(65.51,55.16),e.lineTo(65.51,67.46),e.lineTo(61.32,67.46),e.lineTo(61.3,67.46),e.bezierCurveTo(61.18,67.43,61.06,67.42,60.94,67.42),e.lineTo(60.94,67.42),e.bezierCurveTo(60.83,67.42,60.72,67.43,60.6,67.46),e.lineTo(55.25,67.46),e.lineTo(55.23,67.46),e.bezierCurveTo(55.11,67.43,54.99,67.42,54.87,67.42),e.lineTo(54.88,67.42),e.bezierCurveTo(54.76,67.42,54.65,67.43,54.53,67.46),e.lineTo(50.34,67.46),e.lineTo(50.34,55.16),e.closePath(),e.moveTo(56.41,55.16),e.lineTo(59.44,55.16),e.lineTo(59.44,57.28),e.lineTo(58.58,56.85),e.lineTo(58.59,56.85),e.bezierCurveTo(58.36,56.74,58.11,56.68,57.85,56.69),e.lineTo(57.85,56.69),e.bezierCurveTo(57.64,56.69,57.43,56.75,57.24,56.84),e.lineTo(56.41,57.26),e.lineTo(56.41,55.16),e.closePath(),e.moveTo(39.72,66.16),e.lineTo(44.98,68.46),e.lineTo(39.72,70.76),e.lineTo(37.57,69.83),e.lineTo(34.45,68.46),e.lineTo(39.72,66.16),e.closePath(),e.moveTo(50.34,70.54),e.lineTo(53.37,70.54),e.lineTo(53.37,74.87),e.lineTo(53.37,74.86),e.bezierCurveTo(53.21,75.7,53.75,76.5,54.57,76.67),e.bezierCurveTo(54.63,76.68,54.68,76.68,54.73,76.69),e.lineTo(54.74,76.69),e.bezierCurveTo(54.79,76.69,54.85,76.7,54.9,76.7),e.lineTo(54.89,76.7),e.bezierCurveTo(55.17,76.7,55.45,76.61,55.69,76.46),e.lineTo(57.9,75.34),e.lineTo(60.26,76.53),e.lineTo(60.27,76.54),e.bezierCurveTo(60.35,76.58,60.45,76.61,60.54,76.64),e.lineTo(60.54,76.64),e.bezierCurveTo(60.58,76.65,60.63,76.66,60.67,76.67),e.lineTo(60.69,76.67),e.bezierCurveTo(60.78,76.69,60.88,76.7,60.98,76.7),e.lineTo(60.99,76.7),e.lineTo(61,76.7),e.lineTo(61.01,76.7),e.bezierCurveTo(61.84,76.67,62.49,75.97,62.48,75.13),e.lineTo(62.48,70.54),e.lineTo(65.51,70.54),e.lineTo(65.51,82.85),e.lineTo(50.34,82.85),e.lineTo(50.34,80.51),e.lineTo(50.34,80.51),e.bezierCurveTo(50.34,80.45,50.34,80.4,50.34,80.35),e.lineTo(50.34,70.54),e.closePath(),e.moveTo(56.41,70.54),e.lineTo(59.44,70.54),e.lineTo(59.44,72.68),e.lineTo(58.58,72.24),e.lineTo(58.58,72.24),e.bezierCurveTo(58.35,72.13,58.09,72.07,57.83,72.09),e.lineTo(57.84,72.09),e.bezierCurveTo(57.63,72.09,57.42,72.15,57.23,72.24),e.lineTo(56.41,72.66),e.lineTo(56.41,70.54),e.closePath(),e.moveTo(32.14,70.8),e.lineTo(33.06,71.2),e.lineTo(36.37,72.65),e.lineTo(38.2,73.45),e.lineTo(38.2,82.03),e.lineTo(32.14,79.38),e.lineTo(32.14,70.8),e.closePath(),e.moveTo(47.3,70.8),e.lineTo(47.3,79.38),e.lineTo(41.24,82.03),e.lineTo(41.24,73.45),e.lineTo(47.3,70.8),e.closePath(),e.fillStyle=t,e.fill()},window.BasementIconAppearance.instances=new Set,window.BasementIconWdgt=function(e){this.color=e,BasementIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new BasementIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BasementIconWdgt,"name",{value:"BasementIconWdgt"}),window.BasementIconWdgt.__super__=window.IconMorph.prototype,window.BasementIconWdgt=extend(window.BasementIconWdgt,window.IconMorph),window.BasementIconWdgt.instances=new Set,window.BoldIconAppearance=function(e){this.morph=e,BoldIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BoldIconAppearance,"name",{value:"BoldIconAppearance"}),window.BoldIconAppearance.__super__=window.IconAppearance.prototype,window.BoldIconAppearance=extend(window.BoldIconAppearance,window.IconAppearance),window.BoldIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(75.92,47.24),e.bezierCurveTo(85.02,49.36,95.98,49.61,97,71.59),e.bezierCurveTo(98.07,94.8,70.84,98,57.27,98),e.lineTo(8.55,98),e.lineTo(8.55,90.39),e.bezierCurveTo(12.99,90.39,16.57,89.15,16.57,89.15),e.bezierCurveTo(20.91,85.53,20.85,86.37,20.85,81.2),e.bezierCurveTo(20.85,81.2,21.98,19.78,19.89,14.29),e.bezierCurveTo(17.81,8.8,12.94,9.89,8.55,9.89),e.lineTo(8.55,2.27),e.lineTo(54.51,2.27),e.bezierCurveTo(65.49,2.27,73.27,3.25,77.84,5.2),e.bezierCurveTo(82.41,7.16,92.52,13,92.61,26.35),e.bezierCurveTo(92.71,40.39,84.36,45.13,75.92,47.24),e.closePath(),e.moveTo(47.19,53.84),e.lineTo(46.91,87.96),e.bezierCurveTo(46.91,87.96,66.46,92.43,68.11,74.5),e.bezierCurveTo(70,54,54.4,53.79,47.19,53.84),e.closePath(),e.moveTo(64.86,28.27),e.bezierCurveTo(63.71,11.55,54.07,12.59,47.18,12.64),e.lineTo(47.18,43.33),e.bezierCurveTo(47.18,43.33,66,45,64.86,28.27),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(68.76,47.43),e.bezierCurveTo(77.24,49.4,93.05,49.64,94,70.25),e.bezierCurveTo(95,92,69.62,95,56.97,95),e.lineTo(11.55,95),e.lineTo(11.55,92.55),e.bezierCurveTo(15.69,92.55,19.96,91.39,19.96,91.39),e.bezierCurveTo(24,88,23.94,84.1,23.94,79.26),e.bezierCurveTo(23.94,79.26,25,17,23.06,11.85),e.bezierCurveTo(21.11,6.71,15.65,7.72,11.55,7.72),e.lineTo(11.55,5.27),e.lineTo(54.39,5.27),e.bezierCurveTo(64.63,5.27,71.88,6.19,76.14,8.02),e.bezierCurveTo(80.4,9.85,89.82,15.33,89.91,27.84),e.bezierCurveTo(90,41,76.63,45.44,68.76,47.43),e.closePath(),e.moveTo(44.77,50.79),e.lineTo(44.52,90.28),e.bezierCurveTo(44.52,90.28,71,95,70.8,72.98),e.bezierCurveTo(70.57,47.79,51.49,50.75,44.77,50.79),e.closePath(),e.moveTo(67.77,28.77),e.bezierCurveTo(66.54,7.54,51.18,10.26,44.77,10.3),e.lineTo(44.77,45.63),e.bezierCurveTo(44.77,45.63,69,50,67.77,28.77),e.closePath(),e.fillStyle=t,e.fill()},window.BoldIconAppearance.instances=new Set,window.BoldIconWdgt=function(e){this.color=e,BoldIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new BoldIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BoldIconWdgt,"name",{value:"BoldIconWdgt"}),window.BoldIconWdgt.__super__=window.IconMorph.prototype,window.BoldIconWdgt=extend(window.BoldIconWdgt,window.IconMorph),window.BoldIconWdgt.instances=new Set,window.BrushIconAppearance=function(){window.BrushIconAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BrushIconAppearance,"name",{value:"BrushIconAppearance"}),window.BrushIconAppearance.__super__=window.IconAppearance.prototype,window.BrushIconAppearance=extend(window.BrushIconAppearance,window.IconAppearance),window.BrushIconAppearance.prototype.paintFunction=function(e){var t;return t=this.morph.color,e.save(),e.translate(102.19,100.77),e.rotate(-17.2*Math.PI/180),e.beginPath(),e.moveTo(96.31,-58.22),e.bezierCurveTo(95.39,-59.15,94.01,-59.15,93.1,-58.22),e.lineTo(31.06,5.14),e.bezierCurveTo(27.61,4.91,15.44,-8.6,13.83,-12.1),e.bezierCurveTo(13.83,-12.33,13.6,-12.33,13.6,-12.56),e.lineTo(75.4,-76.39),e.bezierCurveTo(76.32,-77.32,76.32,-78.72,75.4,-79.65),e.bezierCurveTo(74.49,-80.58,73.11,-80.58,72.19,-79.65),e.lineTo(9.69,-15.36),e.bezierCurveTo(3.26,-17.69,-9.15,-15.83,-20.63,-12.1),e.bezierCurveTo(-32.81,-8.37,-45.68,9.8,-56.25,24.47),e.bezierCurveTo(-61.3,31.46,-65.44,37.52,-68.65,40.31),e.bezierCurveTo(-73.25,44.74,-78.07,44.74,-82.9,44.51),e.bezierCurveTo(-87.49,44.27,-92.09,44.27,-95.08,48.93),e.lineTo(-95.08,48.93),e.bezierCurveTo(-96.45,51.03,-96.22,53.59,-94.85,56.15),e.bezierCurveTo(-89.1,66.17,-62.45,77.35,-36.72,77.35),e.bezierCurveTo(-35.8,77.35,-34.88,77.35,-33.73,77.35),e.bezierCurveTo(-2.02,76.19,19.8,58.48,28.99,43.57),e.bezierCurveTo(36.12,31.69,38.18,14.22,34.97,8.17),e.lineTo(96.31,-54.49),e.bezierCurveTo(97.23,-55.89,97.23,-57.29,96.31,-58.22),e.closePath(),e.moveTo(25.09,40.78),e.bezierCurveTo(16.59,54.75,-3.86,71.29,-33.73,72.46),e.bezierCurveTo(-59.69,73.39,-86.11,61.74,-90.71,53.82),e.bezierCurveTo(-91.63,52.43,-91.17,51.73,-90.94,51.49),e.bezierCurveTo(-89.56,49.16,-87.26,49.16,-82.9,49.4),e.bezierCurveTo(-77.84,49.63,-71.41,49.86,-65.44,44.04),e.bezierCurveTo(-61.99,40.78,-57.62,34.49,-52.57,27.5),e.bezierCurveTo(-42.46,13.52,-30.05,-3.95,-19.49,-7.44),e.bezierCurveTo(-1.79,-13.03,8.32,-11.63,9.23,-10),e.bezierCurveTo(10.61,-6.51,23.94,9.8,30.6,10.26),e.bezierCurveTo(32.67,12.13,32.44,28.43,25.09,40.78),e.closePath(),e.fillStyle=t.toString(),e.fill(),e.beginPath(),e.moveTo(16.36,14.69),e.bezierCurveTo(10.15,15.16,12.68,34.96,-8.46,48.47),e.bezierCurveTo(-30.05,62.44,-47.06,62.44,-47.06,62.44),e.bezierCurveTo(-47.06,62.44,-20.17,66.63,2.11,50.1),e.bezierCurveTo(24.4,33.32,22.79,14.69,16.36,14.69),e.closePath(),e.fillStyle=t.toString(),e.fill(),e.restore()},window.BrushIconAppearance.instances=new Set,window.BrushIconMorph=function(e){this.color=e,BrushIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new BrushIconAppearance(this),this.toolTipMessage="brush","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BrushIconMorph,"name",{value:"BrushIconMorph"}),window.BrushIconMorph.__super__=window.IconMorph.prototype,window.BrushIconMorph=extend(window.BrushIconMorph,window.IconMorph),window.BrushIconMorph.instances=new Set,window.CFDegreesConverterIconAppearance=function(e){this.morph=e,CFDegreesConverterIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CFDegreesConverterIconAppearance,"name",{value:"CFDegreesConverterIconAppearance"}),window.CFDegreesConverterIconAppearance.__super__=window.IconAppearance.prototype,window.CFDegreesConverterIconAppearance=extend(window.CFDegreesConverterIconAppearance,window.IconAppearance),window.CFDegreesConverterIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,this.oval(e,67,6.5,13,13),e.fillStyle="rgb(170, 170, 170)",e.fill(),e.beginPath(),e.moveTo(82,16),e.lineTo(82,37),e.moveTo(82,16),e.lineTo(93.5,16),e.moveTo(82,26),e.lineTo(87,26),e.strokeStyle=n,e.lineWidth=7,e.lineCap="round",e.stroke(),this.oval(e,70,9.5,7,7),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),e.beginPath(),e.moveTo(95,16.49),e.bezierCurveTo(95,17.35,94.26,18.06,93.36,18.06),e.lineTo(83.53,18.06),e.bezierCurveTo(83.53,18.06,83.53,20.47,83.53,23.56),e.bezierCurveTo(83.68,23.52,83.84,23.5,84,23.5),e.lineTo(86,23.5),e.bezierCurveTo(87.1,23.5,88,24.4,88,25.5),e.bezierCurveTo(88,26.6,87.1,27.5,86,27.5),e.lineTo(84,27.5),e.bezierCurveTo(83.84,27.5,83.68,27.48,83.53,27.44),e.bezierCurveTo(83.53,32.18,83.53,36.94,83.53,36.94),e.bezierCurveTo(83.53,37.81,82.79,38.52,81.89,38.52),e.bezierCurveTo(80.99,38.52,80.25,37.81,80.25,36.94),e.bezierCurveTo(80.25,36.94,80.25,36.14,80.25,34.86),e.bezierCurveTo(80.25,29.66,80.25,16.49,80.25,16.49),e.bezierCurveTo(80.25,15.62,80.99,14.92,81.89,14.92),e.lineTo(93.36,14.92),e.bezierCurveTo(94.26,14.92,95,15.62,95,16.49),e.closePath(),e.fillStyle=t,e.fill(),this.oval(e,2.5,6.5,13,13),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(23.94,40.02),e.bezierCurveTo(16.42,40.02,10.28,33.76,10.28,26.07),e.bezierCurveTo(10.28,18.39,16.42,12.13,23.94,12.13),e.bezierCurveTo(27.56,12.13,32.1,14.34,33.55,16.17),e.bezierCurveTo(35,18,34.15,19.76,33.56,20.36),e.bezierCurveTo(32.99,20.97,31.82,21.91,29.42,21.37),e.bezierCurveTo(27.01,20.84,28.89,18.46,23.94,18.23),e.bezierCurveTo(19,18,16,23,16.32,26.07),e.bezierCurveTo(16.64,29.15,18.09,33.92,23.94,33.92),e.bezierCurveTo(26.76,33.92,27.01,31.56,29.42,30.78),e.bezierCurveTo(31.82,30,32.99,31.19,33.56,31.79),e.bezierCurveTo(34.15,32.39,34.14,35.38,33.55,35.98),e.bezierCurveTo(30.97,38.58,27.56,40.02,23.94,40.02),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(23.64,38.02),e.bezierCurveTo(17.38,38.02,12.28,32.66,12.28,26.07),e.bezierCurveTo(12.28,19.49,17.38,14.13,23.64,14.13),e.bezierCurveTo(26.65,14.13,29.48,15.36,31.63,17.59),e.bezierCurveTo(32.12,18.11,32.13,18.96,31.64,19.47),e.bezierCurveTo(31.16,19.99,30.35,20,29.85,19.48),e.bezierCurveTo(28.19,17.75,25.99,16.79,23.64,16.79),e.bezierCurveTo(18.77,16.79,14.81,20.95,14.81,26.07),e.bezierCurveTo(14.81,31.2,18.77,35.36,23.64,35.36),e.bezierCurveTo(25.98,35.36,28.19,34.41,29.85,32.67),e.bezierCurveTo(30.35,32.16,31.16,32.17,31.64,32.68),e.bezierCurveTo(32.13,33.2,32.12,34.05,31.63,34.56),e.bezierCurveTo(29.48,36.79,26.65,38.02,23.64,38.02),e.closePath(),e.fillStyle=t,e.fill(),this.oval(e,5.5,9.5,7,7),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),e.beginPath(),e.moveTo(51.3,2),e.bezierCurveTo(44.58,1.97,38.95,6.05,38.92,12.2),e.lineTo(38.92,64.3),e.bezierCurveTo(34.19,67.67,32,72.85,32,78.71),e.bezierCurveTo(32,88.82,40.17,98,51.34,98),e.bezierCurveTo(62.5,98,70.67,88.82,70.67,78.71),e.bezierCurveTo(70.67,72.84,68.47,67.64,63.72,64.27),e.bezierCurveTo(63.52,45.14,64,30.33,63.69,12.2),e.bezierCurveTo(63.72,6.05,58.09,1.97,51.3,2),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(51.31,4.82),e.bezierCurveTo(45.82,4.79,41.22,8.56,41.19,14.24),e.lineTo(41.19,64.94),e.bezierCurveTo(37.33,68.05,34.78,72.83,34.78,78.24),e.bezierCurveTo(34.78,87.57,42.22,95.18,51.34,95.18),e.bezierCurveTo(60.46,95.18,67.89,87.57,67.89,78.24),e.bezierCurveTo(67.89,72.82,65.33,68.02,61.45,64.91),e.bezierCurveTo(61.29,47.26,61.68,30.98,61.42,14.24),e.bezierCurveTo(61.45,8.56,56.85,4.79,51.31,4.82),e.closePath(),e.moveTo(51.28,8.59),e.bezierCurveTo(54.1,8.56,57.77,10.44,57.74,14.24),e.bezierCurveTo(57.8,31.68,57.77,48.05,57.77,65.76),e.bezierCurveTo(57.77,66.38,58.08,66.98,58.58,67.32),e.bezierCurveTo(61.98,69.69,64.21,73.69,64.21,78.24),e.bezierCurveTo(64.21,85.53,58.47,91.41,51.34,91.41),e.bezierCurveTo(44.2,91.41,38.46,85.53,38.46,78.24),e.bezierCurveTo(38.46,73.71,40.68,69.7,44.07,67.32),e.bezierCurveTo(44.55,66.99,44.86,66.4,44.87,65.79),e.lineTo(44.87,14.24),e.bezierCurveTo(44.9,10.44,47.66,8.56,51.28,8.59),e.closePath(),e.moveTo(47.4,49.18),e.bezierCurveTo(46.76,49.82,46.74,50.5,46.74,50.97),e.lineTo(46.74,70.18),e.bezierCurveTo(44.02,71.81,42.14,74.76,42.14,78.21),e.bezierCurveTo(42.14,83.38,46.28,87.62,51.34,87.62),e.bezierCurveTo(56.39,87.62,60.53,83.38,60.53,78.21),e.bezierCurveTo(60.53,74.77,58.65,71.84,55.93,70.21),e.lineTo(55.93,50.97),e.bezierCurveTo(55.94,50.29,55.55,49.61,54.96,49.29),e.bezierCurveTo(54.37,48.98,53.61,49.03,53.06,49.41),e.bezierCurveTo(51.61,49.96,50.53,48.82,49.38,48.59),e.bezierCurveTo(48.61,48.43,47.98,48.79,47.4,49.18),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(47,16),e.lineTo(56,16),e.strokeStyle=t,e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(47,23.5),e.lineTo(56,23.5),e.strokeStyle=t,e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(47,31),e.lineTo(56,31),e.strokeStyle=t,e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(47,38.5),e.lineTo(56,38.5),e.strokeStyle=t,e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(47,46),e.lineTo(56,46),e.strokeStyle=t,e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(51.5,19.75),e.lineTo(56,19.75),e.strokeStyle=t,e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(51.5,27.25),e.lineTo(56,27.25),e.strokeStyle=t,e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(51.5,34.75),e.lineTo(56,34.75),e.strokeStyle=t,e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(51.5,42.25),e.lineTo(56,42.25),e.strokeStyle=t,e.lineWidth=2,e.lineCap="round",e.stroke()},window.CFDegreesConverterIconAppearance.instances=new Set,window.CFDegreesConverterIconWdgt=function(e){this.color=e,CFDegreesConverterIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new CFDegreesConverterIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CFDegreesConverterIconWdgt,"name",{value:"CFDegreesConverterIconWdgt"}),window.CFDegreesConverterIconWdgt.__super__=window.IconMorph.prototype,window.CFDegreesConverterIconWdgt=extend(window.CFDegreesConverterIconWdgt,window.IconMorph),window.CFDegreesConverterIconWdgt.instances=new Set,window.CalculatingNodeIconAppearance=function(e){this.morph=e,CalculatingNodeIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CalculatingNodeIconAppearance,"name",{value:"CalculatingNodeIconAppearance"}),window.CalculatingNodeIconAppearance.__super__=window.IconAppearance.prototype,window.CalculatingNodeIconAppearance=extend(window.CalculatingNodeIconAppearance,window.IconAppearance),window.CalculatingNodeIconAppearance.prototype.paintFunction=function(e){var t;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),e.beginPath(),e.rect(20.5,17.5,60,66),e.strokeStyle=t,e.lineWidth=4,e.lineCap="round",e.lineJoin="round",e.stroke(),e.beginPath(),e.moveTo(19.5,26.5),e.lineTo(9.5,26.5),e.strokeStyle=t,e.lineWidth=2,e.stroke(),e.beginPath(),e.moveTo(19,72.5),e.lineTo(9,72.5),e.strokeStyle=t,e.lineWidth=2,e.stroke(),e.beginPath(),e.moveTo(81,51),e.lineTo(90,51),e.strokeStyle=t,e.lineWidth=2,e.stroke(),e.beginPath(),e.moveTo(28.53,34.5),e.bezierCurveTo(27.62,34.5,48.5,34.5,48.5,34.5),e.strokeStyle=t,e.lineWidth=2,e.stroke(),e.beginPath(),e.moveTo(38.5,23.5),e.lineTo(38.5,45.5),e.strokeStyle=t,e.lineWidth=2,e.stroke(),e.beginPath(),e.moveTo(58.5,34.5),e.lineTo(74.5,34.5),e.strokeStyle=t,e.lineWidth=2,e.stroke(),e.beginPath(),e.moveTo(29.5,72.5),e.lineTo(45.5,56.5),e.strokeStyle=t,e.lineWidth=2,e.stroke(),e.beginPath(),e.moveTo(29.5,56.5),e.lineTo(45.5,72.5),e.strokeStyle=t,e.lineWidth=2,e.stroke(),e.beginPath(),e.moveTo(58.5,63.5),e.lineTo(75.5,63.5),e.strokeStyle=t,e.lineWidth=2,e.stroke(),e.beginPath(),e.rect(65.5,54.5,4,4),e.fillStyle=t,e.fill(),e.beginPath(),e.rect(65.5,68.5,4,4),e.fillStyle=t,e.fill(),this.oval(e,88.5,48,6,6),e.fillStyle=t,e.fill(),this.oval(e,6.5,69.5,6,6),e.fillStyle=t,e.fill(),this.oval(e,6.5,23.5,6,6),e.fillStyle=t,e.fill()},window.CalculatingNodeIconAppearance.instances=new Set,window.CalculatingNodeIconWdgt=function(e){this.color=e,CalculatingNodeIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new CalculatingNodeIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CalculatingNodeIconWdgt,"name",{value:"CalculatingNodeIconWdgt"}),window.CalculatingNodeIconWdgt.__super__=window.IconMorph.prototype,window.CalculatingNodeIconWdgt=extend(window.CalculatingNodeIconWdgt,window.IconMorph),window.CalculatingNodeIconWdgt.instances=new Set,window.ChangeFontIconAppearance=function(e){this.morph=e,ChangeFontIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ChangeFontIconAppearance,"name",{value:"ChangeFontIconAppearance"}),window.ChangeFontIconAppearance.__super__=window.IconAppearance.prototype,window.ChangeFontIconAppearance=extend(window.ChangeFontIconAppearance,window.IconAppearance),window.ChangeFontIconAppearance.prototype.paintFunction=function(e){var t;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),e.beginPath(),e.moveTo(75.17,68.88),e.lineTo(64.75,44.1),e.lineTo(54.47,68.88),e.lineTo(75.17,68.88),e.closePath(),e.moveTo(36.32,92),e.lineTo(36.32,90.37),e.bezierCurveTo(38.63,90.11,40.37,89.23,41.53,87.74),e.bezierCurveTo(42.68,86.24,44.67,82.19,47.48,75.56),e.lineTo(66.25,31.4),e.lineTo(68,31.4),e.lineTo(90.42,82.42),e.bezierCurveTo(91.91,85.82,93.1,87.92,94,88.73),e.bezierCurveTo(94.89,89.53,96.39,90.08,98.5,90.37),e.lineTo(98.5,92),e.lineTo(75.61,92),e.lineTo(75.61,90.37),e.bezierCurveTo(78.24,90.14,79.94,89.85,80.7,89.52),e.bezierCurveTo(81.46,89.18,81.85,88.35,81.85,87.03),e.bezierCurveTo(81.85,86.59,81.7,85.82,81.41,84.71),e.bezierCurveTo(81.11,83.59,80.7,82.42,80.18,81.19),e.lineTo(76.44,72.53),e.lineTo(52.89,72.53),e.bezierCurveTo(50.54,78.42,49.14,82.02,48.69,83.32),e.bezierCurveTo(48.23,84.62,48.01,85.66,48.01,86.42),e.bezierCurveTo(48.01,87.94,48.62,89,49.85,89.58),e.bezierCurveTo(50.62,89.93,52.05,90.2,54.16,90.37),e.lineTo(54.16,92),e.lineTo(36.32,92),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(33.67,14.23),e.lineTo(33.51,14.23),e.lineTo(23.36,42.21),e.lineTo(43.65,42.21),e.lineTo(33.67,14.23),e.closePath(),e.moveTo(38.12,7),e.bezierCurveTo(38.12,7,47.47,30.99,54.35,48.63),e.bezierCurveTo(52.82,52.25,51.26,55.92,49.88,59.18),e.bezierCurveTo(48.11,54.3,46.17,48.93,46.17,48.93),e.lineTo(20.84,48.93),e.lineTo(14.13,67),e.lineTo(6,67),e.bezierCurveTo(6,67,22.23,25.22,27.61,11.39),e.bezierCurveTo(28.67,8.64,29.31,7,29.31,7),e.lineTo(38.12,7),e.lineTo(38.12,7),e.closePath(),e.fillStyle=t,e.fill()},window.ChangeFontIconAppearance.instances=new Set,window.ChangeFontIconWdgt=function(e){this.color=e,ChangeFontIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ChangeFontIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ChangeFontIconWdgt,"name",{value:"ChangeFontIconWdgt"}),window.ChangeFontIconWdgt.__super__=window.IconMorph.prototype,window.ChangeFontIconWdgt=extend(window.ChangeFontIconWdgt,window.IconMorph),window.ChangeFontIconWdgt.instances=new Set,window.CloseIconAppearance=function(){window.CloseIconAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CloseIconAppearance,"name",{value:"CloseIconAppearance"}),window.CloseIconAppearance.__super__=window.IconAppearance.prototype,window.CloseIconAppearance=extend(window.CloseIconAppearance,window.IconAppearance),window.CloseIconAppearance.prototype.paintFunction=function(e){var t;return t=this.morph.color,e.beginPath(),e.moveTo(100.5,196.5),e.bezierCurveTo(153.91,196.5,197.5,152.91,197.5,99.5),e.bezierCurveTo(197.5,46.09,153.91,2.5,100.5,2.5),e.bezierCurveTo(47.09,2.5,3.5,46.09,3.5,99.5),e.bezierCurveTo(3.5,152.91,47.09,196.5,100.5,196.5),e.closePath(),e.moveTo(100.5,15.1),e.bezierCurveTo(147.11,15.1,184.9,52.89,184.9,99.5),e.bezierCurveTo(184.9,146.11,147.11,183.9,100.5,183.9),e.bezierCurveTo(53.89,183.9,16.1,146.11,16.1,99.5),e.bezierCurveTo(16.1,52.89,53.89,15.1,100.5,15.1),e.closePath(),e.fillStyle=t.toString(),e.fill(),e.beginPath(),e.moveTo(65.73,134.27),e.bezierCurveTo(66.99,135.53,68.5,136.03,70.27,136.03),e.bezierCurveTo(72.03,136.03,73.54,135.53,74.8,134.27),e.lineTo(100.5,108.32),e.lineTo(126.45,134.27),e.bezierCurveTo(127.71,135.53,129.22,136.03,130.99,136.03),e.bezierCurveTo(132.75,136.03,134.26,135.53,135.52,134.27),e.bezierCurveTo(138.04,131.75,138.04,127.72,135.52,125.45),e.lineTo(109.32,99.5),e.lineTo(135.27,73.55),e.bezierCurveTo(137.79,71.03,137.79,67,135.27,64.73),e.bezierCurveTo(132.75,62.21,128.72,62.21,126.45,64.73),e.lineTo(100.5,90.68),e.lineTo(74.55,64.73),e.bezierCurveTo(72.03,62.21,68,62.21,65.73,64.73),e.bezierCurveTo(63.21,67.25,63.21,71.28,65.73,73.55),e.lineTo(91.68,99.5),e.lineTo(65.73,125.45),e.bezierCurveTo(63.21,127.72,63.21,131.75,65.73,134.27),e.closePath(),e.fillStyle=t.toString(),e.fill()},window.CloseIconAppearance.instances=new Set,window.CollapseIconAppearance=function(){window.CollapseIconAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CollapseIconAppearance,"name",{value:"CollapseIconAppearance"}),window.CollapseIconAppearance.__super__=window.IconAppearance.prototype,window.CollapseIconAppearance=extend(window.CollapseIconAppearance,window.IconAppearance),window.CollapseIconAppearance.prototype.paintFunction=function(e){var t;return t=this.morph.color,e.beginPath(),e.moveTo(100.5,196.5),e.bezierCurveTo(153.91,196.5,197.5,152.91,197.5,99.5),e.bezierCurveTo(197.5,46.09,153.91,2.5,100.5,2.5),e.bezierCurveTo(47.09,2.5,3.5,46.09,3.5,99.5),e.bezierCurveTo(3.5,152.91,47.09,196.5,100.5,196.5),e.closePath(),e.moveTo(100.5,15.1),e.bezierCurveTo(147.11,15.1,184.9,52.89,184.9,99.5),e.bezierCurveTo(184.9,146.11,147.11,183.9,100.5,183.9),e.bezierCurveTo(53.89,183.9,16.1,146.11,16.1,99.5),e.bezierCurveTo(16.1,52.89,53.89,15.1,100.5,15.1),e.closePath(),e.fillStyle=t.toString(),e.fill(),e.beginPath(),e.rect(65,107,65,21),e.closePath(),e.fill()},window.CollapseIconAppearance.instances=new Set,window.CollapsedStateIconAppearance=function(e){this.morph=e,CollapsedStateIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(400,400),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CollapsedStateIconAppearance,"name",{value:"CollapsedStateIconAppearance"}),window.CollapsedStateIconAppearance.__super__=window.IconAppearance.prototype,window.CollapsedStateIconAppearance=extend(window.CollapsedStateIconAppearance,window.IconAppearance),window.CollapsedStateIconAppearance.prototype.paintFunction=function(e){return"rgb(0, 0, 0)",e.beginPath(),e.moveTo(44.5,262.42),e.lineTo(204.07,111.5),e.lineTo(360.5,265.5),e.strokeStyle="rgb(0, 0, 0)",e.lineWidth=30,e.stroke()},window.CollapsedStateIconAppearance.instances=new Set,window.CollapsedStateIconMorph=function(e){this.color=e,CollapsedStateIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new CollapsedStateIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CollapsedStateIconMorph,"name",{value:"CollapsedStateIconMorph"}),window.CollapsedStateIconMorph.__super__=window.IconMorph.prototype,window.CollapsedStateIconMorph=extend(window.CollapsedStateIconMorph,window.IconMorph),window.CollapsedStateIconMorph.prototype.colloquialName=function(){return'"Collapsed state" icon'},window.CollapsedStateIconMorph.instances=new Set,window.ColorPalettePatchProgrammingIconAppearance=function(e){this.morph=e,ColorPalettePatchProgrammingIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ColorPalettePatchProgrammingIconAppearance,"name",{value:"ColorPalettePatchProgrammingIconAppearance"}),window.ColorPalettePatchProgrammingIconAppearance.__super__=window.IconAppearance.prototype,window.ColorPalettePatchProgrammingIconAppearance=extend(window.ColorPalettePatchProgrammingIconAppearance,window.IconAppearance),window.ColorPalettePatchProgrammingIconAppearance.prototype.colorGradient=nil,window.ColorPalettePatchProgrammingIconAppearance.prototype.paintFunction=function(e){var t,n;return n=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),null==this.colorGradient&&(t=function(e){return e.addColorStop(0,"rgb(255, 0, 0)"),e.addColorStop(.15,"rgb(255, 0, 255)"),e.addColorStop(.33,"rgb(0, 0, 255)"),e.addColorStop(.49,"rgb(0, 255, 255)"),e.addColorStop(.67,"rgb(0, 255, 0)"),e.addColorStop(.84,"rgb(255, 255, 0)"),e.addColorStop(1,"rgb(255, 0, 0)"),e},this.colorGradient=t(e.createLinearGradient(79,82,21,82))),e.beginPath(),e.rect(21,19,58,63),e.fillStyle=this.colorGradient,e.fill(),e.beginPath(),e.rect(20.5,17.5,60,66),e.strokeStyle=n,e.lineWidth=4,e.lineCap="round",e.lineJoin="round",e.stroke(),e.beginPath(),e.moveTo(81,51),e.lineTo(90,51),e.strokeStyle=n,e.lineWidth=2,e.stroke(),this.oval(e,88.5,48,6,6),e.fillStyle=n,e.fill()},window.ColorPalettePatchProgrammingIconAppearance.instances=new Set,window.ColorPalettePatchProgrammingIconWdgt=function(e){this.color=e,ColorPalettePatchProgrammingIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ColorPalettePatchProgrammingIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ColorPalettePatchProgrammingIconWdgt,"name",{value:"ColorPalettePatchProgrammingIconWdgt"}),window.ColorPalettePatchProgrammingIconWdgt.__super__=window.IconMorph.prototype,window.ColorPalettePatchProgrammingIconWdgt=extend(window.ColorPalettePatchProgrammingIconWdgt,window.IconMorph),window.ColorPalettePatchProgrammingIconWdgt.instances=new Set,window.DashboardsIconAppearance=function(e){this.morph=e,DashboardsIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DashboardsIconAppearance,"name",{value:"DashboardsIconAppearance"}),window.DashboardsIconAppearance.__super__=window.IconAppearance.prototype,window.DashboardsIconAppearance=extend(window.DashboardsIconAppearance,window.IconAppearance),window.DashboardsIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(87.54,18),e.lineTo(13.57,18),e.bezierCurveTo(10.05,18,7.12,20.67,7.12,23.87),e.lineTo(7,76.13),e.bezierCurveTo(7,79.33,9.94,82,13.46,82),e.lineTo(87.43,82),e.bezierCurveTo(90.95,82,93.88,79.33,93.88,76.13),e.lineTo(94,23.87),e.bezierCurveTo(94,20.67,91.06,18,87.54,18),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(85.84,20),e.lineTo(15.27,20),e.bezierCurveTo(11.91,20,9.11,22.5,9.11,25.5),e.lineTo(9,74.5),e.bezierCurveTo(9,77.5,11.8,80,15.16,80),e.lineTo(85.73,80),e.bezierCurveTo(89.09,80,91.89,77.5,91.89,74.5),e.lineTo(92,25.5),e.bezierCurveTo(92,22.5,89.2,20,85.84,20),e.closePath(),e.moveTo(88.53,74.5),e.bezierCurveTo(88.53,75.9,87.3,77,85.73,77),e.lineTo(15.16,77),e.bezierCurveTo(13.59,77,12.36,75.9,12.36,74.5),e.lineTo(12.47,25.5),e.bezierCurveTo(12.47,24.1,13.7,23,15.27,23),e.lineTo(85.84,23),e.bezierCurveTo(87.41,23,88.64,24.1,88.64,25.5),e.lineTo(88.53,74.5),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(22,27),e.lineTo(23.2,27),e.lineTo(23.2,46.8),e.lineTo(46,46.8),e.lineTo(46,48),e.lineTo(22,48),e.lineTo(22,27),e.closePath(),e.fillStyle=t,e.fill(),this.oval(e,35,30,3,3),e.fillStyle=t,e.fill(),this.oval(e,27,40,3,3),e.fillStyle=t,e.fill(),this.oval(e,27,29,3,3),e.fillStyle=t,e.fill(),this.oval(e,31,35,3,3),e.fillStyle=t,e.fill(),this.oval(e,37,35,3,3),e.fillStyle=t,e.fill(),this.oval(e,43,33,3,3),e.fillStyle=t,e.fill(),this.oval(e,43,28,3,3),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(56,27),e.lineTo(57.17,27),e.lineTo(57.17,46.8),e.lineTo(79.41,46.8),e.lineTo(79.41,48),e.lineTo(56,48),e.lineTo(56,27),e.closePath(),e.fillStyle=t,e.fill(),e.save(),e.translate(60.06,23.23),e.beginPath(),e.moveTo(1.4,20.37),e.lineTo(0,19.37),e.lineTo(3.13,13.52),e.bezierCurveTo(4.45,10.81,5.8,9.61,7.17,9.91),e.bezierCurveTo(8.06,10.11,11.22,15.04,12.2,13.83),e.bezierCurveTo(12.63,13.77,17.52,4,17.52,4),e.lineTo(18.94,4.89),e.bezierCurveTo(18.94,4.89,14.09,14.19,13.71,14.8),e.bezierCurveTo(13.25,15.39,12.76,15.74,12.09,15.71),e.bezierCurveTo(11.32,15.77,10.62,15.52,9.55,14.58),e.bezierCurveTo(8.49,13.64,7.55,12.27,6.63,12.1),e.bezierCurveTo(5.71,11.93,4.97,13.58,4.44,14.5),e.lineTo(1.4,20.37),e.closePath(),e.fillStyle=t,e.fill(),e.restore(),e.beginPath(),e.rect(43,55,3,15),e.fillStyle=t,e.fill(),e.beginPath(),e.rect(37,63,4,7),e.fillStyle=t,e.fill(),e.beginPath(),e.rect(32,65,3,5),e.fillStyle=t,e.fill(),e.beginPath(),e.rect(26,63,4,7),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(22,53),e.lineTo(23.2,53),e.lineTo(23.2,72.8),e.lineTo(46,72.8),e.lineTo(46,74),e.lineTo(22,74),e.lineTo(22,53),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(69.37,64.35),e.lineTo(69.37,57.47),e.bezierCurveTo(69.37,57.26,69.2,57.1,69,57.1),e.bezierCurveTo(68.8,57.1,68.63,57.26,68.63,57.47),e.lineTo(68.63,64.36),e.lineTo(62.18,69.09),e.bezierCurveTo(62.02,69.21,61.98,69.44,62.1,69.61),e.bezierCurveTo(62.22,69.78,62.45,69.82,62.62,69.7),e.lineTo(69.01,65.01),e.lineTo(75.76,69.7),e.bezierCurveTo(75.82,69.74,75.89,69.76,75.97,69.76),e.bezierCurveTo(76.09,69.76,76.2,69.71,76.27,69.6),e.bezierCurveTo(76.39,69.43,76.35,69.2,76.18,69.08),e.lineTo(69.37,64.35),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(68.63,54.64),e.lineTo(68.63,55.61),e.bezierCurveTo(68.63,55.81,68.8,55.98,69,55.98),e.bezierCurveTo(69.2,55.98,69.37,55.81,69.37,55.61),e.lineTo(69.37,54.64),e.lineTo(70.36,53.63),e.bezierCurveTo(70.5,53.49,70.5,53.25,70.36,53.11),e.bezierCurveTo(70.22,52.96,69.99,52.96,69.84,53.11),e.lineTo(69,53.96),e.lineTo(68.16,53.11),e.bezierCurveTo(68.02,52.96,67.79,52.96,67.64,53.11),e.bezierCurveTo(67.5,53.26,67.5,53.49,67.64,53.64),e.lineTo(68.63,54.64),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(79.05,70.51),e.lineTo(79.89,69.66),e.bezierCurveTo(80.03,69.51,80.03,69.28,79.89,69.13),e.bezierCurveTo(79.75,68.99,79.52,68.99,79.37,69.13),e.lineTo(78.53,69.98),e.lineTo(77.7,69.13),e.bezierCurveTo(77.55,68.99,77.32,68.99,77.18,69.13),e.bezierCurveTo(77.04,69.28,77.04,69.51,77.18,69.66),e.lineTo(78.02,70.51),e.lineTo(77.18,71.36),e.bezierCurveTo(77.04,71.51,77.04,71.74,77.18,71.89),e.bezierCurveTo(77.25,71.96,77.34,72,77.43,72),e.bezierCurveTo(77.53,72,77.62,71.96,77.7,71.89),e.lineTo(78.53,71.04),e.lineTo(79.37,71.89),e.bezierCurveTo(79.45,71.96,79.54,72,79.63,72),e.bezierCurveTo(79.73,72,79.82,71.96,79.9,71.89),e.bezierCurveTo(80.04,71.75,80.04,71.51,79.9,71.37),e.lineTo(79.05,70.51),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(60.9,69.53),e.bezierCurveTo(60.94,69.44,60.94,69.34,60.9,69.25),e.bezierCurveTo(60.87,69.16,60.79,69.09,60.71,69.05),e.bezierCurveTo(60.66,69.03,60.61,69.02,60.57,69.02),e.lineTo(58.37,69.02),e.bezierCurveTo(58.17,69.02,58,69.19,58,69.39),e.bezierCurveTo(58,69.6,58.17,69.76,58.37,69.76),e.lineTo(59.68,69.76),e.lineTo(58.11,71.36),e.bezierCurveTo(58.08,71.4,58.05,71.44,58.03,71.49),e.bezierCurveTo(57.99,71.58,57.99,71.68,58.03,71.77),e.bezierCurveTo(58.07,71.86,58.14,71.93,58.23,71.97),e.bezierCurveTo(58.27,71.99,58.32,72,58.37,72),e.lineTo(60.57,72),e.bezierCurveTo(60.77,72,60.93,71.83,60.93,71.63),e.bezierCurveTo(60.93,71.42,60.77,71.25,60.57,71.25),e.lineTo(59.25,71.25),e.lineTo(60.82,69.66),e.bezierCurveTo(60.86,69.62,60.89,69.58,60.9,69.53),e.closePath(),e.fillStyle=t,e.fill()},window.DashboardsIconAppearance.instances=new Set,window.DashboardsIconWdgt=function(e){this.color=e,DashboardsIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new DashboardsIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DashboardsIconWdgt,"name",{value:"DashboardsIconWdgt"}),window.DashboardsIconWdgt.__super__=window.IconMorph.prototype,window.DashboardsIconWdgt=extend(window.DashboardsIconWdgt,window.IconMorph),window.DashboardsIconWdgt.instances=new Set,window.DecreaseFontSizeIconAppearance=function(e){this.morph=e,DecreaseFontSizeIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DecreaseFontSizeIconAppearance,"name",{value:"DecreaseFontSizeIconAppearance"}),window.DecreaseFontSizeIconAppearance.__super__=window.IconAppearance.prototype,window.DecreaseFontSizeIconAppearance=extend(window.DecreaseFontSizeIconAppearance,window.IconAppearance),window.DecreaseFontSizeIconAppearance.prototype.paintFunction=function(e){var t;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),e.beginPath(),e.moveTo(37.91,19.09),e.bezierCurveTo(37.42,17.84,36.06,17,34.52,17),e.bezierCurveTo(32.98,17,31.62,17.84,31.13,19.09),e.lineTo(9.41,74.96),e.bezierCurveTo(8.79,76.56,9.8,78.3,11.67,78.84),e.bezierCurveTo(13.55,79.38,15.56,78.51,16.19,76.9),e.lineTo(20.88,64.84),e.lineTo(47.93,64.84),e.bezierCurveTo(48.01,64.84,48.07,64.8,48.14,64.8),e.lineTo(52.85,76.9),e.bezierCurveTo(53.35,78.19,54.74,79,56.23,79),e.bezierCurveTo(56.61,79,56.99,78.95,57.36,78.84),e.bezierCurveTo(59.23,78.3,60.24,76.57,59.62,74.97),e.lineTo(37.91,19.09),e.closePath(),e.moveTo(23.26,58.71),e.lineTo(34.52,29.74),e.lineTo(45.78,58.71),e.lineTo(23.26,58.71),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(58.44,40.34),e.lineTo(74.97,56.79),e.lineTo(91.5,40.34),e.lineTo(58.44,40.34),e.closePath(),e.fillStyle=t,e.fill()},window.DecreaseFontSizeIconAppearance.instances=new Set,window.DecreaseFontSizeIconWdgt=function(e){this.color=e,DecreaseFontSizeIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new DecreaseFontSizeIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DecreaseFontSizeIconWdgt,"name",{value:"DecreaseFontSizeIconWdgt"}),window.DecreaseFontSizeIconWdgt.__super__=window.IconMorph.prototype,window.DecreaseFontSizeIconWdgt=extend(window.DecreaseFontSizeIconWdgt,window.IconMorph),window.DecreaseFontSizeIconWdgt.instances=new Set,window.DegreesConverterIconAppearance=function(e){this.morph=e,DegreesConverterIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DegreesConverterIconAppearance,"name",{value:"DegreesConverterIconAppearance"}),window.DegreesConverterIconAppearance.__super__=window.IconAppearance.prototype,window.DegreesConverterIconAppearance=extend(window.DegreesConverterIconAppearance,window.IconAppearance),window.DegreesConverterIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,this.oval(e,67,6.5,13,13),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(82,16),e.lineTo(82,37),e.moveTo(82,16),e.lineTo(93.5,16),e.moveTo(82,26),e.lineTo(87,26),e.strokeStyle=n,e.lineWidth=7,e.lineCap="round",e.stroke(),this.oval(e,70,9.5,7,7),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),e.beginPath(),e.moveTo(95,16.49),e.bezierCurveTo(95,17.35,94.26,18.06,93.36,18.06),e.lineTo(83.53,18.06),e.bezierCurveTo(83.53,18.06,83.53,20.47,83.53,23.56),e.bezierCurveTo(83.68,23.52,83.84,23.5,84,23.5),e.lineTo(86,23.5),e.bezierCurveTo(87.1,23.5,88,24.4,88,25.5),e.bezierCurveTo(88,26.6,87.1,27.5,86,27.5),e.lineTo(84,27.5),e.bezierCurveTo(83.84,27.5,83.68,27.48,83.53,27.44),e.bezierCurveTo(83.53,32.18,83.53,36.94,83.53,36.94),e.bezierCurveTo(83.53,37.81,82.79,38.52,81.89,38.52),e.bezierCurveTo(80.99,38.52,80.25,37.81,80.25,36.94),e.bezierCurveTo(80.25,36.94,80.25,36.14,80.25,34.86),e.bezierCurveTo(80.25,29.66,80.25,16.49,80.25,16.49),e.bezierCurveTo(80.25,15.62,80.99,14.92,81.89,14.92),e.lineTo(93.36,14.92),e.bezierCurveTo(94.26,14.92,95,15.62,95,16.49),e.closePath(),e.fillStyle=t,e.fill(),this.oval(e,2.5,6.5,13,13),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(23.94,40.02),e.bezierCurveTo(16.42,40.02,10.28,33.76,10.28,26.07),e.bezierCurveTo(10.28,18.39,16.42,12.13,23.94,12.13),e.bezierCurveTo(27.56,12.13,32.1,14.34,33.55,16.17),e.bezierCurveTo(35,18,34.15,19.76,33.56,20.36),e.bezierCurveTo(32.99,20.97,31.82,21.91,29.42,21.37),e.bezierCurveTo(27.01,20.84,28.89,18.46,23.94,18.23),e.bezierCurveTo(19,18,16,23,16.32,26.07),e.bezierCurveTo(16.64,29.15,18.09,33.92,23.94,33.92),e.bezierCurveTo(26.76,33.92,27.01,31.56,29.42,30.78),e.bezierCurveTo(31.82,30,32.99,31.19,33.56,31.79),e.bezierCurveTo(34.15,32.39,34.14,35.38,33.55,35.98),e.bezierCurveTo(30.97,38.58,27.56,40.02,23.94,40.02),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(23.64,38.02),e.bezierCurveTo(17.38,38.02,12.28,32.66,12.28,26.07),e.bezierCurveTo(12.28,19.49,17.38,14.13,23.64,14.13),e.bezierCurveTo(26.65,14.13,29.48,15.36,31.63,17.59),e.bezierCurveTo(32.12,18.11,32.13,18.96,31.64,19.47),e.bezierCurveTo(31.16,19.99,30.35,20,29.85,19.48),e.bezierCurveTo(28.19,17.75,25.99,16.79,23.64,16.79),e.bezierCurveTo(18.77,16.79,14.81,20.95,14.81,26.07),e.bezierCurveTo(14.81,31.2,18.77,35.36,23.64,35.36),e.bezierCurveTo(25.98,35.36,28.19,34.41,29.85,32.67),e.bezierCurveTo(30.35,32.16,31.16,32.17,31.64,32.68),e.bezierCurveTo(32.13,33.2,32.12,34.05,31.63,34.56),e.bezierCurveTo(29.48,36.79,26.65,38.02,23.64,38.02),e.closePath(),e.fillStyle=t,e.fill(),this.oval(e,5.5,9.5,7,7),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),e.beginPath(),e.moveTo(51.3,2),e.bezierCurveTo(44.58,1.97,38.95,6.05,38.92,12.2),e.lineTo(38.92,64.3),e.bezierCurveTo(34.19,67.67,32,72.85,32,78.71),e.bezierCurveTo(32,88.82,40.17,98,51.34,98),e.bezierCurveTo(62.5,98,70.67,88.82,70.67,78.71),e.bezierCurveTo(70.67,72.84,68.47,67.64,63.72,64.27),e.bezierCurveTo(63.52,45.14,64,30.33,63.69,12.2),e.bezierCurveTo(63.72,6.05,58.09,1.97,51.3,2),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(51.31,4.82),e.bezierCurveTo(45.82,4.79,41.22,8.56,41.19,14.24),e.lineTo(41.19,64.94),e.bezierCurveTo(37.33,68.05,34.78,72.83,34.78,78.24),e.bezierCurveTo(34.78,87.57,42.22,95.18,51.34,95.18),e.bezierCurveTo(60.46,95.18,67.89,87.57,67.89,78.24),e.bezierCurveTo(67.89,72.82,65.33,68.02,61.45,64.91),e.bezierCurveTo(61.29,47.26,61.68,30.98,61.42,14.24),e.bezierCurveTo(61.45,8.56,56.85,4.79,51.31,4.82),e.closePath(),e.moveTo(51.28,8.59),e.bezierCurveTo(54.1,8.56,57.77,10.44,57.74,14.24),e.bezierCurveTo(57.8,31.68,57.77,48.05,57.77,65.76),e.bezierCurveTo(57.77,66.38,58.08,66.98,58.58,67.32),e.bezierCurveTo(61.98,69.69,64.21,73.69,64.21,78.24),e.bezierCurveTo(64.21,85.53,58.47,91.41,51.34,91.41),e.bezierCurveTo(44.2,91.41,38.46,85.53,38.46,78.24),e.bezierCurveTo(38.46,73.71,40.68,69.7,44.07,67.32),e.bezierCurveTo(44.55,66.99,44.86,66.4,44.87,65.79),e.lineTo(44.87,14.24),e.bezierCurveTo(44.9,10.44,47.66,8.56,51.28,8.59),e.closePath(),e.moveTo(47.4,49.18),e.bezierCurveTo(46.76,49.82,46.74,50.5,46.74,50.97),e.lineTo(46.74,70.18),e.bezierCurveTo(44.02,71.81,42.14,74.76,42.14,78.21),e.bezierCurveTo(42.14,83.38,46.28,87.62,51.34,87.62),e.bezierCurveTo(56.39,87.62,60.53,83.38,60.53,78.21),e.bezierCurveTo(60.53,74.77,58.65,71.84,55.93,70.21),e.lineTo(55.93,50.97),e.bezierCurveTo(55.94,50.29,55.55,49.61,54.96,49.29),e.bezierCurveTo(54.37,48.98,53.61,49.03,53.06,49.41),e.bezierCurveTo(51.61,49.96,50.53,48.82,49.38,48.59),e.bezierCurveTo(48.61,48.43,47.98,48.79,47.4,49.18),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(47,16),e.lineTo(56,16),e.strokeStyle=t,e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(47,23.5),e.lineTo(56,23.5),e.strokeStyle=t,e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(47,31),e.lineTo(56,31),e.strokeStyle=t,e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(47,38.5),e.lineTo(56,38.5),e.strokeStyle=t,e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(47,46),e.lineTo(56,46),e.strokeStyle=t,e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(51.5,19.75),e.lineTo(56,19.75),e.strokeStyle=t,e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(51.5,27.25),e.lineTo(56,27.25),e.strokeStyle=t,e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(51.5,34.75),e.lineTo(56,34.75),e.strokeStyle=t,e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(51.5,42.25),e.lineTo(56,42.25),e.strokeStyle=t,e.lineWidth=2,e.lineCap="round",e.stroke()},window.DegreesConverterIconAppearance.instances=new Set,window.DegreesConverterIconWdgt=function(e){this.color=e,DegreesConverterIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new DegreesConverterIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DegreesConverterIconWdgt,"name",{value:"DegreesConverterIconWdgt"}),window.DegreesConverterIconWdgt.__super__=window.IconMorph.prototype,window.DegreesConverterIconWdgt=extend(window.DegreesConverterIconWdgt,window.IconMorph),window.DegreesConverterIconWdgt.instances=new Set,window.DestroyIconAppearance=function(e){this.morph=e,DestroyIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DestroyIconAppearance,"name",{value:"DestroyIconAppearance"}),window.DestroyIconAppearance.__super__=window.IconAppearance.prototype,window.DestroyIconAppearance=extend(window.DestroyIconAppearance,window.IconAppearance),window.DestroyIconAppearance.prototype.paintFunction=function(e){var t,n;if(t=this.morph.color.toString(),null!=this.morph.strokeColor&&(n=this.morph.strokeColor.toString()),e.beginPath(),e.moveTo(42.5,4.5),e.lineTo(53.5,29.5),e.lineTo(72.5,9.5),e.lineTo(65.5,35.5),e.lineTo(94.5,34.5),e.lineTo(70.5,51.5),e.lineTo(96.5,72.5),e.lineTo(65.5,66.5),e.lineTo(73.5,87.5),e.lineTo(55.5,73.5),e.lineTo(43.5,96.5),e.lineTo(36.5,67.5),e.lineTo(9.5,77.5),e.lineTo(24.5,59.5),e.lineTo(3.5,56.5),e.lineTo(25.5,48.5),e.lineTo(5.5,25.5),e.lineTo(37.5,32.5),e.lineTo(42.5,4.5),e.closePath(),e.fillStyle=t,e.fill(),null!=n)return e.strokeStyle=n,e.lineWidth=1,e.stroke()},window.DestroyIconAppearance.instances=new Set,window.DestroyIconMorph=function(e){this.color=e,DestroyIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new DestroyIconAppearance(this),this.toolTipMessage="explosion","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DestroyIconMorph,"name",{value:"DestroyIconMorph"}),window.DestroyIconMorph.__super__=window.IconMorph.prototype,window.DestroyIconMorph=extend(window.DestroyIconMorph,window.IconMorph),window.DestroyIconMorph.prototype.colloquialName=function(){return'"Destroy" icon'},window.DestroyIconMorph.instances=new Set,window.ElasticWindowIconAppearance=function(e){this.morph=e,ElasticWindowIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ElasticWindowIconAppearance,"name",{value:"ElasticWindowIconAppearance"}),window.ElasticWindowIconAppearance.__super__=window.IconAppearance.prototype,window.ElasticWindowIconAppearance=extend(window.ElasticWindowIconAppearance,window.IconAppearance),window.ElasticWindowIconAppearance.prototype.paintFunction=function(e){var t;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),this.oval(e,11,11,6,6),e.fillStyle=t,e.fill(),this.oval(e,22,11,6,6),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(5,24),e.lineTo(91,24),e.strokeStyle=t,e.lineWidth=4,e.stroke(),e.beginPath(),e.rect(4,4,88,88),e.strokeStyle=t,e.lineWidth=3.5,e.lineJoin="round",e.stroke(),e.beginPath(),e.moveTo(82,83),e.lineTo(82,33),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),e.beginPath(),e.moveTo(80.5,57.65),e.bezierCurveTo(79.09,60.86,77.49,64.5,74.07,64.5),e.bezierCurveTo(70.64,64.5,69.05,60.86,67.64,57.65),e.bezierCurveTo(66.18,54.32,65.09,52.15,63.23,52.15),e.bezierCurveTo(61.38,52.15,60.28,54.32,58.83,57.65),e.bezierCurveTo(57.42,60.86,55.82,64.5,52.4,64.5),e.bezierCurveTo(48.97,64.5,47.38,60.86,45.97,57.65),e.bezierCurveTo(44.51,54.32,43.42,52.15,41.56,52.15),e.bezierCurveTo(39.71,52.15,38.62,54.32,37.16,57.65),e.bezierCurveTo(35.75,60.86,34.16,64.5,30.73,64.5),e.bezierCurveTo(27.31,64.5,25.72,60.86,24.31,57.65),e.bezierCurveTo(22.85,54.32,21.76,52.15,19.9,52.15),e.bezierCurveTo(18.05,52.15,16.96,54.32,15.5,57.65),e.strokeStyle=t,e.lineWidth=3,e.miterLimit=4,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(15,83),e.lineTo(15,33),e.strokeStyle=t,e.lineWidth=2.5,e.stroke()},window.ElasticWindowIconAppearance.instances=new Set,window.ElasticWindowIconWdgt=function(e){this.color=e,ElasticWindowIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ElasticWindowIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ElasticWindowIconWdgt,"name",{value:"ElasticWindowIconWdgt"}),window.ElasticWindowIconWdgt.__super__=window.IconMorph.prototype,window.ElasticWindowIconWdgt=extend(window.ElasticWindowIconWdgt,window.IconMorph),window.ElasticWindowIconWdgt.instances=new Set,window.EmptyWindowIconAppearance=function(e){this.morph=e,EmptyWindowIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.EmptyWindowIconAppearance,"name",{value:"EmptyWindowIconAppearance"}),window.EmptyWindowIconAppearance.__super__=window.IconAppearance.prototype,window.EmptyWindowIconAppearance=extend(window.EmptyWindowIconAppearance,window.IconAppearance),window.EmptyWindowIconAppearance.prototype.paintFunction=function(e){var t;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),this.oval(e,11,11,6,6),e.fillStyle=t,e.fill(),this.oval(e,22,11,6,6),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(5,24),e.lineTo(91,24),e.strokeStyle=t,e.lineWidth=4,e.stroke(),e.beginPath(),e.rect(4,4,88,88),e.strokeStyle=t,e.lineWidth=3.5,e.lineJoin="round",e.stroke(),e.beginPath(),e.moveTo(19,33),e.lineTo(14,33),e.lineTo(14,39),e.strokeStyle=t,e.lineWidth=2.5,e.lineCap="square",e.stroke(),e.beginPath(),e.moveTo(14,45),e.lineTo(14,53),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),e.beginPath(),e.moveTo(14,60),e.bezierCurveTo(14,59.5,14,69,14,69),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),e.beginPath(),e.moveTo(14,77),e.lineTo(14,82),e.lineTo(21,82),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),e.beginPath(),e.moveTo(77,82),e.lineTo(82,82),e.lineTo(82,75),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),e.beginPath(),e.moveTo(82,68),e.lineTo(82,60),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),e.beginPath(),e.moveTo(82,53),e.lineTo(82,44),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),e.beginPath(),e.moveTo(82,38.94),e.bezierCurveTo(82,39.69,82,33,82,33),e.lineTo(75,33),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),e.beginPath(),e.moveTo(26,33),e.lineTo(38,33),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),e.beginPath(),e.moveTo(43,33),e.lineTo(53,33),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),e.beginPath(),e.moveTo(58,33),e.lineTo(70,33),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),e.beginPath(),e.moveTo(26,82),e.lineTo(38,82),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),e.beginPath(),e.moveTo(43,82),e.lineTo(53,82),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),e.beginPath(),e.moveTo(58,82),e.lineTo(70,82),e.strokeStyle=t,e.lineWidth=2.5,e.stroke()},window.EmptyWindowIconAppearance.instances=new Set,window.EmptyWindowIconWdgt=function(e){this.color=e,EmptyWindowIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new EmptyWindowIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.EmptyWindowIconWdgt,"name",{value:"EmptyWindowIconWdgt"}),window.EmptyWindowIconWdgt.__super__=window.IconMorph.prototype,window.EmptyWindowIconWdgt=extend(window.EmptyWindowIconWdgt,window.IconMorph),window.EmptyWindowIconWdgt.instances=new Set,window.EraserIconAppearance=function(){window.EraserIconAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.EraserIconAppearance,"name",{value:"EraserIconAppearance"}),window.EraserIconAppearance.__super__=window.IconAppearance.prototype,window.EraserIconAppearance=extend(window.EraserIconAppearance,window.IconAppearance),window.EraserIconAppearance.prototype.paintFunction=function(e){var t;return t=this.morph.color,e.beginPath(),e.moveTo(191.45,32.27),e.bezierCurveTo(190.62,31.18,189.31,30.53,187.94,30.53),e.lineTo(100.04,30.53),e.bezierCurveTo(99.26,30.53,98.5,30.75,97.84,31.16),e.lineTo(97.68,31.02),e.lineTo(23.59,110.15),e.lineTo(22.8,111.05),e.lineTo(22.9,111.15),e.bezierCurveTo(22.74,111.45,22.61,111.75,22.53,112.06),e.lineTo(8.79,163.86),e.bezierCurveTo(8.44,165.19,8.72,166.64,9.55,167.73),e.bezierCurveTo(10.38,168.82,11.69,169.47,13.05,169.47),e.lineTo(100.95,169.47),e.bezierCurveTo(102.36,169.47,103.61,168.87,104.9,167.56),e.lineTo(177.19,90.19),e.bezierCurveTo(177.41,89.96,178.23,88.81,178.46,87.94),e.lineTo(191.72,37.95),e.lineTo(192.21,36.14),e.bezierCurveTo(192.56,34.79,192.29,33.38,191.45,32.27),e.closePath(),e.moveTo(108.95,117.67),e.lineTo(97.57,160.56),e.lineTo(18.8,160.56),e.lineTo(30.18,117.67),e.lineTo(108.95,117.67),e.closePath(),e.moveTo(178.4,39.44),e.lineTo(113.49,108.76),e.lineTo(37.03,108.76),e.lineTo(101.94,39.44),e.lineTo(178.4,39.44),e.closePath(),e.fillStyle=t.toString(),e.fill()},window.EraserIconAppearance.instances=new Set,window.EraserIconMorph=function(e){this.color=e,EraserIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new EraserIconAppearance(this),this.toolTipMessage="eraser","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.EraserIconMorph,"name",{value:"EraserIconMorph"}),window.EraserIconMorph.__super__=window.IconMorph.prototype,window.EraserIconMorph=extend(window.EraserIconMorph,window.IconMorph),window.EraserIconMorph.instances=new Set,window.ExternalIconAppearance=function(e){this.morph=e,ExternalIconAppearance.__super__.constructor.apply(this,arguments),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ExternalIconAppearance,"name",{value:"ExternalIconAppearance"}),window.ExternalIconAppearance.__super__=window.IconAppearance.prototype,window.ExternalIconAppearance=extend(window.ExternalIconAppearance,window.IconAppearance),window.ExternalIconAppearance.prototype.paintFunction=function(e){var t;return t=this.morph.color,e.beginPath(),e.moveTo(3,66),e.lineTo(15,66),e.lineTo(15,72.56),e.bezierCurveTo(15,80.02,20.97,85.08,28.46,85.08),e.lineTo(71.54,85.08),e.bezierCurveTo(79.03,85.08,85.12,79.02,85.12,71.56),e.lineTo(85.12,27.43),e.bezierCurveTo(85.12,19.97,79.03,13.91,71.54,13.91),e.lineTo(28.46,13.91),e.bezierCurveTo(20.97,13.91,15,18.97,15,26.43),e.lineTo(15,33),e.lineTo(3,33),e.lineTo(3,26.43),e.bezierCurveTo(3,12.46,14.42,2.08,28.46,2.08),e.lineTo(71.54,2.08),e.bezierCurveTo(85.57,2.08,97,13.46,97,27.43),e.lineTo(97,71.56),e.bezierCurveTo(97,85.54,85.57,96.92,71.54,96.92),e.lineTo(28.46,96.92),e.bezierCurveTo(14.42,96.92,3,86.54,3,72.56),e.lineTo(3,66),e.closePath(),e.fillStyle=t.toString(),e.fill(),e.beginPath(),e.moveTo(3.44,43.3),e.lineTo(39.64,43.3),e.lineTo(39.64,24.48),e.lineTo(73.62,49.22),e.lineTo(39.64,73.92),e.lineTo(39.64,55.12),e.lineTo(3.44,55.12),e.lineTo(3.44,43.3),e.closePath(),e.fillStyle=t.toString(),e.fill()},window.ExternalIconAppearance.instances=new Set,window.ExternalIconMorph=function(e){this.color=e,ExternalIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new ExternalIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ExternalIconMorph,"name",{value:"ExternalIconMorph"}),window.ExternalIconMorph.__super__=window.IconMorph.prototype,window.ExternalIconMorph=extend(window.ExternalIconMorph,window.IconMorph),window.ExternalIconMorph.instances=new Set,window.ExternalLinkIconAppearance=function(e){this.morph=e,ExternalLinkIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ExternalLinkIconAppearance,"name",{value:"ExternalLinkIconAppearance"}),window.ExternalLinkIconAppearance.__super__=window.IconAppearance.prototype,window.ExternalLinkIconAppearance=extend(window.ExternalLinkIconAppearance,window.IconAppearance),window.ExternalLinkIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(54,22),e.lineTo(13.5,22),e.lineTo(13.5,86.5),e.lineTo(78,86.5),e.lineTo(78,46),e.strokeStyle=n,e.lineWidth=16,e.lineJoin="round",e.stroke(),e.beginPath(),e.moveTo(62.33,23.13),e.lineTo(65.3,23.13),e.lineTo(40.31,47.17),e.lineTo(52.82,59.68),e.lineTo(76.98,34.68),e.lineTo(76.98,37.66),e.lineTo(93.2,37.66),e.lineTo(93.2,6.9),e.lineTo(62.33,6.9),e.lineTo(62.33,23.13),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(51,22),e.lineTo(14,22),e.lineTo(14,86),e.lineTo(78,86),e.lineTo(78,49),e.strokeStyle=t,e.lineWidth=11,e.lineJoin="round",e.stroke(),e.beginPath(),e.moveTo(64.57,20.28),e.lineTo(71.74,20.28),e.lineTo(44.31,47.72),e.lineTo(52.28,55.68),e.lineTo(79.82,28.25),e.lineTo(79.82,35.42),e.lineTo(91.2,35.42),e.lineTo(91.2,8.9),e.lineTo(64.57,8.9),e.lineTo(64.57,20.28),e.closePath(),e.fillStyle=t,e.fill()},window.ExternalLinkIconAppearance.instances=new Set,window.ExternalLinkIconWdgt=function(e){this.color=e,ExternalLinkIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ExternalLinkIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ExternalLinkIconWdgt,"name",{value:"ExternalLinkIconWdgt"}),window.ExternalLinkIconWdgt.__super__=window.IconMorph.prototype,window.ExternalLinkIconWdgt=extend(window.ExternalLinkIconWdgt,window.IconMorph),window.ExternalLinkIconWdgt.instances=new Set,window.FizzygumLogoIconAppearance=function(e){this.morph=e,FizzygumLogoIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FizzygumLogoIconAppearance,"name",{value:"FizzygumLogoIconAppearance"}),window.FizzygumLogoIconAppearance.__super__=window.IconAppearance.prototype,window.FizzygumLogoIconAppearance=extend(window.FizzygumLogoIconAppearance,window.IconAppearance),window.FizzygumLogoIconAppearance.prototype.paintFunction=function(e){var t,n;return n="rgb(255, 255, 255)",t=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(98,49.68),e.bezierCurveTo(98,21.6,77.18,3,51.5,3),e.bezierCurveTo(25.82,3,5,23.9,5,49.68),e.bezierCurveTo(5,59.58,10.93,71.63,13.31,76.3),e.bezierCurveTo(15.69,80.98,12.68,88.84,1,95.37),e.bezierCurveTo(1,95.37,46.24,98.63,60.89,94.61),e.bezierCurveTo(75.55,90.59,98,77.77,98,49.68),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(95,49.7),e.bezierCurveTo(95,23.41,75.52,6,51.5,6),e.bezierCurveTo(27.48,6,8,25.57,8,49.7),e.bezierCurveTo(8,58.97,13.54,70.25,15.77,74.62),e.bezierCurveTo(18,79,18.92,87.29,8,93.41),e.bezierCurveTo(8,93.41,46.58,95.53,60.29,91.77),e.bezierCurveTo(74,88,95,76,95,49.7),e.closePath(),e.fillStyle="rgb(255, 0, 0)",e.fill(),this.oval(e,65,29,5,5),e.fillStyle=n,e.fill(),this.oval(e,60,45,9,9),e.fillStyle=n,e.fill(),this.oval(e,53,35,6,6),e.fillStyle=n,e.fill(),this.oval(e,40,45,8,8),e.fillStyle=n,e.fill(),this.oval(e,39,30,6,6),e.fillStyle=n,e.fill(),this.oval(e,28,37,4,4),e.fillStyle=n,e.fill(),this.oval(e,26,52,5,5),e.fillStyle=n,e.fill(),this.oval(e,32,69,4,4),e.fillStyle=n,e.fill(),this.oval(e,50,74,3,3),e.fillStyle=n,e.fill(),this.oval(e,72,56,4,4),e.fillStyle=n,e.fill(),this.oval(e,53,58,4,4),e.fillStyle=n,e.fill(),this.oval(e,62,66,6,6),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(52,17.98),e.lineTo(52,19.98),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(48,22),e.lineTo(50,22),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(54,22),e.lineTo(56,22),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(52,23.98),e.lineTo(52,25.98),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(44,60.48),e.lineTo(44,62.48),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=1.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(40.5,64),e.lineTo(42.5,64),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=1.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(45.5,64),e.lineTo(47.5,64),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=1.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(44,65.48),e.lineTo(44,67.48),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=1.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(77.5,37.98),e.lineTo(77.5,39.98),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(73.5,42),e.lineTo(75.5,42),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(79.5,42),e.lineTo(81.5,42),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(77.5,43.98),e.lineTo(77.5,45.98),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=2,e.lineCap="round",e.stroke()},window.FizzygumLogoIconAppearance.instances=new Set,window.FizzygumLogoIconWdgt=function(e){this.color=e,FizzygumLogoIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new FizzygumLogoIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FizzygumLogoIconWdgt,"name",{value:"FizzygumLogoIconWdgt"}),window.FizzygumLogoIconWdgt.__super__=window.IconMorph.prototype,window.FizzygumLogoIconWdgt=extend(window.FizzygumLogoIconWdgt,window.IconMorph),window.FizzygumLogoIconWdgt.instances=new Set,window.FizzygumLogoWithTextIconAppearance=function(e){this.morph=e,FizzygumLogoWithTextIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FizzygumLogoWithTextIconAppearance,"name",{value:"FizzygumLogoWithTextIconAppearance"}),window.FizzygumLogoWithTextIconAppearance.__super__=window.IconAppearance.prototype,window.FizzygumLogoWithTextIconAppearance=extend(window.FizzygumLogoWithTextIconAppearance,window.IconAppearance),window.FizzygumLogoWithTextIconAppearance.prototype.paintFunction=function(e){var t;return t="rgb(255, 255, 255)",e.fillStyle="rgb(0, 0, 0)",e.font='bold 17px Arial-BoldMT, Arial, "Helvetica Neue", Helvetica, sans-serif',e.textAlign="center",22.1,e.fillText("Fizzygum",51.5,90.95),e.beginPath(),e.moveTo(86.65,39.23),e.bezierCurveTo(86.65,18.83,71.39,5.33,52.57,5.33),e.bezierCurveTo(33.74,5.33,18.48,20.51,18.48,39.23),e.bezierCurveTo(18.48,46.41,22.83,55.16,24.57,58.56),e.bezierCurveTo(26.32,61.95,27.04,68.39,18.48,73.13),e.bezierCurveTo(18.48,73.13,48.71,74.77,59.45,71.85),e.bezierCurveTo(70.2,68.93,86.65,59.63,86.65,39.23),e.closePath(),e.fillStyle="rgb(255, 0, 0)",e.fill(),this.oval(e,63,22,4,4),e.fillStyle=t,e.fill(),this.oval(e,59,35,7,7),e.fillStyle=t,e.fill(),this.oval(e,53,27,5,5),e.fillStyle=t,e.fill(),this.oval(e,43,35,6,6),e.fillStyle=t,e.fill(),this.oval(e,43,23,4,4),e.fillStyle=t,e.fill(),this.oval(e,34,28,3,3),e.fillStyle=t,e.fill(),this.oval(e,33,40,4,4),e.fillStyle=t,e.fill(),this.oval(e,37,54,3,3),e.fillStyle=t,e.fill(),this.oval(e,51,58,2,2),e.fillStyle=t,e.fill(),this.oval(e,68,43,3,3),e.fillStyle=t,e.fill(),this.oval(e,54,45,3,3),e.fillStyle=t,e.fill(),this.oval(e,61,52,4,4),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(52,13.98),e.lineTo(52,15.48),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=1.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(49,17),e.lineTo(50.5,17),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=1.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(53.5,17),e.lineTo(55,17),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=1.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(52,18.48),e.lineTo(52,19.98),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=1.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(46,47.48),e.lineTo(46,48.91),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=1,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(43.5,49.99),e.lineTo(44.93,49.99),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=1,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(47.07,49.99),e.lineTo(48.5,49.99),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=1,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(46,51.05),e.lineTo(46,52.48),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=1,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(72.5,30.98),e.lineTo(72.5,32.48),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=1.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(69.5,34),e.lineTo(71,34),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=1.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(74,34),e.lineTo(75.5,34),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=1.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(72.5,35.48),e.lineTo(72.5,36.98),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=1.5,e.lineCap="round",e.stroke()},window.FizzygumLogoWithTextIconAppearance.instances=new Set,window.FizzygumLogoWithTextIconWdgt=function(e){this.color=e,FizzygumLogoWithTextIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new FizzygumLogoWithTextIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FizzygumLogoWithTextIconWdgt,"name",{value:"FizzygumLogoWithTextIconWdgt"}),window.FizzygumLogoWithTextIconWdgt.__super__=window.IconMorph.prototype,window.FizzygumLogoWithTextIconWdgt=extend(window.FizzygumLogoWithTextIconWdgt,window.IconMorph),window.FizzygumLogoWithTextIconWdgt.instances=new Set,window.FloppyDiskIconAppearance=function(e){this.morph=e,FloppyDiskIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FloppyDiskIconAppearance,"name",{value:"FloppyDiskIconAppearance"}),window.FloppyDiskIconAppearance.__super__=window.IconAppearance.prototype,window.FloppyDiskIconAppearance=extend(window.FloppyDiskIconAppearance,window.IconAppearance),window.FloppyDiskIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(8.5,6.5),e.lineTo(78.16,6.5),e.lineTo(92.5,20.83),e.lineTo(92.5,92.5),e.lineTo(8.5,92.5),e.lineTo(8.5,6.5),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(12.23,10.24),e.lineTo(75.7,10.24),e.lineTo(88.77,23.33),e.lineTo(88.77,88.76),e.lineTo(12.23,88.76),e.lineTo(12.23,10.24),e.closePath(),e.strokeStyle=t,e.lineWidth=3.5,e.stroke(),e.beginPath(),e.rect(57.5,16.5,7,13),e.strokeStyle=t,e.lineWidth=2,e.stroke(),this.oval(e,52.5,67.5,4,4),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(32.11,69.71),e.lineTo(48.83,69.71),e.strokeStyle=t,e.lineWidth=4,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(32.11,63),e.lineTo(44.65,63),e.strokeStyle=t,e.lineWidth=4,e.lineCap="round",e.stroke(),e.beginPath(),e.rect(27.5,11.5,42,24),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),e.beginPath(),e.rect(24,53.5,53,35),e.strokeStyle=t,e.lineWidth=2.5,e.stroke()},window.FloppyDiskIconAppearance.instances=new Set,window.FloppyDiskIconWdgt=function(e){this.color=e,FloppyDiskIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new FloppyDiskIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FloppyDiskIconWdgt,"name",{value:"FloppyDiskIconWdgt"}),window.FloppyDiskIconWdgt.__super__=window.IconMorph.prototype,window.FloppyDiskIconWdgt=extend(window.FloppyDiskIconWdgt,window.IconMorph),window.FloppyDiskIconWdgt.instances=new Set,window.FloraIconAppearance=function(e){this.morph=e,FloraIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FloraIconAppearance,"name",{value:"FloraIconAppearance"}),window.FloraIconAppearance.__super__=window.IconAppearance.prototype,window.FloraIconAppearance=extend(window.FloraIconAppearance,window.IconAppearance),window.FloraIconAppearance.prototype.paintFunction=function(e){var t;return t="rgb(0, 0, 0)",this.arc(e,101.5,46.5,77,77,193,259,!1),e.strokeStyle=t,e.lineWidth=3,e.stroke(),this.arc(e,25.5,46.5,77,77,281,347,!1),e.strokeStyle=t,e.lineWidth=3,e.stroke(),this.arc(e,71.5,16.5,62,62,357,183,!1),e.strokeStyle=t,e.lineWidth=3,e.stroke(),e.beginPath(),e.moveTo(101.5,73.5),e.lineTo(101.5,110.5),e.strokeStyle=t,e.lineWidth=3,e.stroke(),e.beginPath(),e.moveTo(48.5,108.5),e.lineTo(154.5,108.5),e.lineCap="round",e.strokeStyle=t,e.lineWidth=4,e.stroke(),e.beginPath(),e.moveTo(47.5,108.5),e.lineTo(54.5,133.5),e.lineTo(150.5,133.5),e.lineTo(154.5,109.5),e.lineCap="round",e.strokeStyle=t,e.lineWidth=4,e.stroke(),e.beginPath(),e.moveTo(57,134),e.lineTo(74,192),e.lineTo(132,192),e.lineTo(147,133),e.strokeStyle=t,e.lineWidth=4,e.stroke(),this.oval(e,99,7,4,4),e.fillStyle=t,e.fill(),this.oval(e,86,19,4,4),e.fillStyle=t,e.fill(),this.oval(e,86,32,4,4),e.fillStyle=t,e.fill(),this.oval(e,99,19,4,4),e.fillStyle=t,e.fill(),this.oval(e,112,19,4,4),e.fillStyle=t,e.fill(),this.oval(e,99,32,4,4),e.fillStyle=t,e.fill(),this.oval(e,112,32,4,4),e.fillStyle=t,e.fill(),this.oval(e,99,44,4,4),e.fillStyle=t,e.fill()},window.FloraIconAppearance.instances=new Set,window.FloraIconMorph=function(e){this.color=e,FloraIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new FloraIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FloraIconMorph,"name",{value:"FloraIconMorph"}),window.FloraIconMorph.__super__=window.IconMorph.prototype,window.FloraIconMorph=extend(window.FloraIconMorph,window.IconMorph),window.FloraIconMorph.prototype.colloquialName=function(){return"Flora icon"},window.FloraIconMorph.instances=new Set,window.FolderIconAppearance=function(e){this.morph=e,FolderIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FolderIconAppearance,"name",{value:"FolderIconAppearance"}),window.FolderIconAppearance.__super__=window.IconAppearance.prototype,window.FolderIconAppearance=extend(window.FolderIconAppearance,window.IconAppearance),window.FolderIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(89.18,21.7),e.lineTo(44.61,21.7),e.lineTo(44.61,19.44),e.bezierCurveTo(44.61,15.33,40,12,36.11,12),e.lineTo(12.5,12),e.bezierCurveTo(9,12,4,14.89,4,19),e.lineTo(4,79.24),e.bezierCurveTo(4,83.53,6.5,87,10.82,87),e.lineTo(89.18,87),e.bezierCurveTo(93.5,87,97,83.53,97,79.24),e.lineTo(97,29.45),e.bezierCurveTo(97,25.17,93.5,21.7,89.18,21.7),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(87.57,24.63),e.lineTo(42.23,24.63),e.lineTo(42.23,21.63),e.lineTo(42.23,21.63),e.bezierCurveTo(42.23,17.84,39.16,14.77,35.37,14.77),e.lineTo(12.85,14.77),e.lineTo(12.86,14.77),e.bezierCurveTo(9.07,14.77,6,17.84,6,21.63),e.lineTo(6,31.2),e.bezierCurveTo(6,31.29,6,31.38,6,31.51),e.bezierCurveTo(6,31.64,6,31.69,6,31.78),e.lineTo(6,77.68),e.lineTo(6,77.68),e.bezierCurveTo(6,81.63,9.2,84.83,13.15,84.83),e.lineTo(87.57,84.83),e.lineTo(87.57,84.83),e.bezierCurveTo(91.52,84.83,94.72,81.63,94.72,77.68),e.lineTo(94.72,31.77),e.lineTo(94.72,31.78),e.bezierCurveTo(94.72,27.83,91.52,24.63,87.57,24.63),e.closePath(),e.moveTo(12.85,17.27),e.lineTo(35.37,17.27),e.lineTo(35.36,17.27),e.bezierCurveTo(37.8,17.27,39.77,19.24,39.77,21.68),e.lineTo(39.77,24.67),e.lineTo(8.45,24.67),e.lineTo(8.45,21.67),e.lineTo(8.45,21.68),e.bezierCurveTo(8.45,19.24,10.42,17.27,12.86,17.27),e.lineTo(12.85,17.27),e.closePath(),e.moveTo(92.26,77.68),e.lineTo(92.26,77.67),e.bezierCurveTo(92.26,80.27,90.16,82.37,87.56,82.37),e.lineTo(13.14,82.37),e.lineTo(13.15,82.37),e.bezierCurveTo(10.55,82.37,8.45,80.27,8.45,77.67),e.lineTo(8.45,27.08),e.lineTo(87.57,27.08),e.lineTo(87.56,27.08),e.bezierCurveTo(90.16,27.08,92.26,29.18,92.26,31.78),e.lineTo(92.26,77.67),e.lineTo(92.26,77.68),e.closePath(),e.fillStyle=t,e.fill()},window.FolderIconAppearance.instances=new Set,window.FolderIconWdgt=function(e){this.color=e,FolderIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new FolderIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FolderIconWdgt,"name",{value:"FolderIconWdgt"}),window.FolderIconWdgt.__super__=window.IconMorph.prototype,window.FolderIconWdgt=extend(window.FolderIconWdgt,window.IconMorph),window.FolderIconWdgt.instances=new Set,window.FormatAsCodeIconAppearance=function(e){this.morph=e,FormatAsCodeIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FormatAsCodeIconAppearance,"name",{value:"FormatAsCodeIconAppearance"}),window.FormatAsCodeIconAppearance.__super__=window.IconAppearance.prototype,window.FormatAsCodeIconAppearance=extend(window.FormatAsCodeIconAppearance,window.IconAppearance),window.FormatAsCodeIconAppearance.prototype.paintFunction=function(e){var t,n;return n=WorldMorph.preferencesAndSettings.outlineColorString,t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),e.beginPath(),e.moveTo(60.58,28),e.lineTo(83,50.5),e.lineTo(60.58,73),e.strokeStyle=n,e.lineWidth=10,e.lineCap="round",e.lineJoin="round",e.stroke(),e.beginPath(),e.moveTo(39.42,28),e.lineTo(17,50.5),e.lineTo(39.42,73),e.strokeStyle=n,e.lineWidth=10,e.lineCap="round",e.lineJoin="round",e.stroke(),e.beginPath(),e.moveTo(60.58,28),e.lineTo(83,50.5),e.lineTo(60.58,73),e.strokeStyle=t,e.lineWidth=5,e.lineCap="round",e.lineJoin="round",e.stroke(),e.beginPath(),e.moveTo(39.42,28),e.lineTo(17,50.5),e.lineTo(39.42,73),e.strokeStyle=t,e.lineWidth=5,e.lineCap="round",e.lineJoin="round",e.stroke()},window.FormatAsCodeIconAppearance.instances=new Set,window.FormatAsCodeIconWdgt=function(e){this.color=e,FormatAsCodeIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new FormatAsCodeIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FormatAsCodeIconWdgt,"name",{value:"FormatAsCodeIconWdgt"}),window.FormatAsCodeIconWdgt.__super__=window.IconMorph.prototype,window.FormatAsCodeIconWdgt=extend(window.FormatAsCodeIconWdgt,window.IconMorph),window.FormatAsCodeIconWdgt.instances=new Set,window.FunctionPlotIconAppearance=function(e){this.morph=e,FunctionPlotIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FunctionPlotIconAppearance,"name",{value:"FunctionPlotIconAppearance"}),window.FunctionPlotIconAppearance.__super__=window.IconAppearance.prototype,window.FunctionPlotIconAppearance=extend(window.FunctionPlotIconAppearance,window.IconAppearance),window.FunctionPlotIconAppearance.prototype.paintFunction=function(e){var t;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),e.beginPath(),e.moveTo(7,8),e.lineTo(11.25,8),e.lineTo(11.25,88.76),e.lineTo(92,88.76),e.lineTo(92,93),e.lineTo(7,93),e.lineTo(7,8),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(20.06,79.26),e.lineTo(15.23,75.9),e.lineTo(26.06,56.31),e.bezierCurveTo(30.65,47.24,35.32,43.21,40.07,44.24),e.bezierCurveTo(43.14,44.9,54.09,61.41,57.5,57.37),e.bezierCurveTo(58.98,57.16,82.84,11.04,82.84,11.04),e.lineTo(87.75,14.04),e.bezierCurveTo(87.75,14.04,64.04,58.55,62.73,60.59),e.bezierCurveTo(61.13,62.57,59.42,63.75,57.1,63.64),e.bezierCurveTo(54.43,63.84,52,63,48.31,59.85),e.bezierCurveTo(44.62,56.71,41.39,52.14,38.2,51.57),e.bezierCurveTo(35,51,32.45,56.53,30.62,59.61),e.lineTo(20.06,79.26),e.closePath(),e.fillStyle=t,e.fill()},window.FunctionPlotIconAppearance.instances=new Set,window.FunctionPlotIconWdgt=function(e){this.color=e,FunctionPlotIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new FunctionPlotIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FunctionPlotIconWdgt,"name",{value:"FunctionPlotIconWdgt"}),window.FunctionPlotIconWdgt.__super__=window.IconMorph.prototype,window.FunctionPlotIconWdgt=extend(window.FunctionPlotIconWdgt,window.IconMorph),window.FunctionPlotIconWdgt.instances=new Set,ChildrenStainerMixin={onceAddedClassProperties:function(e){return this.addInstanceProperties(e,{setColor:function(e,t,n,o){var i,r,l,a,s;if(o||n!==this.connectionsCalculationToken){for(this.connectionsCalculationToken=null==n?getRandomInt(-2e4,2e4):n,window[this[arguments.callee.name+"_class_injected_in"]].__super__[arguments.callee.name].call(this,e,t,n,!0),a=[],i=0,r=(l=this.children).length;i<r;i++)s=l[i],a.push(s.setColor(e,t,n));return a}}})}},window.GenericObjectIconWdgt=function(e){this.icon=e,GenericObjectIconWdgt.__super__.constructor.call(this),this.objectIcon=new ObjectIconWdgt,this.add(this.objectIcon),null==this.icon&&(this.icon=new SimpleDropletWdgt("icon")),this.rawSetExtent(new Point(95,95)),this.add(this.icon),this.invalidateLayout(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.GenericObjectIconWdgt,"name",{value:"GenericObjectIconWdgt"}),window.GenericObjectIconWdgt.__super__=window.Widget.prototype,window.GenericObjectIconWdgt=extend(window.GenericObjectIconWdgt,window.Widget),window.GenericObjectIconWdgt.augmentWith(window.ChildrenStainerMixin,"GenericObjectIconWdgt"),window.GenericObjectIconWdgt.prototype.objectIcon=nil,window.GenericObjectIconWdgt.prototype.widthWithoutSpacing=function(){return Math.min(this.width(),this.height())},window.GenericObjectIconWdgt.prototype.rawResizeToWithoutSpacing=function(){return this.rawSetExtent(new Point(this.widthWithoutSpacing(),this.widthWithoutSpacing())),this.invalidateLayout()},window.GenericObjectIconWdgt.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return GenericObjectIconWdgt.__super__.initialiseDefaultWindowContentLayoutSpec.apply(this,arguments),this.layoutSpecDetails.canSetHeightFreely=!1},window.GenericObjectIconWdgt.prototype.rawSetWidthSizeHeightAccordingly=function(e){return this.rawResizeToWithoutSpacing(),this.rawSetExtent(new Point(e,e)),this.invalidateLayout()},window.GenericObjectIconWdgt.prototype.doLayout=function(e){var t,n,o,i,r;return null==e&&(null!=this.desiredExtent?(e=this.desiredExtent,this.desiredExtent=nil):e=this.extent(),null!=this.desiredPosition?(e=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(e),this.desiredPosition=nil):e=new Rectangle(this.position()).setBoundsWidthAndHeight(e)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(this.rawSetBounds(e),trackChanges.push(!1),n=this.height(),r=this.width(),i=Math.min(r,n),t=(o=this.topLeft()).add(new Point(r/2,n/2)),o=(o=t).subtract(new Point(i/2,i/2)),this.icon.setExtent(new Point(50*i/100,50*i/100).round()),this.icon.fullRawMoveTo(t.subtract(new Point(25*i/100,25*i/100)).round()),this.objectIcon.setExtent(new Point(i,i).round()),this.objectIcon.fullRawMoveTo(o),trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0)},window.GenericObjectIconWdgt.instances=new Set,window.GenericPanelIconAppearance=function(e){this.morph=e,GenericPanelIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.GenericPanelIconAppearance,"name",{value:"GenericPanelIconAppearance"}),window.GenericPanelIconAppearance.__super__=window.IconAppearance.prototype,window.GenericPanelIconAppearance=extend(window.GenericPanelIconAppearance,window.IconAppearance),window.GenericPanelIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,"rgb(255, 255, 255)","rgb(170, 170, 170)",e.beginPath(),e.moveTo(87.54,18),e.lineTo(13.57,18),e.bezierCurveTo(10.05,18,7.12,20.67,7.12,23.87),e.lineTo(7,76.13),e.bezierCurveTo(7,79.33,9.94,82,13.46,82),e.lineTo(87.43,82),e.bezierCurveTo(90.95,82,93.88,79.33,93.88,76.13),e.lineTo(94,23.87),e.bezierCurveTo(94,20.67,91.06,18,87.54,18),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(85.84,20),e.lineTo(15.27,20),e.bezierCurveTo(11.91,20,9.11,22.5,9.11,25.5),e.lineTo(9,74.5),e.bezierCurveTo(9,77.5,11.8,80,15.16,80),e.lineTo(85.73,80),e.bezierCurveTo(89.09,80,91.89,77.5,91.89,74.5),e.lineTo(92,25.5),e.bezierCurveTo(92,22.5,89.2,20,85.84,20),e.closePath(),e.moveTo(88.53,74.5),e.bezierCurveTo(88.53,75.9,87.3,77,85.73,77),e.lineTo(15.16,77),e.bezierCurveTo(13.59,77,12.36,75.9,12.36,74.5),e.lineTo(12.47,25.5),e.bezierCurveTo(12.47,24.1,13.7,23,15.27,23),e.lineTo(85.84,23),e.bezierCurveTo(87.41,23,88.64,24.1,88.64,25.5),e.lineTo(88.53,74.5),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.rect(15,30,18,65),e.fillStyle=n,e.fill(),e.beginPath(),e.rect(17.5,40.5,13,13),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(21.5,44.5),e.lineTo(26.5,44.5),e.lineTo(26.5,49.5),e.lineTo(21.5,49.5),e.lineTo(21.5,44.5),e.closePath(),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.rect(17.5,32.5,13,8),e.fillStyle="rgb(170, 170, 170)",e.fill(),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.rect(17.5,53.5,13,13),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(21.5,57.5),e.lineTo(26.5,57.5),e.lineTo(26.5,62.5),e.lineTo(21.5,62.5),e.lineTo(21.5,57.5),e.closePath(),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.rect(17.5,66.5,13,13),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(21.5,70.5),e.lineTo(26.5,70.5),e.lineTo(26.5,75.5),e.lineTo(21.5,75.5),e.lineTo(21.5,70.5),e.closePath(),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.rect(17.5,79.5,13,13),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(21.5,83.5),e.lineTo(26.5,83.5),e.lineTo(26.5,88.5),e.lineTo(21.5,88.5),e.lineTo(21.5,83.5),e.closePath(),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(19.5,36.5),e.lineTo(28.5,36.5),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=1,e.stroke(),e.beginPath(),e.rect(69,3,17.5,53),e.fillStyle=n,e.fill(),e.beginPath(),e.rect(71.5,13.5,13,13),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(75.5,17.5),e.lineTo(80.5,17.5),e.lineTo(80.5,22.5),e.lineTo(75.5,22.5),e.lineTo(75.5,17.5),e.closePath(),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.rect(71.5,5.5,13,8),e.fillStyle="rgb(170, 170, 170)",e.fill(),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.rect(71.5,26.5,13,13),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(75.5,30.5),e.lineTo(80.5,30.5),e.lineTo(80.5,35.5),e.lineTo(75.5,35.5),e.lineTo(75.5,30.5),e.closePath(),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.rect(71.5,39.5,13,13),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(75.5,43.5),e.lineTo(80.5,43.5),e.lineTo(80.5,48.5),e.lineTo(75.5,48.5),e.lineTo(75.5,43.5),e.closePath(),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(73.5,9.5),e.lineTo(82.5,9.5),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=1,e.stroke()},window.GenericPanelIconAppearance.instances=new Set,window.GenericPanelIconWdgt=function(e){this.color=e,GenericPanelIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new GenericPanelIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.GenericPanelIconWdgt,"name",{value:"GenericPanelIconWdgt"}),window.GenericPanelIconWdgt.__super__=window.IconMorph.prototype,window.GenericPanelIconWdgt=extend(window.GenericPanelIconWdgt,window.IconMorph),window.GenericPanelIconWdgt.instances=new Set,window.GenericShortcutIconWdgt=function(e){this.icon=e,GenericShortcutIconWdgt.__super__.constructor.call(this),null==this.icon&&(this.icon=new SimpleDropletWdgt("icon")),this.rawSetExtent(new Point(95,95)),this.add(this.icon),this.referenceArrowIcon=new ShortcutArrowIconWdgt,this.add(this.referenceArrowIcon),this.invalidateLayout(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.GenericShortcutIconWdgt,"name",{value:"GenericShortcutIconWdgt"}),window.GenericShortcutIconWdgt.__super__=window.Widget.prototype,window.GenericShortcutIconWdgt=extend(window.GenericShortcutIconWdgt,window.Widget),window.GenericShortcutIconWdgt.augmentWith(window.ChildrenStainerMixin,"GenericShortcutIconWdgt"),window.GenericShortcutIconWdgt.prototype.referenceArrowIcon=nil,window.GenericShortcutIconWdgt.prototype.widthWithoutSpacing=function(){return Math.min(this.width(),this.height())},window.GenericShortcutIconWdgt.prototype.rawResizeToWithoutSpacing=function(){return this.rawSetExtent(new Point(this.widthWithoutSpacing(),this.widthWithoutSpacing())),this.invalidateLayout()},window.GenericShortcutIconWdgt.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return GenericShortcutIconWdgt.__super__.initialiseDefaultWindowContentLayoutSpec.apply(this,arguments),this.layoutSpecDetails.canSetHeightFreely=!1},window.GenericShortcutIconWdgt.prototype.rawSetWidthSizeHeightAccordingly=function(e){return this.rawResizeToWithoutSpacing(),this.rawSetExtent(new Point(e,e)),this.invalidateLayout()},window.GenericShortcutIconWdgt.prototype.doLayout=function(e){var t,n,o,i;return null==e&&(null!=this.desiredExtent?(e=this.desiredExtent,this.desiredExtent=nil):e=this.extent(),null!=this.desiredPosition?(e=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(e),this.desiredPosition=nil):e=new Rectangle(this.position()).setBoundsWidthAndHeight(e)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(this.rawSetBounds(e),trackChanges.push(!1),t=this.height(),i=this.width(),o=Math.min(i,t),n=(n=(n=this.topLeft()).add(new Point(i/2,t/2))).subtract(new Point(o/2,o/2)),this.icon.setExtent(new Point(o,o).round()),this.icon.fullRawMoveTo(n.round()),this.referenceArrowIcon.setExtent(new Point(3*o/10,3*o/10).round()),this.referenceArrowIcon.fullRawMoveTo(n.add(new Point(0,7*o/10)).round()),trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0)},window.GenericShortcutIconWdgt.instances=new Set,window.GrayscalePalettePatchProgrammingIconAppearance=function(e){this.morph=e,GrayscalePalettePatchProgrammingIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.GrayscalePalettePatchProgrammingIconAppearance,"name",{value:"GrayscalePalettePatchProgrammingIconAppearance"}),window.GrayscalePalettePatchProgrammingIconAppearance.__super__=window.IconAppearance.prototype,window.GrayscalePalettePatchProgrammingIconAppearance=extend(window.GrayscalePalettePatchProgrammingIconAppearance,window.IconAppearance),window.GrayscalePalettePatchProgrammingIconAppearance.prototype.grayscaleGradient=nil,window.GrayscalePalettePatchProgrammingIconAppearance.prototype.paintFunction=function(e){var t,n;return n=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),null==this.grayscaleGradient&&(t=function(e){return e.addColorStop(0,"rgb(0, 0, 0)"),e.addColorStop(.81,"rgb(255, 255, 255)"),e},this.grayscaleGradient=t(e.createLinearGradient(79,82,21,82))),e.beginPath(),e.rect(21,19,58,63),e.fillStyle=this.grayscaleGradient,e.fill(),e.beginPath(),e.rect(20.5,17.5,60,66),e.strokeStyle=n,e.lineWidth=4,e.lineCap="round",e.lineJoin="round",e.stroke(),e.beginPath(),e.moveTo(81,51),e.lineTo(90,51),e.strokeStyle=n,e.lineWidth=2,e.stroke(),this.oval(e,88.5,48,6,6),e.fillStyle=n,e.fill()},window.GrayscalePalettePatchProgrammingIconAppearance.instances=new Set,window.GrayscalePalettePatchProgrammingIconWdgt=function(e){this.color=e,GrayscalePalettePatchProgrammingIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new GrayscalePalettePatchProgrammingIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.GrayscalePalettePatchProgrammingIconWdgt,"name",{value:"GrayscalePalettePatchProgrammingIconWdgt"}),window.GrayscalePalettePatchProgrammingIconWdgt.__super__=window.IconMorph.prototype,window.GrayscalePalettePatchProgrammingIconWdgt=extend(window.GrayscalePalettePatchProgrammingIconWdgt,window.IconMorph),window.GrayscalePalettePatchProgrammingIconWdgt.instances=new Set,window.HeartIconAppearance=function(e){this.morph=e,HeartIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.HeartIconAppearance,"name",{value:"HeartIconAppearance"}),window.HeartIconAppearance.__super__=window.IconAppearance.prototype,window.HeartIconAppearance=extend(window.HeartIconAppearance,window.IconAppearance),window.HeartIconAppearance.prototype.paintFunction=function(e){return"rgb(0, 0, 0)",e.strokeStyle="rgb(0, 0, 0)",e.fillStyle="rgb(0, 0, 0)",this.arc(e,11,21,99,99,136,326,!1),e.lineWidth=8,e.stroke(),this.arc(e,91,21,99,99,214,46,!1),e.lineWidth=8,e.stroke(),this.oval(e,98,41,4,4),e.fill(),e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(23,103),e.lineTo(93,178),e.lineWidth=8,e.stroke(),e.beginPath(),e.moveTo(178,103),e.lineTo(107,179),e.lineWidth=8,e.stroke(),this.arc(e,87.5,154.5,26,26,26,143,!1),e.lineWidth=7.5,e.stroke(),this.arc(e,33.5,44,53,54,181,273,!1),e.lineWidth=10,e.stroke(),this.oval(e,57,40,8.5,8.5),e.fill(),e.lineWidth=1,e.stroke(),this.oval(e,29.5,66,8.5,8.5),e.fill(),e.lineWidth=1,e.stroke()},window.HeartIconAppearance.instances=new Set,window.HeartIconMorph=function(e){this.color=e,HeartIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new HeartIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.HeartIconMorph,"name",{value:"HeartIconMorph"}),window.HeartIconMorph.__super__=window.IconMorph.prototype,window.HeartIconMorph=extend(window.HeartIconMorph,window.IconMorph),window.HeartIconMorph.prototype.colloquialName=function(){return"Heart icon"},window.HeartIconMorph.instances=new Set,window.IncreaseFontSizeIconAppearance=function(e){this.morph=e,IncreaseFontSizeIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.IncreaseFontSizeIconAppearance,"name",{value:"IncreaseFontSizeIconAppearance"}),window.IncreaseFontSizeIconAppearance.__super__=window.IconAppearance.prototype,window.IncreaseFontSizeIconAppearance=extend(window.IncreaseFontSizeIconAppearance,window.IconAppearance),window.IncreaseFontSizeIconAppearance.prototype.paintFunction=function(e){var t;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),e.beginPath(),e.moveTo(37.91,19.09),e.bezierCurveTo(37.42,17.84,36.06,17,34.52,17),e.bezierCurveTo(32.98,17,31.62,17.84,31.13,19.09),e.lineTo(9.41,74.96),e.bezierCurveTo(8.79,76.56,9.8,78.3,11.67,78.84),e.bezierCurveTo(13.55,79.38,15.56,78.51,16.19,76.9),e.lineTo(20.88,64.84),e.lineTo(47.93,64.84),e.bezierCurveTo(48.01,64.84,48.07,64.8,48.14,64.8),e.lineTo(52.85,76.9),e.bezierCurveTo(53.35,78.19,54.74,79,56.23,79),e.bezierCurveTo(56.61,79,56.99,78.95,57.36,78.84),e.bezierCurveTo(59.23,78.3,60.24,76.57,59.62,74.97),e.lineTo(37.91,19.09),e.closePath(),e.moveTo(23.26,58.71),e.lineTo(34.52,29.74),e.lineTo(45.78,58.71),e.lineTo(23.26,58.71),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(91.5,56.79),e.lineTo(74.97,40.34),e.lineTo(58.44,56.79),e.lineTo(91.5,56.79),e.closePath(),e.fillStyle=t,e.fill()},window.IncreaseFontSizeIconAppearance.instances=new Set,window.IncreaseFontSizeIconWdgt=function(e){this.color=e,IncreaseFontSizeIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new IncreaseFontSizeIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.IncreaseFontSizeIconWdgt,"name",{value:"IncreaseFontSizeIconWdgt"}),window.IncreaseFontSizeIconWdgt.__super__=window.IconMorph.prototype,window.IncreaseFontSizeIconWdgt=extend(window.IncreaseFontSizeIconWdgt,window.IconMorph),window.IncreaseFontSizeIconWdgt.instances=new Set,window.InternalIconAppearance=function(e){this.morph=e,InternalIconAppearance.__super__.constructor.apply(this,arguments),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.InternalIconAppearance,"name",{value:"InternalIconAppearance"}),window.InternalIconAppearance.__super__=window.IconAppearance.prototype,window.InternalIconAppearance=extend(window.InternalIconAppearance,window.IconAppearance),window.InternalIconAppearance.prototype.paintFunction=function(e){var t;return t=this.morph.color,e.beginPath(),e.moveTo(3,66),e.lineTo(15,66),e.lineTo(15,72.56),e.bezierCurveTo(15,80.02,20.97,85.08,28.46,85.08),e.lineTo(71.54,85.08),e.bezierCurveTo(79.03,85.08,85.12,79.02,85.12,71.56),e.lineTo(85.12,27.43),e.bezierCurveTo(85.12,19.97,79.03,13.91,71.54,13.91),e.lineTo(28.46,13.91),e.bezierCurveTo(20.97,13.91,15,18.97,15,26.43),e.lineTo(15,33),e.lineTo(3,33),e.lineTo(3,26.43),e.bezierCurveTo(3,12.46,14.42,2.08,28.46,2.08),e.lineTo(71.54,2.08),e.bezierCurveTo(85.57,2.08,97,13.46,97,27.43),e.lineTo(97,71.56),e.bezierCurveTo(97,85.54,85.57,96.92,71.54,96.92),e.lineTo(28.46,96.92),e.bezierCurveTo(14.42,96.92,3,86.54,3,72.56),e.lineTo(3,66),e.closePath(),e.fillStyle=t.toString(),e.fill(),e.beginPath(),e.moveTo(75.62,55.11),e.lineTo(43.42,55.11),e.lineTo(43.42,73.92),e.lineTo(9.44,49.19),e.lineTo(43.42,24.48),e.lineTo(43.42,43.29),e.lineTo(75.62,43.29),e.lineTo(75.62,55.11),e.closePath(),e.fillStyle=t.toString(),e.fill()},window.InternalIconAppearance.instances=new Set,window.InternalIconMorph=function(e){this.color=e,InternalIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new InternalIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.InternalIconMorph,"name",{value:"InternalIconMorph"}),window.InternalIconMorph.__super__=window.IconMorph.prototype,window.InternalIconMorph=extend(window.InternalIconMorph,window.IconMorph),window.InternalIconMorph.instances=new Set,window.ItalicIconAppearance=function(e){this.morph=e,ItalicIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ItalicIconAppearance,"name",{value:"ItalicIconAppearance"}),window.ItalicIconAppearance.__super__=window.IconAppearance.prototype,window.ItalicIconAppearance=extend(window.ItalicIconAppearance,window.IconAppearance),window.ItalicIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(37.67,4),e.lineTo(37.67,13.56),e.lineTo(51.84,13.56),e.bezierCurveTo(53.54,13.56,52.14,15.67,52.14,17.34),e.lineTo(33.06,83.66),e.bezierCurveTo(32.5,85.33,30.86,85.44,29.16,85.44),e.lineTo(16,85.44),e.lineTo(16,95),e.lineTo(64.33,95),e.lineTo(64.33,85.44),e.lineTo(51.16,85.44),e.bezierCurveTo(49.46,85.44,48.86,85.33,48.86,83.66),e.lineTo(68.94,15.34),e.bezierCurveTo(69.5,13.67,71.13,13.56,72.83,13.56),e.lineTo(86,13.56),e.lineTo(86,4),e.lineTo(37.67,4),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(40,6),e.lineTo(40,11.44),e.lineTo(53.75,11.44),e.bezierCurveTo(55.4,11.44,55.98,12.52,55.98,14.16),e.lineTo(35.53,84.84),e.bezierCurveTo(34.98,86.48,33.4,87.56,31.75,87.56),e.lineTo(18,87.56),e.lineTo(18,93),e.lineTo(62,93),e.lineTo(62,87.56),e.lineTo(48.25,87.56),e.bezierCurveTo(46.6,87.56,46.01,86.48,46.01,84.84),e.lineTo(66.47,14.16),e.bezierCurveTo(67.02,12.52,68.6,11.44,70.25,11.44),e.lineTo(84,11.44),e.lineTo(84,6),e.lineTo(40,6),e.closePath(),e.fillStyle=t,e.fill()},window.ItalicIconAppearance.instances=new Set,window.ItalicIconWdgt=function(e){this.color=e,ItalicIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ItalicIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ItalicIconWdgt,"name",{value:"ItalicIconWdgt"}),window.ItalicIconWdgt.__super__=window.IconMorph.prototype,window.ItalicIconWdgt=extend(window.ItalicIconWdgt,window.IconMorph),window.ItalicIconWdgt.instances=new Set,window.LittleUSAIconAppearance=function(e){this.morph=e,LittleUSAIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.LittleUSAIconAppearance,"name",{value:"LittleUSAIconAppearance"}),window.LittleUSAIconAppearance.__super__=window.IconAppearance.prototype,window.LittleUSAIconAppearance=extend(window.LittleUSAIconAppearance,window.IconAppearance),window.LittleUSAIconAppearance.prototype.paintFunction=function(e){var t;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),e.beginPath(),e.moveTo(96.16,27.93),e.lineTo(91.98,24.05),e.lineTo(90.7,24.59),e.lineTo(87.81,30.51),e.lineTo(82.78,32.02),e.lineTo(73.37,40.43),e.lineTo(72.08,39.78),e.lineTo(69.3,32.78),e.lineTo(60.1,28.03),e.lineTo(59.89,27.93),e.lineTo(50.36,25.88),e.lineTo(50.26,25.88),e.lineTo(8.64,22),e.lineTo(3.5,39.35),e.lineTo(6.07,52.92),e.lineTo(12.59,60.36),e.lineTo(27.36,66.29),e.lineTo(31.1,66.29),e.lineTo(36.56,71.89),e.lineTo(39.99,70.92),e.lineTo(47.05,78.35),e.lineTo(54.43,71.46),e.lineTo(62.88,71.78),e.lineTo(64.7,69.52),e.lineTo(73.58,69.09),e.lineTo(79.79,78.57),e.lineTo(80.64,79),e.lineTo(83.53,78.89),e.lineTo(84.07,77.71),e.lineTo(79.79,67.04),e.lineTo(88.03,54.65),e.lineTo(86.42,49.48),e.lineTo(88.13,41.93),e.lineTo(93.7,38.05),e.lineTo(92.73,33.53),e.lineTo(96.16,27.93),e.closePath(),e.strokeStyle=t,e.lineWidth=3,e.miterLimit=4,e.stroke()},window.LittleUSAIconAppearance.instances=new Set,window.LittleUSAIconWdgt=function(e){this.color=e,LittleUSAIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new LittleUSAIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.LittleUSAIconWdgt,"name",{value:"LittleUSAIconWdgt"}),window.LittleUSAIconWdgt.__super__=window.IconMorph.prototype,window.LittleUSAIconWdgt=extend(window.LittleUSAIconWdgt,window.IconMorph),window.LittleUSAIconWdgt.instances=new Set,window.LittleWorldIconAppearance=function(e){this.morph=e,LittleWorldIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.LittleWorldIconAppearance,"name",{value:"LittleWorldIconAppearance"}),window.LittleWorldIconAppearance.__super__=window.IconAppearance.prototype,window.LittleWorldIconAppearance=extend(window.LittleWorldIconAppearance,window.IconAppearance),window.LittleWorldIconAppearance.prototype.paintFunction=function(e){var t;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),e.beginPath(),e.moveTo(62,10),e.lineTo(65,15),e.lineTo(75,19),e.lineTo(73,22),e.lineTo(78,30),e.lineTo(78,44),e.lineTo(81,55),e.lineTo(89,52),e.lineTo(90,48),e.lineTo(93,52),e.strokeStyle=t,e.lineWidth=3.5,e.lineCap="round",e.lineJoin="round",e.stroke(),e.beginPath(),e.moveTo(43,10),e.lineTo(48.2,15.8),e.lineTo(50.5,18.3),e.lineTo(50.2,20.7),e.lineTo(46.6,21.8),e.lineTo(46.4,21.8),e.lineTo(39.3,24.6),e.lineTo(34.1,34.3),e.lineTo(27.8,33),e.lineTo(24.7,36.1),e.lineTo(26.6,38.5),e.lineTo(31.5,43.3),e.lineTo(33.3,43),e.lineTo(41.3,42.7),e.lineTo(44.7,43.9),e.lineTo(48,47),e.lineTo(55.1,47),e.lineTo(57.1,49.1),e.lineTo(61.1,52.1),e.lineTo(65,54.4),e.lineTo(66.7,58.6),e.lineTo(61.4,68.3),e.lineTo(57.7,71.6),e.lineTo(54.2,77.8),e.lineTo(51,79.5),e.lineTo(47.9,81.3),e.lineTo(48,85.8),e.lineTo(45,88.8),e.lineTo(42.8,75.5),e.lineTo(42.5,69.1),e.lineTo(38.9,65.7),e.lineTo(35.9,62),e.lineTo(34.9,56.1),e.lineTo(34.6,52.8),e.lineTo(31.8,50),e.lineTo(28.4,48.8),e.lineTo(23.5,45),e.lineTo(20.4,43.7),e.lineTo(13.9,36.6),e.lineTo(14,26),e.strokeStyle=t,e.lineWidth=3.5,e.miterLimit=4,e.lineCap="round",e.lineJoin="round",e.stroke(),this.oval(e,6,7,87,87),e.strokeStyle=t,e.lineWidth=3.5,e.stroke()},window.LittleWorldIconAppearance.instances=new Set,window.LittleWorldIconWdgt=function(e){this.color=e,LittleWorldIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new LittleWorldIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.LittleWorldIconWdgt,"name",{value:"LittleWorldIconWdgt"}),window.LittleWorldIconWdgt.__super__=window.IconMorph.prototype,window.LittleWorldIconWdgt=extend(window.LittleWorldIconWdgt,window.IconMorph),window.LittleWorldIconWdgt.instances=new Set,window.MapPinIconAppearance=function(e){this.morph=e,MapPinIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(70,100),this.specificationSize=new Point(70,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.MapPinIconAppearance,"name",{value:"MapPinIconAppearance"}),window.MapPinIconAppearance.__super__=window.IconAppearance.prototype,window.MapPinIconAppearance=extend(window.MapPinIconAppearance,window.IconAppearance),window.MapPinIconAppearance.prototype.paintFunction=function(e){return"rgb(255, 0, 0)",e.beginPath(),e.moveTo(35,3.5),e.bezierCurveTo(18,3.5,4.2,16.69,4.2,32.94),e.bezierCurveTo(4.2,37.95,5.48,42.65,7.73,46.74),e.bezierCurveTo(14.36,58.8,35,95.9,35,95.9),e.lineTo(62.06,46.94),e.bezierCurveTo(62.06,46.84,65.8,37.74,65.8,32.94),e.bezierCurveTo(65.8,16.69,52,3.5,35,3.5),e.closePath(),e.moveTo(35,40.24),e.bezierCurveTo(30.16,40.12,28.29,37.8,28.25,33.21),e.bezierCurveTo(28.21,28.62,31.13,26.59,35,26.55),e.bezierCurveTo(38.87,26.5,41.79,29.58,41.75,33.21),e.bezierCurveTo(41.71,36.84,39.84,40.36,35,40.24),e.closePath(),e.fillStyle="rgb(170, 170, 170)",e.fill(),e.beginPath(),e.moveTo(35,6.79),e.bezierCurveTo(20.07,6.79,7.96,18.9,7.96,33.83),e.bezierCurveTo(7.96,38.43,9.08,42.75,11.05,46.51),e.bezierCurveTo(16.88,57.59,35,91.67,35,91.67),e.bezierCurveTo(35,91.67,52.84,57.87,58.76,46.79),e.lineTo(58.76,46.7),e.bezierCurveTo(58.76,46.6,58.85,46.6,58.85,46.51),e.bezierCurveTo(58.95,46.41,58.95,46.32,59.04,46.13),e.bezierCurveTo(60.92,42.47,62.04,38.24,62.04,33.83),e.bezierCurveTo(62.04,18.9,49.93,6.79,35,6.79),e.closePath(),e.moveTo(35,43.22),e.bezierCurveTo(29.84,43.22,25.61,39,25.61,33.83),e.bezierCurveTo(25.61,28.67,29.84,24.44,35,24.44),e.bezierCurveTo(40.16,24.44,44.39,28.67,44.39,33.83),e.bezierCurveTo(44.39,39,40.16,43.22,35,43.22),e.closePath(),e.fillStyle="rgb(255, 0, 0)",e.fill()},window.MapPinIconAppearance.instances=new Set,window.MapPinIconWdgt=function(e){this.color=e,MapPinIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new MapPinIconAppearance(this),this.toolTipMessage="map pin","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.MapPinIconWdgt,"name",{value:"MapPinIconWdgt"}),window.MapPinIconWdgt.__super__=window.IconMorph.prototype,window.MapPinIconWdgt=extend(window.MapPinIconWdgt,window.IconMorph),window.MapPinIconWdgt.instances=new Set,window.ObjectIconAppearance=function(e){this.morph=e,ObjectIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ObjectIconAppearance,"name",{value:"ObjectIconAppearance"}),window.ObjectIconAppearance.__super__=window.IconAppearance.prototype,window.ObjectIconAppearance=extend(window.ObjectIconAppearance,window.IconAppearance),window.ObjectIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(85.5,20.73),e.lineTo(68.35,3.5),e.bezierCurveTo(68.03,3.18,67.6,3,67.14,3),e.lineTo(15.71,3),e.bezierCurveTo(14.77,3,14,3.77,14,4.72),e.lineTo(14,94.28),e.bezierCurveTo(14,95.23,14.77,96,15.71,96),e.lineTo(84.29,96),e.bezierCurveTo(85.23,96,86,95.23,86,94.28),e.lineTo(86,21.94),e.bezierCurveTo(86,21.49,85.82,21.05,85.5,20.73),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(83.64,22.31),e.lineTo(67.62,6.32),e.bezierCurveTo(67.32,6.01,66.91,5.85,66.49,5.85),e.lineTo(18.44,5.85),e.bezierCurveTo(17.56,5.85,16.84,6.56,16.84,7.45),e.lineTo(16.84,90.6),e.bezierCurveTo(16.84,91.49,17.56,92.2,18.44,92.2),e.lineTo(82.5,92.2),e.bezierCurveTo(83.39,92.2,84.11,91.49,84.11,90.6),e.lineTo(84.11,23.44),e.bezierCurveTo(84.11,23.01,83.94,22.61,83.64,22.31),e.closePath(),e.moveTo(68.09,11.31),e.lineTo(78.64,21.84),e.lineTo(68.09,21.84),e.lineTo(68.09,11.31),e.closePath(),e.moveTo(20.05,89.01),e.lineTo(20.05,9.05),e.lineTo(64.89,9.05),e.lineTo(64.89,23.44),e.bezierCurveTo(64.89,24.32,65.6,25.04,66.49,25.04),e.lineTo(80.9,25.04),e.lineTo(80.9,89.01),e.lineTo(20.05,89.01),e.closePath(),e.fillStyle=t,e.fill()},window.ObjectIconAppearance.instances=new Set,window.ObjectIconWdgt=function(e){this.color=e,ObjectIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ObjectIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ObjectIconWdgt,"name",{value:"ObjectIconWdgt"}),window.ObjectIconWdgt.__super__=window.IconMorph.prototype,window.ObjectIconWdgt=extend(window.ObjectIconWdgt,window.IconMorph),window.ObjectIconWdgt.instances=new Set,window.PaintBucketIconAppearance=function(e){this.morph=e,PaintBucketIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PaintBucketIconAppearance,"name",{value:"PaintBucketIconAppearance"}),window.PaintBucketIconAppearance.__super__=window.IconAppearance.prototype,window.PaintBucketIconAppearance=extend(window.PaintBucketIconAppearance,window.IconAppearance),window.PaintBucketIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(82.94,30.28),e.lineTo(82.94,22.75),e.bezierCurveTo(82.94,22.54,82.94,22.34,82.94,22.23),e.bezierCurveTo(82.94,14.29,66.23,10,50.47,10),e.bezierCurveTo(34.71,10,18,14.29,18,22.23),e.bezierCurveTo(18,22.44,18,22.65,18,22.75),e.lineTo(18,80.46),e.bezierCurveTo(18,80.56,18,80.66,18,80.77),e.bezierCurveTo(18,88.71,34.71,93,50.47,93),e.bezierCurveTo(66.23,93,82.94,88.71,82.94,80.77),e.bezierCurveTo(82.94,80.66,82.94,80.56,82.94,80.46),e.lineTo(82.94,71.94),e.bezierCurveTo(84.74,72.36,86.33,72.57,87.81,72.57),e.bezierCurveTo(90.98,72.57,93.52,70.73,95.32,68.96),e.bezierCurveTo(101.56,62.79,96.69,47.63,82.94,30.28),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(80.88,31.06),e.lineTo(80.88,23.98),e.bezierCurveTo(80.88,23.79,80.88,23.59,80.88,23.49),e.bezierCurveTo(80.88,16.03,65.22,12,50.44,12),e.bezierCurveTo(35.67,12,20,16.03,20,23.49),e.bezierCurveTo(20,23.69,20,23.89,20,23.98),e.lineTo(20,78.21),e.bezierCurveTo(20,78.31,20,78.41,20,78.51),e.bezierCurveTo(20,85.97,35.67,90,50.44,90),e.bezierCurveTo(65.22,90,80.88,85.97,80.88,78.51),e.bezierCurveTo(80.88,78.41,80.88,78.31,80.88,78.21),e.lineTo(80.88,69.27),e.bezierCurveTo(82.57,69.66,84.06,69.86,85.45,69.86),e.bezierCurveTo(88.42,69.86,90.8,69.08,92.49,67.41),e.bezierCurveTo(98.34,61.61,93.78,47.37,80.88,31.06),e.closePath(),e.moveTo(30.61,17.8),e.bezierCurveTo(35.87,15.93,43.01,14.95,50.54,14.95),e.bezierCurveTo(58.08,14.95,65.12,15.93,70.47,17.8),e.bezierCurveTo(74.84,19.27,77.61,21.23,77.91,23.1),e.lineTo(77.91,23.1),e.lineTo(77.91,23.69),e.bezierCurveTo(77.61,25.46,75.13,27.32,70.97,28.8),e.bezierCurveTo(65.51,26.93,58.18,25.95,50.54,25.95),e.bezierCurveTo(42.81,25.95,35.67,26.93,30.11,28.8),e.bezierCurveTo(28.23,28.11,26.74,27.32,25.55,26.54),e.lineTo(25.55,26.54),e.bezierCurveTo(24.56,25.85,23.47,24.87,23.27,23.69),e.lineTo(23.27,23.1),e.lineTo(23.27,23.1),e.bezierCurveTo(23.47,21.33,26.25,19.37,30.61,17.8),e.closePath(),e.moveTo(37.15,42.16),e.bezierCurveTo(37.15,40.78,35.37,39.21,33.19,39.21),e.bezierCurveTo(30.91,39.21,30.02,40.98,29.92,42.16),e.lineTo(29.92,60.92),e.bezierCurveTo(29.92,62.89,29.32,62.89,28.92,62.89),e.bezierCurveTo(28.63,62.89,27.73,62.89,27.73,60.92),e.lineTo(27.73,31.16),e.bezierCurveTo(30.71,32.34,34.38,33.32,38.44,33.91),e.bezierCurveTo(38.25,34.5,38.25,35.09,38.25,35.18),e.lineTo(38.25,49.53),e.bezierCurveTo(38.25,49.82,37.95,50.12,37.65,50.12),e.bezierCurveTo(37.35,50.12,37.06,49.82,37.06,49.53),e.lineTo(37.15,42.16),e.lineTo(37.15,42.16),e.closePath(),e.moveTo(42.41,31.45),e.bezierCurveTo(38.84,31.06,35.47,30.47,32.69,29.68),e.bezierCurveTo(37.75,28.31,44,27.52,50.54,27.52),e.bezierCurveTo(57.09,27.52,63.33,28.31,68.39,29.68),e.bezierCurveTo(63.43,31.06,57.19,31.84,50.54,31.84),e.bezierCurveTo(47.76,31.84,45.09,31.65,42.41,31.45),e.closePath(),e.moveTo(77.81,76.35),e.bezierCurveTo(76.62,77.92,74.04,79.49,70.37,80.67),e.bezierCurveTo(69.98,80.77,69.78,81.26,69.88,81.65),e.bezierCurveTo(69.98,81.94,70.27,82.14,70.57,82.14),e.bezierCurveTo(70.67,82.14,70.77,82.14,70.77,82.14),e.bezierCurveTo(73.74,81.16,76.12,79.88,77.71,78.6),e.lineTo(77.71,78.7),e.bezierCurveTo(77.61,80.57,74.84,82.53,70.27,84.11),e.bezierCurveTo(65.02,85.97,57.88,86.95,50.34,86.95),e.bezierCurveTo(42.81,86.95,35.77,85.97,30.41,84.11),e.bezierCurveTo(25.85,82.53,23.17,80.57,22.97,78.7),e.bezierCurveTo(22.97,78.6,22.97,78.6,22.97,78.51),e.bezierCurveTo(27.44,82.34,37.85,84.99,50.24,84.99),e.bezierCurveTo(51.14,84.99,52.13,84.99,53.02,84.99),e.bezierCurveTo(53.42,84.99,53.81,84.6,53.81,84.2),e.bezierCurveTo(53.81,83.81,53.42,83.42,53.02,83.42),e.bezierCurveTo(52.13,83.42,51.24,83.42,50.34,83.42),e.bezierCurveTo(36.16,83.42,25.95,80.08,23.07,76.35),e.lineTo(23.07,28.7),e.bezierCurveTo(23.07,28.7,23.17,28.7,23.17,28.8),e.bezierCurveTo(23.27,28.9,23.37,28.99,23.47,29.09),e.bezierCurveTo(23.97,29.49,24.66,30.27,24.66,30.76),e.lineTo(24.66,61.02),e.bezierCurveTo(24.66,64.07,26.35,66.03,28.92,66.03),e.bezierCurveTo(30.11,66.03,32.99,65.54,32.99,61.02),e.lineTo(32.99,42.36),e.bezierCurveTo(32.99,42.36,33.09,42.36,33.19,42.36),e.bezierCurveTo(33.58,42.36,33.88,42.55,34.08,42.65),e.lineTo(34.08,49.62),e.bezierCurveTo(34.08,51.59,35.77,53.26,37.75,53.26),e.bezierCurveTo(39.73,53.26,41.42,51.59,41.42,49.62),e.lineTo(41.42,35.28),e.bezierCurveTo(41.42,35.09,41.52,34.69,41.72,34.5),e.bezierCurveTo(41.82,34.4,42.01,34.4,42.21,34.4),e.lineTo(42.21,34.4),e.bezierCurveTo(44.89,34.69,47.76,34.79,50.54,34.79),e.bezierCurveTo(61.25,34.79,72.55,32.63,77.81,28.6),e.lineTo(77.81,65.05),e.bezierCurveTo(76.42,64.56,74.84,63.87,73.25,63.18),e.bezierCurveTo(64.52,58.96,54.71,51.69,45.48,42.55),e.bezierCurveTo(44.89,41.96,43.9,41.96,43.3,42.55),e.bezierCurveTo(42.71,43.14,42.71,44.12,43.3,44.71),e.bezierCurveTo(52.72,54.05,62.94,61.61,71.96,65.93),e.bezierCurveTo(74.04,66.91,76.03,67.7,77.81,68.29),e.lineTo(77.81,76.35),e.closePath(),e.moveTo(90.3,65.15),e.bezierCurveTo(88.52,66.91,85.25,67.21,80.88,66.13),e.lineTo(80.88,36.17),e.bezierCurveTo(85.35,42.26,88.62,48.15,90.4,53.16),e.bezierCurveTo(92.49,58.86,92.39,63.08,90.3,65.15),e.closePath(),e.fillStyle=t,e.fill()},window.PaintBucketIconAppearance.instances=new Set,window.PaintBucketIconWdgt=function(e){this.color=e,PaintBucketIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new PaintBucketIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PaintBucketIconWdgt,"name",{value:"PaintBucketIconWdgt"}),window.PaintBucketIconWdgt.__super__=window.IconMorph.prototype,window.PaintBucketIconWdgt=extend(window.PaintBucketIconWdgt,window.IconMorph),window.PaintBucketIconWdgt.instances=new Set,window.PatchProgrammingComponentsIconAppearance=function(e){this.morph=e,PatchProgrammingComponentsIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PatchProgrammingComponentsIconAppearance,"name",{value:"PatchProgrammingComponentsIconAppearance"}),window.PatchProgrammingComponentsIconAppearance.__super__=window.IconAppearance.prototype,window.PatchProgrammingComponentsIconAppearance=extend(window.PatchProgrammingComponentsIconAppearance,window.IconAppearance),window.PatchProgrammingComponentsIconAppearance.prototype.paintFunction=function(e){var t;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),e.beginPath(),e.rect(66.5,69.5,22,24),e.strokeStyle=t,e.lineWidth=4,e.lineCap="round",e.lineJoin="round",e.stroke(),e.beginPath(),e.moveTo(64.59,72.77),e.lineTo(60.59,72.77),e.strokeStyle=t,e.lineWidth=2,e.stroke(),e.beginPath(),e.moveTo(64.59,89.5),e.lineTo(60.59,89.5),e.strokeStyle=t,e.lineWidth=2,e.stroke(),this.oval(e,57.5,87.6,4,4),e.fillStyle=t,e.fill(),this.oval(e,57.5,70.7,4,4),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(94.05,72.77),e.lineTo(90.41,72.77),e.strokeStyle=t,e.lineWidth=2,e.stroke(),e.beginPath(),e.moveTo(94.05,89.5),e.lineTo(90.41,89.5),e.strokeStyle=t,e.lineWidth=2,e.stroke(),this.oval(e,93.5,87.5,4,4),e.fillStyle=t,e.fill(),this.oval(e,93.5,70.7,4,4),e.fillStyle=t,e.fill(),e.beginPath(),e.rect(13.5,8.5,48,50),e.strokeStyle=t,e.lineWidth=4,e.lineCap="round",e.lineJoin="round",e.stroke(),e.beginPath(),e.moveTo(13.55,15.32),e.lineTo(5.82,15.32),e.strokeStyle=t,e.lineWidth=2,e.stroke(),e.beginPath(),e.moveTo(13.16,50.17),e.lineTo(5.43,50.17),e.strokeStyle=t,e.lineWidth=2,e.stroke(),this.oval(e,3.5,47.5,5,5),e.fillStyle=t,e.fill(),this.oval(e,3.5,12.5,5,5),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(68.41,15.32),e.lineTo(60.68,15.32),e.strokeStyle=t,e.lineWidth=2,e.stroke(),e.beginPath(),e.moveTo(68.02,50.17),e.lineTo(60.3,50.17),e.strokeStyle=t,e.lineWidth=2,e.stroke(),this.oval(e,66.5,47.5,5,5),e.fillStyle=t,e.fill(),this.oval(e,66.5,12.5,5,5),e.fillStyle=t,e.fill()},window.PatchProgrammingComponentsIconAppearance.instances=new Set,window.PatchProgrammingComponentsIconWdgt=function(e){this.color=e,PatchProgrammingComponentsIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new PatchProgrammingComponentsIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PatchProgrammingComponentsIconWdgt,"name",{value:"PatchProgrammingComponentsIconWdgt"}),window.PatchProgrammingComponentsIconWdgt.__super__=window.IconMorph.prototype,window.PatchProgrammingComponentsIconWdgt=extend(window.PatchProgrammingComponentsIconWdgt,window.IconMorph),window.PatchProgrammingComponentsIconWdgt.instances=new Set,window.PatchProgrammingIconAppearance=function(e){this.morph=e,PatchProgrammingIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PatchProgrammingIconAppearance,"name",{value:"PatchProgrammingIconAppearance"}),window.PatchProgrammingIconAppearance.__super__=window.IconAppearance.prototype,window.PatchProgrammingIconAppearance=extend(window.PatchProgrammingIconAppearance,window.IconAppearance),window.PatchProgrammingIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(87.54,18),e.lineTo(13.57,18),e.bezierCurveTo(10.05,18,7.12,20.67,7.12,23.87),e.lineTo(7,76.13),e.bezierCurveTo(7,79.33,9.94,82,13.46,82),e.lineTo(87.43,82),e.bezierCurveTo(90.95,82,93.88,79.33,93.88,76.13),e.lineTo(94,23.87),e.bezierCurveTo(94,20.67,91.06,18,87.54,18),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(85.84,20),e.lineTo(15.27,20),e.bezierCurveTo(11.91,20,9.11,22.5,9.11,25.5),e.lineTo(9,74.5),e.bezierCurveTo(9,77.5,11.8,80,15.16,80),e.lineTo(85.73,80),e.bezierCurveTo(89.09,80,91.89,77.5,91.89,74.5),e.lineTo(92,25.5),e.bezierCurveTo(92,22.5,89.2,20,85.84,20),e.closePath(),e.moveTo(88.53,74.5),e.bezierCurveTo(88.53,75.9,87.3,77,85.73,77),e.lineTo(15.16,77),e.bezierCurveTo(13.59,77,12.36,75.9,12.36,74.5),e.lineTo(12.47,25.5),e.bezierCurveTo(12.47,24.1,13.7,23,15.27,23),e.lineTo(85.84,23),e.bezierCurveTo(87.41,23,88.64,24.1,88.64,25.5),e.lineTo(88.53,74.5),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(30.43,50),e.lineTo(68.41,50),e.strokeStyle=t,e.lineWidth=3.5,e.lineCap="round",e.stroke(),this.oval(e,20,40,20,20),e.strokeStyle=t,e.lineWidth=3.5,e.stroke(),e.beginPath(),e.rect(59,40,20,20),e.strokeStyle=t,e.lineWidth=3.5,e.lineJoin="round",e.stroke()},window.PatchProgrammingIconAppearance.instances=new Set,window.PatchProgrammingIconWdgt=function(e){this.color=e,PatchProgrammingIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new PatchProgrammingIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PatchProgrammingIconWdgt,"name",{value:"PatchProgrammingIconWdgt"}),window.PatchProgrammingIconWdgt.__super__=window.IconMorph.prototype,window.PatchProgrammingIconWdgt=extend(window.PatchProgrammingIconWdgt,window.IconMorph),window.PatchProgrammingIconWdgt.instances=new Set,window.Pencil2IconAppearance=function(){window.Pencil2IconAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Pencil2IconAppearance,"name",{value:"Pencil2IconAppearance"}),window.Pencil2IconAppearance.__super__=window.IconAppearance.prototype,window.Pencil2IconAppearance=extend(window.Pencil2IconAppearance,window.IconAppearance),window.Pencil2IconAppearance.prototype.paintFunction=function(e){var t;return t=this.morph.color,e.beginPath(),e.moveTo(130.06,5.85),e.lineTo(130.08,5.84),e.bezierCurveTo(129.08,6.22,128.25,6.92,127.7,7.83),e.lineTo(42.95,154.23),e.lineTo(42.94,154.24),e.bezierCurveTo(42.44,155.11,42.23,156.11,42.33,157.11),e.lineTo(45.8,189.26),e.lineTo(45.8,189.24),e.bezierCurveTo(46.07,191.86,48.42,193.75,51.04,193.48),e.bezierCurveTo(51.54,193.43,52.03,193.3,52.49,193.09),e.lineTo(82.12,179.94),e.lineTo(82.11,179.95),e.bezierCurveTo(83.01,179.57,83.77,178.92,84.29,178.09),e.lineTo(169.04,31.69),e.lineTo(169.06,31.67),e.bezierCurveTo(170.37,29.39,169.59,26.48,167.31,25.17),e.bezierCurveTo(167.28,25.15,167.26,25.14,167.24,25.13),e.lineTo(134.23,6.12),e.lineTo(134.25,6.13),e.bezierCurveTo(132.98,5.4,131.44,5.29,130.08,5.84),e.lineTo(130.06,5.85),e.closePath(),e.moveTo(133.54,16.77),e.lineTo(158.31,31.1),e.lineTo(152.4,41.3),e.lineTo(127.58,27.07),e.lineTo(133.54,16.77),e.closePath(),e.moveTo(122.79,35.35),e.lineTo(147.55,49.67),e.lineTo(76.8,171.9),e.lineTo(54.59,181.76),e.lineTo(52.03,157.57),e.lineTo(122.79,35.35),e.closePath(),e.fillStyle=t.toString(),e.fill()},window.Pencil2IconAppearance.instances=new Set,window.Pencil2IconMorph=function(e){this.color=e,Pencil2IconMorph.__super__.constructor.apply(this,arguments),this.appearance=new Pencil2IconAppearance(this),this.toolTipMessage="pencil","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Pencil2IconMorph,"name",{value:"Pencil2IconMorph"}),window.Pencil2IconMorph.__super__=window.IconMorph.prototype,window.Pencil2IconMorph=extend(window.Pencil2IconMorph,window.IconMorph),window.Pencil2IconMorph.instances=new Set,window.PencilIconAppearance=function(){window.PencilIconAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PencilIconAppearance,"name",{value:"PencilIconAppearance"}),window.PencilIconAppearance.__super__=window.IconAppearance.prototype,window.PencilIconAppearance=extend(window.PencilIconAppearance,window.IconAppearance),window.PencilIconAppearance.prototype.paintFunction=function(e){var t;return t=this.morph.color,e.save(),e.translate(90.18,101.32),e.rotate(13.16*Math.PI/180),e.beginPath(),e.moveTo(23.88,-86.27),e.lineTo(74.38,-51.12),e.lineTo(88.21,-73.65),e.lineTo(86.24,-90.9),e.lineTo(54.61,-112.65),e.lineTo(37.52,-108.5),e.lineTo(23.88,-86.27),e.closePath(),e.moveTo(16.57,-74.36),e.lineTo(67.23,-39.53),e.lineTo(-16.17,96.43),e.lineTo(-62.07,112.55),e.lineTo(-66.83,61.61),e.lineTo(16.57,-74.36),e.closePath(),e.fillStyle=t.toString(),e.fill(),e.restore()},window.PencilIconAppearance.instances=new Set,window.PencilIconMorph=function(e){this.color=e,PencilIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new PencilIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PencilIconMorph,"name",{value:"PencilIconMorph"}),window.PencilIconMorph.__super__=window.IconMorph.prototype,window.PencilIconMorph=extend(window.PencilIconMorph,window.IconMorph),window.PencilIconMorph.instances=new Set,window.Plot3DIconAppearance=function(e){this.morph=e,Plot3DIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Plot3DIconAppearance,"name",{value:"Plot3DIconAppearance"}),window.Plot3DIconAppearance.__super__=window.IconAppearance.prototype,window.Plot3DIconAppearance=extend(window.Plot3DIconAppearance,window.IconAppearance),window.Plot3DIconAppearance.prototype.paintFunction=function(e){var t;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),e.beginPath(),e.moveTo(50.98,58.41),e.lineTo(50.98,30.88),e.bezierCurveTo(50.98,30.06,50.32,29.39,49.5,29.39),e.bezierCurveTo(48.68,29.39,48.02,30.06,48.02,30.88),e.lineTo(48.02,58.44),e.lineTo(21.92,77.36),e.bezierCurveTo(21.26,77.84,21.11,78.78,21.6,79.45),e.bezierCurveTo(22.07,80.12,23.01,80.27,23.67,79.79),e.lineTo(49.53,61.03),e.lineTo(76.85,79.81),e.bezierCurveTo(77.1,79.97,77.39,80.06,77.68,80.06),e.bezierCurveTo(78.16,80.06,78.62,79.84,78.91,79.4),e.bezierCurveTo(79.37,78.72,79.21,77.79,78.53,77.33),e.lineTo(50.98,58.41),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(48.02,19.57),e.lineTo(48.02,23.43),e.bezierCurveTo(48.02,24.25,48.68,24.92,49.5,24.92),e.bezierCurveTo(50.32,24.92,50.98,24.25,50.98,23.43),e.lineTo(50.98,19.57),e.lineTo(55,15.53),e.bezierCurveTo(55.58,14.95,55.58,14.01,55,13.43),e.bezierCurveTo(54.42,12.85,53.49,12.85,52.91,13.43),e.lineTo(49.5,16.86),e.lineTo(46.1,13.45),e.bezierCurveTo(45.52,12.87,44.59,12.87,44.01,13.45),e.bezierCurveTo(43.43,14.03,43.43,14.97,44.01,15.55),e.lineTo(48.02,19.57),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(90.16,83.04),e.lineTo(93.55,79.63),e.bezierCurveTo(94.13,79.05,94.13,78.11,93.55,77.53),e.bezierCurveTo(92.98,76.94,92.04,76.94,91.46,77.53),e.lineTo(88.07,80.94),e.lineTo(84.67,77.53),e.bezierCurveTo(84.09,76.94,83.16,76.94,82.58,77.53),e.bezierCurveTo(82,78.11,82,79.05,82.58,79.63),e.lineTo(85.97,83.04),e.lineTo(82.58,86.45),e.bezierCurveTo(82,87.03,82,87.97,82.58,88.55),e.bezierCurveTo(82.86,88.85,83.23,89,83.62,89),e.bezierCurveTo(84,89,84.37,88.85,84.67,88.57),e.lineTo(88.07,85.14),e.lineTo(91.46,88.55),e.bezierCurveTo(91.76,88.85,92.13,89,92.52,89),e.bezierCurveTo(92.9,89,93.27,88.85,93.57,88.57),e.bezierCurveTo(94.15,87.99,94.15,87.05,93.57,86.47),e.lineTo(90.16,83.04),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(16.75,79.14),e.bezierCurveTo(16.9,78.78,16.9,78.36,16.75,78),e.bezierCurveTo(16.6,77.64,16.3,77.35,15.95,77.2),e.bezierCurveTo(15.77,77.12,15.58,77.08,15.38,77.08),e.lineTo(6.48,77.08),e.bezierCurveTo(5.67,77.08,5,77.75,5,78.57),e.bezierCurveTo(5,79.39,5.67,80.06,6.48,80.06),e.lineTo(11.81,80.06),e.lineTo(5.44,86.45),e.bezierCurveTo(5.31,86.59,5.19,86.75,5.12,86.94),e.bezierCurveTo(4.97,87.3,4.97,87.72,5.12,88.08),e.bezierCurveTo(5.27,88.43,5.56,88.73,5.92,88.88),e.bezierCurveTo(6.1,88.96,6.29,89,6.48,89),e.lineTo(15.38,89),e.bezierCurveTo(16.2,89,16.87,88.33,16.87,87.51),e.bezierCurveTo(16.87,86.69,16.2,86.02,15.38,86.02),e.lineTo(10.06,86.02),e.lineTo(16.42,79.63),e.bezierCurveTo(16.57,79.49,16.67,79.31,16.75,79.14),e.closePath(),e.fillStyle=t,e.fill()},window.Plot3DIconAppearance.instances=new Set,window.Plot3DIconWdgt=function(e){this.color=e,Plot3DIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new Plot3DIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Plot3DIconWdgt,"name",{value:"Plot3DIconWdgt"}),window.Plot3DIconWdgt.__super__=window.IconMorph.prototype,window.Plot3DIconWdgt=extend(window.Plot3DIconWdgt,window.IconMorph),window.Plot3DIconWdgt.instances=new Set,window.ScatterPlotIconAppearance=function(e){this.morph=e,ScatterPlotIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ScatterPlotIconAppearance,"name",{value:"ScatterPlotIconAppearance"}),window.ScatterPlotIconAppearance.__super__=window.IconAppearance.prototype,window.ScatterPlotIconAppearance=extend(window.ScatterPlotIconAppearance,window.IconAppearance),window.ScatterPlotIconAppearance.prototype.paintFunction=function(e){var t;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),e.beginPath(),e.moveTo(7,8),e.lineTo(11.25,8),e.lineTo(11.25,88.76),e.lineTo(92,88.76),e.lineTo(92,93),e.lineTo(7,93),e.lineTo(7,8),e.closePath(),e.fillStyle=t,e.fill(),this.oval(e,35,25,5,5),e.fillStyle=t,e.fill(),this.oval(e,18,39,5,5),e.fillStyle=t,e.fill(),this.oval(e,16,56,5,5),e.fillStyle=t,e.fill(),this.oval(e,15,69,5,5),e.fillStyle=t,e.fill(),this.oval(e,28,79,5,5),e.fillStyle=t,e.fill(),this.oval(e,39,73,5,5),e.fillStyle=t,e.fill(),this.oval(e,51,71,5,5),e.fillStyle=t,e.fill(),this.oval(e,66,74,5,5),e.fillStyle=t,e.fill(),this.oval(e,41,62,5,5),e.fillStyle=t,e.fill(),this.oval(e,36,49,5,5),e.fillStyle=t,e.fill(),this.oval(e,38,39,5,5),e.fillStyle=t,e.fill(),this.oval(e,51,34,5,5),e.fillStyle=t,e.fill(),this.oval(e,51,24,5,5),e.fillStyle=t,e.fill(),this.oval(e,51,54,5,5),e.fillStyle=t,e.fill(),this.oval(e,63,61,5,5),e.fillStyle=t,e.fill(),this.oval(e,72,50,5,5),e.fillStyle=t,e.fill(),this.oval(e,65,41,5,5),e.fillStyle=t,e.fill(),this.oval(e,85,41,5,5),e.fillStyle=t,e.fill(),this.oval(e,78,32,5,5),e.fillStyle=t,e.fill(),this.oval(e,85,23,5,5),e.fillStyle=t,e.fill(),this.oval(e,80,14,5,5),e.fillStyle=t,e.fill(),this.oval(e,69,17,5,5),e.fillStyle=t,e.fill()},window.ScatterPlotIconAppearance.instances=new Set,window.ScatterPlotIconWdgt=function(e){this.color=e,ScatterPlotIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ScatterPlotIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ScatterPlotIconWdgt,"name",{value:"ScatterPlotIconWdgt"}),window.ScatterPlotIconWdgt.__super__=window.IconMorph.prototype,window.ScatterPlotIconWdgt=extend(window.ScatterPlotIconWdgt,window.IconMorph),window.ScatterPlotIconWdgt.instances=new Set,window.ScooterIconAppearance=function(e){this.morph=e,ScooterIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ScooterIconAppearance,"name",{value:"ScooterIconAppearance"}),window.ScooterIconAppearance.__super__=window.IconAppearance.prototype,window.ScooterIconAppearance=extend(window.ScooterIconAppearance,window.IconAppearance),window.ScooterIconAppearance.prototype.paintFunction=function(e){return"rgb(0, 0, 0)",this.oval(e,10.5,136.5,34.5,34.5),e.strokeStyle="rgb(0, 0, 0)",e.lineWidth=10,e.stroke(),this.oval(e,154,135.5,34.5,34.5),e.strokeStyle="rgb(0, 0, 0)",e.lineWidth=10,e.stroke(),this.arc(e,141,123,57,57,176,268,!1),e.strokeStyle="rgb(0, 0, 0)",e.lineWidth=7.5,e.stroke(),e.beginPath(),e.moveTo(171.5,153.5),e.lineTo(167,38),e.lineCap="round",e.strokeStyle="rgb(0, 0, 0)",e.lineWidth=8,e.stroke(),e.beginPath(),e.moveTo(146.5,36.5),e.lineTo(190.5,36.5),e.lineCap="round",e.strokeStyle="rgb(0, 0, 0)",e.lineWidth=7,e.stroke(),e.beginPath(),e.moveTo(28.5,153.5),e.lineTo(140.5,153.5),e.lineCap="round",e.strokeStyle="rgb(0, 0, 0)",e.lineWidth=7,e.stroke()},window.ScooterIconAppearance.instances=new Set,window.ScooterIconMorph=function(e){this.color=e,ScooterIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new ScooterIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ScooterIconMorph,"name",{value:"ScooterIconMorph"}),window.ScooterIconMorph.__super__=window.IconMorph.prototype,window.ScooterIconMorph=extend(window.ScooterIconMorph,window.IconMorph),window.ScooterIconMorph.instances=new Set,window.ScratchAreaIconAppearance=function(e){this.morph=e,ScratchAreaIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ScratchAreaIconAppearance,"name",{value:"ScratchAreaIconAppearance"}),window.ScratchAreaIconAppearance.__super__=window.IconAppearance.prototype,window.ScratchAreaIconAppearance=extend(window.ScratchAreaIconAppearance,window.IconAppearance),window.ScratchAreaIconAppearance.prototype.paintFunction=function(e){var t;return t="rgb(0, 0, 0)",e.beginPath(),e.moveTo(40.5,118.5),e.lineTo(40.5,184.5),e.lineTo(145.5,184.5),e.lineTo(145.5,92.5),e.lineTo(40.5,92.5),e.lineTo(67.5,67.5),e.lineTo(78.5,67.5),e.lineCap="round",e.lineJoin="round",e.strokeStyle=t,e.lineWidth=4.5,e.stroke(),e.beginPath(),e.moveTo(146,185),e.lineTo(172.83,159.74),e.lineTo(172.29,102.66),e.lineTo(190,87),e.strokeStyle=t,e.lineWidth=4.5,e.stroke(),e.beginPath(),e.moveTo(172.5,102.5),e.lineTo(161.5,112.5),e.strokeStyle=t,e.lineWidth=5.5,e.stroke(),e.beginPath(),e.moveTo(19.5,117.5),e.bezierCurveTo(127.5,117.5,127.5,117.5,127.5,117.5),e.strokeStyle=t,e.lineWidth=4.5,e.stroke(),this.arc(e,128.5,94.5,33,49,180,273,!1),e.strokeStyle=t,e.lineWidth=4.5,e.stroke(),this.arc(e,22,93,33,49,180,273,!1),e.strokeStyle=t,e.lineWidth=4.5,e.stroke(),this.arc(e,135,93,26,49,266,355,!1),e.strokeStyle=t,e.lineWidth=4.5,e.stroke(),this.arc(e,162.5,67.5,26,49,266,355,!1),e.strokeStyle=t,e.lineWidth=4.5,e.stroke(),e.beginPath(),e.moveTo(103.5,67.5),e.lineTo(172,67.5),e.lineTo(146,92.5),e.strokeStyle=t,e.lineWidth=4.5,e.stroke(),this.arc(e,-9.5,76,51,49,254,339,!1),e.strokeStyle=t,e.lineWidth=4.5,e.stroke(),this.arc(e,17,52.5,51,49,254,339,!1),e.strokeStyle=t,e.lineWidth=4.5,e.stroke(),e.beginPath(),e.moveTo(10,77),e.lineTo(37,53),e.strokeStyle=t,e.lineWidth=4.5,e.stroke(),e.beginPath(),e.moveTo(65.5,68),e.lineTo(72,56),e.strokeStyle=t,e.lineWidth=4.5,e.stroke(),e.beginPath(),e.moveTo(89.5,45.5),e.lineTo(105.5,45.5),e.strokeStyle=t,e.lineWidth=4,e.stroke(),e.beginPath(),e.moveTo(150.5,45.5),e.lineTo(188,45),e.lineCap="round",e.lineJoin="round",e.strokeStyle=t,e.lineWidth=4,e.stroke(),this.arc(e,171.5,45.5,33,49,180,273,!1),e.strokeStyle=t,e.lineWidth=4.5,e.stroke(),this.arc(e,92,80,18,18.5,181,0,!1),e.strokeStyle=t,e.lineWidth=4.5,e.stroke(),e.beginPath(),e.moveTo(83,59.5),e.lineTo(83.5,73.5),e.lineTo(98.5,73.5),e.lineTo(98,58),e.lineTo(83,59.5),e.closePath(),e.strokeStyle=t,e.lineWidth=4.5,e.stroke(),e.beginPath(),e.moveTo(106.5,39.5),e.lineTo(117.5,20.5),e.lineTo(139.5,20.5),e.lineTo(149.5,38.5),e.lineTo(138.5,57.5),e.lineTo(116.5,57.5),e.lineTo(106.5,39.5),e.closePath(),e.strokeStyle=t,e.lineWidth=4.5,e.stroke(),this.arc(e,64.5,27,22.5,23.5,181,180,!1),e.strokeStyle=t,e.lineWidth=4.5,e.stroke()},window.ScratchAreaIconAppearance.instances=new Set,window.ScratchAreaIconMorph=function(e){this.color=e,ScratchAreaIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new ScratchAreaIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ScratchAreaIconMorph,"name",{value:"ScratchAreaIconMorph"}),window.ScratchAreaIconMorph.__super__=window.IconMorph.prototype,window.ScratchAreaIconMorph=extend(window.ScratchAreaIconMorph,window.IconMorph),window.ScratchAreaIconMorph.instances=new Set,window.ShortcutArrowIconAppearance=function(e){this.morph=e,ShortcutArrowIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ShortcutArrowIconAppearance,"name",{value:"ShortcutArrowIconAppearance"}),window.ShortcutArrowIconAppearance.__super__=window.IconAppearance.prototype,window.ShortcutArrowIconAppearance=extend(window.ShortcutArrowIconAppearance,window.IconAppearance),window.ShortcutArrowIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(81.16,4),e.lineTo(19.84,4),e.lineTo(19.84,4),e.bezierCurveTo(11.09,4,4,11.09,4,19.84),e.lineTo(4,81.16),e.lineTo(4,81.16),e.bezierCurveTo(4,89.91,11.09,97,19.84,97),e.lineTo(81.16,97),e.lineTo(81.16,97),e.bezierCurveTo(89.91,97,97,89.91,97,81.16),e.lineTo(97,19.84),e.lineTo(97,19.84),e.bezierCurveTo(97,11.09,89.91,4,81.16,4),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(78.82,7.72),e.lineTo(22.83,7.72),e.lineTo(22.83,7.72),e.bezierCurveTo(14.84,7.72,8.37,14.19,8.37,22.18),e.lineTo(8.37,78.17),e.lineTo(8.37,78.17),e.bezierCurveTo(8.37,86.16,14.84,92.63,22.83,92.63),e.lineTo(78.82,92.63),e.lineTo(78.82,92.63),e.bezierCurveTo(86.81,92.63,93.28,86.16,93.28,78.17),e.lineTo(93.28,22.18),e.lineTo(93.28,22.18),e.bezierCurveTo(93.28,14.19,86.81,7.72,78.82,7.72),e.closePath(),e.moveTo(85.39,78.17),e.lineTo(85.39,78.17),e.bezierCurveTo(85.39,81.8,82.45,84.74,78.82,84.74),e.lineTo(22.83,84.74),e.lineTo(22.83,84.74),e.bezierCurveTo(19.2,84.74,16.26,81.8,16.26,78.17),e.lineTo(16.26,22.18),e.lineTo(16.26,22.18),e.bezierCurveTo(16.26,18.55,19.2,15.61,22.83,15.61),e.lineTo(78.82,15.61),e.lineTo(78.82,15.61),e.bezierCurveTo(82.45,15.61,85.39,18.55,85.39,22.18),e.lineTo(85.39,78.17),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(57.22,52.5),e.bezierCurveTo(59.32,57.3,61.42,62.16,63.58,66.95),e.lineTo(80.52,33.87),e.lineTo(45.39,25.61),e.bezierCurveTo(47.85,31.09,49.05,33.87,51.45,39.37),e.bezierCurveTo(48.37,40.19,39.96,42.92,33.54,51.48),e.bezierCurveTo(24.46,63.49,26.53,77.54,26.9,79.91),e.bezierCurveTo(27.64,76.82,30.09,67.94,38.14,60.81),e.bezierCurveTo(45.79,54.01,54.12,52.78,57.22,52.5),e.closePath(),e.fillStyle=t,e.fill()},window.ShortcutArrowIconAppearance.instances=new Set,window.ShortcutArrowIconWdgt=function(e){this.color=e,ShortcutArrowIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ShortcutArrowIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ShortcutArrowIconWdgt,"name",{value:"ShortcutArrowIconWdgt"}),window.ShortcutArrowIconWdgt.__super__=window.IconMorph.prototype,window.ShortcutArrowIconWdgt=extend(window.ShortcutArrowIconWdgt,window.IconMorph),window.ShortcutArrowIconWdgt.instances=new Set,window.SimpleSlideIconAppearance=function(e){this.morph=e,SimpleSlideIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleSlideIconAppearance,"name",{value:"SimpleSlideIconAppearance"}),window.SimpleSlideIconAppearance.__super__=window.IconAppearance.prototype,window.SimpleSlideIconAppearance=extend(window.SimpleSlideIconAppearance,window.IconAppearance),window.SimpleSlideIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(87.54,18),e.lineTo(13.57,18),e.bezierCurveTo(10.05,18,7.12,20.67,7.12,23.87),e.lineTo(7,76.13),e.bezierCurveTo(7,79.33,9.94,82,13.46,82),e.lineTo(87.43,82),e.bezierCurveTo(90.95,82,93.88,79.33,93.88,76.13),e.lineTo(94,23.87),e.bezierCurveTo(94,20.67,91.06,18,87.54,18),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(16.86,33.6),e.lineTo(44.54,33.6),e.strokeStyle=t,e.lineWidth=1.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(16.86,45.34),e.lineTo(44.54,45.34),e.strokeStyle=t,e.lineWidth=1.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(16.86,56.08),e.lineTo(44.54,56.08),e.strokeStyle=t,e.lineWidth=1.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(16.86,67.36),e.lineTo(44.54,67.36),e.strokeStyle=t,e.lineWidth=1.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(53.77,56.08),e.lineTo(81.45,56.08),e.strokeStyle=t,e.lineWidth=1.5,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(53.77,67.36),e.lineTo(81.45,67.36),e.strokeStyle=t,e.lineWidth=1.5,e.lineCap="round",e.stroke(),e.beginPath(),e.rect(54,36,8,9.5),e.strokeStyle=t,e.lineWidth=1.5,e.lineJoin="round",e.stroke(),e.beginPath(),e.rect(65,33,7,12.5),e.strokeStyle=t,e.lineWidth=1.5,e.lineJoin="round",e.stroke(),e.beginPath(),e.rect(75,28,8,17.5),e.strokeStyle=t,e.lineWidth=1.5,e.lineJoin="round",e.stroke(),e.beginPath(),e.moveTo(85.84,20),e.lineTo(15.27,20),e.bezierCurveTo(11.91,20,9.11,22.5,9.11,25.5),e.lineTo(9,74.5),e.bezierCurveTo(9,77.5,11.8,80,15.16,80),e.lineTo(85.73,80),e.bezierCurveTo(89.09,80,91.89,77.5,91.89,74.5),e.lineTo(92,25.5),e.bezierCurveTo(92,22.5,89.2,20,85.84,20),e.closePath(),e.moveTo(88.53,74.5),e.bezierCurveTo(88.53,75.9,87.3,77,85.73,77),e.lineTo(15.16,77),e.bezierCurveTo(13.59,77,12.36,75.9,12.36,74.5),e.lineTo(12.47,25.5),e.bezierCurveTo(12.47,24.1,13.7,23,15.27,23),e.lineTo(85.84,23),e.bezierCurveTo(87.41,23,88.64,24.1,88.64,25.5),e.lineTo(88.53,74.5),e.closePath(),e.fillStyle=t,e.fill()},window.SimpleSlideIconAppearance.instances=new Set,window.SimpleSlideIconWdgt=function(e){this.color=e,SimpleSlideIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new SimpleSlideIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleSlideIconWdgt,"name",{value:"SimpleSlideIconWdgt"}),window.SimpleSlideIconWdgt.__super__=window.IconMorph.prototype,window.SimpleSlideIconWdgt=extend(window.SimpleSlideIconWdgt,window.IconMorph),window.SimpleSlideIconWdgt.instances=new Set,window.SliderNodeIconWdgt=function(e){this.color=e,SliderNodeIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new SliderNodeIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SliderNodeIconWdgt,"name",{value:"SliderNodeIconWdgt"});window.SliderNodeIconWdgt.__super__=window.IconMorph.prototype,window.SliderNodeIconWdgt=extend(window.SliderNodeIconWdgt,window.IconMorph),window.SliderNodeIconWdgt.instances=new Set,window.SliderNodeIconAppearance=function(e){this.morph=e,SliderNodeIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SliderNodeIconAppearance,"name",{value:"SliderNodeIconAppearance"}),window.SliderNodeIconAppearance.__super__=window.IconAppearance.prototype,window.SliderNodeIconAppearance=extend(window.SliderNodeIconAppearance,window.IconAppearance),window.SliderNodeIconAppearance.prototype.paintFunction=function(e){var t;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),e.beginPath(),e.moveTo(60.64,82.46),e.lineTo(60.64,18),e.bezierCurveTo(60.64,11.58,55.42,6.37,49,6.37),e.bezierCurveTo(42.59,6.37,37.37,11.58,37.37,18),e.bezierCurveTo(37.37,18.12,37.38,18.24,37.38,18.36),e.lineTo(37.39,81.96),e.lineTo(37.38,82.1),e.bezierCurveTo(37.38,82.22,37.37,82.34,37.37,82.46),e.bezierCurveTo(37.37,88.87,42.59,94.09,49,94.09),e.bezierCurveTo(55.42,94.09,60.64,88.87,60.64,82.46),e.closePath(),e.moveTo(40.37,82.46),e.bezierCurveTo(40.37,82.4,40.37,82.35,40.38,82.3),e.lineTo(40.39,82.01),e.lineTo(40.39,18.4),e.lineTo(40.38,18.16),e.bezierCurveTo(40.37,18.11,40.37,18.06,40.37,18),e.bezierCurveTo(40.37,13.24,44.24,9.37,49,9.37),e.bezierCurveTo(53.76,9.37,57.64,13.24,57.64,18),e.lineTo(57.64,82.46),e.bezierCurveTo(57.64,87.22,53.76,91.09,49,91.09),e.bezierCurveTo(44.24,91.09,40.37,87.22,40.37,82.46),e.closePath(),e.fillStyle=t,e.fill(),this.oval(e,42,57,14,14),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(60,50),e.lineTo(69,50),e.strokeStyle=t,e.lineWidth=2,e.stroke(),this.oval(e,67.5,47,6,6),e.fillStyle=t,e.fill()},window.SliderNodeIconAppearance.instances=new Set,window.SlidesToolbarIconAppearance=function(e){this.morph=e,SlidesToolbarIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SlidesToolbarIconAppearance,"name",{value:"SlidesToolbarIconAppearance"}),window.SlidesToolbarIconAppearance.__super__=window.IconAppearance.prototype,window.SlidesToolbarIconAppearance=extend(window.SlidesToolbarIconAppearance,window.IconAppearance),window.SlidesToolbarIconAppearance.prototype.paintFunction=function(e){var t;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),e.beginPath(),e.moveTo(75.36,60.27),e.lineTo(59.71,60.27),e.lineTo(59.71,87.29),e.lineTo(86.77,87.29),e.lineTo(86.77,71.67),e.strokeStyle=t,e.lineWidth=6,e.lineJoin="round",e.stroke(),e.beginPath(),e.moveTo(81.09,59.55),e.lineTo(84.13,59.55),e.lineTo(72.53,71.13),e.lineTo(75.9,74.49),e.lineTo(87.54,62.91),e.lineTo(87.54,65.94),e.lineTo(92.35,65.94),e.lineTo(92.35,54.74),e.lineTo(81.09,54.74),e.lineTo(81.09,59.55),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(44.48,40.52),e.lineTo(44.48,39.41),e.bezierCurveTo(43.59,40.04,43.53,40.01,42.46,40.32),e.bezierCurveTo(41.38,40.64,40.41,40.8,39.53,40.8),e.bezierCurveTo(37.63,40.8,36.08,40.12,34.89,38.77),e.bezierCurveTo(33.71,37.42,33.11,35.93,33.11,34.29),e.bezierCurveTo(33.11,32.29,33.87,30.44,35.39,28.74),e.bezierCurveTo(36.91,27.03,38.08,26.68,40.75,26.68),e.bezierCurveTo(41.83,26.68,43.07,27.35,44.48,27.66),e.lineTo(44.48,26.52),e.bezierCurveTo(44.48,25.81,44.25,24.72,43.79,24.27),e.bezierCurveTo(43.34,23.83,42.47,23.09,41.19,23.09),e.bezierCurveTo(40.14,23.09,38.78,23.37,37.1,23.93),e.bezierCurveTo(36.48,24.13,35.99,24.23,35.65,24.23),e.bezierCurveTo(35.18,24.23,34.77,24,34.45,23.55),e.bezierCurveTo(34.12,23.09,33.95,22.51,33.95,21.8),e.bezierCurveTo(33.95,21.39,34.01,21.05,34.13,20.75),e.bezierCurveTo(34.24,20.46,34.4,20.22,34.61,20.05),e.bezierCurveTo(34.82,19.87,35.25,19.66,35.91,19.41),e.bezierCurveTo(36.79,19.08,37.68,18.83,38.59,18.63),e.bezierCurveTo(39.5,18.44,40.33,18.34,41.07,18.34),e.bezierCurveTo(43.27,18.34,44.98,19.49,46.2,20.76),e.bezierCurveTo(47.41,22.04,48.02,23.78,48.02,25.99),e.lineTo(48.02,35.77),e.lineTo(48.63,35.77),e.bezierCurveTo(49.48,35.77,50.09,35.99,50.45,36.43),e.bezierCurveTo(50.82,36.87,51,37.45,51,38.16),e.bezierCurveTo(51,38.85,50.82,39.42,50.45,39.86),e.bezierCurveTo(50.09,40.3,49.48,40.52,48.63,40.52),e.lineTo(44.48,40.52),e.closePath(),e.moveTo(44.48,31.51),e.bezierCurveTo(43.06,31.14,41.75,30.44,40.55,30.44),e.bezierCurveTo(39.1,30.44,38.79,30.91,37.75,31.86),e.bezierCurveTo(37.1,32.46,36.78,33.58,36.78,34.19),e.bezierCurveTo(36.78,34.64,37.4,36.02,37.71,36.3),e.bezierCurveTo(38.29,36.81,38.62,37.06,39.62,37.06),e.bezierCurveTo(40.47,37.06,41.44,36.84,42.52,36.39),e.bezierCurveTo(43.6,35.94,43.63,35.84,44.48,35.07),e.lineTo(44.48,31.51),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(24.67,32.94),e.lineTo(15.56,32.94),e.lineTo(14.64,35.92),e.lineTo(15.56,35.92),e.bezierCurveTo(16.46,35.92,17.1,36.14,17.49,36.59),e.bezierCurveTo(17.87,37.05,18.06,37.64,18.06,38.37),e.bezierCurveTo(18.06,39.08,17.87,39.67,17.49,40.12),e.bezierCurveTo(17.1,40.57,16.46,40.8,15.56,40.8),e.lineTo(10.51,40.8),e.bezierCurveTo(9.6,40.8,8.96,40.57,8.58,40.12),e.bezierCurveTo(8.19,39.67,8,39.08,8,38.35),e.bezierCurveTo(8,37.62,8.2,37.02,8.6,36.56),e.bezierCurveTo(9.01,36.1,9.67,35.88,10.6,35.92),e.lineTo(16.49,16.81),e.lineTo(14.04,16.81),e.bezierCurveTo(13.14,16.81,12.49,16.58,12.11,16.13),e.bezierCurveTo(11.72,15.68,11.53,15.08,11.53,14.35),e.bezierCurveTo(11.53,13.62,11.72,13.03,12.11,12.58),e.bezierCurveTo(12.49,12.13,13.14,11.9,14.04,11.9),e.lineTo(22.14,11.92),e.lineTo(29.61,35.92),e.bezierCurveTo(30.49,35.92,31.07,36.04,31.35,36.3),e.bezierCurveTo(31.91,36.82,32.19,37.51,32.19,38.37),e.bezierCurveTo(32.19,39.08,32,39.67,31.62,40.12),e.bezierCurveTo(31.24,40.57,30.6,40.8,29.7,40.8),e.lineTo(24.65,40.8),e.bezierCurveTo(23.75,40.8,23.1,40.57,22.72,40.12),e.bezierCurveTo(22.34,39.67,22.14,39.08,22.14,38.35),e.bezierCurveTo(22.14,37.63,22.34,37.05,22.72,36.59),e.bezierCurveTo(23.1,36.14,23.75,35.92,24.65,35.92),e.lineTo(25.56,35.92),e.lineTo(24.67,32.94),e.closePath(),e.moveTo(23.11,28.05),e.lineTo(20.09,18.38),e.lineTo(17.06,28.05),e.lineTo(23.11,28.05),e.closePath(),e.fillStyle=t,e.fill(),this.arc(e,11,59,19,18,136,-34,!1),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),this.arc(e,26,59,19,18,-146,46,!1),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),this.oval(e,27,61.9,2,2),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(13.28,73.85),e.lineTo(26.58,87.72),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),e.beginPath(),e.moveTo(42.72,73.85),e.lineTo(29.23,87.91),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),this.arc(e,25.5,83.1,5,5,37,143,!1),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),this.arc(e,15.5,63,10,10,-179,-87,!1),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),e.beginPath(),e.moveTo(91.44,26.84),e.lineTo(85.61,20.95),e.bezierCurveTo(85.61,20.95,82.34,24.26,79.13,27.51),e.lineTo(79.13,10.21),e.lineTo(70.88,10.21),e.lineTo(70.88,27.51),e.lineTo(64.39,20.95),e.lineTo(58.56,26.84),e.lineTo(75,43.43),e.lineTo(91.44,26.84),e.closePath(),e.fillStyle=t,e.fill()},window.SlidesToolbarIconAppearance.instances=new Set,window.SlidesToolbarIconWdgt=function(e){this.color=e,SlidesToolbarIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new SlidesToolbarIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SlidesToolbarIconWdgt,"name",{value:"SlidesToolbarIconWdgt"}),window.SlidesToolbarIconWdgt.__super__=window.IconMorph.prototype,window.SlidesToolbarIconWdgt=extend(window.SlidesToolbarIconWdgt,window.IconMorph),window.SlidesToolbarIconWdgt.instances=new Set,window.TemplatesIconAppearance=function(e){this.morph=e,TemplatesIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TemplatesIconAppearance,"name",{value:"TemplatesIconAppearance"}),window.TemplatesIconAppearance.__super__=window.IconAppearance.prototype,window.TemplatesIconAppearance=extend(window.TemplatesIconAppearance,window.IconAppearance),window.TemplatesIconAppearance.prototype.paintFunction=function(e){var t;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),e.beginPath(),e.moveTo(43,87),e.lineTo(64.21,95.76),e.lineTo(67.11,87),e.strokeStyle="rgb(0, 0, 0)",e.lineWidth=2,e.lineCap="round",e.lineJoin="round",e.stroke(),e.beginPath(),e.moveTo(20.57,43.92),e.lineTo(9,75.06),e.lineTo(20.57,78.96),e.strokeStyle="rgb(0, 0, 0)",e.lineWidth=2,e.lineCap="round",e.lineJoin="round",e.stroke(),e.beginPath(),e.moveTo(32.14,12.78),e.lineTo(34.07,5),e.lineTo(57.21,12.78),e.strokeStyle="rgb(0, 0, 0)",e.lineWidth=2,e.lineCap="round",e.lineJoin="round",e.stroke(),e.beginPath(),e.moveTo(78.43,20.57),e.lineTo(90,24.46),e.lineTo(78.43,53.66),e.strokeStyle="rgb(0, 0, 0)",e.lineWidth=2,e.lineCap="round",e.lineJoin="round",e.stroke(),e.beginPath(),e.moveTo(28.29,75.06),e.lineTo(53.36,75.06),e.strokeStyle=t,e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(28.29,63.39),e.lineTo(70.71,63.39),e.strokeStyle=t,e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(28.29,51.71),e.lineTo(70.71,51.71),e.strokeStyle=t,e.lineWidth=2,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(49.49,40.77),e.bezierCurveTo(49,40.77,48.67,40.61,48.35,40.28),e.lineTo(40.83,32.8),e.bezierCurveTo(38.05,30.03,38.05,25.8,40.83,23.04),e.bezierCurveTo(43.12,20.76,47.57,21.31,49.49,24.01),e.bezierCurveTo(51.43,21.31,55.7,20.59,58.15,23.04),e.lineTo(58.15,23.04),e.lineTo(58.15,23.04),e.lineTo(58.15,23.04),e.bezierCurveTo(59.45,24.34,60.11,26.13,60.11,27.92),e.bezierCurveTo(60.11,29.71,59.45,31.5,58.15,32.8),e.lineTo(50.63,40.28),e.bezierCurveTo(50.31,40.61,49.98,40.77,49.49,40.77),e.closePath(),e.strokeStyle=t,e.lineWidth=1.5,e.miterLimit=4,e.stroke(),e.beginPath(),e.rect(21,13,57,74),e.strokeStyle=t,e.lineWidth=2,e.lineJoin="round",e.stroke()},window.TemplatesIconAppearance.instances=new Set,window.TemplatesIconWdgt=function(e){this.color=e,TemplatesIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new TemplatesIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TemplatesIconWdgt,"name",{value:"TemplatesIconWdgt"}),window.TemplatesIconWdgt.__super__=window.IconMorph.prototype,window.TemplatesIconWdgt=extend(window.TemplatesIconWdgt,window.IconMorph),window.TemplatesIconWdgt.instances=new Set,window.TextIconAppearance=function(e){this.morph=e,TextIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TextIconAppearance,"name",{value:"TextIconAppearance"}),window.TextIconAppearance.__super__=window.IconAppearance.prototype,window.TextIconAppearance=extend(window.TextIconAppearance,window.IconAppearance),window.TextIconAppearance.prototype.paintFunction=function(e){var t;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),e.beginPath(),e.moveTo(40.05,62.47),e.lineTo(20.34,62.47),e.lineTo(18.36,68.33),e.lineTo(20.34,68.33),e.bezierCurveTo(22.29,68.33,23.69,68.78,24.52,69.67),e.bezierCurveTo(25.35,70.56,25.76,71.73,25.76,73.17),e.bezierCurveTo(25.76,74.57,25.35,75.72,24.52,76.61),e.bezierCurveTo(23.69,77.5,22.29,77.95,20.34,77.95),e.lineTo(9.42,77.95),e.bezierCurveTo(7.47,77.95,6.08,77.5,5.25,76.61),e.bezierCurveTo(4.42,75.72,4,74.56,4,73.12),e.bezierCurveTo(4,71.68,4.44,70.51,5.31,69.6),e.bezierCurveTo(6.18,68.69,7.61,68.27,9.62,68.33),e.lineTo(22.36,30.71),e.lineTo(17.06,30.71),e.bezierCurveTo(15.11,30.71,13.71,30.27,12.88,29.38),e.bezierCurveTo(12.05,28.48,11.64,27.32,11.64,25.88),e.bezierCurveTo(11.64,24.44,12.05,23.28,12.88,22.39),e.bezierCurveTo(13.71,21.5,15.11,21.05,17.06,21.05),e.lineTo(34.59,21.1),e.lineTo(50.73,68.33),e.bezierCurveTo(52.63,68.33,53.89,68.58,54.49,69.08),e.bezierCurveTo(55.71,70.12,56.31,71.48,56.31,73.17),e.bezierCurveTo(56.31,74.57,55.9,75.72,55.09,76.61),e.bezierCurveTo(54.27,77.5,52.88,77.95,50.93,77.95),e.lineTo(40.01,77.95),e.bezierCurveTo(38.06,77.95,36.67,77.5,35.83,76.61),e.bezierCurveTo(35,75.72,34.59,74.56,34.59,73.12),e.bezierCurveTo(34.59,71.71,35,70.56,35.83,69.67),e.bezierCurveTo(36.67,68.78,38.06,68.33,40.01,68.33),e.lineTo(41.99,68.33),e.lineTo(40.05,62.47),e.closePath(),e.moveTo(36.69,52.85),e.lineTo(30.16,33.81),e.lineTo(23.59,52.85),e.lineTo(36.69,52.85),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(82.89,77.4),e.lineTo(82.89,75.21),e.bezierCurveTo(80.97,76.46,80.85,76.39,78.53,77.01),e.bezierCurveTo(76.2,77.64,74.1,77.95,72.2,77.95),e.bezierCurveTo(68.08,77.95,64.74,76.62,62.17,73.96),e.bezierCurveTo(59.6,71.3,58.31,68.35,58.31,65.13),e.bezierCurveTo(58.31,61.2,59.95,57.56,63.23,54.2),e.bezierCurveTo(66.52,50.84,69.05,50.16,74.84,50.16),e.bezierCurveTo(77.16,50.16,79.84,51.46,82.89,52.07),e.lineTo(82.89,49.83),e.bezierCurveTo(82.89,48.44,82.4,46.29,81.41,45.41),e.bezierCurveTo(80.42,44.53,78.55,43.09,75.78,43.09),e.bezierCurveTo(73.51,43.09,70.56,43.64,66.94,44.73),e.bezierCurveTo(65.6,45.13,64.55,45.32,63.8,45.32),e.bezierCurveTo(62.78,45.32,61.91,44.88,61.2,43.98),e.bezierCurveTo(60.49,43.08,60.13,41.93,60.13,40.53),e.bezierCurveTo(60.13,39.74,60.26,39.06,60.5,38.48),e.bezierCurveTo(60.75,37.9,61.1,37.44,61.55,37.09),e.bezierCurveTo(62,36.74,62.94,36.32,64.36,35.83),e.bezierCurveTo(66.26,35.2,68.19,34.69,70.16,34.31),e.bezierCurveTo(72.13,33.93,73.92,33.74,75.51,33.74),e.bezierCurveTo(80.28,33.74,83.98,35.99,86.61,38.5),e.bezierCurveTo(89.25,41.01,90.56,44.44,90.56,48.79),e.lineTo(90.56,68.04),e.lineTo(91.87,68.04),e.bezierCurveTo(93.72,68.04,95.03,68.48,95.82,69.34),e.bezierCurveTo(96.61,70.21,97,71.35,97,72.74),e.bezierCurveTo(97,74.11,96.61,75.23,95.82,76.1),e.bezierCurveTo(95.03,76.97,93.72,77.4,91.87,77.4),e.lineTo(82.89,77.4),e.closePath(),e.moveTo(82.89,59.65),e.bezierCurveTo(79.82,58.92,76.99,57.56,74.39,57.56),e.bezierCurveTo(71.27,57.56,70.59,58.49,68.34,60.34),e.bezierCurveTo(66.95,61.53,66.25,63.73,66.25,64.95),e.bezierCurveTo(66.25,65.83,67.58,68.54,68.26,69.09),e.bezierCurveTo(69.51,70.09,70.22,70.6,72.39,70.6),e.bezierCurveTo(74.23,70.6,76.32,70.15,78.66,69.27),e.bezierCurveTo(80.99,68.39,81.07,68.19,82.89,66.67),e.lineTo(82.89,59.65),e.closePath(),e.fillStyle=t,e.fill()},window.TextIconAppearance.instances=new Set,window.TextIconWdgt=function(e){this.color=e,TextIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new TextIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TextIconWdgt,"name",{value:"TextIconWdgt"}),window.TextIconWdgt.__super__=window.IconMorph.prototype,window.TextIconWdgt=extend(window.TextIconWdgt,window.IconMorph),window.TextIconWdgt.instances=new Set,window.TextToolbarIconAppearance=function(e){this.morph=e,TextToolbarIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TextToolbarIconAppearance,"name",{value:"TextToolbarIconAppearance"}),window.TextToolbarIconAppearance.__super__=window.IconAppearance.prototype,window.TextToolbarIconAppearance=extend(window.TextToolbarIconAppearance,window.IconAppearance),window.TextToolbarIconAppearance.prototype.paintFunction=function(e){var t;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),e.beginPath(),e.moveTo(83.25,10.1),e.lineTo(16.75,10.1),e.lineTo(14.03,30.23),e.lineTo(24.25,30.15),e.bezierCurveTo(24.25,24.65,30,18.9,35.5,18.9),e.lineTo(43,18.9),e.lineTo(43,76.4),e.bezierCurveTo(43,79.2,40.8,81.4,38,81.4),e.lineTo(31.75,82.65),e.lineTo(31.75,90.65),e.lineTo(68.25,90.65),e.lineTo(68.25,82.75),e.lineTo(62,81.5),e.bezierCurveTo(59.2,81.5,57,79.3,57,76.5),e.lineTo(57,19),e.lineTo(64.5,19),e.bezierCurveTo(70,19,75.75,24.75,75.75,30.25),e.lineTo(85.72,30.1),e.lineTo(83.25,10.1),e.closePath(),e.strokeStyle=t,e.lineWidth=3,e.miterLimit=4,e.lineJoin="round",e.stroke()},window.TextToolbarIconAppearance.instances=new Set,window.TextToolbarIconWdgt=function(e){this.color=e,TextToolbarIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new TextToolbarIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TextToolbarIconWdgt,"name",{value:"TextToolbarIconWdgt"}),window.TextToolbarIconWdgt.__super__=window.IconMorph.prototype,window.TextToolbarIconWdgt=extend(window.TextToolbarIconWdgt,window.IconMorph),window.TextToolbarIconWdgt.instances=new Set,window.ToolbarsIconAppearance=function(e){this.morph=e,ToolbarsIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ToolbarsIconAppearance,"name",{value:"ToolbarsIconAppearance"}),window.ToolbarsIconAppearance.__super__=window.IconAppearance.prototype,window.ToolbarsIconAppearance=extend(window.ToolbarsIconAppearance,window.IconAppearance),window.ToolbarsIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,"rgb(255, 255, 255)","rgb(170, 170, 170)",e.beginPath(),e.moveTo(41.5,6.5),e.lineTo(58.5,6.5),e.lineTo(58.5,28.5),e.bezierCurveTo(58.5,28.5,62.75,24,66.5,23.5),e.bezierCurveTo(70.25,23,75.5,29.5,75.5,26.5),e.bezierCurveTo(75.5,23.5,78.25,22,76.5,19.5),e.bezierCurveTo(74.75,17,70.25,18,68.5,16.5),e.bezierCurveTo(66.75,15,67.75,14.25,69.5,13.5),e.bezierCurveTo(71.25,12.75,72,10.25,75.5,13.5),e.bezierCurveTo(79,16.75,81.5,21.5,83.5,26.5),e.bezierCurveTo(85.5,31.5,83.5,33.5,83.5,33.5),e.lineTo(60.5,40.5),e.lineTo(76.5,84.5),e.lineTo(58.5,82.5),e.lineTo(58.5,92.5),e.lineTo(39.5,92.5),e.lineTo(39.5,82.5),e.lineTo(22.5,84.5),e.lineTo(37.5,40.5),e.lineTo(30.5,40.5),e.lineTo(15.5,33.5),e.bezierCurveTo(15.5,33.5,15.75,24.5,18.5,19.5),e.bezierCurveTo(21.25,14.5,23.5,14.25,26.5,13.5),e.bezierCurveTo(29.5,12.75,31.5,15,30.5,16.5),e.bezierCurveTo(29.5,18,24.5,17,22.5,19.5),e.bezierCurveTo(20.5,22,20.5,25.5,22.5,26.5),e.bezierCurveTo(24.5,27.5,26,23,30.5,23.5),e.bezierCurveTo(35,24,41.5,28.5,41.5,28.5),e.lineTo(41.5,6.5),e.closePath(),e.fillStyle=n,e.fill(),e.strokeStyle=n,e.lineWidth=7,e.stroke(),e.beginPath(),e.moveTo(38.85,36.81),e.lineTo(22.35,84.12),e.bezierCurveTo(22.35,84.12,28.76,82.81,38.85,82.22),e.lineTo(38.85,36.81),e.closePath(),e.moveTo(60.15,36.81),e.lineTo(60.15,82.22),e.bezierCurveTo(70.24,82.81,76.65,84.12,76.65,84.12),e.lineTo(60.15,36.81),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.rect(41.5,16.5,16,15),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(46.42,21.12),e.lineTo(52.58,21.12),e.lineTo(52.58,26.88),e.lineTo(46.42,26.88),e.lineTo(46.42,21.12),e.closePath(),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.rect(41.5,7.5,16,9),e.fillStyle="rgb(170, 170, 170)",e.fill(),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(43.96,12.16),e.lineTo(55.04,12.16),e.strokeStyle="rgb(255, 255, 255)",e.lineWidth=1,e.stroke(),e.beginPath(),e.rect(41.5,31.5,16,16),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(46.42,36.42),e.lineTo(52.58,36.42),e.lineTo(52.58,42.58),e.lineTo(46.42,42.58),e.lineTo(46.42,36.42),e.closePath(),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.rect(41.5,47.5,16,15),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(46.42,52.12),e.lineTo(52.58,52.12),e.lineTo(52.58,57.88),e.lineTo(46.42,57.88),e.lineTo(46.42,52.12),e.closePath(),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.rect(41.5,62.5,16,15),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(46.42,67.12),e.lineTo(52.58,67.12),e.lineTo(52.58,72.88),e.lineTo(46.42,72.88),e.lineTo(46.42,67.12),e.closePath(),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.rect(41.5,77.5,16,15),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(46.42,82.12),e.lineTo(52.58,82.12),e.lineTo(52.58,87.88),e.lineTo(46.42,87.88),e.lineTo(46.42,82.12),e.closePath(),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(37.99,38.14),e.bezierCurveTo(36.88,38.4,35.77,38.4,34.83,38.4),e.bezierCurveTo(30.29,38.4,27.21,37.19,24.39,36.06),e.bezierCurveTo(21.91,35.11,15.67,33.9,15.58,33.29),e.bezierCurveTo(14.73,29.22,19.09,16.93,24.13,13.56),e.bezierCurveTo(25.93,12.35,27.81,12.35,29.35,13.47),e.bezierCurveTo(30.55,14.34,30.89,15.63,30.38,16.85),e.bezierCurveTo(29.78,18.32,23.98,19.44,22.1,19.7),e.bezierCurveTo(22.36,21.61,22.5,24.5,23.33,26.9),e.bezierCurveTo(25.38,25.6,29.78,22.91,32,23.51),e.bezierCurveTo(33.46,23.94,37.85,25.24,38.45,29.57),e.strokeStyle=t,e.lineWidth=3,e.miterLimit=4,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(60.96,38.14),e.bezierCurveTo(62.07,38.4,63.18,38.4,64.12,38.4),e.bezierCurveTo(68.66,38.4,71.73,37.19,74.56,36.06),e.bezierCurveTo(77.04,35.11,83.28,33.9,83.37,33.29),e.bezierCurveTo(84.22,29.22,79.86,16.93,74.81,13.56),e.bezierCurveTo(73.02,12.35,71.14,12.35,69.6,13.47),e.bezierCurveTo(68.4,14.34,68.06,15.63,68.57,16.85),e.bezierCurveTo(69.17,18.32,74.96,19.44,76.85,19.7),e.bezierCurveTo(76.59,21.61,76.45,24.5,75.62,26.9),e.bezierCurveTo(73.56,25.6,69.17,22.91,66.95,23.51),e.bezierCurveTo(65.49,23.94,61.1,25.24,60.5,29.57),e.strokeStyle=t,e.lineWidth=3,e.miterLimit=4,e.lineCap="round",e.stroke()},window.ToolbarsIconAppearance.instances=new Set,window.ToolbarsIconWdgt=function(e){this.color=e,ToolbarsIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ToolbarsIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ToolbarsIconWdgt,"name",{value:"ToolbarsIconWdgt"}),window.ToolbarsIconWdgt.__super__=window.IconMorph.prototype,window.ToolbarsIconWdgt=extend(window.ToolbarsIconWdgt,window.IconMorph),window.ToolbarsIconWdgt.instances=new Set,window.ToothpasteIconAppearance=function(){window.ToothpasteIconAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ToothpasteIconAppearance,"name",{value:"ToothpasteIconAppearance"}),window.ToothpasteIconAppearance.__super__=window.IconAppearance.prototype,window.ToothpasteIconAppearance=extend(window.ToothpasteIconAppearance,window.IconAppearance),window.ToothpasteIconAppearance.prototype.paintFunction=function(e){var t;return t=this.morph.color,e.beginPath(),e.moveTo(181.43,78.29),e.bezierCurveTo(165.67,78.29,152.86,91.16,152.86,106.98),e.lineTo(152.86,119.03),e.bezierCurveTo(152.86,125.04,147.99,129.93,142,129.93),e.bezierCurveTo(136.01,129.93,131.14,125.04,131.14,119.03),e.lineTo(131.14,40.41),e.bezierCurveTo(131.14,19.53,114.22,2.54,93.43,2.54),e.lineTo(85.43,2.54),e.bezierCurveTo(64.63,2.54,47.71,19.53,47.71,40.41),e.lineTo(47.71,57.63),e.lineTo(54.57,57.63),e.lineTo(54.57,40.41),e.bezierCurveTo(54.57,23.33,68.41,9.43,85.43,9.43),e.lineTo(93.43,9.43),e.bezierCurveTo(110.44,9.43,124.29,23.33,124.29,40.41),e.lineTo(124.29,119.03),e.bezierCurveTo(124.29,128.84,132.23,136.82,142,136.82),e.bezierCurveTo(151.77,136.82,159.71,128.84,159.71,119.03),e.lineTo(159.71,106.98),e.bezierCurveTo(159.71,94.95,169.46,85.17,181.43,85.17),e.bezierCurveTo(184.58,85.17,187.14,87.75,187.14,90.91),e.bezierCurveTo(187.14,94.07,184.58,96.65,181.43,96.65),e.bezierCurveTo(175.76,96.65,171.14,101.28,171.14,106.98),e.lineTo(171.14,119.03),e.bezierCurveTo(171.14,135.16,158.07,148.29,142,148.29),e.bezierCurveTo(125.93,148.29,112.86,135.16,112.86,119.03),e.lineTo(112.86,40.41),e.bezierCurveTo(112.86,29.65,104.14,20.9,93.43,20.9),e.lineTo(85.43,20.9),e.bezierCurveTo(74.72,20.9,66,29.65,66,40.41),e.lineTo(66,57.63),e.lineTo(72.86,57.63),e.lineTo(72.86,40.41),e.bezierCurveTo(72.86,33.45,78.5,27.79,85.43,27.79),e.lineTo(93.43,27.79),e.bezierCurveTo(100.36,27.79,106,33.45,106,40.41),e.lineTo(106,119.03),e.bezierCurveTo(106,138.96,122.15,155.18,142,155.18),e.bezierCurveTo(161.85,155.18,178,138.96,178,119.03),e.lineTo(178,106.98),e.bezierCurveTo(178,105.08,179.54,103.53,181.43,103.53),e.bezierCurveTo(188.36,103.53,194,97.87,194,90.91),e.bezierCurveTo(194,83.95,188.36,78.29,181.43,78.29),e.closePath(),e.fillStyle=t.toString(),e.fill(),e.beginPath(),e.moveTo(24.86,124.19),e.lineTo(95.72,124.19),e.lineTo(95.72,197.46),e.lineTo(102.57,197.46),e.lineTo(102.57,117.88),e.lineTo(99.44,111.09),e.lineTo(85.81,89.26),e.lineTo(82.76,84.37),e.lineTo(82.76,60.88),e.lineTo(37.81,60.88),e.lineTo(37.81,84.37),e.lineTo(32.28,93.21),e.lineTo(21.33,110.7),e.lineTo(18,117.88),e.lineTo(18,197.46),e.lineTo(24.86,197.46),e.lineTo(24.86,124.19),e.closePath(),e.moveTo(27.26,114.18),e.lineTo(40.38,93.21),e.lineTo(44.67,86.35),e.lineTo(44.67,67.76),e.lineTo(75.9,67.76),e.lineTo(75.91,86.35),e.lineTo(80.19,93.21),e.lineTo(93.31,114.18),e.lineTo(94.76,117.31),e.lineTo(25.82,117.31),e.lineTo(27.26,114.18),e.closePath(),e.fillStyle=t.toString(),e.fill()},window.ToothpasteIconAppearance.instances=new Set,window.ToothpasteIconMorph=function(e){this.color=e,ToothpasteIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new ToothpasteIconAppearance(this),this.toolTipMessage="toothpaste","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ToothpasteIconMorph,"name",{value:"ToothpasteIconMorph"}),window.ToothpasteIconMorph.__super__=window.IconMorph.prototype,window.ToothpasteIconMorph=extend(window.ToothpasteIconMorph,window.IconMorph),window.ToothpasteIconMorph.instances=new Set,window.TypewriterIconAppearance=function(e){this.morph=e,TypewriterIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TypewriterIconAppearance,"name",{value:"TypewriterIconAppearance"}),window.TypewriterIconAppearance.__super__=window.IconAppearance.prototype,window.TypewriterIconAppearance=extend(window.TypewriterIconAppearance,window.IconAppearance),window.TypewriterIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(90.79,34.25),e.lineTo(81.16,34.25),e.lineTo(81.16,5),e.lineTo(20.84,5),e.lineTo(20.84,34.25),e.lineTo(11.21,34.25),e.lineTo(11.21,38.03),e.lineTo(8,38.03),e.lineTo(8,55.4),e.lineTo(11.21,55.4),e.lineTo(11.21,59.33),e.lineTo(8.02,81.89),e.lineTo(8,95),e.lineTo(94,95),e.lineTo(94,82.14),e.lineTo(90.79,59.33),e.lineTo(90.79,55.4),e.lineTo(94,55.4),e.lineTo(94,38.03),e.lineTo(90.79,38.03),e.lineTo(90.79,34.25),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.rect(29.5,16.5,30,2),e.fillStyle=t,e.fill(),e.beginPath(),e.rect(29.5,22.5,43,2),e.fillStyle=t,e.fill(),e.beginPath(),e.rect(29.5,27.5,9.5,2),e.fillStyle=t,e.fill(),e.beginPath(),e.rect(29.5,33.5,21.5,2),e.fillStyle=t,e.fill(),e.beginPath(),e.rect(42.5,27.5,30,2),e.fillStyle=t,e.fill(),e.beginPath(),e.rect(63,16.5,9.5,2),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(88.69,36.17),e.lineTo(79.57,36.17),e.lineTo(79.57,7.75),e.lineTo(22.38,7.75),e.lineTo(22.38,36.17),e.lineTo(13.26,36.17),e.lineTo(13.26,39.72),e.lineTo(10.21,39.72),e.lineTo(10.21,53.22),e.lineTo(13.26,53.22),e.lineTo(13.26,58.79),e.lineTo(10.23,79.99),e.lineTo(10.21,92.3),e.lineTo(91.73,92.3),e.lineTo(91.73,80.22),e.lineTo(88.69,58.79),e.lineTo(88.69,53.22),e.lineTo(91.73,53.22),e.lineTo(91.73,39.72),e.lineTo(88.69,39.72),e.lineTo(88.69,36.17),e.closePath(),e.moveTo(77.13,10.59),e.lineTo(77.13,43.28),e.lineTo(62.39,43.28),e.lineTo(62.05,44.06),e.bezierCurveTo(62.03,44.12,59.25,50.38,50.97,50.38),e.bezierCurveTo(42.77,50.38,40.01,44.31,39.9,44.06),e.lineTo(39.56,43.28),e.lineTo(24.81,43.28),e.lineTo(24.81,10.59),e.lineTo(77.13,10.59),e.closePath(),e.moveTo(12.65,50.38),e.lineTo(12.65,42.56),e.lineTo(13.26,42.56),e.lineTo(13.26,50.38),e.lineTo(12.65,50.38),e.closePath(),e.moveTo(89.3,80.34),e.lineTo(89.3,89.46),e.lineTo(12.65,89.46),e.lineTo(12.65,80.34),e.lineTo(15.5,60.33),e.lineTo(86.46,60.33),e.lineTo(89.3,80.34),e.closePath(),e.moveTo(86.26,57.49),e.lineTo(15.69,57.49),e.lineTo(15.69,53.22),e.lineTo(15.69,39.72),e.lineTo(15.69,39.01),e.lineTo(22.38,39.01),e.lineTo(22.38,43.28),e.lineTo(20.56,43.28),e.lineTo(20.56,46.12),e.lineTo(38.12,46.12),e.bezierCurveTo(39.26,48.12,42.96,53.22,50.97,53.22),e.bezierCurveTo(58.99,53.22,62.68,48.12,63.83,46.12),e.lineTo(81.39,46.12),e.lineTo(81.39,43.28),e.lineTo(79.57,43.28),e.lineTo(79.57,39.01),e.lineTo(86.26,39.01),e.lineTo(86.26,39.72),e.lineTo(86.26,53.22),e.lineTo(86.26,57.49),e.closePath(),e.moveTo(89.3,42.56),e.lineTo(89.3,50.38),e.lineTo(88.69,50.38),e.lineTo(88.69,42.56),e.lineTo(89.3,42.56),e.closePath(),e.fillStyle=t,e.fill(),this.oval(e,20,76,6.5,6.5),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),this.oval(e,29,76,6.5,6.5),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),this.oval(e,20,66,6.5,6.5),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),this.oval(e,29,66,6.5,6.5),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),this.oval(e,38,66,6.5,6.5),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),this.oval(e,47,66,6.5,6.5),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),this.oval(e,56,66,6.5,6.5),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),this.oval(e,65,66,6.5,6.5),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),this.oval(e,74,66,6.5,6.5),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),this.oval(e,65,76,6.5,6.5),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),this.oval(e,74,76,6.5,6.5),e.strokeStyle=t,e.lineWidth=2.5,e.stroke(),e.beginPath(),e.moveTo(59.57,75),e.lineTo(41.03,75),e.bezierCurveTo(38.64,75,36.7,77.02,36.7,79.5),e.bezierCurveTo(36.7,81.98,38.64,84,41.03,84),e.lineTo(59.57,84),e.bezierCurveTo(61.96,84,63.9,81.98,63.9,79.5),e.bezierCurveTo(63.9,77.02,61.96,75,59.57,75),e.closePath(),e.moveTo(59.57,81.43),e.lineTo(41.03,81.43),e.bezierCurveTo(40,81.43,39.17,80.56,39.17,79.5),e.bezierCurveTo(39.17,78.44,40,77.57,41.03,77.57),e.lineTo(59.57,77.57),e.bezierCurveTo(60.6,77.57,61.43,78.44,61.43,79.5),e.bezierCurveTo(61.43,80.56,60.6,81.43,59.57,81.43),e.closePath(),e.fillStyle=t,e.fill()},window.TypewriterIconAppearance.instances=new Set,window.TypewriterIconWdgt=function(e){this.color=e,TypewriterIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new TypewriterIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TypewriterIconWdgt,"name",{value:"TypewriterIconWdgt"}),window.TypewriterIconWdgt.__super__=window.IconMorph.prototype,window.TypewriterIconWdgt=extend(window.TypewriterIconWdgt,window.IconMorph),window.TypewriterIconWdgt.instances=new Set,window.UncollapseIconAppearance=function(){window.UncollapseIconAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.UncollapseIconAppearance,"name",{value:"UncollapseIconAppearance"}),window.UncollapseIconAppearance.__super__=window.IconAppearance.prototype,window.UncollapseIconAppearance=extend(window.UncollapseIconAppearance,window.IconAppearance),window.UncollapseIconAppearance.prototype.paintFunction=function(e){var t,n;return t=this.morph.color,n=this.morph.color,e.beginPath(),e.moveTo(100.5,196.5),e.bezierCurveTo(153.91,196.5,197.5,152.91,197.5,99.5),e.bezierCurveTo(197.5,46.09,153.91,2.5,100.5,2.5),e.bezierCurveTo(47.09,2.5,3.5,46.09,3.5,99.5),e.bezierCurveTo(3.5,152.91,47.09,196.5,100.5,196.5),e.closePath(),e.moveTo(100.5,15.1),e.bezierCurveTo(147.11,15.1,184.9,52.89,184.9,99.5),e.bezierCurveTo(184.9,146.11,147.11,183.9,100.5,183.9),e.bezierCurveTo(53.89,183.9,16.1,146.11,16.1,99.5),e.bezierCurveTo(16.1,52.89,53.89,15.1,100.5,15.1),e.closePath(),e.fillStyle=t.toString(),e.fill(),e.beginPath(),e.rect(65,65,65,21),e.closePath(),e.fill(),e.beginPath(),e.rect(65,65,65,65),e.closePath(),e.strokeStyle=n.toString(),e.lineWidth=10,e.stroke()},window.UncollapseIconAppearance.instances=new Set,window.UncollapsedStateIconAppearance=function(e){this.morph=e,UncollapsedStateIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(400,400),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.UncollapsedStateIconAppearance,"name",{value:"UncollapsedStateIconAppearance"}),window.UncollapsedStateIconAppearance.__super__=window.IconAppearance.prototype,window.UncollapsedStateIconAppearance=extend(window.UncollapsedStateIconAppearance,window.IconAppearance),window.UncollapsedStateIconAppearance.prototype.paintFunction=function(e){return"rgb(51, 0, 0)",e.beginPath(),e.moveTo(45.5,137.5),e.lineTo(200.93,288.5),e.lineTo(362.5,133.5),e.miterLimit=30,e.strokeStyle="rgb(51, 0, 0)",e.lineWidth=30,e.stroke()},window.UncollapsedStateIconAppearance.instances=new Set,window.UncollapsedStateIconMorph=function(e){this.color=e,UncollapsedStateIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new UncollapsedStateIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.UncollapsedStateIconMorph,"name",{value:"UncollapsedStateIconMorph"}),window.UncollapsedStateIconMorph.__super__=window.IconMorph.prototype,window.UncollapsedStateIconMorph=extend(window.UncollapsedStateIconMorph,window.IconMorph),window.UncollapsedStateIconMorph.instances=new Set,window.VaporwaveBackgroundIconAppearance=function(e){this.morph=e,VaporwaveBackgroundIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.VaporwaveBackgroundIconAppearance,"name",{value:"VaporwaveBackgroundIconAppearance"}),window.VaporwaveBackgroundIconAppearance.__super__=window.IconAppearance.prototype,window.VaporwaveBackgroundIconAppearance=extend(window.VaporwaveBackgroundIconAppearance,window.IconAppearance),window.VaporwaveBackgroundIconAppearance.prototype.backgroundGradient=nil,window.VaporwaveBackgroundIconAppearance.prototype.paintFunction=function(e){var t;return"rgb(0, 0, 159)","rgb(255, 255, 0)","rgb(0, 0, 82)","rgb(255, 6, 136)",null==this.backgroundGradient&&(t=function(e){return e.addColorStop(0,"rgb(0, 0, 82)"),e.addColorStop(.14,"rgb(0, 0, 159)"),e.addColorStop(.58,"rgb(255, 6, 136)"),e.addColorStop(1,"rgb(255, 255, 0)"),e},this.backgroundGradient=t(e.createLinearGradient(50,91.61,50,-28.19))),e.beginPath(),e.rect(0,0,100,99.5),e.fillStyle=this.backgroundGradient,e.fill()},window.VaporwaveBackgroundIconAppearance.instances=new Set,window.VaporwaveBackgroundIconWdgt=function(e){this.color=e,VaporwaveBackgroundIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new VaporwaveBackgroundIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.VaporwaveBackgroundIconWdgt,"name",{value:"VaporwaveBackgroundIconWdgt"}),window.VaporwaveBackgroundIconWdgt.__super__=window.IconMorph.prototype,window.VaporwaveBackgroundIconWdgt=extend(window.VaporwaveBackgroundIconWdgt,window.IconMorph),window.VaporwaveBackgroundIconWdgt.instances=new Set,window.VaporwaveSunIconAppearance=function(e){this.morph=e,VaporwaveSunIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.VaporwaveSunIconAppearance,"name",{value:"VaporwaveSunIconAppearance"}),window.VaporwaveSunIconAppearance.__super__=window.IconAppearance.prototype,window.VaporwaveSunIconAppearance=extend(window.VaporwaveSunIconAppearance,window.IconAppearance),window.VaporwaveSunIconAppearance.prototype.sunGradient=nil,window.VaporwaveSunIconAppearance.prototype.paintFunction=function(e){var t;return"rgb(0, 0, 255)","rgb(255, 0, 255)","rgb(255, 244, 6)",null==this.sunGradient&&(t=function(e){return e.addColorStop(0,"rgb(0, 0, 255)"),e.addColorStop(.43,"rgb(255, 0, 255)"),e.addColorStop(1,"rgb(255, 244, 6)"),e},this.sunGradient=t(e.createLinearGradient(50,83.39,50,5.13))),this.oval(e,2,2,96,96),e.fillStyle=this.sunGradient,e.fill()},window.VaporwaveSunIconAppearance.instances=new Set,window.VaporwaveSunIconWdgt=function(e){this.color=e,VaporwaveSunIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new VaporwaveSunIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.VaporwaveSunIconWdgt,"name",{value:"VaporwaveSunIconWdgt"}),window.VaporwaveSunIconWdgt.__super__=window.IconMorph.prototype,window.VaporwaveSunIconWdgt=extend(window.VaporwaveSunIconWdgt,window.IconMorph),window.VaporwaveSunIconWdgt.instances=new Set,window.VideoPlayIconAppearance=function(e){this.morph=e,VideoPlayIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.VideoPlayIconAppearance,"name",{value:"VideoPlayIconAppearance"}),window.VideoPlayIconAppearance.__super__=window.IconAppearance.prototype,window.VideoPlayIconAppearance=extend(window.VideoPlayIconAppearance,window.IconAppearance),window.VideoPlayIconAppearance.prototype.paintFunction=function(e){var t;return"rgb(255, 255, 255)",t="rgb(255, 38, 0)",e.beginPath(),e.moveTo(90.5,.5),e.lineTo(9,.5),e.lineTo(9,.5),e.bezierCurveTo(0,.5,.5,0,.5,9),e.lineTo(.5,90.5),e.lineTo(.5,90.5),e.bezierCurveTo(.5,100,0,99.5,9,99.5),e.lineTo(90.5,99.5),e.lineTo(90.5,99.5),e.bezierCurveTo(100,99.5,99.5,100,99.5,90.5),e.lineTo(99.5,9),e.lineTo(99.5,9),e.bezierCurveTo(99.5,0,100,.5,90.5,.5),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(92.5,32.5),e.bezierCurveTo(92.5,32.5,91.5,26.5,89,24),e.bezierCurveTo(85.5,21,82,20.5,80,20.5),e.bezierCurveTo(68,19.5,50,19.5,50,19.5),e.lineTo(50,19.5),e.bezierCurveTo(50,19.5,31.5,19.5,19.5,20.5),e.bezierCurveTo(18,20.5,14,20.5,11,24),e.bezierCurveTo(8,26.5,7.5,32.5,7.5,32.5),e.bezierCurveTo(7.5,32.5,6.5,39.5,6.5,46),e.lineTo(6.5,53),e.bezierCurveTo(6.5,59.5,7.5,66.5,7.5,66.5),e.bezierCurveTo(7.5,66.5,8,72.5,11,75),e.bezierCurveTo(14,78,18.5,78,20.5,78.5),e.bezierCurveTo(27.5,79,50,79.5,50,79.5),e.bezierCurveTo(50,79.5,68,79.5,80,78.5),e.bezierCurveTo(82,78.5,85.5,78.5,89,75),e.bezierCurveTo(91.5,72.5,92.5,66.5,92.5,66.5),e.bezierCurveTo(92.5,66.5,93.5,59.5,93.5,53),e.lineTo(93.5,46.5),e.bezierCurveTo(93.5,39.5,92.5,32.5,92.5,32.5),e.closePath(),e.fillStyle="rgb(255, 255, 255)",e.fill(),e.beginPath(),e.moveTo(41,60.5),e.lineTo(64.5,48.5),e.lineTo(41,36.5),e.lineTo(41,60.5),e.closePath(),e.fillStyle=t,e.fill()},window.VideoPlayIconAppearance.instances=new Set,window.VideoPlayIconWdgt=function(e){this.color=e,VideoPlayIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new VideoPlayIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.VideoPlayIconWdgt,"name",{value:"VideoPlayIconWdgt"}),window.VideoPlayIconWdgt.__super__=window.IconMorph.prototype,window.VideoPlayIconWdgt=extend(window.VideoPlayIconWdgt,window.IconMorph),window.VideoPlayIconWdgt.instances=new Set,window.WelcomeIconAppearance=function(e){this.morph=e,WelcomeIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WelcomeIconAppearance,"name",{value:"WelcomeIconAppearance"}),window.WelcomeIconAppearance.__super__=window.IconAppearance.prototype,window.WelcomeIconAppearance=extend(window.WelcomeIconAppearance,window.IconAppearance),window.WelcomeIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(97.26,70.79),e.bezierCurveTo(97.19,70.22,82.93,34.78,82.93,34.78),e.lineTo(81.81,33.52),e.bezierCurveTo(81.67,31.89,80.85,30.39,79.54,29.37),e.lineTo(77.74,24.85),e.bezierCurveTo(76.55,21.85,75.44,20.19,74.35,19.78),e.bezierCurveTo(73.84,19.59,69.87,21.34,69.76,21.44),e.lineTo(69.36,20.02),e.bezierCurveTo(69.4,19.91,70.16,17.4,69.66,14.48),e.bezierCurveTo(69.19,11.74,66.5,8.12,61.07,6.49),e.bezierCurveTo(61.07,6.49,50.53,3.33,47.56,3.82),e.bezierCurveTo(44.78,4.28,41.11,5.95,39.45,11.3),e.lineTo(37.34,18.09),e.lineTo(34.31,17.18),e.bezierCurveTo(33.35,16.89,31.73,17.09,31.2,18.81),e.bezierCurveTo(31.2,18.81,29.54,23.97,29.64,24.6),e.bezierCurveTo(29.8,25.5,30.41,26.16,31.37,26.44),e.lineTo(62.16,36.71),e.bezierCurveTo(61.96,37,61.7,38.23,61.7,38.23),e.bezierCurveTo(61.68,38.32,68.27,39.64,69.68,39.9),e.lineTo(67.21,41.42),e.lineTo(75.41,63.47),e.lineTo(53.54,63.47),e.lineTo(46.44,72.61),e.lineTo(39.34,63.47),e.lineTo(30.44,63.62),e.bezierCurveTo(30.11,63.68,23.97,65.61,22.33,67.01),e.bezierCurveTo(20.81,68.31,19,73.62,19,77.34),e.lineTo(19,95.28),e.lineTo(74.87,95.28),e.lineTo(74.87,79.19),e.bezierCurveTo(74.87,79.19,90.58,79.14,90.65,79.13),e.bezierCurveTo(92.66,78.89,94.46,77.89,95.71,76.31),e.bezierCurveTo(96.96,74.74,97.51,72.77,97.26,70.79),e.closePath(),e.moveTo(69.38,32.39),e.lineTo(68.73,32.3),e.lineTo(69.43,29.94),e.bezierCurveTo(69.43,29.94,70.59,30.51,70.62,30.59),e.bezierCurveTo(70.63,30.61,69.47,32.37,69.38,32.39),e.closePath(),e.strokeStyle=n,e.lineWidth=3.5,e.miterLimit=4,e.stroke(),this.oval(e,32,31,31,35),e.strokeStyle=n,e.lineWidth=3.5,e.stroke(),e.beginPath(),e.moveTo(94.27,69.39),e.bezierCurveTo(94.2,68.86,81.04,35.74,81.04,35.74),e.lineTo(80,34.57),e.bezierCurveTo(79.87,33.04,79.11,31.64,77.9,30.69),e.lineTo(76.24,26.46),e.bezierCurveTo(75.14,23.66,74.11,22.11,73.11,21.73),e.bezierCurveTo(72.64,21.55,71.45,22.1,71.45,22.1),e.bezierCurveTo(70.95,22.35,70.75,22.82,70.79,23.26),e.bezierCurveTo(70.41,23.06,70.07,22.96,69.75,22.96),e.bezierCurveTo(69.25,22.95,68.97,23.18,68.87,23.28),e.bezierCurveTo(68.87,23.28,67.83,25.12,68.15,25.54),e.lineTo(68.92,26.53),e.bezierCurveTo(67.79,26.19,66.89,26.13,66.24,26.36),e.lineTo(67.59,21.94),e.bezierCurveTo(67.62,21.84,68.33,19.5,67.87,16.77),e.bezierCurveTo(67.43,14.21,65.86,10.83,60.85,9.3),e.bezierCurveTo(60.85,9.3,51.11,6.35,48.38,6.81),e.bezierCurveTo(45.8,7.24,42.41,8.8,40.88,13.8),e.lineTo(38.93,20.15),e.lineTo(36.14,19.29),e.bezierCurveTo(35.25,19.02,33.76,19.21,33.26,20.82),e.bezierCurveTo(33.26,20.82,32.64,22.87,32.74,23.45),e.bezierCurveTo(32.88,24.3,33.45,24.91,34.33,25.18),e.lineTo(62.77,33.85),e.bezierCurveTo(62.58,34.12,62.34,35.27,62.34,35.27),e.bezierCurveTo(62.32,35.36,62.27,35.82,62.45,36.35),e.bezierCurveTo(62.71,37.12,63.33,37.61,64.2,37.73),e.lineTo(70.07,38.55),e.bezierCurveTo(70.91,39.59,72.05,40.28,73.35,40.53),e.lineTo(71.08,41.95),e.lineTo(79.56,65.33),e.lineTo(53.9,65.33),e.lineTo(47.34,73.87),e.lineTo(40.78,65.33),e.lineTo(32.56,65.46),e.bezierCurveTo(32.26,65.52,26.59,67.32,25.08,68.63),e.bezierCurveTo(23.67,69.85,22,72.04,22,75.52),e.lineTo(22,92.28),e.lineTo(72.68,92.28),e.lineTo(72.68,77.24),e.bezierCurveTo(72.68,77.24,88.09,77.2,88.16,77.19),e.bezierCurveTo(90.02,76.96,91.68,76.02,92.83,74.55),e.bezierCurveTo(93.99,73.08,94.5,71.25,94.27,69.39),e.closePath(),e.moveTo(68.52,33.51),e.lineTo(67.92,33.42),e.lineTo(68.56,31.22),e.bezierCurveTo(68.56,31.22,69.63,31.76,69.66,31.83),e.bezierCurveTo(69.67,31.85,68.61,33.49,68.52,33.51),e.closePath(),e.fillStyle=n,e.fill(),e.strokeStyle=t,e.lineWidth=3.5,e.miterLimit=4,e.stroke(),this.oval(e,35,34,26,29),e.fillStyle=n,e.fill(),e.strokeStyle=t,e.lineWidth=3.5,e.stroke()},window.WelcomeIconAppearance.instances=new Set,window.WelcomeIconWdgt=function(e){this.color=e,WelcomeIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new WelcomeIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WelcomeIconWdgt,"name",{value:"WelcomeIconWdgt"}),window.WelcomeIconWdgt.__super__=window.IconMorph.prototype,window.WelcomeIconWdgt=extend(window.WelcomeIconWdgt,window.IconMorph),window.WelcomeIconWdgt.instances=new Set,window.WidgetIconAppearance=function(e){this.morph=e,WidgetIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WidgetIconAppearance,"name",{value:"WidgetIconAppearance"}),window.WidgetIconAppearance.__super__=window.IconAppearance.prototype,window.WidgetIconAppearance=extend(window.WidgetIconAppearance,window.IconAppearance),window.WidgetIconAppearance.prototype.paintFunction=function(e){var t,n;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),n=WorldMorph.preferencesAndSettings.outlineColorString,e.beginPath(),e.moveTo(75.84,2.66),e.bezierCurveTo(76.24,3.42,86.61,23.22,86.61,23.22),e.lineTo(97.42,43.78),e.bezierCurveTo(97.71,44.33,97.86,44.94,97.86,45.57),e.bezierCurveTo(97.86,47.55,96.4,49.15,94.61,49.16),e.bezierCurveTo(94.61,49.16,89.27,49.16,83.91,49.16),e.bezierCurveTo(91.29,50.22,97,56.61,97,64.27),e.lineTo(97,81.73),e.bezierCurveTo(97,90.13,90.13,97,81.73,97),e.lineTo(64.27,97),e.bezierCurveTo(56.14,97,49.44,90.56,49.02,82.53),e.bezierCurveTo(45.32,91.03,36.83,97,27,97),e.bezierCurveTo(13.78,97,3,86.22,3,73),e.bezierCurveTo(3,63.17,8.97,54.68,17.47,50.98),e.bezierCurveTo(9.44,50.56,3,43.86,3,35.73),e.lineTo(3,18.27),e.bezierCurveTo(3,9.87,9.87,3,18.27,3),e.lineTo(35.73,3),e.bezierCurveTo(44.13,3,51,9.87,51,18.27),e.lineTo(51,35.73),e.bezierCurveTo(51,37.54,50.68,39.28,50.1,40.89),e.bezierCurveTo(53.07,35.24,59.39,23.22,59.39,23.22),e.lineTo(70.15,2.69),e.lineTo(70.22,2.54),e.bezierCurveTo(70.78,1.55,71.75,.91,72.82,.84),e.bezierCurveTo(74.07,.77,75.24,1.48,75.84,2.66),e.closePath(),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(72.84,4.84),e.lineTo(72.85,4.84),e.bezierCurveTo(71.86,4.9,70.97,5.51,70.49,6.46),e.lineTo(61.03,24.44),e.lineTo(51.53,42.44),e.lineTo(51.53,42.45),e.bezierCurveTo(50.73,43.95,51.2,45.87,52.58,46.74),e.bezierCurveTo(53.01,47.01,53.51,47.16,54.01,47.16),e.lineTo(73,47.16),e.lineTo(92,47.16),e.lineTo(91.99,47.16),e.bezierCurveTo(93.57,47.16,94.86,45.75,94.86,44.02),e.bezierCurveTo(94.86,43.47,94.73,42.93,94.47,42.45),e.lineTo(84.97,24.44),e.lineTo(75.5,6.44),e.lineTo(75.51,6.46),e.bezierCurveTo(74.98,5.41,73.95,4.78,72.85,4.84),e.lineTo(72.84,4.84),e.closePath(),e.moveTo(19,5),e.bezierCurveTo(11.3,5,5,11.3,5,19),e.lineTo(5,35),e.bezierCurveTo(5,42.7,11.3,49,19,49),e.lineTo(35,49),e.bezierCurveTo(42.7,49,49,42.7,49,35),e.lineTo(49,19),e.bezierCurveTo(49,11.3,42.7,5,35,5),e.lineTo(19,5),e.closePath(),e.moveTo(19,11),e.lineTo(35,11),e.bezierCurveTo(39.48,11,43,14.52,43,19),e.lineTo(43,35),e.bezierCurveTo(43,39.48,39.48,43,35,43),e.lineTo(19,43),e.bezierCurveTo(14.52,43,11,39.48,11,35),e.lineTo(11,19),e.bezierCurveTo(11,14.52,14.52,11,19,11),e.closePath(),e.moveTo(73,14.28),e.lineTo(80.03,27.56),e.lineTo(87,40.84),e.lineTo(73,40.84),e.lineTo(59,40.84),e.lineTo(65.97,27.56),e.lineTo(73,14.28),e.closePath(),e.moveTo(27,51),e.bezierCurveTo(14.89,51,5,60.89,5,73),e.bezierCurveTo(5,85.11,14.89,95,27,95),e.bezierCurveTo(39.11,95,49,85.11,49,73),e.bezierCurveTo(49,60.89,39.11,51,27,51),e.closePath(),e.moveTo(65,51),e.bezierCurveTo(57.3,51,51,57.3,51,65),e.lineTo(51,81),e.bezierCurveTo(51,88.7,57.3,95,65,95),e.lineTo(81,95),e.bezierCurveTo(88.7,95,95,88.7,95,81),e.lineTo(95,65),e.bezierCurveTo(95,57.3,88.7,51,81,51),e.lineTo(65,51),e.closePath(),e.moveTo(27,57),e.bezierCurveTo(35.87,57,43,64.13,43,73),e.bezierCurveTo(43,81.87,35.87,89,27,89),e.bezierCurveTo(18.13,89,11,81.87,11,73),e.bezierCurveTo(11,64.13,18.13,57,27,57),e.closePath(),e.moveTo(65,57),e.lineTo(81,57),e.bezierCurveTo(85.48,57,89,60.52,89,65),e.lineTo(89,81),e.bezierCurveTo(89,85.48,85.48,89,81,89),e.lineTo(65,89),e.bezierCurveTo(60.52,89,57,85.48,57,81),e.lineTo(57,65),e.bezierCurveTo(57,60.52,60.52,57,65,57),e.closePath(),e.fillStyle=t,e.fill()},window.WidgetIconAppearance.instances=new Set,window.WidgetIconWdgt=function(e){this.color=e,WidgetIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new WidgetIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WidgetIconWdgt,"name",{value:"WidgetIconWdgt"}),window.WidgetIconWdgt.__super__=window.IconMorph.prototype,window.WidgetIconWdgt=extend(window.WidgetIconWdgt,window.IconMorph),window.WidgetIconWdgt.instances=new Set,window.WindowWithCroppingPanelIconAppearance=function(e){this.morph=e,WindowWithCroppingPanelIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowWithCroppingPanelIconAppearance,"name",{value:"WindowWithCroppingPanelIconAppearance"}),window.WindowWithCroppingPanelIconAppearance.__super__=window.IconAppearance.prototype,window.WindowWithCroppingPanelIconAppearance=extend(window.WindowWithCroppingPanelIconAppearance,window.IconAppearance),window.WindowWithCroppingPanelIconAppearance.prototype.paintFunction=function(e){var t;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),this.oval(e,11,11,6,6),e.fillStyle=t,e.fill(),this.oval(e,22,11,6,6),e.fillStyle=t,e.fill(),this.arc(e,-17,32,44,44,270,90,!0),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(5,24),e.lineTo(91,24),e.strokeStyle=t,e.lineWidth=4,e.stroke(),e.beginPath(),e.rect(4,4,88,88),e.strokeStyle=t,e.lineWidth=3.5,e.lineJoin="round",e.stroke()},window.WindowWithCroppingPanelIconAppearance.instances=new Set,window.WindowWithCroppingPanelIconWdgt=function(e){this.color=e,WindowWithCroppingPanelIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new WindowWithCroppingPanelIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowWithCroppingPanelIconWdgt,"name",{value:"WindowWithCroppingPanelIconWdgt"}),window.WindowWithCroppingPanelIconWdgt.__super__=window.IconMorph.prototype,window.WindowWithCroppingPanelIconWdgt=extend(window.WindowWithCroppingPanelIconWdgt,window.IconMorph),window.WindowWithCroppingPanelIconWdgt.instances=new Set,window.WindowWithScrollingPanelIconAppearance=function(e){this.morph=e,WindowWithScrollingPanelIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowWithScrollingPanelIconAppearance,"name",{value:"WindowWithScrollingPanelIconAppearance"}),window.WindowWithScrollingPanelIconAppearance.__super__=window.IconAppearance.prototype,window.WindowWithScrollingPanelIconAppearance=extend(window.WindowWithScrollingPanelIconAppearance,window.IconAppearance),window.WindowWithScrollingPanelIconAppearance.prototype.paintFunction=function(e){var t;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),this.oval(e,11,11,6,6),e.fillStyle=t,e.fill(),this.oval(e,22,11,6,6),e.fillStyle=t,e.fill(),this.arc(e,-17,32,44,44,270,90,!0),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(28,82),e.lineTo(83,82),e.strokeStyle=t,e.lineWidth=4,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(82,33),e.lineTo(82,60),e.strokeStyle=t,e.lineWidth=4,e.lineCap="round",e.stroke(),e.beginPath(),e.moveTo(5,24),e.lineTo(91,24),e.strokeStyle=t,e.lineWidth=4,e.stroke(),e.beginPath(),e.rect(4,4,88,88),e.strokeStyle=t,e.lineWidth=3.5,e.lineJoin="round",e.stroke()},window.WindowWithScrollingPanelIconAppearance.instances=new Set,window.WindowWithScrollingPanelIconWdgt=function(e){this.color=e,WindowWithScrollingPanelIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new WindowWithScrollingPanelIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowWithScrollingPanelIconWdgt,"name",{value:"WindowWithScrollingPanelIconWdgt"}),window.WindowWithScrollingPanelIconWdgt.__super__=window.IconMorph.prototype,window.WindowWithScrollingPanelIconWdgt=extend(window.WindowWithScrollingPanelIconWdgt,window.IconMorph),window.WindowWithScrollingPanelIconWdgt.instances=new Set,window.WindowsToolbarIconAppearance=function(e){this.morph=e,WindowsToolbarIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowsToolbarIconAppearance,"name",{value:"WindowsToolbarIconAppearance"}),window.WindowsToolbarIconAppearance.__super__=window.IconAppearance.prototype,window.WindowsToolbarIconAppearance=extend(window.WindowsToolbarIconAppearance,window.IconAppearance),window.WindowsToolbarIconAppearance.prototype.paintFunction=function(e){var t;return t=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),this.oval(e,11,11,6,6),e.fillStyle=t,e.fill(),this.oval(e,22,11,6,6),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(5,24),e.lineTo(91,24),e.strokeStyle=t,e.lineWidth=4,e.stroke(),e.beginPath(),e.rect(4,4,88,88),e.strokeStyle=t,e.lineWidth=3.5,e.lineJoin="round",e.stroke()},window.WindowsToolbarIconAppearance.instances=new Set,window.WindowsToolbarIconWdgt=function(e){this.color=e,WindowsToolbarIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new WindowsToolbarIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowsToolbarIconWdgt,"name",{value:"WindowsToolbarIconWdgt"}),window.WindowsToolbarIconWdgt.__super__=window.IconMorph.prototype,window.WindowsToolbarIconWdgt=extend(window.WindowsToolbarIconWdgt,window.IconMorph),window.WindowsToolbarIconWdgt.instances=new Set,window.SimpleUSAMapIconAppearance=function(e){this.morph=e,SimpleUSAMapIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(500,313),this.specificationSize=new Point(1e3,626),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleUSAMapIconAppearance,"name",{value:"SimpleUSAMapIconAppearance"}),window.SimpleUSAMapIconAppearance.__super__=window.IconAppearance.prototype,window.SimpleUSAMapIconAppearance=extend(window.SimpleUSAMapIconAppearance,window.IconAppearance),window.SimpleUSAMapIconAppearance.prototype.paintFunction=function(e){var t;return t=this.morph.color.toString(),e.beginPath(),e.moveTo(967,167),e.lineTo(971,169),e.lineTo(972,175),e.lineTo(962,182),e.lineTo(954,184),e.lineTo(953,181),e.lineTo(949,179),e.lineTo(946,173),e.lineTo(938,175),e.lineTo(922,179),e.lineTo(910,182),e.lineTo(910,166),e.lineTo(923,163),e.lineTo(923,163),e.lineTo(923,163),e.lineTo(924,163),e.lineTo(924,163),e.lineTo(944,158),e.lineTo(945,155),e.lineTo(948,152),e.lineTo(949,152),e.lineTo(953,164),e.lineTo(962,175),e.lineTo(971,173),e.lineTo(967,167),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(953,184),e.lineTo(943,191),e.lineTo(943,188),e.lineTo(939,176),e.lineTo(945,174),e.lineTo(948,180),e.lineTo(952,182),e.lineTo(953,184),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(910,217),e.lineTo(909,210),e.lineTo(909,209),e.lineTo(909,209),e.lineTo(909,209),e.lineTo(909,209),e.lineTo(894,204),e.lineTo(894,203),e.lineTo(893,203),e.lineTo(892,203),e.lineTo(892,203),e.lineTo(890,202),e.lineTo(887,201),e.lineTo(885,199),e.lineTo(885,196),e.lineTo(882,194),e.lineTo(877,191),e.lineTo(853,196),e.lineTo(828,202),e.lineTo(801,207),e.lineTo(800,201),e.lineTo(813,184),e.lineTo(812,182),e.lineTo(812,182),e.lineTo(808,176),e.lineTo(816,172),e.lineTo(829,170),e.lineTo(844,169),e.lineTo(856,158),e.lineTo(852,149),e.lineTo(850,146),e.lineTo(863,126),e.lineTo(870,120),e.lineTo(894,114),e.lineTo(894,118),e.lineTo(895,121),e.lineTo(897,128),e.lineTo(898,132),e.lineTo(898,137),e.lineTo(901,143),e.lineTo(901,146),e.lineTo(902,148),e.lineTo(904,147),e.lineTo(908,166),e.lineTo(908,182),e.lineTo(908,182),e.lineTo(908,183),e.lineTo(908,183),e.lineTo(909,183),e.lineTo(912,201),e.lineTo(913,202),e.lineTo(910,205),e.lineTo(912,209),e.lineTo(913,209),e.lineTo(936,199),e.lineTo(941,202),e.lineTo(920,214),e.lineTo(910,217),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(900,254),e.lineTo(895,254),e.lineTo(889,249),e.lineTo(888,249),e.lineTo(887,246),e.lineTo(889,244),e.lineTo(892,241),e.lineTo(893,239),e.lineTo(896,235),e.lineTo(899,231),e.lineTo(891,226),e.lineTo(890,223),e.lineTo(888,223),e.lineTo(888,220),e.lineTo(889,217),e.lineTo(887,214),e.lineTo(890,212),e.lineTo(891,206),e.lineTo(893,205),e.lineTo(905,209),e.lineTo(907,210),e.lineTo(904,223),e.lineTo(909,223),e.lineTo(910,240),e.lineTo(902,259),e.lineTo(900,254),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(891,304),e.lineTo(894,288),e.lineTo(895,286),e.lineTo(897,285),e.lineTo(892,304),e.lineTo(891,304),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(820,446),e.lineTo(814,464),e.lineTo(812,478),e.lineTo(809,478),e.lineTo(804,477),e.lineTo(801,478),e.lineTo(802,487),e.lineTo(801,488),e.lineTo(799,485),e.lineTo(765,486),e.lineTo(744,488),e.lineTo(741,482),e.lineTo(739,479),e.lineTo(738,476),e.lineTo(738,473),e.lineTo(738,468),e.lineTo(736,464),e.lineTo(736,457),e.lineTo(739,452),e.lineTo(737,447),e.lineTo(733,440),e.lineTo(726,417),e.lineTo(717,389),e.lineTo(732,388),e.lineTo(742,386),e.lineTo(757,384),e.lineTo(764,383),e.lineTo(764,384),e.lineTo(761,390),e.lineTo(767,394),e.lineTo(771,394),e.lineTo(775,401),e.lineTo(778,405),e.lineTo(786,410),e.lineTo(788,412),e.lineTo(793,416),e.lineTo(796,421),e.lineTo(803,425),e.lineTo(806,430),e.lineTo(807,432),e.lineTo(807,434),e.lineTo(811,436),e.lineTo(814,440),e.lineTo(814,445),e.lineTo(817,445),e.lineTo(820,446),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(842,609),e.lineTo(837,599),e.lineTo(827,595),e.lineTo(813,576),e.lineTo(800,560),e.lineTo(796,549),e.lineTo(798,534),e.lineTo(791,521),e.lineTo(775,508),e.lineTo(761,501),e.lineTo(739,513),e.lineTo(734,508),e.lineTo(713,499),e.lineTo(691,504),e.lineTo(692,502),e.lineTo(692,496),e.lineTo(687,491),e.lineTo(687,490),e.lineTo(698,488),e.lineTo(740,483),e.lineTo(744,489),e.lineTo(765,487),e.lineTo(798,486),e.lineTo(801,491),e.lineTo(804,487),e.lineTo(803,479),e.lineTo(804,478),e.lineTo(809,479),e.lineTo(812,479),e.lineTo(818,495),e.lineTo(829,514),e.lineTo(841,530),e.lineTo(843,539),e.lineTo(856,562),e.lineTo(861,583),e.lineTo(860,604),e.lineTo(852,610),e.lineTo(842,609),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(689,504),e.lineTo(672,503),e.lineTo(668,467),e.lineTo(668,429),e.lineTo(669,398),e.lineTo(669,398),e.lineTo(668,394),e.lineTo(691,392),e.lineTo(716,390),e.lineTo(724,418),e.lineTo(732,441),e.lineTo(736,448),e.lineTo(738,452),e.lineTo(735,456),e.lineTo(735,464),e.lineTo(736,469),e.lineTo(736,473),e.lineTo(736,477),e.lineTo(738,480),e.lineTo(739,482),e.lineTo(698,486),e.lineTo(686,489),e.lineTo(686,492),e.lineTo(691,497),e.lineTo(690,501),e.lineTo(689,504),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(670,504),e.lineTo(659,510),e.lineTo(647,510),e.lineTo(647,508),e.lineTo(646,504),e.lineTo(643,502),e.lineTo(642,499),e.lineTo(643,495),e.lineTo(643,490),e.lineTo(623,491),e.lineTo(605,492),e.lineTo(604,487),e.lineTo(606,484),e.lineTo(608,478),e.lineTo(610,473),e.lineTo(613,469),e.lineTo(614,465),e.lineTo(617,462),e.lineTo(614,457),e.lineTo(615,454),e.lineTo(611,450),e.lineTo(613,446),e.lineTo(612,445),e.lineTo(612,440),e.lineTo(610,434),e.lineTo(610,429),e.lineTo(614,420),e.lineTo(615,415),e.lineTo(619,412),e.lineTo(621,410),e.lineTo(623,403),e.lineTo(623,403),e.lineTo(623,403),e.lineTo(623,400),e.lineTo(626,398),e.lineTo(627,397),e.lineTo(645,395),e.lineTo(666,394),e.lineTo(668,398),e.lineTo(667,429),e.lineTo(667,467),e.lineTo(670,504),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(624,537),e.lineTo(606,533),e.lineTo(593,529),e.lineTo(577,526),e.lineTo(559,526),e.lineTo(558,524),e.lineTo(560,520),e.lineTo(563,517),e.lineTo(563,512),e.lineTo(561,510),e.lineTo(563,505),e.lineTo(564,502),e.lineTo(566,493),e.lineTo(564,490),e.lineTo(561,484),e.lineTo(559,479),e.lineTo(558,475),e.lineTo(555,472),e.lineTo(553,448),e.lineTo(572,447),e.lineTo(594,446),e.lineTo(611,446),e.lineTo(611,446),e.lineTo(610,450),e.lineTo(613,455),e.lineTo(612,458),e.lineTo(615,461),e.lineTo(613,464),e.lineTo(612,468),e.lineTo(608,472),e.lineTo(607,478),e.lineTo(605,483),e.lineTo(603,486),e.lineTo(604,493),e.lineTo(623,493),e.lineTo(641,492),e.lineTo(641,495),e.lineTo(640,499),e.lineTo(642,502),e.lineTo(645,505),e.lineTo(645,509),e.lineTo(646,511),e.lineTo(644,521),e.lineTo(651,534),e.lineTo(624,537),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(558,526),e.lineTo(540,532),e.lineTo(521,550),e.lineTo(500,560),e.lineTo(488,572),e.lineTo(483,583),e.lineTo(482,600),e.lineTo(482,600),e.lineTo(483,612),e.lineTo(487,619),e.lineTo(480,620),e.lineTo(464,614),e.lineTo(448,606),e.lineTo(442,595),e.lineTo(438,577),e.lineTo(426,563),e.lineTo(419,549),e.lineTo(409,531),e.lineTo(395,521),e.lineTo(377,520),e.lineTo(362,538),e.lineTo(346,529),e.lineTo(336,521),e.lineTo(332,508),e.lineTo(326,495),e.lineTo(315,483),e.lineTo(306,474),e.lineTo(299,465),e.lineTo(297,461),e.lineTo(298,460),e.lineTo(315,462),e.lineTo(352,465),e.lineTo(371,467),e.lineTo(379,360),e.lineTo(398,361),e.lineTo(417,362),e.lineTo(436,363),e.lineTo(434,409),e.lineTo(439,412),e.lineTo(442,414),e.lineTo(447,413),e.lineTo(450,418),e.lineTo(457,420),e.lineTo(462,421),e.lineTo(471,421),e.lineTo(474,427),e.lineTo(480,425),e.lineTo(485,428),e.lineTo(491,430),e.lineTo(494,427),e.lineTo(497,431),e.lineTo(504,429),e.lineTo(507,431),e.lineTo(511,429),e.lineTo(514,428),e.lineTo(518,427),e.lineTo(525,428),e.lineTo(529,426),e.lineTo(535,428),e.lineTo(543,433),e.lineTo(544,435),e.lineTo(549,434),e.lineTo(552,434),e.lineTo(552,446),e.lineTo(552,446),e.lineTo(552,447),e.lineTo(552,448),e.lineTo(552,448),e.lineTo(553,473),e.lineTo(557,476),e.lineTo(560,485),e.lineTo(563,490),e.lineTo(564,493),e.lineTo(563,502),e.lineTo(561,504),e.lineTo(560,511),e.lineTo(561,512),e.lineTo(561,516),e.lineTo(558,520),e.lineTo(556,524),e.lineTo(556,524),e.lineTo(556,524),e.lineTo(558,526),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(297,464),e.lineTo(263,460),e.lineTo(261,470),e.lineTo(247,468),e.lineTo(266,335),e.lineTo(266,335),e.lineTo(266,335),e.lineTo(295,339),e.lineTo(324,343),e.lineTo(357,346),e.lineTo(379,348),e.lineTo(378,356),e.lineTo(378,359),e.lineTo(370,465),e.lineTo(352,464),e.lineTo(315,460),e.lineTo(296,458),e.lineTo(296,461),e.lineTo(297,464),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(89,400),e.lineTo(84,386),e.lineTo(66,367),e.lineTo(59,364),e.lineTo(52,354),e.lineTo(38,348),e.lineTo(34,344),e.lineTo(35,331),e.lineTo(24,302),e.lineTo(18,266),e.lineTo(20,261),e.lineTo(14,251),e.lineTo(7,228),e.lineTo(10,208),e.lineTo(5,193),e.lineTo(14,176),e.lineTo(20,157),e.lineTo(90,178),e.lineTo(72,246),e.lineTo(98,287),e.lineTo(124,325),e.lineTo(150,362),e.lineTo(149,364),e.lineTo(150,367),e.lineTo(151,371),e.lineTo(152,376),e.lineTo(155,381),e.lineTo(148,385),e.lineTo(144,395),e.lineTo(139,400),e.lineTo(140,404),e.lineTo(140,408),e.lineTo(142,412),e.lineTo(140,415),e.lineTo(137,415),e.lineTo(137,415),e.lineTo(112,412),e.lineTo(90,409),e.lineTo(89,400),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(55,59),e.lineTo(57,39),e.lineTo(61,17),e.lineTo(80,28),e.lineTo(82,49),e.lineTo(89,43),e.lineTo(92,23),e.lineTo(90,3),e.lineTo(135,15),e.lineTo(180,27),e.lineTo(173,56),e.lineTo(166,89),e.lineTo(167,93),e.lineTo(166,96),e.lineTo(133,88),e.lineTo(126,89),e.lineTo(123,87),e.lineTo(119,88),e.lineTo(112,89),e.lineTo(105,87),e.lineTo(105,87),e.lineTo(105,87),e.lineTo(101,88),e.lineTo(97,88),e.lineTo(95,86),e.lineTo(90,83),e.lineTo(85,83),e.lineTo(79,83),e.lineTo(75,82),e.lineTo(72,80),e.lineTo(72,77),e.lineTo(72,73),e.lineTo(71,68),e.lineTo(66,65),e.lineTo(63,61),e.lineTo(58,60),e.lineTo(55,59),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(527,66),e.lineTo(527,56),e.lineTo(531,56),e.lineTo(534,69),e.lineTo(540,73),e.lineTo(551,75),e.lineTo(568,78),e.lineTo(584,85),e.lineTo(597,81),e.lineTo(615,86),e.lineTo(600,94),e.lineTo(589,104),e.lineTo(578,115),e.lineTo(578,118),e.lineTo(574,120),e.lineTo(575,133),e.lineTo(567,139),e.lineTo(565,144),e.lineTo(568,148),e.lineTo(567,154),e.lineTo(567,160),e.lineTo(567,166),e.lineTo(573,171),e.lineTo(575,171),e.lineTo(580,174),e.lineTo(582,176),e.lineTo(583,178),e.lineTo(588,182),e.lineTo(594,185),e.lineTo(595,187),e.lineTo(595,192),e.lineTo(595,194),e.lineTo(573,195),e.lineTo(548,196),e.lineTo(524,197),e.lineTo(506,197),e.lineTo(506,175),e.lineTo(504,152),e.lineTo(501,150),e.lineTo(500,146),e.lineTo(501,144),e.lineTo(505,141),e.lineTo(505,138),e.lineTo(505,138),e.lineTo(505,137),e.lineTo(505,136),e.lineTo(505,136),e.lineTo(505,132),e.lineTo(504,129),e.lineTo(503,125),e.lineTo(502,120),e.lineTo(502,114),e.lineTo(501,113),e.lineTo(501,106),e.lineTo(501,103),e.lineTo(500,100),e.lineTo(499,95),e.lineTo(497,90),e.lineTo(496,86),e.lineTo(495,81),e.lineTo(495,77),e.lineTo(496,74),e.lineTo(496,71),e.lineTo(495,67),e.lineTo(494,66),e.lineTo(527,66),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(665,235),e.lineTo(666,235),e.lineTo(673,235),e.lineTo(677,231),e.lineTo(696,230),e.lineTo(712,228),e.lineTo(715,250),e.lineTo(719,289),e.lineTo(718,291),e.lineTo(720,295),e.lineTo(720,296),e.lineTo(717,297),e.lineTo(715,299),e.lineTo(710,299),e.lineTo(710,304),e.lineTo(707,306),e.lineTo(706,310),e.lineTo(703,311),e.lineTo(700,318),e.lineTo(697,317),e.lineTo(695,313),e.lineTo(691,319),e.lineTo(690,322),e.lineTo(686,319),e.lineTo(681,323),e.lineTo(680,324),e.lineTo(674,322),e.lineTo(670,325),e.lineTo(665,323),e.lineTo(665,326),e.lineTo(664,326),e.lineTo(664,322),e.lineTo(666,315),e.lineTo(669,310),e.lineTo(670,306),e.lineTo(672,304),e.lineTo(672,300),e.lineTo(670,296),e.lineTo(669,295),e.lineTo(670,288),e.lineTo(665,235),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(687,215),e.lineTo(685,199),e.lineTo(678,185),e.lineTo(678,175),e.lineTo(681,163),e.lineTo(684,155),e.lineTo(690,149),e.lineTo(692,156),e.lineTo(693,156),e.lineTo(695,144),e.lineTo(698,141),e.lineTo(699,132),e.lineTo(713,135),e.lineTo(726,142),e.lineTo(729,152),e.lineTo(729,163),e.lineTo(721,174),e.lineTo(723,181),e.lineTo(727,180),e.lineTo(736,169),e.lineTo(742,170),e.lineTo(747,183),e.lineTo(749,192),e.lineTo(743,206),e.lineTo(741,215),e.lineTo(736,224),e.lineTo(730,225),e.lineTo(722,226),e.lineTo(713,228),e.lineTo(713,226),e.lineTo(696,228),e.lineTo(679,230),e.lineTo(681,228),e.lineTo(687,215),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(643,98),e.lineTo(640,109),e.lineTo(650,112),e.lineTo(663,120),e.lineTo(677,113),e.lineTo(692,109),e.lineTo(697,115),e.lineTo(703,116),e.lineTo(703,113),e.lineTo(707,113),e.lineTo(706,115),e.lineTo(715,123),e.lineTo(702,127),e.lineTo(688,126),e.lineTo(675,132),e.lineTo(664,136),e.lineTo(656,151),e.lineTo(654,149),e.lineTo(655,145),e.lineTo(655,145),e.lineTo(655,145),e.lineTo(651,145),e.lineTo(651,142),e.lineTo(652,140),e.lineTo(652,140),e.lineTo(652,140),e.lineTo(650,136),e.lineTo(646,135),e.lineTo(645,131),e.lineTo(641,131),e.lineTo(636,131),e.lineTo(626,128),e.lineTo(612,124),e.lineTo(610,120),e.lineTo(609,120),e.lineTo(619,114),e.lineTo(631,106),e.lineTo(643,98),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(788,211),e.lineTo(799,202),e.lineTo(799,205),e.lineTo(800,208),e.lineTo(828,203),e.lineTo(853,198),e.lineTo(877,193),e.lineTo(881,195),e.lineTo(883,197),e.lineTo(883,199),e.lineTo(886,203),e.lineTo(889,204),e.lineTo(891,204),e.lineTo(890,205),e.lineTo(888,211),e.lineTo(886,214),e.lineTo(887,217),e.lineTo(886,220),e.lineTo(887,224),e.lineTo(889,225),e.lineTo(890,227),e.lineTo(897,231),e.lineTo(895,234),e.lineTo(892,238),e.lineTo(891,240),e.lineTo(888,242),e.lineTo(884,242),e.lineTo(882,244),e.lineTo(881,246),e.lineTo(866,249),e.lineTo(850,252),e.lineTo(838,255),e.lineTo(832,256),e.lineTo(815,259),e.lineTo(797,262),e.lineTo(793,241),e.lineTo(793,239),e.lineTo(788,211),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(846,261),e.lineTo(847,262),e.lineTo(848,263),e.lineTo(847,267),e.lineTo(837,262),e.lineTo(836,270),e.lineTo(835,272),e.lineTo(832,276),e.lineTo(830,279),e.lineTo(828,278),e.lineTo(825,286),e.lineTo(825,288),e.lineTo(823,289),e.lineTo(820,288),e.lineTo(817,286),e.lineTo(816,293),e.lineTo(813,297),e.lineTo(813,301),e.lineTo(810,304),e.lineTo(808,309),e.lineTo(808,309),e.lineTo(808,309),e.lineTo(808,309),e.lineTo(808,310),e.lineTo(809,312),e.lineTo(809,314),e.lineTo(807,316),e.lineTo(804,316),e.lineTo(802,318),e.lineTo(799,317),e.lineTo(799,317),e.lineTo(799,317),e.lineTo(799,320),e.lineTo(793,323),e.lineTo(791,322),e.lineTo(785,325),e.lineTo(782,324),e.lineTo(780,322),e.lineTo(779,319),e.lineTo(780,318),e.lineTo(779,318),e.lineTo(778,318),e.lineTo(778,318),e.lineTo(775,318),e.lineTo(773,316),e.lineTo(770,314),e.lineTo(768,310),e.lineTo(765,307),e.lineTo(765,302),e.lineTo(764,301),e.lineTo(769,299),e.lineTo(771,295),e.lineTo(770,290),e.lineTo(772,285),e.lineTo(773,285),e.lineTo(774,288),e.lineTo(777,286),e.lineTo(777,284),e.lineTo(777,279),e.lineTo(780,275),e.lineTo(782,275),e.lineTo(785,274),e.lineTo(787,273),e.lineTo(791,266),e.lineTo(791,264),e.lineTo(792,258),e.lineTo(793,252),e.lineTo(793,252),e.lineTo(793,252),e.lineTo(793,246),e.lineTo(791,244),e.lineTo(792,243),e.lineTo(796,264),e.lineTo(815,261),e.lineTo(817,273),e.lineTo(820,270),e.lineTo(823,267),e.lineTo(826,265),e.lineTo(828,262),e.lineTo(834,262),e.lineTo(835,260),e.lineTo(838,258),e.lineTo(844,258),e.lineTo(846,261),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(765,362),e.lineTo(762,364),e.lineTo(761,367),e.lineTo(757,369),e.lineTo(753,371),e.lineTo(748,372),e.lineTo(746,375),e.lineTo(745,378),e.lineTo(741,380),e.lineTo(741,385),e.lineTo(731,386),e.lineTo(716,388),e.lineTo(691,390),e.lineTo(667,393),e.lineTo(645,394),e.lineTo(628,395),e.lineTo(629,394),e.lineTo(628,387),e.lineTo(631,384),e.lineTo(631,380),e.lineTo(635,377),e.lineTo(636,374),e.lineTo(637,371),e.lineTo(638,366),e.lineTo(639,362),e.lineTo(639,360),e.lineTo(666,358),e.lineTo(666,355),e.lineTo(669,354),e.lineTo(669,355),e.lineTo(682,354),e.lineTo(703,352),e.lineTo(714,351),e.lineTo(720,350),e.lineTo(737,349),e.lineTo(749,347),e.lineTo(750,346),e.lineTo(778,343),e.lineTo(786,341),e.lineTo(786,344),e.lineTo(787,347),e.lineTo(784,348),e.lineTo(781,352),e.lineTo(778,352),e.lineTo(772,358),e.lineTo(770,356),e.lineTo(765,360),e.lineTo(765,362),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(622,399),e.lineTo(622,403),e.lineTo(620,409),e.lineTo(618,411),e.lineTo(614,414),e.lineTo(612,420),e.lineTo(608,428),e.lineTo(608,434),e.lineTo(611,440),e.lineTo(610,444),e.lineTo(594,444),e.lineTo(572,446),e.lineTo(553,446),e.lineTo(554,433),e.lineTo(553,433),e.lineTo(549,433),e.lineTo(545,433),e.lineTo(544,432),e.lineTo(545,411),e.lineTo(545,388),e.lineTo(540,364),e.lineTo(563,364),e.lineTo(584,363),e.lineTo(604,362),e.lineTo(626,362),e.lineTo(627,364),e.lineTo(624,369),e.lineTo(622,373),e.lineTo(635,372),e.lineTo(635,373),e.lineTo(633,376),e.lineTo(630,379),e.lineTo(630,383),e.lineTo(627,386),e.lineTo(627,393),e.lineTo(626,395),e.lineTo(625,395),e.lineTo(625,396),e.lineTo(624,397),e.lineTo(625,397),e.lineTo(625,397),e.lineTo(622,399),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(171,318),e.lineTo(170,318),e.lineTo(170,319),e.lineTo(170,319),e.lineTo(167,337),e.lineTo(166,337),e.lineTo(164,340),e.lineTo(163,339),e.lineTo(159,337),e.lineTo(155,336),e.lineTo(152,339),e.lineTo(153,343),e.lineTo(152,348),e.lineTo(152,352),e.lineTo(152,357),e.lineTo(150,360),e.lineTo(125,324),e.lineTo(99,286),e.lineTo(73,246),e.lineTo(92,178),e.lineTo(118,185),e.lineTo(142,191),e.lineTo(142,191),e.lineTo(143,191),e.lineTo(143,191),e.lineTo(143,191),e.lineTo(194,202),e.lineTo(171,317),e.lineTo(171,318),e.lineTo(171,318),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(257,152),e.lineTo(257,151),e.lineTo(259,140),e.lineTo(291,145),e.lineTo(318,149),e.lineTo(348,152),e.lineTo(375,155),e.lineTo(372,203),e.lineTo(369,239),e.lineTo(368,250),e.lineTo(350,248),e.lineTo(314,244),e.lineTo(296,242),e.lineTo(279,239),e.lineTo(244,233),e.lineTo(247,212),e.lineTo(247,212),e.lineTo(248,211),e.lineTo(248,210),e.lineTo(248,210),e.lineTo(257,152),e.lineTo(257,152),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(380,133),e.lineTo(411,136),e.lineTo(445,137),e.lineTo(472,138),e.lineTo(503,138),e.lineTo(503,140),e.lineTo(500,143),e.lineTo(498,146),e.lineTo(500,151),e.lineTo(503,152),e.lineTo(505,175),e.lineTo(505,197),e.lineTo(502,197),e.lineTo(502,203),e.lineTo(504,206),e.lineTo(504,209),e.lineTo(503,212),e.lineTo(502,217),e.lineTo(505,220),e.lineTo(505,221),e.lineTo(503,220),e.lineTo(501,220),e.lineTo(501,217),e.lineTo(496,215),e.lineTo(491,212),e.lineTo(484,212),e.lineTo(480,212),e.lineTo(479,213),e.lineTo(473,211),e.lineTo(468,208),e.lineTo(433,207),e.lineTo(406,205),e.lineTo(373,202),e.lineTo(374,192),e.lineTo(377,154),e.lineTo(379,142),e.lineTo(380,133),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(596,196),e.lineTo(596,197),e.lineTo(598,200),e.lineTo(597,202),e.lineTo(597,207),e.lineTo(598,209),e.lineTo(599,213),e.lineTo(605,215),e.lineTo(607,218),e.lineTo(607,218),e.lineTo(607,219),e.lineTo(607,219),e.lineTo(607,219),e.lineTo(608,221),e.lineTo(611,222),e.lineTo(612,224),e.lineTo(615,226),e.lineTo(616,228),e.lineTo(616,234),e.lineTo(613,239),e.lineTo(612,241),e.lineTo(608,242),e.lineTo(602,244),e.lineTo(600,249),e.lineTo(603,251),e.lineTo(603,254),e.lineTo(601,258),e.lineTo(600,261),e.lineTo(596,265),e.lineTo(596,269),e.lineTo(594,268),e.lineTo(591,264),e.lineTo(570,265),e.lineTo(550,266),e.lineTo(533,266),e.lineTo(518,266),e.lineTo(517,263),e.lineTo(517,258),e.lineTo(517,254),e.lineTo(515,247),e.lineTo(513,244),e.lineTo(512,243),e.lineTo(512,238),e.lineTo(511,234),e.lineTo(508,230),e.lineTo(508,228),e.lineTo(507,224),e.lineTo(506,221),e.lineTo(506,219),e.lineTo(503,216),e.lineTo(505,213),e.lineTo(506,209),e.lineTo(506,206),e.lineTo(504,203),e.lineTo(504,198),e.lineTo(524,198),e.lineTo(548,197),e.lineTo(573,196),e.lineTo(596,196),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(639,347),e.lineTo(641,346),e.lineTo(644,349),e.lineTo(644,351),e.lineTo(644,354),e.lineTo(642,356),e.lineTo(638,359),e.lineTo(638,359),e.lineTo(637,359),e.lineTo(636,361),e.lineTo(637,360),e.lineTo(637,362),e.lineTo(636,365),e.lineTo(635,371),e.lineTo(624,371),e.lineTo(625,370),e.lineTo(629,364),e.lineTo(627,361),e.lineTo(604,361),e.lineTo(584,362),e.lineTo(563,362),e.lineTo(540,362),e.lineTo(540,351),e.lineTo(540,351),e.lineTo(540,327),e.lineTo(540,301),e.lineTo(535,298),e.lineTo(533,294),e.lineTo(531,292),e.lineTo(534,287),e.lineTo(533,283),e.lineTo(530,283),e.lineTo(526,280),e.lineTo(524,275),e.lineTo(521,272),e.lineTo(518,269),e.lineTo(518,269),e.lineTo(518,268),e.lineTo(533,268),e.lineTo(550,267),e.lineTo(570,266),e.lineTo(590,265),e.lineTo(593,269),e.lineTo(596,270),e.lineTo(594,276),e.lineTo(596,283),e.lineTo(600,288),e.lineTo(604,292),e.lineTo(608,295),e.lineTo(610,296),e.lineTo(611,300),e.lineTo(612,304),e.lineTo(615,306),e.lineTo(618,304),e.lineTo(621,307),e.lineTo(621,311),e.lineTo(619,314),e.lineTo(618,319),e.lineTo(621,323),e.lineTo(625,326),e.lineTo(628,326),e.lineTo(633,331),e.lineTo(634,331),e.lineTo(636,337),e.lineTo(636,340),e.lineTo(639,347),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(435,350),e.lineTo(416,349),e.lineTo(399,348),e.lineTo(401,314),e.lineTo(403,278),e.lineTo(435,280),e.lineTo(458,281),e.lineTo(500,282),e.lineTo(525,282),e.lineTo(530,285),e.lineTo(532,285),e.lineTo(532,287),e.lineTo(530,292),e.lineTo(531,294),e.lineTo(534,300),e.lineTo(538,302),e.lineTo(539,327),e.lineTo(539,351),e.lineTo(523,352),e.lineTo(488,351),e.lineTo(454,351),e.lineTo(435,350),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(369,250),e.lineTo(370,240),e.lineTo(373,204),e.lineTo(406,206),e.lineTo(433,208),e.lineTo(468,209),e.lineTo(472,212),e.lineTo(479,215),e.lineTo(480,214),e.lineTo(484,214),e.lineTo(490,214),e.lineTo(495,217),e.lineTo(499,219),e.lineTo(500,220),e.lineTo(502,222),e.lineTo(505,222),e.lineTo(505,224),e.lineTo(506,228),e.lineTo(506,230),e.lineTo(510,235),e.lineTo(511,238),e.lineTo(511,244),e.lineTo(512,245),e.lineTo(513,248),e.lineTo(515,254),e.lineTo(516,258),e.lineTo(515,263),e.lineTo(516,267),e.lineTo(517,269),e.lineTo(520,273),e.lineTo(523,276),e.lineTo(524,280),e.lineTo(500,280),e.lineTo(458,279),e.lineTo(435,278),e.lineTo(403,276),e.lineTo(405,253),e.lineTo(369,250),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(172,318),e.lineTo(176,296),e.lineTo(195,202),e.lineTo(242,211),e.lineTo(246,212),e.lineTo(242,234),e.lineTo(278,241),e.lineTo(264,334),e.lineTo(238,329),e.lineTo(202,323),e.lineTo(172,318),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(266,334),e.lineTo(279,241),e.lineTo(296,243),e.lineTo(314,246),e.lineTo(350,250),e.lineTo(367,251),e.lineTo(367,251),e.lineTo(368,251),e.lineTo(369,251),e.lineTo(369,251),e.lineTo(403,254),e.lineTo(402,276),e.lineTo(400,314),e.lineTo(397,348),e.lineTo(393,348),e.lineTo(380,347),e.lineTo(357,345),e.lineTo(325,341),e.lineTo(295,338),e.lineTo(266,334),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(380,358),e.lineTo(380,353),e.lineTo(380,348),e.lineTo(384,348),e.lineTo(397,349),e.lineTo(397,349),e.lineTo(398,349),e.lineTo(399,349),e.lineTo(399,349),e.lineTo(416,351),e.lineTo(435,351),e.lineTo(454,352),e.lineTo(488,353),e.lineTo(523,353),e.lineTo(539,353),e.lineTo(539,361),e.lineTo(539,362),e.lineTo(539,362),e.lineTo(539,363),e.lineTo(539,364),e.lineTo(539,364),e.lineTo(543,388),e.lineTo(543,411),e.lineTo(543,431),e.lineTo(535,427),e.lineTo(529,425),e.lineTo(525,426),e.lineTo(518,426),e.lineTo(514,426),e.lineTo(510,428),e.lineTo(507,429),e.lineTo(504,428),e.lineTo(498,429),e.lineTo(494,425),e.lineTo(491,428),e.lineTo(486,427),e.lineTo(480,423),e.lineTo(475,425),e.lineTo(472,419),e.lineTo(463,420),e.lineTo(457,418),e.lineTo(451,417),e.lineTo(448,411),e.lineTo(442,413),e.lineTo(439,411),e.lineTo(435,408),e.lineTo(437,362),e.lineTo(417,361),e.lineTo(398,360),e.lineTo(380,358),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(646,348),e.lineTo(645,345),e.lineTo(645,343),e.lineTo(650,344),e.lineTo(655,346),e.lineTo(658,343),e.lineTo(657,338),e.lineTo(661,336),e.lineTo(665,334),e.lineTo(662,331),e.lineTo(664,328),e.lineTo(664,327),e.lineTo(666,328),e.lineTo(666,325),e.lineTo(671,326),e.lineTo(675,323),e.lineTo(681,326),e.lineTo(682,324),e.lineTo(686,321),e.lineTo(690,324),e.lineTo(693,320),e.lineTo(695,316),e.lineTo(696,318),e.lineTo(701,320),e.lineTo(704,312),e.lineTo(707,311),e.lineTo(709,307),e.lineTo(711,305),e.lineTo(711,300),e.lineTo(715,301),e.lineTo(718,298),e.lineTo(721,298),e.lineTo(722,295),e.lineTo(720,291),e.lineTo(720,290),e.lineTo(726,290),e.lineTo(730,292),e.lineTo(735,296),e.lineTo(739,298),e.lineTo(743,299),e.lineTo(747,298),e.lineTo(751,299),e.lineTo(755,297),e.lineTo(757,296),e.lineTo(759,299),e.lineTo(763,301),e.lineTo(763,302),e.lineTo(764,307),e.lineTo(767,311),e.lineTo(768,314),e.lineTo(772,317),e.lineTo(774,320),e.lineTo(777,320),e.lineTo(772,326),e.lineTo(771,327),e.lineTo(766,330),e.lineTo(766,330),e.lineTo(766,330),e.lineTo(765,333),e.lineTo(765,333),e.lineTo(764,335),e.lineTo(759,339),e.lineTo(758,341),e.lineTo(758,341),e.lineTo(754,343),e.lineTo(749,345),e.lineTo(736,348),e.lineTo(719,349),e.lineTo(714,350),e.lineTo(703,350),e.lineTo(681,352),e.lineTo(670,354),e.lineTo(669,353),e.lineTo(664,353),e.lineTo(665,357),e.lineTo(641,359),e.lineTo(643,357),e.lineTo(646,355),e.lineTo(645,351),e.lineTo(645,350),e.lineTo(646,348),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(580,119),e.lineTo(595,114),e.lineTo(606,121),e.lineTo(606,122),e.lineTo(607,121),e.lineTo(607,121),e.lineTo(609,121),e.lineTo(611,126),e.lineTo(626,129),e.lineTo(636,133),e.lineTo(636,133),e.lineTo(636,133),e.lineTo(641,132),e.lineTo(644,132),e.lineTo(645,136),e.lineTo(649,137),e.lineTo(650,140),e.lineTo(650,142),e.lineTo(649,147),e.lineTo(649,147),e.lineTo(649,147),e.lineTo(653,146),e.lineTo(652,150),e.lineTo(652,150),e.lineTo(652,150),e.lineTo(655,153),e.lineTo(649,162),e.lineTo(653,166),e.lineTo(664,149),e.lineTo(665,148),e.lineTo(658,166),e.lineTo(656,184),e.lineTo(654,197),e.lineTo(654,198),e.lineTo(657,209),e.lineTo(657,214),e.lineTo(657,214),e.lineTo(657,214),e.lineTo(644,215),e.lineTo(626,216),e.lineTo(608,218),e.lineTo(606,214),e.lineTo(601,212),e.lineTo(599,209),e.lineTo(599,207),e.lineTo(598,202),e.lineTo(600,200),e.lineTo(597,196),e.lineTo(596,192),e.lineTo(596,187),e.lineTo(595,184),e.lineTo(589,181),e.lineTo(585,177),e.lineTo(583,175),e.lineTo(581,173),e.lineTo(575,170),e.lineTo(573,170),e.lineTo(569,165),e.lineTo(569,161),e.lineTo(569,154),e.lineTo(570,148),e.lineTo(566,143),e.lineTo(568,140),e.lineTo(575,135),e.lineTo(576,135),e.lineTo(576,121),e.lineTo(580,119),e.lineTo(580,119),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(787,211),e.lineTo(792,241),e.lineTo(790,243),e.lineTo(791,246),e.lineTo(791,252),e.lineTo(790,258),e.lineTo(789,263),e.lineTo(790,266),e.lineTo(786,272),e.lineTo(784,273),e.lineTo(782,274),e.lineTo(779,274),e.lineTo(775,279),e.lineTo(775,284),e.lineTo(775,286),e.lineTo(775,286),e.lineTo(774,284),e.lineTo(771,284),e.lineTo(769,290),e.lineTo(769,295),e.lineTo(767,298),e.lineTo(764,299),e.lineTo(760,298),e.lineTo(758,294),e.lineTo(754,295),e.lineTo(750,297),e.lineTo(747,296),e.lineTo(743,298),e.lineTo(740,296),e.lineTo(736,295),e.lineTo(730,290),e.lineTo(727,288),e.lineTo(721,289),e.lineTo(716,250),e.lineTo(714,229),e.lineTo(722,228),e.lineTo(730,227),e.lineTo(736,226),e.lineTo(748,229),e.lineTo(757,229),e.lineTo(770,224),e.lineTo(779,216),e.lineTo(787,211),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(669,288),e.lineTo(667,295),e.lineTo(669,297),e.lineTo(670,301),e.lineTo(670,301),e.lineTo(670,303),e.lineTo(669,305),e.lineTo(668,309),e.lineTo(665,314),e.lineTo(663,321),e.lineTo(662,325),e.lineTo(662,325),e.lineTo(662,326),e.lineTo(662,327),e.lineTo(663,327),e.lineTo(663,328),e.lineTo(661,332),e.lineTo(662,333),e.lineTo(660,335),e.lineTo(655,338),e.lineTo(656,343),e.lineTo(655,344),e.lineTo(650,343),e.lineTo(645,342),e.lineTo(643,345),e.lineTo(643,346),e.lineTo(641,344),e.lineTo(640,345),e.lineTo(637,340),e.lineTo(638,336),e.lineTo(636,330),e.lineTo(633,330),e.lineTo(628,325),e.lineTo(626,325),e.lineTo(622,322),e.lineTo(620,319),e.lineTo(620,315),e.lineTo(622,311),e.lineTo(623,306),e.lineTo(618,302),e.lineTo(615,304),e.lineTo(613,303),e.lineTo(613,300),e.lineTo(611,295),e.lineTo(609,294),e.lineTo(605,291),e.lineTo(601,287),e.lineTo(598,283),e.lineTo(596,276),e.lineTo(597,271),e.lineTo(597,271),e.lineTo(597,270),e.lineTo(597,270),e.lineTo(597,270),e.lineTo(597,266),e.lineTo(602,262),e.lineTo(603,258),e.lineTo(605,254),e.lineTo(604,250),e.lineTo(602,248),e.lineTo(603,245),e.lineTo(609,244),e.lineTo(613,242),e.lineTo(614,240),e.lineTo(617,234),e.lineTo(618,227),e.lineTo(616,225),e.lineTo(613,223),e.lineTo(612,221),e.lineTo(609,219),e.lineTo(609,219),e.lineTo(609,219),e.lineTo(626,218),e.lineTo(644,217),e.lineTo(657,216),e.lineTo(658,221),e.lineTo(664,233),e.lineTo(669,288),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(493,66),e.lineTo(493,67),e.lineTo(495,71),e.lineTo(494,73),e.lineTo(494,77),e.lineTo(494,81),e.lineTo(494,86),e.lineTo(496,91),e.lineTo(498,95),e.lineTo(499,100),e.lineTo(499,103),e.lineTo(499,106),e.lineTo(500,113),e.lineTo(500,115),e.lineTo(500,120),e.lineTo(501,125),e.lineTo(503,129),e.lineTo(504,133),e.lineTo(504,136),e.lineTo(472,137),e.lineTo(445,136),e.lineTo(411,134),e.lineTo(380,132),e.lineTo(381,103),e.lineTo(385,60),e.lineTo(439,64),e.lineTo(493,66),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(380,103),e.lineTo(378,132),e.lineTo(378,135),e.lineTo(376,154),e.lineTo(348,151),e.lineTo(318,147),e.lineTo(292,143),e.lineTo(258,138),e.lineTo(256,151),e.lineTo(255,150),e.lineTo(254,146),e.lineTo(251,145),e.lineTo(248,149),e.lineTo(245,149),e.lineTo(235,146),e.lineTo(234,148),e.lineTo(229,146),e.lineTo(226,149),e.lineTo(224,143),e.lineTo(223,139),e.lineTo(219,138),e.lineTo(219,136),e.lineTo(219,130),e.lineTo(216,126),e.lineTo(216,119),e.lineTo(215,114),e.lineTo(212,113),e.lineTo(209,116),e.lineTo(206,118),e.lineTo(204,116),e.lineTo(205,110),e.lineTo(208,109),e.lineTo(207,103),e.lineTo(210,97),e.lineTo(214,91),e.lineTo(208,90),e.lineTo(205,86),e.lineTo(202,78),e.lineTo(200,73),e.lineTo(197,70),e.lineTo(195,66),e.lineTo(196,62),e.lineTo(193,55),e.lineTo(197,31),e.lineTo(243,40),e.lineTo(290,48),e.lineTo(337,55),e.lineTo(384,60),e.lineTo(380,103),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(191,55),e.lineTo(194,62),e.lineTo(193,66),e.lineTo(195,71),e.lineTo(199,74),e.lineTo(200,78),e.lineTo(203,87),e.lineTo(207,91),e.lineTo(211,92),e.lineTo(209,96),e.lineTo(206,102),e.lineTo(206,102),e.lineTo(206,108),e.lineTo(204,110),e.lineTo(203,116),e.lineTo(206,120),e.lineTo(210,117),e.lineTo(212,115),e.lineTo(213,115),e.lineTo(215,119),e.lineTo(215,127),e.lineTo(217,130),e.lineTo(217,136),e.lineTo(218,139),e.lineTo(221,140),e.lineTo(223,143),e.lineTo(225,151),e.lineTo(229,148),e.lineTo(235,150),e.lineTo(236,148),e.lineTo(244,151),e.lineTo(249,151),e.lineTo(252,147),e.lineTo(253,147),e.lineTo(254,151),e.lineTo(255,152),e.lineTo(255,152),e.lineTo(256,152),e.lineTo(256,153),e.lineTo(246,210),e.lineTo(195,201),e.lineTo(175,196),e.lineTo(143,189),e.lineTo(153,149),e.lineTo(156,142),e.lineTo(156,138),e.lineTo(153,136),e.lineTo(154,133),e.lineTo(157,128),e.lineTo(162,125),e.lineTo(166,118),e.lineTo(170,112),e.lineTo(172,109),e.lineTo(172,105),e.lineTo(170,102),e.lineTo(167,97),e.lineTo(168,93),e.lineTo(168,89),e.lineTo(175,57),e.lineTo(182,27),e.lineTo(195,30),e.lineTo(191,55),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(55,61),e.lineTo(57,61),e.lineTo(62,63),e.lineTo(65,66),e.lineTo(69,69),e.lineTo(71,73),e.lineTo(70,77),e.lineTo(70,81),e.lineTo(74,84),e.lineTo(78,85),e.lineTo(85,84),e.lineTo(89,84),e.lineTo(94,87),e.lineTo(97,89),e.lineTo(101,89),e.lineTo(105,88),e.lineTo(112,91),e.lineTo(119,90),e.lineTo(122,89),e.lineTo(126,91),e.lineTo(133,90),e.lineTo(166,98),e.lineTo(168,103),e.lineTo(171,106),e.lineTo(171,109),e.lineTo(169,111),e.lineTo(165,117),e.lineTo(161,124),e.lineTo(156,127),e.lineTo(152,132),e.lineTo(151,137),e.lineTo(154,139),e.lineTo(155,142),e.lineTo(152,148),e.lineTo(152,148),e.lineTo(152,148),e.lineTo(142,189),e.lineTo(91,177),e.lineTo(20,155),e.lineTo(19,142),e.lineTo(32,119),e.lineTo(41,94),e.lineTo(55,61),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(138,417),e.lineTo(140,417),e.lineTo(144,412),e.lineTo(141,408),e.lineTo(141,404),e.lineTo(141,400),e.lineTo(146,396),e.lineTo(149,386),e.lineTo(157,382),e.lineTo(154,376),e.lineTo(152,371),e.lineTo(151,367),e.lineTo(151,364),e.lineTo(151,362),e.lineTo(153,357),e.lineTo(153,352),e.lineTo(154,348),e.lineTo(155,343),e.lineTo(154,339),e.lineTo(155,337),e.lineTo(159,338),e.lineTo(162,340),e.lineTo(165,342),e.lineTo(167,338),e.lineTo(168,338),e.lineTo(172,319),e.lineTo(201,325),e.lineTo(238,331),e.lineTo(264,335),e.lineTo(245,468),e.lineTo(206,461),e.lineTo(163,437),e.lineTo(136,420),e.lineTo(138,417),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(820,445),e.lineTo(817,444),e.lineTo(816,444),e.lineTo(815,439),e.lineTo(812,435),e.lineTo(808,433),e.lineTo(809,432),e.lineTo(807,429),e.lineTo(805,424),e.lineTo(797,420),e.lineTo(794,414),e.lineTo(789,411),e.lineTo(787,409),e.lineTo(779,404),e.lineTo(776,400),e.lineTo(772,393),e.lineTo(768,392),e.lineTo(763,389),e.lineTo(765,385),e.lineTo(767,383),e.lineTo(768,382),e.lineTo(778,377),e.lineTo(796,374),e.lineTo(804,374),e.lineTo(805,377),e.lineTo(807,374),e.lineTo(810,377),e.lineTo(811,380),e.lineTo(833,377),e.lineTo(858,394),e.lineTo(853,412),e.lineTo(839,429),e.lineTo(820,445),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(859,393),e.lineTo(833,375),e.lineTo(812,379),e.lineTo(811,376),e.lineTo(807,372),e.lineTo(806,373),e.lineTo(805,372),e.lineTo(796,373),e.lineTo(778,375),e.lineTo(768,381),e.lineTo(766,382),e.lineTo(756,383),e.lineTo(743,385),e.lineTo(742,381),e.lineTo(746,379),e.lineTo(747,376),e.lineTo(749,373),e.lineTo(753,372),e.lineTo(757,370),e.lineTo(762,368),e.lineTo(763,365),e.lineTo(767,363),e.lineTo(767,361),e.lineTo(770,358),e.lineTo(772,360),e.lineTo(779,354),e.lineTo(782,354),e.lineTo(785,349),e.lineTo(789,347),e.lineTo(788,344),e.lineTo(788,341),e.lineTo(791,341),e.lineTo(819,337),e.lineTo(857,330),e.lineTo(877,326),e.lineTo(896,321),e.lineTo(904,343),e.lineTo(896,363),e.lineTo(879,375),e.lineTo(865,391),e.lineTo(859,393),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(877,324),e.lineTo(857,328),e.lineTo(819,335),e.lineTo(795,339),e.lineTo(788,340),e.lineTo(788,340),e.lineTo(787,340),e.lineTo(786,340),e.lineTo(786,340),e.lineTo(778,342),e.lineTo(755,344),e.lineTo(755,344),e.lineTo(759,342),e.lineTo(759,342),e.lineTo(759,342),e.lineTo(759,341),e.lineTo(760,340),e.lineTo(765,336),e.lineTo(766,334),e.lineTo(767,333),e.lineTo(767,331),e.lineTo(772,328),e.lineTo(772,328),e.lineTo(772,328),e.lineTo(774,325),e.lineTo(778,321),e.lineTo(779,323),e.lineTo(782,325),e.lineTo(785,327),e.lineTo(791,323),e.lineTo(793,324),e.lineTo(801,321),e.lineTo(801,321),e.lineTo(801,321),e.lineTo(801,319),e.lineTo(802,320),e.lineTo(805,317),e.lineTo(807,317),e.lineTo(810,315),e.lineTo(810,315),e.lineTo(810,315),e.lineTo(810,312),e.lineTo(810,309),e.lineTo(811,305),e.lineTo(814,302),e.lineTo(814,301),e.lineTo(815,298),e.lineTo(817,293),e.lineTo(818,288),e.lineTo(820,289),e.lineTo(820,289),e.lineTo(823,291),e.lineTo(823,291),e.lineTo(823,291),e.lineTo(826,289),e.lineTo(826,289),e.lineTo(826,289),e.lineTo(827,286),e.lineTo(829,280),e.lineTo(830,281),e.lineTo(833,277),e.lineTo(836,273),e.lineTo(838,270),e.lineTo(838,265),e.lineTo(848,269),e.lineTo(849,264),e.lineTo(852,264),e.lineTo(854,265),e.lineTo(853,268),e.lineTo(858,269),e.lineTo(861,271),e.lineTo(863,272),e.lineTo(863,273),e.lineTo(863,275),e.lineTo(861,277),e.lineTo(860,281),e.lineTo(859,284),e.lineTo(859,284),e.lineTo(859,284),e.lineTo(860,284),e.lineTo(863,285),e.lineTo(866,284),e.lineTo(867,286),e.lineTo(867,286),e.lineTo(867,286),e.lineTo(867,286),e.lineTo(867,286),e.lineTo(881,297),e.lineTo(887,307),e.lineTo(896,320),e.lineTo(877,324),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(890,275),e.lineTo(883,246),e.lineTo(883,245),e.lineTo(884,243),e.lineTo(887,244),e.lineTo(885,246),e.lineTo(887,251),e.lineTo(887,251),e.lineTo(887,251),e.lineTo(887,251),e.lineTo(894,262),e.lineTo(901,272),e.lineTo(890,275),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(895,114),e.lineTo(924,106),e.lineTo(924,112),e.lineTo(926,115),e.lineTo(926,118),e.lineTo(923,121),e.lineTo(920,124),e.lineTo(920,126),e.lineTo(921,130),e.lineTo(920,136),e.lineTo(919,138),e.lineTo(919,144),e.lineTo(920,149),e.lineTo(920,151),e.lineTo(921,157),e.lineTo(920,161),e.lineTo(921,162),e.lineTo(909,165),e.lineTo(905,146),e.lineTo(902,146),e.lineTo(902,146),e.lineTo(903,142),e.lineTo(900,137),e.lineTo(900,131),e.lineTo(898,128),e.lineTo(896,121),e.lineTo(896,118),e.lineTo(895,114),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(913,207),e.lineTo(912,205),e.lineTo(916,202),e.lineTo(913,200),e.lineTo(910,183),e.lineTo(923,180),e.lineTo(938,177),e.lineTo(941,188),e.lineTo(941,192),e.lineTo(934,195),e.lineTo(925,198),e.lineTo(913,207),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(949,151),e.lineTo(947,151),e.lineTo(944,154),e.lineTo(943,156),e.lineTo(923,162),e.lineTo(922,160),e.lineTo(922,157),e.lineTo(921,151),e.lineTo(921,149),e.lineTo(920,144),e.lineTo(921,139),e.lineTo(922,136),e.lineTo(922,130),e.lineTo(922,126),e.lineTo(922,124),e.lineTo(924,123),e.lineTo(927,118),e.lineTo(927,115),e.lineTo(925,112),e.lineTo(925,105),e.lineTo(925,105),e.lineTo(925,105),e.lineTo(925,100),e.lineTo(929,98),e.lineTo(943,138),e.lineTo(943,141),e.lineTo(947,144),e.lineTo(949,147),e.lineTo(949,147),e.lineTo(949,147),e.lineTo(950,147),e.lineTo(950,147),e.lineTo(949,151),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(931,97),e.lineTo(936,91),e.lineTo(939,79),e.lineTo(938,60),e.lineTo(945,40),e.lineTo(952,44),e.lineTo(961,37),e.lineTo(969,41),e.lineTo(979,72),e.lineTo(994,81),e.lineTo(997,90),e.lineTo(984,102),e.lineTo(970,113),e.lineTo(955,132),e.lineTo(951,145),e.lineTo(950,145),e.lineTo(948,143),e.lineTo(945,140),e.lineTo(945,138),e.lineTo(931,97),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(898,284),e.lineTo(894,285),e.lineTo(894,285),e.lineTo(894,285),e.lineTo(894,285),e.lineTo(893,285),e.lineTo(893,286),e.lineTo(882,278),e.lineTo(877,261),e.lineTo(876,261),e.lineTo(875,270),e.lineTo(879,289),e.lineTo(868,285),e.lineTo(866,282),e.lineTo(863,283),e.lineTo(861,283),e.lineTo(862,281),e.lineTo(862,278),e.lineTo(862,278),e.lineTo(865,275),e.lineTo(865,273),e.lineTo(867,270),e.lineTo(863,267),e.lineTo(862,269),e.lineTo(858,267),e.lineTo(855,267),e.lineTo(855,265),e.lineTo(855,264),e.lineTo(855,264),e.lineTo(852,263),e.lineTo(849,262),e.lineTo(847,260),e.lineTo(844,257),e.lineTo(839,256),e.lineTo(851,254),e.lineTo(866,251),e.lineTo(881,247),e.lineTo(889,276),e.lineTo(902,274),e.lineTo(903,275),e.lineTo(898,284),e.closePath(),e.moveTo(837,257),e.lineTo(834,259),e.lineTo(833,261),e.lineTo(827,261),e.lineTo(825,264),e.lineTo(822,265),e.lineTo(819,269),e.lineTo(818,270),e.lineTo(816,261),e.lineTo(832,258),e.lineTo(837,257),e.closePath(),e.fillStyle=t,e.fill()},window.SimpleUSAMapIconAppearance.instances=new Set,window.SimpleUSAMapIconWdgt=function(e){this.color=e,SimpleUSAMapIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new SimpleUSAMapIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleUSAMapIconWdgt,"name",{value:"SimpleUSAMapIconWdgt"}),window.SimpleUSAMapIconWdgt.__super__=window.IconMorph.prototype,window.SimpleUSAMapIconWdgt=extend(window.SimpleUSAMapIconWdgt,window.IconMorph),window.SimpleUSAMapIconWdgt.instances=new Set,window.SimpleWorldMapIconAppearance=function(e){this.morph=e,SimpleWorldMapIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(500,265),this.specificationSize=new Point(1e3,530),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleWorldMapIconAppearance,"name",{value:"SimpleWorldMapIconAppearance"}),window.SimpleWorldMapIconAppearance.__super__=window.IconAppearance.prototype,window.SimpleWorldMapIconAppearance=extend(window.SimpleWorldMapIconAppearance,window.IconAppearance),window.SimpleWorldMapIconAppearance.prototype.paintFunction=function(e){var t;return t=this.morph.color.toString(),e.beginPath(),e.moveTo(732,22),e.lineTo(738,20),e.lineTo(762,33),e.lineTo(748,35),e.lineTo(728,29),e.lineTo(732,22),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(525,21),e.lineTo(542,23),e.lineTo(544,28),e.lineTo(528,31),e.lineTo(537,42),e.lineTo(528,42),e.lineTo(525,36),e.lineTo(520,42),e.lineTo(509,42),e.lineTo(508,35),e.lineTo(503,30),e.lineTo(506,26),e.lineTo(525,21),e.closePath(),e.fillStyle=t,e.fill(),e.save(),e.translate(81,-263),e.beginPath(),e.moveTo(547,277),e.lineTo(558,274),e.lineTo(557,284),e.lineTo(548,287),e.lineTo(517,288),e.lineTo(515,284),e.lineTo(535,278),e.lineTo(547,277),e.closePath(),e.fillStyle=t,e.fill(),e.restore(),e.beginPath(),e.moveTo(639,46),e.lineTo(659,41),e.lineTo(658,46),e.lineTo(643,49),e.lineTo(635,53),e.lineTo(625,60),e.lineTo(627,73),e.lineTo(616,71),e.lineTo(614,67),e.lineTo(621,50),e.lineTo(639,46),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(854,46),e.lineTo(859,46),e.lineTo(859,50),e.lineTo(856,53),e.lineTo(854,52),e.lineTo(854,46),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(862,48),e.lineTo(868,51),e.lineTo(863,52),e.lineTo(862,48),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(859,55),e.lineTo(868,60),e.lineTo(859,60),e.lineTo(859,55),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(405,98),e.lineTo(411,91),e.lineTo(416,96),e.lineTo(427,94),e.lineTo(429,103),e.lineTo(412,110),e.lineTo(405,98),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(454,128),e.lineTo(460,126),e.lineTo(459,131),e.lineTo(463,132),e.lineTo(468,146),e.lineTo(472,149),e.lineTo(471,155),e.lineTo(457,159),e.lineTo(460,154),e.lineTo(454,152),e.lineTo(460,146),e.lineTo(454,128),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(443,147),e.lineTo(452,143),e.lineTo(451,152),e.lineTo(448,156),e.lineTo(443,156),e.lineTo(443,147),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(864,158),e.lineTo(868,151),e.lineTo(868,168),e.lineTo(866,181),e.lineTo(873,188),e.lineTo(861,196),e.lineTo(862,205),e.lineTo(857,219),e.lineTo(844,223),e.lineTo(831,229),e.lineTo(831,222),e.lineTo(855,206),e.lineTo(858,194),e.lineTo(865,172),e.lineTo(864,158),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(493,203),e.lineTo(492,197),e.lineTo(494,195),e.lineTo(495,203),e.lineTo(493,203),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(236,257),e.lineTo(248,258),e.lineTo(262,264),e.lineTo(255,266),e.lineTo(246,261),e.lineTo(238,260),e.lineTo(236,257),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(270,267),e.lineTo(279,272),e.lineTo(265,273),e.lineTo(270,267),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(805,272),e.lineTo(808,274),e.lineTo(816,296),e.lineTo(819,313),e.lineTo(811,311),e.lineTo(805,296),e.lineTo(802,276),e.lineTo(805,272),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(266,296),e.lineTo(281,296),e.lineTo(297,300),e.lineTo(313,311),e.lineTo(325,315),e.lineTo(334,334),e.lineTo(369,346),e.lineTo(373,358),e.lineTo(365,371),e.lineTo(358,393),e.lineTo(352,405),e.lineTo(338,412),e.lineTo(326,436),e.lineTo(317,445),e.lineTo(310,455),e.lineTo(296,462),e.lineTo(285,481),e.lineTo(285,496),e.lineTo(279,509),e.lineTo(284,520),e.lineTo(278,524),e.lineTo(269,523),e.lineTo(262,506),e.lineTo(260,483),e.lineTo(262,468),e.lineTo(268,440),e.lineTo(270,421),e.lineTo(271,389),e.lineTo(261,380),e.lineTo(255,371),e.lineTo(246,354),e.lineTo(249,333),e.lineTo(256,320),e.lineTo(255,309),e.lineTo(266,296),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(691,303),e.lineTo(696,310),e.lineTo(691,313),e.lineTo(691,303),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(773,325),e.lineTo(797,311),e.lineTo(797,325),e.lineTo(792,344),e.lineTo(775,340),e.lineTo(773,325),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(803,330),e.lineTo(810,330),e.lineTo(811,351),e.lineTo(800,348),e.lineTo(803,330),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(833,335),e.lineTo(867,346),e.lineTo(877,352),e.lineTo(884,367),e.lineTo(855,359),e.lineTo(849,350),e.lineTo(839,345),e.lineTo(833,335),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(763,351),e.lineTo(789,355),e.lineTo(795,361),e.lineTo(783,360),e.lineTo(763,354),e.lineTo(763,351),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(607,368),e.lineTo(602,395),e.lineTo(595,403),e.lineTo(590,398),e.lineTo(594,387),e.lineTo(592,377),e.lineTo(607,368),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(860,388),e.lineTo(864,370),e.lineTo(876,391),e.lineTo(887,409),e.lineTo(892,421),e.lineTo(890,442),e.lineTo(883,458),e.lineTo(871,462),e.lineTo(857,456),e.lineTo(850,451),e.lineTo(843,441),e.lineTo(837,438),e.lineTo(826,436),e.lineTo(812,441),e.lineTo(804,441),e.lineTo(791,445),e.lineTo(791,435),e.lineTo(786,419),e.lineTo(785,403),e.lineTo(804,395),e.lineTo(809,390),e.lineTo(817,380),e.lineTo(827,380),e.lineTo(833,371),e.lineTo(847,371),e.lineTo(847,383),e.lineTo(860,388),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(949,449),e.lineTo(965,462),e.lineTo(943,489),e.lineTo(934,493),e.lineTo(931,488),e.lineTo(946,472),e.lineTo(956,461),e.lineTo(949,449),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(870,469),e.lineTo(880,469),e.lineTo(878,478),e.lineTo(872,476),e.lineTo(870,469),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(493,195),e.lineTo(493,192),e.lineTo(494,191),e.lineTo(494,195),e.lineTo(493,195),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(477,210),e.lineTo(490,211),e.lineTo(499,211),e.lineTo(498,223),e.lineTo(518,232),e.lineTo(531,225),e.lineTo(550,230),e.lineTo(558,229),e.lineTo(574,269),e.lineTo(592,297),e.lineTo(611,294),e.lineTo(609,307),e.lineTo(602,319),e.lineTo(582,337),e.lineTo(578,349),e.lineTo(582,364),e.lineTo(578,378),e.lineTo(566,387),e.lineTo(568,396),e.lineTo(560,406),e.lineTo(553,417),e.lineTo(532,426),e.lineTo(524,426),e.lineTo(521,423),e.lineTo(513,408),e.lineTo(505,388),e.lineTo(503,374),e.lineTo(508,357),e.lineTo(494,334),e.lineTo(494,322),e.lineTo(486,318),e.lineTo(483,313),e.lineTo(444,318),e.lineTo(426,295),e.lineTo(424,290),e.lineTo(423,262),e.lineTo(428,250),e.lineTo(440,235),e.lineTo(443,227),e.lineTo(454,215),e.lineTo(463,216),e.lineTo(471,212),e.lineTo(477,210),e.lineTo(477,210),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(353,5),e.lineTo(370,3),e.lineTo(407,6),e.lineTo(435,17),e.lineTo(425,23),e.lineTo(415,34),e.lineTo(420,40),e.lineTo(419,51),e.lineTo(410,59),e.lineTo(413,71),e.lineTo(401,80),e.lineTo(360,97),e.lineTo(350,121),e.lineTo(336,116),e.lineTo(328,83),e.lineTo(313,52),e.lineTo(306,46),e.lineTo(300,44),e.lineTo(272,43),e.lineTo(271,31),e.lineTo(287,28),e.lineTo(301,12),e.lineTo(314,10),e.lineTo(326,12),e.lineTo(353,5),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(287,23),e.lineTo(278,23),e.lineTo(258,36),e.lineTo(253,37),e.lineTo(247,54),e.lineTo(254,55),e.lineTo(257,61),e.lineTo(264,62),e.lineTo(267,68),e.lineTo(276,70),e.lineTo(281,76),e.lineTo(282,82),e.lineTo(300,88),e.lineTo(293,98),e.lineTo(285,94),e.lineTo(289,100),e.lineTo(289,104),e.lineTo(283,105),e.lineTo(286,111),e.lineTo(272,109),e.lineTo(266,104),e.lineTo(253,104),e.lineTo(253,100),e.lineTo(266,98),e.lineTo(268,86),e.lineTo(259,84),e.lineTo(257,76),e.lineTo(241,76),e.lineTo(245,91),e.lineTo(236,95),e.lineTo(241,103),e.lineTo(239,106),e.lineTo(235,107),e.lineTo(221,103),e.lineTo(210,114),e.lineTo(207,124),e.lineTo(212,126),e.lineTo(214,132),e.lineTo(221,133),e.lineTo(230,139),e.lineTo(241,143),e.lineTo(240,149),e.lineTo(249,155),e.lineTo(248,145),e.lineTo(250,142),e.lineTo(256,138),e.lineTo(255,128),e.lineTo(252,123),e.lineTo(254,112),e.lineTo(265,110),e.lineTo(269,111),e.lineTo(275,116),e.lineTo(280,125),e.lineTo(287,123),e.lineTo(291,120),e.lineTo(298,134),e.lineTo(310,145),e.lineTo(313,160),e.lineTo(327,168),e.lineTo(326,172),e.lineTo(306,169),e.lineTo(311,156),e.lineTo(299,159),e.lineTo(294,160),e.lineTo(295,176),e.lineTo(302,179),e.lineTo(286,186),e.lineTo(283,181),e.lineTo(278,185),e.lineTo(273,193),e.lineTo(263,201),e.lineTo(257,217),e.lineTo(252,222),e.lineTo(242,232),e.lineTo(246,245),e.lineTo(244,249),e.lineTo(235,233),e.lineTo(206,236),e.lineTo(201,240),e.lineTo(199,252),e.lineTo(198,260),e.lineTo(203,270),e.lineTo(214,271),e.lineTo(218,269),e.lineTo(226,262),e.lineTo(224,280),e.lineTo(238,284),e.lineTo(239,300),e.lineTo(255,304),e.lineTo(241,306),e.lineTo(234,302),e.lineTo(228,292),e.lineTo(221,287),e.lineTo(205,280),e.lineTo(187,276),e.lineTo(180,272),e.lineTo(175,267),e.lineTo(174,258),e.lineTo(169,249),e.lineTo(163,240),e.lineTo(151,230),e.lineTo(164,255),e.lineTo(153,245),e.lineTo(141,221),e.lineTo(134,218),e.lineTo(130,207),e.lineTo(125,203),e.lineTo(122,186),e.lineTo(122,163),e.lineTo(113,161),e.lineTo(111,149),e.lineTo(83,124),e.lineTo(57,116),e.lineTo(56,119),e.lineTo(47,122),e.lineTo(48,117),e.lineTo(42,120),e.lineTo(39,126),e.lineTo(30,136),e.lineTo(12,143),e.lineTo(21,135),e.lineTo(28,132),e.lineTo(30,124),e.lineTo(12,118),e.lineTo(8,111),e.lineTo(12,106),e.lineTo(19,105),e.lineTo(20,100),e.lineTo(5,99),e.lineTo(3,94),e.lineTo(19,93),e.lineTo(8,80),e.lineTo(23,70),e.lineTo(57,72),e.lineTo(89,78),e.lineTo(113,71),e.lineTo(119,75),e.lineTo(144,78),e.lineTo(144,69),e.lineTo(128,68),e.lineTo(125,56),e.lineTo(131,52),e.lineTo(148,52),e.lineTo(148,45),e.lineTo(130,45),e.lineTo(125,42),e.lineTo(162,30),e.lineTo(207,31),e.lineTo(204,17),e.lineTo(215,16),e.lineTo(227,10),e.lineTo(235,11),e.lineTo(269,6),e.lineTo(291,7),e.lineTo(301,12),e.lineTo(287,23),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(762,38),e.lineTo(767,42),e.lineTo(781,42),e.lineTo(787,52),e.lineTo(775,55),e.lineTo(776,58),e.lineTo(788,56),e.lineTo(798,59),e.lineTo(796,60),e.lineTo(810,62),e.lineTo(813,57),e.lineTo(826,63),e.lineTo(831,71),e.lineTo(849,70),e.lineTo(856,69),e.lineTo(861,62),e.lineTo(885,67),e.lineTo(899,71),e.lineTo(912,71),e.lineTo(915,76),e.lineTo(955,76),e.lineTo(996,97),e.lineTo(990,104),e.lineTo(981,103),e.lineTo(973,100),e.lineTo(965,102),e.lineTo(966,112),e.lineTo(941,122),e.lineTo(927,122),e.lineTo(925,124),e.lineTo(922,137),e.lineTo(919,145),e.lineTo(914,151),e.lineTo(905,159),e.lineTo(904,156),e.lineTo(902,143),e.lineTo(907,131),e.lineTo(917,123),e.lineTo(922,120),e.lineTo(921,116),e.lineTo(911,115),e.lineTo(905,116),e.lineTo(900,124),e.lineTo(863,124),e.lineTo(847,143),e.lineTo(859,149),e.lineTo(859,167),e.lineTo(848,183),e.lineTo(842,191),e.lineTo(834,189),e.lineTo(827,200),e.lineTo(829,216),e.lineTo(821,220),e.lineTo(816,204),e.lineTo(814,201),e.lineTo(805,198),e.lineTo(796,207),e.lineTo(808,210),e.lineTo(810,212),e.lineTo(801,218),e.lineTo(806,228),e.lineTo(800,252),e.lineTo(790,260),e.lineTo(768,266),e.lineTo(760,272),e.lineTo(768,280),e.lineTo(774,294),e.lineTo(764,304),e.lineTo(750,293),e.lineTo(748,305),e.lineTo(750,311),e.lineTo(759,327),e.lineTo(753,326),e.lineTo(751,322),e.lineTo(744,301),e.lineTo(739,278),e.lineTo(732,281),e.lineTo(725,261),e.lineTo(715,263),e.lineTo(709,268),e.lineTo(693,282),e.lineTo(689,302),e.lineTo(682,305),e.lineTo(677,295),e.lineTo(674,285),e.lineTo(671,264),e.lineTo(665,266),e.lineTo(655,249),e.lineTo(644,252),e.lineTo(633,249),e.lineTo(616,243),e.lineTo(608,234),e.lineTo(606,235),e.lineTo(605,241),e.lineTo(610,248),e.lineTo(615,250),e.lineTo(635,258),e.lineTo(627,274),e.lineTo(621,278),e.lineTo(594,291),e.lineTo(590,279),e.lineTo(566,236),e.lineTo(562,236),e.lineTo(559,229),e.lineTo(567,228),e.lineTo(569,213),e.lineTo(549,212),e.lineTo(547,210),e.lineTo(543,199),e.lineTo(559,194),e.lineTo(566,193),e.lineTo(585,196),e.lineTo(582,189),e.lineTo(576,184),e.lineTo(570,183),e.lineTo(556,178),e.lineTo(553,180),e.lineTo(549,187),e.lineTo(548,195),e.lineTo(536,198),e.lineTo(534,211),e.lineTo(531,209),e.lineTo(524,195),e.lineTo(505,181),e.lineTo(505,187),e.lineTo(514,196),e.lineTo(521,201),e.lineTo(516,201),e.lineTo(511,211),e.lineTo(505,208),e.lineTo(513,204),e.lineTo(505,196),e.lineTo(495,185),e.lineTo(488,186),e.lineTo(478,190),e.lineTo(470,201),e.lineTo(465,212),e.lineTo(465,212),e.lineTo(465,212),e.lineTo(465,212),e.lineTo(465,212),e.lineTo(465,212),e.lineTo(465,212),e.lineTo(465,212),e.lineTo(456,212),e.lineTo(444,205),e.lineTo(448,188),e.lineTo(458,187),e.lineTo(467,187),e.lineTo(467,180),e.lineTo(459,168),e.lineTo(481,155),e.lineTo(485,150),e.lineTo(493,148),e.lineTo(493,134),e.lineTo(499,132),e.lineTo(499,139),e.lineTo(505,139),e.lineTo(524,132),e.lineTo(536,115),e.lineTo(527,107),e.lineTo(536,93),e.lineTo(531,91),e.lineTo(514,112),e.lineTo(514,124),e.lineTo(506,132),e.lineTo(499,124),e.lineTo(493,128),e.lineTo(489,115),e.lineTo(516,86),e.lineTo(513,81),e.lineTo(534,69),e.lineTo(551,70),e.lineTo(559,78),e.lineTo(568,80),e.lineTo(577,83),e.lineTo(582,92),e.lineTo(575,94),e.lineTo(564,91),e.lineTo(573,102),e.lineTo(576,104),e.lineTo(584,95),e.lineTo(590,93),e.lineTo(592,83),e.lineTo(597,83),e.lineTo(597,92),e.lineTo(610,85),e.lineTo(628,83),e.lineTo(639,78),e.lineTo(642,79),e.lineTo(660,85),e.lineTo(658,73),e.lineTo(659,68),e.lineTo(666,58),e.lineTo(678,63),e.lineTo(694,63),e.lineTo(697,57),e.lineTo(710,56),e.lineTo(715,47),e.lineTo(751,43),e.lineTo(753,41),e.lineTo(754,39),e.lineTo(762,38),e.lineTo(762,38),e.closePath(),e.fillStyle=t,e.fill(),e.beginPath(),e.moveTo(764,341),e.lineTo(762,350),e.lineTo(754,345),e.lineTo(748,336),e.lineTo(736,315),e.lineTo(748,323),e.lineTo(764,341),e.closePath(),e.fillStyle=t,e.fill()},window.SimpleWorldMapIconAppearance.instances=new Set,window.SimpleWorldMapIconWdgt=function(e){this.color=e,SimpleWorldMapIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new SimpleWorldMapIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleWorldMapIconWdgt,"name",{value:"SimpleWorldMapIconWdgt"}),window.SimpleWorldMapIconWdgt.__super__=window.IconMorph.prototype,window.SimpleWorldMapIconWdgt=extend(window.SimpleWorldMapIconWdgt,window.IconMorph),window.SimpleWorldMapIconWdgt.instances=new Set,window.InspectorMorph2=function(e){this.target=e,this.classesButtons=[],this.classesNames=[],this.angledArrows=[],InspectorMorph2.__super__.constructor.call(this,new Point(300,300)),this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.InspectorMorph2,"name",{value:"InspectorMorph2"}),window.InspectorMorph2.__super__=window.Widget.prototype,window.InspectorMorph2=extend(window.InspectorMorph2,window.Widget),window.InspectorMorph2.prototype.target=nil,window.InspectorMorph2.prototype.currentProperty=nil,window.InspectorMorph2.prototype.showing="attributes",window.InspectorMorph2.prototype.markOwnershipOfProperties=!0,window.InspectorMorph2.prototype.list=nil,window.InspectorMorph2.prototype.detail=nil,window.InspectorMorph2.prototype.classesButtons=nil,window.InspectorMorph2.prototype.classesNames=nil,window.InspectorMorph2.prototype.angledArrows=nil,window.InspectorMorph2.prototype.hierarchyHeaderString=nil,window.InspectorMorph2.prototype.propertyHeaderString=nil,window.InspectorMorph2.prototype.showMethodsOnButton=nil,window.InspectorMorph2.prototype.showMethodsOffButton=nil,window.InspectorMorph2.prototype.showMethodsToggle=nil,window.InspectorMorph2.prototype.showFieldsOnButton=nil,window.InspectorMorph2.prototype.showFieldsOffButton=nil,window.InspectorMorph2.prototype.showFieldsToggle=nil,window.InspectorMorph2.prototype.showInheritedOnButton=nil,window.InspectorMorph2.prototype.showInheritedOffButton=nil,window.InspectorMorph2.prototype.showInheritedToggle=nil,window.InspectorMorph2.prototype.showOwnPropsOnlyOnButton=nil,window.InspectorMorph2.prototype.showOwnPropsOnlyOffButton=nil,window.InspectorMorph2.prototype.showOwnPropsOnlyToggle=nil,window.InspectorMorph2.prototype.lastLabelInHierarchy=nil,window.InspectorMorph2.prototype.lastArrowInHierarchy=nil,window.InspectorMorph2.prototype.hierarchyBackgroundPanel=nil,window.InspectorMorph2.prototype.showingFields=!0,window.InspectorMorph2.prototype.showingMethods=!0,window.InspectorMorph2.prototype.showingInherited=!1,window.InspectorMorph2.prototype.showingOwnPropsOnly=!1,window.InspectorMorph2.prototype.addPropertyButton=nil,window.InspectorMorph2.prototype.renamePropertyButton=nil,window.InspectorMorph2.prototype.removePropertyButton=nil,window.InspectorMorph2.prototype.saveButton=nil,window.InspectorMorph2.prototype.saveTextWdgt=nil,window.InspectorMorph2.prototype.externalPadding=0,window.InspectorMorph2.prototype.internalPadding=5,window.InspectorMorph2.prototype.padding=nil,window.InspectorMorph2.prototype.classNamesTextPadding=2,window.InspectorMorph2.prototype.colloquialName=function(){return"Object Inspector ("+this.target.colloquialName()+")"},window.InspectorMorph2.prototype.showFields=function(){if(!this.showingFields)return this.showingFields=!0,this.buildAndConnectChildren()},window.InspectorMorph2.prototype.showMethods=function(){if(!this.showingMethods)return this.showingMethods=!0,this.buildAndConnectChildren()},window.InspectorMorph2.prototype.showInherited=function(){if(!this.showingInherited)return this.showingInherited=!0,this.buildAndConnectChildren()},window.InspectorMorph2.prototype.showOwnPropsOnly=function(){if(!this.showingOwnPropsOnly)return this.showingOwnPropsOnly=!0,this.buildAndConnectChildren()},window.InspectorMorph2.prototype.hideFields=function(){if(this.showingFields)return this.showingFields=!1,this.buildAndConnectChildren()},window.InspectorMorph2.prototype.hideMethods=function(){if(this.showingMethods)return this.showingMethods=!1,this.buildAndConnectChildren()},window.InspectorMorph2.prototype.hideInherited=function(){if(this.showingInherited)return this.showingInherited=!1,this.buildAndConnectChildren()},window.InspectorMorph2.prototype.hideOwnPropsOnly=function(){if(this.showingOwnPropsOnly)return this.showingOwnPropsOnly=!1,this.buildAndConnectChildren()},window.InspectorMorph2.prototype.inspectObject=function(e){return this.target=e,this.currentProperty=nil,this.buildAndConnectChildren()},window.InspectorMorph2.prototype.buildAndConnectChildren=function(){var e,t,n,o,i,r,l,a,s,d,h,p,c;for(d in"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.fullDestroyChildren(),t=[],this.classesButtons=[],this.classesNames=[],this.angledArrows=[],this.target)d&&t.push(d);if(this.showingMethods||(t=t.filter(e=>!isFunction(this.target[e]))),this.showingFields||(t=t.filter(e=>isFunction(this.target[e]))),this.showingInherited||(t=t.filter(e=>this.target.constructor.prototype.hasOwnProperty(e)||!(e in this.target.constructor.prototype))),this.showingOwnPropsOnly&&(t=t.filter(e=>this.target.hasOwnProperty(e))),this.markOwnershipOfProperties&&(c=Object.getOwnPropertyNames(this.target.constructor.prototype)),null!=this.target)for(l=this.target.__proto__;"Object"!==l.constructor.name;)this.classesNames.push(l.constructor.name),l=l.__proto__;for(this.hierarchyBackgroundPanel=new RectangleMorph,this.hierarchyBackgroundPanel.setColor(new Color(255,255,255,.2)),this.add(this.hierarchyBackgroundPanel),o=0,a=0,s=(h=this.classesNames).length;a<s;a++)r=h[a],n=new SimpleButtonMorph(!0,this,"openClassInspector",new StringMorph2(r,WorldMorph.preferencesAndSettings.textInButtonsFontSize),nil,nil,nil,nil,r,nil,nil,this.classNamesTextPadding),this.classesButtons.push(n),this.add(n),o>0&&(e=new AngledArrowUpLeftIconMorph(new Color(0,0,0)),this.angledArrows.push(e),this.add(e)),o++;return this.lastLabelInHierarchy=new TextMorph("this object"),this.add(this.lastLabelInHierarchy),this.lastArrowInHierarchy=new AngledArrowUpLeftIconMorph(new Color(0,0,0)),this.add(this.lastArrowInHierarchy),this.showMethodsOnButton=new SimpleButtonMorph(!0,this,"hideMethods","methods: on"),this.showMethodsOffButton=new SimpleButtonMorph(!0,this,"showMethods","methods: off"),this.showMethodsToggle=new ToggleButtonMorph(this.showMethodsOnButton,this.showMethodsOffButton,this.showingMethods?0:1),this.add(this.showMethodsToggle),this.showFieldsOnButton=new SimpleButtonMorph(!0,this,"hideFields","fields: on"),this.showFieldsOffButton=new SimpleButtonMorph(!0,this,"showFields","fields: off"),this.showFieldsToggle=new ToggleButtonMorph(this.showFieldsOnButton,this.showFieldsOffButton,this.showingFields?0:1),this.add(this.showFieldsToggle),this.showInheritedOnButton=new SimpleButtonMorph(!0,this,"hideInherited","inherited: on"),this.showInheritedOffButton=new SimpleButtonMorph(!0,this,"showInherited","inherited: off"),this.showInheritedToggle=new ToggleButtonMorph(this.showInheritedOnButton,this.showInheritedOffButton,this.showingInherited?0:1),this.add(this.showInheritedToggle),this.buildAndConnectObjOwnPropsButton(),this.addPropertyButton=new SimpleButtonMorph(!0,this,"addPropertyPopout","add..."),this.add(this.addPropertyButton),this.renamePropertyButton=new SimpleButtonMorph(!0,this,"renamePropertyPopout","rename..."),this.add(this.renamePropertyButton),this.removePropertyButton=new SimpleButtonMorph(!0,this,"removeProperty","remove"),this.add(this.removePropertyButton),this.saveTextWdgt=new StringMorph2("save",WorldMorph.preferencesAndSettings.textInButtonsFontSize).alignCenter(),this.saveButton=new SimpleButtonMorph(!0,this,"save",this.saveTextWdgt),this.add(this.saveButton),i=()=>{var e;if(isObject(this.currentProperty))return(e=new this.constructor(this.currentProperty)).fullRawMoveTo(world.hand.position()),e.fullRawMoveWithin(world),world.add(e),e.changed()},this.list=new ListMorph(this,"selectionFromList",this.target instanceof Array?t:t.sort(),nil,this.filterProperties(c),i),this.list.disableDrops(),world.steppingWdgts.delete(this.list.listContents),this.add(this.list),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.detail=new SimplePlainTextScrollPanelWdgt("",!1,5),this.detail.disableDrops(),this.detail.contents.disableDrops(),this.detail.color=new Color(255,255,255),this.detail.addModifiedContentIndicator(),null==this.list.selected&&(null!=(p=this.detail.modifiedTextTriangleAnnotation)&&p.hide(),this.saveTextWdgt.setColor(new Color(200,200,200))),this.detail.widgetToBeNotifiedOfTextModificationChange=this,this.textMorph=this.detail.textWdgt,this.textMorph.backgroundColor=new Color(0,0,0,0),this.textMorph.setFontName(nil,nil,this.textMorph.monoFontStack),this.textMorph.isEditable=!1,this.add(this.detail),this.hierarchyHeaderString=new StringMorph2("Hierarchy",WorldMorph.preferencesAndSettings.textInButtonsFontSize),this.hierarchyHeaderString.toggleHeaderLine(),this.hierarchyHeaderString.alignCenter(),this.add(this.hierarchyHeaderString),this.propertyHeaderString=new StringMorph2("Properties",WorldMorph.preferencesAndSettings.textInButtonsFontSize),this.propertyHeaderString.toggleHeaderLine(),this.propertyHeaderString.alignCenter(),this.add(this.propertyHeaderString),this.resizer=new HandleMorph(this),this.invalidateLayout()},window.InspectorMorph2.prototype.textContentModified=function(){return this.saveTextWdgt.setColor(new Color(0,0,0))},window.InspectorMorph2.prototype.textContentUnmodified=function(){return this.saveTextWdgt.setColor(new Color(200,200,200))},window.InspectorMorph2.prototype.buildAndConnectObjOwnPropsButton=function(){return this.showOwnPropsOnlyOnButton=new SimpleButtonMorph(!0,this,"hideOwnPropsOnly","obj own props only: on"),this.showOwnPropsOnlyOffButton=new SimpleButtonMorph(!0,this,"showOwnPropsOnly","obj own props only: off"),this.showOwnPropsOnlyToggle=new ToggleButtonMorph(this.showOwnPropsOnlyOnButton,this.showOwnPropsOnlyOffButton,this.showingOwnPropsOnly?0:1),this.add(this.showOwnPropsOnlyToggle)},window.InspectorMorph2.prototype.openClassInspector=function(e,t,n){var o,i;return o=new ClassInspectorMorph(window[n].prototype),(i=new WindowWdgt(nil,nil,o)).setExtent(new Point(560,410)),i.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),i.fullRawMoveWithin(world),world.add(i),i.changed()},window.InspectorMorph2.prototype.showAttributes=function(){return this.showing="attributes",this.buildAndConnectChildren()},window.InspectorMorph2.prototype.showAttributesAndMethods=function(){return this.showing="all",this.buildAndConnectChildren()},window.InspectorMorph2.prototype.highlightOwnershipOfProperties=function(){return this.markOwnershipOfProperties=!this.markOwnershipOfProperties,this.buildAndConnectChildren()},window.InspectorMorph2.prototype.filterProperties=function(e){return this.markOwnershipOfProperties?[[new Color(0,0,180),e=>!0],[new Color(0,180,0),e=>this.target.constructor.prototype.hasOwnProperty(e)]]:nil},window.InspectorMorph2.prototype.selectionFromList=function(e){var t,n,o,i;if(void 0!==e){if(i=this.target[e],this.currentProperty=i,isFunction(i)){if(null!=this.target[e+"_source"])i=this.target[e+"_source"];else for(n=this.target;n!==Object;){if(null!=n.constructor.class.nonStaticPropertiesSources[e]){i=n.constructor.class.nonStaticPropertiesSources[e];break}n=n.__proto__}o=i.toString()}else void 0===i&&(i=this.target.constructor[e]),o=null==i?"nil":isString(i)?'"'+i+'"':i.toString();return(t=this.detail.textWdgt).setText(o),t.setReceiver(this.target),t.isEditable=!0,t.enableSelecting(),t.considerCurrentTextAsReferenceText(),this.detail.checkIfTextContentWasModifiedFromTextAtStart()}},window.InspectorMorph2.prototype.doLayout=function(e){var t,n,o,i,r,l,a,s,d,h,p,c;if(this.isCollapsed())return this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted();for(InspectorMorph2.__super__.doLayout.apply(this,arguments),trackChanges.push(!1),r=(r=new Rectangle(new Point(Math.round(this.left()+this.externalPadding),Math.round(this.top()+this.externalPadding)))).setBoundsWidthAndHeight(this.width()-2*this.externalPadding,15),this.hierarchyHeaderString.doLayout(r),a=0,t=0,this.classesButtons.reverse(),l=0,s=(p=this.classesButtons).length;l<s;l++)(i=p[l]).parent===this&&(n=(n=new Rectangle(new Point(Math.round(this.left()+this.externalPadding+this.internalPadding+a),Math.round(this.hierarchyHeaderString.bottom()+2*this.internalPadding+a)))).setBoundsWidthAndHeight(120+2*this.classNamesTextPadding,15+2*this.classNamesTextPadding),i.doLayout(n),t>0&&this.angledArrows[t-1].parent===this&&(this.angledArrows[t-1].fullRawMoveTo(new Point(i.left()-15,Math.round(i.top()))),this.angledArrows[t-1].rawSetExtent(new Point(15,15))),a+=20),t++;return this.classesButtons.reverse(),this.layoutLastLabelInHierarchy(Math.round(this.left()+this.externalPadding+this.internalPadding+a),Math.round(this.hierarchyHeaderString.bottom()+2*this.internalPadding+a)),this.hierarchyBackgroundPanel.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.hierarchyHeaderString.bottom()+this.internalPadding)),this.hierarchyBackgroundPanel.rawSetExtent(new Point(this.width()-2*this.externalPadding,a+20+this.internalPadding)),r=(r=new Rectangle(new Point(this.left()+this.externalPadding,this.hierarchyBackgroundPanel.bottom()+this.internalPadding))).setBoundsWidthAndHeight(this.width()-2*this.externalPadding,15),this.propertyHeaderString.doLayout(r),o=2*(h=Math.floor((this.width()-2*this.externalPadding-this.internalPadding)/3)),this.layoutOwnPropsOnlyToggle(this.propertyHeaderString.bottom()+this.internalPadding,h,o),d=this.bottom()-this.externalPadding-this.internalPadding-15-(this.showMethodsToggle.bottom()+this.internalPadding),this.list.parent===this&&(this.list.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.showMethodsToggle.bottom()+this.internalPadding)),this.list.rawSetExtent(new Point(h,d))),this.detail.parent===this&&(this.detail.fullRawMoveTo(new Point(this.list.right()+this.internalPadding,this.list.top())),this.detail.rawSetExtent(new Point(o,d).round())),c=Math.round((h-2*this.internalPadding)/3),n=(n=new Rectangle(new Point(this.left()+this.externalPadding,this.bottom()-15-this.externalPadding))).setBoundsWidthAndHeight(c,15),this.addPropertyButton.doLayout(n),n=(n=new Rectangle(new Point(this.addPropertyButton.right()+this.internalPadding,this.bottom()-15-this.externalPadding))).setBoundsWidthAndHeight(c,15),this.renamePropertyButton.doLayout(n),n=(n=new Rectangle(new Point(this.renamePropertyButton.right()+this.internalPadding,this.bottom()-15-this.externalPadding))).setBoundsWidthAndHeight(c,15),this.removePropertyButton.doLayout(n),n=(n=new Rectangle(new Point(Math.round(this.right()-this.width()/4-this.externalPadding-this.internalPadding-WorldMorph.preferencesAndSettings.handleSize),this.bottom()-15-this.externalPadding))).setBoundsWidthAndHeight(Math.round(this.width()/4),15),this.saveButton.doLayout(n),trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0},window.InspectorMorph2.prototype.layoutOwnPropsOnlyToggle=function(e,t,n){var o;return o=(o=new Rectangle(new Point(this.left()+this.externalPadding,e))).setBoundsWidthAndHeight(new Point((t-this.internalPadding)/2,15).round()),this.showMethodsToggle.doLayout(o),o=(o=new Rectangle(new Point(this.showMethodsToggle.right()+this.internalPadding,e))).setBoundsWidthAndHeight(new Point((t-this.internalPadding)/2,15).round()),this.showFieldsToggle.doLayout(o),o=(o=new Rectangle(new Point(this.showFieldsToggle.right()+this.internalPadding,e))).setBoundsWidthAndHeight(new Point((n-this.internalPadding)/2,15).round()),this.showInheritedToggle.doLayout(o),o=(o=new Rectangle(new Point(this.showInheritedToggle.right()+this.internalPadding,e))).setBoundsWidthAndHeight(new Point((n-this.internalPadding)/2,15).round()),this.showOwnPropsOnlyToggle.doLayout(o)},window.InspectorMorph2.prototype.layoutLastLabelInHierarchy=function(e,t){if(this.lastLabelInHierarchy.parent===this&&(this.lastLabelInHierarchy.fullRawMoveTo(new Point(e,t)),this.lastLabelInHierarchy.rawSetExtent(new Point(150,15))),this.lastArrowInHierarchy.parent===this)return this.lastArrowInHierarchy.fullRawMoveTo(new Point(e-15,t)),this.lastArrowInHierarchy.rawSetExtent(new Point(15,15))},window.InspectorMorph2.prototype.notifyInstancesOfSourceChange=function(e){return this.target.sourceChanged()},window.InspectorMorph2.prototype.save=function(){var e,t,n,o,i;if(null!=this.list.selected){for(i=this.detail.contents.children[0].text.toString(),n=this.list.selected.labelString,this.target.injectProperty(n,i),this.detail.textWdgt.considerCurrentTextAsReferenceText(),this.detail.checkIfTextContentWasModifiedFromTextAtStart(),e=0,t=(o=world.widgetsGivingErrorWhileRepainting).length;e<t;e++)o[e].show();return world.widgetsGivingErrorWhileRepainting=[]}},window.InspectorMorph2.prototype.addProperty=function(e,t){var n;if(null!=(n=t.text.text))return null!=n.getValue&&(n=n.getValue()),this.target[n]=nil,this.buildAndConnectChildren(),this.notifyInstancesOfSourceChange([n])},window.InspectorMorph2.prototype.addPropertyPopout=function(){return this.prompt("new property name:",this,"addProperty","property")},window.InspectorMorph2.prototype.renameProperty=function(e,t){var n,o;return o=this.list.selected.labelString,null!=(n=t.text.text).getValue&&(n=n.getValue()),delete this.target[o],this.target[n]=this.currentProperty,this.buildAndConnectChildren(),this.notifyInstancesOfSourceChange([n,o])},window.InspectorMorph2.prototype.renamePropertyPopout=function(){var e;return e=this.list.selected.labelString,this.prompt("property name:",this,"renameProperty",e)},window.InspectorMorph2.prototype.removeProperty=function(){var e;return e=this.list.selected.labelString,delete this.target[e],this.currentProperty=nil,this.buildAndConnectChildren(),this.notifyInstancesOfSourceChange([e])},window.InspectorMorph2.instances=new Set,window.ClassInspectorMorph=function(){window.ClassInspectorMorph.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ClassInspectorMorph,"name",{value:"ClassInspectorMorph"}),window.ClassInspectorMorph.__super__=window.InspectorMorph2.prototype,window.ClassInspectorMorph=extend(window.ClassInspectorMorph,window.InspectorMorph2),window.ClassInspectorMorph.prototype.notifyInstancesOfSourceChange=function(e){return this.target.constructor.class.notifyInstancesOfSourceChange(e)},window.ClassInspectorMorph.prototype.buildAndConnectChildren=function(){return ClassInspectorMorph.__super__.buildAndConnectChildren.apply(this,arguments),this.lastLabelInHierarchy.setText("this class")},window.ClassInspectorMorph.prototype.colloquialName=function(){return"Class Inspector ("+this.target.constructor.name.replace("Morph","").replace("Wdgt","")+")"},window.ClassInspectorMorph.prototype.layoutOwnPropsOnlyToggle=function(e){var t;return t=(t=new Rectangle(new Point(this.left()+this.externalPadding,e))).setBoundsWidthAndHeight(new Point((this.width()-2*this.externalPadding-2*this.internalPadding)/4,15).round()),this.showMethodsToggle.doLayout(t),t=(t=new Rectangle(new Point(this.showMethodsToggle.right()+this.internalPadding,e))).setBoundsWidthAndHeight(new Point((this.width()-2*this.externalPadding-2*this.internalPadding)/4,15).round()),this.showFieldsToggle.doLayout(t),t=(t=new Rectangle(new Point(this.showFieldsToggle.right()+this.internalPadding,e))).setBoundsWidthAndHeight(new Point(2*(this.width()-2*this.externalPadding-2*this.internalPadding)/4,15).round()),this.showInheritedToggle.doLayout(t)},window.ClassInspectorMorph.prototype.buildAndConnectObjOwnPropsButton=function(){},window.ClassInspectorMorph.prototype.save=function(){var e,t,n,o,i;for(i=this.detail.contents.children[0].text.toString(),n=this.list.selected.labelString,this.target.evaluateString("@"+n+" = "+i),isFunction(this.target[n])&&(this.target[n+"_source"]=i),this.notifyInstancesOfSourceChange([n]),this.detail.textWdgt.considerCurrentTextAsReferenceText(),this.detail.checkIfTextContentWasModifiedFromTextAtStart(),e=0,t=(o=world.widgetsGivingErrorWhileRepainting).length;e<t;e++)o[e].show();return world.widgetsGivingErrorWhileRepainting=[]},window.ClassInspectorMorph.instances=new Set,window.ConsoleWdgt=function(e){this.target=e,ConsoleWdgt.__super__.constructor.call(this,new Point(200,400)),this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ConsoleWdgt,"name",{value:"ConsoleWdgt"}),window.ConsoleWdgt.__super__=window.Widget.prototype,window.ConsoleWdgt=extend(window.ConsoleWdgt,window.Widget),window.ConsoleWdgt.prototype.tempPromptEntryField=nil,window.ConsoleWdgt.prototype.textMorph=nil,window.ConsoleWdgt.prototype.runSelectionButton=nil,window.ConsoleWdgt.prototype.runAllButton=nil,window.ConsoleWdgt.prototype.functionFromCompiledCode=nil,window.ConsoleWdgt.prototype.externalPadding=0,window.ConsoleWdgt.prototype.internalPadding=5,window.ConsoleWdgt.prototype.colloquialName=function(){return"Console for: "+this.target.colloquialName().toLowerCase()},window.ConsoleWdgt.prototype.buildAndConnectChildren=function(){return"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.tempPromptEntryField=new SimplePlainTextScrollPanelWdgt("",!1,5),this.tempPromptEntryField.disableDrops(),this.tempPromptEntryField.contents.disableDrops(),this.tempPromptEntryField.color=new Color(255,255,255),this.textMorph=this.tempPromptEntryField.textWdgt,this.textMorph.backgroundColor=new Color(0,0,0,0),this.textMorph.setFontName(nil,nil,this.textMorph.monoFontStack),this.textMorph.isEditable=!0,this.textMorph.enableSelecting(),this.add(this.tempPromptEntryField),this.runSelectionButton=new SimpleButtonMorph(!0,this,"doSelection","run selection"),this.runSelectionButton.editorContentPropertyChangerButton=!0,this.add(this.runSelectionButton),this.runAllButton=new SimpleButtonMorph(!0,this,"doAll","run all"),this.add(this.runAllButton),this.invalidateLayout()},window.ConsoleWdgt.prototype.doSelection=function(){var e,t;return t=this.textMorph.selection(),e=compileFGCode(t,!0),new Function(e).call(this.target)},window.ConsoleWdgt.prototype.doAll=function(){var e,t;return t=this.textMorph.text,e=compileFGCode(t,!0),new Function(e).call(this.target)},window.ConsoleWdgt.prototype.doLayout=function(e){var t,n,o,i,r;return this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(ConsoleWdgt.__super__.doLayout.apply(this,arguments),trackChanges.push(!1),i=this.height()-2*this.externalPadding-this.internalPadding-15,o=this.top()+this.externalPadding+i,n=((r=this.width()-2*this.externalPadding)-2*this.internalPadding-WorldMorph.preferencesAndSettings.handleSize)/2,this.tempPromptEntryField.parent===this&&(this.tempPromptEntryField.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.top()+this.externalPadding)),this.tempPromptEntryField.rawSetExtent(new Point(r,i))),this.runSelectionButton.parent===this&&(t=(t=new Rectangle(new Point(this.left()+this.externalPadding,o+this.internalPadding))).setBoundsWidthAndHeight(n,15),this.runSelectionButton.doLayout(t)),this.runAllButton.parent===this&&(t=(t=new Rectangle(new Point(t.right()+this.internalPadding,o+this.internalPadding))).setBoundsWidthAndHeight(n,15),this.runAllButton.doLayout(t)),trackChanges.pop(),this.fullChanged(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted())},window.ConsoleWdgt.instances=new Set,window.CalculatingPatchNodeWdgt=function(e="# function with formula here e.g.\n# (in1) -> in1 * 2\n"){this.defaultFormulaBoxContents=e,CalculatingPatchNodeWdgt.__super__.constructor.call(this,new Point(200,400)),this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CalculatingPatchNodeWdgt,"name",{value:"CalculatingPatchNodeWdgt"}),window.CalculatingPatchNodeWdgt.__super__=window.Widget.prototype,window.CalculatingPatchNodeWdgt=extend(window.CalculatingPatchNodeWdgt,window.Widget),window.CalculatingPatchNodeWdgt.augmentWith(window.ControllerMixin,"CalculatingPatchNodeWdgt"),window.CalculatingPatchNodeWdgt.prototype.tempPromptEntryField=nil,window.CalculatingPatchNodeWdgt.prototype.defaultFormulaBoxContents=nil,window.CalculatingPatchNodeWdgt.prototype.textMorph=nil,window.CalculatingPatchNodeWdgt.prototype.formulaTextBoxLabel=nil,window.CalculatingPatchNodeWdgt.prototype.outputTextBoxLabel=nil,window.CalculatingPatchNodeWdgt.prototype.outputTextArea=nil,window.CalculatingPatchNodeWdgt.prototype.outputTextAreaText=nil,window.CalculatingPatchNodeWdgt.prototype.output=nil,window.CalculatingPatchNodeWdgt.prototype.input1=nil,window.CalculatingPatchNodeWdgt.prototype.input2=nil,window.CalculatingPatchNodeWdgt.prototype.input3=nil,window.CalculatingPatchNodeWdgt.prototype.input4=nil,window.CalculatingPatchNodeWdgt.prototype.setInput1IsConnected=!1,window.CalculatingPatchNodeWdgt.prototype.setInput2IsConnected=!1,window.CalculatingPatchNodeWdgt.prototype.setInput3IsConnected=!1,window.CalculatingPatchNodeWdgt.prototype.setInput4IsConnected=!1,window.CalculatingPatchNodeWdgt.prototype.input1connectionsCalculationToken=314,window.CalculatingPatchNodeWdgt.prototype.input2connectionsCalculationToken=314,window.CalculatingPatchNodeWdgt.prototype.input3connectionsCalculationToken=314,window.CalculatingPatchNodeWdgt.prototype.input4connectionsCalculationToken=314,window.CalculatingPatchNodeWdgt.prototype.externalPadding=0,window.CalculatingPatchNodeWdgt.prototype.internalPadding=5,window.CalculatingPatchNodeWdgt.prototype.colloquialName=function(){return"Calculating patch node"},window.CalculatingPatchNodeWdgt.prototype.setInput1=function(e,t,n,o){if(o||n!==this.input1connectionsCalculationToken)return this.input1connectionsCalculationToken=null==n?getRandomInt(-2e4,2e4):n,this.input1=Number(e),this.updateTarget(this.input1connectionsCalculationToken)},window.CalculatingPatchNodeWdgt.prototype.setInput2=function(e,t,n,o){if(o||n!==this.input2connectionsCalculationToken)return this.input2connectionsCalculationToken=null==n?getRandomInt(-2e4,2e4):n,this.input2=Number(e),this.updateTarget(this.input2connectionsCalculationToken)},window.CalculatingPatchNodeWdgt.prototype.setInput3=function(e,t,n,o){if(o||n!==this.input3connectionsCalculationToken)return this.input3connectionsCalculationToken=null==n?getRandomInt(-2e4,2e4):n,this.input3=Number(e),this.updateTarget(this.input3connectionsCalculationToken)},window.CalculatingPatchNodeWdgt.prototype.setInput4=function(e,t,n,o){if(o||n!==this.input4connectionsCalculationToken)return this.input4connectionsCalculationToken=null==n?getRandomInt(-2e4,2e4):n,this.input4=Number(e),this.updateTarget(this.input4connectionsCalculationToken)},window.CalculatingPatchNodeWdgt.prototype.bang=function(e,t,n,o){if(o||n!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==n?getRandomInt(-2e4,2e4):n,this.updateTarget(this.connectionsCalculationToken,!0)},window.CalculatingPatchNodeWdgt.prototype.openTargetPropertySelector=function(e,t,n){var o,i,r,l,a,s;for([a,o]=n.numericalSetters(),l=new MenuMorph(this,!1,this,!0,!0,"choose target property:"),i=r=0,s=a.length;0<=s?r<s:r>s;i=0<=s?++r:--r)l.addMenuItem(a[i],!0,this,"setTargetAndActionWithOnesPickedFromMenu",nil,nil,nil,nil,nil,n,o[i]);return 0===a.length&&(l=new MenuMorph(this,!1,this,!0,!0,"no target properties available")),l.popUpAtHand()},window.CalculatingPatchNodeWdgt.prototype.updateTarget=function(e,t){var n;(this.setInput1IsConnected||this.setInput2IsConnected||this.setInput3IsConnected||this.setInput4IsConnected)&&(n=!0,this.setInput1IsConnected&&this.input1connectionsCalculationToken!==e&&(n=!1),this.setInput2IsConnected&&this.input2connectionsCalculationToken!==e&&(n=!1),this.setInput3IsConnected&&this.input3connectionsCalculationToken!==e&&(n=!1),this.setInput4IsConnected&&this.input4connectionsCalculationToken!==e&&(n=!1),n&&!t&&this.doCalculation(),(n||t)&&this.fireOutputToTarget(e))},window.CalculatingPatchNodeWdgt.prototype.fireOutputToTarget=function(e){if(this.connectionsCalculationToken=e,this.action&&""!==this.action)return this.target[this.action].call(this.target,this.output,nil,this.connectionsCalculationToken)},window.CalculatingPatchNodeWdgt.prototype.reactToTargetConnection=function(){return this.fireOutputToTarget(getRandomInt(-2e4,2e4))},window.CalculatingPatchNodeWdgt.prototype.doCalculation=function(){var e;if(""!==this.textMorph.text)return this.evaluateString("@functionFromCompiledCode = "+this.textMorph.text),this.output=null!=(e=this.functionFromCompiledCode)?e.call(world,this.input1,this.input2,this.input3,this.input4):void 0,this.outputTextAreaText.setText(this.output+"")},window.CalculatingPatchNodeWdgt.prototype.stringSetters=function(e,t){return[e,t]=CalculatingPatchNodeWdgt.__super__.stringSetters.call(this,e,t),e.push("bang!","in1","in2","in3","in4"),t.push("bang","setInput1","setInput2","setInput3","setInput4"),this.deduplicateSettersAndSortByMenuEntryString(e,t)},window.CalculatingPatchNodeWdgt.prototype.numericalSetters=function(e,t){return[e,t]=CalculatingPatchNodeWdgt.__super__.numericalSetters.call(this,e,t),e.push("bang!","in1","in2","in3","in4"),t.push("bang","setInput1","setInput2","setInput3","setInput4"),this.deduplicateSettersAndSortByMenuEntryString(e,t)},window.CalculatingPatchNodeWdgt.prototype.addMorphSpecificMenuEntries=function(e,t){return CalculatingPatchNodeWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),t.addLine(),world.isIndexPage?t.addMenuItem("connect to ➜",!0,this,"openTargetSelector","connect to\nanother widget"):t.addMenuItem("set target",!0,this,"openTargetSelector","choose another morph\nwhose numerical property\n will be controlled by this one")},window.CalculatingPatchNodeWdgt.prototype.buildAndConnectChildren=function(){return"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.tempPromptEntryField=new SimplePlainTextScrollPanelWdgt(this.defaultFormulaBoxContents,!1,5),this.tempPromptEntryField.disableDrops(),this.tempPromptEntryField.contents.disableDrops(),this.tempPromptEntryField.color=new Color(255,255,255),this.textMorph=this.tempPromptEntryField.textWdgt,this.textMorph.backgroundColor=new Color(0,0,0,0),this.textMorph.setFontName(nil,nil,this.textMorph.monoFontStack),this.textMorph.isEditable=!0,this.textMorph.enableSelecting(),this.add(this.tempPromptEntryField),this.outputTextArea=new SimplePlainTextScrollPanelWdgt("",!1,5),this.outputTextArea.disableDrops(),this.outputTextArea.contents.disableDrops(),this.outputTextArea.color=new Color(255,255,255),this.outputTextAreaText=this.outputTextArea.textWdgt,this.outputTextAreaText.backgroundColor=new Color(0,0,0,0),this.outputTextAreaText.setFontName(nil,nil,this.outputTextAreaText.monoFontStack),this.outputTextAreaText.isEditable=!1,this.add(this.outputTextArea),this.formulaTextBoxLabel=new StringMorph2("Formula",WorldMorph.preferencesAndSettings.textInButtonsFontSize),this.formulaTextBoxLabel.toggleHeaderLine(),this.add(this.formulaTextBoxLabel),this.outputTextBoxLabel=new StringMorph2("Output",WorldMorph.preferencesAndSettings.textInButtonsFontSize),this.outputTextBoxLabel.toggleHeaderLine(),this.add(this.outputTextBoxLabel),this.invalidateLayout()},window.CalculatingPatchNodeWdgt.prototype.doLayout=function(e){var t,n,o,i;return this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(CalculatingPatchNodeWdgt.__super__.doLayout.apply(this,arguments),trackChanges.push(!1),t=this.height()-2*this.externalPadding-3*this.internalPadding-30,n=Math.round(2*t/3),o=Math.round(1*t/3),i=this.top()+this.externalPadding+15+this.internalPadding+n,this.formulaTextBoxLabel.parent===this&&(this.formulaTextBoxLabel.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.top()+this.externalPadding)),this.formulaTextBoxLabel.rawSetExtent(new Point(this.width()-2*this.externalPadding,15))),this.tempPromptEntryField.parent===this&&(this.tempPromptEntryField.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.top()+this.externalPadding+15+this.internalPadding)),this.tempPromptEntryField.rawSetExtent(new Point(this.width()-2*this.externalPadding,n))),this.outputTextBoxLabel.parent===this&&(this.outputTextBoxLabel.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.tempPromptEntryField.bottom()+this.internalPadding)),this.outputTextBoxLabel.rawSetExtent(new Point(this.width()-2*this.externalPadding,15))),this.outputTextArea.parent===this&&(this.outputTextArea.fullRawMoveTo(new Point(this.left()+this.externalPadding,i+this.internalPadding+15+this.internalPadding)),this.outputTextArea.rawSetExtent(new Point(this.width()-2*this.externalPadding,o))),trackChanges.pop(),this.fullChanged(),"undefined"!=typeof Automator&&null!==Automator&&Automator.state!==Automator.IDLE&&Automator.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted())},window.CalculatingPatchNodeWdgt.instances=new Set;