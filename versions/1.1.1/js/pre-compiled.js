window.preCompiled=!0,window.AlignmentSpecHorizontal=function(){window.AlignmentSpecHorizontal.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AlignmentSpecHorizontal,"name",{value:"AlignmentSpecHorizontal"}),window.AlignmentSpecHorizontal.instances=[],window.AlignmentSpecHorizontal.__super__=Object.prototype,window.AlignmentSpecHorizontal.LEFT=0,window.AlignmentSpecHorizontal.CENTER=1,window.AlignmentSpecHorizontal.RIGHT=2,window.AlignmentSpecVertical=function(){window.AlignmentSpecVertical.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AlignmentSpecVertical,"name",{value:"AlignmentSpecVertical"}),window.AlignmentSpecVertical.instances=[],window.AlignmentSpecVertical.__super__=Object.prototype,window.AlignmentSpecVertical.TOP=3,window.AlignmentSpecVertical.MIDDLE=4,window.AlignmentSpecVertical.BOTTOM=5;var DeepCopierMixin,indexOf=[].indexOf;DeepCopierMixin={onceAddedClassProperties:function(fromClass){return this.addInstanceProperties(fromClass,{deepCopy:function(doSerialize,objOriginalsClonedAlready,objectClones,allMorphsInStructure){var cloneOfMe,haveIBeenCopiedAlready,positionInObjClonesArray,property;if((haveIBeenCopiedAlready=objOriginalsClonedAlready.indexOf(this))>=0)return doSerialize?"$"+haveIBeenCopiedAlready:objectClones[haveIBeenCopiedAlready];if(this instanceof Widget&&indexOf.call(allMorphsInStructure,this)<0)return doSerialize?"$EXTERNAL"+this.uniqueIDString():this;positionInObjClonesArray=objOriginalsClonedAlready.length,objOriginalsClonedAlready.push(this),cloneOfMe=this.createPristineObjOfSameTypeAsThisOne(doSerialize),objectClones.push(cloneOfMe);for(property in this)this.hasOwnProperty(property)&&(null==this[property]?cloneOfMe[property]=nil:"object"==typeof this[property]?null!=this[property].rebuildDerivedValue?cloneOfMe[property]=nil:(null==this[property].deepCopy&&(console.dir(this),console.log(property)),cloneOfMe[property]=this[property].deepCopy(doSerialize,objOriginalsClonedAlready,objectClones,allMorphsInStructure)):"instanceNumericID"!==property&&(cloneOfMe[property]=this[property]));return doSerialize?"$"+positionInObjClonesArray:(cloneOfMe.rebuildDerivedValues(this),null!=this.alignCopiedMorphToBrokenInfoDataStructures&&this.alignCopiedMorphToBrokenInfoDataStructures(cloneOfMe),null!=this.alignCopiedMorphToSteppingStructures&&this.alignCopiedMorphToSteppingStructures(cloneOfMe),null!=this.alignCopiedMorphToReferenceTracker&&this.alignCopiedMorphToReferenceTracker(cloneOfMe),"function"==typeof cloneOfMe.justBeenCopied&&cloneOfMe.justBeenCopied(),cloneOfMe)},rebuildDerivedValues:function(theOriginal){var property,ref,results;results=[];for(property in this)this.hasOwnProperty(property)&&null!=(null!=(ref=theOriginal[property])?ref.rebuildDerivedValue:void 0)?results.push(theOriginal[property].rebuildDerivedValue(this,property)):results.push(void 0);return results},createPristineObjOfSameTypeAsThisOne:function(addClassNameFieldIfObjectNotArray){var theClone;return"object"==typeof this?("function"==typeof(theClone=Object.create(this.constructor.prototype)).registerThisInstance&&theClone.registerThisInstance(),addClassNameFieldIfObjectNotArray&&(theClone.className=this.constructor.name),null!=theClone.assignUniqueID&&theClone.assignUniqueID(),theClone):this}})}},window.Color=function(r=0,g=0,b=0,a){this.r=r,this.g=g,this.b=b,this.a=a||(0===a?0:1),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Color,"name",{value:"Color"}),window.Color.instances=[],window.Color.__super__=Object.prototype,window.Color.augmentWith(window.DeepCopierMixin,"Color"),window.Color.prototype.a=nil,window.Color.prototype.r=nil,window.Color.prototype.g=nil,window.Color.prototype.b=nil,window.Color.prototype.toString=function(){return"rgba("+Math.round(this.r)+","+Math.round(this.g)+","+Math.round(this.b)+","+this.a+")"},window.Color.prototype.prepareBeforeSerialization=function(){var property,results;this.className=this.constructor.name,this.classVersion="0.0.1",this.serializerVersion="0.0.1",results=[];for(property in this)null!=this[property]&&"object"==typeof this[property]&&null==this[property].className&&null!=this[property].prepareBeforeSerialization?results.push(this[property].prepareBeforeSerialization()):results.push(void 0);return results},window.Color.prototype.copy=function(){return new this.constructor(this.r,this.g,this.b,this.a)},window.Color.prototype.eq=function(aColor){return aColor&&this.r===aColor.r&&this.g===aColor.g&&this.b===aColor.b},window.Color.prototype.hsv=function(){var bb,d,gg,h,max,min,rr,s,v;if(rr=this.r/255,gg=this.g/255,bb=this.b/255,max=Math.max(rr,gg,bb),min=Math.min(rr,gg,bb),h=max,s=max,v=max,d=max-min,s=0===max?0:d/max,max===min)h=0;else{switch(max){case rr:h=(gg-bb)/d+(gg<bb?6:0);break;case gg:h=(bb-rr)/d+2;break;case bb:h=(rr-gg)/d+4}h/=6}return[h,s,v]},window.Color.prototype.set_hsv=function(h,s,v){var f,i,p,q,t;switch(i=Math.floor(6*h),f=6*h-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s),i%6){case 0:this.r=v,this.g=t,this.b=p;break;case 1:this.r=q,this.g=v,this.b=p;break;case 2:this.r=p,this.g=v,this.b=t;break;case 3:this.r=p,this.g=q,this.b=v;break;case 4:this.r=t,this.g=p,this.b=v;break;case 5:this.r=v,this.g=p,this.b=q}return this.r*=255,this.g*=255,this.b*=255},window.Color.prototype.mixed=function(proportion,otherColor){var frac1,frac2;return frac1=Math.min(Math.max(proportion,0),1),frac2=1-frac1,new this.constructor(this.r*frac1+otherColor.r*frac2,this.g*frac1+otherColor.g*frac2,this.b*frac1+otherColor.b*frac2)},window.Color.prototype.darker=function(percent){var fract;return fract=.8333,percent&&(fract=(100-percent)/100),this.mixed(fract,new this.constructor(0,0,0))},window.Color.prototype.lighter=function(percent){var fract;return fract=.8333,percent&&(fract=(100-percent)/100),this.mixed(fract,new this.constructor(255,255,255))},window.Color.prototype.dansDarker=function(){var hsv,result,vv;return hsv=this.hsv(),result=new this.constructor,vv=Math.max(hsv[2]-.16,0),result.set_hsv(hsv[0],hsv[1],vv),result},window.Color.byName_aliceblue=[240,248,255],window.Color.byName_antiquewhite=[250,235,215],window.Color.byName_aqua=[0,255,255],window.Color.byName_aquamarine=[127,255,212],window.Color.byName_azure=[240,255,255],window.Color.byName_beige=[245,245,220],window.Color.byName_bisque=[255,228,196],window.Color.byName_black=[0,0,0],window.Color.byName_blanchedalmond=[255,235,205],window.Color.byName_blue=[0,0,255],window.Color.byName_blueviolet=[138,43,226],window.Color.byName_brown=[165,42,42],window.Color.byName_burlywood=[222,184,135],window.Color.byName_cadetblue=[95,158,160],window.Color.byName_chartreuse=[127,255,0],window.Color.byName_chocolate=[210,105,30],window.Color.byName_coral=[255,127,80],window.Color.byName_cornflowerblue=[100,149,237],window.Color.byName_cornsilk=[255,248,220],window.Color.byName_crimson=[220,20,60],window.Color.byName_cyan=[0,255,255],window.Color.byName_darkblue=[0,0,139],window.Color.byName_darkcyan=[0,139,139],window.Color.byName_darkgoldenrod=[184,134,11],window.Color.byName_darkgray=[169,169,169],window.Color.byName_darkgrey=[169,169,169],window.Color.byName_darkgreen=[0,100,0],window.Color.byName_darkkhaki=[189,183,107],window.Color.byName_darkmagenta=[139,0,139],window.Color.byName_darkolivegreen=[85,107,47],window.Color.byName_darkorange=[255,140,0],window.Color.byName_darkorchid=[153,50,204],window.Color.byName_darkred=[139,0,0],window.Color.byName_darksalmon=[233,150,122],window.Color.byName_darkseagreen=[143,188,143],window.Color.byName_darkslateblue=[72,61,139],window.Color.byName_darkslategray=[47,79,79],window.Color.byName_darkslategrey=[47,79,79],window.Color.byName_darkturquoise=[0,206,209],window.Color.byName_darkviolet=[148,0,211],window.Color.byName_deeppink=[255,20,147],window.Color.byName_deepskyblue=[0,191,255],window.Color.byName_dimgray=[105,105,105],window.Color.byName_dimgrey=[105,105,105],window.Color.byName_dodgerblue=[30,144,255],window.Color.byName_firebrick=[178,34,34],window.Color.byName_floralwhite=[255,250,240],window.Color.byName_forestgreen=[34,139,34],window.Color.byName_fuchsia=[255,0,255],window.Color.byName_gainsboro=[220,220,220],window.Color.byName_ghostwhite=[248,248,255],window.Color.byName_gold=[255,215,0],window.Color.byName_goldenrod=[218,165,32],window.Color.byName_gray=[128,128,128],window.Color.byName_grey=[128,128,128],window.Color.byName_green=[0,128,0],window.Color.byName_greenyellow=[173,255,47],window.Color.byName_honeydew=[240,255,240],window.Color.byName_hotpink=[255,105,180],window.Color.byName_indianred=[205,92,92],window.Color.byName_indigo=[75,0,130],window.Color.byName_ivory=[255,255,240],window.Color.byName_khaki=[240,230,140],window.Color.byName_lavender=[230,230,250],window.Color.byName_lavenderblush=[255,240,245],window.Color.byName_lawngreen=[124,252,0],window.Color.byName_lemonchiffon=[255,250,205],window.Color.byName_lightblue=[173,216,230],window.Color.byName_lightcoral=[240,128,128],window.Color.byName_lightcyan=[224,255,255],window.Color.byName_lightgoldenrodyellow=[250,250,210],window.Color.byName_lightgrey=[211,211,211],window.Color.byName_lightgray=[211,211,211],window.Color.byName_lightgreen=[144,238,144],window.Color.byName_lightpink=[255,182,193],window.Color.byName_lightsalmon=[255,160,122],window.Color.byName_lightseagreen=[32,178,170],window.Color.byName_lightskyblue=[135,206,250],window.Color.byName_lightslategray=[119,136,153],window.Color.byName_lightslategrey=[119,136,153],window.Color.byName_lightsteelblue=[176,196,222],window.Color.byName_lightyellow=[255,255,224],window.Color.byName_lime=[0,255,0],window.Color.byName_limegreen=[50,205,50],window.Color.byName_linen=[250,240,230],window.Color.byName_mintcream=[245,255,250],window.Color.byName_mistyrose=[255,228,225],window.Color.byName_moccasin=[255,228,181],window.Color.byName_navajowhite=[255,222,173],window.Color.byName_navy=[0,0,128],window.Color.byName_oldlace=[253,245,230],window.Color.byName_olive=[128,128,0],window.Color.byName_olivedrab=[107,142,35],window.Color.byName_orange=[255,165,0],window.Color.byName_orangered=[255,69,0],window.Color.byName_orchid=[218,112,214],window.Color.byName_palegoldenrod=[238,232,170],window.Color.byName_palegreen=[152,251,152],window.Color.byName_paleturquoise=[175,238,238],window.Color.byName_palevioletred=[216,112,147],window.Color.byName_papayawhip=[255,239,213],window.Color.byName_peachpuff=[255,218,185],window.Color.byName_peru=[205,133,63],window.Color.byName_pink=[255,192,203],window.Color.byName_plum=[221,160,221],window.Color.byName_powderblue=[176,224,230],window.Color.byName_purple=[128,0,128],window.Color.byName_red=[255,0,0],window.Color.byName_rosybrown=[188,143,143],window.Color.byName_royalblue=[65,105,225],window.Color.byName_saddlebrown=[139,69,19],window.Color.byName_salmon=[250,128,114],window.Color.byName_sandybrown=[244,164,96],window.Color.byName_seagreen=[46,139,87],window.Color.byName_seashell=[255,245,238],window.Color.byName_sienna=[160,82,45],window.Color.byName_silver=[192,192,192],window.Color.byName_skyblue=[135,206,235],window.Color.byName_slateblue=[106,90,205],window.Color.byName_slategray=[112,128,144],window.Color.byName_slategrey=[112,128,144],window.Color.byName_snow=[255,250,250],window.Color.byName_springgreen=[0,255,127],window.Color.byName_steelblue=[70,130,180],window.Color.byName_tan=[210,180,140],window.Color.byName_teal=[0,128,128],window.Color.byName_thistle=[216,191,216],window.Color.byName_tomato=[255,99,71],window.Color.byName_turquoise=[64,224,208],window.Color.byName_violet=[238,130,238],window.Color.byName_wheat=[245,222,179],window.Color.byName_white=[255,255,255],window.Color.byName_whitesmoke=[245,245,245],window.Color.byName_yellow=[255,255,0],window.Color.byName_yellowgreen=[154,205,50],window.Color.byName_angleColor="angleColor",window.Color.transparent=function(){return new this(0,0,0,0)},window.Appearance=function(morph,ownColorInsteadOfWidgetColor){this.morph=morph,this.ownColorInsteadOfWidgetColor=ownColorInsteadOfWidgetColor,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Appearance,"name",{value:"Appearance"}),window.Appearance.instances=[],window.Appearance.__super__=Object.prototype,window.Appearance.augmentWith(window.DeepCopierMixin,"Appearance"),window.Appearance.prototype.morph=nil,window.Appearance.prototype.ownColorInsteadOfWidgetColor=nil,window.Appearance.prototype.isTransparentAt=function(aPoint){},window.Appearance.prototype.paintHighlight=function(aContext,al,at,w,h){},window.Appearance.prototype.paintIntoAreaOrBlitFromBackBuffer=function(aContext,clippingRectangle,appliedShadow){};var HighlightableMixin;HighlightableMixin={onceAddedClassProperties:function(fromClass){return this.addInstanceProperties(fromClass,{color_hover:new Color(192,192,192),color_pressed:new Color(128,128,128),color_normal:new Color(245,244,245),state:0,STATE_NORMAL:0,STATE_HIGHLIGHTED:1,STATE_PRESSED:2,updateColor:function(){return this.setColor(function(){switch(this.state){case this.STATE_NORMAL:return this.color_normal;case this.STATE_HIGHLIGHTED:return this.color_hover;case this.STATE_PRESSED:return this.color_pressed}}.call(this)),this.changed()},mouseEnter:function(){if(this.state=this.STATE_HIGHLIGHTED,this.updateColor(),this.toolTipMessage)return"function"==typeof this.startCountdownForBubbleHelp?this.startCountdownForBubbleHelp(this.toolTipMessage):void 0},mouseLeave:function(){if(this.state=this.STATE_NORMAL,this.updateColor(),this.toolTipMessage)return world.hand.destroyToolTips()},mouseDownLeft:function(){return this.state=this.STATE_PRESSED,this.updateColor(),window[this[arguments.callee.name+"_class_injected_in"]],window[this[arguments.callee.name+"_class_injected_in"]].__super__[arguments.callee.name].apply(this,arguments)},mouseUpLeft:function(){return this.state=this.STATE_NORMAL,this.updateColor()}})}},window.LayoutSpec=function(){window.LayoutSpec.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.LayoutSpec,"name",{value:"LayoutSpec"}),window.LayoutSpec.instances=[],window.LayoutSpec.__super__=Object.prototype,window.LayoutSpec.ATTACHEDAS_FREEFLOATING=1e5,window.LayoutSpec.ATTACHEDAS_INSET=100001,window.LayoutSpec.ATTACHEDAS_VERTICAL_STACK_ELEMENT=100002,window.LayoutSpec.ATTACHEDAS_WINDOW_CONTENT=100003,window.LayoutSpec.ATTACHEDAS_STACK_HORIZONTAL_VERTICALALIGNMENTS_UNDEFINED=100004,window.LayoutSpec.ATTACHEDAS_STACK_HORIZONTAL_VERTICALALIGNMENTS_STRETCH=100005,window.LayoutSpec.ATTACHEDAS_STACK_HORIZONTAL_VERTICALALIGNMENTS_TOP=100006,window.LayoutSpec.ATTACHEDAS_STACK_HORIZONTAL_VERTICALALIGNMENTS_CENTER=100007,window.LayoutSpec.ATTACHEDAS_STACK_HORIZONTAL_VERTICALALIGNMENTS_BOTTOM=100008,window.LayoutSpec.SPREADABILITY_HANDLES=1,window.LayoutSpec.SPREADABILITY_NONE=10,window.LayoutSpec.SPREADABILITY_LOW=100,window.LayoutSpec.SPREADABILITY_MEDIUM=1e3,window.LayoutSpec.SPREADABILITY_SPACERS=1e8,window.PreferredSize=function(){window.PreferredSize.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PreferredSize,"name",{value:"PreferredSize"}),window.PreferredSize.instances=[],window.PreferredSize.__super__=Object.prototype,window.PreferredSize.THIS_ONE_I_HAVE_NOW=-1,window.PreferredSize.DONT_MIND=-2,window.VerticalStackLayoutSpec=function(elasticity){return this.elasticity=elasticity,"function"==typeof this.registerThisInstance&&this.registerThisInstance(),nil},Object.defineProperty(window.VerticalStackLayoutSpec,"name",{value:"VerticalStackLayoutSpec"}),window.VerticalStackLayoutSpec.instances=[],window.VerticalStackLayoutSpec.__super__=Object.prototype,window.VerticalStackLayoutSpec.augmentWith(window.DeepCopierMixin,"VerticalStackLayoutSpec"),window.VerticalStackLayoutSpec.prototype.stack=nil,window.VerticalStackLayoutSpec.prototype.element=nil,window.VerticalStackLayoutSpec.prototype.widthOfStackWhenAdded=nil,window.VerticalStackLayoutSpec.prototype.widthOfElementWhenAdded=nil,window.VerticalStackLayoutSpec.prototype.elasticity=1,window.VerticalStackLayoutSpec.prototype.alignment="left",window.VerticalStackLayoutSpec.prototype.rememberInitialDimensions=function(element,stack){var availableWidthInStack,elementWidthWithoutSpacing;return this.element=element,this.stack=stack,availableWidthInStack=this.stack.availableWidthForContents(),(elementWidthWithoutSpacing=this.element.widthWithoutSpacing())>availableWidthInStack?(this.widthOfElementWhenAdded=availableWidthInStack,this.elasticity=1):this.widthOfElementWhenAdded=elementWidthWithoutSpacing,this.widthOfStackWhenAdded=availableWidthInStack},window.VerticalStackLayoutSpec.prototype.getWidthInStack=function(){var availableWidthInStack,differenceWithFixedWidth,proportionalWidth,width;return availableWidthInStack=this.stack.availableWidthForContents(),proportionalWidth=availableWidthInStack*this.widthOfElementWhenAdded/this.widthOfStackWhenAdded,differenceWithFixedWidth=proportionalWidth-this.widthOfElementWhenAdded,width=this.widthOfElementWhenAdded+this.elasticity*differenceWithFixedWidth,width=Math.round(width),Math.min(width,availableWidthInStack)},window.VerticalStackLayoutSpec.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){return menu.addLine(),menu.addMenuItem("layout in stack ➜",!1,this,"vertStackMenu","")},window.VerticalStackLayoutSpec.prototype.vertStackMenu=function(morphOpeningThePopUp,targetMorph,a,b,c){var menu;return(menu=new MenuMorph(morphOpeningThePopUp,!1,targetMorph,!0,!0,nil)).addMenuItem("base width...",!0,this,"baseWidthPopout",""),menu.addMenuItem("elasticity...",!0,this,"elasticityPopout",""),"left"!==this.alignment&&menu.addMenuItem("align left",!0,this,"setAlignmentToLeft"),"right"!==this.alignment&&menu.addMenuItem("align right",!0,this,"setAlignmentToRight"),"center"!==this.alignment&&menu.addMenuItem("align center",!0,this,"setAlignmentToCenter"),menu.popUpAtHand()},window.VerticalStackLayoutSpec.prototype.setAlignmentToLeft=function(){if("left"!==this.alignment)return this.alignment="left",this.element.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.VerticalStackLayoutSpec.prototype.setAlignmentToRight=function(){if("right"!==this.alignment)return this.alignment="right",this.element.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.VerticalStackLayoutSpec.prototype.setAlignmentToCenter=function(){if("enter"!==this.alignment)return this.alignment="center",this.element.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.VerticalStackLayoutSpec.prototype.elasticityPopout=function(menuItem,a,b,c,d,e,f){return this.element.prompt(menuItem.parent.title+"\nelasticity:",this,"setElasticity",(100*this.elasticity).toString(),nil,0,100,!0)},window.VerticalStackLayoutSpec.prototype.setElasticity=function(elasticityOrMorphGivingElasticity,morphGivingElasticity){var elasticity;if(elasticity=null!=(null!=morphGivingElasticity?morphGivingElasticity.getValue:void 0)?morphGivingElasticity.getValue():elasticityOrMorphGivingElasticity,elasticity=Number(elasticity),elasticity/=100,this.elasticity!==elasticity)return this.elasticity=elasticity,this.element.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.VerticalStackLayoutSpec.prototype.baseWidthPopout=function(menuItem,a,b,c,d,e,f){return this.element.prompt(menuItem.parent.title+"\nbase width:",this,"setWidthOfElementWhenAdded",this.widthOfElementWhenAdded.toString(),nil,10,1e3,!0)},window.VerticalStackLayoutSpec.prototype.setWidthOfElementWhenAdded=function(widthOfElementWhenAddedOrMorphGivingWidthOfElementWhenAdded,morphGivingWidthOfElementWhenAdded){var widthOfElementWhenAdded;if(widthOfElementWhenAdded=null!=(null!=morphGivingWidthOfElementWhenAdded?morphGivingWidthOfElementWhenAdded.getValue:void 0)?morphGivingWidthOfElementWhenAdded.getValue():widthOfElementWhenAddedOrMorphGivingWidthOfElementWhenAdded,(widthOfElementWhenAdded=Math.round(widthOfElementWhenAdded))&&this.widthOfElementWhenAdded!==widthOfElementWhenAdded)return this.widthOfElementWhenAdded=widthOfElementWhenAdded,this.element.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.WindowContentLayoutSpec=function(preferredStartingWidth,preferredStartingHeight,elasticity){this.preferredStartingWidth=preferredStartingWidth,this.preferredStartingHeight=preferredStartingHeight,WindowContentLayoutSpec.__super__.constructor.call(this,elasticity),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowContentLayoutSpec,"name",{value:"WindowContentLayoutSpec"}),window.WindowContentLayoutSpec.instances=[],window.WindowContentLayoutSpec.__super__=window.VerticalStackLayoutSpec.prototype,window.WindowContentLayoutSpec=extend(window.WindowContentLayoutSpec,window.VerticalStackLayoutSpec),window.WindowContentLayoutSpec.augmentWith(window.DeepCopierMixin,"WindowContentLayoutSpec"),window.WindowContentLayoutSpec.prototype.preferredStartingWidth=nil,window.WindowContentLayoutSpec.prototype.preferredStartingHeight=nil,window.WindowContentLayoutSpec.prototype.canSetHeightFreely=!0,window.WindowContentLayoutSpec.prototype.resizerCanOverlapContents=!0,window.WindowContentLayoutSpec.prototype.rememberInitialDimensions=function(element,stack){var availableWidthInStack;if(this.element=element,this.stack=stack,WindowContentLayoutSpec.__super__.rememberInitialDimensions.apply(this,arguments),availableWidthInStack=this.stack.availableWidthForContents(),this.preferredStartingWidth===PreferredSize.DONT_MIND)return this.widthOfElementWhenAdded=availableWidthInStack,this.elasticity=1},window.TreeNode=function(parent=nil,children=[]){this.parent=parent,this.children=children,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TreeNode,"name",{value:"TreeNode"}),window.TreeNode.instances=[],window.TreeNode.__super__=Object.prototype,window.TreeNode.prototype.parent=nil,window.TreeNode.prototype.children=nil,window.TreeNode.prototype.rootCache=nil,window.TreeNode.prototype.rootCacheChecker=nil,window.TreeNode.prototype.checkFirstParentClippingAtBoundsCache=nil,window.TreeNode.prototype.cachedFirstParentClippingAtBounds=nil,window.TreeNode.prototype.gcSessionIdMark=0,window.TreeNode.prototype.gcReferenceExaminedSessionIdMark=0,window.TreeNode.prototype.toString=function(){return"a TreeNode["+(null!=this.children?this.children.length:"-")+"]"},window.TreeNode.prototype.childrenTopToBottom=function(){return arrayShallowCopyAndReverse(this.children)},window.TreeNode.prototype.addChild=function(aMorphicNode,position=nil){return WorldMorph.numberOfAddsAndRemoves++,this.invalidateFullBoundsCache(this),this.invalidateFullClippedBoundsCache(this),null==position?this.children.push(aMorphicNode):this.children.splice(position,0,aMorphicNode),aMorphicNode.parent=this},window.TreeNode.prototype.addChildFirst=function(aMorphicNode){return this.addChild(aMorphicNode,0)},window.TreeNode.prototype.moveAsLastChild=function(){var base,idx;if(null!=this.parent&&-1!==(idx=this.parent.children.indexOf(this))&&idx!==this.parent.children.length-1)return this.parent.children.splice(idx,1),this.parent.children.push(this),"function"==typeof(base=this.parent).childMovedInFrontOfOthers?base.childMovedInFrontOfOthers(this):void 0},window.TreeNode.prototype.removeChild=function(aMorphicNode){return WorldMorph.numberOfAddsAndRemoves++,this.invalidateFullBoundsCache(this),this.invalidateFullClippedBoundsCache(this),this.children.remove(aMorphicNode),aMorphicNode.parent=nil},window.TreeNode.prototype.markReferenceAsVisited=function(newGcSessionId){return this.gcReferenceExaminedSessionIdMark=newGcSessionId},window.TreeNode.prototype.wasReferenceVisited=function(newGcSessionId){return this.gcReferenceExaminedSessionIdMark===newGcSessionId},window.TreeNode.prototype.markItAndItsParentsAsReachable=function(newGcSessionId){if(this.gcSessionId=newGcSessionId,null!=this.parent){if(this.parent.gcSessionId===newGcSessionId)return;if(this.isDirectlyInBasement())return;return this.parent.markItAndItsParentsAsReachable(newGcSessionId)}},window.TreeNode.prototype.isOrphan=function(){var root;return(root=this.root())!==world&&root!==world.hand},window.TreeNode.prototype.isDirectlyInBasement=function(){var ref,ref1;return(null!=(ref=this.parent)&&null!=(ref1=ref.parent)?ref1.parent:void 0)instanceof BasementWdgt},window.TreeNode.prototype.isInBasement=function(){return 1===this.allParentsBottomToTopSuchThat(function(eachWdgt){return eachWdgt instanceof BasementWdgt}).length},window.TreeNode.prototype.isInBasementButReachable=function(newGcSessionId){return this.gcSessionId===newGcSessionId||(this.parent.gcSessionId===newGcSessionId||!(this.parent instanceof BasementWdgt)&&this.parent.isInBasementButReachable(newGcSessionId))},window.TreeNode.prototype.SLOWroot=function(){return null!=this.parent?this.parent.SLOWroot():this},window.TreeNode.prototype.root=function(){var result,theRoot;return this.rootCacheChecker===WorldMorph.numberOfAddsAndRemoves?result=this.rootCache:(theRoot=this,null!=this.parent&&(theRoot=this.parent.root()),this.rootCacheChecker=WorldMorph.numberOfAddsAndRemoves,this.rootCache=theRoot,result=this.rootCache),world.doubleCheckCachedMethodsResults&&result!==this.SLOWroot()&&alert("root is broken"),result},window.TreeNode.prototype.pathOfChildrenPositionsRelativeToWorld=function(pathSoFar){return null==pathSoFar&&(pathSoFar={actualPath:[],lengthOfChildrenArrays:[]}),null!=this.parent?(pathSoFar.actualPath.push(this.parent.children.indexOf(this)),pathSoFar.lengthOfChildrenArrays.push(this.parent.children.length),this.parent.pathOfChildrenPositionsRelativeToWorld(pathSoFar)):this===world?(pathSoFar.actualPath.reverse(),pathSoFar.lengthOfChildrenArrays.reverse(),pathSoFar):nil},window.TreeNode.prototype.depth=function(){return this.parent?this.parent.depth()+1:0},window.TreeNode.prototype.allChildrenBottomToTop=function(){var result;return result=[this],this.children.forEach(function(child){return result=result.concat(child.allChildrenBottomToTop())}),result},window.TreeNode.prototype.allChildrenTopToBottom=function(){return allChildrenTopToBottomSuchThat(function(){return!0})},window.TreeNode.prototype.allChildrenTopToBottomSuchThat=function(predicate){var collected,i,morph,morphNumber;for(collected=[],morphNumber=i=this.children.length-1;i>=0;morphNumber=i+=-1)morph=this.children[morphNumber],collected=collected.concat(morph.allChildrenTopToBottomSuchThat(predicate));return predicate.call(nil,this)&&collected.push(this),collected},window.TreeNode.prototype.forAllChildrenBottomToTop=function(aFunction){if(aFunction.call(nil,this),this.children.length)return this.children.forEach(function(child){return child.forAllChildrenBottomToTop(aFunction)})},window.TreeNode.prototype.allLeafsBottomToTop=function(){var result;return 0===this.children.length?[this]:(result=[],this.children.forEach(function(child){return result=result.concat(child.allLeafsBottomToTop())}),result)},window.TreeNode.prototype.allParentsBottomToTop=function(){var someParents;return null!=this.parent?((someParents=this.parent.allParentsBottomToTop()).push(this),someParents):[this]},window.TreeNode.prototype.allParentsTopToBottom=function(){return this.allParentsBottomToTop().reverse()},window.TreeNode.prototype.allParentsBottomToTopSuchThat=function(predicate){var result;return result=[],null!=this.parent&&(result=this.parent.allParentsBottomToTopSuchThat(predicate)),predicate.call(nil,this)&&result.push(this),result},window.TreeNode.prototype.allParentsTopToBottomSuchThat=function(predicate){var collected;return collected=[],predicate.call(nil,this)&&(collected=[this]),null!=this.parent&&(collected=collected.concat(this.parent.allParentsTopToBottomSuchThat(predicate))),collected},window.TreeNode.prototype.isAncestorOf=function(morph){var examinedMorph;if(null==morph&&"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&(console.log("failed to find morph in test: "+window.world.automatorRecorderAndPlayer.name),console.log("trying to find item with text label: "+window.world.automatorRecorderAndPlayer.getCommandBeingPlayed().textLabelOfClickedItem),console.log("...you can likely fix the test by correcting the label above in the test")),morph===this)return!0;for(examinedMorph=morph;null!=examinedMorph.parent;)if((examinedMorph=examinedMorph.parent)===this)return!0;return!1},window.TreeNode.prototype.siblings=function(){var siblings;return this.parent?((siblings=arrayShallowCopy(this.parent.children)).remove(this),siblings):[]},window.TreeNode.prototype.firstSiblingsSuchThat=function(predicate){var eachSibling,i,len,ref;for(i=0,len=(ref=this.parent.children).length;i<len;i++)if(eachSibling=ref[i],predicate.call(nil,eachSibling))return eachSibling;return nil},window.TreeNode.prototype.amITheFirstSibling=function(){return this.parent.children[0]===this},window.TreeNode.prototype.amITheLastSibling=function(){return this.parent.children[this.parent.children.length-1]===this},window.TreeNode.prototype.positionAmongSiblings=function(){var i,len,ref,theCount;for(theCount=0,i=0,len=(ref=this.parent.children).length;i<len;i++){if(ref[i]===this)return theCount;theCount++}},window.TreeNode.prototype.siblingBeforeMeIsA=function(theConstructor){return!this.amITheFirstSibling()&&this.parent.children[this.positionAmongSiblings()-1]instanceof theConstructor},window.TreeNode.prototype.siblingAfterMeIsA=function(theConstructor){return!this.amITheLastSibling()&&this.parent.children[this.positionAmongSiblings()+1]instanceof theConstructor},window.TreeNode.prototype.howManySiblingsBeforeMeSuchThat=function(predicate){var eachSibling,i,len,ref,theCount;for(theCount=0,i=0,len=(ref=this.parent.children).length;i<len;i++){if((eachSibling=ref[i])===this)return theCount;predicate.call(nil,eachSibling)&&theCount++}return theCount},window.TreeNode.prototype.lastSiblingBeforeMeSuchThat=function(predicate){var eachSibling,i,indexOfMorph,len,ref,theCount;for(theCount=0,indexOfMorph=nil,i=0,len=(ref=this.parent.children).length;i<len&&(eachSibling=ref[i])!==this;i++)predicate.call(nil,eachSibling)&&(indexOfMorph=theCount),theCount++;return null!=indexOfMorph?this.parent.children[indexOfMorph]:nil},window.TreeNode.prototype.firstSiblingAfterMeSuchThat=function(predicate){var eachSibling,i,len,ref,searchActuallyOngoing;for(searchActuallyOngoing=!1,i=0,len=(ref=this.parent.children).length;i<len;i++){if(eachSibling=ref[i],searchActuallyOngoing&&predicate.call(nil,eachSibling))return eachSibling;eachSibling===this&&(searchActuallyOngoing=!0)}return nil},window.TreeNode.prototype.nthChildSuchThat=function(n,predicate){var eachChild,i,len,ref,theCount;for(theCount=0,i=0,len=(ref=this.children).length;i<len;i++)if(eachChild=ref[i],predicate.call(nil,eachChild)&&++theCount===n)return eachChild;return nil},window.TreeNode.prototype.firstChildSuchThat=function(predicate){return this.nthChildSuchThat(1,predicate)},window.TreeNode.prototype.SLOWfirstParentClippingAtBounds=function(morphToStartFrom=this){return null!=morphToStartFrom.parent?morphToStartFrom.parent.clipsAtRectangularBounds?morphToStartFrom.parent:morphToStartFrom.parent.SLOWfirstParentClippingAtBounds():nil},window.TreeNode.prototype.firstParentClippingAtBounds=function(morphToStartFrom=this){var result;return this.checkFirstParentClippingAtBoundsCache===WorldMorph.numberOfAddsAndRemoves&&world.doubleCheckCachedMethodsResults&&this.cachedFirstParentClippingAtBounds!==this.SLOWfirstParentClippingAtBounds(morphToStartFrom)&&alert("firstParentClippingAtBounds is broken (cached)"),result=null!=morphToStartFrom.parent?morphToStartFrom.parent.clipsAtRectangularBounds?morphToStartFrom.parent:morphToStartFrom.parent.firstParentClippingAtBounds():nil,world.doubleCheckCachedMethodsResults&&result!==this.SLOWfirstParentClippingAtBounds(morphToStartFrom)&&alert("firstParentClippingAtBounds is broken (uncached)"),this.checkFirstParentClippingAtBoundsCache=WorldMorph.numberOfAddsAndRemoves,this.cachedFirstParentClippingAtBounds=result},window.TreeNode.prototype.parentThatIsA=function(...constructors){var eachConstructor,i,len;for(i=0,len=constructors.length;i<len;i++)if(eachConstructor=constructors[i],this instanceof eachConstructor)return[this,eachConstructor];return this.parent?this.parent.parentThatIsA(...constructors):nil},window.TreeNode.prototype.isADescendantOf=function(theSupposedAncestorMorph){return this===theSupposedAncestorMorph||null!=this.parent&&this.parent.isADescendantOf(theSupposedAncestorMorph)},window.TreeNode.prototype.topMorphSuchThat=function(predicate){var foundMorph,i,morph,morphNumber;if(0===this.children.length)return predicate.call(nil,this)?this:nil;for(morphNumber=i=this.children.length-1;i>=0;morphNumber=i+=-1)if(morph=this.children[morphNumber],null!=(foundMorph=morph.topMorphSuchThat(predicate)))return foundMorph;return predicate.call(nil,this)?this:nil},window.TreeNode.prototype.topmostChildSuchThat=function(predicate){var i,morph,morphNumber;for(morphNumber=i=this.children.length-1;i>=0;morphNumber=i+=-1)if(morph=this.children[morphNumber],predicate.call(nil,morph))return morph;return nil},window.TreeNode.prototype.collectAllChildrenBottomToTopSuchThat=function(predicate){var collected;return collected=[],predicate.call(nil,this)&&(collected=[this]),this.children.forEach(function(child){return collected=collected.concat(child.collectAllChildrenBottomToTopSuchThat(predicate))}),collected},window.Widget=function(){var arr,ref;Widget.__super__.constructor.call(this),this.assignUniqueID(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state===AutomatorRecorderAndPlayer.RECORDING&&(arr=window.world.automatorRecorderAndPlayer.tagsCollectedWhileRecordingTest,ref=this.constructor.name,indexOf.call(arr,ref)<0&&arr.push(this.constructor.name)),this.bounds=Rectangle.EMPTY,this.minimumExtent=new Point(5,5),this.silentRawSetBounds(new Rectangle(0,0,50,40)),this.lastTime=Date.now(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Widget,"name",{value:"Widget"}),window.Widget.instances=[],window.Widget.__super__=window.TreeNode.prototype,window.Widget=extend(window.Widget,window.TreeNode),window.Widget.augmentWith(window.DeepCopierMixin,"Widget"),window.Widget.prototype.instanceNumericID=0,window.Widget.prototype.appearance=nil,window.Widget.prototype.dragsDropsAndEditingEnabled=!0,window.Widget.prototype.propertyUpTheChain=[1,2,3],window.Widget.prototype.morphMethod=function(){return 3.14},window.Widget.prototype.isMorph=!0,window.Widget.prototype.bounds=nil,window.Widget.prototype.minimumExtent=nil,window.Widget.prototype.color=new Color(80,80,80),window.Widget.prototype.strokeColor=nil,window.Widget.prototype.texture=nil,window.Widget.prototype.cachedTexture=nil,window.Widget.prototype.lastTime=nil,window.Widget.prototype.desiredExtent=nil,window.Widget.prototype.desiredPosition=nil,window.Widget.prototype.alpha=1,window.Widget.prototype.paddingTop=0,window.Widget.prototype.paddingBottom=0,window.Widget.prototype.paddingLeft=0,window.Widget.prototype.paddingRight=0,window.Widget.prototype.backgroundColor=nil,window.Widget.prototype.backgroundTransparency=1,window.Widget.prototype.isVisible=!0,window.Widget.prototype.collapsed=!1,window.Widget.prototype.isTemplate=!1,window.Widget.prototype._acceptsDrops=!1,window.Widget.prototype.noticesTransparentClick=!1,window.Widget.prototype.fps=0,window.Widget.prototype.isLockingToPanels=!1,window.Widget.prototype.defaultRejectDrags=!1,window.Widget.prototype.overridingContextMenu=nil,window.Widget.prototype.takesOverAndCoalescesChildrensMenus=!1,window.Widget.prototype.shadowBlur=10,window.Widget.prototype.onNextStep=nil,window.Widget.prototype.clickOutsideMeOrAnyOfMeChildrenCallback=[nil],window.Widget.prototype.textDescription=nil,window.Widget.prototype.geometryOrPositionPossiblyChanged=!1,window.Widget.prototype.clippedBoundsWhenLastPainted=nil,window.Widget.prototype.fullGeometryOrPositionPossiblyChanged=!1,window.Widget.prototype.fullClippedBoundsWhenLastPainted=nil,window.Widget.prototype.cachedFullBounds=nil,window.Widget.prototype.childrenBoundsUpdatedAt=-1,window.Widget.prototype.cachedFullClippedBounds=nil,window.Widget.prototype.checkFullClippedBoundsCache=nil,window.Widget.prototype.visibleBasedOnIsVisiblePropertyCache=nil,window.Widget.prototype.checkVisibleBasedOnIsVisiblePropertyCache="",window.Widget.prototype.clippedThroughBoundsCache=nil,window.Widget.prototype.checkClippedThroughBoundsCache="",window.Widget.prototype.clipThroughCache=nil,window.Widget.prototype.checkClipThroughCache=nil,window.Widget.prototype.srcBrokenRect=nil,window.Widget.prototype.dstBrokenRect=nil,window.Widget.prototype.layoutIsValid=!0,window.Widget.prototype.layoutSpec=LayoutSpec.ATTACHEDAS_FREEFLOATING,window.Widget.prototype.layoutSpecDetails=nil,window.Widget.prototype._showsAdders=!1,window.Widget.prototype.highlighted=!1,window.Widget.prototype.morphThisMorphIsHighlighting=nil,window.Widget.prototype.destroyed=!1,window.Widget.prototype.shadowInfo=nil,window.Widget.prototype.userMovedThisFromComputedPosition=!1,window.Widget.prototype.positionFractionalInHoldingPanel=nil,window.Widget.prototype.wasPositionedSlightlyOutsidePanel=!1,window.Widget.prototype.connectionsCalculationToken=314,window.Widget.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return this.layoutSpecDetails=new WindowContentLayoutSpec(PreferredSize.THIS_ONE_I_HAVE_NOW,PreferredSize.THIS_ONE_I_HAVE_NOW,1)},window.Widget.prototype.initialiseDefaultVerticalStackLayoutSpec=function(){if(!(this.layoutSpecDetails instanceof VerticalStackLayoutSpec)||null==this.layoutSpecDetails)return this.layoutSpecDetails=new VerticalStackLayoutSpec(1)},window.Widget.prototype.mouseClickRight=function(){return world.hand.openContextMenuAtPointer(this)},window.Widget.prototype.getTextDescription=function(){return null!=this.textDescription?this.textDescription+""+this.constructor.name.replace("Wdgt","")+" (adhoc description of morph)":this.constructor.name.replace("Wdgt","")+" (class name)"},window.Widget.prototype.identifyViaTextLabel=function(){var allCandidateMorphsWithSameTextDescription,myTextDescription,position,theLenght;return myTextDescription=this.getTextDescription(),allCandidateMorphsWithSameTextDescription=world.allChildrenTopToBottomSuchThat(function(m){return m.getTextDescription()===myTextDescription}),position=allCandidateMorphsWithSameTextDescription.indexOf(this),theLenght=allCandidateMorphsWithSameTextDescription.length,[myTextDescription,position,theLenght]},window.Widget.prototype.setTextDescription=function(textDescription){this.textDescription=textDescription},window.Widget.prototype.uniqueIDString=function(){return this.morphClassString()+"#"+this.instanceNumericID},window.Widget.prototype.morphClassString=function(){return this.constructor.name||this.constructor.toString().split(" ")[1].split("(")[0]},window.Widget.prototype.assignUniqueID=function(){return this.constructor.instancesCounter++,this.constructor.lastBuiltInstanceNumericID++,this.instanceNumericID=this.constructor.lastBuiltInstanceNumericID},window.Widget.prototype.startCountdownForBubbleHelp=function(contents){return ToolTipWdgt.createInAWhileIfHandStillContainedInMorph(this,contents)},window.Widget.prototype.registerThisInstance=function(){var goingUpClassHyerarchy,results;for(goingUpClassHyerarchy=this.constructor,results=[];null!=goingUpClassHyerarchy.instances;)indexOf.call(goingUpClassHyerarchy.instances,this)<0&&goingUpClassHyerarchy.instances.push(this),results.push(goingUpClassHyerarchy=goingUpClassHyerarchy.__super__.constructor);return results},window.Widget.prototype.unregisterThisInstance=function(){var goingUpClassHyerarchy,results;for(goingUpClassHyerarchy=this.constructor,results=[];null!=goingUpClassHyerarchy.instances;)goingUpClassHyerarchy.instances.remove(this),results.push(goingUpClassHyerarchy=goingUpClassHyerarchy.__super__.constructor);return results},window.Widget.prototype.isTransparentAt=function(aPoint){var ref;return null!=(ref=this.appearance)?ref.isTransparentAt(aPoint):void 0},window.Widget.prototype.paintHighlight=function(aContext,al,at,w,h){var ref;return null!=(ref=this.appearance)?ref.paintHighlight(aContext,al,at,w,h):void 0},window.Widget.prototype.paintIntoAreaOrBlitFromBackBuffer=function(aContext,clippingRectangle,appliedShadow){var ref;return null!=(ref=this.appearance)?ref.paintIntoAreaOrBlitFromBackBuffer(aContext,clippingRectangle,appliedShadow):void 0},window.Widget.prototype.paintStroke=function(aContext,clippingRectangle){if(null!=this.appearance&&null!=this.appearance.paintStroke)return this.appearance.paintStroke(aContext,clippingRectangle)},window.Widget.prototype.addShapeSpecificMenuItems=function(menu){var ref;return null!=(null!=(ref=this.appearance)?ref.addShapeSpecificMenuItems:void 0)?this.appearance.addShapeSpecificMenuItems(menu):menu},window.Widget.prototype.addShapeSpecificNumericalSetters=function(menuEntriesStrings,functionNamesStrings){var ref;return null==menuEntriesStrings&&(menuEntriesStrings=[],functionNamesStrings=[]),null!=(null!=(ref=this.appearance)?ref.addShapeSpecificNumericalSetters:void 0)&&([menuEntriesStrings,functionNamesStrings]=this.appearance.addShapeSpecificNumericalSetters(menuEntriesStrings,functionNamesStrings)),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.Widget.prototype.toString=function(){return"a ","undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.hidingOfMorphsNumberIDInLabels?"a "+this.morphClassString():"a "+this.uniqueIDString()},window.Widget.prototype.close=function(){var ref;if(this instanceof WindowWdgt||null==this.parent||!(this.parent instanceof WindowWdgt))return world.morphsDetectingClickOutsideMeOrAnyOfMeChildren.remove(this),null!=(ref=this.parent)&&"function"==typeof ref.childBeingClosed&&ref.childBeingClosed(this),null!=world.basementWdgt?world.basementWdgt.scrollPanel.contents.addInPseudoRandomPosition(this):world.inform("There is no\nbasement to go in!");this.parent.close()},window.Widget.prototype.closeFromContainerWindow=function(containerWindow){return containerWindow.close()},window.Widget.prototype.destroy=function(){var firstParentOwningMyShadow,previousParent,ref,ref1;return null!=(ref=this.parent)&&"function"==typeof ref.childBeingDestroyed&&ref.childBeingDestroyed(this),this.unregisterThisInstance(),world.morphsDetectingClickOutsideMeOrAnyOfMeChildren.remove(this),this.destroyed=!0,null!=(ref1=this.parent)&&ref1.invalidateLayout(),this.breakNumberOfRawMovesAndResizesCaches(),WorldMorph.numberOfAddsAndRemoves++,world.removeSteppingMorph(this),null!=world.caret&&this.isAncestorOf(world.caret.target)&&world.stopEditing(),this.onClickOutsideMeOrAnyOfMyChildren(nil),null!=this.parent&&(previousParent=this.parent,null!=(firstParentOwningMyShadow=this.firstParentOwningMyShadow())?firstParentOwningMyShadow.fullChanged():this.fullChanged(),previousParent.removeChild(this),null!=previousParent.childRemoved&&previousParent.childRemoved(this)),0!==this.children.length&&(this.children=[]),nil},window.Widget.prototype.fullDestroy=function(){for(WorldMorph.numberOfAddsAndRemoves++;0!==this.children.length;)this.children[0].fullDestroy();return this.destroy(),nil},window.Widget.prototype.closeChildren=function(){for(WorldMorph.numberOfAddsAndRemoves++;0!==this.children.length;)this.children[0].close();return nil},window.Widget.prototype.fullDestroyChildren=function(){if(0!==this.children.length){for(WorldMorph.numberOfAddsAndRemoves++;0!==this.children.length;)this.children[0].fullDestroy();return nil}},window.Widget.prototype.setLayoutSpec=function(newLayoutSpec){var isThereAnHandle;if(this.layoutSpec!==newLayoutSpec)return this.layoutSpec=newLayoutSpec,null!=(isThereAnHandle=this.firstChildSuchThat(function(m){return m instanceof HandleMorph}))?isThereAnHandle.updateVisibilityAndPosition():void 0},window.Widget.prototype.nextSteps=function(lst=[]){var nxt;if(nxt=lst.shift())return this.onNextStep=(()=>(nxt.call(this),this.nextSteps(lst)))},window.Widget.prototype.step=noOperation,window.Widget.prototype.left=function(){return this.bounds.left()},window.Widget.prototype.right=function(){return this.bounds.right()},window.Widget.prototype.top=function(){return this.bounds.top()},window.Widget.prototype.bottom=function(){return this.bounds.bottom()},window.Widget.prototype.center=function(){return this.bounds.center()},window.Widget.prototype.bottomCenter=function(){return this.bounds.bottomCenter()},window.Widget.prototype.bottomLeft=function(){return this.bounds.bottomLeft()},window.Widget.prototype.bottomRight=function(){return this.bounds.bottomRight()},window.Widget.prototype.boundingBox=function(){return this.bounds},window.Widget.prototype.leftTight=function(){return this.bounds.left()+this.paddingLeft},window.Widget.prototype.rightTight=function(){return this.bounds.right()-this.paddingRight},window.Widget.prototype.topTight=function(){return this.bounds.top()+this.paddingTop},window.Widget.prototype.bottomTight=function(){return this.bounds.bottom()-this.paddingBottom},window.Widget.prototype.bottomCenterTight=function(){return this.bounds.bottomCenter().subtract(new Point(0,this.paddingBottom))},window.Widget.prototype.bottomLeftTight=function(){return this.bounds.bottomLeft().add(new Point(this.paddingLeft,-this.paddingBottom))},window.Widget.prototype.bottomRightTight=function(){return this.bounds.bottomRight().subtract(new Point(this.paddingRight,this.paddingBottom))},window.Widget.prototype.boundingBoxTight=function(){return new Rectangle(this.leftTight(),this.topTight(),this.rightTight(),this.bottomTight())},window.Widget.prototype.rawResizeToWithoutSpacing=function(){},window.Widget.prototype.rawSetWidthSizeHeightAccordingly=function(newWidth){if(this.rawSetWidth(newWidth),this.implementsDeferredLayout())return this.invalidateLayout()},window.Widget.prototype.rawSetBounds=function(newBounds){if(!this.bounds.eq(newBounds))return this.bounds.origin.eq(newBounds.origin)||(this.bounds=this.bounds.translateTo(newBounds.origin),this.breakNumberOfRawMovesAndResizesCaches(),this.changed()),this.rawSetExtent(newBounds.extent())},window.Widget.prototype.setBounds=function(aRectangle,morphStartingTheChange=nil){var newExtent,newPos;if(window.recalculatingLayouts,this.layoutSpec!==LayoutSpec.ATTACHEDAS_FREEFLOATING);else if(aRectangle=aRectangle.round(),newExtent=new Point(aRectangle.width(),aRectangle.height()),this.extent().eq(newExtent)||(this.desiredExtent=newExtent,this.invalidateLayout()),newPos=aRectangle.origin.copy(),!this.position().eq(newPos))return this.desiredPosition=newPos,this.invalidateLayout()},window.Widget.prototype.silentRawSetBounds=function(newBounds){if(!this.bounds.eq(newBounds))return this.bounds.origin.eq(newBounds.origin)||(this.bounds=this.bounds.translateTo(newBounds.origin),this.breakNumberOfRawMovesAndResizesCaches()),this.silentRawSetExtent(newBounds.extent())},window.Widget.prototype.corners=function(){return this.bounds.corners()},window.Widget.prototype.leftCenter=function(){return this.bounds.leftCenter()},window.Widget.prototype.rightCenter=function(){return this.bounds.rightCenter()},window.Widget.prototype.topCenter=function(){return this.bounds.topCenter()},window.Widget.prototype.topLeft=function(){return this.bounds.origin},window.Widget.prototype.topRight=function(){return this.bounds.topRight()},window.Widget.prototype.position=function(){return this.bounds.origin},window.Widget.prototype.positionFractionalInMorph=function(theMorph){var fractionalXPos,fractionalYPos,relativeXPos,relativeYPos;return[relativeXPos,relativeYPos]=this.positionPixelsInMorph(theMorph),fractionalXPos=relativeXPos/theMorph.width(),fractionalYPos=relativeYPos/theMorph.height(),[fractionalXPos,fractionalYPos]},window.Widget.prototype.extentFractionalInMorph=function(theMorph){var fractionalHeight,fractionalWidth,height,width;return width=this.width(),height=this.height(),fractionalWidth=width/theMorph.width(),fractionalHeight=height/theMorph.height(),[fractionalWidth,fractionalHeight]},window.Widget.prototype.positionPixelsInMorph=function(theMorph){var relativePos;return relativePos=this.position().toLocalCoordinatesOf(theMorph),[relativePos.x,relativePos.y]},window.Widget.prototype.extent=function(){return this.bounds.extent()},window.Widget.prototype.width=function(){return this.bounds.width()},window.Widget.prototype.widthWithoutSpacing=function(){return this.width()},window.Widget.prototype.height=function(){return this.bounds.height()},window.Widget.prototype.cornersTight=function(){return[this.topLeftTight(),this.bottomLeftTight(),this.bottomRightTight(),this.topRightTight()]},window.Widget.prototype.leftCenterTight=function(){return this.bounds.leftCenter().add(new Point(this.paddingLeft,0))},window.Widget.prototype.rightCenterTight=function(){return this.bounds.rightCenter().subtract(new Point(this.paddingRight,0))},window.Widget.prototype.topCenterTight=function(){return this.bounds.topCenter().add(new Point(0,this.paddingTop))},window.Widget.prototype.topLeftTight=function(){return this.bounds.origin.add(new Point(this.paddingLeft,this.paddingTop))},window.Widget.prototype.topRightTight=function(){return this.bounds.topRight.add(new Point(-this.paddingRight,this.paddingTop))},window.Widget.prototype.positionTight=function(){return this.bounds.origin.add(new Point(this.paddingLeft,this.paddingTop))},window.Widget.prototype.extentTight=function(){return this.bounds.extent().subtract(new Point-(this.paddingLeft+this.paddingRight),-(this.paddingTop+this.paddingBottom))},window.Widget.prototype.widthTight=function(){return this.bounds.width()-(this.paddingLeft+this.paddingRight)},window.Widget.prototype.heightTight=function(){return this.bounds.height()-(this.paddingTop+this.paddingBottom)},window.Widget.prototype.plausibleTargetAndDestinationMorphs=function(theMorph){var result;return result=[],!this.visibleBasedOnIsVisibleProperty()||this.isCollapsed()||theMorph.isAncestorOf(this)||!this.areBoundsIntersecting(theMorph)||this.anyParentPopUpMarkedForClosure()||(result=[this]),this.children.forEach(function(child){return result=result.concat(child.plausibleTargetAndDestinationMorphs(theMorph))}),result},window.Widget.prototype.surelyNotShowingUpOnScreenBasedOnVisibilityCollapseAndOrphanage=function(){return!this.isVisible||(!!this.isOrphan()||(!this.visibleBasedOnIsVisibleProperty()||!!this.isCollapsed()))},window.Widget.prototype.SLOWvisibleBasedOnIsVisibleProperty=function(){return!!this.isVisible&&(null==this.parent||this.parent.SLOWvisibleBasedOnIsVisibleProperty())},window.Widget.prototype.visibleBasedOnIsVisibleProperty=function(){var result;return this.isVisible?null==this.parent?result=!0:this.checkVisibleBasedOnIsVisiblePropertyCache===WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges?result=this.visibleBasedOnIsVisiblePropertyCache:(this.checkVisibleBasedOnIsVisiblePropertyCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges,this.visibleBasedOnIsVisiblePropertyCache=this.parent.visibleBasedOnIsVisibleProperty(),result=this.visibleBasedOnIsVisiblePropertyCache):(this.checkVisibleBasedOnIsVisiblePropertyCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges,this.visibleBasedOnIsVisiblePropertyCache=!1,result=this.visibleBasedOnIsVisiblePropertyCache),world.doubleCheckCachedMethodsResults&&result!==this.SLOWvisibleBasedOnIsVisibleProperty()&&alert("visibleBasedOnIsVisibleProperty is broken"),result},window.Widget.prototype.invalidateFullBoundsCache=function(){var ref;if(null!=this.cachedFullBounds)return this.cachedFullBounds=nil,null!=(null!=(ref=this.parent)?ref.cachedFullBounds:void 0)?this.parent.invalidateFullBoundsCache(this):void 0},window.Widget.prototype.invalidateFullClippedBoundsCache=function(){var ref;if(null!=this.checkFullClippedBoundsCache)return this.checkFullClippedBoundsCache=nil,null!=(null!=(ref=this.parent)?ref.checkFullClippedBoundsCache:void 0)?this.parent.invalidateFullClippedBoundsCache(this):void 0},window.Widget.prototype.SLOWfullBounds=function(){var result;return result=this.bounds,this.children.forEach(function(child){if(child.visibleBasedOnIsVisibleProperty()&&!child.isCollapsed())return result=result.merge(child.SLOWfullBounds())}),result},window.Widget.prototype.SLOWfullClippedBounds=function(){var result;return this.isOrphan()||!this.visibleBasedOnIsVisibleProperty()||this.isCollapsed()?Rectangle.EMPTY:(result=this.clippedThroughBounds(),this.children.forEach(function(child){if(child.visibleBasedOnIsVisibleProperty()&&!child.isCollapsed())return result=result.merge(child.SLOWfullClippedBounds())}),result)},window.Widget.prototype.subMorphsMergedFullBounds=function(){var result;return result=nil,this.children.length&&(result=this.children[0].bounds,this.children.forEach(function(child){if(!(child instanceof HandleMorph||child instanceof CaretMorph))return result=child.implementsDeferredLayout()?result.merge(child.bounds):result.merge(child.fullBounds())})),result},window.Widget.prototype.fullBounds=function(){var result;return null!=this.cachedFullBounds?(world.doubleCheckCachedMethodsResults&&(this.cachedFullBounds.eq(this.SLOWfullBounds())||alert("fullBounds is broken (cached)")),this.cachedFullBounds):(result=this.bounds,this.children.forEach(function(child){if(child.visibleBasedOnIsVisibleProperty()&&!child.isCollapsed())return result=result.merge(child.fullBounds())}),world.doubleCheckCachedMethodsResults&&(result.eq(this.SLOWfullBounds())||alert("fullBounds is broken (uncached)")),this.cachedFullBounds=result)},window.Widget.prototype.fullClippedBounds=function(){var result;if(this.isOrphan()||!this.visibleBasedOnIsVisibleProperty()||this.isCollapsed())result=Rectangle.EMPTY;else{if(this.checkFullClippedBoundsCache===WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes)return world.doubleCheckCachedMethodsResults&&(this.cachedFullClippedBounds.eq(this.SLOWfullClippedBounds())||alert("fullClippedBounds is broken")),this.cachedFullClippedBounds;result=this.clippedThroughBounds(),this.children.forEach(function(child){if(child.visibleBasedOnIsVisibleProperty()&&!child.isCollapsed())return result=result.merge(child.fullClippedBounds())})}return world.doubleCheckCachedMethodsResults&&(result.eq(this.SLOWfullClippedBounds())||alert("fullClippedBounds is broken")),this.checkFullClippedBoundsCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes,this.cachedFullClippedBounds=result},window.Widget.prototype.clippedThroughBounds=function(){return this.checkClippedThroughBoundsCache===WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes?this.clippedThroughBoundsCache:this.isOrphan()||!this.visibleBasedOnIsVisibleProperty()||this.isCollapsed()?(this.checkClippedThroughBoundsCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes,this.clippedThroughBoundsCache=Rectangle.EMPTY,this.clippedThroughBoundsCache):(this.checkClippedThroughBoundsCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes,this.clippedThroughBoundsCache=this.boundingBox().intersect(this.clipThrough()),this.clippedThroughBoundsCache)},window.Widget.prototype.clipThrough=function(){var firstParentClippingAtBounds,firstParentClippingAtBoundsClipThroughBounds;return Window,this.checkClipThroughCache===WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes?this.clipThroughCache:this.isOrphan()||!this.visibleBasedOnIsVisibleProperty()||this.isCollapsed()?(this.checkClipThroughCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes,this.clipThroughCache=Rectangle.EMPTY,this.clipThroughCache):(null==(firstParentClippingAtBounds=this.firstParentClippingAtBounds())&&(firstParentClippingAtBounds=world),firstParentClippingAtBoundsClipThroughBounds=firstParentClippingAtBounds.clipThrough(),this.checkClipThroughCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes,this.clipsAtRectangularBounds?this.clipThroughCache=this.boundingBox().intersect(firstParentClippingAtBoundsClipThroughBounds):this.clipThroughCache=firstParentClippingAtBoundsClipThroughBounds,this.clipThroughCache)},window.Widget.prototype.fullRawMoveBy=function(delta){if(!delta.isZero())return this.breakNumberOfRawMovesAndResizesCaches(),this.fullChanged(),this.bounds=this.bounds.translateBy(delta),this.amIDirectlyInsideNonTextWrappingScrollPanelWdgt()&&(this.parent.parent.adjustContentsBounds(),this.parent.parent.adjustScrollBars()),this.parent instanceof SimpleVerticalStackPanelWdgt&&this.parent.adjustContentsBounds(),this.children.forEach(function(child){return child.silentFullRawMoveBy(delta)})},window.Widget.prototype.silentFullRawMoveBy=function(delta){return this.breakNumberOfRawMovesAndResizesCaches(),this.bounds=this.bounds.translateBy(delta),this.children.forEach(function(child){return child.silentFullRawMoveBy(delta)})},window.Widget.prototype.breakNumberOfRawMovesAndResizesCaches=function(){if(this.invalidateFullBoundsCache(this),this.invalidateFullClippedBoundsCache(this),!(this instanceof HandMorph&&0===this.children.length))return WorldMorph.numberOfRawMovesAndResizes++},window.Widget.prototype.fullRawMoveInDesktopToFractionalPosition=function(boundsOfParent){if(null==boundsOfParent&&(boundsOfParent=this.parent.bounds),this.positionFractionalInHoldingPanel[0]>0&&this.fullRawMoveTo(new Point(boundsOfParent.left()+boundsOfParent.width()*this.positionFractionalInHoldingPanel[0],this.top()).round()),this.positionFractionalInHoldingPanel[1]>0)return this.fullRawMoveTo(new Point(this.left(),boundsOfParent.top()+boundsOfParent.height()*this.positionFractionalInHoldingPanel[1]).round())},window.Widget.prototype.fullRawMoveInStretchablePanelToFractionalPosition=function(boundsOfParent){return null==boundsOfParent&&(boundsOfParent=this.parent.bounds),this.fullRawMoveTo(new Point(boundsOfParent.left()+boundsOfParent.width()*this.positionFractionalInHoldingPanel[0],boundsOfParent.top()+boundsOfParent.height()*this.positionFractionalInHoldingPanel[1]).round())},window.Widget.prototype.rawSetExtentToFractionalExtentInPaneUserHasSet=function(boundsOfParent){return null==boundsOfParent&&(boundsOfParent=this.parent.bounds),this.rawSetExtent(new Point(this.extentFractionalInHoldingPanel[0]*boundsOfParent.width(),this.extentFractionalInHoldingPanel[1]*boundsOfParent.height()))},window.Widget.prototype.fullRawMoveTo=function(aPoint){var delta;return aPoint.debugIfFloats(),(delta=aPoint.toLocalCoordinatesOf(this)).isZero()||(this.breakNumberOfRawMovesAndResizesCaches(),this.fullRawMoveBy(delta)),this.bounds.debugIfFloats()},window.Widget.prototype.fullMoveTo=function(aPoint,morphStartingTheChange=nil){var newPos,newX,newY;if(window.recalculatingLayouts,this.layoutSpec!==LayoutSpec.ATTACHEDAS_FREEFLOATING);else if(aPoint=aPoint.round(),newX=Math.max(aPoint.x,0),newY=Math.max(aPoint.y,0),newPos=new Point(newX,newY),!this.position().eq(newPos)&&(this.desiredPosition=newPos,this.invalidateLayout(),null!=morphStartingTheChange&&null!=this.parent&&morphStartingTheChange instanceof HandleMorph))return this.rememberFractionalPositionInHoldingPanel()},window.Widget.prototype.rememberFractionalPositionInHoldingPanel=function(){return this.positionFractionalInHoldingPanel=this.positionFractionalInMorph(this.parent)},window.Widget.prototype.rememberFractionalExtentInHoldingPanel=function(){return this.extentFractionalInHoldingPanel=this.extentFractionalInMorph(this.parent)},window.Widget.prototype.rememberFractionalSituationInHoldingPanel=function(){return this.rememberFractionalPositionInHoldingPanel(),this.rememberFractionalExtentInHoldingPanel(),this.wasPositionedSlightlyOutsidePanel=!this.parent.bounds.containsRectangle(this.bounds)},window.Widget.prototype.silentFullRawMoveTo=function(aPoint){var delta;if(this.breakNumberOfRawMovesAndResizesCaches(),0!==(delta=aPoint.toLocalCoordinatesOf(this)).x||0!==delta.y)return this.silentFullRawMoveBy(delta)},window.Widget.prototype.fullRawMoveLeftSideTo=function(x){return this.fullRawMoveTo(new Point(x,this.top()))},window.Widget.prototype.fullRawMoveRightSideTo=function(x){return this.fullRawMoveTo(new Point(x-this.width(),this.top()))},window.Widget.prototype.fullRawMoveTopSideTo=function(y){return this.fullRawMoveTo(new Point(this.left(),y))},window.Widget.prototype.fullRawMoveBottomSideTo=function(y){return this.fullRawMoveTo(new Point(this.left(),y-this.height()))},window.Widget.prototype.fullRawMoveCenterTo=function(aPoint){return this.fullRawMoveTo(aPoint.subtract(this.extent().floorDivideBy(2)))},window.Widget.prototype.fullRawMoveToSideOf=function(aWidget){return this.fullRawMoveTo(aWidget.topRight().add(new Point(10,-Math.round((this.height()-aWidget.height())/2)))),this.fullRawMoveWithin(this.parent)},window.Widget.prototype.fullRawMoveFullCenterTo=function(aPoint){return this.fullRawMoveTo(aPoint.subtract(this.fullBounds().extent().floorDivideBy(2)))},window.Widget.prototype.fullRawMoveWithin=function(aMorph){var bottomOff,leftOff,newBoundsForThisLayout,rightOff,topOff;if(null!=this.desiredExtent?(newBoundsForThisLayout=this.desiredExtent,this.desiredExtent=nil):newBoundsForThisLayout=this.extent(),null!=this.desiredPosition?(newBoundsForThisLayout=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(newBoundsForThisLayout),this.desiredPosition=nil):newBoundsForThisLayout=new Rectangle(this.position()).setBoundsWidthAndHeight(newBoundsForThisLayout),this.rawSetBounds(newBoundsForThisLayout),(rightOff=newBoundsForThisLayout.right()-aMorph.right())>0&&(this.fullRawMoveBy(new Point(-rightOff,0)),newBoundsForThisLayout=this.bounds),(leftOff=newBoundsForThisLayout.left()-aMorph.left())<0&&(this.fullRawMoveBy(new Point(-leftOff,0)),newBoundsForThisLayout=this.bounds),(bottomOff=newBoundsForThisLayout.bottom()-aMorph.bottom())>0&&(this.fullRawMoveBy(new Point(0,-bottomOff)),newBoundsForThisLayout=this.bounds),(topOff=newBoundsForThisLayout.top()-aMorph.top())<0)return this.fullRawMoveBy(new Point(0,-topOff)),newBoundsForThisLayout=this.bounds},window.Widget.prototype.notifyChildrenThatParentHasReLayouted=function(){var child,i,len,ref,results;for(results=[],i=0,len=(ref=this.children.slice()).length;i<len;i++)child=ref[i],results.push(child.parentHasReLayouted());return results},window.Widget.prototype.parentHasReLayouted=function(){return this.notifyChildrenThatParentHasReLayouted()},window.Widget.prototype.layoutInset=function(morphStartingTheChange=nil){if(null!=this.insetMorph&&this.insetMorph!==morphStartingTheChange)return this.insetMorph.fullRawMoveTo(this.insetPosition()),this.insetMorph.rawSetExtent(this.insetSpaceExtent(),this)},window.Widget.prototype.layoutSubmorphs=function(morphStartingTheChange=nil){var child,i,len,ref,results;for(this.layoutInset(morphStartingTheChange),results=[],i=0,len=(ref=this.children.slice()).length;i<len;i++)morphStartingTheChange!==(child=ref[i])?results.push(child.parentHasReLayouted()):results.push(void 0);return results},window.Widget.prototype.childChangedExtent=function(theMorphChangingTheExtent){if(this.insetMorph===theMorphChangingTheExtent)return this.rawSetExtent(this.extentBasedOnInsetExtent(theMorphChangingTheExtent),theMorphChangingTheExtent)},window.Widget.prototype.getMinimumExtent=function(){return this.minimumExtent},window.Widget.prototype.setMinimumExtent=function(minimumExtent){this.minimumExtent=minimumExtent},window.Widget.prototype.rawSetExtent=function(aPoint,morphStartingTheChange=nil){if(this!==morphStartingTheChange)return null==morphStartingTheChange&&(morphStartingTheChange=this),aPoint.eq(this.extent())||(this.breakNumberOfRawMovesAndResizesCaches(),this.silentRawSetExtent(aPoint),this.changed(),this.reLayout(),this.layoutSubmorphs(morphStartingTheChange),null==this.parent||this.parent===morphStartingTheChange)?void 0:this.parent.childChangedExtent(this)},window.Widget.prototype.setExtent=function(aPoint,morphStartingTheChange=nil){var newExtent,newHeight,newWidth;if(window.recalculatingLayouts,this.layoutSpec!==LayoutSpec.ATTACHEDAS_FREEFLOATING);else if(aPoint=aPoint.round(),newWidth=Math.max(aPoint.x,0),newHeight=Math.max(aPoint.y,0),newExtent=new Point(newWidth,newHeight),!this.extent().eq(newExtent)&&(this.desiredExtent=newExtent,this.invalidateLayout(),null!=morphStartingTheChange&&null!=this.parent&&morphStartingTheChange instanceof HandleMorph))return this.extentFractionalInHoldingPanel=this.extentFractionalInMorph(this.parent)},window.Widget.prototype.silentRawSetExtent=function(aPoint){var minExtent,newBounds,newHeight,newWidth;if(aPoint=aPoint.round(),minExtent=this.getMinimumExtent(),aPoint.ge(minExtent)||(aPoint=aPoint.max(minExtent)),newWidth=Math.max(aPoint.x,0),newHeight=Math.max(aPoint.y,0),newBounds=new Rectangle(this.bounds.origin,new Point(this.bounds.origin.x+newWidth,this.bounds.origin.y+newHeight)),!this.bounds.eq(newBounds)&&(this.bounds=newBounds,this.breakNumberOfRawMovesAndResizesCaches(),this.amIDirectlyInsideNonTextWrappingScrollPanelWdgt()&&(this.parent.parent.adjustContentsBounds(),this.parent.parent.adjustScrollBars()),this.parent instanceof SimpleVerticalStackPanelWdgt))return this.parent.adjustContentsBounds()},window.Widget.prototype.refreshScrollPanelWdgtOrVerticalStackIfIamInIt=function(){if(this.amIDirectlyInsideScrollPanelWdgt()&&(this.parent.parent.adjustContentsBounds(),this.parent.parent.adjustScrollBars()),this.parent instanceof SimpleVerticalStackPanelWdgt)return this.parent.adjustContentsBounds()},window.Widget.prototype.rawSetWidth=function(width){return this.breakNumberOfRawMovesAndResizesCaches(),this.rawSetExtent(new Point(width||0,this.height()))},window.Widget.prototype.setWidth=function(width){var newExtent,newWidth;if(window.recalculatingLayouts,this.layoutSpec!==LayoutSpec.ATTACHEDAS_FREEFLOATING);else if(newWidth=Math.max(width,0),newExtent=new Point(newWidth,this.height()),!this.extent().eq(newExtent))return this.desiredExtent=newExtent,this.invalidateLayout()},window.Widget.prototype.silentRawSetWidth=function(width){var w;return this.breakNumberOfRawMovesAndResizesCaches(),w=Math.max(Math.round(width||0),0),this.bounds=new Rectangle(this.bounds.origin,new Point(this.bounds.origin.x+w,this.bounds.corner.y))},window.Widget.prototype.rawSetHeight=function(height){return this.breakNumberOfRawMovesAndResizesCaches(),this.rawSetExtent(new Point(this.width(),height||0))},window.Widget.prototype.setHeight=function(height){var newExtent,newHeight;if(window.recalculatingLayouts,this.layoutSpec!==LayoutSpec.ATTACHEDAS_FREEFLOATING);else if(newHeight=Math.max(0,height),newExtent=new Point(this.width(),newHeight),!this.extent().eq(newExtent))return this.desiredExtent=newExtent,this.invalidateLayout()},window.Widget.prototype.silentRawSetHeight=function(height){var h;return this.breakNumberOfRawMovesAndResizesCaches(),h=Math.max(Math.round(height||0),0),this.bounds=new Rectangle(this.bounds.origin,new Point(this.bounds.corner.x,this.bounds.origin.y+h))},window.Widget.prototype.setColor=function(aColorOrAMorphGivingAColor,morphGivingColor,connectionsCalculationToken,superCall){var aColor,ref;if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken){if(this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,aColor=null!=(null!=morphGivingColor?morphGivingColor.getColor:void 0)?morphGivingColor.getColor():aColorOrAMorphGivingAColor){if(null!=(null!=(ref=this.color)?ref.eq:void 0)&&this.color.eq(aColor))return;this.color=aColor,this.changed()}return aColor}},window.Widget.prototype.setBackgroundColor=function(aColorOrAMorphGivingAColor,morphGivingColor,connectionsCalculationToken,superCall){var aColor,ref;if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken){if(this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,aColor=null!=(null!=morphGivingColor?morphGivingColor.getColor:void 0)?morphGivingColor.getColor():aColorOrAMorphGivingAColor){if(null!=(null!=(ref=this.backgroundColor)?ref.eq:void 0)&&this.backgroundColor.eq(aColor))return;this.backgroundColor=aColor,this.changed()}return aColor}},window.Widget.prototype.drawCachedTexture=function(){var bg,cols,context,i,j,lines,ref,ref1,x,y;for(bg=this.cachedTexture,cols=Math.floor(this.backBuffer.width/bg.width),lines=Math.floor(this.backBuffer.height/bg.height),context=this.backBuffer.getContext("2d"),y=i=0,ref=lines;0<=ref?i<=ref:i>=ref;y=0<=ref?++i:--i)for(x=j=0,ref1=cols;0<=ref1?j<=ref1:j>=ref1;x=0<=ref1?++j:--j)context.drawImage(bg,Math.round(x*bg.width),Math.round(y*bg.height));return this.changed()},window.Widget.prototype.boundsContainPoint=function(aPoint){return this.bounds.containsPoint(aPoint)},window.Widget.prototype.areBoundsIntersecting=function(aMorph){return this.bounds.isIntersecting(aMorph.bounds)},window.Widget.prototype.calculateKeyValues=function(aContext,clippingRectangle){var al,area,at,delta,h,sl,src,st,w;return(area=clippingRectangle.intersect(this.bounds).round()).isNotEmpty()&&(delta=this.position().neg(),sl=(src=area.translateBy(delta).round()).left()*pixelRatio,st=src.top()*pixelRatio,al=area.left()*pixelRatio,at=area.top()*pixelRatio,w=Math.min(src.width()*pixelRatio,this.width()*pixelRatio-sl),h=Math.min(src.height()*pixelRatio,this.height()*pixelRatio-st)),[area,sl,st,al,at,w,h]},window.Widget.prototype.turnOnHighlight=function(){if(!this.highlighted)return this.highlighted=!0,world.morphsToBeHighlighted.push(this),this.changed()},window.Widget.prototype.turnOffHighlight=function(){if(this.highlighted)return this.highlighted=!1,world.morphsToBeHighlighted.remove(this),this.changed()},window.Widget.prototype.paintRectangle=function(aContext,al,at,w,h,color,transparency=nil,pushAndPopContext=!1,appliedShadow){if(null!=color)return pushAndPopContext&&aContext.save(),aContext.fillStyle=color.toString(),null!=transparency&&(aContext.globalAlpha=(null!=appliedShadow?appliedShadow.alpha:1)*transparency),aContext.fillRect(Math.round(al),Math.round(at),Math.round(w),Math.round(h)),pushAndPopContext?aContext.restore():void 0},window.Widget.prototype.preliminaryCheckNothingToDraw=function(clippingRectangle,aContext){return!this.isVisible||(!!clippingRectangle.isEmpty()||(!(aContext!==world.worldCanvasContext||!this.isOrphan())||(aContext===world.worldCanvasContext&&!this.visibleBasedOnIsVisibleProperty()||!(aContext!==world.worldCanvasContext||!this.isCollapsed()))))},window.Widget.prototype.recordDrawnAreaForNextBrokenRects=function(){if(this.childrenBoundsUpdatedAt<WorldMorph.frameCount)return this.childrenBoundsUpdatedAt=WorldMorph.frameCount,this.clippedBoundsWhenLastPainted=this.clippedThroughBounds(),this.fullClippedBoundsWhenLastPainted=this.fullClippedBounds()},window.Widget.prototype.fullPaintIntoAreaOrBlitFromBackBuffer=function(aContext,clippingRectangle,appliedShadow){if(world.paintingWidget=this,null==appliedShadow&&null!=this.shadowInfo&&this.fullPaintIntoAreaOrBlitFromBackBufferJustShadow(aContext,clippingRectangle,this.shadowInfo),!this.preliminaryCheckNothingToDraw(clippingRectangle,aContext))return aContext===world.worldCanvasContext&&this.recordDrawnAreaForNextBrokenRects(),this.fullPaintIntoAreaOrBlitFromBackBufferContentPotentiallyAsShadow(aContext,clippingRectangle,appliedShadow)},window.Widget.prototype.fullPaintIntoAreaOrBlitFromBackBufferJustShadow=function(aContext,clippingRectangle,appliedShadow){if(clippingRectangle=clippingRectangle.translateBy(-appliedShadow.offset.x,-appliedShadow.offset.y),!this.preliminaryCheckNothingToDraw(clippingRectangle,aContext))return aContext.save(),aContext.translate(appliedShadow.offset.x*pixelRatio,appliedShadow.offset.y*pixelRatio),this.fullPaintIntoAreaOrBlitFromBackBufferContentPotentiallyAsShadow(aContext,clippingRectangle,appliedShadow),aContext.restore()},window.Widget.prototype.fullPaintIntoAreaOrBlitFromBackBufferContentPotentiallyAsShadow=function(aContext,clippingRectangle,appliedShadow){return this.paintIntoAreaOrBlitFromBackBuffer(aContext,clippingRectangle,appliedShadow),this.children.forEach(function(child){return child.fullPaintIntoAreaOrBlitFromBackBuffer(aContext,clippingRectangle,appliedShadow)})},window.Widget.prototype.silentHide=function(){if(this.isVisible)return this.isVisible=!1,WorldMorph.numberOfVisibilityFlagsChanges++,this.invalidateFullBoundsCache(this),this.invalidateFullClippedBoundsCache(this)},window.Widget.prototype.hide=function(){var firstParentOwningMyShadow;if(this.isVisible)return this.silentHide(),null!=(firstParentOwningMyShadow=this.firstParentOwningMyShadow())?firstParentOwningMyShadow.fullChanged():this.fullChanged()},window.Widget.prototype.show=function(){var firstParentOwningMyShadow;if(!this.isVisible&&!0!==this.visibleBasedOnIsVisibleProperty())return this.isVisible=!0,WorldMorph.numberOfVisibilityFlagsChanges++,this.invalidateFullBoundsCache(this),this.invalidateFullClippedBoundsCache(this),null!=(firstParentOwningMyShadow=this.firstParentOwningMyShadow())?firstParentOwningMyShadow.fullChanged():this.fullChanged()},window.Widget.prototype.toggleVisibility=function(){return this.isVisible=!this.isVisible,WorldMorph.numberOfVisibilityFlagsChanges++,this.invalidateFullBoundsCache(this),this.invalidateFullClippedBoundsCache(this),this.fullChanged()},window.Widget.prototype.collapse=function(){var ref,ref1;if(!this.collapsed)return null!=(ref=this.parent)&&"function"==typeof ref.childBeingCollapsed&&ref.childBeingCollapsed(this),this.collapsed=!0,WorldMorph.numberOfCollapseFlagsChanges++,this.invalidateFullBoundsCache(this),this.invalidateFullClippedBoundsCache(this),this.invalidateLayout(),this.fullChanged(),null!=(ref1=this.parent)&&"function"==typeof ref1.childCollapsed?ref1.childCollapsed(this):void 0},window.Widget.prototype.unCollapse=function(){var ref,ref1;if(this.collapsed&&this.isCollapsed())return null!=(ref=this.parent)&&"function"==typeof ref.childBeingUnCollapsed&&ref.childBeingUnCollapsed(this),this.collapsed=!1,WorldMorph.numberOfCollapseFlagsChanges++,this.invalidateFullBoundsCache(this),this.invalidateFullClippedBoundsCache(this),this.invalidateLayout(),this.fullChanged(),null!=(ref1=this.parent)&&"function"==typeof ref1.childUnCollapsed?ref1.childUnCollapsed(this):void 0},window.Widget.prototype.isCollapsed=function(){return!!this.collapsed||null!=this.parent&&this.parent.isCollapsed()},window.Widget.prototype.removeFromTree=function(){var ref;return null!=(ref=this.parent)&&ref.invalidateLayout(),this.breakNumberOfRawMovesAndResizesCaches(),WorldMorph.numberOfAddsAndRemoves++,this.parent.removeChild(this),this.fullChanged()},window.Widget.prototype.colloquialName=function(){return"generic widget"},window.Widget.prototype.representativeIcon=function(){return new WidgetIconWdgt},window.Widget.prototype.createPointerMorph=function(){var morphToAdd,myPosition;return myPosition=this.positionAmongSiblings(),morphToAdd=new PointerMorph(this),this.parent.add(morphToAdd,myPosition),morphToAdd.fullMoveTo(this.position()),morphToAdd.setExtent(new Point(150,20)),morphToAdd.fullChanged(),this.removeFromTree()},window.Widget.prototype.createReference=function(referenceName,placeToDropItIn=world){var eachChild,i,len,morphToAdd,ref;for(null!=referenceName&&"string"!=typeof referenceName&&(referenceName=nil,placeToDropItIn=world),i=0,len=(ref=placeToDropItIn.children).length;i<len;i++)if((eachChild=ref[i])instanceof IconicDesktopSystemShortcutWdgt&&eachChild.target===this)return;return morphToAdd=new IconicDesktopSystemDocumentShortcutWdgt(this,referenceName),placeToDropItIn.add(morphToAdd),morphToAdd.setExtent(new Point(75,75)),morphToAdd.fullChanged(),this.bringToForeground()},window.Widget.prototype.createReferenceAndClose=function(referenceName,placeToDropItIn=world){return this.createReference(referenceName,placeToDropItIn),this.close()},window.Widget.prototype.fullImage=function(bounds,noShadow=!1,forceShadow=!1){var ctx,img,originalShadow,shadowHadBeenReplacedOrAdded;return shadowHadBeenReplacedOrAdded=!1,noShadow?(originalShadow=this.shadowInfo,this.shadowInfo=ShadowInfo.noShadow(),shadowHadBeenReplacedOrAdded=!0):forceShadow&&!this.hasShadow()&&(originalShadow=nil,this.shadowInfo=new ShadowInfo(new Point(4,4),.2),shadowHadBeenReplacedOrAdded=!0),null==bounds&&(bounds=this.fullBounds(),!noShadow&&this.hasShadow()&&(bounds=bounds.growBy(this.shadowInfo.offset))),img=newCanvas(bounds.extent().scaleBy(pixelRatio)),(ctx=img.getContext("2d")).translate(-bounds.origin.x*pixelRatio,-bounds.origin.y*pixelRatio),this.fullPaintIntoAreaOrBlitFromBackBuffer(ctx,bounds),shadowHadBeenReplacedOrAdded&&(this.shadowInfo=originalShadow),img},window.Widget.prototype.fullImageNoShadow=function(){var boundsWithNoShadow;return boundsWithNoShadow=this.fullBounds(),this.fullImage(boundsWithNoShadow,!0)},window.Widget.prototype.fullImageData=function(){return this.fullImage().toDataURL("image/png")},window.Widget.prototype.fullImageAsItAppearsOnScreen=function(){var destCanvas,fullExtentOfMorph;return fullExtentOfMorph=this.fullBounds(),destCanvas=newCanvas(fullExtentOfMorph.extent().scaleBy(pixelRatio)),destCanvas.getContext("2d").drawImage(world.worldCanvas,fullExtentOfMorph.topLeft().x*pixelRatio,fullExtentOfMorph.topLeft().y*pixelRatio,fullExtentOfMorph.width()*pixelRatio,fullExtentOfMorph.height()*pixelRatio,0,0,fullExtentOfMorph.width()*pixelRatio,fullExtentOfMorph.height()*pixelRatio),destCanvas.toDataURL("image/png")},window.Widget.prototype.fullImageHashCode=function(){return hashCode(this.fullImageData())},window.Widget.prototype.addShadow=function(offset=new Point(4,4),alpha=.2){return this.silentAddShadow(offset,alpha),this.fullChanged()},window.Widget.prototype.silentAddShadow=function(offset,alpha){return this.shadowInfo=new ShadowInfo(offset,alpha)},window.Widget.prototype.hasShadow=function(){return null!=this.shadowInfo},window.Widget.prototype.removeShadow=function(){if(this.hasShadow())return this.shadowInfo=nil,this.fullChanged()},window.Widget.prototype.changed=function(){if(trackChanges[trackChanges.length-1]){if(this.isBeingFloatDragged())return void world.hand.fullChanged();this.geometryOrPositionPossiblyChanged||this.fullGeometryOrPositionPossiblyChanged||(window.morphsThatMaybeChangedGeometryOrPosition.push(this),this.geometryOrPositionPossiblyChanged=!0)}if(this.parent)return this.parent.childChanged(this)},window.Widget.prototype.hasMaybeChangedGeometryOrPosition=function(){return!(!this.fullGeometryOrPositionPossiblyChanged&&!this.geometryOrPositionPossiblyChanged)||null!=this.parent&&this.parent.hasMaybeChangedGeometryOrPosition()},window.Widget.prototype.fullChanged=function(){if(trackChanges[trackChanges.length-1]&&!this.fullGeometryOrPositionPossiblyChanged)return window.morphsThatMaybeChangedFullGeometryOrPosition.push(this),this.fullGeometryOrPositionPossiblyChanged=!0},window.Widget.prototype.childChanged=function(){if(this.parent)return this.parent.childChanged(this)},window.Widget.prototype.iHaveBeenAddedTo=function(whereTo,beingDropped){return this.reLayout()},window.Widget.prototype.addAsSiblingAfterMe=function(aMorph,position=nil,layoutSpec=LayoutSpec.ATTACHEDAS_FREEFLOATING){var myPosition;return myPosition=this.positionAmongSiblings(),this.parent.add(aMorph,myPosition+1,layoutSpec)},window.Widget.prototype.addAsSiblingBeforeMe=function(aMorph,position=nil,layoutSpec=LayoutSpec.ATTACHEDAS_FREEFLOATING){var myPosition;return myPosition=this.positionAmongSiblings(),this.parent.add(aMorph,myPosition,layoutSpec)},window.Widget.prototype.add=function(aMorph,position=nil,layoutSpec=LayoutSpec.ATTACHEDAS_FREEFLOATING,beingDropped){if(aMorph instanceof HighlighterMorph||aMorph instanceof CaretMorph||(this===world?(aMorph.addShadow(),aMorph instanceof ToolTipWdgt||ToolTipWdgt.cancelAllScheduledToolTips()):aMorph.removeShadow()),this.addRaw(...arguments),this===world)return aMorph.rememberFractionalPositionInHoldingPanel()},window.Widget.prototype.addRaw=function(aMorph,position=nil,layoutSpec=LayoutSpec.ATTACHEDAS_FREEFLOATING,beingDropped){var firstParentOwningMyShadow,previousParent,ref;return aMorph.isAncestorOf(this)?nil:(previousParent=aMorph.parent,null!=(ref=aMorph.parent)&&ref.invalidateLayout(),null!=(firstParentOwningMyShadow=aMorph.firstParentOwningMyShadow())?firstParentOwningMyShadow.fullChanged():aMorph.fullChanged(),aMorph.setLayoutSpec(layoutSpec),layoutSpec!==LayoutSpec.ATTACHEDAS_FREEFLOATING&&this.invalidateLayout(),aMorph.fullChanged(),this.silentAdd(aMorph,!0,position),aMorph.iHaveBeenAddedTo(this,beingDropped),null!=(null!=previousParent?previousParent.childRemoved:void 0)&&previousParent.childRemoved(this),null!=this.childAdded&&this.childAdded(aMorph),aMorph)},window.Widget.prototype.addInset=function(aMorph){return null!=aMorph.parent&&aMorph.changed(),this.insetMorph=aMorph,this.children.length,this.add(aMorph,0),aMorph.fullRawMoveTo(this.insetPosition()),aMorph.rawSetExtent(this.insetSpaceExtent(),this)},window.Widget.prototype.sourceChanged=function(){return"function"==typeof this.reLayout&&this.reLayout(),"function"==typeof this.changed?this.changed():void 0},window.Widget.prototype.reLayout=function(){},window.Widget.prototype.calculateAndUpdateExtent=function(){},window.Widget.prototype.silentAdd=function(aMorph,avoidExtentCalculation,position=nil){var owner;if(null!=(owner=aMorph.parent)&&owner.removeChild(aMorph),null!=aMorph.isPopUpMarkedForClosure&&(aMorph.isPopUpMarkedForClosure=!1),this.addChild(aMorph,position),!avoidExtentCalculation)return aMorph.calculateAndUpdateExtent()},window.Widget.prototype.morphAt=function(aPoint){var morphs,result;return morphs=this.allChildrenTopToBottom(),result=nil,morphs.forEach(function(m){if(m.fullBounds().containsPoint(aPoint)&&null==result)return result=m}),result},window.Widget.prototype.duplicateMenuAction=function(){var aFullCopy;return null!=(aFullCopy=this.fullCopy())?aFullCopy.pickUp():void 0},window.Widget.prototype.alignCopiedMorphToBrokenInfoDataStructures=function(copiedMorph){if(-1!==window.morphsThatMaybeChangedGeometryOrPosition.indexOf(this)&&-1===window.morphsThatMaybeChangedGeometryOrPosition.indexOf(copiedMorph)&&window.morphsThatMaybeChangedGeometryOrPosition.push(copiedMorph),-1!==window.morphsThatMaybeChangedFullGeometryOrPosition.indexOf(this)&&-1===window.morphsThatMaybeChangedFullGeometryOrPosition.indexOf(copiedMorph))return window.morphsThatMaybeChangedFullGeometryOrPosition.push(copiedMorph)},window.Widget.prototype.alignCopiedMorphToSteppingStructures=function(copiedMorph){if(-1!==world.steppingMorphs.indexOf(this))return world.addSteppingMorph(copiedMorph)},window.Widget.prototype.fullCopy=function(){var allMorphsInStructure;return this.destroyed?(this.inform("The item you are\ntrying to copy\nis dead!"),null):(allMorphsInStructure=this.allChildrenBottomToTop(),this.deepCopy(!1,[],[],allMorphsInStructure))},window.Widget.prototype.serialize=function(){var allMorphsInStructure,arr1,arr2,element,i,len,totalJSON;for(allMorphsInStructure=this.allChildrenBottomToTop(),arr1=[],arr2=[],this.deepCopy(!0,arr1,arr2,allMorphsInStructure),totalJSON="",i=0,len=arr2.length;i<len;i++){element=arr2[i];try{console.log(JSON.stringify(element)+"\n// --------------------------- \n")}catch(error){error}totalJSON=totalJSON+JSON.stringify(element)+"\n// --------------------------- \n"}return totalJSON},window.Widget.prototype.deserialize=function(serializationString){var clonedMorphs,createdObjects,ctx,eachArrayElement,eachClonedMorph,eachObject,eachSerialization,i,image,j,k,l,len,len1,m,n,objectsSerializations,property,ref,ref1,referenceNumber,referenceNumberAsString,theClone;for((objectsSerializations=serializationString.split(/^\/\/.*$/gm)).pop(),createdObjects=[],k=0,len=objectsSerializations.length;k<len;k++)eachSerialization=objectsSerializations[k],createdObjects.push(JSON.parse(eachSerialization));for(clonedMorphs=[],l=0,len1=createdObjects.length;l<len1;l++)"Canvas"===(eachObject=createdObjects[l]).className?(ctx=(theClone=newCanvas(new Point(eachObject.width,eachObject.height))).getContext("2d"),(image=new Image).src=eachObject.data,ctx.drawImage(image,0,0)):eachObject.constructor!==Array?null!=(theClone=Object.create(window[eachObject.className].prototype)).assignUniqueID&&theClone.assignUniqueID():theClone=[],clonedMorphs.push(theClone);for(i=m=0,ref=clonedMorphs.length;0<=ref?m<ref:m>ref;i=0<=ref?++m:--m)if((eachClonedMorph=clonedMorphs[i]).constructor===HTMLCanvasElement);else if(eachClonedMorph.constructor!==Array)for(property in createdObjects[i])createdObjects[i].hasOwnProperty(property)&&(console.log("looking at property: "+property),clonedMorphs[i][property]=createdObjects[i][property],"string"==typeof clonedMorphs[i][property]&&0===clonedMorphs[i][property].indexOf("$")&&(referenceNumberAsString=clonedMorphs[i][property].substring(1),referenceNumber=parseInt(referenceNumberAsString),clonedMorphs[i][property]=clonedMorphs[referenceNumber]));else for(j=n=0,ref1=createdObjects[i].length;0<=ref1?n<ref1:n>ref1;j=0<=ref1?++n:--n)eachArrayElement=createdObjects[i][j],clonedMorphs[i][j]=createdObjects[i][j],"string"==typeof eachArrayElement&&0===eachArrayElement.indexOf("$")&&(referenceNumberAsString=eachArrayElement.substring(1),referenceNumber=parseInt(referenceNumberAsString),clonedMorphs[i][j]=clonedMorphs[referenceNumber]);return clonedMorphs[0]},window.Widget.prototype.injectProperty=function(propertyName,txt){return this.evaluateString("@"+propertyName+" = "+txt),isFunction(this[propertyName])&&(this[propertyName+"_source"]=txt),this.sourceChanged()},window.Widget.prototype.injectProperties=function(codeBlurb){var m,regex,results;for(codeBlurb=codeBlurb.replace(/^[ \t]*$/gm,"\n"),codeBlurb+="\n# end injected code",regex=/^([a-zA-Z_$][0-9a-zA-Z_$]*)[ \t]*=[ \t]*([^]*?)(?=^[\w#$])/gm,results=[];null!=(m=regex.exec(codeBlurb));)m.index===regex.lastIndex&&regex.lastIndex++,results.push(this.injectProperty(m[1],m[2]));return results},window.Widget.prototype.grabsToParentWhenDragged=function(){return null!=this.parent&&(this.parent instanceof WorldMorph?this.isLockingToPanels:this.amIDirectlyInsideScrollPanelWdgt()?!(!this.parent.parent.canScrollByDraggingForeground||!this.parent.parent.anyScrollBarShowing())||this.isLockingToPanels:!(this.parent instanceof PanelWdgt)||this.isLockingToPanels)},window.Widget.prototype.rejectDrags=function(){return this.defaultRejectDrags},window.Widget.prototype.findFirstLooseMorph=function(){var scanningMorphs;if(this.rejectDrags())return nil;if(null!=this.nonFloatDragging)return this;if(!this.grabsToParentWhenDragged())return this;for(scanningMorphs=this;null!=scanningMorphs.parent;){if((scanningMorphs=scanningMorphs.parent).rejectDrags())return nil;if(null!=scanningMorphs.nonFloatDragging)return scanningMorphs;if(!scanningMorphs.grabsToParentWhenDragged())return scanningMorphs}return nil},window.Widget.prototype.findRootForGrab=function(){return this.findFirstLooseMorph()},window.Widget.prototype.amIDirectlyInsideScrollPanelWdgt=function(){return null!=this.parent&&(this.parent instanceof PanelWdgt||this.parent instanceof SimpleVerticalStackPanelWdgt)&&null!=this.parent.parent&&this.parent.parent instanceof ScrollPanelWdgt&&!(this.parent.parent instanceof ListMorph)},window.Widget.prototype.amIPanelOfScrollPanelWdgt=function(){return null!=this.parent&&this.parent instanceof ScrollPanelWdgt&&!(this.parent instanceof ListMorph)},window.Widget.prototype.amIDirectlyInsideNonTextWrappingScrollPanelWdgt=function(){return!(!this.amIDirectlyInsideScrollPanelWdgt()||this.parent.parent.isTextLineWrapping)},window.Widget.prototype.firstParentOwningMyShadow=function(){var scanningMorphs;if(this.hasShadow())return this;for(scanningMorphs=this;null!=scanningMorphs.parent;){if((scanningMorphs=scanningMorphs.parent).clipsAtRectangularBounds)return nil;if(scanningMorphs.hasShadow())return scanningMorphs}return nil},window.Widget.prototype.detachesWhenDragged=function(){return!0},window.Widget.prototype.isBeingFloatDragged=function(){return null!=world.hand&&(null==world.hand.nonFloatDraggedMorph&&this.root()instanceof HandMorph)},window.Widget.prototype.firstParentThatIsAPopUp=function(){return null==this.parent?this:this.parent.firstParentThatIsAPopUp()},window.Widget.prototype.anyParentPopUpMarkedForClosure=function(){return!!this.isPopUpMarkedForClosure||null!=this.parent&&this.parent.anyParentPopUpMarkedForClosure()},window.Widget.prototype.rootForFocus=function(){return null==this.parent||this.parent instanceof WorldMorph?this:this.parent.rootForFocus()},window.Widget.prototype.moveInFrontOfSiblings=function(){return this.moveAsLastChild(),this.fullChanged()},window.Widget.prototype.bringToForeground=function(){var ref,ref1;return null!=(ref=this.rootForFocus())&&ref.moveAsLastChild(),null!=(ref1=this.rootForFocus())?ref1.fullChanged():void 0},window.Widget.prototype.propagateKillPopUps=function(){if(null!=this.parent)return this.parent.propagateKillPopUps()},window.Widget.prototype.mouseDownLeft=function(pos){return this.bringToForeground(),this.escalateEvent("mouseDownLeft",pos)},window.Widget.prototype.mouseClickLeft=function(pos){return this.escalateEvent("mouseClickLeft",pos)},window.Widget.prototype.onClickOutsideMeOrAnyOfMyChildren=function(functionName,arg1,arg2,arg3){return null==functionName?world.morphsDetectingClickOutsideMeOrAnyOfMeChildren.remove(this):(this.clickOutsideMeOrAnyOfMeChildrenCallback=[functionName,arg1,arg2,arg3],indexOf.call(world.morphsDetectingClickOutsideMeOrAnyOfMeChildren,this)<0?world.morphsDetectingClickOutsideMeOrAnyOfMeChildren.push(this):void 0)},window.Widget.prototype.justDropped=function(whereIn){return this.rememberFractionalSituationInHoldingPanel()},window.Widget.prototype.wantsDropOf=function(aMorph){return this._acceptsDrops},window.Widget.prototype.enableDrops=function(){return this._acceptsDrops=!0},window.Widget.prototype.disableDrops=function(){return this._acceptsDrops=!1},window.Widget.prototype.pickUp=function(){var oldParent;return null!=(oldParent=this.parent)&&"function"==typeof oldParent.childBeingPickedUp&&oldParent.childBeingPickedUp(this),world.hand.grab(this),null!=this.desiredExtent?this.fullRawMoveTo(world.hand.position().subtract(this.desiredExtent.floorDivideBy(2))):this.fullRawMoveTo(world.hand.position().subtract(this.fullBounds().extent().floorDivideBy(2))),null!=oldParent&&"function"==typeof oldParent.childPickedUp?oldParent.childPickedUp(this):void 0},window.Widget.prototype.grabbedWidgetSwitcheroo=function(){return this},window.Widget.prototype.isPickedUp=function(){return null!=this.parentThatIsA(HandMorph)},window.Widget.prototype.situation=function(){return this.parent?{origin:this.parent,position:this.position().subtract(this.parent.position())}:nil},window.Widget.prototype.slideBackTo=function(situation,steps=5){var oldFps,oldStep,pos,stepCount,xStep,yStep;return pos=situation.origin.position().add(situation.position),xStep=-(this.left()-pos.x)/steps,yStep=-(this.top()-pos.y)/steps,stepCount=0,oldStep=this.step,oldFps=this.fps,this.fps=0,world.addSteppingMorph(this),this.step=(()=>{if(this.silentFullRawMoveBy(new Point(xStep,yStep)),this.fullChanged(),(stepCount+=1)===steps&&(situation.origin.add(this),situation.origin.reactToDropOf&&situation.origin.reactToDropOf(this),this.step=oldStep,this.fps=oldFps,this.step===noOperation||null==this.step))return world.removeSteppingMorph(this)})},window.Widget.prototype.showResizeAndMoveHandlesAndLayoutAdjusters=function(){return this.layoutSpec===LayoutSpec.ATTACHEDAS_FREEFLOATING?(world.temporaryHandlesAndLayoutAdjusters.push(new HandleMorph(this,"resizeHorizontalHandle")),world.temporaryHandlesAndLayoutAdjusters.push(new HandleMorph(this,"resizeVerticalHandle")),world.temporaryHandlesAndLayoutAdjusters.push(new HandleMorph(this,"moveHandle")),world.temporaryHandlesAndLayoutAdjusters.push(new HandleMorph(this,"resizeBothDimensionsHandle"))):(null==this.lastSiblingBeforeMeSuchThat(function(m){return m.layoutSpec===LayoutSpec.ATTACHEDAS_STACK_HORIZONTAL_VERTICALALIGNMENTS_UNDEFINED})||this.siblingBeforeMeIsA(StackElementsSizeAdjustingMorph)||world.temporaryHandlesAndLayoutAdjusters.push(this.addAsSiblingBeforeMe(new StackElementsSizeAdjustingMorph,nil,LayoutSpec.ATTACHEDAS_STACK_HORIZONTAL_VERTICALALIGNMENTS_UNDEFINED)),null==this.firstSiblingAfterMeSuchThat(function(m){return m.layoutSpec===LayoutSpec.ATTACHEDAS_STACK_HORIZONTAL_VERTICALALIGNMENTS_UNDEFINED})||this.siblingAfterMeIsA(StackElementsSizeAdjustingMorph)||world.temporaryHandlesAndLayoutAdjusters.push(this.addAsSiblingAfterMe(new StackElementsSizeAdjustingMorph,nil,LayoutSpec.ATTACHEDAS_STACK_HORIZONTAL_VERTICALALIGNMENTS_UNDEFINED)),null!=this.parent?this.parent.showResizeAndMoveHandlesAndLayoutAdjusters():void 0)},window.Widget.prototype.showMoveHandle=function(){return world.temporaryHandlesAndLayoutAdjusters.push(new HandleMorph(this,"moveHandle"))},window.Widget.prototype.inform=function(msg){var m,text;return text=msg,msg?msg.toString&&(text=msg.toString()):text="NULL",(m=new MenuMorph(this,!1,this,!0,!0,text)).addMenuItem("Ok"),m.popUpCenteredAtHand(world)},window.Widget.prototype.prompt=function(msg,target,callback,defaultContents,width,floorNum,ceilingNum,isRounded){var prompt;return(prompt=new PromptMorph(this,msg,target,callback,defaultContents,width,floorNum,ceilingNum,isRounded)).popUpAtHand(),prompt.tempPromptEntryField.text.edit()},window.Widget.prototype.textPrompt=function(msg,target,callback,defaultContents,width,floorNum,ceilingNum,isRounded){var prompt,wm;return prompt=new CodePromptMorph(msg,target,callback,defaultContents,width,floorNum,ceilingNum,isRounded),(wm=new WindowWdgt(nil,nil,prompt)).setExtent(new Point(460,400)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.fullRawMoveWithin(world),world.add(wm),wm.changed()},window.Widget.prototype.pickColor=function(msg,callback,defaultContents){var colorPicker,menu;return colorPicker=new ColorPickerMorph(defaultContents),(menu=new MenuMorph(this,!1,this,!0,!0,msg||"",colorPicker)).silentAdd(colorPicker),menu.addLine(2),menu.addMenuItem("Ok",!0,this,callback),menu.addMenuItem("Close",!0,menu,"close"),menu.popUpAtHand()},window.Widget.prototype.inspect=function(anotherObject){return this.spawnInspector(this)},window.Widget.prototype.inspect2=function(anotherObject){return this.spawnInspector2(this)},window.Widget.prototype.spawnInspector=function(inspectee){var inspector;return(inspector=new InspectorMorph(inspectee)).fullRawMoveTo(world.hand.position()),inspector.fullRawMoveWithin(world),world.add(inspector),inspector.changed()},window.Widget.prototype.spawnInspector2=function(inspectee){var inspector,wm;return inspector=new InspectorMorph2(inspectee),(wm=new WindowWdgt(nil,nil,inspector)).setExtent(new Point(560,410)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.fullRawMoveWithin(world),world.add(wm),wm.changed()},window.Widget.prototype.createConsole=function(){var inspector,wm;return inspector=new ConsoleWdgt(this),(wm=new WindowWdgt(nil,nil,inspector)).setExtent(new Point(285,290)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.fullRawMoveWithin(world),world.add(wm),wm.changed()},window.Widget.prototype.spawnNextTo=function(morphToBeNextTo,whereToAddIt){return null==whereToAddIt&&(whereToAddIt=morphToBeNextTo.parent),whereToAddIt.add(this),this.fullRawMoveTo(morphToBeNextTo.center()),this.fullRawMoveWithin(whereToAddIt)},window.Widget.prototype.buildContextMenu=function(){var anyParentsTakingOverMyMenu,hierarchyMenuMorphs,morphToAskMenuTo;return morphToAskMenuTo=this,null!=(anyParentsTakingOverMyMenu=this.allParentsTopToBottomSuchThat(function(m){return m instanceof ScrollPanelWdgt&&m.takesOverAndCoalescesChildrensMenus}))&&anyParentsTakingOverMyMenu.length>0&&(morphToAskMenuTo=anyParentsTakingOverMyMenu[0]),morphToAskMenuTo.overridingContextMenu?morphToAskMenuTo.overridingContextMenu():world.isDevMode?(hierarchyMenuMorphs=morphToAskMenuTo.getHierarchyMenuMorphs(),morphToAskMenuTo.parent===world?morphToAskMenuTo.buildMorphContextMenu():hierarchyMenuMorphs.length<2?hierarchyMenuMorphs[0].buildMorphContextMenu():morphToAskMenuTo.buildHierarchyMenu(hierarchyMenuMorphs)):void 0},window.Widget.prototype.getHierarchyMenuMorphs=function(){var hierarchyMenuMorphs;return hierarchyMenuMorphs=[],this.allParentsTopToBottom().forEach(function(each){if(each.buildMorphContextMenu&&each!==world&&!each.anyParentPopUpMarkedForClosure()&&!(each instanceof SimpleVerticalStackPanelWdgt&&each.parent instanceof SimpleVerticalStackScrollPanelWdgt||each instanceof PanelWdgt&&each.parent instanceof ScrollPanelWdgt||each instanceof ScrollPanelWdgt&&each.parent instanceof FolderWindowWdgt))return hierarchyMenuMorphs.push(each)}),hierarchyMenuMorphs},window.Widget.prototype.buildHierarchyMenu=function(morphsHierarchy){var menu;return null==morphsHierarchy&&(morphsHierarchy=this.getHierarchyMenuMorphs()),menu=new MenuMorph(this,!1,this,!0,!0,nil),morphsHierarchy.forEach(function(each){var textLabelForMorph;return textLabelForMorph=each.toString().slice(0,50),textLabelForMorph=textLabelForMorph.replace("Wdgt",""),menu.addMenuItem(textLabelForMorph+" ➜",!1,each,"popupDeveloperMenu",nil,nil,nil,nil,nil,nil,nil,!0)}),menu},window.Widget.prototype.popupDeveloperMenu=function(morphOpeningThePopUp){return this.buildMorphContextMenu(morphOpeningThePopUp).popUpAtHand()},window.Widget.prototype.popUpColorSetter=function(){return this.pickColor("color:","setColor",new Color(0,0,0))},window.Widget.prototype.transparencyPopout=function(menuItem){return this.prompt(menuItem.parent.title+"\nalpha\nvalue:",this,"setAlphaScaled",(100*this.alpha).toString(),nil,1,100,!0)},window.Widget.prototype.createNewStringMorph2WithBackground=function(){var newMorph;return newMorph=new StringMorph2("Hello World! ⎲ƒ⎳⎷ ⎸⎹ aaa",nil,nil,nil,nil,nil,nil,nil,new Color(230,230,130),1),newMorph.isEditable=!0,world.create(newMorph)},window.Widget.prototype.createNewStringMorph2WithoutBackground=function(){var newMorph;return newMorph=new StringMorph2("Hello World! ⎲ƒ⎳⎷ ⎸⎹ aaa"),newMorph.isEditable=!0,world.create(newMorph)},window.Widget.prototype.createNewTextMorph2WithBackground=function(){var newMorph;return newMorph=new TextMorph2("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer rhoncus pharetra nulla, vel maximus lectus posuere a. Phasellus finibus blandit ex vitae varius. Vestibulum blandit velit elementum, ornare ipsum sollicitudin, blandit nunc. Mauris a sapien nibh. Nulla nec bibendum quam, eu condimentum nisl. Cras consequat efficitur nisi sed ornare. Pellentesque vitae urna vitae libero malesuada pharetra.\n\nPellentesque commodo, nulla mattis vulputate porttitor, elit augue vestibulum est, nec congue ex dui a velit. Nullam lectus leo, lobortis eget erat ac, lobortis dignissim magna. Morbi ac odio in purus blandit dignissim. Maecenas at sagittis odio. Suspendisse tempus mattis erat id euismod. Duis semper mauris nec odio sagittis vulputate. Praesent varius ac erat id fringilla. Suspendisse porta sollicitudin bibendum. Pellentesque imperdiet at eros nec euismod. Etiam ac mattis odio, ac finibus nisi.",nil,nil,nil,nil,nil,new Color(230,230,130),1),newMorph.isEditable=!0,world.create(newMorph)},window.Widget.prototype.createNewWrappingSimplePlainTextWdgtWithBackground=function(){var newMorph;return newMorph=new SimplePlainTextWdgt("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer rhoncus pharetra nulla, vel maximus lectus posuere a. Phasellus finibus blandit ex vitae varius. Vestibulum blandit velit elementum, ornare ipsum sollicitudin, blandit nunc. Mauris a sapien nibh. Nulla nec bibendum quam, eu condimentum nisl. Cras consequat efficitur nisi sed ornare. Pellentesque vitae urna vitae libero malesuada pharetra.\n\nPellentesque commodo, nulla mattis vulputate porttitor, elit augue vestibulum est, nec congue ex dui a velit. Nullam lectus leo, lobortis eget erat ac, lobortis dignissim magna. Morbi ac odio in purus blandit dignissim. Maecenas at sagittis odio. Suspendisse tempus mattis erat id euismod. Duis semper mauris nec odio sagittis vulputate. Praesent varius ac erat id fringilla. Suspendisse porta sollicitudin bibendum. Pellentesque imperdiet at eros nec euismod. Etiam ac mattis odio, ac finibus nisi.",nil,nil,nil,nil,nil,new Color(230,230,130),1),newMorph.isEditable=!0,world.add(newMorph),newMorph.fullRawMoveTo(new Point(25,40)),newMorph.rawSetExtent(new Point(500,300))},window.Widget.prototype.createNewNonWrappingSimplePlainTextWdgtWithBackground=function(){var newMorph;return newMorph=new SimplePlainTextWdgt("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer rhoncus pharetra nulla, vel maximus lectus posuere a. Phasellus finibus blandit ex vitae varius.\n\nPellentesque commodo, nulla mattis vulputate porttitor, elit augue vestibulum est, nec congue ex dui a velit. Nullam lectus leo, lobortis eget erat ac, lobortis dignissim magna.",nil,nil,nil,nil,nil,new Color(230,230,130),1),newMorph.isEditable=!0,newMorph.maxTextWidth=nil,world.add(newMorph),newMorph.fullRawMoveTo(new Point(540,40)),newMorph.rawSetExtent(new Point(500,300))},window.Widget.prototype.createNewWrappingAndNonWrappingSimplePlainTextWdgtWithBackground=function(){return this.createNewWrappingSimplePlainTextWdgtWithBackground(),this.createNewNonWrappingSimplePlainTextWdgtWithBackground()},window.Widget.prototype.createWrappingSimplePlainTextScrollPanelWdgt=function(){var SfA;return SfA=new SimplePlainTextScrollPanelWdgt("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer rhoncus pharetra nulla, vel maximus lectus posuere a. Phasellus finibus blandit ex vitae varius. Vestibulum blandit velit elementum, ornare ipsum sollicitudin, blandit nunc. Mauris a sapien nibh. Nulla nec bibendum quam, eu condimentum nisl. Cras consequat efficitur nisi sed ornare. Pellentesque vitae urna vitae libero malesuada pharetra.\n\nPellentesque commodo, nulla mattis vulputate porttitor, elit augue vestibulum est, nec congue ex dui a velit. Nullam lectus leo, lobortis eget erat ac, lobortis dignissim magna. Morbi ac odio in purus blandit dignissim. Maecenas at sagittis odio. Suspendisse tempus mattis erat id euismod. Duis semper mauris nec odio sagittis vulputate. Praesent varius ac erat id fringilla. Suspendisse porta sollicitudin bibendum. Pellentesque imperdiet at eros nec euismod. Etiam ac mattis odio, ac finibus nisi.",!0,10),world.add(SfA),SfA.fullRawMoveTo(new Point(20,25)),SfA.rawSetExtent(new Point(390,305))},window.Widget.prototype.createNonWrappingSimplePlainTextScrollPanelWdgt=function(){var SfB;return SfB=new SimplePlainTextScrollPanelWdgt("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer rhoncus pharetra nulla, vel maximus \n\nPellentesque commodo, nulla mattis vulputate porttitor, elit augue vestibulum est, nec congue nisi.",!1,10),world.add(SfB),SfB.fullRawMoveTo(new Point(430,25)),SfB.rawSetExtent(new Point(390,305))},window.Widget.prototype.createWrappingAndNonWrappingSimplePlainTextScrollPanelWdgt=function(){return this.createWrappingSimplePlainTextScrollPanelWdgt(),this.createNonWrappingSimplePlainTextScrollPanelWdgt()},window.Widget.prototype.createWrappingSimplePlainTextPanelWdgt=function(){var SfA;return SfA=new SimplePlainTextPanelWdgt("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer rhoncus pharetra nulla, vel maximus lectus posuere a. Phasellus finibus blandit ex vitae varius. Vestibulum blandit velit elementum, ornare ipsum sollicitudin, blandit nunc. Mauris a sapien nibh. Nulla nec bibendum quam, eu condimentum nisl. Cras consequat efficitur nisi sed ornare. Pellentesque vitae urna vitae libero malesuada pharetra.\n\nPellentesque commodo, nulla mattis vulputate porttitor, elit augue vestibulum est, nec congue ex dui a velit. Nullam lectus leo, lobortis eget erat ac, lobortis dignissim magna. Morbi ac odio in purus blandit dignissim. Maecenas at sagittis odio. Suspendisse tempus mattis erat id euismod. Duis semper mauris nec odio sagittis vulputate. Praesent varius ac erat id fringilla. Suspendisse porta sollicitudin bibendum. Pellentesque imperdiet at eros nec euismod. Etiam ac mattis odio, ac finibus nisi.",!0,10),world.add(SfA),SfA.fullRawMoveTo(new Point(20,25)),SfA.rawSetExtent(new Point(390,305))},window.Widget.prototype.createNonWrappingSimplePlainTextPanelWdgt=function(){var SfB;return SfB=new SimplePlainTextPanelWdgt("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer rhoncus pharetra nulla, vel maximus \n\nPellentesque commodo, nulla mattis vulputate porttitor, elit augue vestibulum est, nec congue nisi.",!1,10),world.add(SfB),SfB.fullRawMoveTo(new Point(430,25)),SfB.rawSetExtent(new Point(390,305))},window.Widget.prototype.createWrappingAndNonWrappingSimplePlainTextPanelWdgt=function(){return this.createWrappingSimplePlainTextPanelWdgt(),this.createNonWrappingSimplePlainTextPanelWdgt()},window.Widget.prototype.createNewStringMorph3WithBackground=function(){var newMorph;return newMorph=new StringMorph3("Hello World! ⎲ƒ⎳⎷ ⎸⎹ aaa",nil,nil,nil,nil,nil,nil,nil,new Color(230,230,130),1),newMorph.isEditable=!0,world.create(newMorph)},window.Widget.prototype.createNewTextMorph3WithBackground=function(){var newMorph;return newMorph=new TextMorph3("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer rhoncus pharetra nulla, vel maximus lectus posuere a. Phasellus finibus blandit ex vitae varius. Vestibulum blandit velit elementum, ornare ipsum sollicitudin, blandit nunc. Mauris a sapien nibh. Nulla nec bibendum quam, eu condimentum nisl. Cras consequat efficitur nisi sed ornare. Pellentesque vitae urna vitae libero malesuada pharetra.\n\nPellentesque commodo, nulla mattis vulputate porttitor, elit augue vestibulum est, nec congue ex dui a velit. Nullam lectus leo, lobortis eget erat ac, lobortis dignissim magna. Morbi ac odio in purus blandit dignissim. Maecenas at sagittis odio. Suspendisse tempus mattis erat id euismod. Duis semper mauris nec odio sagittis vulputate. Praesent varius ac erat id fringilla. Suspendisse porta sollicitudin bibendum. Pellentesque imperdiet at eros nec euismod. Etiam ac mattis odio, ac finibus nisi.",nil,nil,nil,nil,nil,new Color(255,255,54),.5),newMorph.isEditable=!0,world.create(newMorph)},window.Widget.prototype.createSimpleVerticalStackPanelWdgt=function(){var svspw;return svspw=new SimpleVerticalStackPanelWdgt,world.add(svspw),svspw.fullRawMoveTo(new Point(35,30)),svspw.rawSetExtent(new Point(370,325))},window.Widget.prototype.createSimpleVerticalStackScrollPanelWdgt=function(){var svsspw;return svsspw=new SimpleVerticalStackScrollPanelWdgt,world.add(svsspw),svsspw.fullRawMoveTo(new Point(430,25)),svsspw.rawSetExtent(new Point(370,325))},window.Widget.prototype.createSimpleVerticalStackPanelWdgtAndScrollPanel=function(){return this.createSimpleVerticalStackPanelWdgt(),this.createSimpleVerticalStackScrollPanelWdgt()},window.Widget.prototype.createSimpleVerticalStackPanelWdgtFreeContentsWidth=function(){var svspw;return svspw=new SimpleVerticalStackPanelWdgt(null,null,null,!1),world.add(svspw),svspw.fullRawMoveTo(new Point(35,30)),svspw.rawSetExtent(new Point(370,325))},window.Widget.prototype.createSimpleVerticalStackScrollPanelWdgtFreeContentsWidth=function(){var svsspw;return svsspw=new SimpleVerticalStackScrollPanelWdgt(!1),world.add(svsspw),svsspw.fullRawMoveTo(new Point(430,25)),svsspw.rawSetExtent(new Point(370,325))},window.Widget.prototype.createSimpleVerticalStackPanelWdgtAndScrollPanelFreeContentsWidth=function(){return this.createSimpleVerticalStackPanelWdgt(),this.createSimpleVerticalStackScrollPanelWdgt()},window.Widget.prototype.createSimpleDocumentScrollPanelWdgt=function(){var sdspw;return sdspw=new SimpleDocumentScrollPanelWdgt,world.add(sdspw),sdspw.fullRawMoveTo(new Point(35,30)),sdspw.rawSetExtent(new Point(370,325))},window.Widget.prototype.showOutputPins=function(a,b,c,d){return world.morphsToBePinouted.push(b)},window.Widget.prototype.removeOutputPins=function(a,b,c,d){return world.morphsToBePinouted.remove(b)},window.Widget.prototype.testMenu=function(morphOpeningThePopUp,targetMorph){var menu;return(menu=new MenuMorph(morphOpeningThePopUp,!1,targetMorph,!0,!0,nil)).addMenuItem("serialise morph to memory",!0,targetMorph,"serialiseToMemory"),menu.addMenuItem("deserialize from memory and attach to world",!0,targetMorph,"deserialiseFromMemoryAndAttachToWorld"),menu.addMenuItem("deserialize from memory and attach to hand",!0,targetMorph,"deserialiseFromMemoryAndAttachToHand"),menu.addMenuItem("attach with horizontal layout",!0,this,"attachWithHorizLayout"),menu.addMenuItem("make spacers transparent",!0,this,"makeSpacersTransparent"),menu.addMenuItem("make spacers opaque",!0,this,"makeSpacersOpaque"),menu.addMenuItem("show adders",!0,this,"showAdders"),menu.addMenuItem("remove adders",!0,this,"removeAdders"),menu.addMenuItem("StringMorph2 without background",!0,this,"createNewStringMorph2WithoutBackground"),menu.addMenuItem("StringMorph2 with background",!0,this,"createNewStringMorph2WithBackground"),menu.addMenuItem("TextMorph2 with background",!0,this,"createNewTextMorph2WithBackground"),menu.addMenuItem("StringMorph3 with background",!0,this,"createNewStringMorph3WithBackground"),menu.addMenuItem("TextMorph3 with background",!0,this,"createNewTextMorph3WithBackground"),indexOf.call(world.morphsToBePinouted,targetMorph)>=0?menu.addMenuItem("remove output pins",!0,this,"removeOutputPins"):menu.addMenuItem("show output pins",!0,this,"showOutputPins"),targetMorph.collapsed?menu.addMenuItem("un-collapse",!0,this,"unCollapse"):menu.addMenuItem("collapse",!0,this,"collapse"),menu.addMenuItem("others ➜",!1,this,"popUpFirstMenu","others"),menu.addMenuItem("others 2 ➜",!1,this,"popUpSecondMenu","others"),menu.popUpAtHand()},window.Widget.prototype.analogClock=function(){return world.create(new AnalogClockWdgt)},window.Widget.prototype.popUpIconsMenu=function(morphOpeningThePopUp){var menu;return(menu=new MenuMorph(morphOpeningThePopUp,!1,this,!0,!0,"icons")).addMenuItem("Destroy icon",!0,menusHelper,"createDestroyIconMorph"),menu.addMenuItem("Under the carpet icon",!0,menusHelper,"createUnderCarpetIconMorph"),menu.addMenuItem("Collapsed state icon",!0,menusHelper,"createCollapsedStateIconMorph"),menu.addMenuItem("Uncollapsed state icon",!0,menusHelper,"createUncollapsedStateIconMorph"),menu.addMenuItem("Close icon",!0,menusHelper,"createCloseIconButtonMorph"),menu.addMenuItem("Scratch area icon",!0,menusHelper,"createScratchAreaIconMorph"),menu.addMenuItem("Flora icon",!0,menusHelper,"createFloraIconMorph"),menu.addMenuItem("Scooter icon",!0,menusHelper,"createScooterIconMorph"),menu.addMenuItem("Heart icon",!0,menusHelper,"createHeartIconMorph"),menu.addMenuItem("more 1 ➜",!1,menusHelper,"popUpMore1IconsMenu","others"),menu.addMenuItem("more 2 ➜",!1,menusHelper,"popUpMore2IconsMenu","others"),menu.addMenuItem("arrows ➜",!1,menusHelper,"popUpArrowsIconsMenu","others"),menu.addMenuItem("maps ➜",!1,menusHelper,"popUpMapsMenu","maps"),menu.addMenuItem("more 3 ➜",!1,menusHelper,"popUpMore3IconsMenu","maps"),menu.popUpAtHand()},window.Widget.prototype.popUpVerticalStackMenu=function(morphOpeningThePopUp){var menu;return(menu=new MenuMorph(morphOpeningThePopUp,!1,this,!0,!0,"Vertical stack")).addMenuItem("vertical stack constrained contents width",!0,this,"createSimpleVerticalStackPanelWdgt"),menu.addMenuItem("vertical stack scrollpanel constrained contents width",!0,this,"createSimpleVerticalStackScrollPanelWdgt"),menu.addMenuItem("vertical stack panel and scrollpanel constrained contents width",!0,this,"createSimpleVerticalStackPanelWdgtAndScrollPanel"),menu.addMenuItem("vertical stack free contents width",!0,this,"createSimpleVerticalStackPanelWdgtFreeContentsWidth"),menu.addMenuItem("vertical stack scrollpanel free contents width",!0,this,"createSimpleVerticalStackScrollPanelWdgtFreeContentsWidth"),menu.addMenuItem("vertical stack panel and scrollpanel free contents width",!0,this,"createSimpleVerticalStackPanelWdgtAndScrollPanelFreeContentsWidth"),menu.popUpAtHand()},window.Widget.prototype.popUpDocumentMenu=function(morphOpeningThePopUp){var menu;return(menu=new MenuMorph(morphOpeningThePopUp,!1,this,!0,!0,"Document")).addMenuItem("simple document scrollpanel",!0,this,"createSimpleDocumentScrollPanelWdgt"),menu.addMenuItem("simple document",!0,menusHelper,"createSimpleDocumentWdgt"),menu.popUpAtHand()},window.Widget.prototype.popUpWindowsMenu=function(morphOpeningThePopUp){var menu;return(menu=new MenuMorph(morphOpeningThePopUp,!1,this,!0,!0,"Windows")).addMenuItem("empty window",!0,this,"createEmptyWindow"),menu.addMenuItem("empty internal window",!0,this,"createEmptyInternalWindow"),menu.popUpAtHand()},window.Widget.prototype.popUpShortcutsAndScriptsMenu=function(morphOpeningThePopUp){var menu;return(menu=new MenuMorph(morphOpeningThePopUp,!1,this,!0,!0,"Shortcuts & Scripts")).addMenuItem("basement shortcut",!0,menusHelper,"basementIconAndText"),menu.addMenuItem("new script",!0,menusHelper,"newScriptWindow"),menu.addMenuItem("Fizzypaint launcher",!0,menusHelper,"createFizzyPaintLauncherAndItsIcon"),menu.addMenuItem("Simple doc launcher",!0,menusHelper,"createSimpleDocumentLauncherAndItsIcon"),menu.addMenuItem("Simple slide launcher",!0,menusHelper,"createSimpleSlideLauncherAndItsIcon"),menu.addMenuItem("Link",!0,menusHelper,"createSimpleLinkWdgt"),menu.addMenuItem("Video link",!0,menusHelper,"createSimpleVideoLinkWdgt"),menu.popUpAtHand()},window.Widget.prototype.popUpPatchProgrammingMenu=function(morphOpeningThePopUp){var menu;return(menu=new MenuMorph(morphOpeningThePopUp,!1,this,!0,!0,"Patch Programming")).addMenuItem("fanout",!0,menusHelper,"createFanout"),menu.addMenuItem("calculating node",!0,menusHelper,"createCalculatingPatchNode"),menu.addMenuItem("diffing node",!0,menusHelper,"createDiffingPatchNode"),menu.addMenuItem("slider",!0,menusHelper,"createSliderWithSmallestValueAtBottomEnd"),menu.addMenuItem("regex subst. node",!0,menusHelper,"createRegexSubstitutionPatchNodeWdgt"),menu.popUpAtHand()},window.Widget.prototype.createEmptyInternalWindow=function(){var wm;return(wm=new WindowWdgt(nil,nil,nil,!0)).fullRawMoveTo(world.hand.position()),wm.fullRawMoveWithin(world),world.add(wm),wm.changed()},window.Widget.prototype.createEmptyWindow=function(){var wm;return(wm=new WindowWdgt(nil,nil,nil)).fullRawMoveTo(world.hand.position()),wm.fullRawMoveWithin(world),world.add(wm),wm.changed()},window.Widget.prototype.popUpSimplePlainTextWdgtMenu=function(morphOpeningThePopUp){var menu;return(menu=new MenuMorph(morphOpeningThePopUp,!1,this,!0,!0,"Simple plain text")).addMenuItem("simple plain text wrapping",!0,this,"createNewWrappingSimplePlainTextWdgtWithBackground"),menu.addMenuItem("simple plain text not wrapping",!0,this,"createNewNonWrappingSimplePlainTextWdgtWithBackground"),menu.addMenuItem("simple plain text (wrapping / not wrapping)",!0,this,"createNewWrappingAndNonWrappingSimplePlainTextWdgtWithBackground"),menu.addMenuItem("simple plain text panel wrapping",!0,this,"createWrappingSimplePlainTextPanelWdgt"),menu.addMenuItem("simple plain text panel not wrapping",!0,this,"createNonWrappingSimplePlainTextPanelWdgt"),menu.addMenuItem("simple plain text panel (wrapping / not wrapping)",!0,this,"createWrappingAndNonWrappingSimplePlainTextPanelWdgt"),menu.addMenuItem("simple plain text scrollpanel wrapping",!0,this,"createWrappingSimplePlainTextScrollPanelWdgt"),menu.addMenuItem("simple plain text scrollpanel not wrapping",!0,this,"createNonWrappingSimplePlainTextScrollPanelWdgt"),menu.addMenuItem("simple plain text scrollpanel (wrapping / not wrapping)",!0,this,"createWrappingAndNonWrappingSimplePlainTextScrollPanelWdgt"),menu.popUpAtHand()},window.Widget.prototype.popUpFirstMenu=function(morphOpeningThePopUp){var menu;return(menu=new MenuMorph(morphOpeningThePopUp,!1,this,!0,!0,"others")).addMenuItem("make sliders' buttons states bright",!0,menusHelper,"makeSlidersButtonsStatesBright"),menu.addMenuItem("make pointer",!0,this,"createPointerMorph"),menu.addMenuItem("icon with text",!0,menusHelper,"makeIconWithText"),menu.addMenuItem("empty icon with text",!0,menusHelper,"makeEmptyIconWithText"),menu.addMenuItem("generic reference icon",!0,menusHelper,"makeGenericReferenceIcon"),menu.addMenuItem("generic object icon",!0,menusHelper,"makeGenericObjectIcon"),menu.addMenuItem("folder window",!0,menusHelper,"makeFolderWindow"),menu.addMenuItem("bouncing particle",!0,menusHelper,"makeBouncingParticle"),menu.addMenuItem("throw an error",!0,menusHelper,"throwAnError"),menu.addMenuItem("stretchable panel",!0,menusHelper,"createStretchablePanel"),menu.addMenuItem("tools panel",!0,menusHelper,"createToolsPanel"),menu.addMenuItem("horiz. menu panel",!0,menusHelper,"createHorizontalMenuPanelPanel"),menu.addMenuItem("Simple slide",!0,menusHelper,"createSimpleSlideWdgt"),menu.addMenuItem("patch programming ➜",!1,this,"popUpPatchProgrammingMenu","icons"),menu.addMenuItem("graphs ➜",!1,menusHelper,"popUpGraphsMenu","graphs"),menu.addMenuItem("support docs ➜",!1,menusHelper,"popUpSupportDocsMenu","support docs"),menu.popUpAtHand()},window.Widget.prototype.popUpSecondMenu=function(morphOpeningThePopUp){var menu;return(menu=new MenuMorph(morphOpeningThePopUp,!1,this,!0,!0,"others")).addMenuItem("icons ➜",!1,this,"popUpIconsMenu","icons"),menu.addMenuItem("simple plain text ➜",!1,this,"popUpSimplePlainTextWdgtMenu","icons"),menu.addMenuItem("vertical stack ➜",!1,this,"popUpVerticalStackMenu","icons"),menu.addMenuItem("document ➜",!1,this,"popUpDocumentMenu","icons"),menu.addMenuItem("windows ➜",!1,this,"popUpWindowsMenu","icons"),menu.addMenuItem("shortcuts & scripts ➜",!1,this,"popUpShortcutsAndScriptsMenu","Shortcuts & Scripts"),menu.addMenuItem("analog clock",!0,this,"analogClock"),menu.addMenuItem("dev tools ➜",!1,menusHelper,"popUpDevToolsMenu","icons"),menu.addMenuItem("fizzytiles",!0,menusHelper,"createFridgeMagnets"),menu.addMenuItem("fizzypaint",!0,menusHelper,"createReconfigurablePaint"),menu.addMenuItem("simple button",!0,menusHelper,"createSimpleButton"),menu.addMenuItem("switch button",!0,menusHelper,"createSwitchButtonMorph"),menu.addMenuItem("clipping box",!0,menusHelper,"createNewClippingBoxMorph"),menu.popUpAtHand()},window.Widget.prototype.serialiseToMemory=function(){return world.lastSerializationString=this.serialize()},window.Widget.prototype.deserialiseFromMemoryAndAttachToHand=function(){return world.deserialize(world.lastSerializationString).pickUp()},window.Widget.prototype.deserialiseFromMemoryAndAttachToWorld=function(){var derezzedObject;return derezzedObject=world.deserialize(world.lastSerializationString),world.add(derezzedObject)},window.Widget.prototype.buildBaseMorphClassContextMenu=function(morphOpeningThePopUp){var menu,whereToOrFrom;return menu=new MenuMorph(morphOpeningThePopUp,!1,this,!0,!0,this.constructor.name.replace("Wdgt","")||this.constructor.toString().replace("Wdgt","").split(" ")[1].split("(")[0]),world.isIndexPage?(menu.addMenuItem("color...",!0,this,"popUpColorSetter","choose another color \nfor this morph"),menu.addMenuItem("transparency...",!0,this,"transparencyPopout","set this morph's\nalpha value"),menu.addMenuItem("resize/move...",!0,this,"showResizeAndMoveHandlesAndLayoutAdjusters","show a handle\nwhich can be floatDragged\nto change this morph's extent"),menu.addLine(),menu.addMenuItem("duplicate",!0,this,"duplicateMenuAction","make a copy\nand pick it up"),menu.addMenuItem("create shortcut",!0,this,"createReference","creates a reference to this wdgt and leaves it on the desktop"),menu.addMenuItem("pick up",!0,this,"pickUp","disattach and put \ninto the hand")):(menu.addMenuItem("color...",!0,this,"popUpColorSetter","choose another color \nfor this morph"),menu.addMenuItem("transparency...",!0,this,"transparencyPopout","set this morph's\nalpha value"),menu.addMenuItem("resize/move...",!0,this,"showResizeAndMoveHandlesAndLayoutAdjusters","show a handle\nwhich can be floatDragged\nto change this morph's extent"),menu.addLine(),menu.addMenuItem("duplicate",!0,this,"duplicateMenuAction","make a copy\nand pick it up"),menu.addMenuItem("pick up",!0,this,"pickUp","disattach and put \ninto the hand"),menu.addMenuItem("attach...",!0,this,"attach","stick this morph\nto another one"),menu.addMenuItem("inspect",!0,this,"inspect","open a window\non all properties"),menu.addMenuItem("create shortcut",!0,this,"createReference","creates a reference to this wdgt and leaves it on the desktop"),menu.addMenuItem("test menu ➜",!1,this,"testMenu","debugging and testing operations"),menu.addLine()),this.parent instanceof PanelWdgt&&!(this.parent instanceof ScrollPanelWdgt)&&(whereToOrFrom=this.parent instanceof WorldMorph?"desktop":"panel",this.isLockingToPanels?menu.addMenuItem("unlock from "+whereToOrFrom,!0,this,"toggleIsLockingToPanels","make this morph\nunmovable"):menu.addMenuItem("lock to "+whereToOrFrom,!0,this,"toggleIsLockingToPanels","make this morph\nmovable")),world.isIndexPage||menu.addMenuItem("hide",!0,this,"hide"),this instanceof WindowWdgt?menu.addMenuItem("close",!0,this,"close"):menu.addMenuItem("delete",!0,this,"close"),world.isIndexPage?(menu.addLine(),menu.addMenuItem("dev ➜",!1,menusHelper,"popUpDevToolsMenu","dev tools")):menu.addMenuItem("destroy",!0,this,"fullDestroy"),menu},window.Widget.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){var ref;if(this.layoutSpec===LayoutSpec.ATTACHEDAS_VERTICAL_STACK_ELEMENT&&(null!=(ref=this.parent)?ref.constrainContentWidth:void 0))return this.layoutSpecDetails.addMorphSpecificMenuEntries(morphOpeningThePopUp,menu)},window.Widget.prototype.buildMorphContextMenu=function(morphOpeningThePopUp){var menu;return menu=this.buildBaseMorphClassContextMenu(morphOpeningThePopUp),this.addMorphSpecificMenuEntries(morphOpeningThePopUp,menu),null!=this.addShapeSpecificMenuItems&&(menu=this.addShapeSpecificMenuItems(menu)),menu},window.Widget.prototype.calculateAlphaScaled=function(alpha){var newAlpha,unscaled;return"number"==typeof alpha?(unscaled=alpha/100,Math.min(Math.max(unscaled,.1),1)):(newAlpha=parseFloat(alpha),isNaN(newAlpha)?void 0:(unscaled=newAlpha/100,Math.min(Math.max(unscaled,.1),1)))},window.Widget.prototype.setPadding=function(paddingOrMorphGivingPadding,morphGivingPadding){var padding;return padding=null!=(null!=morphGivingPadding?morphGivingPadding.getValue:void 0)?morphGivingPadding.getValue():paddingOrMorphGivingPadding,this.paddingTop===padding&&this.paddingBottom===padding&&this.paddingLeft===padding&&this.paddingRight===padding||(this.paddingTop=padding,this.paddingBottom=padding,this.paddingLeft=padding,this.paddingRight=padding,this.changed()),padding},window.Widget.prototype.setPaddingTop=function(paddingOrMorphGivingPadding,morphGivingPadding){var padding;return(padding=null!=(null!=morphGivingPadding?morphGivingPadding.getValue:void 0)?morphGivingPadding.getValue():paddingOrMorphGivingPadding)&&this.paddingTop!==padding&&(this.paddingTop=padding,this.changed()),padding},window.Widget.prototype.setPaddingBottom=function(paddingOrMorphGivingPadding,morphGivingPadding){var padding;return(padding=null!=(null!=morphGivingPadding?morphGivingPadding.getValue:void 0)?morphGivingPadding.getValue():paddingOrMorphGivingPadding)&&this.paddingBottom!==padding&&(this.paddingBottom=padding,this.changed()),padding},window.Widget.prototype.setPaddingLeft=function(paddingOrMorphGivingPadding,morphGivingPadding){var padding;return(padding=null!=(null!=morphGivingPadding?morphGivingPadding.getValue:void 0)?morphGivingPadding.getValue():paddingOrMorphGivingPadding)&&this.paddingLeft!==padding&&(this.paddingLeft=padding,this.changed()),padding},window.Widget.prototype.setPaddingRight=function(paddingOrMorphGivingPadding,morphGivingPadding){var padding;return(padding=null!=(null!=morphGivingPadding?morphGivingPadding.getValue:void 0)?morphGivingPadding.getValue():paddingOrMorphGivingPadding)&&this.paddingRight!==padding&&(this.paddingRight=padding,this.changed()),padding},window.Widget.prototype.setAlphaScaled=function(alphaOrMorphGivingAlpha,morphGivingAlpha){var alpha;return(alpha=null!=(null!=morphGivingAlpha?morphGivingAlpha.getValue:void 0)?morphGivingAlpha.getValue():alphaOrMorphGivingAlpha)&&(alpha=this.calculateAlphaScaled(alpha),this.alpha!==alpha&&(this.alpha=alpha,this.changed())),alpha},window.Widget.prototype.newParentChoice=function(ignored,theMorphToBeAttached){if(this.add(theMorphToBeAttached),this instanceof ScrollPanelWdgt)return this.adjustContentsBounds(),this.adjustScrollBars()},window.Widget.prototype.newParentChoiceWithHorizLayout=function(ignored,theMorphToBeAttached){if(this.add(theMorphToBeAttached,nil,LayoutSpec.ATTACHEDAS_STACK_HORIZONTAL_VERTICALALIGNMENTS_UNDEFINED),this instanceof ScrollPanelWdgt)return this.adjustContentsBounds(),this.adjustScrollBars()},window.Widget.prototype.attach=function(){var choices,choicesExcludingParent,menu;return choices=world.plausibleTargetAndDestinationMorphs(this),choicesExcludingParent=[],choices.forEach(each=>{if(each!==this.parent)return choicesExcludingParent.push(each)}),choicesExcludingParent.length>0?(menu=new MenuMorph(this,!1,this,!0,!0,"choose new parent:"),choicesExcludingParent.forEach(each=>menu.addMenuItem(each.toString().slice(0,50),!0,each,"newParentChoice",nil,nil,nil,nil,nil,nil,nil,!0))):menu=new MenuMorph(this,!1,this,!0,!0,"no morphs to attach to"),menu.popUpAtHand()},window.Widget.prototype.attachWithHorizLayout=function(){var choices,choicesExcludingParent,menu;return choices=world.plausibleTargetAndDestinationMorphs(this),choicesExcludingParent=[],choices.forEach(each=>{if(each!==this.parent)return choicesExcludingParent.push(each)}),choicesExcludingParent.length>0?(menu=new MenuMorph(this,!1,this,!0,!0,"choose new parent:"),choicesExcludingParent.forEach(each=>menu.addMenuItem(each.toString().slice(0,50),!0,each,"newParentChoiceWithHorizLayout",nil,nil,nil,nil,nil,nil,nil,!0))):menu=new MenuMorph(this,!1,this,!0,!0,"no morphs to attach to"),menu.popUpAtHand()},window.Widget.prototype.toggleIsLockingToPanels=function(){return this.isLockingToPanels=!this.isLockingToPanels},window.Widget.prototype.lockToPanels=function(){return this.isLockingToPanels=!0},window.Widget.prototype.unlockFromPanels=function(){return this.isLockingToPanels=!1},window.Widget.prototype.enableDragsDropsAndEditing=function(){var childrenNotHandlesNorCarets,each,i,len,ref,results,whereToAct;if(!this.dragsDropsAndEditingEnabled){if(this.dragsDropsAndEditingEnabled=!0,null!=this.contents){if((whereToAct=this.contents).dragsDropsAndEditingEnabled)return;whereToAct.dragsDropsAndEditingEnabled=!0}else whereToAct=this;if(null!=(ref=this.parent)&&"function"==typeof ref.makePencilYellow&&ref.makePencilYellow(),whereToAct.dragsDropsAndEditingEnabled=!0,whereToAct.enableDrops(),null!=(childrenNotHandlesNorCarets=whereToAct.children.filter(function(m){return!(m instanceof HandleMorph||m instanceof CaretMorph)}))){for(results=[],i=0,len=childrenNotHandlesNorCarets.length;i<len;i++)(each=childrenNotHandlesNorCarets[i]).unlockFromPanels(),"function"==typeof each.contrastOutFromPanelColor&&each.contrastOutFromPanelColor(),null!=each.isEditable?results.push(each.isEditable=!0):results.push(void 0);return results}}},window.Widget.prototype.disableDragsDropsAndEditing=function(){var childrenNotHandlesNorCarets,each,i,len,ref,ref1,results,whereToAct;if(this.dragsDropsAndEditingEnabled){if(this.dragsDropsAndEditingEnabled=!1,null!=this.contents){if(!(whereToAct=this.contents).dragsDropsAndEditingEnabled)return;whereToAct.dragsDropsAndEditingEnabled=!1}else whereToAct=this;if(null!=(ref=this.parent)&&"function"==typeof ref.makePencilClear&&ref.makePencilClear(),whereToAct.disableDrops(),whereToAct.dragsDropsAndEditingEnabled=!1,null!=(childrenNotHandlesNorCarets=whereToAct.children.filter(function(m){return!(m instanceof HandleMorph||m instanceof CaretMorph)}))){for(results=[],i=0,len=childrenNotHandlesNorCarets.length;i<len;i++)(each=childrenNotHandlesNorCarets[i]).lockToPanels(),"function"==typeof each.blendInWithPanelColor&&each.blendInWithPanelColor(),null!=each.isEditable?(each.isEditable=!1,(null!=(ref1=world.caret)?ref1.target:void 0)===each?results.push(world.stopEditing()):results.push(void 0)):results.push(void 0);return results}}},window.Widget.prototype.prepareToBeGrabbed=function(){return this.userMovedThisFromComputedPosition=!0,this.unlockFromPanels(),this.setLayoutSpec(LayoutSpec.ATTACHEDAS_FREEFLOATING)},window.Widget.prototype.deduplicateSettersAndSortByMenuEntryString=function(menuEntriesStrings,functionNamesStrings){var j,k,list;for(menuEntriesStrings=menuEntriesStrings.uniqueKeepOrder(),functionNamesStrings=functionNamesStrings.uniqueKeepOrder(),list=[],j=0;j<menuEntriesStrings.length;)list.push({menuEntriesStrings:menuEntriesStrings[j],functionNamesStrings:functionNamesStrings[j]}),j++;for(list.sort(function(a,b){return a.menuEntriesStrings<b.menuEntriesStrings?-1:a.menuEntriesStrings===b.menuEntriesStrings?0:1}),k=0;k<list.length;)menuEntriesStrings[k]=list[k].menuEntriesStrings,functionNamesStrings[k]=list[k].functionNamesStrings,k++;return[menuEntriesStrings,functionNamesStrings]},window.Widget.prototype.colorSetters=function(menuEntriesStrings,functionNamesStrings){return null==menuEntriesStrings&&(menuEntriesStrings=[],functionNamesStrings=[]),menuEntriesStrings.push("color","background color"),functionNamesStrings.push("setColor","setBackgroundColor"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.Widget.prototype.stringSetters=function(menuEntriesStrings,functionNamesStrings){return null==menuEntriesStrings&&(menuEntriesStrings=[],functionNamesStrings=[]),[menuEntriesStrings,functionNamesStrings]},window.Widget.prototype.numericalSetters=function(menuEntriesStrings,functionNamesStrings){return null==menuEntriesStrings&&(menuEntriesStrings=[],functionNamesStrings=[]),menuEntriesStrings.push("width","height","alpha 0-100","padding","padding top","padding bottom","padding left","padding right"),functionNamesStrings.push("rawSetWidth","rawSetHeight","setAlphaScaled","setPadding","setPaddingTop","setPaddingBottom","setPaddingLeft","setPaddingRight"),null!=this.addShapeSpecificNumericalSetters&&([menuEntriesStrings,functionNamesStrings]=this.addShapeSpecificNumericalSetters(menuEntriesStrings,functionNamesStrings)),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.Widget.prototype.allSetters=function(menuEntriesStrings,functionNamesStrings){return null==menuEntriesStrings&&(menuEntriesStrings=[],functionNamesStrings=[]),[menuEntriesStrings,functionNamesStrings]=this.colorSetters(menuEntriesStrings,functionNamesStrings),[menuEntriesStrings,functionNamesStrings]=this.stringSetters(menuEntriesStrings,functionNamesStrings),[menuEntriesStrings,functionNamesStrings]=this.numericalSetters(menuEntriesStrings,functionNamesStrings),[menuEntriesStrings,functionNamesStrings]},window.Widget.prototype.allEntryFields=function(){return this.collectAllChildrenBottomToTopSuchThat(function(each){return each.isEditable&&(each instanceof StringMorph||each instanceof StringMorph2||each instanceof TextMorph||each instanceof SimplePlainTextWdgt)})},window.Widget.prototype.nextEntryField=function(current){var fields,idx;return fields=this.allEntryFields(),-1!==(idx=fields.indexOf(current))&&fields.length>idx+1?fields[idx+1]:fields[0]},window.Widget.prototype.previousEntryField=function(current){var fields,idx;return fields=this.allEntryFields(),-1!==(idx=fields.indexOf(current))?idx>0?fields[idx-1]:fields[fields.length-1]:fields[0]},window.Widget.prototype.tab=function(editField){return this.nextTab?this.nextTab(editField):this.parent?this.parent.tab(editField):void 0},window.Widget.prototype.backTab=function(editField){return this.previousTab?this.previousTab(editField):this.parent?this.parent.backTab(editField):void 0},window.Widget.prototype.escalateEvent=function(functionName,arg1,arg2,arg3,arg4,arg5,arg6){var handler;if(null!=(handler=this.parent)){for(;!handler[functionName]&&null!=handler.parent;)handler=handler.parent;if(handler[functionName])return handler[functionName](arg1,arg2,arg3,arg4,arg5,arg6)}},window.Widget.prototype.evaluateString=function(codeSource){var result;return result=eval(compileFGCode(codeSource,!0)),this.reLayout(),this.changed()},window.Widget.prototype.isTouching=function(otherMorph){var data,oImg;return oImg=this.overlappingImage(otherMorph),data=oImg.getContext("2d").getImageData(1,1,oImg.width,oImg.height).data,null!=detect(data,function(each){return 0!==each})},window.Widget.prototype.overlappingImage=function(otherMorph){var ctx,fb,oImg,oRect,otherFb;return fb=this.fullBounds(),otherFb=otherMorph.fullBounds(),oRect=fb.intersect(otherFb),oImg=newCanvas(oRect.extent().scaleBy(pixelRatio)),(ctx=oImg.getContext("2d")).scale(pixelRatio,pixelRatio),oRect.width()<1||oRect.height()<1?newCanvas(new Point(1,1).scaleBy(pixelRatio)):(ctx.drawImage(this.fullImage(),Math.round(oRect.origin.x-fb.origin.x),Math.round(oRect.origin.y-fb.origin.y)),ctx.globalCompositeOperation="source-in",ctx.drawImage(otherMorph.fullImage(),Math.round(otherFb.origin.x-oRect.origin.x),Math.round(otherFb.origin.y-oRect.origin.y)),oImg)},window.Widget.prototype.minWidth=10,window.Widget.prototype.desiredWidth=20,window.Widget.prototype.maxWidth=100,window.Widget.prototype.minHeight=10,window.Widget.prototype.desiredHeight=20,window.Widget.prototype.maxHeight=100,window.Widget.prototype.invalidateLayout=function(){if(this.layoutIsValid&&window.morphsThatMaybeChangedLayout.push(this),this.layoutIsValid=!1,this.layoutSpec!==LayoutSpec.ATTACHEDAS_FREEFLOATING&&null!=this.parent)return this.parent.invalidateLayout()},window.Widget.prototype.implementsDeferredLayout=function(){return this.doLayout!==Widget.prototype.doLayout},window.Widget.prototype.doLayout=function(newBoundsForThisLayout){return window.recalculatingLayouts,null==newBoundsForThisLayout&&(null!=this.desiredExtent?(newBoundsForThisLayout=this.desiredExtent,this.desiredExtent=nil):newBoundsForThisLayout=this.extent(),null!=this.desiredPosition?(newBoundsForThisLayout=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(newBoundsForThisLayout),this.desiredPosition=nil):newBoundsForThisLayout=new Rectangle(this.position()).setBoundsWidthAndHeight(newBoundsForThisLayout)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(this.fullRawMoveTo(newBoundsForThisLayout.origin),this instanceof TextMorph||this instanceof SimplePlainTextWdgt?this.rawSetBounds(newBoundsForThisLayout):this.rawSetExtent(newBoundsForThisLayout.extent()),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted())},window.Widget.instancesCounter=0,window.Widget.lastBuiltInstanceNumericID=0,window.Widget.morphStaticMethod=function(){return 3.14},window.Widget.morphFromUniqueIDString=function(theUniqueID){var result;return null==(result=world.topMorphSuchThat(m=>m.uniqueIDString()===theUniqueID))&&alert("theUniqueID "+theUniqueID+" not found!"),result},window.Widget.roundNumericIDsToNextThousand=function(){return this.lastBuiltInstanceNumericID%1e3==0&&this.lastBuiltInstanceNumericID++,this.lastBuiltInstanceNumericID=1e3*Math.ceil(this.lastBuiltInstanceNumericID/1e3)},window.WidgetHolderWithCaptionWdgt=function(labelContent,icon){this.labelContent=labelContent,this.icon=icon,WidgetHolderWithCaptionWdgt.__super__.constructor.call(this),null==this.icon&&(this.icon=new SimpleDropletWdgt("icon")),this.rawSetExtent(new Point(95,95)),this.add(this.icon),this.label=new StringMorph2(this.labelContent,WorldMorph.preferencesAndSettings.shortcutsFontSize),this.label.fittingSpecWhenBoundsTooLarge=FittingSpecTextInLargerBounds.SCALEUP,this.label.color=new Color(255,255,255),this.label.hasDarkOutline=!0,this.add(this.label,nil,nil,!0),this.label.alignCenter(),this.label.alignMiddle(),this.label.isEditable=!0,this.invalidateLayout(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WidgetHolderWithCaptionWdgt,"name",{value:"WidgetHolderWithCaptionWdgt"}),window.WidgetHolderWithCaptionWdgt.instances=[],window.WidgetHolderWithCaptionWdgt.__super__=window.Widget.prototype,window.WidgetHolderWithCaptionWdgt=extend(window.WidgetHolderWithCaptionWdgt,window.Widget),window.WidgetHolderWithCaptionWdgt.prototype.labl=nil,window.WidgetHolderWithCaptionWdgt.prototype.setColor=function(theColor,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.icon.setColor(theColor)},window.WidgetHolderWithCaptionWdgt.prototype.widthWithoutSpacing=function(){return Math.min(this.width(),this.height())},window.WidgetHolderWithCaptionWdgt.prototype.rawResizeToWithoutSpacing=function(){return this.rawSetExtent(new Point(this.widthWithoutSpacing(),this.widthWithoutSpacing())),this.invalidateLayout()},window.WidgetHolderWithCaptionWdgt.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return WidgetHolderWithCaptionWdgt.__super__.initialiseDefaultWindowContentLayoutSpec.apply(this,arguments),this.layoutSpecDetails.canSetHeightFreely=!1},window.WidgetHolderWithCaptionWdgt.prototype.rawSetWidthSizeHeightAccordingly=function(newWidth){return this.rawResizeToWithoutSpacing(),this.rawSetExtent(new Point(newWidth,newWidth)),this.invalidateLayout()},window.WidgetHolderWithCaptionWdgt.prototype.doLayout=function(newBoundsForThisLayout){var height,p0,squareDim,width;return window.recalculatingLayouts,null==newBoundsForThisLayout&&(null!=this.desiredExtent?(newBoundsForThisLayout=this.desiredExtent,this.desiredExtent=nil):newBoundsForThisLayout=this.extent(),null!=this.desiredPosition?(newBoundsForThisLayout=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(newBoundsForThisLayout),this.desiredPosition=nil):newBoundsForThisLayout=new Rectangle(this.position()).setBoundsWidthAndHeight(newBoundsForThisLayout)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(this.rawSetBounds(newBoundsForThisLayout),trackChanges.push(!1),height=this.height(),width=this.width(),squareDim=Math.min(width,height),p0=this.topLeft(),p0=p0.add(new Point(width/2,height/2)),p0=p0.subtract(new Point(squareDim/2,squareDim/2)),this.icon.setExtent(new Point(squareDim,8*squareDim/10).round()),this.icon.fullRawMoveTo(p0.round()),this.label.setExtent(new Point(squareDim,2*squareDim/10).round()),this.label.fullRawMoveTo(p0.add(new Point(0,8*squareDim/10)).round()),trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0)},window.IconicDesktopSystemLinkWdgt=function(){window.IconicDesktopSystemLinkWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.IconicDesktopSystemLinkWdgt,"name",{value:"IconicDesktopSystemLinkWdgt"}),window.IconicDesktopSystemLinkWdgt.instances=[],window.IconicDesktopSystemLinkWdgt.__super__=window.WidgetHolderWithCaptionWdgt.prototype,window.IconicDesktopSystemLinkWdgt=extend(window.IconicDesktopSystemLinkWdgt,window.WidgetHolderWithCaptionWdgt),window.IconicDesktopSystemLinkWdgt.prototype.moveOnTopOfTopReference=function(){var index,topMostReference;return null!=(topMostReference=this.parent.topmostChildSuchThat(c=>c!==this&&c instanceof WidgetHolderWithCaptionWdgt))?(this.parent.children.remove(this),index=this.parent.children.indexOf(topMostReference),this.parent.children.splice(index+1,0,this)):(this.parent.children.remove(this),this.parent.children.unshift(this))},window.BasementOpenerWdgt=function(){BasementOpenerWdgt.__super__.constructor.call(this,"Basement",new GenericShortcutIconWdgt(new BasementIconWdgt)),this.target=world.basementWdgt,this.rawSetExtent(new Point(75,75)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BasementOpenerWdgt,"name",{value:"BasementOpenerWdgt"}),window.BasementOpenerWdgt.instances=[],window.BasementOpenerWdgt.__super__=window.IconicDesktopSystemLinkWdgt.prototype,window.BasementOpenerWdgt=extend(window.BasementOpenerWdgt,window.IconicDesktopSystemLinkWdgt),window.BasementOpenerWdgt.augmentWith(window.HighlightableMixin,"BasementOpenerWdgt"),window.BasementOpenerWdgt.prototype.color_hover=new Color(90,90,90),window.BasementOpenerWdgt.prototype.color_pressed=new Color(128,128,128),window.BasementOpenerWdgt.prototype.color_normal=new Color(0,0,0),window.BasementOpenerWdgt.prototype._acceptsDrops=!0,window.BasementOpenerWdgt.prototype.iHaveBeenAddedTo=function(whereTo,beingDropped){if(BasementOpenerWdgt.__super__.iHaveBeenAddedTo.apply(this,arguments),whereTo===world&&!this.userMovedThisFromComputedPosition)return this.fullMoveTo(world.bottomRight().subtract(this.extent().add(world.desktopSidesPadding)))},window.BasementOpenerWdgt.prototype.justDropped=function(whereIn){if(BasementOpenerWdgt.__super__.justDropped.apply(this,arguments),whereIn===world)return this.userMovedThisFromComputedPosition=!0},window.BasementOpenerWdgt.prototype.mouseDoubleClick=function(){var windowedBasementWdgt;return this.target.isOrphan()?(this.target.unCollapse(),windowedBasementWdgt=new WindowWdgt(nil,nil,this.target),world.add(windowedBasementWdgt),windowedBasementWdgt.rawSetExtent(new Point(460,400)),windowedBasementWdgt.fullRawMoveTo(new Point(140,90)),windowedBasementWdgt.rememberFractionalSituationInHoldingPanel(),menusHelper.createBasementOneOffInfoWindowNextTo(windowedBasementWdgt)):(this.target.parent.spawnNextTo(this),this.target.parent.rememberFractionalSituationInHoldingPanel())},window.BasementOpenerWdgt.prototype.reactToDropOf=function(droppedWidget){return this.target.scrollPanel.contents.addInPseudoRandomPosition(droppedWidget)},window.BasementOpenerWdgt.prototype.rejectsBeingDropped=function(){return!0},window.BoxMorph=function(cornerRadius=4){this.cornerRadius=cornerRadius,BoxMorph.__super__.constructor.call(this),this.appearance=new BoxyAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BoxMorph,"name",{value:"BoxMorph"}),window.BoxMorph.instances=[],window.BoxMorph.__super__=window.Widget.prototype,window.BoxMorph=extend(window.BoxMorph,window.Widget),window.BoxMorph.prototype.cornerRadius=nil,window.BoxMorph.prototype.colloquialName=function(){return"box"},window.BoxMorph.prototype.insetPosition=function(){return this.position().add(this.cornerRadius-Math.round(this.cornerRadius/Math.sqrt(2)))},window.BoxMorph.prototype.insetSpaceExtent=function(){return this.extent().subtract(2*(this.cornerRadius-Math.round(this.cornerRadius/Math.sqrt(2))))},window.BoxMorph.prototype.extentBasedOnInsetExtent=function(insetMorph){return insetMorph.extent().add(2*(this.cornerRadius-Math.round(this.cornerRadius/Math.sqrt(2))))},window.BoxMorph.prototype.choiceOfMorphToBePicked=function(ignored,morphPickingUp){if(morphPickingUp.addInset(this),this instanceof ScrollPanelWdgt)return this.adjustContentsBounds(),this.adjustScrollBars()},window.BoxMorph.prototype.setCornerRadius=function(radiusOrMorphGivingRadius,morphGivingRadius){var newRadius,radius;return"number"==typeof(radius=null!=(null!=morphGivingRadius?morphGivingRadius.getValue:void 0)?morphGivingRadius.getValue():radiusOrMorphGivingRadius)?this.cornerRadius=Math.max(radius,0):(newRadius=parseFloat(radius),isNaN(newRadius)||(this.cornerRadius=Math.max(newRadius,0))),this.layoutInset(),this.changed()},window.BoxMorph.prototype.pickInset=function(){var choices,choicesExcludingParent,menu;return choices=world.plausibleTargetAndDestinationMorphs(this),choicesExcludingParent=[],choices.forEach(each=>{if(each!==this.parent)return choicesExcludingParent.push(each)}),choicesExcludingParent.length>0?(menu=new MenuMorph(this,!1,this,!0,!0,"choose Widget to put as inset:"),choicesExcludingParent.forEach(each=>menu.addMenuItem(each.toString().slice(0,50),!0,each,"choiceOfMorphToBePicked"))):menu=new MenuMorph(this,!1,this,!0,!0,"no morphs to pick"),menu.popUpAtHand()},window.BasementWdgt=function(){BasementWdgt.__super__.constructor.call(this),this.silentRawSetExtent(new Point(340,270)),this.color=new Color(60,60,60),this.padding=5,this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BasementWdgt,"name",{value:"BasementWdgt"}),window.BasementWdgt.instances=[],window.BasementWdgt.__super__=window.BoxMorph.prototype,window.BasementWdgt=extend(window.BasementWdgt,window.BoxMorph),window.BasementWdgt.prototype.scrollPanel=nil,window.BasementWdgt.prototype.resizer=nil,window.BasementWdgt.prototype.hideUsedWdgtsOnButton=nil,window.BasementWdgt.prototype.hideUsedWdgtsOffButton=nil,window.BasementWdgt.prototype.hideUsedWdgtsToggle=nil,window.BasementWdgt.prototype.showingLostItemsOnly=!1,window.BasementWdgt.prototype.colloquialName=function(){return"Basement"},window.BasementWdgt.prototype.closeFromContainerWindow=function(containerWindow){return this.removeFromTree(),containerWindow.fullDestroy()},window.BasementWdgt.prototype.empty=function(){var ref,ref1;return null!=(ref=this.scrollPanel)&&null!=(ref1=ref.contents)?ref1.fullDestroyChildren():void 0},window.BasementWdgt.prototype.buildAndConnectChildren=function(){return this.scrollPanel=new ScrollPanelWdgt,this.add(this.scrollPanel),this.hideUsedWdgtsOnButton=new SimpleButtonMorph(!0,this,"showAllWidgets","☒ only show lost items"),this.hideUsedWdgtsOffButton=new SimpleButtonMorph(!0,this,"hideUsedWidgets","☐ only show lost items"),this.hideUsedWdgtsToggle=new ToggleButtonMorph(this.hideUsedWdgtsOffButton,this.hideUsedWdgtsOnButton,0),this.add(this.hideUsedWdgtsToggle),this.resizer=new HandleMorph(this),this.invalidateLayout()},window.BasementWdgt.prototype.doGC=function(){var eachReferencingMorph,i,j,k,len,len1,len2,newGcSessionId,newReachableReferencesUncovered,ref,ref1,ref2;for(world.incrementalGcSessionId++,newGcSessionId=world.incrementalGcSessionId,i=0,len=(ref=world.widgetsReferencingOtherWidgets).length;i<len;i++)(eachReferencingMorph=ref[i]).isOrphan()&&eachReferencingMorph.markReferenceAsVisited(newGcSessionId);for(j=0,len1=(ref1=world.widgetsReferencingOtherWidgets).length;j<len1;j++)(eachReferencingMorph=ref1[j]).wasReferenceVisited(newGcSessionId)||eachReferencingMorph.isInBasement()||(eachReferencingMorph.target.markItAndItsParentsAsReachable(newGcSessionId),eachReferencingMorph.markReferenceAsVisited(newGcSessionId));for(newReachableReferencesUncovered=!0;newReachableReferencesUncovered;)for(newReachableReferencesUncovered=!1,k=0,len2=(ref2=world.widgetsReferencingOtherWidgets).length;k<len2;k++)(eachReferencingMorph=ref2[k]).wasReferenceVisited(newGcSessionId)||eachReferencingMorph.isInBasementButReachable(newGcSessionId)&&(newReachableReferencesUncovered=!0,eachReferencingMorph.target.markItAndItsParentsAsReachable(newGcSessionId),eachReferencingMorph.markReferenceAsVisited(newGcSessionId));return newGcSessionId},window.BasementWdgt.prototype.hideUsedWidgets=function(){var eachChild,i,j,len,len1,newGcSessionId,ref,referencedChildren,results;for(this.showingLostItemsOnly=!0,newGcSessionId=this.doGC(),referencedChildren=[],i=0,len=(ref=this.scrollPanel.contents.children).length;i<len;i++)(eachChild=ref[i]).isInBasementButReachable(newGcSessionId)&&referencedChildren.indexOf(-1===eachChild)&&referencedChildren.push(eachChild);for(results=[],j=0,len1=referencedChildren.length;j<len1;j++)eachChild=referencedChildren[j],results.push(eachChild.hide());return results},window.BasementWdgt.prototype.showAllWidgets=function(){var eachChild,i,len,ref,results;for(this.showingLostItemsOnly=!1,results=[],i=0,len=(ref=this.scrollPanel.contents.children).length;i<len;i++)eachChild=ref[i],results.push(eachChild.show());return results},window.BasementWdgt.prototype.childAddedInScrollPanel=function(){return this.showingLostItemsOnly?this.hideUsedWidgets():this.showAllWidgets()},window.BasementWdgt.prototype.doLayout=function(newBoundsForThisLayout){var b,h,r,w,x,y;return window.recalculatingLayouts,null==newBoundsForThisLayout&&(null!=this.desiredExtent?(newBoundsForThisLayout=this.desiredExtent,this.desiredExtent=nil):newBoundsForThisLayout=this.extent(),null!=this.desiredPosition?(newBoundsForThisLayout=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(newBoundsForThisLayout),this.desiredPosition=nil):newBoundsForThisLayout=new Rectangle(this.position()).setBoundsWidthAndHeight(newBoundsForThisLayout)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(this.rawSetBounds(newBoundsForThisLayout),trackChanges.push(!1),x=this.left()+this.cornerRadius,y=this.top()+this.cornerRadius,r=this.right()-this.cornerRadius,w=r-x,y=this.top()+2,w=this.width()-this.cornerRadius,w-=this.cornerRadius,b=this.bottom()-2*this.cornerRadius-WorldMorph.preferencesAndSettings.handleSize,h=b-y,this.scrollPanel.fullRawMoveTo(new Point(x,y)),this.scrollPanel.rawSetExtent(new Point(w,h)),x=this.scrollPanel.left(),y=this.scrollPanel.bottom()+this.cornerRadius,h=WorldMorph.preferencesAndSettings.handleSize,w=this.scrollPanel.width()-h-this.cornerRadius,this.hideUsedWdgtsToggle.doLayout(new Rectangle(0,0,w,h).translateBy(new Point(x,y))),trackChanges.pop(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted())},window.BouncerWdgt=function(){for(BouncerWdgt.__super__.constructor.call(this),this.fps=60,world.addSteppingMorph(this),this.rawSetExtent(new Point(5,5)),this.appearance=new RectangularAppearance(this);null==this.velocity||0===this.velocity.x||0===this.velocity.y;)this.velocity=new Point(getRandomInt(-10,10),getRandomInt(-10,10));"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BouncerWdgt,"name",{value:"BouncerWdgt"}),window.BouncerWdgt.instances=[],window.BouncerWdgt.__super__=window.Widget.prototype,window.BouncerWdgt=extend(window.BouncerWdgt,window.Widget),window.BouncerWdgt.prototype.velocity=nil,window.BouncerWdgt.prototype.step=function(){var bounced,p,px,py,vx,vy;if(p=this.position(),vx=this.velocity.x,vy=this.velocity.y,px=p.x+vx,py=p.y+vy,bounced=!1,px>this.parent.right()&&(px=this.parent.right()-(px-this.parent.right()),vx=-vx,bounced=!0),py>this.parent.bottom()&&(py=this.parent.bottom()-(py-this.parent.bottom()),vy=-vy,bounced=!0),px<this.parent.left()&&(px=this.parent.left()-(px-this.parent.left()),vx=-vx,bounced=!0),py<this.parent.top()&&(py=this.parent.top()-(py-this.parent.top()),vy=-vy,bounced=!0),this.fullMoveTo(new Point(px,py)),bounced)return this.velocity=new Point(vx,vy)},window.BoxyAppearance=function(morph){BoxyAppearance.__super__.constructor.call(this,morph),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BoxyAppearance,"name",{value:"BoxyAppearance"}),window.BoxyAppearance.instances=[],window.BoxyAppearance.__super__=window.Appearance.prototype,window.BoxyAppearance=extend(window.BoxyAppearance,window.Appearance),window.BoxyAppearance.prototype.getCornerRadius=function(){return null!=this.morph.cornerRadius?this.morph.cornerRadius:4},window.BoxyAppearance.prototype.isTransparentAt=function(aPoint){var radius,relativePoint,thisMorphPosition;if(!this.morph.boundsContainPoint(aPoint))return!0;if(thisMorphPosition=this.morph.position(),radius=Math.max(this.getCornerRadius(),0),(relativePoint=new Point(aPoint.x-thisMorphPosition.x,aPoint.y-thisMorphPosition.y)).x<radius&&relativePoint.y<radius){if(relativePoint.distanceTo(new Point(radius,radius))>radius)return!0}else if(relativePoint.x>this.morph.width()-radius&&relativePoint.y<radius){if(relativePoint.distanceTo(new Point(this.morph.width()-radius,radius))>radius)return!0}else if(relativePoint.x<radius&&relativePoint.y>this.morph.height()-radius){if(relativePoint.distanceTo(new Point(radius,this.morph.height()-radius))>radius)return!0}else if(relativePoint.x>this.morph.width()-radius&&relativePoint.y>this.morph.height()-radius&&relativePoint.distanceTo(new Point(this.morph.width()-radius,this.morph.height()-radius))>radius)return!0;return!1},window.BoxyAppearance.prototype.paintIntoAreaOrBlitFromBackBuffer=function(aContext,clippingRectangle,appliedShadow){var al,area,at,h,morphPosition,sl,st,w;return this.morph.preliminaryCheckNothingToDraw(clippingRectangle,aContext)?nil:([area,sl,st,al,at,w,h]=this.morph.calculateKeyValues(aContext,clippingRectangle),area.isNotEmpty()?w<1||h<1?nil:(aContext.save(),aContext.clipToRectangle(al,at,w,h),aContext.globalAlpha=(null!=appliedShadow?appliedShadow.alpha:1)*this.morph.alpha,aContext.scale(pixelRatio,pixelRatio),morphPosition=this.morph.position(),aContext.translate(morphPosition.x,morphPosition.y),aContext.fillStyle=this.morph.color.toString(),null!=appliedShadow&&(aContext.fillStyle="black"),aContext.beginPath(),this.outlinePath(aContext,Math.max(this.getCornerRadius(),!1)),aContext.closePath(),aContext.fill(),null!=this.morph.strokeColor&&null==appliedShadow&&(aContext.lineWidth=1,aContext.strokeStyle=this.morph.strokeColor.toString(),aContext.beginPath(),this.outlinePath(aContext,Math.max(this.getCornerRadius(),!0)),aContext.closePath(),aContext.stroke()),aContext.restore(),this.paintHighlight(aContext,al,at,w,h)):void 0)},window.BoxyAppearance.prototype.outlinePath=function(context,radius,isStroke){var h,offset,w;return offset=radius,isStroke&&(offset+=.5),w=this.morph.width(),h=this.morph.height(),context.arc(offset,offset,radius,degreesToRadians(-180),degreesToRadians(-90)),context.arc(w-offset,offset,radius,degreesToRadians(-90),degreesToRadians(-0)),context.arc(w-offset,h-offset,radius,degreesToRadians(0),degreesToRadians(90)),context.arc(offset,h-offset,radius,degreesToRadians(90),degreesToRadians(180))},window.BoxyAppearance.prototype.cornerRadiusPopout=function(menuItem){return this.morph.prompt(menuItem.parent.title+"\ncorner\nradius:",this.morph,"setCornerRadius",this.morph.cornerRadius.toString(),nil,0,100,!0)},window.BoxyAppearance.prototype.addShapeSpecificMenuItems=function(menu){return menu.addLine(),menu.addMenuItem("corner radius...",!0,this,"cornerRadiusPopout","set the corner's\nradius"),menu.addMenuItem("pick inset...",!0,this.morph,"pickInset","put a morph as inset"),menu},window.BoxyAppearance.prototype.addShapeSpecificNumericalSetters=function(menuEntriesStrings,functionNamesStrings){return null==menuEntriesStrings&&(menuEntriesStrings=[],functionNamesStrings=[]),menuEntriesStrings.push("corner radius"),functionNamesStrings.push("setCornerRadius"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.BubblyAppearance=function(morph){BubblyAppearance.__super__.constructor.call(this,morph),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BubblyAppearance,"name",{value:"BubblyAppearance"}),window.BubblyAppearance.instances=[],window.BubblyAppearance.__super__=window.BoxyAppearance.prototype,window.BubblyAppearance=extend(window.BubblyAppearance,window.BoxyAppearance),window.BubblyAppearance.prototype.outlinePath=function(context,radius){var h,padding,spikeDistanceFromClosestSide,spikeHeight,w;return padding=radius,w=this.morph.width(),h=this.morph.height(),spikeHeight=h/5,spikeDistanceFromClosestSide=h/5,context.arc(padding,padding,radius,degreesToRadians(-180),degreesToRadians(-90)),context.arc(w-padding,padding,radius,degreesToRadians(-90),degreesToRadians(-0)),context.arc(w-padding,h-spikeHeight-radius,radius,degreesToRadians(0),degreesToRadians(90)),context.lineTo(padding+radius+spikeDistanceFromClosestSide,h-spikeHeight),context.lineTo(padding,h),context.arc(padding,h-spikeHeight-radius,radius,degreesToRadians(90),degreesToRadians(180))},window.EmptyButtonMorph=function(ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked=!0,target=nil,action=nil,faceMorph=nil,dataSourceMorphForTarget=nil,morphEnv,toolTipMessage=nil,doubleClickAction=nil,argumentToAction1=nil,argumentToAction2=nil,representsAMorph=!1,padding=0){this.ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked=ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked,this.target=target,this.action=action,this.faceMorph=faceMorph,this.dataSourceMorphForTarget=dataSourceMorphForTarget,this.morphEnv=morphEnv,this.toolTipMessage=toolTipMessage,this.doubleClickAction=doubleClickAction,this.argumentToAction1=argumentToAction1,this.argumentToAction2=argumentToAction2,this.representsAMorph=representsAMorph,this.padding=padding,EmptyButtonMorph.__super__.constructor.call(this),this.defaultRejectDrags=!0,null!=this.faceMorph&&("string"==typeof this.faceMorph&&(this.faceMorph=new StringMorph2(this.faceMorph,WorldMorph.preferencesAndSettings.textInButtonsFontSize).alignCenter()),this.add(this.faceMorph),this.invalidateLayout()),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.EmptyButtonMorph,"name",{value:"EmptyButtonMorph"}),window.EmptyButtonMorph.instances=[],window.EmptyButtonMorph.__super__=window.Widget.prototype,window.EmptyButtonMorph=extend(window.EmptyButtonMorph,window.Widget),window.EmptyButtonMorph.augmentWith(window.HighlightableMixin,"EmptyButtonMorph"),window.EmptyButtonMorph.prototype.target=nil,window.EmptyButtonMorph.prototype.action=nil,window.EmptyButtonMorph.prototype.dataSourceMorphForTarget=nil,window.EmptyButtonMorph.prototype.morphEnv=nil,window.EmptyButtonMorph.prototype.doubleClickAction=nil,window.EmptyButtonMorph.prototype.argumentToAction1=nil,window.EmptyButtonMorph.prototype.argumentToAction2=nil,window.EmptyButtonMorph.prototype.toolTipMessage=nil,window.EmptyButtonMorph.prototype.ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked=!0,window.EmptyButtonMorph.prototype.representsAMorph=!1,window.EmptyButtonMorph.prototype.padding=0,window.EmptyButtonMorph.prototype.color=new Color(255,255,255),window.EmptyButtonMorph.prototype.doLayout=function(newBoundsForThisLayout){var ref;return window.recalculatingLayouts,null==newBoundsForThisLayout&&(null!=this.desiredExtent?(newBoundsForThisLayout=this.desiredExtent,this.desiredExtent=nil):newBoundsForThisLayout=this.extent(),null!=this.desiredPosition?(newBoundsForThisLayout=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(newBoundsForThisLayout),this.desiredPosition=nil):newBoundsForThisLayout=new Rectangle(this.position()).setBoundsWidthAndHeight(newBoundsForThisLayout)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(this.rawSetBounds(newBoundsForThisLayout),(null!=(ref=this.faceMorph)?ref.parent:void 0)===this&&this.faceMorph.rawSetBounds(newBoundsForThisLayout.insetBy(this.padding)),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted())},window.EmptyButtonMorph.prototype.getTextDescription=function(){},window.EmptyButtonMorph.prototype.trigger=function(){null!=this.action&&""!==this.action&&this.target[this.action].call(this.target,this.dataSourceMorphForTarget,this.morphEnv,this.argumentToAction1,this.argumentToAction2)},window.EmptyButtonMorph.prototype.triggerDoubleClick=function(){if(this.doubleClickAction)return this.target[this.doubleClickAction]()},window.EmptyButtonMorph.prototype.mouseClickLeft=function(){return this.ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked&&this.propagateKillPopUps(),this.trigger(),this.escalateEvent("mouseClickLeft")},window.EmptyButtonMorph.prototype.mouseDoubleClick=function(){return this.triggerDoubleClick()},window.EmptyButtonMorph.prototype.rejectDrags=function(){return!(this.parent instanceof WorldMorph)&&this.defaultRejectDrags},window.SimpleRectangularButtonMorph=function(ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked=!0,target=nil,action=nil,faceMorph=nil,dataSourceMorphForTarget=nil,morphEnv,toolTipMessage=nil,doubleClickAction=nil,argumentToAction1=nil,argumentToAction2=nil,representsAMorph=!1){this.ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked=ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked,this.target=target,this.action=action,this.faceMorph=faceMorph,this.dataSourceMorphForTarget=dataSourceMorphForTarget,this.morphEnv=morphEnv,this.toolTipMessage=toolTipMessage,this.doubleClickAction=doubleClickAction,this.argumentToAction1=argumentToAction1,this.argumentToAction2=argumentToAction2,this.representsAMorph=representsAMorph,SimpleRectangularButtonMorph.__super__.constructor.apply(this,arguments),this.appearance=new RectangularAppearance(this),this.strokeColor=new Color(196,195,196),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleRectangularButtonMorph,"name",{value:"SimpleRectangularButtonMorph"}),window.SimpleRectangularButtonMorph.instances=[],window.SimpleRectangularButtonMorph.__super__=window.EmptyButtonMorph.prototype,window.SimpleRectangularButtonMorph=extend(window.SimpleRectangularButtonMorph,window.EmptyButtonMorph),window.CodeInjectingSimpleRectangularButtonMorph=function(morphToBeNotifiedForNewCode,morphWhereToInject,face){this.morphToBeNotifiedForNewCode=morphToBeNotifiedForNewCode,this.morphWhereToInject=morphWhereToInject,CodeInjectingSimpleRectangularButtonMorph.__super__.constructor.call(this,!0,this,"injectCodeIntoTarget",face),this.strokeColor=new Color(0,0,0),this.setColor(new Color(150,150,150)),this.toolTipMessage=face.toolTipMessage,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CodeInjectingSimpleRectangularButtonMorph,"name",{value:"CodeInjectingSimpleRectangularButtonMorph"}),window.CodeInjectingSimpleRectangularButtonMorph.instances=[],window.CodeInjectingSimpleRectangularButtonMorph.__super__=window.SimpleRectangularButtonMorph.prototype,window.CodeInjectingSimpleRectangularButtonMorph=extend(window.CodeInjectingSimpleRectangularButtonMorph,window.SimpleRectangularButtonMorph),window.CodeInjectingSimpleRectangularButtonMorph.prototype.sourceCodeToBeInjected="",window.CodeInjectingSimpleRectangularButtonMorph.prototype.morphWhereToInject=nil,window.CodeInjectingSimpleRectangularButtonMorph.prototype.morphToBeNotifiedForNewCode=nil,window.CodeInjectingSimpleRectangularButtonMorph.prototype.editInjectableSource=function(){return this.textPrompt("Code",this,"modifyCodeToBeInjected",this.sourceCodeToBeInjected)},window.CodeInjectingSimpleRectangularButtonMorph.prototype.injectCodeIntoTarget=function(){return this.morphWhereToInject.injectProperties(this.sourceCodeToBeInjected)},window.CodeInjectingSimpleRectangularButtonMorph.prototype.modifyCodeToBeInjected=function(unused,textMorph){var base;return this.sourceCodeToBeInjected=textMorph.text,"function"==typeof(base=this.morphToBeNotifiedForNewCode).newCodeToInjectFromButton?base.newCodeToInjectFromButton(this):void 0},window.CodePromptMorph=function(msg,target,callback,defaultContents){this.msg=msg,this.target=target,this.callback=callback,this.defaultContents=defaultContents,CodePromptMorph.__super__.constructor.call(this,new Point(200,400)),this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CodePromptMorph,"name",{value:"CodePromptMorph"}),window.CodePromptMorph.instances=[],window.CodePromptMorph.__super__=window.Widget.prototype,window.CodePromptMorph=extend(window.CodePromptMorph,window.Widget),window.CodePromptMorph.prototype.tempPromptEntryField=nil,window.CodePromptMorph.prototype.defaultContents="",window.CodePromptMorph.prototype.textMorph=nil,window.CodePromptMorph.prototype.cancelButton=nil,window.CodePromptMorph.prototype.saveButton=nil,window.CodePromptMorph.prototype.okButton=nil,window.CodePromptMorph.prototype.saveTextWdgt=nil,window.CodePromptMorph.prototype.externalPadding=0,window.CodePromptMorph.prototype.internalPadding=5,window.CodePromptMorph.prototype.colloquialName=function(){return"Edit tool code"},window.CodePromptMorph.prototype.buildAndConnectChildren=function(){return"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.tempPromptEntryField=new SimplePlainTextScrollPanelWdgt(this.defaultContents,!1,5),this.tempPromptEntryField.disableDrops(),this.tempPromptEntryField.contents.disableDrops(),this.tempPromptEntryField.color=new Color(255,255,255),this.tempPromptEntryField.addModifiedContentIndicator(),this.tempPromptEntryField.widgetToBeNotifiedOfTextModificationChange=this,this.textMorph=this.tempPromptEntryField.textWdgt,this.textMorph.backgroundColor=new Color(0,0,0,0),this.textMorph.setFontName(nil,nil,this.textMorph.monoFontStack),this.textMorph.isEditable=!0,this.textMorph.enableSelecting(),this.add(this.tempPromptEntryField),this.cancelButton=new SimpleButtonMorph(!0,this,"close","cancel"),this.add(this.cancelButton),this.saveTextWdgt=new StringMorph2("save",WorldMorph.preferencesAndSettings.textInButtonsFontSize),this.saveTextWdgt.alignCenter(),this.saveButton=new SimpleButtonMorph(!0,this,"informTarget",this.saveTextWdgt),this.add(this.saveButton),this.okButton=new SimpleButtonMorph(!0,this,"notifyTargetAndClose","ok"),this.add(this.okButton),this.tempPromptEntryField.checkIfTextContentWasModifiedFromTextAtStart(),this.invalidateLayout()},window.CodePromptMorph.prototype.textContentModified=function(){return this.saveTextWdgt.setColor(new Color(0,0,0))},window.CodePromptMorph.prototype.textContentUnmodified=function(){return this.saveTextWdgt.setColor(new Color(200,200,200))},window.CodePromptMorph.prototype.informTarget=function(){return this.target[this.callback].call(this.target,nil,this.textMorph),this.textMorph.considerCurrentTextAsReferenceText(),this.tempPromptEntryField.checkIfTextContentWasModifiedFromTextAtStart()},window.CodePromptMorph.prototype.notifyTargetAndClose=function(){return this.informTarget(),this.close()},window.CodePromptMorph.prototype.doLayout=function(newBoundsForThisLayout){var buttonBounds,eachButtonWidth,textBottom,textHeight;return window.recalculatingLayouts,this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(CodePromptMorph.__super__.doLayout.apply(this,arguments),trackChanges.push(!1),textHeight=this.height()-2*this.externalPadding-this.internalPadding-15,textBottom=this.top()+this.externalPadding+textHeight,this.tempPromptEntryField.parent===this&&(this.tempPromptEntryField.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.top()+this.externalPadding)),this.tempPromptEntryField.rawSetExtent(new Point(this.width()-2*this.externalPadding,textHeight))),eachButtonWidth=(this.width()-2*this.externalPadding-3*this.internalPadding-WorldMorph.preferencesAndSettings.handleSize)/3,this.cancelButton.parent===this&&(buttonBounds=(buttonBounds=new Rectangle(new Point(this.left()+this.externalPadding+0*(eachButtonWidth+this.internalPadding),textBottom+this.internalPadding))).setBoundsWidthAndHeight(eachButtonWidth,15),this.cancelButton.doLayout(buttonBounds)),this.saveButton.parent===this&&(buttonBounds=(buttonBounds=new Rectangle(new Point(this.left()+this.externalPadding+1*(eachButtonWidth+this.internalPadding),textBottom+this.internalPadding))).setBoundsWidthAndHeight(eachButtonWidth,15),this.saveButton.doLayout(buttonBounds)),this.okButton.parent===this&&(buttonBounds=(buttonBounds=new Rectangle(new Point(this.left()+this.externalPadding+2*(eachButtonWidth+this.internalPadding),textBottom+this.internalPadding))).setBoundsWidthAndHeight(eachButtonWidth,15),this.okButton.doLayout(buttonBounds)),trackChanges.pop(),this.fullChanged(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted())};var ControllerMixin;ControllerMixin={onceAddedClassProperties:function(fromClass){return this.addInstanceProperties(fromClass,{openTargetSelector:function(){var choices,menu;return(choices=world.plausibleTargetAndDestinationMorphs(this)).length>0?(menu=new MenuMorph(this,!1,this,!0,!0,"choose target:"),choices.forEach(each=>{if(!(each instanceof FanoutPinWdgt))return menu.addMenuItem(each.toString().replace("Wdgt","").slice(0,50)+" ➜",!1,this,"openTargetPropertySelector",nil,nil,nil,nil,nil,each,nil,!0)})):menu=new MenuMorph(this,!1,this,!0,!0,"no targets available"),menu.popUpAtHand()},setTargetAndActionWithOnesPickedFromMenu:function(ignored,ignored2,theTarget,each){return this.target=theTarget,this.action=each,null!=this.target[this.action+"IsConnected"]&&(this.target[this.action+"IsConnected"]=!0),this.connectionsCalculationToken=getRandomInt(-2e4,2e4),"function"==typeof this.reactToTargetConnection?this.reactToTargetConnection():void 0}})}};var BackBufferMixin;BackBufferMixin={onceAddedClassProperties:function(fromClass){return this.addInstanceProperties(fromClass,{backBuffer:nil,backBufferContext:nil,backBufferContext_isDerivedValue:!0,calculateKeyValues:function(aContext,clippingRectangle){var al,area,at,delta,h,sl,src,st,w;return(area=clippingRectangle.intersect(this.boundingBox()).round()).isNotEmpty()&&(delta=this.position().neg(),sl=(src=area.translateBy(delta).round()).left()*pixelRatio,st=src.top()*pixelRatio,al=area.left()*pixelRatio,at=area.top()*pixelRatio,w=Math.min(src.width()*pixelRatio,this.backBuffer.width-sl),h=Math.min(src.height()*pixelRatio,this.backBuffer.height-st)),[area,sl,st,al,at,w,h]},isTransparentAt:function(aPoint){return this.bounds.debugIfFloats(),!!this.boundsContainPoint(aPoint)&&(!this.texture&&0===this.getPixelColor(aPoint).a)},getPixelColor:function(aPoint){var data,point;return[this.backBuffer,this.backBufferContext]=this.createRefreshOrGetBackBuffer(),point=aPoint.toLocalCoordinatesOf(this),data=this.backBufferContext.getImageData(point.x*pixelRatio,point.y*pixelRatio,1,1),new Color(data.data[0],data.data[1],data.data[2],data.data[3])},paintIntoAreaOrBlitFromBackBuffer:function(aContext,clippingRectangle,appliedShadow){var al,area,at,h,sl,st,w;return"function"==typeof this.justBeforeBeingPainted&&this.justBeforeBeingPainted(),!this.visibleBasedOnIsVisibleProperty()||this.isCollapsed()?nil:([this.backBuffer,this.backBufferContext]=this.createRefreshOrGetBackBuffer(),null==this.backBuffer?nil:([area,sl,st,al,at,w,h]=this.calculateKeyValues(aContext,clippingRectangle),area.isNotEmpty()?w<1||h<1?nil:(aContext.save(),aContext.globalAlpha=(null!=appliedShadow?appliedShadow.alpha:1)*this.alpha,aContext.drawImage(this.backBuffer,Math.round(sl),Math.round(st),Math.round(w),Math.round(h),Math.round(al),Math.round(at),Math.round(w),Math.round(h)),aContext.restore(),this.paintHighlight(aContext,al,at,w,h)):void 0))}})}},window.ColorPaletteMorph=function(target=nil,sizePoint){this.target=target,ColorPaletteMorph.__super__.constructor.call(this),this.silentRawSetExtent(sizePoint||new Point(80,50)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ColorPaletteMorph,"name",{value:"ColorPaletteMorph"}),window.ColorPaletteMorph.instances=[],window.ColorPaletteMorph.__super__=window.Widget.prototype,window.ColorPaletteMorph=extend(window.ColorPaletteMorph,window.Widget),window.ColorPaletteMorph.augmentWith(window.ControllerMixin,"ColorPaletteMorph"),window.ColorPaletteMorph.augmentWith(window.BackBufferMixin,"ColorPaletteMorph"),window.ColorPaletteMorph.prototype.target=nil,window.ColorPaletteMorph.prototype.action=nil,window.ColorPaletteMorph.prototype.argumentToAction=nil,window.ColorPaletteMorph.prototype.choice=nil,window.ColorPaletteMorph.prototype.colloquialName=function(){return"color palette"},window.ColorPaletteMorph.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return this.layoutSpecDetails=new WindowContentLayoutSpec(PreferredSize.DONT_MIND,PreferredSize.DONT_MIND,1)},window.ColorPaletteMorph.prototype.detachesWhenDragged=function(){return!1},window.ColorPaletteMorph.prototype.createRefreshOrGetBackBuffer=function(){var backBuffer,backBufferContext,cacheEntry,cacheHit,cacheKey,extent,h,i,j,l,ref,ref1,x,y;if(cacheKey=this.constructor.name+"-"+this.extent().toString(),null!=(cacheHit=world.cacheForImmutableBackBuffers.get(cacheKey)))return cacheHit;for(extent=this.extent(),(backBufferContext=(backBuffer=newCanvas(extent.scaleBy(pixelRatio))).getContext("2d")).scale(pixelRatio,pixelRatio),this.choice=new Color,x=i=0,ref=extent.x;0<=ref?i<=ref:i>=ref;x=0<=ref?++i:--i)for(h=360*x/extent.x,y=0,y=j=0,ref1=extent.y;0<=ref1?j<=ref1:j>=ref1;y=0<=ref1?++j:--j)l=100-y/extent.y*100,backBufferContext.fillStyle="hsl("+h+",100%,"+l+"%)",backBufferContext.fillRect(x,y,1,1);return cacheEntry=[backBuffer,backBufferContext],world.cacheForImmutableBackBuffers.set(cacheKey,cacheEntry),cacheEntry},window.ColorPaletteMorph.prototype.nonFloatDragging=function(nonFloatDragPositionWithinMorphAtStart,pos,deltaDragFromPreviousCall){return this.choice=this.getPixelColor(pos.add(deltaDragFromPreviousCall||new Point(0,0))),this.connectionsCalculationToken=getRandomInt(-2e4,2e4),this.updateTarget()},window.ColorPaletteMorph.prototype.mouseDownLeft=function(pos){return this.choice=this.getPixelColor(pos),this.connectionsCalculationToken=getRandomInt(-2e4,2e4),this.updateTarget()},window.ColorPaletteMorph.prototype.stringSetters=function(menuEntriesStrings,functionNamesStrings){return[menuEntriesStrings,functionNamesStrings]=ColorPaletteMorph.__super__.stringSetters.call(this,menuEntriesStrings,functionNamesStrings),menuEntriesStrings.push("bang!"),functionNamesStrings.push("bang"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.ColorPaletteMorph.prototype.numericalSetters=function(menuEntriesStrings,functionNamesStrings){return[menuEntriesStrings,functionNamesStrings]=ColorPaletteMorph.__super__.numericalSetters.call(this,menuEntriesStrings,functionNamesStrings),menuEntriesStrings.push("bang!"),functionNamesStrings.push("bang"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.ColorPaletteMorph.prototype.colorSetters=function(menuEntriesStrings,functionNamesStrings){return[menuEntriesStrings,functionNamesStrings]=ColorPaletteMorph.__super__.colorSetters.call(this,menuEntriesStrings,functionNamesStrings),menuEntriesStrings.push("bang!"),functionNamesStrings.push("bang"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.ColorPaletteMorph.prototype.bang=function(newvalue,ignored,connectionsCalculationToken,superCall){if(null!=this.choice&&(superCall||connectionsCalculationToken!==this.connectionsCalculationToken))return this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.updateTarget()},window.ColorPaletteMorph.prototype.updateTarget=function(){null!=this.target&&(null==this.action&&(this.action="setColor"),this.target[this.action].call(this.target,this.choice,nil,this.connectionsCalculationToken))},window.ColorPaletteMorph.prototype.reactToTargetConnection=function(){},window.ColorPaletteMorph.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){return ColorPaletteMorph.__super__.addMorphSpecificMenuEntries.apply(this,arguments),menu.addLine(),menu.addMenuItem("set target",!0,this,"openTargetSelector","choose another morph\nwhose color property\n will be controlled by this one")},window.ColorPaletteMorph.prototype.openTargetPropertySelector=function(ignored,ignored2,theTarget){var functionNamesStrings,i,j,menu,menuEntriesStrings,ref;for([menuEntriesStrings,functionNamesStrings]=theTarget.colorSetters(),menu=new MenuMorph(this,!1,this,!0,!0,"choose target property:"),i=j=0,ref=menuEntriesStrings.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j)menu.addMenuItem(menuEntriesStrings[i],!0,this,"setTargetAndActionWithOnesPickedFromMenu",nil,nil,nil,nil,nil,theTarget,functionNamesStrings[i]);return 0===menuEntriesStrings.length&&(menu=new MenuMorph(this,!1,this,!0,!0,"no target properties available")),menu.popUpAtHand()},window.ColorPickerMorph=function(choice=new Color(255,255,255)){this.choice=choice,ColorPickerMorph.__super__.constructor.call(this),this.appearance=new RectangularAppearance(this),this.color=new Color(255,255,255),this.rawSetExtent(new Point(80,80)),this.buildSubmorphs(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ColorPickerMorph,"name",{value:"ColorPickerMorph"}),window.ColorPickerMorph.instances=[],window.ColorPickerMorph.__super__=window.Widget.prototype,window.ColorPickerMorph=extend(window.ColorPickerMorph,window.Widget),window.ColorPickerMorph.prototype.feedback=nil,window.ColorPickerMorph.prototype.choice=nil,window.ColorPickerMorph.prototype.colorPalette=nil,window.ColorPickerMorph.prototype.grayPalette=nil,window.ColorPickerMorph.prototype.colloquialName=function(){return"color picker"},window.ColorPickerMorph.prototype.buildSubmorphs=function(){return this.feedback=new RectangleMorph(new Point(20,20),this.choice),this.colorPalette=new ColorPaletteMorph(this.feedback,new Point(this.width(),50)),this.grayPalette=new GrayPaletteMorph(this.feedback,new Point(this.width(),5)),this.add(this.colorPalette),this.add(this.grayPalette),this.add(this.feedback),this.invalidateLayout()},window.ColorPickerMorph.prototype.iHaveBeenAddedTo=function(whereTo,beingDropped){},window.ColorPickerMorph.prototype.getColor=function(){return this.feedback.color},window.ColorPickerMorph.prototype.rawSetExtent=function(aPoint){return ColorPickerMorph.__super__.rawSetExtent.apply(this,arguments),this.invalidateLayout()},window.ColorPickerMorph.prototype.doLayout=function(newBoundsForThisLayout){var x,y;return window.recalculatingLayouts,null==newBoundsForThisLayout&&(null!=this.desiredExtent?(newBoundsForThisLayout=this.desiredExtent,this.desiredExtent=nil):newBoundsForThisLayout=this.extent(),null!=this.desiredPosition?(newBoundsForThisLayout=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(newBoundsForThisLayout),this.desiredPosition=nil):newBoundsForThisLayout=new Rectangle(this.position()).setBoundsWidthAndHeight(newBoundsForThisLayout)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(trackChanges.push(!1),this.rawSetBounds(newBoundsForThisLayout),this.colorPalette.fullRawMoveTo(this.position()),this.colorPalette.rawSetExtent(new Point(this.width(),Math.round(.625*this.height()))),this.grayPalette.fullRawMoveTo(this.colorPalette.bottomLeft()),this.grayPalette.rawSetExtent(new Point(this.width(),Math.round(.0625*this.height()))),x=this.grayPalette.left()+Math.floor((this.grayPalette.width()-this.feedback.width())/2),y=this.grayPalette.bottom()+Math.floor((this.bottom()-this.grayPalette.bottom()-this.feedback.height())/2),this.feedback.fullRawMoveTo(new Point(x,y)),this.feedback.rawSetExtent(new Point(Math.min(this.width(),Math.round(.25*this.height())),Math.round(.25*this.height()))),trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0)},window.RectangularAppearance=function(){window.RectangularAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.RectangularAppearance,"name",{value:"RectangularAppearance"}),window.RectangularAppearance.instances=[],window.RectangularAppearance.__super__=window.Appearance.prototype,window.RectangularAppearance=extend(window.RectangularAppearance,window.Appearance),window.RectangularAppearance.prototype.isTransparentAt=function(aPoint){return!this.morph.boundingBoxTight().containsPoint(aPoint)&&!(null!=this.morph.backgroundTransparency&&null!=this.morph.backgroundColor&&this.morph.backgroundTransparency>0&&this.morph.boundsContainPoint(aPoint))},window.RectangularAppearance.prototype.paintHighlight=function(aContext,al,at,w,h){},window.RectangularAppearance.prototype.paintIntoAreaOrBlitFromBackBuffer=function(aContext,clippingRectangle,appliedShadow){var al,area,at,base,color,h,sl,st,toBePainted,w;return this.morph.preliminaryCheckNothingToDraw(clippingRectangle,aContext)?nil:([area,sl,st,al,at,w,h]=this.morph.calculateKeyValues(aContext,clippingRectangle),area.isNotEmpty()?w<1||h<1?nil:("function"==typeof(base=this.morph).justBeforeBeingPainted&&base.justBeforeBeingPainted(),aContext.save(),aContext.globalAlpha=(null!=appliedShadow?appliedShadow.alpha:1)*this.morph.alpha,aContext.fillStyle=this.morph.color.toString(),this.morph.color,toBePainted=new Rectangle(al,at,al+w,at+h),null!=this.morph.backgroundColor&&(color=this.morph.backgroundColor,null!=appliedShadow&&(color="black"),this.morph.paintRectangle(aContext,toBePainted.left(),toBePainted.top(),toBePainted.width(),toBePainted.height(),color)),toBePainted=toBePainted.intersect(this.morph.boundingBoxTight().scaleBy(pixelRatio)),color=this.morph.color,null!=appliedShadow&&(color="black"),this.morph.paintRectangle(aContext,toBePainted.left(),toBePainted.top(),toBePainted.width(),toBePainted.height(),color),"function"==typeof this.drawAdditionalPartsOnBaseShape&&this.drawAdditionalPartsOnBaseShape(!1,!1,appliedShadow,aContext,al,at,w,h),null==appliedShadow&&this.paintStroke(aContext,clippingRectangle),aContext.restore(),this.paintHighlight(aContext,al,at,w,h)):void 0)},window.RectangularAppearance.prototype.paintStroke=function(aContext,clippingRectangle){var al,area,at,base,h,sl,st,toBePainted,w;return this.morph.preliminaryCheckNothingToDraw(clippingRectangle,aContext)?nil:([area,sl,st,al,at,w,h]=this.morph.calculateKeyValues(aContext,clippingRectangle),area.isNotEmpty()?w<1||h<1?nil:("function"==typeof(base=this.morph).justBeforeBeingPainted&&base.justBeforeBeingPainted(),aContext.save(),toBePainted=new Rectangle(al,at,al+w,at+h),toBePainted=toBePainted.intersect(this.morph.boundingBoxTight().scaleBy(pixelRatio)),null!=this.morph.strokeColor&&(aContext.beginPath(),aContext.rect(Math.round(toBePainted.left()),Math.round(toBePainted.top()),Math.round(toBePainted.width()),Math.round(toBePainted.height())),aContext.clip(),aContext.globalAlpha=this.morph.alpha,aContext.lineWidth=1,aContext.strokeStyle=this.morph.strokeColor.toString(),aContext.strokeRect(Math.round(this.morph.left()*pixelRatio)+.5,Math.round(this.morph.top()*pixelRatio)+.5,Math.round(this.morph.width()*pixelRatio)-1,Math.round(this.morph.height()*pixelRatio)-1)),aContext.restore()):void 0)},window.DesktopAppearance=function(){window.DesktopAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DesktopAppearance,"name",{value:"DesktopAppearance"}),window.DesktopAppearance.instances=[],window.DesktopAppearance.__super__=window.RectangularAppearance.prototype,window.DesktopAppearance=extend(window.DesktopAppearance,window.RectangularAppearance),window.DesktopAppearance.prototype.currentPattern=nil,window.DesktopAppearance.prototype.paintIntoAreaOrBlitFromBackBuffer=function(aContext,clippingRectangle,appliedShadow){var al,area,at,base,color,h,pctx,sl,st,toBePainted,w;if(this.morph.preliminaryCheckNothingToDraw(clippingRectangle,aContext))return nil;if(null!=this.morph.patternName&&this.morph.patternName===this.morph.pattern1&&(this.currentPattern=this.morph.patternName,this.pattern=nil),null!=this.morph.patternName&&this.morph.patternName!==this.currentPattern){switch(this.currentPattern=this.morph.patternName,this.pattern=document.createElement("canvas"),this.pattern.width=5*pixelRatio,this.pattern.height=5*pixelRatio,(pctx=this.pattern.getContext("2d")).scale(pixelRatio,pixelRatio),this.morph.patternName){case this.morph.pattern2:pctx.fillStyle="rgb(235, 235, 235)",pctx.fillRect(0,0,5,5),pctx.lineWidth=.25,pctx.beginPath(),pctx.arc(2,2,2,0,2*Math.PI),pctx.fillStyle="rgb(225, 225, 225)",pctx.strokeStyle="rgb(190, 190, 190)",pctx.fill(),pctx.stroke();break;case this.morph.pattern3:pctx.fillStyle="rgb(230, 236, 241)",pctx.fillRect(0,0,5,5),pctx.lineWidth=.25,pctx.moveTo(1,0),pctx.lineTo(1,5),pctx.strokeStyle="rgb(166, 183, 194)",pctx.stroke();break;case this.morph.pattern4:pctx.fillStyle="rgb(230, 230, 230)",pctx.fillRect(0,0,5,5),pctx.lineWidth=.25,pctx.moveTo(0,5),pctx.lineTo(5,0),pctx.strokeStyle="rgb(166, 166, 166)",pctx.stroke();break;case this.morph.pattern5:pctx.fillStyle="rgb(230, 230, 230)",pctx.fillRect(0,0,5,5),pctx.lineWidth=.25,pctx.moveTo(2,2),pctx.lineTo(4,4),pctx.strokeStyle="rgb(166, 166, 166)",pctx.stroke();break;case this.morph.pattern6:pctx.fillStyle="rgb(230, 230, 230)",pctx.fillRect(0,0,5,5),pctx.lineWidth=.25,pctx.moveTo(0,0),pctx.lineTo(3,3),pctx.lineTo(5,0),pctx.strokeStyle="rgb(166, 166, 166)",pctx.stroke();break;case this.morph.pattern7:pctx.fillStyle="rgb(230, 230, 230)",pctx.fillRect(0,0,5,5),pctx.lineWidth=.25,pctx.moveTo(0,5),pctx.lineTo(5,0),pctx.moveTo(2.5,2.5),pctx.lineTo(0,0),pctx.strokeStyle="rgb(166, 166, 166)",pctx.stroke()}this.pattern=aContext.createPattern(this.pattern,"repeat")}return[area,sl,st,al,at,w,h]=this.morph.calculateKeyValues(aContext,clippingRectangle),area.isNotEmpty()?w<1||h<1?nil:("function"==typeof(base=this.morph).justBeforeBeingPainted&&base.justBeforeBeingPainted(),aContext.save(),aContext.globalAlpha=(null!=appliedShadow?appliedShadow.alpha:1)*this.morph.alpha,aContext.fillStyle=this.morph.color.toString(),this.morph.color,toBePainted=new Rectangle(al,at,al+w,at+h),null!=this.morph.backgroundColor&&(color=this.morph.backgroundColor,null!=appliedShadow&&(color="black"),this.morph.paintRectangle(aContext,toBePainted.left(),toBePainted.top(),toBePainted.width(),toBePainted.height(),color)),toBePainted=toBePainted.intersect(this.morph.boundingBoxTight().scaleBy(pixelRatio)),color=this.morph.color,null!=appliedShadow&&(color="black"),this.morph.paintRectangle(aContext,toBePainted.left(),toBePainted.top(),toBePainted.width(),toBePainted.height(),color),"function"==typeof this.drawAdditionalPartsOnBaseShape&&this.drawAdditionalPartsOnBaseShape(!1,!1,appliedShadow,aContext,al,at,w,h),null==appliedShadow&&this.paintStroke(aContext,clippingRectangle),null!=this.pattern&&(aContext.fillStyle=this.pattern,aContext.fillRect(toBePainted.left(),toBePainted.top(),toBePainted.width(),toBePainted.height())),aContext.restore(),this.paintHighlight(aContext,al,at,w,h)):void 0};var UpperRightInternalHaloMixin;UpperRightInternalHaloMixin={onceAddedClassProperties:function(fromClass){return this.addInstanceProperties(fromClass,{isLockingToPanels:!1,proportionOfParent:.5,fixedSize:0,positionWithinParent:"topRight",parentHasReLayouted:function(){return this.updateResizerPosition(),this.moveInFrontOfSiblings(),window[this[arguments.callee.name+"_class_injected_in"]].__super__[arguments.callee.name].apply(this,arguments)},updateResizerPosition:function(){if(this.parent)return this.silentUpdateResizerPosition(),this.changed()},silentUpdateResizerPosition:function(){var minDim,xDim,yDim;if(this.parent){if(xDim=this.parent.width(),yDim=this.parent.height(),minDim=Math.min(xDim,yDim)*this.proportionOfParent+this.fixedSize,this.silentRawSetExtent(new Point(minDim,minDim)),"topLeft"===this.positionWithinParent)return this.silentFullRawMoveTo(new Point(this.parent.left(),this.parent.top()));if("topRight"===this.positionWithinParent)return this.silentFullRawMoveTo(new Point(this.parent.right()-minDim,this.parent.top()))}},makeSolidWithParentMorph:function(ignored,ignored2,morphAttachedTo){return morphAttachedTo.add(this),this.updateResizerPosition(),this.noticesTransparentClick=!0},attach:function(){var choices,menu;if(choices=world.plausibleTargetAndDestinationMorphs(this),menu=new MenuMorph(this,!1,this,!0,!0,"choose parent:"),choices.length>0?choices.forEach(each=>menu.addMenuItem(each.toString().slice(0,50)+" ➜",!0,this,"makeSolidWithParentMorph",nil,nil,nil,nil,nil,each,nil,!0)):menu=new MenuMorph(this,!1,this,!0,!0,"no morphs to attach to"),choices.length)return menu.popUpAtHand()}})}},window.UpperRightTriangle=function(parent=nil,proportionOfParent=.5){var size;this.proportionOfParent=proportionOfParent,UpperRightTriangle.__super__.constructor.call(this),this.appearance=new UpperRightTriangleAppearance(this),this.noticesTransparentClick=!1,size=WorldMorph.preferencesAndSettings.handleSize,this.silentRawSetExtent(new Point(size,size)),parent&&parent.add(this),this.updateResizerPosition(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.UpperRightTriangle,"name",{value:"UpperRightTriangle"}),window.UpperRightTriangle.instances=[],window.UpperRightTriangle.__super__=window.Widget.prototype,window.UpperRightTriangle=extend(window.UpperRightTriangle,window.Widget),window.UpperRightTriangle.augmentWith(window.UpperRightInternalHaloMixin,"UpperRightTriangle"),window.UpperRightTriangleIconicButton=function(parent=nil){UpperRightTriangleIconicButton.__super__.constructor.apply(this,arguments),this.pencilIconMorph=new PencilIconMorph(new Color(0,0,0)),this.pencilIconMorph.parentHasReLayouted=function(){return this.updateResizerPosition(),this.moveInFrontOfSiblings()},this.pencilIconMorph.updateResizerPosition=function(){if(this.parent)return this.silentUpdateResizerPosition(),this.changed()},this.pencilIconMorph.silentUpdateResizerPosition=function(){var minDim,xDim,yDim;if(this.parent)return xDim=this.parent.width(),yDim=this.parent.height(),minDim=Math.min(xDim,yDim)/2,this.silentRawSetExtent(new Point(minDim,minDim)),this.silentFullRawMoveTo(new Point(this.parent.right()-minDim,this.parent.top()))},this.add(this.pencilIconMorph),this.pencilIconMorph.updateResizerPosition(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.UpperRightTriangleIconicButton,"name",{value:"UpperRightTriangleIconicButton"}),window.UpperRightTriangleIconicButton.instances=[],window.UpperRightTriangleIconicButton.__super__=window.UpperRightTriangle.prototype,window.UpperRightTriangleIconicButton=extend(window.UpperRightTriangleIconicButton,window.UpperRightTriangle),window.UpperRightTriangleIconicButton.augmentWith(window.HighlightableMixin,"UpperRightTriangleIconicButton"),window.UpperRightTriangleIconicButton.prototype.color=new Color(255,255,255),window.UpperRightTriangleIconicButton.prototype.pencilIconMorph=nil,window.EditableMarkMorph=function(parent=nil,editObject,editMethodAsString){this.editObject=editObject,this.editMethodAsString=editMethodAsString,EditableMarkMorph.__super__.constructor.call(this,parent),this.toolTipMessage="edit code for the tool","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.EditableMarkMorph,"name",{value:"EditableMarkMorph"}),window.EditableMarkMorph.instances=[],window.EditableMarkMorph.__super__=window.UpperRightTriangleIconicButton.prototype,window.EditableMarkMorph=extend(window.EditableMarkMorph,window.UpperRightTriangleIconicButton),window.EditableMarkMorph.prototype.editObject=nil,window.EditableMarkMorph.prototype.editMethodAsString="",window.EditableMarkMorph.prototype.mouseClickLeft=function(){return this.editObject[this.editMethodAsString].call(this.editObject)};var ClippingAtRectangularBoundsMixin;ClippingAtRectangularBoundsMixin={onceAddedClassProperties:function(fromClass){return this.addInstanceProperties(fromClass,{clipsAtRectangularBounds:!0,plausibleTargetAndDestinationMorphs:function(theMorph){var result;return result=[],!this.visibleBasedOnIsVisibleProperty()||this.isCollapsed()||theMorph.isAncestorOf(this)||!this.areBoundsIntersecting(theMorph)||this.anyParentPopUpMarkedForClosure()||(result=[this]),this.areBoundsIntersecting(theMorph)&&this.children.forEach(function(child){return result=result.concat(child.plausibleTargetAndDestinationMorphs(theMorph))}),result},invalidateFullBoundsCache:function(morphCalling){if(morphCalling===this)return window[this[arguments.callee.name+"_class_injected_in"]].__super__[arguments.callee.name].call(this,this)},invalidateFullClippedBoundsCache:function(morphCalling){if(morphCalling===this)return window[this[arguments.callee.name+"_class_injected_in"]].__super__[arguments.callee.name].call(this,this)},SLOWfullBounds:function(){return this.bounds},SLOWfullClippedBounds:function(){return this.isOrphan()||!this.visibleBasedOnIsVisibleProperty()||this.isCollapsed()?Rectangle.EMPTY:this.clippedThroughBounds()},fullBounds:function(){var result;return null!=this.cachedFullBounds?(world.doubleCheckCachedMethodsResults&&(this.cachedFullBounds.eq(this.SLOWfullBounds())||alert("fullBounds is broken (cached)")),this.cachedFullBounds):(result=this.bounds,world.doubleCheckCachedMethodsResults&&(result.eq(this.SLOWfullBounds())||alert("fullBounds is broken (uncached)")),this.cachedFullBounds=result)},fullClippedBounds:function(){var result;if(this.isOrphan()||!this.visibleBasedOnIsVisibleProperty()||this.isCollapsed())result=Rectangle.EMPTY;else{if(null!=this.cachedFullClippedBounds&&this.checkFullClippedBoundsCache===WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes)return world.doubleCheckCachedMethodsResults&&(this.cachedFullClippedBounds.eq(this.SLOWfullClippedBounds())||alert("fullClippedBounds is broken")),this.cachedFullClippedBounds;result=this.clippedThroughBounds()}return world.doubleCheckCachedMethodsResults&&(result.eq(this.SLOWfullClippedBounds())||alert("fullClippedBounds is broken")),this.checkFullClippedBoundsCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes,this.cachedFullClippedBounds=result},fullPaintIntoAreaOrBlitFromBackBuffer:function(aContext,clippingRectangle,appliedShadow){if(window[this[arguments.callee.name+"_class_injected_in"]].__super__[arguments.callee.name].apply(this,arguments),!this.preliminaryCheckNothingToDraw(clippingRectangle,aContext)&&null==appliedShadow)return this.paintStroke,this.paintStroke(aContext,clippingRectangle)},fullPaintIntoAreaOrBlitFromBackBufferContentPotentiallyAsShadow:function(aContext,clippingRectangle,appliedShadow){var dirtyPartOfFrame;if(!(dirtyPartOfFrame=this.boundingBox().intersect(clippingRectangle)).isEmpty())return aContext===world.worldCanvasContext&&this.recordDrawnAreaForNextBrokenRects(),this.paintIntoAreaOrBlitFromBackBuffer(aContext,dirtyPartOfFrame,appliedShadow),this.children.forEach(child=>child.fullPaintIntoAreaOrBlitFromBackBuffer(aContext,dirtyPartOfFrame,appliedShadow))},fullPaintIntoAreaOrBlitFromBackBufferJustShadow:function(aContext,clippingRectangle,appliedShadow){var dirtyPartOfFrame;if(clippingRectangle=clippingRectangle.translateBy(-appliedShadow.offset.x,-appliedShadow.offset.y),!this.preliminaryCheckNothingToDraw(clippingRectangle,aContext)&&!(dirtyPartOfFrame=this.boundingBox().intersect(clippingRectangle)).isEmpty())return aContext.save(),aContext.translate(appliedShadow.offset.x*pixelRatio,appliedShadow.offset.y*pixelRatio),this.paintIntoAreaOrBlitFromBackBuffer(aContext,dirtyPartOfFrame,appliedShadow),1!==this.alpha&&this.children.forEach(child=>child.fullPaintIntoAreaOrBlitFromBackBuffer(aContext,dirtyPartOfFrame,appliedShadow)),aContext.restore()},fullRawMoveBy:function(delta){return this.bounds=this.bounds.translateBy(delta),this.breakNumberOfRawMovesAndResizesCaches(),this.children.forEach(function(child){return child.silentFullRawMoveBy(delta)}),this.changed()}})}},window.PanelWdgt=function(scrollPanel=nil){this.scrollPanel=scrollPanel,PanelWdgt.__super__.constructor.call(this),this.dragsDropsAndEditingEnabled=!0,this.appearance=new RectangularAppearance(this),this.color=WorldMorph.preferencesAndSettings.defaultPanelsBackgroundColor,this.strokeColor=WorldMorph.preferencesAndSettings.defaultPanelsStrokeColor,this.scrollPanel&&(this.noticesTransparentClick=!1),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PanelWdgt,"name",{value:"PanelWdgt"}),window.PanelWdgt.instances=[],window.PanelWdgt.__super__=window.Widget.prototype,window.PanelWdgt=extend(window.PanelWdgt,window.Widget),window.PanelWdgt.augmentWith(window.ClippingAtRectangularBoundsMixin,"PanelWdgt"),window.PanelWdgt.prototype.scrollPanel=nil,window.PanelWdgt.prototype.extraPadding=0,window.PanelWdgt.prototype._acceptsDrops=!0,window.PanelWdgt.prototype.providesAmenitiesForEditing=!0,window.PanelWdgt.prototype.colloquialName=function(){return"panel"},window.PanelWdgt.prototype.makeFolder=function(ignored,ignored2,name){var newFolderWindow;return(newFolderWindow=new FolderWindowWdgt).close(),newFolderWindow.createReference(name||world.getNextUntitledFolderShortcutName(),this),world.howManyUntitledShortcuts++,newFolderWindow},window.PanelWdgt.prototype.setColor=function(aColorOrAMorphGivingAColor,morphGivingColor,connectionsCalculationToken,superCall){var aColor,ref;if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken){if(this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,aColor=PanelWdgt.__super__.setColor.call(this,aColorOrAMorphGivingAColor,morphGivingColor,connectionsCalculationToken,!0),this.scrollPanel){if(null!=(null!=(ref=this.scrollPanel.color)?ref.eq:void 0)&&this.scrollPanel.color.eq(aColor))return;this.scrollPanel.color=aColor,this.scrollPanel.changed()}return aColor}},window.PanelWdgt.prototype.setAlphaScaled=function(alphaOrMorphGivingAlpha,morphGivingAlpha){var alpha;return alpha=PanelWdgt.__super__.setAlphaScaled.call(this,alphaOrMorphGivingAlpha,morphGivingAlpha),this.scrollPanel&&this.scrollPanel.alpha!==alpha&&(this.scrollPanel.alpha=alpha),alpha},window.PanelWdgt.prototype.mouseClickLeft=function(pos,ignored_button,ignored_buttons,ignored_ctrlKey,shiftKey,ignored_altKey,ignored_metaKey){var item;if(this.bringToForeground(),null!=this.parent&&this.parent instanceof ScrollPanelWdgt&&1===this.children.filter(function(m){return!(m instanceof CaretMorph)}).length)return null!=(item=this.firstChildSuchThat(function(m){return(m instanceof TextMorph||m instanceof SimplePlainTextWdgt)&&m.isEditable}))?item.mouseClickLeft(item.bottomRight(),ignored_button,ignored_buttons,ignored_ctrlKey,shiftKey,ignored_altKey,ignored_metaKey):void 0},window.PanelWdgt.prototype.reactToDropOf=function(){var base;if(null!=this.parent&&null!=this.parent.adjustContentsBounds)return this.parent.adjustContentsBounds(),"function"==typeof(base=this.parent).adjustScrollBars?base.adjustScrollBars():void 0},window.PanelWdgt.prototype.childRemoved=function(child){var base,base1;if(null!=this.parent&&("function"==typeof(base=this.parent).grandChildRemoved&&base.grandChildRemoved(),null!=this.parent.adjustContentsBounds))return this.parent.adjustContentsBounds(),"function"==typeof(base1=this.parent).adjustScrollBars?base1.adjustScrollBars():void 0},window.PanelWdgt.prototype.childAdded=function(child){var base;if(null!=this.parent&&("function"==typeof(base=this.parent).grandChildAdded&&base.grandChildAdded(),null!=this.parent.parent&&null!=this.parent.parent.childAddedInScrollPanel))return this.parent.parent.childAddedInScrollPanel(child)},window.PanelWdgt.prototype.addInPseudoRandomPosition=function(aMorph){var height,position,posx,posy,width;if(width=this.width(),height=this.height(),posx=Math.abs(hashCode(aMorph.toString()))%width,posy=Math.abs(hashCode(aMorph.toString()+"x"))%height,position=this.position().add(new Point(posx,posy)),this.add(aMorph),aMorph.fullRawMoveTo(position),null!=this.parent&&null!=this.parent.adjustContentsBounds)return this.parent.adjustContentsBounds(),this.parent.adjustScrollBars()},window.PanelWdgt.prototype.detachesWhenDragged=function(){if(null!=this.parent)return!(this.parent instanceof ScrollPanelWdgt)&&PanelWdgt.__super__.detachesWhenDragged.apply(this,arguments)},window.PanelWdgt.prototype.grabsToParentWhenDragged=function(){return null!=this.parent&&(this.parent instanceof ScrollPanelWdgt?!this.parent.canScrollByDraggingBackground||!this.parent.anyScrollBarShowing():PanelWdgt.__super__.grabsToParentWhenDragged.apply(this,arguments))},window.PanelWdgt.prototype.reactToGrabOf=function(){var base;if(null!=this.parent&&null!=this.parent.adjustContentsBounds)return this.parent.adjustContentsBounds(),"function"==typeof(base=this.parent).adjustScrollBars?base.adjustScrollBars():void 0},window.PanelWdgt.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){if(PanelWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),this.children.length)return menu.addLine(),menu.addMenuItem("move all inside",!0,this,"keepAllSubmorphsWithin","keep all submorphs\nwithin and visible")},window.PanelWdgt.prototype.keepAllSubmorphsWithin=function(){return this.children.forEach(m=>m.fullRawMoveWithin(this))},window.PanelWdgt.prototype.editButtonPressedFromWindowBar=function(){return this.dragsDropsAndEditingEnabled?this.disableDragsDropsAndEditing(this):this.enableDragsDropsAndEditing(this)},window.ScrollPanelWdgt=function(contents,scrollBarsThickness=WorldMorph.preferencesAndSettings.scrollBarsThickness,sliderColor){this.contents=contents,this.scrollBarsThickness=scrollBarsThickness,this.sliderColor=sliderColor,this.alpha=0,ScrollPanelWdgt.__super__.constructor.call(this),null==this.contents&&(this.contents=new PanelWdgt(this)),this.addRaw(this.contents),this.color=this.contents.color,this.alpha=this.contents.alpha,this.hBar=new SliderMorph(nil,nil,nil,nil,this.sliderColor),this.hBar.rawSetHeight(this.scrollBarsThickness),this.hBar.target=this,this.addRaw(this.hBar),this.vBar=new SliderMorph(nil,nil,nil,nil,this.sliderColor),this.vBar.rawSetWidth(this.scrollBarsThickness),this.vBar.target=this,this.addRaw(this.vBar),this.hBar.target=this,this.hBar.action="adjustContentsBasedOnHBar",this.vBar.target=this,this.vBar.action="adjustContentsBasedOnVBar",this.adjustScrollBars(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ScrollPanelWdgt,"name",{value:"ScrollPanelWdgt"}),window.ScrollPanelWdgt.instances=[],window.ScrollPanelWdgt.__super__=window.PanelWdgt.prototype,window.ScrollPanelWdgt=extend(window.ScrollPanelWdgt,window.PanelWdgt),window.ScrollPanelWdgt.prototype.autoScrollTrigger=nil,window.ScrollPanelWdgt.prototype.hasVelocity=!0,window.ScrollPanelWdgt.prototype.padding=0,window.ScrollPanelWdgt.prototype.growth=0,window.ScrollPanelWdgt.prototype.isTextLineWrapping=!1,window.ScrollPanelWdgt.prototype.isScrollingByfloatDragging=!0,window.ScrollPanelWdgt.prototype.scrollBarsThickness=nil,window.ScrollPanelWdgt.prototype.contents=nil,window.ScrollPanelWdgt.prototype.vBar=nil,window.ScrollPanelWdgt.prototype.hBar=nil,window.ScrollPanelWdgt.prototype._adjustingContentsBounds=!1,window.ScrollPanelWdgt.prototype.canScrollByDraggingBackground=!1,window.ScrollPanelWdgt.prototype.canScrollByDraggingForeground=!1,window.ScrollPanelWdgt.prototype.wantsDropOf=function(aMorph){return!(this.contents instanceof FolderPanelWdgt)&&this._acceptsDrops},window.ScrollPanelWdgt.prototype.colloquialName=function(){return this.contents instanceof FolderPanelWdgt?"folder":this.contents instanceof ToolPanelWdgt?"toolbar":"scrollable panel"},window.ScrollPanelWdgt.prototype.adjustContentsBasedOnHBar=function(num){return this.contents.fullRawMoveTo(new Point(this.left()-num,this.contents.position().y)),this.adjustContentsBounds(),this.adjustScrollBars()},window.ScrollPanelWdgt.prototype.adjustContentsBasedOnVBar=function(num){return this.contents.fullRawMoveTo(new Point(this.contents.position().x,this.top()-num)),this.adjustContentsBounds(),this.adjustScrollBars()},window.ScrollPanelWdgt.prototype.setColor=function(aColorOrAMorphGivingAColor,morphGivingColor,connectionsCalculationToken,superCall){var aColor;if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,aColor=ScrollPanelWdgt.__super__.setColor.call(this,aColorOrAMorphGivingAColor,morphGivingColor,connectionsCalculationToken,!0),this.contents.setColor(aColorOrAMorphGivingAColor,morphGivingColor,connectionsCalculationToken),aColor},window.ScrollPanelWdgt.prototype.setAlphaScaled=function(alphaOrMorphGivingAlpha,morphGivingAlpha){var alpha;return alpha=ScrollPanelWdgt.__super__.setAlphaScaled.apply(this,arguments),this.contents.setAlphaScaled(alphaOrMorphGivingAlpha,morphGivingAlpha),alpha},window.ScrollPanelWdgt.prototype.anyScrollBarShowing=function(){return!!(this.hBar.visibleBasedOnIsVisibleProperty()&&!this.hBar.isCollapsed()||this.vBar.visibleBasedOnIsVisibleProperty()&&!this.vBar.isCollapsed())},window.ScrollPanelWdgt.prototype.adjustScrollBars=function(){var hWidth,spaceToLeaveOnOneSide,stopValue,vHeight;if(spaceToLeaveOnOneSide=Math.max(this.scrollBarsThickness,WorldMorph.preferencesAndSettings.handleSize)+2*this.padding,hWidth=this.width()-spaceToLeaveOnOneSide,vHeight=this.height()-spaceToLeaveOnOneSide,this.parent instanceof ListMorph||this.changed(),this.hBar.target===this&&(this.contents.width()>=this.width()+1?(this.hBar.show(),this.hBar.width()!==hWidth&&this.hBar.rawSetWidth(hWidth),this.hBar.parent===this&&this.hBar.fullRawMoveTo(new Point(this.left(),this.bottom()-this.hBar.height())),stopValue=this.contents.width()-this.width(),this.hBar.updateSpecs(0,stopValue,this.left()-this.contents.left(),this.width()/this.contents.width()*stopValue)):this.hBar.hide()),this.vBar.target===this)return this.contents.height()>=this.height()+1?(this.vBar.show(),this.vBar.height()!==vHeight&&this.vBar.rawSetHeight(vHeight),this.vBar.parent===this&&this.vBar.fullRawMoveTo(new Point(this.right()-this.vBar.width(),this.top())),stopValue=this.contents.height()-this.height(),this.vBar.updateSpecs(0,stopValue,this.top()-this.contents.top(),this.height()/this.contents.height()*stopValue)):this.vBar.hide()},window.ScrollPanelWdgt.prototype.add=function(aMorph,position=nil,layoutSpec=LayoutSpec.ATTACHEDAS_FREEFLOATING,beingDropped,unused,positionOnScreen){return aMorph instanceof ModifiedTextTriangleAnnotationWdgt?ScrollPanelWdgt.__super__.add.apply(this,arguments):(this.contents.add(aMorph,position,layoutSpec,beingDropped,nil,positionOnScreen),this.adjustContentsBounds(),this.adjustScrollBars())},window.ScrollPanelWdgt.prototype.addMany=function(widgetsToBeAdded){return this.contents.addMany(widgetsToBeAdded),this.adjustContentsBounds(),this.adjustScrollBars()},window.ScrollPanelWdgt.prototype.showResizeAndMoveHandlesAndLayoutAdjusters=function(){return ScrollPanelWdgt.__super__.showResizeAndMoveHandlesAndLayoutAdjusters.apply(this,arguments),this.adjustContentsBounds(),this.adjustScrollBars()},window.ScrollPanelWdgt.prototype.setContents=function(aMorph,extraPadding){return this.extraPadding=extraPadding,this.contents.closeChildren(),this.contents.fullRawMoveTo(this.position()),aMorph.fullRawMoveTo(this.position().add(this.padding+this.extraPadding)),this.add(aMorph)},window.ScrollPanelWdgt.prototype.rawSetExtent=function(aPoint){if(!aPoint.eq(this.extent()))return this.breakNumberOfRawMovesAndResizesCaches(),!this.isTextLineWrapping||this.contents instanceof SimpleVerticalStackPanelWdgt||this.contents.fullRawMoveTo(this.position()),ScrollPanelWdgt.__super__.rawSetExtent.call(this,aPoint),this.contents.rawSetExtent(aPoint),this.adjustContentsBounds(),this.adjustScrollBars()},window.ScrollPanelWdgt.prototype.reactToDropOf=function(){return this.adjustContentsBounds(),this.adjustScrollBars()},window.ScrollPanelWdgt.prototype.reactToGrabOf=function(){return this.adjustContentsBounds(),this.adjustScrollBars()},window.ScrollPanelWdgt.prototype.adjustContentsBounds=function(){var newBounds,padding,ref,ref1,ref2,ref3,subBounds,totalPadding;if(!this._adjustingContentsBounds)return this._adjustingContentsBounds=!0,padding=Math.floor(this.extraPadding+this.padding),totalPadding=2*padding,this.contents instanceof SimpleVerticalStackPanelWdgt?this.contents.adjustContentsBounds():this.isTextLineWrapping&&this.contents instanceof PanelWdgt&&this.contents.children.forEach(morph=>{if(morph instanceof TextMorph||morph instanceof SimplePlainTextWdgt)return morph.rawSetWidth(this.contents.width()-totalPadding),morph.maxTextWidth=this.contents.width()-totalPadding,this.contents.rawSetHeight(Math.max(morph.height(),this.height())-totalPadding)}),(subBounds=null!=(ref=this.contents.subMorphsMergedFullBounds())?ref.ceil():void 0)?(null!=this.contents.externalPadding&&(subBounds=subBounds.expandBy(this.contents.externalPadding)),this.isTextLineWrapping||this instanceof SimplePlainTextScrollPanelWdgt||this instanceof SimpleVerticalStackScrollPanelWdgt?((newBounds=(newBounds=null!=(ref1=subBounds.expandBy(padding))?ref1.ceil():void 0).merge(new Rectangle(this.contents.left(),this.contents.top(),this.contents.left()+this.width(),this.contents.top()+1))).height()<this.height()&&(newBounds=newBounds.growBy(new Point(0,this.height()-newBounds.height()))),newBounds.width()<this.width()&&(newBounds=newBounds.growBy(new Point(this.width()-newBounds.width(),0)))):newBounds=subBounds.expandBy(padding).merge(null!=(ref2=this.boundingBox())?ref2.ceil():void 0)):newBounds=null!=(ref3=this.boundingBox())?ref3.ceil():void 0,this.contents.boundingBox().eq(newBounds)||(this.contents.silentRawSetBounds(newBounds),this.contents.reLayout()),this.keepContentsInScrollPanelWdgt(),this._adjustingContentsBounds=!1},window.ScrollPanelWdgt.prototype.keepContentsInScrollPanelWdgt=function(){if(this.contents.left()>this.left()&&this.contents.fullRawMoveBy(new Point(this.left()-this.contents.left(),0)),this.contents.right()<this.right()&&this.contents.fullRawMoveBy(new Point(this.right()-this.contents.right(),0)),this.contents.top()>this.top()&&this.contents.fullRawMoveBy(new Point(0,this.top()-this.contents.top())),this.contents.bottom()<this.bottom())return this.contents.fullRawMoveBy(new Point(0,this.bottom()-this.contents.bottom()))},window.ScrollPanelWdgt.prototype.scrollX=function(steps){var cl,cw,l,newX,r;return cl=this.contents.left(),l=this.left(),cw=this.contents.width(),r=this.right(),(newX=cl+steps)+cw<r&&(newX=r-cw),newX>l&&(newX=l),newX!==cl&&(this.contents.fullRawMoveLeftSideTo(newX),!0)},window.ScrollPanelWdgt.prototype.scrollToBottom=function(){return this.scrollY(-1e5),this.adjustScrollBars()},window.ScrollPanelWdgt.prototype.scrollY=function(steps){var b,ch,ct,newY,t;return ct=this.contents.top(),t=this.top(),ch=this.contents.height(),b=this.bottom(),(newY=ct+steps)+ch<b&&(newY=b-ch),newY>t&&(newY=t),newY!==ct&&(this.contents.fullRawMoveTopSideTo(newY),!0)},window.ScrollPanelWdgt.prototype.mouseDownLeft=function(pos){var deltaX,deltaY,oldPos;return this.isScrollingByfloatDragging?(oldPos=pos,deltaX=0,deltaY=0,.8,world.addSteppingMorph(this),this.step=(()=>{var newPos,ref,scrollbarJustChanged;if(scrollbarJustChanged=!1,world.hand.mouseButton&&!world.hand.floatDraggingSomething()&&!(null!=(ref=world.hand.morphToGrab)?ref.detachesWhenDragged():void 0)&&this.boundsContainPoint(world.hand.position())?(newPos=world.hand.position(),this.hBar.visibleBasedOnIsVisibleProperty()&&!this.hBar.isCollapsed()&&0!==(deltaX=newPos.x-oldPos.x)&&(scrollbarJustChanged||(scrollbarJustChanged=this.scrollX(deltaX))),this.vBar.visibleBasedOnIsVisibleProperty()&&!this.vBar.isCollapsed()&&0!==(deltaY=newPos.y-oldPos.y)&&(scrollbarJustChanged||(scrollbarJustChanged=this.scrollY(deltaY))),oldPos=newPos):this.hasVelocity?Math.abs(deltaX)<.5&&Math.abs(deltaY)<.5?(this.step=noOperation,world.removeSteppingMorph(this)):(this.hBar.visibleBasedOnIsVisibleProperty()&&!this.hBar.isCollapsed()&&0!==(deltaX*=.8)&&(scrollbarJustChanged||(scrollbarJustChanged=this.scrollX(Math.round(deltaX)))),this.vBar.visibleBasedOnIsVisibleProperty()&&!this.vBar.isCollapsed()&&0!==(deltaY*=.8)&&(scrollbarJustChanged||(scrollbarJustChanged=this.scrollY(Math.round(deltaY))))):(this.step=noOperation,world.removeSteppingMorph(this)),scrollbarJustChanged)return this.adjustContentsBounds(),this.adjustScrollBars()}),ScrollPanelWdgt.__super__.mouseDownLeft.apply(this,arguments)):nil},window.ScrollPanelWdgt.prototype.startAutoScrolling=function(){var hand,inset;return inset=3*WorldMorph.preferencesAndSettings.scrollBarsThickness,this.isOrphan()?nil:(hand=world.hand,this.autoScrollTrigger||(this.autoScrollTrigger=Date.now()),world.addSteppingMorph(this),this.step=(()=>{var inner,pos;return pos=hand.position(),inner=this.boundingBox().insetBy(inset),this.boundsContainPoint(pos)&&!inner.containsPoint(pos)&&hand.floatDraggingSomething()?this.autoScroll(pos):(this.step=noOperation,world.removeSteppingMorph(this),this.autoScrollTrigger=nil)}))},window.ScrollPanelWdgt.prototype.autoScroll=function(pos){var area,inset,scrollbarJustChanged;return Date.now()-this.autoScrollTrigger<500?nil:(inset=3*WorldMorph.preferencesAndSettings.scrollBarsThickness,area=this.topLeft().extent(new Point(this.width(),inset)),scrollbarJustChanged=!1,area.containsPoint(pos)&&(scrollbarJustChanged||(scrollbarJustChanged=this.scrollY(inset-(pos.y-this.top())))),(area=this.topLeft().extent(new Point(inset,this.height()))).containsPoint(pos)&&(scrollbarJustChanged||(scrollbarJustChanged=this.scrollX(inset-(pos.x-this.left())))),(area=new Point(this.right()-inset,this.top()).extent(new Point(inset,this.height()))).containsPoint(pos)&&(scrollbarJustChanged||(scrollbarJustChanged=this.scrollX(-(inset-(this.right()-pos.x))))),(area=new Point(this.left(),this.bottom()-inset).extent(new Point(this.width(),inset))).containsPoint(pos)&&(scrollbarJustChanged||(scrollbarJustChanged=this.scrollY(-(inset-(this.bottom()-pos.y))))),scrollbarJustChanged?(this.adjustContentsBounds(),this.adjustScrollBars()):void 0)},window.ScrollPanelWdgt.prototype.scrollCaretIntoView=function(caretMorph){var fb,fl,fr,ft,marginAroundCaret,newB,newL,newR,newT,txt;return txt=caretMorph.target,txt.position().subtract(this.contents.position()),ft=this.top()+this.padding,fb=this.bottom()-this.padding,fl=this.left()+this.padding,fr=this.right()-this.padding,this.adjustContentsBounds(),marginAroundCaret=this.padding,null!=this.extraPadding&&(marginAroundCaret+=this.extraPadding),caretMorph.top()<ft?(newT=this.contents.top()+ft-caretMorph.top(),this.contents.fullRawMoveTopSideTo(newT+marginAroundCaret),caretMorph.fullRawMoveTopSideTo(ft)):caretMorph.bottom()>fb&&(newB=this.contents.bottom()+fb-caretMorph.bottom(),this.contents.fullRawMoveBottomSideTo(newB-marginAroundCaret),caretMorph.fullRawMoveBottomSideTo(fb)),caretMorph.left()<fl?(newL=this.contents.left()+fl-caretMorph.left(),this.contents.fullRawMoveLeftSideTo(newL+marginAroundCaret),caretMorph.fullRawMoveLeftSideTo(fl)):caretMorph.right()>fr&&(newR=this.contents.right()+fr-caretMorph.right(),this.contents.fullRawMoveRightSideTo(newR-marginAroundCaret),caretMorph.fullRawMoveRightSideTo(fr)),this.adjustContentsBounds(),this.adjustScrollBars()},window.ScrollPanelWdgt.prototype.wheel=function(xArg,yArg,zArg,altKeyArg,buttonArg,buttonsArg){var scrollbarJustChanged,x,y;if(x=xArg,y=yArg,zArg,altKeyArg,buttonArg,buttonsArg,world.hand.destroyTemporaryHandlesAndLayoutAdjustersIfHandHasNotActionedThem(this),scrollbarJustChanged=!1,Math.abs(y)<Math.abs(x)&&(y=0),Math.abs(x)<Math.abs(y)&&(x=0),WorldMorph.preferencesAndSettings.invertWheelX&&(x*=-1),WorldMorph.preferencesAndSettings.invertWheelY&&(y*=-1),WorldMorph.preferencesAndSettings.invertWheelZ&&-1,0!==y&&(y>0&&this.contents.top()>=this.top()-1||y<0&&this.contents.bottom()<=this.bottom()+1?this.escalateEvent("wheel",xArg,yArg,zArg,altKeyArg,buttonArg,buttonsArg):(scrollbarJustChanged=!0,this.scrollY(y*WorldMorph.preferencesAndSettings.wheelScaleY))),0!==x&&(x>0&&this.contents.left()>=this.left()-1||x<0&&this.contents.right()<=this.right()+1?this.escalateEvent("wheel",xArg,yArg,zArg,altKeyArg,buttonArg,buttonsArg):(scrollbarJustChanged=!0,this.scrollX(x*WorldMorph.preferencesAndSettings.wheelScaleX))),scrollbarJustChanged)return this.adjustContentsBounds(),this.adjustScrollBars()},window.ScrollPanelWdgt.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){var childrenNotHandlesNorCarets,ref;return this.takesOverAndCoalescesChildrensMenus?null!=(childrenNotHandlesNorCarets=null!=(ref=this.contents)?ref.children.filter(function(m){return!(m instanceof HandleMorph||m instanceof CaretMorph)}):void 0)&&1===childrenNotHandlesNorCarets.length?childrenNotHandlesNorCarets[0].addMorphSpecificMenuEntries(morphOpeningThePopUp,menu):void 0:ScrollPanelWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments)},window.ScrollPanelWdgt.prototype.toggleTextLineWrapping=function(){return this.isTextLineWrapping=!this.isTextLineWrapping},window.ScrollPanelWdgt.prototype.enableDragsDropsAndEditing=function(triggeringWidget){var ref;if(null==triggeringWidget&&(triggeringWidget=this),!this.dragsDropsAndEditingEnabled)return null!=(ref=this.parent)&&"function"==typeof ref.makePencilYellow&&ref.makePencilYellow(),this.enableDrops(),this.dragsDropsAndEditingEnabled=!0,this.contents.enableDragsDropsAndEditing(this)},window.ScrollPanelWdgt.prototype.disableDragsDropsAndEditing=function(triggeringWidget){var ref;if(null==triggeringWidget&&(triggeringWidget=this),this.dragsDropsAndEditingEnabled)return null!=(ref=this.parent)&&"function"==typeof ref.makePencilClear&&ref.makePencilClear(),this.disableDrops(),this.dragsDropsAndEditingEnabled=!1,this.contents.disableDragsDropsAndEditing(this),this.invalidateLayout()},window.SimplePlainTextScrollPanelWdgt=function(textAsString,wraps,padding){SimplePlainTextScrollPanelWdgt.__super__.constructor.call(this),this.takesOverAndCoalescesChildrensMenus=!0,this.disableDrops(),this.contents.disableDrops(),this.isTextLineWrapping=wraps,this.color=new Color(255,255,255),this.textWdgt=new SimplePlainTextWdgt(textAsString,nil,nil,nil,nil,nil,new Color(230,230,130),1),this.textWdgt.isEditable=!0,wraps||(this.textWdgt.maxTextWidth=0),this.textWdgt.enableSelecting(),this.setContents(this.textWdgt,padding),this.textWdgt.lockToPanels(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimplePlainTextScrollPanelWdgt,"name",{value:"SimplePlainTextScrollPanelWdgt"}),window.SimplePlainTextScrollPanelWdgt.instances=[],window.SimplePlainTextScrollPanelWdgt.__super__=window.ScrollPanelWdgt.prototype,window.SimplePlainTextScrollPanelWdgt=extend(window.SimplePlainTextScrollPanelWdgt,window.ScrollPanelWdgt),window.SimplePlainTextScrollPanelWdgt.prototype.textWdgt=nil,window.SimplePlainTextScrollPanelWdgt.prototype.modifiedTextTriangleAnnotation=nil,window.SimplePlainTextScrollPanelWdgt.prototype.widgetToBeNotifiedOfTextModificationChange=nil,window.SimplePlainTextScrollPanelWdgt.prototype.colloquialName=function(){return"text"},window.SimplePlainTextScrollPanelWdgt.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return this.layoutSpecDetails=new WindowContentLayoutSpec(PreferredSize.DONT_MIND,PreferredSize.DONT_MIND,1)},window.SimplePlainTextScrollPanelWdgt.prototype.checkIfTextContentWasModifiedFromTextAtStart=function(){return this.textWdgt.checkIfTextContentWasModifiedFromTextAtStart()},window.SimplePlainTextScrollPanelWdgt.prototype.addModifiedContentIndicator=function(){return this.modifiedTextTriangleAnnotation=new ModifiedTextTriangleAnnotationWdgt(this),this.textWdgt.widgetToBeNotifiedOfTextModificationChange=this,this.textWdgt.checkIfTextContentWasModifiedFromTextAtStart()},window.SimplePlainTextScrollPanelWdgt.prototype.textContentModified=function(){var ref,ref1;return null!=(ref=this.modifiedTextTriangleAnnotation)&&ref.show(),null!=(ref1=this.widgetToBeNotifiedOfTextModificationChange)?ref1.textContentModified():void 0},window.SimplePlainTextScrollPanelWdgt.prototype.textContentUnmodified=function(){var ref,ref1;return null!=(ref=this.modifiedTextTriangleAnnotation)&&ref.hide(),null!=(ref1=this.widgetToBeNotifiedOfTextModificationChange)?ref1.textContentUnmodified():void 0},window.SimpleButtonMorph=function(ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked=!0,target=nil,action=nil,faceMorph=nil,dataSourceMorphForTarget=nil,morphEnv,toolTipMessage=nil,doubleClickAction=nil,argumentToAction1=nil,argumentToAction2=nil,representsAMorph=!1,padding=0){this.ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked=ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked,this.target=target,this.action=action,this.faceMorph=faceMorph,this.dataSourceMorphForTarget=dataSourceMorphForTarget,this.morphEnv=morphEnv,this.toolTipMessage=toolTipMessage,this.doubleClickAction=doubleClickAction,this.argumentToAction1=argumentToAction1,this.argumentToAction2=argumentToAction2,this.representsAMorph=representsAMorph,this.padding=padding,SimpleButtonMorph.__super__.constructor.apply(this,arguments),this.appearance=new BoxyAppearance(this),this.strokeColor=new Color(196,195,196),this.color=new Color(245,244,245),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleButtonMorph,"name",{value:"SimpleButtonMorph"}),window.SimpleButtonMorph.instances=[],window.SimpleButtonMorph.__super__=window.EmptyButtonMorph.prototype,window.SimpleButtonMorph=extend(window.SimpleButtonMorph,window.EmptyButtonMorph),window.SwitchButtonMorph=function(buttons){var eachButton,i,len,ref;for(this.buttons=buttons,SwitchButtonMorph.__super__.constructor.call(this),i=0,len=(ref=this.buttons).length;i<len;i++)eachButton=ref[i],this.add(eachButton);this.invalidateLayout(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SwitchButtonMorph,"name",{value:"SwitchButtonMorph"}),window.SwitchButtonMorph.instances=[],window.SwitchButtonMorph.__super__=window.Widget.prototype,window.SwitchButtonMorph=extend(window.SwitchButtonMorph,window.Widget),window.SwitchButtonMorph.prototype.buttons=nil,window.SwitchButtonMorph.prototype.highlightColor=new Color(192,192,192),window.SwitchButtonMorph.prototype.pressColor=new Color(128,128,128),window.SwitchButtonMorph.prototype.ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked=!0,window.SwitchButtonMorph.prototype.buttonShown=0,window.SwitchButtonMorph.prototype.color=new Color(255,255,255),window.SwitchButtonMorph.prototype.iHaveBeenAddedTo=function(whereTo,beingDropped){return this.resetSwitchButton()},window.SwitchButtonMorph.prototype.doLayout=function(newBoundsForThisLayout){var counter,eachButton,i,len,ref;for(window.recalculatingLayouts,null==newBoundsForThisLayout&&(null!=this.desiredExtent?(newBoundsForThisLayout=this.desiredExtent,this.desiredExtent=nil):newBoundsForThisLayout=this.extent(),null!=this.desiredPosition?(newBoundsForThisLayout=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(newBoundsForThisLayout),this.desiredPosition=nil):newBoundsForThisLayout=new Rectangle(this.position()).setBoundsWidthAndHeight(newBoundsForThisLayout)),this.rawSetBounds(newBoundsForThisLayout),counter=0,i=0,len=(ref=this.buttons).length;i<len;i++)(eachButton=ref[i]).parent===this&&(eachButton.doLayout(this.bounds),counter%this.buttons.length===this.buttonShown?eachButton.show():eachButton.hide()),counter++;return this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted()},window.SwitchButtonMorph.prototype.getTextDescription=function(){},window.SwitchButtonMorph.prototype.isSelected=function(){return 0!==this.buttonShown},window.SwitchButtonMorph.prototype.mouseClickLeft=function(){return this.buttonShown++,this.buttonShown=this.buttonShown%this.buttons.length,this.invalidateLayout(),this.escalateEvent("mouseClickLeft",this)},window.SwitchButtonMorph.prototype.resetSwitchButton=function(){return this.buttonShown=0,this.invalidateLayout()},window.ToggleButtonMorph=function(button1,button2,startingButton=0){0===startingButton?ToggleButtonMorph.__super__.constructor.call(this,[button1,button2]):ToggleButtonMorph.__super__.constructor.call(this,[button2,button1]),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ToggleButtonMorph,"name",{value:"ToggleButtonMorph"}),window.ToggleButtonMorph.instances=[],window.ToggleButtonMorph.__super__=window.SwitchButtonMorph.prototype,window.ToggleButtonMorph=extend(window.ToggleButtonMorph,window.SwitchButtonMorph),window.ToggleButtonMorph.prototype.mouseClickLeft=function(){if(null==this.parent.wantsButtonsToBehaveLikeRadioButtons||!this.parent.wantsButtonsToBehaveLikeRadioButtons||null!=this.parent.allowsRadioButtonsToBeAllDisabled&&this.parent.allowsRadioButtonsToBeAllDisabled||1!==this.buttonShown)return ToggleButtonMorph.__super__.mouseClickLeft.apply(this,arguments)},window.ToggleButtonMorph.prototype.select=function(whichOne){if(this.buttonShown!==whichOne)return this.buttons[this.buttonShown].mouseClickLeft()},window.ToggleButtonMorph.prototype.toggle=function(){return this.buttons[this.buttonShown].mouseClickLeft()},window.ErrorsLogViewerMorph=function(msg,target,callback,defaultContents){this.msg=msg,this.target=target,this.callback=callback,this.defaultContents=defaultContents,ErrorsLogViewerMorph.__super__.constructor.call(this,new Point(200,400)),this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ErrorsLogViewerMorph,"name",{value:"ErrorsLogViewerMorph"}),window.ErrorsLogViewerMorph.instances=[],window.ErrorsLogViewerMorph.__super__=window.Widget.prototype,window.ErrorsLogViewerMorph=extend(window.ErrorsLogViewerMorph,window.Widget),window.ErrorsLogViewerMorph.prototype.tempPromptEntryField=nil,window.ErrorsLogViewerMorph.prototype.defaultContents="",window.ErrorsLogViewerMorph.prototype.textMorph=nil,window.ErrorsLogViewerMorph.prototype.clearButton=nil,window.ErrorsLogViewerMorph.prototype.pauseToggle=nil,window.ErrorsLogViewerMorph.prototype.okButton=nil,window.ErrorsLogViewerMorph.prototype.externalPadding=0,window.ErrorsLogViewerMorph.prototype.internalPadding=5,window.ErrorsLogViewerMorph.prototype.paused=!1,window.ErrorsLogViewerMorph.prototype.colloquialName=function(){return"Error log"},window.ErrorsLogViewerMorph.prototype.closeFromContainerWindow=function(containerWindow){return this.parent.hide()},window.ErrorsLogViewerMorph.prototype.addText=function(newLog){var existingLog;return existingLog=0!==this.textMorph.text.length?this.textMorph.text:"",this.textMorph.setText(existingLog+"\n\n-----------------------------------------\n\n"+newLog)},window.ErrorsLogViewerMorph.prototype.showUpWithError=function(err){var toBeAddedToLog;if(this.paused||(toBeAddedToLog="",0!==world.widgetsGivingErrorWhileRepainting.length&&(toBeAddedToLog+="Some widgets crashed while painting themselves and\n",toBeAddedToLog+="hence have been banned from re-painting themseves.\n",toBeAddedToLog+="Edit/save any source code to give them another chance.\n\n"),toBeAddedToLog+=err,null!=err.stack&&(toBeAddedToLog+="\n\nStack:\n"+err.stack),this.addText(toBeAddedToLog)),!this.parent.isVisible)return this.parent.show(),this.parent.bringToForeground()},window.ErrorsLogViewerMorph.prototype.buildAndConnectChildren=function(){var pauseButton,unpauseButton;return"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.tempPromptEntryField=new SimplePlainTextScrollPanelWdgt(this.defaultContents,!1,5),this.tempPromptEntryField.disableDrops(),this.tempPromptEntryField.contents.disableDrops(),this.tempPromptEntryField.color=new Color(255,255,255),this.textMorph=this.tempPromptEntryField.textWdgt,this.textMorph.backgroundColor=new Color(0,0,0,0),this.textMorph.setFontName(nil,nil,this.textMorph.monoFontStack),this.textMorph.isEditable=!0,this.textMorph.enableSelecting(),this.add(this.tempPromptEntryField),this.clearButton=new SimpleButtonMorph(!0,this,"clearTextPane","clear"),this.add(this.clearButton),pauseButton=new SimpleButtonMorph(!0,this,"pauseErrors","pause"),unpauseButton=new SimpleButtonMorph(!0,this,"unpauseErrors","un-pause"),this.pauseToggle=new ToggleButtonMorph(pauseButton,unpauseButton,this.paused?1:0),this.add(this.pauseToggle),this.okButton=new SimpleButtonMorph(!0,this,"closeFromContainerWindow","ok"),this.add(this.okButton),this.invalidateLayout()},window.ErrorsLogViewerMorph.prototype.pauseErrors=function(){return this.paused=!0},window.ErrorsLogViewerMorph.prototype.unpauseErrors=function(){return this.paused=!1},window.ErrorsLogViewerMorph.prototype.clearTextPane=function(){return this.textMorph.setText("")},window.ErrorsLogViewerMorph.prototype.informTarget=function(){return this.target[this.callback].call(this.target,nil,this.textMorph)},window.ErrorsLogViewerMorph.prototype.notifyTargetAndClose=function(){return this.informTarget(),this.close()},window.ErrorsLogViewerMorph.prototype.doLayout=function(newBoundsForThisLayout){var buttonBounds,eachButtonWidth,mainCanvasBottom,mainCanvasHeight;return window.recalculatingLayouts,null==newBoundsForThisLayout&&(null!=this.desiredExtent?(newBoundsForThisLayout=this.desiredExtent,this.desiredExtent=nil):newBoundsForThisLayout=this.extent(),null!=this.desiredPosition?(newBoundsForThisLayout=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(newBoundsForThisLayout),this.desiredPosition=nil):newBoundsForThisLayout=new Rectangle(this.position()).setBoundsWidthAndHeight(newBoundsForThisLayout)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(this.rawSetBounds(newBoundsForThisLayout),trackChanges.push(!1),mainCanvasHeight=this.height()-2*this.externalPadding-this.internalPadding-WorldMorph.preferencesAndSettings.handleSize,mainCanvasBottom=this.top()+this.externalPadding+mainCanvasHeight,this.tempPromptEntryField.parent===this&&(this.tempPromptEntryField.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.top()+this.externalPadding)),this.tempPromptEntryField.rawSetExtent(new Point(this.width()-2*this.externalPadding,mainCanvasHeight))),eachButtonWidth=(this.width()-2*this.externalPadding-3*this.internalPadding-WorldMorph.preferencesAndSettings.handleSize)/3,this.clearButton.parent===this&&(buttonBounds=(buttonBounds=new Rectangle(new Point(this.left()+this.externalPadding+0*(eachButtonWidth+this.internalPadding),mainCanvasBottom+this.internalPadding))).setBoundsWidthAndHeight(eachButtonWidth,15),this.clearButton.doLayout(buttonBounds)),this.pauseToggle.parent===this&&(buttonBounds=(buttonBounds=new Rectangle(new Point(this.left()+this.externalPadding+1*(eachButtonWidth+this.internalPadding),mainCanvasBottom+this.internalPadding))).setBoundsWidthAndHeight(eachButtonWidth,15),this.pauseToggle.doLayout(buttonBounds)),this.okButton.parent===this&&(buttonBounds=(buttonBounds=new Rectangle(new Point(this.left()+this.externalPadding+2*(eachButtonWidth+this.internalPadding),mainCanvasBottom+this.internalPadding))).setBoundsWidthAndHeight(eachButtonWidth,15),this.okButton.doLayout(buttonBounds)),trackChanges.pop(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted())},window.FittingSpecText=function(){window.FittingSpecText.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FittingSpecText,"name",{value:"FittingSpecText"}),window.FittingSpecText.instances=[],window.FittingSpecText.__super__=Object.prototype,window.FittingSpecText.FIT_TEXT_TO_BOX=!0,window.FittingSpecText.FIT_BOX_TO_TEXT=!1,window.FittingSpecTextBoxFittingTextTightOrLoose=function(){window.FittingSpecTextBoxFittingTextTightOrLoose.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FittingSpecTextBoxFittingTextTightOrLoose,"name",{value:"FittingSpecTextBoxFittingTextTightOrLoose"}),window.FittingSpecTextBoxFittingTextTightOrLoose.instances=[],window.FittingSpecTextBoxFittingTextTightOrLoose.__super__=Object.prototype,window.FittingSpecTextBoxFittingTextTightOrLoose.TIGHT=!1,window.FittingSpecTextBoxFittingTextTightOrLoose.LOOSE=!0,window.FittingSpecTextInLargerBounds=function(){window.FittingSpecTextInLargerBounds.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FittingSpecTextInLargerBounds,"name",{value:"FittingSpecTextInLargerBounds"}),window.FittingSpecTextInLargerBounds.instances=[],window.FittingSpecTextInLargerBounds.__super__=Object.prototype,window.FittingSpecTextInLargerBounds.FLOAT=!1,window.FittingSpecTextInLargerBounds.SCALEUP=!0,window.FittingSpecTextInSmallerBounds=function(){window.FittingSpecTextInSmallerBounds.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FittingSpecTextInSmallerBounds,"name",{value:"FittingSpecTextInSmallerBounds"}),window.FittingSpecTextInSmallerBounds.instances=[],window.FittingSpecTextInSmallerBounds.__super__=Object.prototype,window.FittingSpecTextInSmallerBounds.CROP=!0,window.FittingSpecTextInSmallerBounds.SCALEDOWN=!1;var GridPositioningOfAddedShortcutsMixin;GridPositioningOfAddedShortcutsMixin={onceAddedClassProperties:function(fromClass){return this.addInstanceProperties(fromClass,{numberOfIconsOnDesktop:0,laysIconsHorizontallyInGrid:!0,iconsLayingInGridWrapCount:3,iconsPaddingFromContainerEdges:5,add:function(aMorph,position,layoutSpec,beingDropped){var xPos,yPos;if(null==position&&(position=nil),null==layoutSpec&&(layoutSpec=LayoutSpec.ATTACHEDAS_FREEFLOATING),window[this[arguments.callee.name+"_class_injected_in"]].__super__[arguments.callee.name].apply(this,arguments),!beingDropped&&aMorph instanceof WidgetHolderWithCaptionWdgt&&!(aMorph instanceof BasementOpenerWdgt))return this.laysIconsHorizontallyInGrid?(xPos=this.numberOfIconsOnDesktop%this.iconsLayingInGridWrapCount,yPos=Math.floor(this.numberOfIconsOnDesktop/this.iconsLayingInGridWrapCount)):(xPos=Math.floor(this.numberOfIconsOnDesktop/this.iconsLayingInGridWrapCount),yPos=this.numberOfIconsOnDesktop%this.iconsLayingInGridWrapCount),aMorph.fullRawMoveTo(this.position().add(new Point(85*xPos,85*yPos)).add(this.iconsPaddingFromContainerEdges)),this.numberOfIconsOnDesktop++}})}};var KeepIconicDesktopSystemLinksBackMixin;KeepIconicDesktopSystemLinksBackMixin={onceAddedClassProperties:function(fromClass){return this.addInstanceProperties(fromClass,{childAdded:function(theWidget){if(theWidget instanceof IconicDesktopSystemLinkWdgt)return theWidget.moveOnTopOfTopReference()},childMovedInFrontOfOthers:function(theWidget){if(theWidget instanceof IconicDesktopSystemLinkWdgt)return theWidget.moveOnTopOfTopReference()}})}};var CreateShortcutOfDroppedItemsMixin;CreateShortcutOfDroppedItemsMixin={onceAddedClassProperties:function(fromClass){return this.addInstanceProperties(fromClass,{aboutToDrop:function(morphToDrop){return morphToDrop instanceof IconicDesktopSystemShortcutWdgt?morphToDrop.fullRawMoveWithin(this):morphToDrop.fullRawMoveTo(this.position().add(new Point(10,10)))},reactToDropOf:function(droppedWidget){if(window[this[arguments.callee.name+"_class_injected_in"]].__super__[arguments.callee.name].apply(this,arguments),!(droppedWidget instanceof IconicDesktopSystemShortcutWdgt))return droppedWidget.createReferenceAndClose(nil,this)}})}},window.FolderPanelWdgt=function(){window.FolderPanelWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FolderPanelWdgt,"name",{value:"FolderPanelWdgt"}),window.FolderPanelWdgt.instances=[],window.FolderPanelWdgt.__super__=window.PanelWdgt.prototype,window.FolderPanelWdgt=extend(window.FolderPanelWdgt,window.PanelWdgt),window.FolderPanelWdgt.augmentWith(window.GridPositioningOfAddedShortcutsMixin,"FolderPanelWdgt"),window.FolderPanelWdgt.augmentWith(window.KeepIconicDesktopSystemLinksBackMixin,"FolderPanelWdgt"),window.FolderPanelWdgt.augmentWith(window.CreateShortcutOfDroppedItemsMixin,"FolderPanelWdgt"),window.FolderPanelWdgt.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){return FolderPanelWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),menu.addLine(),menu.addMenuItem("new folder",!0,this,"makeFolder","make a new folder")},window.DoubleLinkedList=function(){this.headNode=this.tailNode=nil,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DoubleLinkedList,"name",{value:"DoubleLinkedList"}),window.DoubleLinkedList.instances=[],window.DoubleLinkedList.__super__=Object.prototype,window.DoubleLinkedList.prototype.remove=function(node){return node.pre?node.pre.next=node.next:this.headNode=node.next,node.next?node.next.pre=node.pre:this.tailNode=node.pre},window.DoubleLinkedList.prototype.insertBeginning=function(node){return this.headNode?(node.next=this.headNode,this.headNode.pre=node,this.headNode=node):this.headNode=this.tailNode=node},window.DoubleLinkedList.prototype.moveToHead=function(node){return this.remove(node),this.insertBeginning(node)},window.DoubleLinkedList.prototype.clear=function(){return this.headNode=this.tailNode=nil},window.LRUCache=function(capacity=10,maxAge=6e4){this.capacity=capacity,this.maxAge=maxAge,this._linkList=new DoubleLinkedList,this.reset(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.LRUCache,"name",{value:"LRUCache"}),window.LRUCache.instances=[],window.LRUCache.__super__=Object.prototype,window.LRUCache.prototype.keys=function(){return Object.keys(this._hash)},window.LRUCache.prototype.values=function(){return this.keys().map(key=>this.get(key)).filter(function(v){return void 0!==v})},window.LRUCache.prototype.remove=function(key){var node;if(null!=this._hash[key])return node=this._hash[key],this._linkList.remove(node),delete this._hash[key],node.data.onDispose&&node.data.onDispose.call(this,node.data.key,node.data.value),this.size--},window.LRUCache.prototype.reset=function(){return this._hash={},this.size=0,this._linkList.clear()},window.LRUCache.prototype.set=function(key,value,onDispose){var node;if(node=this._hash[key])return node.data.value=value,node.data.onDispose=onDispose,this._refreshNode(node);this.size===this.capacity&&this.remove(this._linkList.tailNode.data.key),(node=function(data,pre,next){return{data:data,pre:pre,next:next}}({key:key,value:value,onDispose:onDispose})).data.lastVisitTime=Date.now(),this._linkList.insertBeginning(node),this._hash[key]=node,this.size++},window.LRUCache.prototype.get=function(key){var node;if(node=this._hash[key]){if(!this._isExpiredNode(node))return this._refreshNode(node),node.data.value;this.remove(key)}},window.LRUCache.prototype._refreshNode=function(node){return node.data.lastVisitTime=Date.now(),this._linkList.moveToHead(node)},window.LRUCache.prototype._isExpiredNode=function(node){return Date.now()-node.data.lastVisitTime>this.maxAge},window.LRUCache.prototype.has=function(key){return null!=this._hash[key]},window.PreferencesAndSettings=function(){this.setMouseInputMode(),console.log("constructing PreferencesAndSettings"),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PreferencesAndSettings,"name",{value:"PreferencesAndSettings"}),window.PreferencesAndSettings.instances=[],window.PreferencesAndSettings.__super__=Object.prototype,window.PreferencesAndSettings.augmentWith(window.DeepCopierMixin,"PreferencesAndSettings"),window.PreferencesAndSettings.prototype.inputMode=nil,window.PreferencesAndSettings.prototype.minimumFontHeight=nil,window.PreferencesAndSettings.prototype.shortcutsFontSize=nil,window.PreferencesAndSettings.prototype.menuFontName=nil,window.PreferencesAndSettings.prototype.menuFontSize=nil,window.PreferencesAndSettings.prototype.menuHeaderFontSize=nil,window.PreferencesAndSettings.prototype.menuHeaderColor=nil,window.PreferencesAndSettings.prototype.menuHeaderBold=nil,window.PreferencesAndSettings.prototype.menuStrokeColor=nil,window.PreferencesAndSettings.prototype.menuBackgroundColor=nil,window.PreferencesAndSettings.prototype.menuButtonsLabelColor=nil,window.PreferencesAndSettings.prototype.normalTextFontSize=nil,window.PreferencesAndSettings.prototype.textInButtonsFontSize=nil,window.PreferencesAndSettings.prototype.titleBarTextFontSize=nil,window.PreferencesAndSettings.prototype.titleBarBoldText=nil,window.PreferencesAndSettings.prototype.titleBarTextHeight=nil,window.PreferencesAndSettings.prototype.bubbleHelpFontSize=nil,window.PreferencesAndSettings.prototype.prompterFontName=nil,window.PreferencesAndSettings.prototype.prompterFontSize=nil,window.PreferencesAndSettings.prototype.prompterSliderSize=nil,window.PreferencesAndSettings.prototype.handleSize=nil,window.PreferencesAndSettings.prototype.scrollBarsThickness=nil,window.PreferencesAndSettings.prototype.outlineColor=nil,window.PreferencesAndSettings.prototype.outlineColorString=nil,window.PreferencesAndSettings.prototype.wheelScaleX=1,window.PreferencesAndSettings.prototype.wheelScaleY=1,window.PreferencesAndSettings.prototype.wheelScaleZ=1,window.PreferencesAndSettings.prototype.invertWheelX=!0,window.PreferencesAndSettings.prototype.invertWheelY=!0,window.PreferencesAndSettings.prototype.invertWheelZ=!0,window.PreferencesAndSettings.prototype.useSliderForInput=nil,window.PreferencesAndSettings.prototype.useVirtualKeyboard=nil,window.PreferencesAndSettings.prototype.isTouchDevice=nil,window.PreferencesAndSettings.prototype.rasterizeSVGs=nil,window.PreferencesAndSettings.prototype.isFlat=nil,window.PreferencesAndSettings.prototype.grabDragThreshold=7,window.PreferencesAndSettings.prototype.toggleInputMode=function(){return this.inputMode===PreferencesAndSettings.INPUT_MODE_MOUSE?this.setTouchInputMode():this.setMouseInputMode()},window.PreferencesAndSettings.prototype.setMouseInputMode=function(){return this.inputMode=PreferencesAndSettings.INPUT_MODE_MOUSE,this.minimumFontHeight=getMinimumFontHeight(),this.menuFontName="sans-serif",this.menuFontSize=12,this.menuHeaderFontSize=12,this.menuHeaderColor=new Color(77,77,77),this.menuHeaderBold=!0,this.menuStrokeColor=new Color(210,210,210),this.menuBackgroundColor=new Color(249,249,249),this.menuButtonsLabelColor=new Color(0,0,0),this.externalWindowBarBackgroundColor=new Color(125,125,125),this.externalWindowBarStrokeColor=new Color(100,100,100),this.internalWindowBarBackgroundColor=new Color(172,172,172),this.internalWindowBarStrokeColor=new Color(150,150,150),this.normalTextFontSize=12,this.textInButtonsFontSize=12,this.titleBarTextFontSize=12,this.titleBarTextHeight=15,this.titleBarBoldText=!0,this.bubbleHelpFontSize=10,this.prompterFontName="sans-serif",this.prompterFontSize=12,this.prompterSliderSize=10,this.defaultPanelsBackgroundColor=new Color(255,250,245),this.defaultPanelsStrokeColor=new Color(100,100,100),this.editableItemBackgroundColor=new Color(240,240,240),this.outlineColor=new Color(244,243,244),this.outlineColorString=this.outlineColor.toString(),this.iconDarkLineColor=new Color(0,0,0),this.shortcutsFontSize=12,this.handleSize=15,this.scrollBarsThickness=10,this.wheelScaleX=1,this.wheelScaleY=1,this.wheelScaleZ=1,this.invertWheelX=!0,this.invertWheelY=!0,this.invertWheelZ=!0,this.useSliderForInput=!1,this.useVirtualKeyboard=!0,this.isTouchDevice=!1,this.rasterizeSVGs=!1,this.isFlat=!1},window.PreferencesAndSettings.prototype.setTouchInputMode=function(){return this.inputMode=PreferencesAndSettings.INPUT_MODE_TOUCH,this.minimumFontHeight=getMinimumFontHeight(),this.menuFontName="sans-serif",this.menuFontSize=24,this.bubbleHelpFontSize=18,this.prompterFontName="sans-serif",this.prompterFontSize=24,this.prompterSliderSize=20,this.handleSize=26,this.scrollBarsThickness=24,this.wheelScaleX=1,this.wheelScaleY=1,this.wheelScaleZ=1,this.invertWheelX=!0,this.invertWheelY=!0,this.invertWheelZ=!0,this.useSliderForInput=!0,this.useVirtualKeyboard=!0,this.isTouchDevice=!1,this.rasterizeSVGs=!1,this.isFlat=!1},window.PreferencesAndSettings.INPUT_MODE_MOUSE=0,window.PreferencesAndSettings.INPUT_MODE_TOUCH=1,window.PreferencesAndSettings.decimalFloatFiguresOfFontSizeGranularity=0,window.ProfilingDataCollector=function(){window.ProfilingDataCollector.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ProfilingDataCollector,"name",{value:"ProfilingDataCollector"}),window.ProfilingDataCollector.instances=[],window.ProfilingDataCollector.__super__=Object.prototype,window.ProfilingDataCollector.overallProfilingEnabled=!1,window.ProfilingDataCollector.enableProfiling=function(){return this.overallProfilingEnabled=!0},window.ProfilingDataCollector.disableProfiling=function(){return this.overallProfilingEnabled=!1},window.ProfilingDataCollector.brokenRectsProfilingEnabled=!1,window.ProfilingDataCollector.shortSessionCumulativeNumberOfBrokenRects=0,window.ProfilingDataCollector.overallSessionCumulativeNumberOfBrokenRects=0,window.ProfilingDataCollector.shortSessionMaxNumberOfBrokenRects=0,window.ProfilingDataCollector.overallSessionMaxNumberOfBrokenRects=0,window.ProfilingDataCollector.shortSessionCumulativeTotalAreaOfBrokenRects=0,window.ProfilingDataCollector.overallSessionCumulativeTotalAreaOfBrokenRects=0,window.ProfilingDataCollector.shortSessionMaxTotalAreaOfBrokenRects=0,window.ProfilingDataCollector.overallSessionMaxTotalAreaOfBrokenRects=0,window.ProfilingDataCollector.shortSessionCumulativeDuplicatedBrokenRects=0,window.ProfilingDataCollector.overallSessionCumulativeDuplicatedBrokenRects=0,window.ProfilingDataCollector.shortSessionMaxDuplicatedBrokenRects=0,window.ProfilingDataCollector.overallSessionMaxDuplicatedBrokenRects=0,window.ProfilingDataCollector.shortSessionCumulativeMergedSourceAndDestination=0,window.ProfilingDataCollector.overallSessionCumulativeMergedSourceAndDestination=0,window.ProfilingDataCollector.shortSessionMaxMergedSourceAndDestination=0,window.ProfilingDataCollector.overallSessionMaxMergedSourceAndDestination=0,window.ProfilingDataCollector.shortSessionCumulativeNumberOfAllocatedCanvases=0,window.ProfilingDataCollector.shortSessionMaxNumberOfAllocatedCanvases=0,window.ProfilingDataCollector.shortSessionCumulativeSizeOfAllocatedCanvases=0,window.ProfilingDataCollector.shortSessionCumulativeNumberOfBlitOperations=0,window.ProfilingDataCollector.shortSessionMaxNumberOfBlits=0,window.ProfilingDataCollector.shortSessionCumulativeAreaOfBlits=0,window.ProfilingDataCollector.shortSessionMaxAreaOfBlits=0,window.ProfilingDataCollector.shortSessionBiggestBlitArea=0,window.ProfilingDataCollector.shortSessionCumulativeTimeSpentRedrawing=0,window.ProfilingDataCollector.shortSessionMaxTimeSpentRedrawing=0,window.ProfilingDataCollector.enableBrokenRectsProfiling=function(){return this.overallProfilingEnabled=!0,this.brokenRectsProfilingEnabled=!0},window.ProfilingDataCollector.disableBrokenRectsProfiling=function(){return this.brokenRectsProfilingEnabled=!1},window.ProfilingDataCollector.profileBrokenRects=function(brokenRectsArray,numberOfDuplicatedBrokenRects,numberOfMergedSourceAndDestination){var eachRect,i,len,numberOfBrokenRects,totalAreaOfBrokenRects;if(this.overallProfilingEnabled&&this.brokenRectsProfilingEnabled){for(numberOfBrokenRects=brokenRectsArray.length,this.shortSessionCumulativeNumberOfBrokenRects+=numberOfBrokenRects,numberOfBrokenRects>this.shortSessionMaxNumberOfBrokenRects&&(this.shortSessionMaxNumberOfBrokenRects=numberOfBrokenRects),this.overallSessionCumulativeNumberOfBrokenRects+=numberOfBrokenRects,numberOfBrokenRects>this.overallSessionMaxNumberOfBrokenRects&&(this.overallSessionMaxNumberOfBrokenRects=numberOfBrokenRects),totalAreaOfBrokenRects=0,i=0,len=brokenRectsArray.length;i<len;i++)null!=(eachRect=brokenRectsArray[i])&&(totalAreaOfBrokenRects+=eachRect.area());return this.shortSessionCumulativeTotalAreaOfBrokenRects+=totalAreaOfBrokenRects,this.overallSessionCumulativeTotalAreaOfBrokenRects+=totalAreaOfBrokenRects,totalAreaOfBrokenRects>this.shortSessionMaxTotalAreaOfBrokenRects&&(this.shortSessionMaxTotalAreaOfBrokenRects=totalAreaOfBrokenRects),totalAreaOfBrokenRects>this.overallSessionMaxTotalAreaOfBrokenRects&&(this.overallSessionMaxTotalAreaOfBrokenRects=totalAreaOfBrokenRects),this.shortSessionCumulativeDuplicatedBrokenRects+=numberOfDuplicatedBrokenRects,this.overallSessionCumulativeDuplicatedBrokenRects+=numberOfDuplicatedBrokenRects,numberOfDuplicatedBrokenRects>this.shortSessionMaxDuplicatedBrokenRects&&(this.shortSessionMaxDuplicatedBrokenRects=numberOfDuplicatedBrokenRects),numberOfDuplicatedBrokenRects>this.overallSessionMaxDuplicatedBrokenRects&&(this.overallSessionMaxDuplicatedBrokenRects=numberOfDuplicatedBrokenRects),this.shortSessionCumulativeMergedSourceAndDestination+=numberOfMergedSourceAndDestination,this.overallSessionCumulativeMergedSourceAndDestination+=numberOfMergedSourceAndDestination,numberOfMergedSourceAndDestination>this.shortSessionMaxMergedSourceAndDestination&&(this.shortSessionMaxMergedSourceAndDestination=numberOfMergedSourceAndDestination),numberOfMergedSourceAndDestination>this.overallSessionMaxMergedSourceAndDestination?this.overallSessionMaxMergedSourceAndDestination=numberOfMergedSourceAndDestination:void 0}},window.WorldMorph=function(worldCanvas,automaticallyAdjustToFillEntireBrowserAlsoOnResize=!0){this.worldCanvas=worldCanvas,this.automaticallyAdjustToFillEntireBrowserAlsoOnResize=automaticallyAdjustToFillEntireBrowserAlsoOnResize,window.location.href.contains("worldWithSystemTestHarness")?this.isIndexPage=!1:this.isIndexPage=!0,WorldMorph.preferencesAndSettings=new PreferencesAndSettings,WorldMorph.__super__.constructor.call(this),this.patternName=this.pattern1,this.appearance=new DesktopAppearance(this),this.color=new Color(205,205,205),this.strokeColor=nil,this.alpha=1,this.stamp=Date.now(),this.isDevMode=!1,this.hand=new HandMorph(this),this.keyboardEventsReceiver=nil,this.lastEditedText=nil,this.caret=nil,this.temporaryHandlesAndLayoutAdjusters=[],this.inputDOMElementForVirtualKeyboard=nil,this.automaticallyAdjustToFillEntireBrowserAlsoOnResize&&this.isIndexPage?this.stretchWorldToFillEntirePage():this.sizeCanvasToTestScreenResolution(),this.setBounds(new Rectangle(0,0,this.worldCanvas.width/pixelRatio,this.worldCanvas.height/pixelRatio)),this.initEventListeners(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&(this.automatorRecorderAndPlayer=new AutomatorRecorderAndPlayer(this,this.hand)),this.worldCanvasContext=this.worldCanvas.getContext("2d"),this.canvasForTextMeasurements=newCanvas(),this.canvasContextForTextMeasurements=this.canvasForTextMeasurements.getContext("2d"),this.canvasContextForTextMeasurements.scale(pixelRatio,pixelRatio),this.canvasContextForTextMeasurements.textAlign="left",this.canvasContextForTextMeasurements.textBaseline="bottom",this.cacheForTextMeasurements=new LRUCache(1e3,864e5),this.cacheForTextParagraphSplits=new LRUCache(300,864e5),this.cacheForParagraphsWordsSplits=new LRUCache(300,864e5),this.cacheForParagraphsWrappingData=new LRUCache(300,864e5),this.cacheForTextWrappingData=new LRUCache(300,864e5),this.cacheForImmutableBackBuffers=new LRUCache(1e3,864e5),this.cacheForTextBreakingIntoLinesTopLevel=new LRUCache(10,864e5),this.changed(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WorldMorph,"name",{value:"WorldMorph"}),window.WorldMorph.instances=[],window.WorldMorph.__super__=window.PanelWdgt.prototype,window.WorldMorph=extend(window.WorldMorph,window.PanelWdgt),window.WorldMorph.augmentWith(window.GridPositioningOfAddedShortcutsMixin,"WorldMorph"),window.WorldMorph.augmentWith(window.KeepIconicDesktopSystemLinksBackMixin,"WorldMorph"),window.WorldMorph.prototype.mousedownEventListener=nil,window.WorldMorph.prototype.touchstartEventListener=nil,window.WorldMorph.prototype.mouseupEventListener=nil,window.WorldMorph.prototype.touchendEventListener=nil,window.WorldMorph.prototype.mousemoveEventListener=nil,window.WorldMorph.prototype.touchmoveEventListener=nil,window.WorldMorph.prototype.gesturestartEventListener=nil,window.WorldMorph.prototype.gesturechangeEventListener=nil,window.WorldMorph.prototype.contextmenuEventListener=nil,window.WorldMorph.prototype.keydownEventListener=nil,window.WorldMorph.prototype.keyupEventListener=nil,window.WorldMorph.prototype.keypressEventListener=nil,window.WorldMorph.prototype.wheelEventListener=nil,window.WorldMorph.prototype.copyEventListener=nil,window.WorldMorph.prototype.pasteEventListener=nil,window.WorldMorph.prototype.clipboardTextIfTestRunning=nil,window.WorldMorph.prototype.errorConsole=nil,window.WorldMorph.prototype.lastSerializationString="",window.WorldMorph.prototype.inputDOMElementForVirtualKeyboardKeydownEventListener=nil,window.WorldMorph.prototype.inputDOMElementForVirtualKeyboardKeyupEventListener=nil,window.WorldMorph.prototype.inputDOMElementForVirtualKeyboardKeypressEventListener=nil,window.WorldMorph.prototype.keyComboResetWorldEventListener=nil,window.WorldMorph.prototype.keyComboTurnOnAnimationsPacingControl=nil,window.WorldMorph.prototype.keyComboTurnOffAnimationsPacingControl=nil,window.WorldMorph.prototype.keyComboTakeScreenshotEventListener=nil,window.WorldMorph.prototype.keyComboStopTestRecordingEventListener=nil,window.WorldMorph.prototype.keyComboCheckStringsOfItemsInMenuOrderImportant=nil,window.WorldMorph.prototype.keyComboCheckStringsOfItemsInMenuOrderUnimportant=nil,window.WorldMorph.prototype.keyComboAddTestCommentEventListener=nil,window.WorldMorph.prototype.keyComboCheckNumberOfMenuItemsEventListener=nil,window.WorldMorph.prototype.dragoverEventListener=nil,window.WorldMorph.prototype.dropEventListener=nil,window.WorldMorph.prototype.resizeEventListener=nil,window.WorldMorph.prototype.otherTasksToBeRunOnStep=[],window.WorldMorph.prototype.showRedraws=!1,window.WorldMorph.prototype.doubleCheckCachedMethodsResults=!1,window.WorldMorph.prototype.automatorRecorderAndPlayer=nil,window.WorldMorph.prototype.worldCanvas=nil,window.WorldMorph.prototype.worldCanvasContext=nil,window.WorldMorph.prototype.canvasForTextMeasurements=nil,window.WorldMorph.prototype.canvasContextForTextMeasurements=nil,window.WorldMorph.prototype.cacheForTextMeasurements=nil,window.WorldMorph.prototype.cacheForTextParagraphSplits=nil,window.WorldMorph.prototype.cacheForParagraphsWordsSplits=nil,window.WorldMorph.prototype.cacheForParagraphsWrappingData=nil,window.WorldMorph.prototype.cacheForTextWrappingData=nil,window.WorldMorph.prototype.cacheForTextBreakingIntoLinesTopLevel=nil,window.WorldMorph.prototype.automaticallyAdjustToFillEntireBrowserAlsoOnResize=!0,window.WorldMorph.prototype.morphsDetectingClickOutsideMeOrAnyOfMeChildren=[],window.WorldMorph.prototype.hierarchyOfClickedMorphs=[],window.WorldMorph.prototype.hierarchyOfClickedMenus=[],window.WorldMorph.prototype.popUpsMarkedForClosure=[],window.WorldMorph.prototype.freshlyCreatedPopUps=[],window.WorldMorph.prototype.openPopUps=[],window.WorldMorph.prototype.broken=nil,window.WorldMorph.prototype.duplicatedBrokenRectsTracker=nil,window.WorldMorph.prototype.numberOfDuplicatedBrokenRects=0,window.WorldMorph.prototype.numberOfMergedSourceAndDestination=0,window.WorldMorph.prototype.morphsToBeHighlighted=[],window.WorldMorph.prototype.currentHighlightingMorphs=[],window.WorldMorph.prototype.morphsBeingHighlighted=[],window.WorldMorph.prototype.morphsToBePinouted=[],window.WorldMorph.prototype.currentPinoutingMorphs=[],window.WorldMorph.prototype.morphsBeingPinouted=[],window.WorldMorph.prototype.steppingMorphs=[],window.WorldMorph.prototype.basementWdgt=nil,window.WorldMorph.prototype.maxShadowSize=6,window.WorldMorph.prototype.events=[],window.WorldMorph.prototype.outstandingTimerTriggeredOperationsCounter=[],window.WorldMorph.prototype.widgetsReferencingOtherWidgets=[],window.WorldMorph.prototype.incrementalGcSessionId=0,window.WorldMorph.prototype.desktopSidesPadding=10,window.WorldMorph.prototype.laysIconsHorizontallyInGrid=!1,window.WorldMorph.prototype.iconsLayingInGridWrapCount=5,window.WorldMorph.prototype.errorsWhileRepainting=[],window.WorldMorph.prototype.paintingWidget=nil,window.WorldMorph.prototype.widgetsGivingErrorWhileRepainting=[],window.WorldMorph.prototype.lastNonTextPropertyChangerButtonClickedOrDropped=nil,window.WorldMorph.prototype.patternName=nil,window.WorldMorph.prototype.pattern1="plain",window.WorldMorph.prototype.pattern2="circles",window.WorldMorph.prototype.pattern3="vert. stripes",window.WorldMorph.prototype.pattern4="oblique stripes",window.WorldMorph.prototype.pattern5="dots",window.WorldMorph.prototype.pattern6="zigzag",window.WorldMorph.prototype.pattern7="bricks",window.WorldMorph.prototype.howManyUntitledShortcuts=0,window.WorldMorph.prototype.howManyUntitledFoldersShortcuts=0,window.WorldMorph.prototype.isIndexPage=nil,window.WorldMorph.prototype.colloquialName=function(){return"Desktop"},window.WorldMorph.prototype.makePrettier=function(){return WorldMorph.preferencesAndSettings.menuFontSize=14,WorldMorph.preferencesAndSettings.menuHeaderFontSize=13,WorldMorph.preferencesAndSettings.menuHeaderColor=new Color(125,125,125),WorldMorph.preferencesAndSettings.menuHeaderBold=!1,WorldMorph.preferencesAndSettings.menuStrokeColor=new Color(186,186,186),WorldMorph.preferencesAndSettings.menuBackgroundColor=new Color(250,250,250),WorldMorph.preferencesAndSettings.menuButtonsLabelColor=new Color(50,50,50),WorldMorph.preferencesAndSettings.normalTextFontSize=13,WorldMorph.preferencesAndSettings.titleBarTextFontSize=13,WorldMorph.preferencesAndSettings.titleBarTextHeight=16,WorldMorph.preferencesAndSettings.titleBarBoldText=!1,WorldMorph.preferencesAndSettings.bubbleHelpFontSize=12,WorldMorph.preferencesAndSettings.iconDarkLineColor=new Color(37,37,37),WorldMorph.preferencesAndSettings.defaultPanelsBackgroundColor=new Color(249,249,249),WorldMorph.preferencesAndSettings.defaultPanelsStrokeColor=new Color(198,198,198),this.changed()},window.WorldMorph.prototype.getNextUntitledShortcutName=function(){var name;return name="Untitled",this.howManyUntitledShortcuts>0&&(name+=" "+(this.howManyUntitledShortcuts+1)),this.howManyUntitledShortcuts++,name},window.WorldMorph.prototype.getNextUntitledFolderShortcutName=function(){var name;return name="new folder",this.howManyUntitledFoldersShortcuts>0&&(name+=" "+(this.howManyUntitledFoldersShortcuts+1)),this.howManyUntitledFoldersShortcuts++,name},window.WorldMorph.prototype.wantsDropOf=function(aMorph){return this._acceptsDrops},window.WorldMorph.prototype.createErrorConsole=function(){var errorsLogViewerMorph,wm;return errorsLogViewerMorph=new ErrorsLogViewerMorph("Errors",this,"modifyCodeToBeInjected",""),(wm=new WindowWdgt(nil,nil,errorsLogViewerMorph)).setExtent(new Point(460,400)),world.add(wm),wm.changed(),this.errorConsole=wm,this.errorConsole.fullMoveTo(new Point(190,10)),this.errorConsole.setExtent(new Point(550,415)),this.errorConsole.hide()},window.WorldMorph.prototype.boot=function(){var acm,exampleDocsFolder,spinner,splashScreenFakeDesktop;if(document.body.addEventListener("touchmove",function(evt){evt._isScroller||evt.preventDefault()}),(spinner=document.getElementById("spinner")).parentNode.removeChild(spinner),(splashScreenFakeDesktop=document.getElementById("splashScreenFakeDesktop")).parentNode.removeChild(splashScreenFakeDesktop),this.isIndexPage&&(this.setColor(new Color(244,243,244)),this.makePrettier()),console.log("booting"),this.basementWdgt=new BasementWdgt,WorldMorph.bootState=WorldMorph.JUST_STARTED,ProfilingDataCollector.enableProfiling(),ProfilingDataCollector.enableBrokenRectsProfiling(),WorldMorph.ongoingUrlActionNumber=0,this.isIndexPage)return(acm=new AnalogClockWdgt).rawSetExtent(new Point(80,80)),acm.fullRawMoveTo(new Point(this.right()-80-this.desktopSidesPadding,this.top()+this.desktopSidesPadding)),this.add(acm),menusHelper.createWelcomeMessageWindowAndShortcut(),menusHelper.createHowToSaveMessageOpener(),menusHelper.basementIconAndText(),menusHelper.createSimpleDocumentLauncher(),menusHelper.createFizzyPaintLauncher(),menusHelper.createSimpleSlideLauncher(),menusHelper.createDashboardsLauncher(),menusHelper.createPatchProgrammingLauncher(),menusHelper.createGenericPanelLauncher(),menusHelper.createToolbarsOpener(),exampleDocsFolder=this.makeFolder(nil,nil,"example docs"),menusHelper.createDegreesConverterOpener(exampleDocsFolder),menusHelper.createSampleDashboardOpener(exampleDocsFolder)},window.WorldMorph.prototype.nextStartupAction=function(){var currentAction,startupActions;if(null!=(startupActions=JSON.parse(getParameterByName("startupActions")))&&WorldMorph.ongoingUrlActionNumber!==startupActions.actions.length||(WorldMorph.bootState=WorldMorph.BOOT_COMPLETE,WorldMorph.ongoingUrlActionNumber=0,"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&-1!==window.location.href.indexOf("worldWithSystemTestHarness")&&this.automatorRecorderAndPlayer.atLeastOneTestHasBeenRun&&this.automatorRecorderAndPlayer.allTestsPassedSoFar&&(document.getElementById("background").style.background="green")),WorldMorph.bootState!==WorldMorph.BOOT_COMPLETE)return console.log("nextStartupAction "+(WorldMorph.ongoingUrlActionNumber+1)+" / "+startupActions.actions.length),currentAction=startupActions.actions[WorldMorph.ongoingUrlActionNumber],"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&"runTests"===currentAction.name&&(this.automatorRecorderAndPlayer.selectTestsFromTagsOrTestNames(currentAction.testsToRun),null!=currentAction.numberOfGroups?this.automatorRecorderAndPlayer.numberOfGroups=currentAction.numberOfGroups:this.automatorRecorderAndPlayer.numberOfGroups=1,null!=currentAction.groupToBeRun?this.automatorRecorderAndPlayer.groupToBeRun=currentAction.groupToBeRun:this.automatorRecorderAndPlayer.groupToBeRun=0,null!=currentAction.forceSlowTestPlaying&&(this.automatorRecorderAndPlayer.forceSlowTestPlaying=!0),null!=currentAction.forceTurbo&&(this.automatorRecorderAndPlayer.forceTurbo=!0),null!=currentAction.forceSkippingInBetweenMouseMoves&&(this.automatorRecorderAndPlayer.forceSkippingInBetweenMouseMoves=!0),null!=currentAction.forceRunningInBetweenMouseMoves&&(this.automatorRecorderAndPlayer.forceRunningInBetweenMouseMoves=!0),this.automatorRecorderAndPlayer.runAllSystemTests()),WorldMorph.ongoingUrlActionNumber++},window.WorldMorph.prototype.mostRecentlyCreatedPopUp=function(){var eachPopUp,i,j,k,len,mostRecentPopUp,ref1;for(mostRecentPopUp=nil,-1,i=j=this.openPopUps.length-1;j>=0;i=j+=-1)this.openPopUps[i].isOrphan()&&this.openPopUps.splice(i,1);for(k=0,len=(ref1=this.openPopUps).length;k<len;k++)(eachPopUp=ref1[k]).instanceNumericID>=-1&&(mostRecentPopUp=eachPopUp);return mostRecentPopUp},window.WorldMorph.prototype.alignIDsOfNextMorphsInSystemTests=function(){var base,eachMorphClass,j,len,listOfMorphsClasses,results,theWordMorph,theWordWdgt,theWordWidget;if("undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE){for(theWordMorph="Morph",theWordWdgt="Wdgt",theWordWidget="Widget",results=[],j=0,len=(listOfMorphsClasses=Object.keys(window).filter(function(i){return-1!==i.indexOf(theWordMorph,i.length-theWordMorph.length)||-1!==i.indexOf(theWordWdgt,i.length-theWordWdgt.length)||-1!==i.indexOf(theWordWidget,i.length-theWordWidget.length)})).length;j<len;j++)eachMorphClass=listOfMorphsClasses[j],results.push("function"==typeof(base=window[eachMorphClass]).roundNumericIDsToNextThousand?base.roundNumericIDsToNextThousand():void 0);return results}},window.WorldMorph.prototype.closePopUpsMarkedForClosure=function(){var i,len,ref;for(i=0,len=(ref=this.popUpsMarkedForClosure).length;i<len;i++)ref[i].close();return this.popUpsMarkedForClosure=[]},window.WorldMorph.prototype.brokenFor=function(aMorph){var fb;return fb=aMorph.fullBounds(),this.broken.filter(function(rect){return rect.isIntersecting(fb)})},window.WorldMorph.prototype.fullPaintIntoAreaOrBlitFromBackBuffer=function(aContext,aRect){return WorldMorph.__super__.fullPaintIntoAreaOrBlitFromBackBuffer.call(this,aContext,aRect),this.hand.fullPaintIntoAreaOrBlitFromBackBuffer(aContext,aRect)},window.WorldMorph.prototype.clippedThroughBounds=function(){return this.checkClippedThroughBoundsCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes,this.clippedThroughBoundsCache=this.boundingBox(),this.clippedThroughBoundsCache},window.WorldMorph.prototype.clipThrough=function(){return this.checkClipThroughCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes,this.clipThroughCache=this.boundingBox(),this.clipThroughCache},window.WorldMorph.prototype.pushBrokenRect=function(brokenMorph,theRect,isSrc){return null!=this.duplicatedBrokenRectsTracker[theRect.toString()]?this.numberOfDuplicatedBrokenRects++:(isSrc?brokenMorph.srcBrokenRect=this.broken.length:brokenMorph.dstBrokenRect=this.broken.length,this.broken.push(theRect)),this.duplicatedBrokenRectsTracker[theRect.toString()]=!0},window.WorldMorph.prototype.mergeBrokenRectsIfCloseOrPushBoth=function(brokenMorph,sourceBroken,destinationBroken){var mergedBrokenRect,mergedBrokenRectArea,sumArea;return mergedBrokenRect=sourceBroken.merge(destinationBroken),mergedBrokenRectArea=mergedBrokenRect.area(),sumArea=sourceBroken.area()+destinationBroken.area(),mergedBrokenRectArea<sumArea+sumArea/10?(this.pushBrokenRect(brokenMorph,mergedBrokenRect,!0),this.numberOfMergedSourceAndDestination++):(this.pushBrokenRect(brokenMorph,sourceBroken,!0),this.pushBrokenRect(brokenMorph,destinationBroken,!1))},window.WorldMorph.prototype.checkARectWithHierarchy=function(aRect,brokenMorph,isSrc){var brokenMorphAncestor,results;for(brokenMorphAncestor=brokenMorph,results=[];null!=brokenMorphAncestor.parent;)null!=(brokenMorphAncestor=brokenMorphAncestor.parent).srcBrokenRect&&(this.broken[brokenMorphAncestor.srcBrokenRect],this.broken[brokenMorphAncestor.srcBrokenRect].containsRectangle(aRect)?isSrc?(this.broken[brokenMorph.srcBrokenRect]=nil,brokenMorph.srcBrokenRect=nil):(this.broken[brokenMorph.dstBrokenRect]=nil,brokenMorph.dstBrokenRect=nil):aRect.containsRectangle(this.broken[brokenMorphAncestor.srcBrokenRect])&&(this.broken[brokenMorphAncestor.srcBrokenRect]=nil,brokenMorphAncestor.srcBrokenRect=nil)),null!=brokenMorphAncestor.dstBrokenRect?(this.broken[brokenMorphAncestor.dstBrokenRect],this.broken[brokenMorphAncestor.dstBrokenRect].containsRectangle(aRect)?isSrc?(this.broken[brokenMorph.srcBrokenRect]=nil,results.push(brokenMorph.srcBrokenRect=nil)):(this.broken[brokenMorph.dstBrokenRect]=nil,results.push(brokenMorph.dstBrokenRect=nil)):aRect.containsRectangle(this.broken[brokenMorphAncestor.dstBrokenRect])?(this.broken[brokenMorphAncestor.dstBrokenRect]=nil,results.push(brokenMorphAncestor.dstBrokenRect=nil)):results.push(void 0)):results.push(void 0);return results},window.WorldMorph.prototype.rectAlreadyIncludedInParentBrokenMorph=function(){var aRect,brokenMorph,i,j,len,len1,ref,ref1,results;for(i=0,len=(ref=window.morphsThatMaybeChangedGeometryOrPosition).length;i<len;i++)null!=(brokenMorph=ref[i]).srcBrokenRect&&(aRect=this.broken[brokenMorph.srcBrokenRect],this.checkARectWithHierarchy(aRect,brokenMorph,!0)),null!=brokenMorph.dstBrokenRect&&(aRect=this.broken[brokenMorph.dstBrokenRect],this.checkARectWithHierarchy(aRect,brokenMorph,!1));for(results=[],j=0,len1=(ref1=window.morphsThatMaybeChangedFullGeometryOrPosition).length;j<len1;j++)null!=(brokenMorph=ref1[j]).srcBrokenRect&&(aRect=this.broken[brokenMorph.srcBrokenRect],this.checkARectWithHierarchy(aRect,brokenMorph)),null!=brokenMorph.dstBrokenRect?(aRect=this.broken[brokenMorph.dstBrokenRect],results.push(this.checkARectWithHierarchy(aRect,brokenMorph))):results.push(void 0);return results},window.WorldMorph.prototype.cleanupSrcAndDestRectsOfMorphs=function(){var brokenMorph,i,j,len,len1,ref,ref1,results;for(i=0,len=(ref=window.morphsThatMaybeChangedGeometryOrPosition).length;i<len;i++)(brokenMorph=ref[i]).srcBrokenRect=nil,brokenMorph.dstBrokenRect=nil;for(results=[],j=0,len1=(ref1=window.morphsThatMaybeChangedFullGeometryOrPosition).length;j<len1;j++)(brokenMorph=ref1[j]).srcBrokenRect=nil,results.push(brokenMorph.dstBrokenRect=nil);return results},window.WorldMorph.prototype.fleshOutBroken=function(){var boundsToBeChanged,brokenMorph,destinationBroken,i,len,ref,results,sourceBroken;for(sourceBroken=nil,destinationBroken=nil,results=[],i=0,len=(ref=window.morphsThatMaybeChangedGeometryOrPosition).length;i<len;i++)null!=(brokenMorph=ref[i]).clippedBoundsWhenLastPainted&&brokenMorph.clippedBoundsWhenLastPainted.isNotEmpty()&&(sourceBroken=brokenMorph.clippedBoundsWhenLastPainted.growBy(this.maxShadowSize)),brokenMorph.surelyNotShowingUpOnScreenBasedOnVisibilityCollapseAndOrphanage()||(boundsToBeChanged=brokenMorph.clippedThroughBounds()).isNotEmpty()&&(destinationBroken=boundsToBeChanged.spread().growBy(this.maxShadowSize)),null!=sourceBroken&&null!=destinationBroken?this.mergeBrokenRectsIfCloseOrPushBoth(brokenMorph,sourceBroken,destinationBroken):null==sourceBroken&&null==destinationBroken||(null!=sourceBroken?this.pushBrokenRect(brokenMorph,sourceBroken,!0):this.pushBrokenRect(brokenMorph,destinationBroken,!0)),brokenMorph.geometryOrPositionPossiblyChanged=!1,results.push(brokenMorph.clippedBoundsWhenLastPainted=nil);return results},window.WorldMorph.prototype.fleshOutFullBroken=function(){var boundsToBeChanged,brokenMorph,destinationBroken,i,len,ref,results,sourceBroken;for(sourceBroken=nil,destinationBroken=nil,results=[],i=0,len=(ref=window.morphsThatMaybeChangedFullGeometryOrPosition).length;i<len;i++)null!=(brokenMorph=ref[i]).fullClippedBoundsWhenLastPainted&&brokenMorph.fullClippedBoundsWhenLastPainted.isNotEmpty()&&(sourceBroken=brokenMorph.fullClippedBoundsWhenLastPainted.growBy(this.maxShadowSize)),brokenMorph.surelyNotShowingUpOnScreenBasedOnVisibilityCollapseAndOrphanage()||(boundsToBeChanged=brokenMorph.fullClippedBounds()).isNotEmpty()&&(destinationBroken=boundsToBeChanged.spread().growBy(this.maxShadowSize)),null!=sourceBroken&&null!=destinationBroken?this.mergeBrokenRectsIfCloseOrPushBoth(brokenMorph,sourceBroken,destinationBroken):null==sourceBroken&&null==destinationBroken||(null!=sourceBroken?this.pushBrokenRect(brokenMorph,sourceBroken,!0):this.pushBrokenRect(brokenMorph,destinationBroken,!0)),brokenMorph.fullGeometryOrPositionPossiblyChanged=!1,results.push(brokenMorph.fullClippedBoundsWhenLastPainted=nil);return results},window.WorldMorph.prototype.showBrokenRects=function(aContext){var eachBrokenRect,i,len,randomB,randomG,randomR,ref;for(aContext.save(),aContext.globalAlpha=.5,aContext.scale(pixelRatio,pixelRatio),i=0,len=(ref=this.broken).length;i<len;i++)null!=(eachBrokenRect=ref[i])&&(randomR=Math.round(255*Math.random()),randomG=Math.round(255*Math.random()),randomB=Math.round(255*Math.random()),aContext.fillStyle="rgb("+randomR+","+randomG+","+randomB+")",aContext.fillRect(Math.round(eachBrokenRect.origin.x),Math.round(eachBrokenRect.origin.y),Math.round(eachBrokenRect.width()),Math.round(eachBrokenRect.height())));return aContext.restore()},window.WorldMorph.prototype.recalculateLayouts=function(){for(var err,tryThisMorph;0!==morphsThatMaybeChangedLayout.length;){for(;(tryThisMorph=morphsThatMaybeChangedLayout[morphsThatMaybeChangedLayout.length-1]).layoutIsValid;)if(morphsThatMaybeChangedLayout.pop(),0===morphsThatMaybeChangedLayout.length)return;for(;null!=tryThisMorph.parent&&tryThisMorph.layoutSpec!==LayoutSpec.ATTACHEDAS_FREEFLOATING&&!tryThisMorph.parent.layoutIsValid;)tryThisMorph=tryThisMorph.parent;try{tryThisMorph.doLayout()}catch(error){err=error,this.softResetWorld(),null==world.errorConsole&&world.createErrorConsole(),this.errorConsole.contents.showUpWithError(err)}}},window.WorldMorph.prototype.clearGeometryOrPositionPossiblyChangedFlags=function(){var i,len,m,ref,results;for(results=[],i=0,len=(ref=window.morphsThatMaybeChangedGeometryOrPosition).length;i<len;i++)m=ref[i],results.push(m.geometryOrPositionPossiblyChanged=!1);return results},window.WorldMorph.prototype.clearFullGeometryOrPositionPossiblyChangedFlags=function(){var i,len,m,ref,results;for(results=[],i=0,len=(ref=window.morphsThatMaybeChangedFullGeometryOrPosition).length;i<len;i++)m=ref[i],results.push(m.fullGeometryOrPositionPossiblyChanged=!1);return results},window.WorldMorph.prototype.updateBroken=function(){if(this.broken=[],this.duplicatedBrokenRectsTracker={},this.numberOfDuplicatedBrokenRects=0,this.numberOfMergedSourceAndDestination=0,this.fleshOutFullBroken(),this.fleshOutBroken(),this.rectAlreadyIncludedInParentBrokenMorph(),this.cleanupSrcAndDestRectsOfMorphs(),this.clearGeometryOrPositionPossiblyChangedFlags(),this.clearFullGeometryOrPositionPossiblyChangedFlags(),window.morphsThatMaybeChangedGeometryOrPosition=[],window.morphsThatMaybeChangedFullGeometryOrPosition=[],window.healingRectanglesPhase=!0,this.errorsWhileRepainting=[],this.broken.forEach(rect=>{var err;if(null!=rect&&rect.isNotEmpty())try{return this.fullPaintIntoAreaOrBlitFromBackBuffer(this.worldCanvasContext,rect)}catch(error){return err=error,this.resetWorldCanvasContext(),this.queueErrorForLaterReporting(err),this.hideOffendingWidget(),this.softResetWorld()}}),0!==this.errorsWhileRepainting.length&&this.findOutAllOtherOffendingWidgetsAndPaintWholeScreen(),world.showRedraws&&this.showBrokenRects(this.worldCanvasContext),this.resetDataStructuresForBrokenRects(),window.healingRectanglesPhase=!1,1!==trackChanges.length&&!0!==trackChanges[0])return alert("trackChanges array should have only one element (true)")},window.WorldMorph.prototype.findOutAllOtherOffendingWidgetsAndPaintWholeScreen=function(){var currentErrorsCount,err,previousErrorsCount,results;for(currentErrorsCount=this.errorsWhileRepainting.length,previousErrorsCount=nil,0,results=[];previousErrorsCount!==currentErrorsCount;){0;try{this.fullPaintIntoAreaOrBlitFromBackBuffer(this.worldCanvasContext,this.bounds)}catch(error){err=error,this.resetWorldCanvasContext(),this.queueErrorForLaterReporting(err),this.hideOffendingWidget(),this.softResetWorld()}previousErrorsCount=currentErrorsCount,results.push(currentErrorsCount=this.errorsWhileRepainting.length)}return results},window.WorldMorph.prototype.resetWorldCanvasContext=function(){var base,base1,i,results;for(this.worldCanvasContext.closePath(),"function"==typeof(base=this.worldCanvasContext).resetClip&&base.resetClip(),"function"==typeof(base1=this.worldCanvasContext).resetTransform&&base1.resetTransform(),results=[],i=1;i<2e3;++i)results.push(this.worldCanvasContext.restore());return results},window.WorldMorph.prototype.queueErrorForLaterReporting=function(err){if(this.errorsWhileRepainting.push(err),-1===this.widgetsGivingErrorWhileRepainting.indexOf(this.paintingWidget))return this.widgetsGivingErrorWhileRepainting.push(this.paintingWidget),this.paintingWidget.silentHide()},window.WorldMorph.prototype.hideOffendingWidget=function(){if(-1===this.widgetsGivingErrorWhileRepainting.indexOf(this.paintingWidget))return this.widgetsGivingErrorWhileRepainting.push(this.paintingWidget),this.paintingWidget.silentHide()},window.WorldMorph.prototype.resetDataStructuresForBrokenRects=function(){return this.broken=[],this.duplicatedBrokenRectsTracker={},this.numberOfDuplicatedBrokenRects=0,this.numberOfMergedSourceAndDestination=0},window.WorldMorph.prototype.addPinoutingMorphs=function(){var eachMorphNeedingPinout,eachPinoutingMorph,hM,i,j,len,len1,peekThroughBox,ref,ref1,ref2,results;for(i=0,len=(ref=this.currentPinoutingMorphs.slice()).length;i<len;i++)ref1=(eachPinoutingMorph=ref[i]).morphThisMorphIsPinouting,indexOf.call(this.morphsToBePinouted,ref1)>=0?eachPinoutingMorph.morphThisMorphIsPinouting.hasMaybeChangedGeometryOrPosition()&&(peekThroughBox=eachPinoutingMorph.morphThisMorphIsPinouting.clippedThroughBounds(),eachPinoutingMorph.fullRawMoveTo(new Point(peekThroughBox.right()+10,peekThroughBox.top()))):(this.currentPinoutingMorphs.remove(eachPinoutingMorph),this.morphsBeingPinouted.remove(eachPinoutingMorph.morphThisMorphIsPinouting),eachPinoutingMorph.morphThisMorphIsPinouting=nil,eachPinoutingMorph.fullDestroy());for(results=[],j=0,len1=(ref2=this.morphsToBePinouted.slice()).length;j<len1;j++)eachMorphNeedingPinout=ref2[j],indexOf.call(this.morphsBeingPinouted,eachMorphNeedingPinout)<0?(hM=new StringMorph2(eachMorphNeedingPinout.toString()),world.add(hM),hM.morphThisMorphIsPinouting=eachMorphNeedingPinout,peekThroughBox=eachMorphNeedingPinout.clippedThroughBounds(),hM.fullRawMoveTo(new Point(peekThroughBox.right()+10,peekThroughBox.top())),hM.setColor(new Color(0,0,255)),hM.setWidth(400),this.currentPinoutingMorphs.push(hM),results.push(this.morphsBeingPinouted.push(eachMorphNeedingPinout))):results.push(void 0);return results},window.WorldMorph.prototype.addHighlightingMorphs=function(){var eachHighlightingMorph,eachMorphNeedingHighlight,hM,i,j,len,len1,ref,ref1,ref2,results;for(i=0,len=(ref=this.currentHighlightingMorphs.slice()).length;i<len;i++)ref1=(eachHighlightingMorph=ref[i]).morphThisMorphIsHighlighting,indexOf.call(this.morphsToBeHighlighted,ref1)>=0?eachHighlightingMorph.morphThisMorphIsHighlighting.hasMaybeChangedGeometryOrPosition()&&eachHighlightingMorph.rawSetBounds(eachHighlightingMorph.morphThisMorphIsHighlighting.clippedThroughBounds()):(this.currentHighlightingMorphs.remove(eachHighlightingMorph),this.morphsBeingHighlighted.remove(eachHighlightingMorph.morphThisMorphIsHighlighting),eachHighlightingMorph.morphThisMorphIsHighlighting=nil,eachHighlightingMorph.fullDestroy());for(results=[],j=0,len1=(ref2=this.morphsToBeHighlighted.slice()).length;j<len1;j++)eachMorphNeedingHighlight=ref2[j],indexOf.call(this.morphsBeingHighlighted,eachMorphNeedingHighlight)<0?(hM=new HighlighterMorph,world.add(hM),hM.morphThisMorphIsHighlighting=eachMorphNeedingHighlight,hM.rawSetBounds(eachMorphNeedingHighlight.clippedThroughBounds()),hM.setColor(new Color(0,0,255)),hM.setAlphaScaled(50),this.currentHighlightingMorphs.push(hM),results.push(this.morphsBeingHighlighted.push(eachMorphNeedingHighlight))):results.push(void 0);return results},window.WorldMorph.prototype.playQueuedEvents=function(){var err,event,eventType,i,j,posInDocument,ref,worldX,worldY;try{for(i=j=0,ref=this.events.length;j<ref;i=j+=2)switch(eventType=this.events[i],event=this.events[i+1],eventType){case"inputDOMElementForVirtualKeyboardKeydownEventListener":this.keyboardEventsReceiver&&this.keyboardEventsReceiver.processKeyDown(event),"U+0009"!==event.keyIdentifier&&"Tab"!==event.keyIdentifier||this.keyboardEventsReceiver&&this.keyboardEventsReceiver.processKeyPress(event);break;case"inputDOMElementForVirtualKeyboardKeyupEventListener":this.keyboardEventsReceiver&&this.keyboardEventsReceiver.processKeyUp&&this.keyboardEventsReceiver.processKeyUp(event);break;case"inputDOMElementForVirtualKeyboardKeypressEventListener":this.keyboardEventsReceiver&&this.keyboardEventsReceiver.processKeyPress(event);break;case"mousedownEventListener":this.processMouseDown(event.button,event.buttons,event.ctrlKey,event.shiftKey,event.altKey,event.metaKey);break;case"touchstartEventListener":this.hand.processTouchStart(event);break;case"mouseupEventListener":this.processMouseUp(event.button,event.ctrlKey,event.buttons,event.shiftKey,event.altKey,event.metaKey);break;case"touchendEventListener":this.hand.processTouchEnd(event);break;case"mousemoveEventListener":posInDocument=getDocumentPositionOf(this.worldCanvas),worldX=event.pageX-posInDocument.x,worldY=event.pageY-posInDocument.y,this.processMouseMove(worldX,worldY,event.button,event.buttons,event.ctrlKey,event.shiftKey,event.altKey,event.metaKey);break;case"touchmoveEventListener":this.hand.processTouchMove(event);break;case"keydownEventListener":this.processKeydown(event,event.keyCode,event.shiftKey,event.ctrlKey,event.altKey,event.metaKey);break;case"keyupEventListener":this.processKeyup(event,event.keyCode,event.shiftKey,event.ctrlKey,event.altKey,event.metaKey);break;case"keypressEventListener":this.processKeypress(event,event.keyCode,this.getChar(event),event.shiftKey,event.ctrlKey,event.altKey,event.metaKey);break;case"wheelEventListener":this.processWheel(event.deltaX,event.deltaY,event.deltaZ,event.altKey,event.button,event.buttons);break;case"cutEventListener":this.processCut(event);break;case"copyEventListener":this.processCopy(event);break;case"pasteEventListener":this.processPaste(event);break;case"dropEventListener":this.hand.processDrop(event);break;case"resizeEventListener":this.automaticallyAdjustToFillEntireBrowserAlsoOnResize&&this.stretchWorldToFillEntirePage()}}catch(error){err=error,this.softResetWorld(),null==world.errorConsole&&world.createErrorConsole(),this.errorConsole.contents.showUpWithError(err)}return this.events=[]},window.WorldMorph.prototype.loadAPartOfFizzyGumSourceIfNeeded=function(){if(window.srcLoadsSteps.length>0)return window.srcLoadsSteps.shift().call()},window.WorldMorph.prototype.showErrorsHappenedInRepaintingStepInPreviousCycle=function(){var eachErr,i,len,ref,results;for(results=[],i=0,len=(ref=this.errorsWhileRepainting).length;i<len;i++)eachErr=ref[i],null==world.errorConsole&&world.createErrorConsole(),results.push(this.errorConsole.contents.showUpWithError(eachErr));return results},window.WorldMorph.prototype.doOneCycle=function(){return WorldMorph.currentTime=Date.now(),this.showErrorsHappenedInRepaintingStepInPreviousCycle(),this.playQueuedEvents(),this.runOtherTasksStepFunction(),this.loadAPartOfFizzyGumSourceIfNeeded(),this.runChildrensStepFunction(),this.hand.reCheckMouseEntersAndMouseLeavesAfterPotentialGeometryChanges(),window.recalculatingLayouts=!0,this.recalculateLayouts(),window.recalculatingLayouts=!1,this.addPinoutingMorphs(),this.addHighlightingMorphs(),this.updateBroken(),WorldMorph.frameCount++},window.WorldMorph.prototype.addSteppingMorph=function(theMorph){if(-1===this.steppingMorphs.indexOf(theMorph))return this.steppingMorphs.push(theMorph)},window.WorldMorph.prototype.removeSteppingMorph=function(theMorph){if(-1!==this.steppingMorphs.indexOf(theMorph))return this.steppingMorphs.remove(theMorph)},window.WorldMorph.prototype.runChildrensStepFunction=function(){var eachSteppingMorph,elapsedMilliseconds,err,i,len,nxt,results,steppingMorphs;for(results=[],i=0,len=(steppingMorphs=arrayShallowCopy(this.steppingMorphs)).length;i<len;i++)if(!(eachSteppingMorph=steppingMorphs[i]).isBeingFloatDragged())if(elapsedMilliseconds=WorldMorph.currentTime-eachSteppingMorph.lastTime,(eachSteppingMorph.fps>0?1e3/eachSteppingMorph.fps-elapsedMilliseconds:0)<=1){eachSteppingMorph.lastTime=WorldMorph.currentTime,eachSteppingMorph.onNextStep&&(nxt=eachSteppingMorph.onNextStep,eachSteppingMorph.onNextStep=nil,nxt.call(eachSteppingMorph)),eachSteppingMorph.step;try{results.push(eachSteppingMorph.step())}catch(error){err=error,this.softResetWorld(),null==world.errorConsole&&world.createErrorConsole(),results.push(this.errorConsole.contents.showUpWithError(err))}}else results.push(void 0);return results},window.WorldMorph.prototype.runOtherTasksStepFunction=function(){var i,len,ref,results,task;for(results=[],i=0,len=(ref=this.otherTasksToBeRunOnStep).length;i<len;i++)task=ref[i],results.push(task());return results},window.WorldMorph.prototype.sizeCanvasToTestScreenResolution=function(){var bkground;return this.worldCanvas.width=Math.round(960*pixelRatio),this.worldCanvas.height=Math.round(440*pixelRatio),this.worldCanvas.style.width="960px",this.worldCanvas.style.height="440px",bkground=document.getElementById("background"),bkground.style.width="960px",bkground.style.height="720px",bkground.style.backgroundColor="rgb(245, 245, 245)"},window.WorldMorph.prototype.stretchWorldToFillEntirePage=function(){var clientHeight,clientWidth,pos;if(this.automaticallyAdjustToFillEntireBrowserAlsoOnResize=!0,pos=getDocumentPositionOf(this.worldCanvas),clientHeight=window.innerHeight,clientWidth=window.innerWidth,pos.x>0&&(this.worldCanvas.style.position="absolute",this.worldCanvas.style.left="0px",pos.x=0),pos.y>0&&(this.worldCanvas.style.position="absolute",this.worldCanvas.style.top="0px",pos.y=0),document.body.scrollTop&&(clientHeight=document.documentElement.clientHeight),document.body.scrollLeft&&(clientWidth=document.documentElement.clientWidth),this.worldCanvas.width!==clientWidth||this.worldCanvas.height!==clientHeight)return this.fullChanged(),this.worldCanvas.width=clientWidth*pixelRatio,this.worldCanvas.style.width=clientWidth+"px",this.worldCanvas.height=clientHeight*pixelRatio,this.worldCanvas.style.height=clientHeight+"px",this.rawSetExtent(new Point(clientWidth,clientHeight)),this.desktopReLayout()},window.WorldMorph.prototype.desktopReLayout=function(){var analogClockWdgt,basementOpenerWdgt;return null!=(basementOpenerWdgt=this.firstChildSuchThat(function(w){return w instanceof BasementOpenerWdgt}))&&(basementOpenerWdgt.userMovedThisFromComputedPosition?(basementOpenerWdgt.fullRawMoveInDesktopToFractionalPosition(),basementOpenerWdgt.wasPositionedSlightlyOutsidePanel||basementOpenerWdgt.fullRawMoveWithin(this)):basementOpenerWdgt.fullMoveTo(this.bottomRight().subtract(new Point(75,75).add(this.desktopSidesPadding)))),null!=(analogClockWdgt=this.firstChildSuchThat(function(w){return w instanceof AnalogClockWdgt}))&&(analogClockWdgt.userMovedThisFromComputedPosition?(analogClockWdgt.fullRawMoveInDesktopToFractionalPosition(),analogClockWdgt.wasPositionedSlightlyOutsidePanel||analogClockWdgt.fullRawMoveWithin(this)):analogClockWdgt.fullMoveTo(new Point(this.right()-80-this.desktopSidesPadding,this.top()+this.desktopSidesPadding))),this.children.forEach(child=>{if(!(child===basementOpenerWdgt||child===analogClockWdgt||child instanceof WidgetHolderWithCaptionWdgt||(null!=child.positionFractionalInHoldingPanel&&child.fullRawMoveInDesktopToFractionalPosition(),child.wasPositionedSlightlyOutsidePanel)))return child.fullRawMoveWithin(this)})},window.WorldMorph.prototype.initVirtualKeyboard=function(){if(this.inputDOMElementForVirtualKeyboard&&(document.body.removeChild(this.inputDOMElementForVirtualKeyboard),this.inputDOMElementForVirtualKeyboard=nil),WorldMorph.preferencesAndSettings.isTouchDevice&&WorldMorph.preferencesAndSettings.useVirtualKeyboard)return this.inputDOMElementForVirtualKeyboard=document.createElement("input"),this.inputDOMElementForVirtualKeyboard.type="text",this.inputDOMElementForVirtualKeyboard.style.color="transparent",this.inputDOMElementForVirtualKeyboard.style.backgroundColor="transparent",this.inputDOMElementForVirtualKeyboard.style.border="none",this.inputDOMElementForVirtualKeyboard.style.outline="none",this.inputDOMElementForVirtualKeyboard.style.position="absolute",this.inputDOMElementForVirtualKeyboard.style.top="0px",this.inputDOMElementForVirtualKeyboard.style.left="0px",this.inputDOMElementForVirtualKeyboard.style.width="0px",this.inputDOMElementForVirtualKeyboard.style.height="0px",this.inputDOMElementForVirtualKeyboard.autocapitalize="none",document.body.appendChild(this.inputDOMElementForVirtualKeyboard),this.inputDOMElementForVirtualKeyboardKeydownEventListener=(event=>{if(this.events.push("inputDOMElementForVirtualKeyboardKeydownEventListener"),this.events.push(event),"U+0008"!==event.keyIdentifier&&"Backspace"!==event.keyIdentifier||event.preventDefault(),"U+0009"===event.keyIdentifier||"Tab"===event.keyIdentifier)return event.preventDefault()}),this.inputDOMElementForVirtualKeyboard.addEventListener("keydown",this.inputDOMElementForVirtualKeyboardKeydownEventListener,!1),this.inputDOMElementForVirtualKeyboardKeyupEventListener=(event=>(this.events.push("inputDOMElementForVirtualKeyboardKeyupEventListener"),this.events.push(event),event.preventDefault())),this.inputDOMElementForVirtualKeyboard.addEventListener("keyup",this.inputDOMElementForVirtualKeyboardKeyupEventListener,!1),this.inputDOMElementForVirtualKeyboardKeypressEventListener=(event=>(this.events.push("inputDOMElementForVirtualKeyboardKeypressEventListener"),this.events.push(event),event.preventDefault())),this.inputDOMElementForVirtualKeyboard.addEventListener("keypress",this.inputDOMElementForVirtualKeyboardKeypressEventListener,!1)},window.WorldMorph.prototype.getPointerAndMorphInfo=function(topMorphUnderPointer=this.hand.topMorphUnderPointer()){var absoluteBoundsOfMorphRelativeToWorld,isPartOfListMorph,morphIdentifierViaTextLabel,morphPathRelativeToWorld,pointerPositionFractionalInMorph,pointerPositionPixelsInMorph,pointerPositionPixelsInWorld;return absoluteBoundsOfMorphRelativeToWorld=topMorphUnderPointer.boundingBox().asArray_xywh(),morphIdentifierViaTextLabel=topMorphUnderPointer.identifyViaTextLabel(),morphPathRelativeToWorld=topMorphUnderPointer.pathOfChildrenPositionsRelativeToWorld(),pointerPositionFractionalInMorph=this.hand.positionFractionalInMorph(topMorphUnderPointer),pointerPositionPixelsInMorph=this.hand.positionPixelsInMorph(topMorphUnderPointer),pointerPositionPixelsInWorld=this.hand.position(),isPartOfListMorph=null!=topMorphUnderPointer.parentThatIsA(ListMorph),[topMorphUnderPointer.uniqueIDString(),morphPathRelativeToWorld,morphIdentifierViaTextLabel,absoluteBoundsOfMorphRelativeToWorld,pointerPositionFractionalInMorph,pointerPositionPixelsInMorph,pointerPositionPixelsInWorld,isPartOfListMorph]},window.WorldMorph.prototype.addMouseChangeCommand=function(upOrDown,button,buttons,ctrlKey,shiftKey,altKey,metaKey){var pointerAndMorphInfo;if("undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state===AutomatorRecorderAndPlayer.RECORDING)return pointerAndMorphInfo=this.getPointerAndMorphInfo(),this.automatorRecorderAndPlayer.addMouseChangeCommand(upOrDown,button,buttons,ctrlKey,shiftKey,altKey,metaKey,...pointerAndMorphInfo)},window.WorldMorph.prototype.processMouseDown=function(button,buttons,ctrlKey,shiftKey,altKey,metaKey){return this.addMouseChangeCommand("down",button,buttons,ctrlKey,shiftKey,altKey,metaKey),this.hand.processMouseDown(button,buttons,ctrlKey,shiftKey,altKey,metaKey)},window.WorldMorph.prototype.processMouseUp=function(button,buttons,ctrlKey,shiftKey,altKey,metaKey){return this.addMouseChangeCommand("up",button,buttons,ctrlKey,shiftKey,altKey,metaKey),this.hand.processMouseUp(button,buttons,ctrlKey,shiftKey,altKey,metaKey)},window.WorldMorph.prototype.processMouseMove=function(pageX,pageY,button,buttons,ctrlKey,shiftKey,altKey,metaKey){var action,arr;if(this.hand.processMouseMove(pageX,pageY,button,buttons,ctrlKey,shiftKey,altKey,metaKey),this.hand.floatDraggingSomething()&&"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state===AutomatorRecorderAndPlayer.RECORDING&&(action="floatDrag",arr=window.world.automatorRecorderAndPlayer.tagsCollectedWhileRecordingTest,indexOf.call(arr,action)<0&&arr.push(action)),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state===AutomatorRecorderAndPlayer.RECORDING)return this.automatorRecorderAndPlayer.addMouseMoveCommand(pageX,pageY,this.hand.floatDraggingSomething(),button,buttons,ctrlKey,shiftKey,altKey,metaKey)},window.WorldMorph.prototype.processWheel=function(deltaX,deltaY,deltaZ,altKey,button,buttons){var pointerAndMorphInfo;return"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state===AutomatorRecorderAndPlayer.RECORDING&&(pointerAndMorphInfo=this.getPointerAndMorphInfo(),this.automatorRecorderAndPlayer.addWheelCommand(deltaX,deltaY,deltaZ,altKey,button,buttons,...pointerAndMorphInfo)),this.hand.processWheel(deltaX,deltaY,deltaZ,altKey,button,buttons)},window.WorldMorph.prototype.getChar=function(event){return null==event.which?String.fromCharCode(event.keyCode):0!==event.which&&0!==event.charCode?String.fromCharCode(event.which):nil},window.WorldMorph.prototype.processKeydown=function(event,scanCode,shiftKey,ctrlKey,altKey,metaKey){if("undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state===AutomatorRecorderAndPlayer.RECORDING&&this.automatorRecorderAndPlayer.addKeyDownCommand(scanCode,shiftKey,ctrlKey,altKey,metaKey),this.keyboardEventsReceiver&&this.keyboardEventsReceiver.processKeyDown(scanCode,shiftKey,ctrlKey,altKey,metaKey),null!=event&&8===scanCode&&event.preventDefault(),null!=event&&9===scanCode)return this.keyboardEventsReceiver&&this.keyboardEventsReceiver.processKeyPress(scanCode,"\t",shiftKey,ctrlKey,altKey,metaKey),event.preventDefault()},window.WorldMorph.prototype.processKeyup=function(event,scanCode,shiftKey,ctrlKey,altKey,metaKey){if("undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state===AutomatorRecorderAndPlayer.RECORDING&&this.automatorRecorderAndPlayer.addKeyUpCommand(scanCode,shiftKey,ctrlKey,altKey,metaKey),this.keyboardEventsReceiver&&this.keyboardEventsReceiver.processKeyUp&&this.keyboardEventsReceiver.processKeyUp(scanCode,shiftKey,ctrlKey,altKey,metaKey),null!=event)return event.preventDefault()},window.WorldMorph.prototype.processKeypress=function(event,charCode,symbol,shiftKey,ctrlKey,altKey,metaKey){return"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state===AutomatorRecorderAndPlayer.RECORDING&&this.automatorRecorderAndPlayer.addKeyPressCommand(charCode,symbol,shiftKey,ctrlKey,altKey,metaKey),null!=event&&symbol===this.constructor.KEYPAD_0_mappedToThaiKeyboard_Q?(null==this.doublePressOfZeroKeypadKey?(this.doublePressOfZeroKeypadKey=1,setTimeout(()=>(1===this.doublePressOfZeroKeypadKey&&console.log("single keypress"),this.doublePressOfZeroKeypadKey=nil,event.keyCode=0,!1),300)):(this.doublePressOfZeroKeypadKey=nil,console.log("double keypress"),event.keyCode=0),!1):(this.keyboardEventsReceiver&&this.keyboardEventsReceiver.processKeyPress(charCode,symbol,shiftKey,ctrlKey,altKey,metaKey),null!=event?event.preventDefault():void 0)},window.WorldMorph.prototype.processCut=function(selectedText){if(console.log("processing cut"),this.caret&&(this.outstandingTimerTriggeredOperationsCounter.push(!0),window.setTimeout(()=>(this.caret.deleteLeft(),this.outstandingTimerTriggeredOperationsCounter.pop()),50,!0)),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state===AutomatorRecorderAndPlayer.RECORDING)return this.automatorRecorderAndPlayer.addCutCommand(selectedText)},window.WorldMorph.prototype.processCopy=function(selectedText){if(console.log("processing copy"),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state===AutomatorRecorderAndPlayer.RECORDING)return this.automatorRecorderAndPlayer.addCopyCommand(selectedText)},window.WorldMorph.prototype.processPaste=function(clipboardText){if(this.caret)return console.log("about to insert text: "+clipboardText),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state===AutomatorRecorderAndPlayer.RECORDING&&this.automatorRecorderAndPlayer.addPasteCommand(clipboardText),this.outstandingTimerTriggeredOperationsCounter.push(!0),window.setTimeout(()=>(this.caret.insert(clipboardText),this.outstandingTimerTriggeredOperationsCounter.pop()),50,!0)},window.WorldMorph.prototype.initEventListeners=function(){var canvas;return canvas=this.worldCanvas,/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||(this.mousedownEventListener=(event=>(this.events.push("mousedownEventListener"),this.events.push(event))),canvas.addEventListener("mousedown",this.mousedownEventListener,!1),this.mouseupEventListener=(event=>(this.events.push("mouseupEventListener"),this.events.push(event))),canvas.addEventListener("mouseup",this.mouseupEventListener,!1),this.mousemoveEventListener=(event=>(this.events.push("mousemoveEventListener"),this.events.push(event))),canvas.addEventListener("mousemove",this.mousemoveEventListener,!1)),this.touchstartEventListener=(event=>(this.events.push("touchstartEventListener"),this.events.push(event))),canvas.addEventListener("touchstart",this.touchstartEventListener,!1),this.touchendEventListener=(event=>(this.events.push("touchendEventListener"),this.events.push(event))),canvas.addEventListener("touchend",this.touchendEventListener,!1),this.touchmoveEventListener=(event=>(this.events.push("touchmoveEventListener"),this.events.push(event))),canvas.addEventListener("touchmove",this.touchmoveEventListener,!1),this.gesturestartEventListener=(event=>event.preventDefault()),canvas.addEventListener("gesturestart",this.gesturestartEventListener,!1),this.gesturechangeEventListener=(event=>event.preventDefault()),canvas.addEventListener("gesturechange",this.gesturechangeEventListener,!1),this.contextmenuEventListener=function(event){return event.preventDefault()},canvas.addEventListener("contextmenu",this.contextmenuEventListener,!1),this.keydownEventListener=(event=>{var d,doPrevent;if(this.events.push("keydownEventListener"),this.events.push(event),doPrevent=!1,8===event.keyCode&&(doPrevent=("INPUT"!==(d=event.srcElement||event.target).tagName.toUpperCase()||"TEXT"!==d.type.toUpperCase()&&"PASSWORD"!==d.type.toUpperCase()&&"FILE"!==d.type.toUpperCase()&&"SEARCH"!==d.type.toUpperCase()&&"EMAIL"!==d.type.toUpperCase()&&"NUMBER"!==d.type.toUpperCase()&&"DATE"!==d.type.toUpperCase())&&"TEXTAREA"!==d.tagName.toUpperCase()||(d.readOnly||d.disabled)),32===event.keyCode&&event.target===this.worldCanvas&&(doPrevent=!0),doPrevent)return event.preventDefault()}),canvas.addEventListener("keydown",this.keydownEventListener,!1),this.keyupEventListener=(event=>(this.events.push("keyupEventListener"),this.events.push(event))),canvas.addEventListener("keyup",this.keyupEventListener,!1),nil,this.keypressEventListener=(event=>(this.events.push("keypressEventListener"),this.events.push(event))),canvas.addEventListener("keypress",this.keypressEventListener,!1),this.wheelEventListener=(event=>(this.events.push("wheelEventListener"),this.events.push(event),event.preventDefault())),canvas.addEventListener("wheel",this.wheelEventListener,!1),this.cutEventListener=(event=>{var selectedText;return selectedText="",this.caret&&(selectedText=this.caret.target.selection(),(null!=event?event.clipboardData:void 0)&&(event.preventDefault(),event.clipboardData.setData("text/plain",selectedText)),window.clipboardData&&(event.returnValue=!1,window.clipboardData.setData("Text",selectedText))),this.events.push("cutEventListener"),this.events.push(selectedText)}),document.body.addEventListener("cut",this.cutEventListener,!1),this.copyEventListener=(event=>{var selectedText;return selectedText="",this.caret&&(selectedText="undefined"!=typeof clipboardTextIfTestRunning&&null!==clipboardTextIfTestRunning?clipboardTextIfTestRunning:this.caret.target.selection(),(null!=event?event.clipboardData:void 0)&&(event.preventDefault(),event.clipboardData.setData("text/plain",selectedText)),window.clipboardData&&(event.returnValue=!1,window.clipboardData.setData("Text",selectedText))),this.events.push("copyEventListener"),this.events.push(selectedText)}),document.body.addEventListener("copy",this.copyEventListener,!1),this.pasteEventListener=(event=>{var text;return this.caret&&null!=event&&(event.clipboardData&&(text=event.clipboardData.getData("text/plain")),window.clipboardData&&(text=window.clipboardData.getData("Text"))),this.events.push("pasteEventListener"),this.events.push(text)}),document.body.addEventListener("paste",this.pasteEventListener,!1),this.keyComboResetWorldEventListener=(event=>("undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&this.automatorRecorderAndPlayer.resetWorld(),!1)),Mousetrap.bind(["alt+d"],this.keyComboResetWorldEventListener),this.keyComboTurnOnAnimationsPacingControl=(event=>("undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&this.automatorRecorderAndPlayer.turnOnAnimationsPacingControl(),!1)),Mousetrap.bind(["alt+e"],this.keyComboTurnOnAnimationsPacingControl),this.keyComboTurnOffAnimationsPacingControl=(event=>("undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&this.automatorRecorderAndPlayer.turnOffAnimationsPacingControl(),!1)),Mousetrap.bind(["alt+u"],this.keyComboTurnOffAnimationsPacingControl),this.keyComboTakeScreenshotEventListener=(event=>("undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&this.automatorRecorderAndPlayer.takeScreenshot(),!1)),Mousetrap.bind(["alt+c"],this.keyComboTakeScreenshotEventListener),this.keyComboStopTestRecordingEventListener=(event=>("undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&this.automatorRecorderAndPlayer.stopTestRecording(),!1)),Mousetrap.bind(["alt+t"],this.keyComboStopTestRecordingEventListener),this.keyComboAddTestCommentEventListener=(event=>("undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&this.automatorRecorderAndPlayer.addTestComment(),!1)),Mousetrap.bind(["alt+m"],this.keyComboAddTestCommentEventListener),this.keyComboCheckNumberOfMenuItemsEventListener=(event=>("undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&this.automatorRecorderAndPlayer.checkNumberOfItemsInMenu(),!1)),Mousetrap.bind(["alt+k"],this.keyComboCheckNumberOfMenuItemsEventListener),this.keyComboCheckStringsOfItemsInMenuOrderImportant=(event=>("undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&this.automatorRecorderAndPlayer.checkStringsOfItemsInMenuOrderImportant(),!1)),Mousetrap.bind(["alt+a"],this.keyComboCheckStringsOfItemsInMenuOrderImportant),this.keyComboCheckStringsOfItemsInMenuOrderUnimportant=(event=>("undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&this.automatorRecorderAndPlayer.checkStringsOfItemsInMenuOrderUnimportant(),!1)),Mousetrap.bind(["alt+z"],this.keyComboCheckStringsOfItemsInMenuOrderUnimportant),this.dragoverEventListener=function(event){return event.preventDefault()},window.addEventListener("dragover",this.dragoverEventListener,!1),this.dropEventListener=(event=>(this.events.push("dropEventListener"),this.events.push(event),event.preventDefault())),window.addEventListener("drop",this.dropEventListener,!1),this.resizeEventListener=(()=>(this.events.push("resizeEventListener"),this.events.push(nil))),window.addEventListener("resize",this.resizeEventListener,!1)},window.WorldMorph.prototype.removeEventListeners=function(){var canvas;return(canvas=this.worldCanvas).removeEventListener("mousedown",this.mousedownEventListener),canvas.removeEventListener("touchstart",this.touchstartEventListener),canvas.removeEventListener("mouseup",this.mouseupEventListener),canvas.removeEventListener("touchend",this.touchendEventListener),canvas.removeEventListener("mousemove",this.mousemoveEventListener),canvas.removeEventListener("touchmove",this.touchmoveEventListener),canvas.removeEventListener("gesturestart",this.gesturestartEventListener),canvas.removeEventListener("gesturechange",this.gesturechangeEventListener),canvas.removeEventListener("contextmenu",this.contextmenuEventListener),canvas.removeEventListener("keydown",this.keydownEventListener),canvas.removeEventListener("keyup",this.keyupEventListener),canvas.removeEventListener("keypress",this.keypressEventListener),canvas.removeEventListener("wheel",this.wheelEventListener),canvas.removeEventListener("cut",this.cutEventListener),canvas.removeEventListener("copy",this.copyEventListener),canvas.removeEventListener("paste",this.pasteEventListener),Mousetrap.reset(),canvas.removeEventListener("dragover",this.dragoverEventListener),canvas.removeEventListener("drop",this.dropEventListener),canvas.removeEventListener("resize",this.resizeEventListener)},window.WorldMorph.prototype.mouseDownLeft=function(){return noOperation},window.WorldMorph.prototype.mouseClickLeft=function(){return noOperation},window.WorldMorph.prototype.mouseDownRight=function(){return noOperation},window.WorldMorph.prototype.droppedImage=function(){return nil},window.WorldMorph.prototype.droppedSVG=function(){return nil},window.WorldMorph.prototype.nextTab=function(editField){var next;if(next=this.nextEntryField(editField))return this.switchTextFieldFocus(editField,next)},window.WorldMorph.prototype.previousTab=function(editField){var prev;if(prev=this.previousEntryField(editField))return this.switchTextFieldFocus(editField,prev)},window.WorldMorph.prototype.switchTextFieldFocus=function(current,next){return current.clearSelection(),next.bringToForeground(),next.selectAll(),next.edit()},window.WorldMorph.prototype.softResetWorld=function(){return this.hand.drop(),this.hand.mouseOverList=[],this.hand.nonFloatDraggedMorph=nil,this.morphsDetectingClickOutsideMeOrAnyOfMeChildren=[],this.lastNonTextPropertyChangerButtonClickedOrDropped=nil},window.WorldMorph.prototype.resetWorld=function(){var ref;return this.softResetWorld(),this.changed(),this.fullDestroyChildren(),null!=(ref=this.basementWdgt)&&ref.empty(),this.setColor(new Color(205,205,205)),SystemTestsControlPanelUpdater.blinkLink(SystemTestsControlPanelUpdater.resetWorldLink),document.body.scrollTop=document.documentElement.scrollTop=0},window.WorldMorph.prototype.fullDestroyChildren=function(){var ListOfMorphs,eachMorphClass,j,len;for("Morph","Wdgt","Widget",j=0,len=(ListOfMorphs=Object.keys(window).filter(function(i){return-1!==i.indexOf("Morph",i.length-"Morph".length)||-1!==i.indexOf("Wdgt",i.length-"Wdgt".length)||-1!==i.indexOf("Widget",i.length-"Widget".length)})).length;j<len;j++)"WorldMorph"!==(eachMorphClass=ListOfMorphs[j])&&(window[eachMorphClass].lastBuiltInstanceNumericID=0);return"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&(window.world.automatorRecorderAndPlayer.turnOffAnimationsPacingControl(),window.world.automatorRecorderAndPlayer.turnOffAlignmentOfMorphIDsMechanism(),window.world.automatorRecorderAndPlayer.turnOffHidingOfMorphsContentExtractInLabels(),window.world.automatorRecorderAndPlayer.turnOffHidingOfMorphsNumberIDInLabels()),WorldMorph.__super__.fullDestroyChildren.call(this)},window.WorldMorph.prototype.buildContextMenu=function(){var menu;return this.isIndexPage?((menu=new MenuMorph(this,!1,this,!0,!0,"Desktop")).addMenuItem("wallpapers ➜",!1,this,"wallpapersMenu","choose a wallpaper for the Desktop"),menu.addMenuItem("new folder",!0,this,"makeFolder"),menu):(menu=this.isDevMode?new MenuMorph(this,!1,this,!0,!0,this.constructor.name||this.constructor.toString().split(" ")[1].split("(")[0]):new MenuMorph(this,!1,this,!0,!0,"Widgetic"),this.isDevMode&&(menu.addMenuItem("demo ➜",!1,this,"popUpDemoMenu","sample morphs"),menu.addLine(),menu.addMenuItem("show all",!0,this,"showAllMinimised"),menu.addMenuItem("hide all",!0,this,"minimiseAll"),menu.addMenuItem("delete all",!0,this,"closeChildren"),menu.addMenuItem("move all inside",!0,this,"keepAllSubmorphsWithin","keep all submorphs\nwithin and visible"),menu.addMenuItem("inspect",!0,this,"inspect","open a window on\nall properties"),menu.addMenuItem("test menu ➜",!1,this,"testMenu","debugging and testing operations"),menu.addLine(),menu.addMenuItem("restore display",!0,this,"changed","redraw the\nscreen once"),menu.addMenuItem("fit whole page",!0,this,"stretchWorldToFillEntirePage","let the World automatically\nadjust to browser resizings"),menu.addMenuItem("color...",!0,this,"popUpColorSetter","choose the World's\nbackground color"),menu.addMenuItem("wallpapers ➜",!1,this,"wallpapersMenu","choose a wallpaper for the Desktop"),WorldMorph.preferencesAndSettings.inputMode===PreferencesAndSettings.INPUT_MODE_MOUSE?menu.addMenuItem("touch screen settings",!0,WorldMorph.preferencesAndSettings,"toggleInputMode","bigger menu fonts\nand sliders"):menu.addMenuItem("standard settings",!0,WorldMorph.preferencesAndSettings,"toggleInputMode","smaller menu fonts\nand sliders"),menu.addLine()),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&menu.addMenuItem("system tests ➜",!1,this,"popUpSystemTestsMenu",""),this.isDevMode?menu.addMenuItem("switch to user mode",!0,this,"toggleDevMode","disable developers'\ncontext menus"):menu.addMenuItem("switch to dev mode",!0,this,"toggleDevMode"),menu.addMenuItem("new folder",!0,this,"makeFolder"),menu.addMenuItem("about Fizzygum...",!0,this,"about"),menu)},window.WorldMorph.prototype.wallpapersMenu=function(a,targetMorph){var menu;return(menu=new MenuMorph(this,!1,targetMorph,!0,!0,"Wallpapers")).addMenuItem(untick+this.pattern1,!0,this,"setPattern",nil,nil,nil,nil,nil,this.pattern1),menu.addMenuItem(untick+this.pattern2,!0,this,"setPattern",nil,nil,nil,nil,nil,this.pattern2),menu.addMenuItem(untick+this.pattern3,!0,this,"setPattern",nil,nil,nil,nil,nil,this.pattern3),menu.addMenuItem(untick+this.pattern4,!0,this,"setPattern",nil,nil,nil,nil,nil,this.pattern4),menu.addMenuItem(untick+this.pattern5,!0,this,"setPattern",nil,nil,nil,nil,nil,this.pattern5),menu.addMenuItem(untick+this.pattern6,!0,this,"setPattern",nil,nil,nil,nil,nil,this.pattern6),menu.addMenuItem(untick+this.pattern7,!0,this,"setPattern",nil,nil,nil,nil,nil,this.pattern7),this.updatePatternsMenuEntriesTicks(menu),menu.popUpAtHand()},window.WorldMorph.prototype.setPattern=function(menuItem,ignored2,thePatternName){if(this.patternName!==thePatternName)return this.patternName=thePatternName,this.changed(),null!=(null!=menuItem?menuItem.parent:void 0)&&menuItem.parent instanceof MenuMorph?this.updatePatternsMenuEntriesTicks(menuItem.parent):void 0},window.WorldMorph.prototype.updatePatternsMenuEntriesTicks=function(menu){var pattern1Tick,pattern2Tick,pattern3Tick,pattern4Tick,pattern5Tick,pattern6Tick,pattern7Tick;switch(pattern1Tick=pattern2Tick=pattern3Tick=pattern4Tick=pattern5Tick=pattern6Tick=pattern7Tick=untick,this.patternName){case this.pattern1:pattern1Tick=tick;break;case this.pattern2:pattern2Tick=tick;break;case this.pattern3:pattern3Tick=tick;break;case this.pattern4:pattern4Tick=tick;break;case this.pattern5:pattern5Tick=tick;break;case this.pattern6:pattern6Tick=tick;break;case this.pattern7:pattern7Tick=tick}return menu.children[1].label.setText(pattern1Tick+this.pattern1),menu.children[2].label.setText(pattern2Tick+this.pattern2),menu.children[3].label.setText(pattern3Tick+this.pattern3),menu.children[4].label.setText(pattern4Tick+this.pattern4),menu.children[5].label.setText(pattern5Tick+this.pattern5),menu.children[6].label.setText(pattern6Tick+this.pattern6),menu.children[7].label.setText(pattern7Tick+this.pattern7)},window.WorldMorph.prototype.popUpSystemTestsMenu=function(){var menu;return(menu=new MenuMorph(this,!1,this,!0,!0,"system tests")).addMenuItem("run system tests",!0,this.automatorRecorderAndPlayer,"runAllSystemTests","runs all the system tests"),menu.addMenuItem("run system tests force slow",!0,this.automatorRecorderAndPlayer,"runAllSystemTestsForceSlow","runs all the system tests"),menu.addMenuItem("run system tests force fast skip in-between mouse moves",!0,this.automatorRecorderAndPlayer,"runAllSystemTestsForceFastSkipInbetweenMouseMoves","runs all the system tests"),menu.addMenuItem("run system tests force fast run in-between mouse moves",!0,this.automatorRecorderAndPlayer,"runAllSystemTestsForceFastRunInbetweenMouseMoves","runs all the system tests"),menu.addMenuItem("start test recording",!0,this.automatorRecorderAndPlayer,"startTestRecording","start recording a test"),menu.addMenuItem("stop test recording",!0,this.automatorRecorderAndPlayer,"stopTestRecording","stop recording the test"),menu.addMenuItem("(re)play recorded test slow",!0,this.automatorRecorderAndPlayer,"startTestPlayingSlow","start playing the test"),menu.addMenuItem("(re)play recorded test fast skip in-between mouse moves",!0,this.automatorRecorderAndPlayer,"startTestPlayingFastSkipInbetweenMouseMoves","start playing the test"),menu.addMenuItem("(re)play recorded test  fast run in-between mouse moves",!0,this.automatorRecorderAndPlayer,"startTestPlayingFastRunInbetweenMouseMoves","start playing the test"),menu.addMenuItem("show test source",!0,this.automatorRecorderAndPlayer,"showTestSource","opens a window with the source of the latest test"),menu.addMenuItem("save recorded test",!0,this.automatorRecorderAndPlayer,"saveTest","save the recorded test"),menu.addMenuItem("save failed screenshots",!0,this.automatorRecorderAndPlayer,"saveFailedScreenshots","save failed screenshots"),menu.popUpAtHand()},window.WorldMorph.prototype.create=function(aMorph){return aMorph.pickUp()},window.WorldMorph.prototype.createNewStackElementsSizeAdjustingMorph=function(){return this.create(new StackElementsSizeAdjustingMorph)},window.WorldMorph.prototype.createNewLayoutElementAdderOrDropletMorph=function(){return this.create(new LayoutElementAdderOrDropletMorph)},window.WorldMorph.prototype.createNewRectangleMorph=function(){return this.create(new RectangleMorph)},window.WorldMorph.prototype.createNewBoxMorph=function(){return this.create(new BoxMorph)},window.WorldMorph.prototype.createNewCircleBoxMorph=function(){return this.create(new CircleBoxMorph)},window.WorldMorph.prototype.createNewSliderMorph=function(){return this.create(new SliderMorph)},window.WorldMorph.prototype.createNewPanelWdgt=function(){var newMorph;return(newMorph=new PanelWdgt).rawSetExtent(new Point(350,250)),this.create(newMorph)},window.WorldMorph.prototype.createNewScrollPanelWdgt=function(){var newMorph;return(newMorph=new ScrollPanelWdgt).adjustContentsBounds(),newMorph.adjustScrollBars(),newMorph.rawSetExtent(new Point(350,250)),this.create(newMorph)},window.WorldMorph.prototype.createNewCanvas=function(){var newMorph;return(newMorph=new CanvasMorph).rawSetExtent(new Point(350,250)),this.create(newMorph)},window.WorldMorph.prototype.createNewHandle=function(){return this.create(new HandleMorph)},window.WorldMorph.prototype.createNewString=function(){var newMorph;return newMorph=new StringMorph("Hello, World!"),newMorph.isEditable=!0,this.create(newMorph)},window.WorldMorph.prototype.createNewText=function(){var newMorph;return newMorph=new TextMorph("Ich weiß nicht, was soll es bedeuten, dass ich so traurig bin, ein Märchen aus uralten Zeiten, das kommt mir nicht aus dem Sinn. Die Luft ist kühl und es dunkelt, und ruhig fließt der Rhein; der Gipfel des Berges funkelt im Abendsonnenschein. Die schönste Jungfrau sitzet dort oben wunderbar, ihr gold'nes Geschmeide blitzet, sie kämmt ihr goldenes Haar, sie kämmt es mit goldenem Kamme, und singt ein Lied dabei; das hat eine wundersame, gewalt'ge Melodei. Den Schiffer im kleinen Schiffe, ergreift es mit wildem Weh; er schaut nicht die Felsenriffe, er schaut nur hinauf in die Höh'. Ich glaube, die Wellen verschlingen am Ende Schiffer und Kahn, und das hat mit ihrem Singen, die Loreley getan."),newMorph.isEditable=!0,newMorph.maxTextWidth=300,this.create(newMorph)},window.WorldMorph.prototype.createNewSpeechBubbleWdgt=function(){var newMorph;return newMorph=new SpeechBubbleWdgt,this.create(newMorph)},window.WorldMorph.prototype.createNewToolTipWdgt=function(){var newMorph;return newMorph=new ToolTipWdgt,this.create(newMorph)},window.WorldMorph.prototype.createNewGrayPaletteMorph=function(){return this.create(new GrayPaletteMorph)},window.WorldMorph.prototype.createNewColorPaletteMorph=function(){return this.create(new ColorPaletteMorph)},window.WorldMorph.prototype.createNewGrayPaletteMorphInWindow=function(){var gP,wm;return gP=new GrayPaletteMorph,wm=new WindowWdgt(nil,nil,gP),world.add(wm),wm.rawSetExtent(new Point(130,70)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.changed()},window.WorldMorph.prototype.createNewColorPaletteMorphInWindow=function(){var cP,wm;return cP=new ColorPaletteMorph,wm=new WindowWdgt(nil,nil,cP),world.add(wm),wm.rawSetExtent(new Point(130,100)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.changed()},window.WorldMorph.prototype.createNewColorPickerMorph=function(){return this.create(new ColorPickerMorph)},window.WorldMorph.prototype.createNewSensorDemo=function(){var newMorph;return(newMorph=new MouseSensorMorph).setColor(new Color(230,200,100)),newMorph.cornerRadius=35,newMorph.alpha=.2,newMorph.rawSetExtent(new Point(100,100)),this.create(newMorph)},window.WorldMorph.prototype.createNewAnimationDemo=function(){var bar,baz,foo,fred,garply;return(foo=new BouncerMorph).fullRawMoveTo(new Point(50,20)),foo.rawSetExtent(new Point(300,200)),foo.alpha=.9,foo.speed=3,(bar=new BouncerMorph).setColor(new Color(50,50,50)),bar.fullRawMoveTo(new Point(80,80)),bar.rawSetExtent(new Point(80,250)),bar.type="horizontal",bar.direction="right",bar.alpha=.9,bar.speed=5,(baz=new BouncerMorph).setColor(new Color(20,20,20)),baz.fullRawMoveTo(new Point(90,140)),baz.rawSetExtent(new Point(40,30)),baz.type="horizontal",baz.direction="right",baz.speed=3,(garply=new BouncerMorph).setColor(new Color(200,20,20)),garply.fullRawMoveTo(new Point(90,140)),garply.rawSetExtent(new Point(20,20)),garply.type="vertical",garply.direction="up",garply.speed=8,(fred=new BouncerMorph).setColor(new Color(20,200,20)),fred.fullRawMoveTo(new Point(120,140)),fred.rawSetExtent(new Point(20,20)),fred.type="vertical",fred.direction="down",fred.speed=4,bar.add(garply),bar.add(baz),foo.add(fred),foo.add(bar),this.create(foo)},window.WorldMorph.prototype.createNewPenMorph=function(){return this.create(new PenMorph)},window.WorldMorph.prototype.underTheCarpet=function(){var newMorph;return newMorph=new BasementWdgt,this.create(newMorph)},window.WorldMorph.prototype.popUpDemoMenu=function(morphOpeningThePopUp,b,c,d){var menu;return this.isIndexPage?((menu=new MenuMorph(morphOpeningThePopUp,!1,this,!0,!0,"parts bin")).addMenuItem("rectangle",!0,this,"createNewRectangleMorph"),menu.addMenuItem("box",!0,this,"createNewBoxMorph"),menu.addMenuItem("circle box",!0,this,"createNewCircleBoxMorph"),menu.addMenuItem("slider",!0,this,"createNewSliderMorph"),menu.addMenuItem("speech bubble",!0,this,"createNewSpeechBubbleWdgt"),menu.addLine(),menu.addMenuItem("gray scale palette",!0,this,"createNewGrayPaletteMorphInWindow"),menu.addMenuItem("color palette",!0,this,"createNewColorPaletteMorphInWindow"),menu.addLine(),menu.addMenuItem("analog clock",!0,this,"analogClock")):((menu=new MenuMorph(morphOpeningThePopUp,!1,this,!0,!0,"make a morph")).addMenuItem("rectangle",!0,this,"createNewRectangleMorph"),menu.addMenuItem("box",!0,this,"createNewBoxMorph"),menu.addMenuItem("circle box",!0,this,"createNewCircleBoxMorph"),menu.addLine(),menu.addMenuItem("slider",!0,this,"createNewSliderMorph"),menu.addMenuItem("panel",!0,this,"createNewPanelWdgt"),menu.addMenuItem("scrollable panel",!0,this,"createNewScrollPanelWdgt"),menu.addMenuItem("canvas",!0,this,"createNewCanvas"),menu.addMenuItem("handle",!0,this,"createNewHandle"),menu.addLine(),menu.addMenuItem("string",!0,this,"createNewString"),menu.addMenuItem("text",!0,this,"createNewText"),menu.addMenuItem("tool tip",!0,this,"createNewToolTipWdgt"),menu.addMenuItem("speech bubble",!0,this,"createNewSpeechBubbleWdgt"),menu.addLine(),menu.addMenuItem("gray scale palette",!0,this,"createNewGrayPaletteMorph"),menu.addMenuItem("color palette",!0,this,"createNewColorPaletteMorph"),menu.addMenuItem("color picker",!0,this,"createNewColorPickerMorph"),menu.addLine(),menu.addMenuItem("sensor demo",!0,this,"createNewSensorDemo"),menu.addMenuItem("animation demo",!0,this,"createNewAnimationDemo"),menu.addMenuItem("pen",!0,this,"createNewPenMorph"),menu.addLine(),menu.addMenuItem("layout tests ➜",!1,this,"layoutTestsMenu","sample morphs"),menu.addLine(),menu.addMenuItem("under the carpet",!0,this,"underTheCarpet")),menu.popUpAtHand()},window.WorldMorph.prototype.layoutTestsMenu=function(morphOpeningThePopUp){var menu;return(menu=new MenuMorph(morphOpeningThePopUp,!1,this,!0,!0,"Layout tests")).addMenuItem("adjuster morph",!0,this,"createNewStackElementsSizeAdjustingMorph"),menu.addMenuItem("adder/droplet",!0,this,"createNewLayoutElementAdderOrDropletMorph"),menu.addMenuItem("test screen 1",!0,Widget,"setupTestScreen1"),menu.popUpAtHand()},window.WorldMorph.prototype.toggleDevMode=function(){return this.isDevMode=!this.isDevMode},window.WorldMorph.prototype.edit=function(aStringMorphOrTextMorph){var pos,previouslyEditedText;if(this.caret&&(previouslyEditedText=this.lastEditedText,this.lastEditedText=this.caret.target,this.lastEditedText!==previouslyEditedText&&this.lastEditedText.clearSelection(),this.caret=this.caret.fullDestroy()),this.caret=new CaretMorph(aStringMorphOrTextMorph),aStringMorphOrTextMorph.parent.add(this.caret),this.keyboardEventsReceiver=this.caret,WorldMorph.preferencesAndSettings.isTouchDevice&&WorldMorph.preferencesAndSettings.useVirtualKeyboard)return this.initVirtualKeyboard(),pos=getDocumentPositionOf(this.worldCanvas),this.inputDOMElementForVirtualKeyboard.style.top=this.caret.top()+pos.y+"px",this.inputDOMElementForVirtualKeyboard.style.left=this.caret.left()+pos.x+"px",this.inputDOMElementForVirtualKeyboard.focus()},window.WorldMorph.prototype.stopEditing=function(){return this.caret&&(this.lastEditedText=this.caret.target,this.lastEditedText.clearSelection(),this.lastEditedText.escalateEvent("reactToEdit",this.lastEditedText),this.caret=this.caret.fullDestroy()),this.keyboardEventsReceiver=nil,this.inputDOMElementForVirtualKeyboard&&(this.inputDOMElementForVirtualKeyboard.blur(),document.body.removeChild(this.inputDOMElementForVirtualKeyboard),this.inputDOMElementForVirtualKeyboard=nil),this.worldCanvas.focus()},window.WorldMorph.prototype.anyReferenceToWdgt=function(whichWdgt){var i,len,ref;for(i=0,len=(ref=this.widgetsReferencingOtherWidgets).length;i<len;i++)if(ref[i].target===whichWdgt)return!0;return!1},window.WorldMorph.preferencesAndSettings=nil,window.WorldMorph.currentTime=nil,window.WorldMorph.KEYPAD_TAB_mappedToThaiKeyboard_A="ฟ",window.WorldMorph.KEYPAD_SLASH_mappedToThaiKeyboard_B="ิ",window.WorldMorph.KEYPAD_MULTIPLY_mappedToThaiKeyboard_C="แ",window.WorldMorph.KEYPAD_DELETE_mappedToThaiKeyboard_D="ก",window.WorldMorph.KEYPAD_7_mappedToThaiKeyboard_E="ำ",window.WorldMorph.KEYPAD_8_mappedToThaiKeyboard_F="ด",window.WorldMorph.KEYPAD_9_mappedToThaiKeyboard_G="เ",window.WorldMorph.KEYPAD_MINUS_mappedToThaiKeyboard_H="้",window.WorldMorph.KEYPAD_4_mappedToThaiKeyboard_I="ร",window.WorldMorph.KEYPAD_5_mappedToThaiKeyboard_J="่",window.WorldMorph.KEYPAD_6_mappedToThaiKeyboard_K="า",window.WorldMorph.KEYPAD_PLUS_mappedToThaiKeyboard_L="ส",window.WorldMorph.KEYPAD_1_mappedToThaiKeyboard_M="ท",window.WorldMorph.KEYPAD_2_mappedToThaiKeyboard_N="ท",window.WorldMorph.KEYPAD_3_mappedToThaiKeyboard_O="ื",window.WorldMorph.KEYPAD_ENTER_mappedToThaiKeyboard_P="น",window.WorldMorph.KEYPAD_0_mappedToThaiKeyboard_Q="ย",window.WorldMorph.KEYPAD_DOT_mappedToThaiKeyboard_R="พ",window.WorldMorph.BOOT_COMPLETE=2,window.WorldMorph.EXECUTING_URL_ACTIONS=1,window.WorldMorph.JUST_STARTED=0,window.WorldMorph.bootState=0,window.WorldMorph.ongoingUrlActionNumber=0,window.WorldMorph.frameCount=0,window.WorldMorph.numberOfAddsAndRemoves=0,window.WorldMorph.numberOfVisibilityFlagsChanges=0,window.WorldMorph.numberOfCollapseFlagsChanges=0,window.WorldMorph.numberOfRawMovesAndResizes=0,window.TextEditingState=function(selectionStart,selectionEnd,cursorPos,textContent,isJustFirstClickToPositionCursor){this.selectionStart=selectionStart,this.selectionEnd=selectionEnd,this.cursorPos=cursorPos,this.textContent=textContent,this.isJustFirstClickToPositionCursor=isJustFirstClickToPositionCursor,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TextEditingState,"name",{value:"TextEditingState"}),window.TextEditingState.instances=[],window.TextEditingState.__super__=Object.prototype,window.TextEditingState.augmentWith(window.DeepCopierMixin,"TextEditingState"),window.TextEditingState.prototype.selectionStart=nil,window.TextEditingState.prototype.selectionEnd=nil,window.TextEditingState.prototype.cursorPos=nil,window.TextEditingState.prototype.textContent=nil,window.TextEditingState.prototype.isJustFirstClickToPositionCursor=nil,window.StringMorph2=function(text1=(""===text?"":"StringMorph2"),originallySetFontSize=WorldMorph.preferencesAndSettings.normalTextFontSize,fontName=this.justArialFontStack,isBold=!1,isItalic=!1,isHeaderLine=!1,isNumeric=!1,color=new Color(37,37,37),backgroundColor,backgroundTransparency){this.text=text1,this.originallySetFontSize=originallySetFontSize,this.fontName=fontName,this.isBold=isBold,this.isItalic=isItalic,this.isHeaderLine=isHeaderLine,this.isNumeric=isNumeric,this.color=color,this.textPossiblyCroppedToFit=this.transformTextOneToOne(this.text),null!=backgroundColor&&(this.backgroundColor=backgroundColor),null!=backgroundTransparency&&(this.backgroundTransparency=backgroundTransparency),this.undoHistory=[],this.redoHistory=[],StringMorph2.__super__.constructor.call(this),this.noticesTransparentClick=!0,this.changed(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.StringMorph2,"name",{value:"StringMorph2"}),window.StringMorph2.instances=[],window.StringMorph2.__super__=window.Widget.prototype,window.StringMorph2=extend(window.StringMorph2,window.Widget),window.StringMorph2.augmentWith(window.BackBufferMixin,"StringMorph2"),window.StringMorph2.augmentWith(window.ControllerMixin,"StringMorph2"),window.StringMorph2.prototype.text="",window.StringMorph2.prototype.textPossiblyCroppedToFit="",window.StringMorph2.prototype.fittingFontSize=nil,window.StringMorph2.prototype.originallySetFontSize=nil,window.StringMorph2.prototype.fontName=nil,window.StringMorph2.prototype.isBold=nil,window.StringMorph2.prototype.isItalic=nil,window.StringMorph2.prototype.hasDarkOutline=!1,window.StringMorph2.prototype.isHeaderLine=nil,window.StringMorph2.prototype.isEditable=!1,window.StringMorph2.prototype.isNumeric=nil,window.StringMorph2.prototype.isPassword=!1,window.StringMorph2.prototype.isShowingBlanks=!1,window.StringMorph2.prototype.blanksColor=new Color(180,140,140),window.StringMorph2.prototype.isScrollable=!0,window.StringMorph2.prototype.startMark=nil,window.StringMorph2.prototype.endMark=nil,window.StringMorph2.prototype.markedTextColor=new Color(255,255,255),window.StringMorph2.prototype.markedBackgoundColor=new Color(60,60,120),window.StringMorph2.prototype.horizontalAlignment=AlignmentSpecHorizontal.LEFT,window.StringMorph2.prototype.verticalAlignment=AlignmentSpecVertical.TOP,window.StringMorph2.prototype.fittingSpecWhenBoundsTooLarge=FittingSpecTextInLargerBounds.FLOAT,window.StringMorph2.prototype.fittingSpecWhenBoundsTooSmall=FittingSpecTextInSmallerBounds.CROP,window.StringMorph2.prototype.caretHorizPositionForVertMovement=nil,window.StringMorph2.prototype.emptyCharacter="⁣",window.StringMorph2.prototype.justArialFontStack="Arial, sans-serif",window.StringMorph2.prototype.timesFontStack='Cambria, "Hoefler Text", Utopia, "Liberation Serif", "Nimbus Roman No9 L Regular", Times, "Times New Roman", serif',window.StringMorph2.prototype.georgiaFontStack='Constantia, "Lucida Bright", Lucidabright, "Lucida Serif", Lucida, "DejaVu Serif", "Bitstream Vera Serif", "Liberation Serif", Georgia, serif',window.StringMorph2.prototype.garamoFontStack='"Palatino Linotype", Palatino, Palladio, "URW Palladio L", "Book Antiqua", Baskerville, "Bookman Old Style", "Bitstream Charter", "Nimbus Roman No9 L", Garamond, "Apple Garamond", "ITC Garamond Narrow", "New Century Schoolbook", "Century Schoolbook", "Century Schoolbook L", Georgia, serif',window.StringMorph2.prototype.helveFontStack='Frutiger, "Frutiger Linotype", Univers, Calibri, "Gill Sans", "Gill Sans MT", "Myriad Pro", Myriad, "DejaVu Sans Condensed", "Liberation Sans", "Nimbus Sans L", Tahoma, Geneva, "Helvetica Neue", Helvetica, Arial, sans-serif',window.StringMorph2.prototype.verdaFontStack='Corbel, "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", "DejaVu Sans", "Bitstream Vera Sans", "Liberation Sans", Verdana, "Verdana Ref", sans-serif',window.StringMorph2.prototype.trebuFontStack='"Segoe UI", Candara, "Bitstream Vera Sans", "DejaVu Sans", "Bitstream Vera Sans", "Trebuchet MS", Verdana, "Verdana Ref", sans-serif',window.StringMorph2.prototype.heavyFontStack='Impact, Haettenschweiler, "Franklin Gothic Bold", Charcoal, "Helvetica Inserat", "Bitstream Vera Sans Bold", "Arial Black", sans-serif',window.StringMorph2.prototype.monoFontStack='Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace',window.StringMorph2.prototype.hashOfTextConsideredAsReference=nil,window.StringMorph2.prototype.widgetToBeNotifiedOfTextModificationChange=nil,window.StringMorph2.prototype.undoHistory=nil,window.StringMorph2.prototype.redoHistory=nil,window.StringMorph2.prototype.actualFontSizeUsedInRendering=function(){return this.reflowText(),this.fittingFontSize},window.StringMorph2.prototype.pushUndoState=function(slot,justFirstClickToPositionCursor){var beforeLastUndoState,lastUndoState,ref,ref1,ref2;if(!(this.undoHistory.length>0&&(lastUndoState=this.undoHistory[this.undoHistory.length-1]).selectionStart===this.startMark&&lastUndoState.selectionEnd===this.endMark&&lastUndoState.textContent===this.text&&Math.abs(slot-lastUndoState.cursorPos)<=1))return this.undoHistory.length>1&&(lastUndoState=this.undoHistory[this.undoHistory.length-1],(beforeLastUndoState=this.undoHistory[this.undoHistory.length-2]).selectionStart===(ref=lastUndoState.selectionStart)&&ref===this.startMark&&beforeLastUndoState.selectionEnd===(ref1=lastUndoState.selectionEnd)&&ref1===this.endMark&&beforeLastUndoState.textContent===(ref2=lastUndoState.textContent)&&ref2===this.text&&this.undoHistory.pop()),this.redoHistory=[],this.undoHistory.push(new TextEditingState(this.startMark,this.endMark,slot,this.text,justFirstClickToPositionCursor))},window.StringMorph2.prototype.popRedoState=function(slot){var poppedElement;return null!=(poppedElement=this.redoHistory.pop())&&this.undoHistory.push(poppedElement),poppedElement},window.StringMorph2.prototype.popUndoState=function(){var poppedElement;return null!=(poppedElement=this.undoHistory.pop())&&this.redoHistory.push(poppedElement),poppedElement},window.StringMorph2.prototype.setHorizontalAlignment=function(newAlignment){if(this.horizontalAlignment!==newAlignment)return this.horizontalAlignment=newAlignment,this.changed()},window.StringMorph2.prototype.setVerticalAlignment=function(newAlignment){if(this.verticalAlignment!==newAlignment)return this.verticalAlignment=newAlignment,this.changed()},window.StringMorph2.prototype.alignLeft=function(){return this.setHorizontalAlignment(AlignmentSpecHorizontal.LEFT),this},window.StringMorph2.prototype.alignCenter=function(){return this.setHorizontalAlignment(AlignmentSpecHorizontal.CENTER),this},window.StringMorph2.prototype.alignRight=function(){return this.setHorizontalAlignment(AlignmentSpecHorizontal.RIGHT),this},window.StringMorph2.prototype.alignTop=function(){return this.setVerticalAlignment(AlignmentSpecVertical.TOP),this},window.StringMorph2.prototype.alignMiddle=function(){return this.setVerticalAlignment(AlignmentSpecVertical.MIDDLE),this},window.StringMorph2.prototype.alignBottom=function(){return this.setVerticalAlignment(AlignmentSpecVertical.BOTTOM),this},window.StringMorph2.prototype.toString=function(){var firstPart;return firstPart=StringMorph2.__super__.toString.call(this),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.hidingOfMorphsContentExtractInLabels?firstPart:firstPart+' ("'+this.text.slice(0,30).replace(/(?:\r\n|\r|\n)/g,"↵")+'...")'},window.StringMorph2.prototype.getTextDescription=function(){return null!=this.textDescription?this.textDescription+" (adhoc description of string)":this.text.replace(/#\d*/,"").slice(0,30)+" (content of string)"},window.StringMorph2.prototype.obfuscateAsPassword=function(letter,length){var ans,j,ref;for(ans="",j=0,ref=length;0<=ref?j<ref:j>ref;0<=ref?++j:--j)ans+=letter;return ans},window.StringMorph2.prototype.buildCanvasFontProperty=function(overrideFontSize=this.fittingFontSize){var font;return font="",this.isBold&&(font+="bold "),this.isItalic&&(font+="italic "),font+overrideFontSize+"px "+this.fontName},window.StringMorph2.prototype.searchLargestFittingFont=function(textToFit){var pivot,start,stop;if(PreferencesAndSettings.decimalFloatFiguresOfFontSizeGranularity=0,start=0,stop=Math.round(200*Math.pow(10,PreferencesAndSettings.decimalFloatFiguresOfFontSizeGranularity)),!this.doesTextFitInExtent(textToFit,start))return-1;if(this.doesTextFitInExtent(textToFit,stop))return stop/Math.pow(10,PreferencesAndSettings.decimalFloatFiguresOfFontSizeGranularity);for(;start!==(pivot=Math.floor((start+stop)/2));)this.doesTextFitInExtent(textToFit,pivot/Math.pow(10,PreferencesAndSettings.decimalFloatFiguresOfFontSizeGranularity))?start=pivot:stop=pivot;return start/Math.pow(10,PreferencesAndSettings.decimalFloatFiguresOfFontSizeGranularity)},window.StringMorph2.prototype.generateTextWithEllipsis=function(startingText){return""!==startingText?startingText+"…":""},window.StringMorph2.prototype.searchLongestFittingTextByMultiCroppingIt=function(textToFit){var eachParagraph,fittingText,i,j,paragraphBeforeWithNewLineHasBeenCropped,pivot,reducing,ref,splitText,start,stop,textAtPivot;if(textToFit=this.transformTextOneToOne(this.text),this.doesTextFitInExtent(textToFit,this.originallySetFontSize))return textToFit;for(fittingText="",i=j=0,ref=(splitText=textToFit.split(/\n/)).length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j)if(eachParagraph=splitText[i],fittingText+=eachParagraph,i!==splitText.length-1&&(fittingText+="\n"),!this.doesTextFitInExtent(fittingText,this.originallySetFontSize)){for(start=0,stop=fittingText.length;start!==(pivot=Math.floor((start+stop)/2));)textAtPivot=fittingText.substring(0,pivot),this.doesTextFitInExtent(textAtPivot,this.originallySetFontSize)?start=pivot:stop=pivot;if(start!==fittingText.length){for(paragraphBeforeWithNewLineHasBeenCropped=!1,"\n"===fittingText.substr(fittingText.length-1)&&(paragraphBeforeWithNewLineHasBeenCropped=!0),reducing=0;start-reducing>0&&!this.doesTextFitInExtent(this.generateTextWithEllipsis(fittingText.substring(0,start-reducing)),this.originallySetFontSize);)reducing++;if(fittingText=start-reducing==0?this.doesTextFitInExtent("…",this.originallySetFontSize)?"…":"":this.generateTextWithEllipsis(fittingText.substring(0,start-reducing)),paragraphBeforeWithNewLineHasBeenCropped){if(!this.doesTextFitInExtent(fittingText+"\n",this.originallySetFontSize)){console.log("break 1");break}fittingText+="\n"}this.doesTextFitInExtent(fittingText,this.originallySetFontSize)||(alert("something wrong, this really should have fit: >"+fittingText+"<"),this.doesTextFitInExtent(fittingText,this.originallySetFontSize))}}return 0===fittingText.length&&(fittingText=this.doesTextFitInExtent("…",this.originallySetFontSize)?"…":""),fittingText},window.StringMorph2.prototype.synchroniseTextAndActualText=function(){var textToFit;return textToFit=this.transformTextOneToOne(this.text),this.doesTextFitInExtent(textToFit,this.originallySetFontSize)?this.textPossiblyCroppedToFit=textToFit:this.fittingSpecWhenBoundsTooSmall===FittingSpecTextInSmallerBounds.SCALEDOWN?this.textPossiblyCroppedToFit=textToFit:void 0},window.StringMorph2.prototype.eliminateInvisibleCharacter=function(string){return string.replace(this.emptyCharacter,"")},window.StringMorph2.prototype.measureText=function(overrideFontSize=this.fittingFontSize,text){var cacheEntry,cacheHit,cacheKey;return cacheKey=this.buildCanvasFontProperty(overrideFontSize)+"-"+hashCode(text),null!=(cacheHit=world.cacheForTextMeasurements.get(cacheKey))?cacheHit:(world.canvasContextForTextMeasurements.font=this.buildCanvasFontProperty(overrideFontSize),cacheEntry=world.canvasContextForTextMeasurements.measureText(this.eliminateInvisibleCharacter(text)).width,world.cacheForTextMeasurements.set(cacheKey,cacheEntry),cacheEntry)},window.StringMorph2.prototype.visualisedText=function(){return this.textPossiblyCroppedToFit},window.StringMorph2.prototype.transformTextOneToOne=function(theText){return this.isPassword?this.obfuscateAsPassword("*",theText.length):theText},window.StringMorph2.prototype.doesTextFitInExtent=function(text=this.transformTextOneToOne(this.text),overrideFontSize){return this.measureText,""===text||new Point(Math.ceil(this.measureText(overrideFontSize,text)),fontHeight(overrideFontSize)).le(this.extent())},window.StringMorph2.prototype.fitToExtent=function(){var textToFit;return textToFit=this.transformTextOneToOne(this.text),this.doesTextFitInExtent(textToFit,this.originallySetFontSize)?(this.textPossiblyCroppedToFit=textToFit,this.fittingSpecWhenBoundsTooLarge===FittingSpecTextInLargerBounds.SCALEUP?this.searchLargestFittingFont(textToFit):this.originallySetFontSize):this.fittingSpecWhenBoundsTooSmall===FittingSpecTextInSmallerBounds.CROP?(this.textPossiblyCroppedToFit=this.searchLongestFittingTextByMultiCroppingIt(textToFit),this.originallySetFontSize):(this.textPossiblyCroppedToFit=textToFit,this.searchLargestFittingFont(textToFit))},window.StringMorph2.prototype.calculateTextWidth=function(text,overrideFontSize){return this.measureText(overrideFontSize,text)},window.StringMorph2.prototype.setFittingFontSize=function(theValue){if(this.fittingFontSize!==theValue)return this.fittingFontSize=theValue,this.changed()},window.StringMorph2.prototype.createBufferCacheKey=function(){return this.extent().toString()+"-"+this.isPassword+"-"+this.isShowingBlanks+"-"+this.originallySetFontSize+"-"+this.buildCanvasFontProperty()+"-"+this.hasDarkOutline+"-"+this.isHeaderLine+"-"+this.color.toString()+"-"+(null!=this.backgroundColor?this.backgroundColor.toString():"transp")+"-"+(null!=this.backgroundTransparency?this.backgroundTransparency.toString():"transp")+"-"+hashCode(this.text)+"-"+hashCode(this.textPossiblyCroppedToFit)+"-"+this.startMark+"-"+this.endMark+"-"+this.markedBackgoundColor.toString()+"-"+this.horizontalAlignment+"-"+this.verticalAlignment+"-"+this.fittingSpecWhenBoundsTooLarge+"-"+this.fittingSpecWhenBoundsTooSmall},window.StringMorph2.prototype.textVerticalPosition=function(heightOfText){switch(this.verticalAlignment){case AlignmentSpecVertical.TOP:return 0;case AlignmentSpecVertical.MIDDLE:return(this.height()-heightOfText)/2;case AlignmentSpecVertical.BOTTOM:return this.height()-heightOfText}},window.StringMorph2.prototype.textHorizontalPosition=function(widthOfText){switch(this.horizontalAlignment){case AlignmentSpecHorizontal.LEFT:return 0;case AlignmentSpecHorizontal.CENTER:return this.width()/2-widthOfText/2;case AlignmentSpecHorizontal.RIGHT:return this.width()-widthOfText}},window.StringMorph2.prototype.createRefreshOrGetBackBuffer=function(){var backBuffer,backBufferContext,cacheEntry,cacheHit,cacheKey,height,heightOfText,text,textHorizontalPosition,textVerticalPosition,width,widthOfText;return cacheKey=this.createBufferCacheKey(this.horizontalAlignment,this.verticalAlignment),null!=(cacheHit=world.cacheForImmutableBackBuffers.get(cacheKey))?(this.backBuffer!==cacheHit[0]&&null!=world.caret&&world.caret.changed(),cacheHit):(this.reflowText(),null!=world.caret&&world.caret.changed(),text=this.textPossiblyCroppedToFit,widthOfText=this.calculateTextWidth(text),heightOfText=fontHeight(this.fittingFontSize),null!=this.backgroundColor||this.verticalAlignment!==AlignmentSpecVertical.TOP||this.horizontalAlignment!==AlignmentSpecHorizontal.LEFT||this.fittingSpecWhenBoundsTooLarge===FittingSpecTextInLargerBounds.FLOAT?(width=this.width(),height=this.height()):(width=widthOfText,height=heightOfText),backBuffer=newCanvas(new Point(width,height).scaleBy(pixelRatio)),(backBufferContext=backBuffer.getContext("2d")).scale(pixelRatio,pixelRatio),backBufferContext.font=this.buildCanvasFontProperty(),backBufferContext.textAlign="left",backBufferContext.textBaseline="bottom",this.backgroundColor&&(backBufferContext.save(),backBufferContext.fillStyle=this.backgroundColor.toString(),backBufferContext.globalAlpha=this.backgroundTransparency,backBufferContext.fillRect(0,0,Math.round(this.width()),Math.round(this.height())),backBufferContext.restore()),textVerticalPosition=this.textVerticalPosition(fontHeight(this.fittingFontSize))+fontHeight(this.fittingFontSize),textHorizontalPosition=this.textHorizontalPosition(widthOfText),this.hasDarkOutline&&(backBufferContext.fillStyle="black",backBufferContext.fillText(text,textHorizontalPosition+0,textVerticalPosition+0),backBufferContext.fillText(text,textHorizontalPosition+1.5,textVerticalPosition+0),backBufferContext.fillText(text,textHorizontalPosition-1.5,textVerticalPosition+0),backBufferContext.fillText(text,textHorizontalPosition+0,textVerticalPosition+1.5),backBufferContext.fillText(text,textHorizontalPosition+1.5,textVerticalPosition+1.5),backBufferContext.fillText(text,textHorizontalPosition-1.5,textVerticalPosition+1.5),backBufferContext.fillText(text,textHorizontalPosition+0,textVerticalPosition-1.5),backBufferContext.fillText(text,textHorizontalPosition+1.5,textVerticalPosition-1.5),backBufferContext.fillText(text,textHorizontalPosition-1.5,textVerticalPosition-1.5)),backBufferContext.fillStyle=this.color.toString(),backBufferContext.fillText(text,textHorizontalPosition,textVerticalPosition),this.isHeaderLine&&(backBufferContext.strokeStyle=new Color(198,198,198),backBufferContext.beginPath(),backBufferContext.moveTo(0,textVerticalPosition-heightOfText/2),backBufferContext.lineTo(textHorizontalPosition-5,textVerticalPosition-heightOfText/2),backBufferContext.moveTo(textHorizontalPosition+widthOfText+5,textVerticalPosition-heightOfText/2),backBufferContext.lineTo(this.width(),textVerticalPosition-heightOfText/2),backBufferContext.stroke()),this.drawSelection(backBufferContext),cacheEntry=[backBuffer,backBufferContext],world.cacheForImmutableBackBuffers.set(cacheKey,cacheEntry),cacheEntry)},window.StringMorph2.prototype.drawSelection=function(backBufferContext){var c,i,j,p,ref,ref1,results;for(results=[],i=j=ref=this.firstSelectedSlot(),ref1=this.lastSelectedSlot();ref<=ref1?j<ref1:j>ref1;i=ref<=ref1?++j:--j)p=this.slotCoordinates(i).subtract(this.position()),c=this.textPossiblyCroppedToFit.charAt(i),backBufferContext.fillStyle=this.markedBackgoundColor.toString(),backBufferContext.fillRect(p.x,p.y,Math.ceil(this.measureText(nil,c))+1,Math.ceil(fontHeight(this.fittingFontSize))),backBufferContext.fillStyle=this.markedTextColor.toString(),results.push(backBufferContext.fillText(c,p.x,p.y+Math.ceil(fontHeight(this.fittingFontSize))));return results},window.StringMorph2.prototype.slotCoordinates=function(slot){var checkedSlot,text,textHorizontalPosition,textVerticalPosition,widthOfText,x,xOffset,y;return this.transformTextOneToOne(this.text)!==this.textPossiblyCroppedToFit&&this.fittingSpecWhenBoundsTooSmall===FittingSpecTextInSmallerBounds.CROP?(world.stopEditing(),this.edit(),nil):(text=this.text,checkedSlot=Math.min(Math.max(slot,0),text.length),slot!==checkedSlot&&alert("something wrong - slot is out of range"),slot=checkedSlot,xOffset=Math.ceil(this.calculateTextWidth(text.substring(0,slot))),x=this.left()+xOffset,y=this.top(),widthOfText=this.calculateTextWidth(text),textVerticalPosition=this.textVerticalPosition(fontHeight(this.fittingFontSize)),textHorizontalPosition=this.textHorizontalPosition(widthOfText),x+=textHorizontalPosition,y+=textVerticalPosition,new Point(x,y))},window.StringMorph2.prototype.slotAtSingleLineString=function(xPosition,text){var charX,charXMinusOne,idx,textHorizontalPosition,widthOfText;if(widthOfText=this.calculateTextWidth(text),textHorizontalPosition=this.textHorizontalPosition(widthOfText),(xPosition-=textHorizontalPosition)-this.left()>=widthOfText)return"⁣"===text[text.length-1]?text.length-1:text.length;for(idx=0,charX=0;;){if(charX>xPosition-this.left()){if(Math.abs(xPosition-this.left()-charXMinusOne)<Math.abs(xPosition-this.left()-charX))return idx-1;break}if(charXMinusOne=null!=charX?charX:0,charX+=this.calculateTextWidth(text[idx]),(idx+=1)===text.length&&this.calculateTextWidth(text)-this.calculateTextWidth(text[idx-1])/2<xPosition-this.left())return idx}return idx},window.StringMorph2.prototype.pointIsAboveFirstLine=function(aPoint){var textVerticalPosition;return textVerticalPosition=this.textVerticalPosition(fontHeight(this.fittingFontSize)),aPoint.y-this.top()<textVerticalPosition&&0},window.StringMorph2.prototype.pointIsUnderLastLine=function(aPoint){var textVerticalPosition;return textVerticalPosition=this.textVerticalPosition(fontHeight(this.fittingFontSize))+fontHeight(this.fittingFontSize),aPoint.y-textVerticalPosition-this.top()>Math.ceil(fontHeight(this.fittingFontSize))&&this.textPossiblyCroppedToFit.length},window.StringMorph2.prototype.slotAt=function(aPoint){var isPointBeforeFirstLine,isPointUnderLastLine;return!1!==(isPointBeforeFirstLine=this.pointIsAboveFirstLine(aPoint))?isPointBeforeFirstLine:!1!==(isPointUnderLastLine=this.pointIsUnderLastLine(aPoint))?isPointUnderLastLine:this.slotAtSingleLineString(aPoint.x,this.textPossiblyCroppedToFit)},window.StringMorph2.prototype.upFrom=function(slot){return this.startOfLine()},window.StringMorph2.prototype.downFrom=function(slot){return this.endOfLine()},window.StringMorph2.prototype.startOfLine=function(){return 0},window.StringMorph2.prototype.endOfLine=function(){return this.textPossiblyCroppedToFit.length},window.StringMorph2.prototype.fontSizePopup=function(menuItem){return this.prompt(menuItem.parent.title+"\nfont\nsize:",this,"setFontSize",this.originallySetFontSize.toString(),nil,6,500,!0)},window.StringMorph2.prototype.editPopup=function(menuItem){var title;return title=null!=menuItem?menuItem.parent.title+"\nedit:":"edit:",this.prompt(title,this,"setText",this.text,nil,6,nil,!0)},window.StringMorph2.prototype.setFontName=function(menuItem,ignored2,theNewFontName){if(this.fontName!==theNewFontName&&(this.fontName=theNewFontName,this.changed(),null!=(null!=menuItem?menuItem.parent:void 0)&&menuItem.parent instanceof MenuMorph))return this.updateFontsMenuEntriesTicks(menuItem.parent)},window.StringMorph2.prototype.fontsMenu=function(a,targetMorph){var menu;return(menu=new MenuMorph(this,!1,targetMorph,!0,!0,"Fonts")).addMenuItem(untick+"Arial",!0,this,"setFontName",nil,nil,nil,nil,nil,this.justArialFontStack),menu.addMenuItem(untick+"Times",!0,this,"setFontName",nil,nil,nil,nil,nil,this.timesFontStack),menu.addMenuItem(untick+"Georgia",!0,this,"setFontName",nil,nil,nil,nil,nil,this.georgiaFontStack),menu.addMenuItem(untick+"Garamo",!0,this,"setFontName",nil,nil,nil,nil,nil,this.garamoFontStack),menu.addMenuItem(untick+"Helve",!0,this,"setFontName",nil,nil,nil,nil,nil,this.helveFontStack),menu.addMenuItem(untick+"Verda",!0,this,"setFontName",nil,nil,nil,nil,nil,this.verdaFontStack),menu.addMenuItem(untick+"Treby",!0,this,"setFontName",nil,nil,nil,nil,nil,this.trebuFontStack),menu.addMenuItem(untick+"Heavy",!0,this,"setFontName",nil,nil,nil,nil,nil,this.heavyFontStack),menu.addMenuItem(untick+"Mono",!0,this,"setFontName",nil,nil,nil,nil,nil,this.monoFontStack),this.updateFontsMenuEntriesTicks(menu),menu.popUpAtHand()},window.StringMorph2.prototype.updateFontsMenuEntriesTicks=function(menu){var garamoFontStackTick,georgiaFontStackTick,heavyFontStackTick,helveFontStackTick,justArialFontStackTick,monoFontStackTick,timesFontStackTick,trebuFontStackTick,verdaFontStackTick;switch(justArialFontStackTick=timesFontStackTick=georgiaFontStackTick=garamoFontStackTick=helveFontStackTick=verdaFontStackTick=trebuFontStackTick=heavyFontStackTick=monoFontStackTick=untick,this.fontName){case this.justArialFontStack:justArialFontStackTick=tick;break;case this.timesFontStack:timesFontStackTick=tick;break;case this.georgiaFontStack:georgiaFontStackTick=tick;break;case this.garamoFontStack:garamoFontStackTick=tick;break;case this.helveFontStack:helveFontStackTick=tick;break;case this.verdaFontStack:verdaFontStackTick=tick;break;case this.trebuFontStack:trebuFontStackTick=tick;break;case this.heavyFontStack:heavyFontStackTick=tick;break;case this.monoFontStack:monoFontStackTick=tick}return menu.children[1].label.setText(justArialFontStackTick+"Arial"),menu.children[2].label.setText(timesFontStackTick+"Times"),menu.children[3].label.setText(georgiaFontStackTick+"Georgia"),menu.children[4].label.setText(garamoFontStackTick+"Garamo"),menu.children[5].label.setText(helveFontStackTick+"Helve"),menu.children[6].label.setText(verdaFontStackTick+"Verda"),menu.children[7].label.setText(trebuFontStackTick+"Treby"),menu.children[8].label.setText(heavyFontStackTick+"Heavy"),menu.children[9].label.setText(monoFontStackTick+"Mono")},window.StringMorph2.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){if(StringMorph2.__super__.addMorphSpecificMenuEntries.apply(this,arguments),menu.addLine(),menu.addMenuItem("edit...",!0,this,"editPopup","set this String's\ncontent"),menu.addMenuItem("font size...",!0,this,"fontSizePopup","set this String's\nfont point size"),menu.addMenuItem("font ➜",!1,this,"fontsMenu","pick a font"),this.isBold?menu.addMenuItem("normal weight",!0,this,"toggleWeight"):menu.addMenuItem("bold",!0,this,"toggleWeight"),this.isItalic?menu.addMenuItem("non-italic",!0,this,"toggleItalic"):menu.addMenuItem("italic",!0,this,"toggleItalic"),this.isHeaderLine?menu.addMenuItem("no header line",!0,this,"toggleHeaderLine"):menu.addMenuItem("header line",!0,this,"toggleHeaderLine"),this.isPassword?menu.addMenuItem("show characters",!0,this,"toggleIsPassword"):menu.addMenuItem("hide characters",!0,this,"toggleIsPassword"),menu.addLine(),this.horizontalAlignment!==AlignmentSpecHorizontal.LEFT&&menu.addMenuItem("← align left",!0,this,"alignLeft"),this.horizontalAlignment!==AlignmentSpecHorizontal.CENTER&&menu.addMenuItem("∸ align center",!0,this,"alignCenter"),this.horizontalAlignment!==AlignmentSpecHorizontal.RIGHT&&menu.addMenuItem("→ align right",!0,this,"alignRight"),menu.addLine(),this.verticalAlignment!==AlignmentSpecVertical.TOP&&menu.addMenuItem("↑ align top",!0,this,"alignTop"),this.verticalAlignment!==AlignmentSpecVertical.MIDDLE&&menu.addMenuItem("⍿ align middle",!0,this,"alignMiddle"),this.verticalAlignment!==AlignmentSpecVertical.BOTTOM&&menu.addMenuItem("↓ align bottom",!0,this,"alignBottom"),menu.addLine(),this.fittingSpecWhenBoundsTooLarge===FittingSpecTextInLargerBounds.SCALEUP?menu.addMenuItem("←☓→ don't expand to fill",!0,this,"togglefittingSpecWhenBoundsTooLarge"):menu.addMenuItem("←→ expand to fill",!0,this,"togglefittingSpecWhenBoundsTooLarge"),this.fittingSpecWhenBoundsTooSmall===FittingSpecTextInSmallerBounds.CROP?menu.addMenuItem("→← shrink to fit",!0,this,"togglefittingSpecWhenBoundsTooSmall"):menu.addMenuItem("→⋯← crop to fit",!0,this,"togglefittingSpecWhenBoundsTooSmall"),world.isIndexPage)return menu.addLine(),menu.addMenuItem("set target",!0,this,"openTargetSelector","select another morph\nwhose numerical property\nwill be controlled by this one")},window.StringMorph2.prototype.togglefittingSpecWhenBoundsTooSmall=function(){return this.fittingSpecWhenBoundsTooSmall=!this.fittingSpecWhenBoundsTooSmall,this.changed(),world.stopEditing()},window.StringMorph2.prototype.togglefittingSpecWhenBoundsTooLarge=function(){return world.stopEditing(),this.fittingSpecWhenBoundsTooLarge=!this.fittingSpecWhenBoundsTooLarge,this.changed()},window.StringMorph2.prototype.toggleShowBlanks=function(){return this.isShowingBlanks=!this.isShowingBlanks,this.changed()},window.StringMorph2.prototype.toggleWeight=function(){return this.isBold=!this.isBold,this.changed()},window.StringMorph2.prototype.toggleItalic=function(){return this.isItalic=!this.isItalic,this.changed()},window.StringMorph2.prototype.toggleHeaderLine=function(){return this.isHeaderLine=!this.isHeaderLine,this.changed()},window.StringMorph2.prototype.toggleIsPassword=function(){return world.stopEditing(),this.isPassword=!this.isPassword,this.changed()},window.StringMorph2.prototype.changed=function(){if(StringMorph2.__super__.changed.apply(this,arguments),null!=world.caret)return world.caret.changed()},window.StringMorph2.prototype.reflowText=function(){return this.synchroniseTextAndActualText(),this.setFittingFontSize(this.fitToExtent())},window.StringMorph2.prototype.setText=function(theTextContent,stringFieldMorph,connectionsCalculationToken,superCall){var theNewText;if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,null!=stringFieldMorph&&(theTextContent=stringFieldMorph.text.text),theNewText=theTextContent+"",this.text!==theNewText&&(this.clearSelection(),this.text=theNewText,this.checkIfTextContentWasModifiedFromTextAtStart(),this.synchroniseTextAndActualText(),this.changed()),this.updateTarget()},window.StringMorph2.prototype.considerCurrentTextAsReferenceText=function(){return this.hashOfTextConsideredAsReference=hashCode(this.text)},window.StringMorph2.prototype.checkIfTextContentWasModifiedFromTextAtStart=function(){var base,base1;if(null!=this.widgetToBeNotifiedOfTextModificationChange)return this.hashOfTextConsideredAsReference===hashCode(this.text)?"function"==typeof(base=this.widgetToBeNotifiedOfTextModificationChange).textContentUnmodified?base.textContentUnmodified():void 0:"function"==typeof(base1=this.widgetToBeNotifiedOfTextModificationChange).textContentModified?base1.textContentModified():void 0},window.StringMorph2.prototype.setFontSize=function(sizeOrMorphGivingSize,morphGivingSize){var newSize,size;if("number"==typeof(size=null!=(null!=morphGivingSize?morphGivingSize.getValue:void 0)?morphGivingSize.getValue():sizeOrMorphGivingSize)?newSize=Math.round(Math.min(Math.max(size,4),500)):(newSize=parseFloat(size),isNaN(newSize)||(newSize=Math.round(Math.min(Math.max(newSize,4),500)))),newSize!==this.originallySetFontSize)return this.originallySetFontSize=newSize,this.changed()},window.StringMorph2.prototype.openTargetPropertySelector=function(ignored,ignored2,theTarget){var functionNamesStrings,i,j,menu,menuEntriesStrings,ref;for([menuEntriesStrings,functionNamesStrings]=theTarget.stringSetters(),menu=new MenuMorph(this,!1,this,!0,!0,"choose target property:"),i=j=0,ref=menuEntriesStrings.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j)menu.addMenuItem(menuEntriesStrings[i],!0,this,"setTargetAndActionWithOnesPickedFromMenu",nil,nil,nil,nil,nil,theTarget,functionNamesStrings[i]);return 0===menuEntriesStrings.length&&(menu=new MenuMorph(this,!1,this,!0,!0,"no target properties available")),menu.popUpAtHand()},window.StringMorph2.prototype.numericalSetters=function(menuEntriesStrings,functionNamesStrings){return[menuEntriesStrings,functionNamesStrings]=StringMorph2.__super__.numericalSetters.call(this,menuEntriesStrings,functionNamesStrings),menuEntriesStrings.push("alpha 0-100","font size","text"),functionNamesStrings.push("setAlphaScaled","setFontSize","setText"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.StringMorph2.prototype.stringSetters=function(menuEntriesStrings,functionNamesStrings){return[menuEntriesStrings,functionNamesStrings]=StringMorph2.__super__.stringSetters.call(this,menuEntriesStrings,functionNamesStrings),menuEntriesStrings.push("bang!","text"),functionNamesStrings.push("bang","setText"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.StringMorph2.prototype.updateTarget=function(){this.action&&""!==this.action&&this.target[this.action].call(this.target,this.text,nil,this.connectionsCalculationToken)},window.StringMorph2.prototype.reactToTargetConnection=function(){return this.updateTarget()},window.StringMorph2.prototype.edit=function(){return this.textPossiblyCroppedToFit===this.transformTextOneToOne(this.text)?(world.edit(this),!0):(this.editPopup(),nil)},window.StringMorph2.prototype.selection=function(){var start,stop;return start=Math.min(this.startMark,this.endMark),stop=Math.max(this.startMark,this.endMark),this.text.slice(start,stop)},window.StringMorph2.prototype.firstSelectedSlot=function(){return null==this.startMark||null==this.endMark?nil:Math.min(this.startMark,this.endMark)},window.StringMorph2.prototype.lastSelectedSlot=function(){return null==this.startMark||null==this.endMark?nil:Math.max(this.startMark,this.endMark)},window.StringMorph2.prototype.currentlySelecting=function(){return null!=this.startMark||null!=this.endMark},window.StringMorph2.prototype.clearSelection=function(){if(null!=this.startMark||null!=this.endMark)return this.startMark=nil,this.endMark=nil,this.changed()},window.StringMorph2.prototype.setEndMark=function(slot){return this.endMark=slot,this.changed()},window.StringMorph2.prototype.selectBetween=function(start,end){return this.startMark=Math.min(start,end),this.endMark=Math.max(start,end),this.changed()},window.StringMorph2.prototype.deleteSelection=function(){var start,stop;return start=Math.min(this.startMark,this.endMark),stop=Math.max(this.startMark,this.endMark),this.setText(this.text.slice(0,start)+this.text.slice(stop))},window.StringMorph2.prototype.selectAll=function(){return this.startMark=0,this.endMark=this.textPossiblyCroppedToFit.length,this.changed()},window.StringMorph2.prototype.startSelectionUpToSlot=function(previousCaretSlot,slotToExtendTo){return this.startMark=previousCaretSlot,this.endMark=slotToExtendTo,this.changed()},window.StringMorph2.prototype.extendSelectionUpToSlot=function(slotToExtendTo){return this.endMark=slotToExtendTo,this.changed()},window.StringMorph2.prototype.mouseDoubleClick=function(){var extendLeft,extendRight,previousCaretSlot,ref,ref1;if(this.isEditable){for(previousCaretSlot=null!=(ref=world.caret)?ref.slot:void 0,extendRight=0;previousCaretSlot+extendRight<this.text.length&&this.text[previousCaretSlot+extendRight].isLetter();)extendRight++;for(extendLeft=0;previousCaretSlot+extendLeft-1>=0&&this.text[previousCaretSlot+extendLeft-1].isLetter();)extendLeft--;return this.selectBetween(previousCaretSlot+extendLeft,previousCaretSlot+extendRight),null!=(ref1=world.caret)?ref1.gotoSlot(previousCaretSlot+extendRight):void 0}},window.StringMorph2.prototype.mouseTripleClick=function(){var ref;if(this.isEditable)return this.selectAll(),null!=(ref=world.caret)?ref.gotoSlot(this.text.length):void 0},window.StringMorph2.prototype.mouseClickLeft=function(pos,ignored_button,ignored_buttons,ignored_ctrlKey,shiftKey,ignored_altKey,ignored_metaKey){var editResult,previousCaretSlot,ref,ref1,slotUserClickedOn;return this.bringToForeground(),null!=(ref=world.caret)&&ref.bringToForeground(),this.isEditable?(editResult=!0,previousCaretSlot=null!=(ref1=world.caret)?ref1.slot:void 0,this.currentlySelecting()||(editResult=this.edit()),slotUserClickedOn=this.slotAt(pos),shiftKey?this.currentlySelecting()?this.extendSelectionUpToSlot(slotUserClickedOn):null!=previousCaretSlot&&this.startSelectionUpToSlot(previousCaretSlot,slotUserClickedOn):this.clearSelection(),null!=editResult?(world.caret.gotoSlot(slotUserClickedOn,!0),world.caret.show(),this.caretHorizPositionForVertMovement=world.caret.slot):void 0):this.escalateEvent("mouseClickLeft",pos)},window.StringMorph2.prototype.enableSelecting=function(){return this.mouseDownLeft=function(pos){if(this.clearSelection(),this.isEditable&&!this.grabsToParentWhenDragged())return this.edit(),world.caret.gotoPos(pos),this.startMark=this.slotAt(pos),this.endMark=this.startMark},this.mouseMove=function(pos){var newMark;return this.isEditable&&this.currentlySelecting()?(newMark=this.slotAt(pos))!==this.endMark?(this.endMark=newMark,this.changed()):void 0:this.disableSelecting()}},window.StringMorph2.prototype.disableSelecting=function(){return this.clearSelection(),this.mouseDownLeft=StringMorph2.prototype.mouseDownLeft,delete this.mouseMove},window.TextMorph2=function(text="TextMorph2",originallySetFontSize=WorldMorph.preferencesAndSettings.normalTextFontSize,fontName=this.justArialFontStack,isBold=!1,isItalic=!1,color,backgroundColor=nil,backgroundTransparency=nil){this.text=text,this.originallySetFontSize=originallySetFontSize,this.fontName=fontName,this.isBold=isBold,this.isItalic=isItalic,this.color=color,this.backgroundColor=backgroundColor,this.backgroundTransparency=backgroundTransparency,TextMorph2.__super__.constructor.call(this,this.text,this.originallySetFontSize,this.fontName,this.isBold,this.isItalic,!1,!1,this.color,this.backgroundColor,this.backgroundTransparency),this.markedTextColor=new Color(255,255,255),this.markedBackgoundColor=new Color(60,60,120),this.textPossiblyCroppedToFit=this.transformTextOneToOne(this.text),this.noticesTransparentClick=!0,this.fittingSpecWhenBoundsTooLarge=FittingSpecTextInLargerBounds.SCALEUP,this.fittingSpecWhenBoundsTooSmall=FittingSpecTextInSmallerBounds.CROP,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TextMorph2,"name",{value:"TextMorph2"}),window.TextMorph2.instances=[],window.TextMorph2.__super__=window.StringMorph2.prototype,window.TextMorph2=extend(window.TextMorph2,window.StringMorph2),window.TextMorph2.prototype.wrappedLines=[],window.TextMorph2.prototype.wrappedLineSlots=[],window.TextMorph2.prototype.softWrap=!0,window.TextMorph2.prototype.backgroundColor=nil,window.TextMorph2.prototype.receiver=nil,window.TextMorph2.prototype.heightOfPossiblyCroppedText=nil,window.TextMorph2.prototype.widthOfPossiblyCroppedText=nil,window.TextMorph2.prototype.doesTextFitInExtent=function(text=this.transformTextOneToOne(this.text),overrideFontSize){return""===text||this.breakTextIntoLines(text,overrideFontSize,this.extent())},window.TextMorph2.prototype.getParagraphs=function(text){var cacheKey,paragraphs;return cacheKey=hashCode(text),null!=(paragraphs=world.cacheForTextParagraphSplits.get(cacheKey))?paragraphs:(paragraphs=text.split("\n"),world.cacheForTextParagraphSplits.set(cacheKey,paragraphs),paragraphs)},window.TextMorph2.prototype.getWordsOfParapraph=function(eachParagraph){var cacheKey,wordsOfThisParagraph;return cacheKey=hashCode(eachParagraph),null!=(wordsOfThisParagraph=world.cacheForParagraphsWordsSplits.get(cacheKey))?wordsOfThisParagraph:((wordsOfThisParagraph=eachParagraph.split(" ")).push("\n"),world.cacheForParagraphsWordsSplits.set(cacheKey,wordsOfThisParagraph),wordsOfThisParagraph)},window.TextMorph2.prototype.replaceLastSpaceWithInvisibleCarriageReturn=function(string){return string=string.substr(0,string.length-1),string+=this.emptyCharacter},window.TextMorph2.prototype.getWrappingData=function(overrideFontSize,maxTextWidth,eachParagraph,wordsOfThisParagraph){var cacheKey,currentLine,i,len,lineForOverflowTest,maxWrappedLineWidthOfThisParagraph,slotsInParagraph,word,wrappedLineSlotsOfThisParagraph,wrappedLinesOfThisParagraph,wrappingData,wrappingDataCacheEntry;if(cacheKey=this.buildCanvasFontProperty(overrideFontSize)+"-"+maxTextWidth+"-"+hashCode(eachParagraph),null!=(wrappingData=world.cacheForParagraphsWrappingData.get(cacheKey)))return wrappingData;for(wrappedLinesOfThisParagraph=[],wrappedLineSlotsOfThisParagraph=[],maxWrappedLineWidthOfThisParagraph=0,currentLine="",slotsInParagraph=0,"",i=0,len=wordsOfThisParagraph.length;i<len;i++)"\n"===(word=wordsOfThisParagraph[i])?(currentLine=this.replaceLastSpaceWithInvisibleCarriageReturn(currentLine),wrappedLinesOfThisParagraph.push(currentLine),wrappedLineSlotsOfThisParagraph.push(slotsInParagraph),maxWrappedLineWidthOfThisParagraph=Math.max(maxWrappedLineWidthOfThisParagraph,Math.ceil(this.measureText(overrideFontSize,currentLine))),currentLine=""):(maxTextWidth>0?(lineForOverflowTest=currentLine+word+" ",Math.ceil(this.measureText(overrideFontSize,lineForOverflowTest))>maxTextWidth?((currentLine=this.replaceLastSpaceWithInvisibleCarriageReturn(currentLine))!==this.emptyCharacter&&(wrappedLinesOfThisParagraph.push(currentLine),wrappedLineSlotsOfThisParagraph.push(slotsInParagraph),maxWrappedLineWidthOfThisParagraph=Math.max(maxWrappedLineWidthOfThisParagraph,Math.ceil(this.measureText(overrideFontSize,currentLine)))),currentLine=word+" "):currentLine=lineForOverflowTest):currentLine=currentLine+word+" ",slotsInParagraph+=word.length+1);return wrappingDataCacheEntry=[wrappedLinesOfThisParagraph,wrappedLineSlotsOfThisParagraph,maxWrappedLineWidthOfThisParagraph,slotsInParagraph],world.cacheForParagraphsWrappingData.set(cacheKey,wrappingDataCacheEntry),wrappingData=wrappingDataCacheEntry},window.TextMorph2.prototype.getTextWrappingData=function(overrideFontSize,maxTextWidth,text,paragraphs,justCheckIfItFitsInThisExtent){var advancedWrappedLineSlotsOfThisParagraph,cacheKey,cumulativeSlotAcrossText,eachParagraph,heightOfPossiblyCroppedText,j,len,maxWrappedLineWidthOfThisParagraph,maxWrappedLineWidthOfWholeText,previousCumulativeSlotAcrossText,slotsInParagraph,textWrappingData,textWrappingDataCacheEntry,wordsOfThisParagraph,wrappedLineSlotsOfThisParagraph,wrappedLineSlotsOfWholeText,wrappedLinesOfThisParagraph,wrappedLinesOfWholeText,wrappingData;if(this instanceof SimplePlainTextWdgt&&(justCheckIfItFitsInThisExtent=null,overrideFontSize=this.originallySetFontSize),cacheKey=this.buildCanvasFontProperty(overrideFontSize)+"-"+maxTextWidth+"-"+hashCode(text)+"-"+justCheckIfItFitsInThisExtent,null!=(textWrappingData=world.cacheForTextWrappingData.get(cacheKey)))return textWrappingData;for(wrappedLinesOfWholeText=[],wrappedLineSlotsOfWholeText=[0],maxWrappedLineWidthOfWholeText=0,cumulativeSlotAcrossText=0,previousCumulativeSlotAcrossText=0,j=0,len=paragraphs.length;j<len;j++)if(eachParagraph=paragraphs[j],wordsOfThisParagraph=this.getWordsOfParapraph(eachParagraph),wrappingData=this.getWrappingData(overrideFontSize,maxTextWidth,eachParagraph,wordsOfThisParagraph),[wrappedLinesOfThisParagraph,wrappedLineSlotsOfThisParagraph,maxWrappedLineWidthOfThisParagraph,slotsInParagraph]=wrappingData,previousCumulativeSlotAcrossText=cumulativeSlotAcrossText,cumulativeSlotAcrossText+=slotsInParagraph,wrappedLinesOfWholeText=wrappedLinesOfWholeText.concat(wrappedLinesOfThisParagraph),advancedWrappedLineSlotsOfThisParagraph=wrappedLineSlotsOfThisParagraph.map(function(i){return i+previousCumulativeSlotAcrossText}),wrappedLineSlotsOfWholeText=wrappedLineSlotsOfWholeText.concat(advancedWrappedLineSlotsOfThisParagraph),maxWrappedLineWidthOfWholeText=Math.max(maxWrappedLineWidthOfWholeText,maxWrappedLineWidthOfThisParagraph),null!=justCheckIfItFitsInThisExtent&&((heightOfPossiblyCroppedText=(wrappedLineSlotsOfWholeText.length-1)*Math.ceil(fontHeight(overrideFontSize)))>justCheckIfItFitsInThisExtent.y||maxWrappedLineWidthOfWholeText>justCheckIfItFitsInThisExtent.x))return world.cacheForTextWrappingData.set(cacheKey,!1),!1;return null!=justCheckIfItFitsInThisExtent?(world.cacheForTextWrappingData.set(cacheKey,!0),!0):(heightOfPossiblyCroppedText=wrappedLinesOfWholeText.length*Math.ceil(fontHeight(overrideFontSize)),textWrappingDataCacheEntry=[wrappedLinesOfWholeText,wrappedLineSlotsOfWholeText,maxWrappedLineWidthOfWholeText,heightOfPossiblyCroppedText],world.cacheForTextWrappingData.set(cacheKey,textWrappingDataCacheEntry),textWrappingData=textWrappingDataCacheEntry)},window.TextMorph2.prototype.breakTextIntoLines=function(text=this.transformTextOneToOne(this.text),overrideFontSize,justCheckIfItFitsInThisExtent){var cacheKey,morphWidth,paragraphs,textWrappingData;return this instanceof SimplePlainTextWdgt&&(overrideFontSize=this.originallySetFontSize),morphWidth=this.softWrap?this.width():Number.MAX_VALUE,cacheKey=hashCode(text)+"-"+this.buildCanvasFontProperty(overrideFontSize)+"-"+morphWidth+"-"+justCheckIfItFitsInThisExtent,null!=(textWrappingData=world.cacheForTextBreakingIntoLinesTopLevel.get(cacheKey))?textWrappingData:(paragraphs=this.getParagraphs(text),textWrappingData=this.getTextWrappingData(overrideFontSize,morphWidth,text,paragraphs,justCheckIfItFitsInThisExtent),world.cacheForTextBreakingIntoLinesTopLevel.set(cacheKey,textWrappingData),textWrappingData)},window.TextMorph2.prototype.reflowText=function(){return TextMorph2.__super__.reflowText.apply(this,arguments),[this.wrappedLines,this.wrappedLineSlots,this.widthOfPossiblyCroppedText,this.heightOfPossiblyCroppedText]=this.breakTextIntoLines(this.textPossiblyCroppedToFit,this.fittingFontSize),this.heightOfPossiblyCroppedText},window.TextMorph2.prototype.createBufferCacheKey=function(){return TextMorph2.__super__.createBufferCacheKey.call(this)+"-"+this.softWrap},window.TextMorph2.prototype.createRefreshOrGetBackBuffer=function(){var backBuffer,backBufferContext,cacheEntry,cacheHit,cacheKey,contentHeight,heightOfText,i,j,len,line,ref,textHorizontalPosition,textVertPosition,textVerticalPosition,width,widthOfText,x,y;if(cacheKey=this.createBufferCacheKey(),null!=(cacheHit=world.cacheForImmutableBackBuffers.get(cacheKey)))return this.backBuffer!==cacheHit[0]&&null!=world.caret&&world.caret.changed(),cacheHit;for(contentHeight=this.reflowText(),this instanceof SimplePlainTextWdgt&&(contentHeight=this.wrappedLines.length*Math.ceil(fontHeight(this.originallySetFontSize))),null!=world.caret&&world.caret.changed(),backBufferContext=(backBuffer=newCanvas()).getContext("2d"),backBuffer.width=this.width()*pixelRatio,backBuffer.height=this.height()*pixelRatio,backBufferContext.scale(pixelRatio,pixelRatio),backBufferContext.font=this.buildCanvasFontProperty(),backBufferContext.textAlign="left",backBufferContext.textBaseline="bottom",this.backgroundColor&&(backBufferContext.save(),backBufferContext.fillStyle=this.backgroundColor.toString(),backBufferContext.globalAlpha=this.backgroundTransparency,backBufferContext.fillRect(0,0,Math.round(this.width()),Math.round(this.height())),backBufferContext.restore()),textVerticalPosition=this.textVerticalPosition(contentHeight),backBufferContext.fillStyle=this.color.toString(),i=0,j=0,len=(ref=this.wrappedLines).length;j<len;j++)line=ref[j],width=Math.ceil(this.measureText(nil,line)),x=function(){switch(this.horizontalAlignment){case AlignmentSpecHorizontal.RIGHT:return this.width()-width;case AlignmentSpecHorizontal.CENTER:return(this.width()-width)/2;default:return 0}}.call(this),y=(i+1)*Math.ceil(fontHeight(this.fittingFontSize)),i++,backBufferContext.fillText(this.eliminateInvisibleCharacter(line),x,y+textVerticalPosition),this.isHeaderLine&&this.wrappedLines.length<=1&&(heightOfText=fontHeight(this.fittingFontSize),textHorizontalPosition=x,textVertPosition=y+textVerticalPosition,widthOfText=width,backBufferContext.strokeStyle=new Color(198,198,198),backBufferContext.beginPath(),backBufferContext.moveTo(0,textVertPosition-heightOfText/2),backBufferContext.lineTo(textHorizontalPosition-5,textVertPosition-heightOfText/2),backBufferContext.moveTo(textHorizontalPosition+widthOfText+5,textVertPosition-heightOfText/2),backBufferContext.lineTo(this.width(),textVertPosition-heightOfText/2),backBufferContext.stroke());return this.drawSelection(backBufferContext),cacheEntry=[backBuffer,backBufferContext],world.cacheForImmutableBackBuffers.set(cacheKey,cacheEntry),cacheEntry},window.TextMorph2.prototype.slotRowAndColumn=function(slot){var col,i,idx,j,ref,ref1,row;for(this.reflowText(),idx=0,row=i=0,ref=this.wrappedLines.length;0<=ref?i<ref:i>ref;row=0<=ref?++i:--i)for(idx=this.wrappedLineSlots[row],col=j=0,ref1=this.wrappedLines[row].length;0<=ref1?j<ref1:j>ref1;col=0<=ref1?++j:--j){if(idx===slot)return[row,col];idx+=1}return[this.wrappedLines.length-1,this.wrappedLines[this.wrappedLines.length-1].length-1]},window.TextMorph2.prototype.slotCoordinates=function(slot){var lineWidth,slotColumn,slotRow,textHorizontalPosition,textVerticalPosition,x,xOffset,y,yOffset;return this.transformTextOneToOne(this.text)!==this.textPossiblyCroppedToFit&&this.fittingSpecWhenBoundsTooSmall===FittingSpecTextInSmallerBounds.CROP?(world.stopEditing(),this.edit(),nil):(this.reflowText(),[slotRow,slotColumn]=this.slotRowAndColumn(slot),lineWidth=this.measureText(nil,this.wrappedLines[slotRow]),xOffset=Math.ceil(this.measureText(nil,this.wrappedLines[slotRow].substring(0,slotColumn))),yOffset=slotRow*Math.ceil(fontHeight(this.fittingFontSize)),textVerticalPosition=this.textVerticalPosition(this.heightOfPossiblyCroppedText),textHorizontalPosition=this.textHorizontalPosition(lineWidth),x=this.left()+xOffset+textHorizontalPosition,y=this.top()+yOffset+textVerticalPosition,new Point(x,y))},window.TextMorph2.prototype.slotAtRow=function(row,xPosition){return row>this.wrappedLines.length?this.textPossiblyCroppedToFit.length:this.wrappedLineSlots[Math.max(row-1,0)]+this.slotAtSingleLineString(xPosition,this.wrappedLines[row-1])},window.TextMorph2.prototype.pointIsAboveFirstLine=function(aPoint){var textVerticalPosition;return textVerticalPosition=this.textVerticalPosition(this.heightOfPossiblyCroppedText),aPoint.y-this.top()<textVerticalPosition&&0},window.TextMorph2.prototype.slotAt=function(aPoint){var isPointBeforeFirstLine,row,textVerticalPosition;if(!1!==(isPointBeforeFirstLine=this.pointIsAboveFirstLine(aPoint)))return isPointBeforeFirstLine;for(textVerticalPosition=this.textVerticalPosition(this.heightOfPossiblyCroppedText),row=0;aPoint.y-this.top()>textVerticalPosition+row*Math.ceil(fontHeight(this.fittingFontSize));)row+=1;return row=Math.max(row,1),this.slotAtRow(row,aPoint.x)},window.TextMorph2.prototype.upFrom=function(slot){var slotColumn,slotRow;return[slotRow,slotColumn]=this.slotRowAndColumn(slot),slotRow<1?0:this.slotAtRow(slotRow,this.slotCoordinates(this.caretHorizPositionForVertMovement).x)},window.TextMorph2.prototype.downFrom=function(slot){var slotColumn,slotRow;return[slotRow,slotColumn]=this.slotRowAndColumn(slot),slotRow>this.wrappedLines.length-2?this.textPossiblyCroppedToFit.length:this.slotAtRow(slotRow+2,this.slotCoordinates(this.caretHorizPositionForVertMovement).x)},window.TextMorph2.prototype.startOfLine=function(slot){return this.wrappedLineSlots[this.slotRowAndColumn(slot).y]},window.TextMorph2.prototype.endOfLine=function(slot){return this.startOfLine(slot)+this.wrappedLines[this.slotRowAndColumn(slot).y].length-1},window.TextMorph2.prototype.toggleSoftWrap=function(){return this.softWrap=!this.softWrap,this.changed(),world.stopEditing()},window.TextMorph2.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){var ref,ref1;return TextMorph2.__super__.addMorphSpecificMenuEntries.apply(this,arguments),menu.addLine(),this.softWrap?menu.addMenuItem("soft wrap".tick(),!0,this,"toggleSoftWrap"):menu.addMenuItem("soft wrap",!0,this,"toggleSoftWrap"),menu.addLine(),null!=(null!=(ref=this.parent)&&null!=(ref1=ref.parent)?ref1.parent:void 0)&&this.parent.parent.parent instanceof ConsoleWdgt?(this.currentlySelecting()&&menu.addMenuItem("run selection",!0,this.parent.parent.parent,"doSelection"),menu.addMenuItem("run contents",!0,this.parent.parent.parent,"doAll")):menu.addMenuItem("run contents",!0,this,"doContents")},window.TextMorph2.prototype.setAlignmentToLeft=function(){return this.alignment="left",this.changed()},window.TextMorph2.prototype.setAlignmentToRight=function(){return this.alignment="right",this.changed()},window.TextMorph2.prototype.setAlignmentToCenter=function(){return this.alignment="center",this.changed()},window.TextMorph2.prototype.evaluationMenu=function(){var menu;return menu=this.buildHierarchyMenu(),this.text.length>0&&(menu.prependLine(),menu.prependMenuItem("select all",!0,this,"selectAllAndEdit"),menu.prependMenuItem("do all",!0,this,"doAll")),""!==this.selection().replace(/^\s\s*/,"").replace(/\s\s*$/,"")&&(menu.prependLine(),menu.prependMenuItem("inspect selection",!0,this,"inspectSelection","evaluate the\nselected expression\nand inspect the result"),menu.prependMenuItem("show selection",!0,this,"showSelection","evaluate the\nselected expression\nand show the result"),menu.prependMenuItem("do selection",!0,this,"doSelection","evaluate the\nselected expression")),menu},window.TextMorph2.prototype.edit=function(){return this.changed(),TextMorph2.__super__.edit.apply(this,arguments)},window.TextMorph2.prototype.selectAllAndEdit=function(){return this.edit(),this.selectAll()},window.TextMorph2.prototype.doAll=function(){return this.receiver.evaluateString(this.text)},window.TextMorph2.prototype.setReceiver=function(obj){return this.receiver=obj,this.overridingContextMenu=this.evaluationMenu},window.TextMorph2.prototype.doSelection=function(){return this.receiver.evaluateString(this.selection()),this.edit()},window.TextMorph2.prototype.doContents=function(){return null!=this.receiver?this.receiver.evaluateString(this.text):this.evaluateString(this.text)},window.TextMorph2.prototype.showSelection=function(){var result;if(null!=(result=this.receiver.evaluateString(this.selection())))return this.inform(result)},window.TextMorph2.prototype.inspectSelection=function(){var result;if(null!=(result=this.receiver.evaluateString(this.selection())))return this.spawnInspector(result)},window.TextMorph2.prototype.mouseTripleClick=function(){var column,ref,ref1,row,slotBeginOfLine,slotsInRow;if(this.isEditable)return[row,column]=this.slotRowAndColumn(null!=(ref=world.caret)?ref.slot:void 0),slotBeginOfLine=this.slotAtRow(row+1,0),slotsInRow=this.wrappedLineSlots[row+1],this.selectBetween(slotBeginOfLine,slotsInRow),null!=(ref1=world.caret)?ref1.gotoSlot(slotsInRow):void 0},window.WindowContentsPlaceholderText=function(){WindowContentsPlaceholderText.__super__.constructor.call(this,"Drop a widget in here",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1),this.alignCenter(),this.alignMiddle(),this.fittingSpecWhenBoundsTooLarge=!1,this.changed(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowContentsPlaceholderText,"name",{value:"WindowContentsPlaceholderText"}),window.WindowContentsPlaceholderText.instances=[],window.WindowContentsPlaceholderText.__super__=window.TextMorph2.prototype,window.WindowContentsPlaceholderText=extend(window.WindowContentsPlaceholderText,window.TextMorph2),window.WindowContentsPlaceholderText.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return this.layoutSpecDetails=new WindowContentLayoutSpec(PreferredSize.DONT_MIND,PreferredSize.DONT_MIND,1)},window.SimpleVerticalStackPanelWdgt=function(extent,color,padding,constrainContentWidth=!0){this.padding=padding,this.constrainContentWidth=constrainContentWidth,SimpleVerticalStackPanelWdgt.__super__.constructor.call(this),this.appearance=new RectangularAppearance(this),null!=extent&&this.silentRawSetExtent(extent),null!=color&&(this.color=color),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleVerticalStackPanelWdgt,"name",{value:"SimpleVerticalStackPanelWdgt"}),window.SimpleVerticalStackPanelWdgt.instances=[],window.SimpleVerticalStackPanelWdgt.__super__=window.Widget.prototype,window.SimpleVerticalStackPanelWdgt=extend(window.SimpleVerticalStackPanelWdgt,window.Widget),window.SimpleVerticalStackPanelWdgt.augmentWith(window.ClippingAtRectangularBoundsMixin,"SimpleVerticalStackPanelWdgt"),window.SimpleVerticalStackPanelWdgt.prototype._acceptsDrops=!0,window.SimpleVerticalStackPanelWdgt.prototype.tight=!0,window.SimpleVerticalStackPanelWdgt.prototype.constrainContentWidth=!0,window.SimpleVerticalStackPanelWdgt.prototype._adjustingContentsBounds=!1,window.SimpleVerticalStackPanelWdgt.prototype.colloquialName=function(){return"stack"},window.SimpleVerticalStackPanelWdgt.prototype.add=function(aMorph,position=nil,layoutSpec=LayoutSpec.ATTACHEDAS_FREEFLOATING,beingDropped,unused,positionOnScreen){var childrenNotHandlesNorCarets,eachChild,i,len,positionNumberAmongSiblings;if(aMorph.rawResizeToWithoutSpacing(),childrenNotHandlesNorCarets=this.children.filter(function(m){return!(m instanceof HandleMorph||m instanceof CaretMorph)}),positionNumberAmongSiblings=nil,childrenNotHandlesNorCarets.length>0&&positionOnScreen instanceof Point)for(positionNumberAmongSiblings=0,i=0,len=childrenNotHandlesNorCarets.length;i<len&&(eachChild=childrenNotHandlesNorCarets[i],positionNumberAmongSiblings++,!(eachChild.top()<positionOnScreen.y&&eachChild.bottom()>positionOnScreen.y));i++);return null!=positionNumberAmongSiblings?SimpleVerticalStackPanelWdgt.__super__.add.call(this,aMorph,positionNumberAmongSiblings,layoutSpec,beingDropped):SimpleVerticalStackPanelWdgt.__super__.add.apply(this,arguments)},window.SimpleVerticalStackPanelWdgt.prototype.childRemoved=function(){return this.amIPanelOfScrollPanelWdgt()?(this.parent.adjustContentsBounds(),void this.parent.adjustScrollBars()):this.adjustContentsBounds()},window.SimpleVerticalStackPanelWdgt.prototype.reactToDropOf=function(){return this.amIPanelOfScrollPanelWdgt()?(this.parent.adjustContentsBounds(),void this.parent.adjustScrollBars()):this.adjustContentsBounds()},window.SimpleVerticalStackPanelWdgt.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return SimpleVerticalStackPanelWdgt.__super__.initialiseDefaultWindowContentLayoutSpec.apply(this,arguments),this.layoutSpecDetails.canSetHeightFreely=!1},window.SimpleVerticalStackPanelWdgt.prototype.availableWidthForContents=function(){return this.width()-2*this.padding},window.SimpleVerticalStackPanelWdgt.prototype.adjustContentsBounds=function(){var childrenNotHandlesNorCarets,newHeight,stackHeight,verticalPadding;if(!this._adjustingContentsBounds)return this._adjustingContentsBounds=!0,this.padding=5,2*this.padding,stackHeight=0,verticalPadding=0,(childrenNotHandlesNorCarets=this.children.filter(function(m){return!(m instanceof HandleMorph||m instanceof CaretMorph)})).forEach(morph=>{if(morph.layoutSpec!==LayoutSpec.ATTACHEDAS_VERTICAL_STACK_ELEMENT)return morph.initialiseDefaultVerticalStackLayoutSpec(),morph.layoutSpecDetails.rememberInitialDimensions(morph,this),morph.setLayoutSpec(LayoutSpec.ATTACHEDAS_VERTICAL_STACK_ELEMENT)}),childrenNotHandlesNorCarets.forEach(morph=>{var leftPosition,recommendedElementWidth;return verticalPadding+=this.padding,this.constrainContentWidth?(recommendedElementWidth=morph.layoutSpecDetails.getWidthInStack(),morph.rawSetWidthSizeHeightAccordingly(recommendedElementWidth),(morph instanceof TextMorph||morph instanceof SimplePlainTextWdgt)&&(morph.maxTextWidth=recommendedElementWidth),leftPosition="right"===morph.layoutSpecDetails.alignment?this.left()+this.width()-this.padding-recommendedElementWidth:"center"===morph.layoutSpecDetails.alignment?this.left()+Math.floor((this.width()-recommendedElementWidth)/2):this.left()+this.padding):(recommendedElementWidth=morph.width(),leftPosition=this.left()+this.padding),morph.fullRawMoveTo(new Point(leftPosition,this.top()+verticalPadding+stackHeight)),stackHeight+=morph.height()}),newHeight=stackHeight+verticalPadding+this.padding,this.tight&&0!==childrenNotHandlesNorCarets.length||(newHeight=Math.max(newHeight,this.height())),this.rawSetHeight(newHeight),this._adjustingContentsBounds=!1},window.SimpleVerticalStackPanelWdgt.prototype.rawSetExtent=function(aPoint){if(!aPoint.eq(this.extent()))return this.breakNumberOfRawMovesAndResizesCaches(),SimpleVerticalStackPanelWdgt.__super__.rawSetExtent.call(this,aPoint),this.adjustContentsBounds()},window.WindowWdgt=function(labelContent="my window",closeButton,contents,internal=!1,alwaysShowInternalExternalButton=!1){var titleToBeSet;this.labelContent=labelContent,this.closeButton=closeButton,this.contents=contents,this.internal=internal,this.alwaysShowInternalExternalButton=alwaysShowInternalExternalButton,WindowWdgt.__super__.constructor.call(this,nil,nil,40,!0),this.internal?this.appearance=new RectangularAppearance(this):this.appearance=new BoxyAppearance(this),this.strokeColor=new Color(125,125,125),this.tight=!0,this.defaultContents=new WindowContentsPlaceholderText,null==this.contents&&(this.contents=this.defaultContents),this.padding=5,this.color=new Color(248,248,248),this.buildAndConnectChildren(),this.contents===this.defaultContents?this.setEmptyWindowLabel():(this.disableDrops(),"window"===(titleToBeSet=this.contents.colloquialName())&&(titleToBeSet="window with another "+titleToBeSet),"internal window"===titleToBeSet&&(titleToBeSet="window with an "+titleToBeSet),this.label.setText(titleToBeSet)),this.rawSetExtent(new Point(300,300)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowWdgt,"name",{value:"WindowWdgt"}),window.WindowWdgt.instances=[],window.WindowWdgt.__super__=window.SimpleVerticalStackPanelWdgt.prototype,window.WindowWdgt=extend(window.WindowWdgt,window.SimpleVerticalStackPanelWdgt),window.WindowWdgt.prototype.label=nil,window.WindowWdgt.prototype.closeButton=nil,window.WindowWdgt.prototype.editButton=nil,window.WindowWdgt.prototype.collapseUncollapseSwitchButton=nil,window.WindowWdgt.prototype.labelContent=nil,window.WindowWdgt.prototype.resizer=nil,window.WindowWdgt.prototype.padding=nil,window.WindowWdgt.prototype.contents=nil,window.WindowWdgt.prototype.titlebarBackground=nil,window.WindowWdgt.prototype.contentNeverSetInPlaceYet=!0,window.WindowWdgt.prototype._adjustingContentsBounds=!1,window.WindowWdgt.prototype.internal=!1,window.WindowWdgt.prototype.defaultContents=nil,window.WindowWdgt.prototype.reInflating=!1,window.WindowWdgt.prototype.internalExternalSwitchButton=nil,window.WindowWdgt.prototype.alwaysShowInternalExternalButton=nil,window.WindowWdgt.prototype.createReference=function(referenceName,placeToDropItIn){var morphToAdd;return null!=referenceName&&"string"!=typeof referenceName&&(referenceName=nil,placeToDropItIn=world),null!=this.contents&&this.contents instanceof ScriptWdgt?(morphToAdd=new IconicDesktopSystemScriptShortcutWdgt(this,referenceName),placeToDropItIn.add(morphToAdd),morphToAdd.setExtent(new Point(75,75)),morphToAdd.fullChanged(),this.bringToForeground()):WindowWdgt.__super__.createReference.apply(this,arguments)},window.WindowWdgt.prototype.makeInternal=function(){if(!this.internal)return this.internal=!0,this.setAppearanceAndColorOfTitleBackground()},window.WindowWdgt.prototype.makeExternal=function(){var previousParent,ref;if(this.internal&&(this.internal=!1,this.unlockFromPanels(),this.setAppearanceAndColorOfTitleBackground(),previousParent=this.parent,world.add(this),null!=(ref=this.contents)&&"function"==typeof ref.holderWindowMadeIntoExternal&&ref.holderWindowMadeIntoExternal(),previousParent!==world))return this.fullRawMoveTo(this.position().add(new Point(10,10))),this.fullRawMoveWithin(world),this.rememberFractionalSituationInHoldingPanel()},window.WindowWdgt.prototype.setTitle=function(newTitle){return this.label.setText(this.contents.colloquialName()+": "+newTitle)},window.WindowWdgt.prototype.setTitleWithoutPrependedContentName=function(newTitle){return this.label.setText(newTitle)},window.WindowWdgt.prototype.representativeIcon=function(){return this.contents===this.defaultContents?WindowWdgt.__super__.representativeIcon.apply(this,arguments):this.contents.representativeIcon()},window.WindowWdgt.prototype.closeFromWindowBar=function(){var ref;return null!=(ref=this.contents)?ref.closeFromContainerWindow(this):void 0},window.WindowWdgt.prototype.contentsRecursivelyCanSetHeightFreely=function(){return this.contents instanceof WindowWdgt?this.contents.contentsRecursivelyCanSetHeightFreely():this.contents.layoutSpecDetails.canSetHeightFreely&&!this.contents.isCollapsed()&&!this.reInflating},window.WindowWdgt.prototype.recursivelyAttachedAsFreeFloating=function(){return this.layoutSpec===LayoutSpec.ATTACHEDAS_FREEFLOATING||null!=this.parent&&this.parent instanceof WindowWdgt&&this.parent.recursivelyAttachedAsFreeFloating()},window.WindowWdgt.prototype.rejectsBeingDropped=function(){return!this.internal},window.WindowWdgt.prototype.setEmptyWindowLabel=function(){return this.internal?this.label.setText("empty internal window"):this.label.setText("empty window")},window.WindowWdgt.prototype.colloquialName=function(){return this.internal?"internal window":"window"},window.WindowWdgt.prototype.add=function(aMorph,position=nil,layoutSpec,beingDropped,notContent){var ref,titleToBeSet;return notContent||aMorph instanceof CaretMorph||aMorph instanceof HandleMorph?WindowWdgt.__super__.add.call(this,aMorph,position,LayoutSpec.ATTACHEDAS_FREEFLOATING,beingDropped):(this.contentNeverSetInPlaceYet=!0,"window"===(titleToBeSet=aMorph.colloquialName())&&(titleToBeSet="window with another "+titleToBeSet),"internal window"===titleToBeSet&&(titleToBeSet="window with an "+titleToBeSet),this.label.setText(titleToBeSet),this.removeChild(this.contents),this.contents=aMorph,this.adjustContentsBounds(),WindowWdgt.__super__.add.call(this,aMorph,position,LayoutSpec.ATTACHEDAS_WINDOW_CONTENT,beingDropped)),null!=(ref=this.resizer)?ref.moveInFrontOfSiblings():void 0},window.WindowWdgt.prototype.childBeingDestroyed=function(child){if(child===this.contents)return this.resetToDefaultContents()},window.WindowWdgt.prototype.childBeingPickedUp=function(child){if(child===this.contents)return this.resetToDefaultContents()},window.WindowWdgt.prototype.childBeingClosed=function(child){if(child===this.contents)return this.resetToDefaultContents()},window.WindowWdgt.prototype.childBeingCollapsed=function(child){var ref,ref1;if(child===this.contents)return this.widthWhenUnCollapsed=this.width(),this.contentsExtentWhenCollapsed=this.contents.extent(),this.extentWhenCollapsed=this.extent(),null!=(ref=this.editButton)&&ref.destroy(),this.editButton=nil,null!=(ref1=this.internalExternalSwitchButton)&&ref1.destroy(),this.internalExternalSwitchButton=nil},window.WindowWdgt.prototype.childBeingUnCollapsed=function(child){return child===this.contents&&(this.widthWhenCollapsed=this.width()),this.createAndAddEditButton(),this.createAndAddInternalExternalSwitchButton()},window.WindowWdgt.prototype.childCollapsed=function(child){if(child===this.contents)return null!=this.widthWhenCollapsed&&this.rawSetWidth(this.widthWhenCollapsed),this.adjustContentsBounds(),this.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.WindowWdgt.prototype.childUnCollapsed=function(child){if(child===this.contents)return this.reInflating=!0,this.rawSetExtent(this.extentWhenCollapsed),this.contents.rawSetExtent(this.contentsExtentWhenCollapsed),null!=this.widthWhenUnCollapsed&&this.rawSetWidth(this.widthWhenUnCollapsed),this.adjustContentsBounds(),this.reInflating=!1,this.rememberFractionalSituationInHoldingPanel(),this.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.WindowWdgt.prototype.resetToDefaultContents=function(){if(this.enableDrops(),this.contents=this.defaultContents,this.buildAndConnectChildren(),this.setEmptyWindowLabel(),this.recursivelyAttachedAsFreeFloating())return this.rawSetExtent(new Point(300,300))},window.WindowWdgt.prototype.aboutToDrop=function(){return this.removeChild(this.contents)},window.WindowWdgt.prototype.justDropped=function(whereIn){var ref;return WindowWdgt.__super__.justDropped.apply(this,arguments),null!=(ref=this.contents)&&"function"==typeof ref.holderWindowJustDropped?ref.holderWindowJustDropped(whereIn):void 0},window.WindowWdgt.prototype.justBeenGrabbed=function(whereFrom){var ref;return null!=(ref=this.contents)&&"function"==typeof ref.holderWindowJustBeenGrabbed?ref.holderWindowJustBeenGrabbed(whereFrom):void 0},window.WindowWdgt.prototype.reactToDropOf=function(theWidget){return this.contents=theWidget,WindowWdgt.__super__.reactToDropOf.apply(this,arguments),this.disableDrops(),this.buildAndConnectChildren()},window.WindowWdgt.prototype.setAppearanceAndColorOfTitleBackground=function(){return this.internal?this.titlebarBackground.appearance=new RectangularAppearance(this.titlebarBackground):this.titlebarBackground.appearance=new BoxyAppearance(this.titlebarBackground),this.internal?(this.titlebarBackground.setColor(WorldMorph.preferencesAndSettings.internalWindowBarBackgroundColor),this.titlebarBackground.strokeColor=WorldMorph.preferencesAndSettings.internalWindowBarStrokeColor):(this.titlebarBackground.setColor(WorldMorph.preferencesAndSettings.externalWindowBarBackgroundColor),this.titlebarBackground.strokeColor=WorldMorph.preferencesAndSettings.externalWindowBarStrokeColor)},window.WindowWdgt.prototype.buildTitlebarBackground=function(){return null!=this.titlebarBackground&&this.titlebarBackground.fullDestroy(),this.internal?this.titlebarBackground=new RectangleMorph:this.titlebarBackground=new BoxMorph,this.setAppearanceAndColorOfTitleBackground(),this.add(this.titlebarBackground,nil,nil,nil,!0)},window.WindowWdgt.prototype.buildAndConnectChildren=function(){var collapseButton,ref,uncollapseButton;if(null==this.titlebarBackground&&this.buildTitlebarBackground(),null!=(ref=this.label)&&ref.fullDestroy(),this.label=new StringMorph2(this.labelContent,WorldMorph.preferencesAndSettings.titleBarTextFontSize),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?this.label.isBold=!0:this.label.isBold=WorldMorph.preferencesAndSettings.titleBarBoldText,this.label.color=new Color(255,255,255),this.add(this.label,nil,nil,nil,!0),null==this.closeButton&&(this.closeButton=new CloseIconButtonMorph),this.add(this.closeButton,nil,nil,nil,!0),null==this.collapseUncollapseSwitchButton&&(collapseButton=new CollapseIconButtonMorph,uncollapseButton=new UncollapseIconButtonMorph,this.collapseUncollapseSwitchButton=new SwitchButtonMorph([collapseButton,uncollapseButton])),this.add(this.collapseUncollapseSwitchButton,nil,nil,nil,!0),this.createAndAddInternalExternalSwitchButton(),this.createAndAddEditButton(),this.add(this.contents),null==this.resizer)return this.resizer=new HandleMorph(this)},window.WindowWdgt.prototype.createAndAddInternalExternalSwitchButton=function(){var externalButton,internalButton,listOfButtons,ref;if(((null!=(ref=this.contents)?ref.providesAmenitiesForEditing:void 0)||this.alwaysShowInternalExternalButton)&&null==this.internalExternalSwitchButton)return externalButton=new ExternalIconButtonWdgt,internalButton=new InternalIconButtonWdgt,listOfButtons=this.internal?[internalButton,externalButton]:[externalButton,internalButton],this.internalExternalSwitchButton=new SwitchButtonMorph(listOfButtons),this.add(this.internalExternalSwitchButton,nil,nil,nil,!0)},window.WindowWdgt.prototype.makePencilYellow=function(){var ref,ref1,ref2;return null!=(ref=this.editButton)&&(ref.color_normal=new Color(248,188,58)),null!=(ref1=this.editButton)&&ref1.setColor(new Color(248,188,58)),null!=(ref2=this.editButton)?ref2.changed():void 0},window.WindowWdgt.prototype.makePencilClear=function(){var ref,ref1,ref2;return null!=(ref=this.editButton)&&(ref.color_normal=new Color(245,244,245)),null!=(ref1=this.editButton)&&ref1.setColor(new Color(245,244,245)),null!=(ref2=this.editButton)?ref2.changed():void 0},window.WindowWdgt.prototype.createAndAddEditButton=function(){var ref;if((null!=(ref=this.contents)?ref.providesAmenitiesForEditing:void 0)&&null==this.editButton)return this.editButton=new EditIconButtonWdgt(this),this.add(this.editButton,nil,nil,nil,!0),this.contents.dragsDropsAndEditingEnabled?this.makePencilYellow():this.makePencilClear()},window.WindowWdgt.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return WindowWdgt.__super__.initialiseDefaultWindowContentLayoutSpec.apply(this,arguments),this.layoutSpecDetails.canSetHeightFreely=!1},window.WindowWdgt.prototype.adjustContentsBounds=function(){var buttonBounds,desiredHeight,labelBounds,labelLeft,labelRight,labelTop,labelWidth,leftPosition,newHeight,partOfHeightUsedUp,recommendedElementWidth,ref,ref1,ref2,ref3,ref4,stackHeight,windowWidth;if(!this._adjustingContentsBounds)return this._adjustingContentsBounds=!0,2*this.padding,16,null!=this.closeButton&&this.closeButton.parent===this&&(buttonBounds=(buttonBounds=new Rectangle(new Point(this.left()+this.padding,this.top()+this.padding))).setBoundsWidthAndHeight(16,16),this.closeButton.doLayout(buttonBounds)),null!=this.collapseUncollapseSwitchButton&&this.collapseUncollapseSwitchButton.parent===this&&(buttonBounds=(buttonBounds=new Rectangle(new Point(this.left()+16+2*this.padding,this.top()+this.padding))).setBoundsWidthAndHeight(16,16),this.collapseUncollapseSwitchButton.doLayout(buttonBounds)),stackHeight=0,null==this.contents||this.contents.collapsed||(this.contents.layoutSpec!==LayoutSpec.ATTACHEDAS_WINDOW_CONTENT&&(this.contents.initialiseDefaultWindowContentLayoutSpec(),this.contents.setLayoutSpec(LayoutSpec.ATTACHEDAS_WINDOW_CONTENT)),this.contentNeverSetInPlaceYet?(this.contents.layoutSpecDetails.preferredStartingWidth===PreferredSize.THIS_ONE_I_HAVE_NOW?(recommendedElementWidth=this.contents.width(),windowWidth=this.recursivelyAttachedAsFreeFloating()?recommendedElementWidth+2*this.padding:Math.min(this.width(),recommendedElementWidth+2*this.padding),this.rawSetWidth(windowWidth)):this.contents.layoutSpecDetails.preferredStartingWidth===PreferredSize.DONT_MIND?recommendedElementWidth=this.width()-2*this.padding:(recommendedElementWidth=this.contents.layoutSpecDetails.preferredStartingWidth,windowWidth=this.recursivelyAttachedAsFreeFloating()?recommendedElementWidth+2*this.padding:Math.min(this.width(),recommendedElementWidth+2*this.padding),this.rawSetWidth(windowWidth)),this.contents.layoutSpecDetails.rememberInitialDimensions(this.contents,this)):recommendedElementWidth=this.contents.layoutSpecDetails.getWidthInStack(),partOfHeightUsedUp=this.contents.layoutSpecDetails.resizerCanOverlapContents?Math.round(16+this.padding+this.padding+2*this.padding):Math.round(16+this.padding+this.padding+3*this.padding+WorldMorph.preferencesAndSettings.handleSize),this.contentNeverSetInPlaceYet?(this.contents.layoutSpecDetails.preferredStartingHeight===PreferredSize.THIS_ONE_I_HAVE_NOW?(desiredHeight=this.contents.height(),this.recursivelyAttachedAsFreeFloating()||(desiredHeight=Math.min(desiredHeight,this.height()-partOfHeightUsedUp)),this.contents.rawSetWidth(recommendedElementWidth),this.rawSetWidth(windowWidth),this.contents.rawSetHeight(desiredHeight)):this.contents.layoutSpecDetails.preferredStartingHeight===PreferredSize.DONT_MIND?(this.contents.rawSetWidth(recommendedElementWidth),desiredHeight=Math.round(this.height()-partOfHeightUsedUp),this.contents.rawSetHeight(desiredHeight)):(this.contents.rawSetWidthSizeHeightAccordingly(recommendedElementWidth),desiredHeight=this.contents.height()),this.contentNeverSetInPlaceYet=!1):(this.contents.rawSetWidthSizeHeightAccordingly(recommendedElementWidth),desiredHeight=this.contents.height(),this.contentsRecursivelyCanSetHeightFreely()&&(desiredHeight=Math.round(this.height()-partOfHeightUsedUp),this.contents.rawSetHeight(desiredHeight))),(this.contents instanceof TextMorph||this.contents instanceof SimplePlainTextWdgt)&&(this.contents.maxTextWidth=recommendedElementWidth),leftPosition=this.left()+Math.floor((this.width()-recommendedElementWidth)/2),this.contents.fullRawMoveTo(new Point(leftPosition,this.top()+(16+this.padding+this.padding)+this.padding)),stackHeight+=desiredHeight),null!=this.contents&&this.contents.collapsed&&(partOfHeightUsedUp=Math.round(16+this.padding+this.padding)),newHeight=stackHeight+partOfHeightUsedUp,this.rawSetHeight(newHeight),this.titlebarBackground.rawSetExtent(new Point(this.width(),16+2*this.padding).subtract(new Point(2,2))),this.titlebarBackground.fullRawMoveTo(this.position().add(new Point(1,1))),this.width()<4*(16+this.padding)+this.padding?null!=(ref=this.editButton)&&ref.collapse():null!=(ref1=this.editButton)&&ref1.unCollapse(),this.width()<3*(16+this.padding)+this.padding?null!=(ref2=this.internalExternalSwitchButton)&&ref2.collapse():null!=(ref3=this.internalExternalSwitchButton)&&ref3.unCollapse(),null!=this.label&&this.label.parent===this&&(labelLeft=this.left()+this.padding+2*(16+this.padding),labelTop=this.top()+this.padding,labelRight=this.right()-this.padding,null==this.editButton||this.editButton.isCollapsed()||(labelRight-=1*(16+this.padding)),null==this.internalExternalSwitchButton||this.internalExternalSwitchButton.isCollapsed()||(labelRight-=1*(16+this.padding)),labelWidth=labelRight-labelLeft,labelBounds=(labelBounds=new Rectangle(new Point(labelLeft,labelTop))).setBoundsWidthAndHeight(labelWidth,WorldMorph.preferencesAndSettings.titleBarTextHeight),this.label.rawSetBounds(labelBounds)),null==this.editButton||this.editButton.isCollapsed()||this.editButton.parent!==this||(buttonBounds=(buttonBounds=new Rectangle(new Point(this.right()-2*(16+this.padding),this.top()+this.padding))).setBoundsWidthAndHeight(16,16),this.editButton.doLayout(buttonBounds)),null==this.internalExternalSwitchButton||this.internalExternalSwitchButton.isCollapsed()||this.internalExternalSwitchButton.parent!==this||(buttonBounds=(buttonBounds=new Rectangle(new Point(this.right()-1*(16+this.padding),this.top()+this.padding))).setBoundsWidthAndHeight(16,16),this.internalExternalSwitchButton.doLayout(buttonBounds)),null!=(ref4=this.resizer)&&ref4.silentUpdateResizerHandlePosition(),this._adjustingContentsBounds=!1},window.FolderWindowWdgt=function(labelContent,closeButton,contents,internal=!1){this.labelContent=labelContent,this.closeButton=closeButton,this.contents=contents,this.internal=internal,this.contents=new ScrollPanelWdgt(new FolderPanelWdgt),FolderWindowWdgt.__super__.constructor.call(this,"",this.closeButton,this.contents,this.internal),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FolderWindowWdgt,"name",{value:"FolderWindowWdgt"}),window.FolderWindowWdgt.instances=[],window.FolderWindowWdgt.__super__=window.WindowWdgt.prototype,window.FolderWindowWdgt=extend(window.FolderWindowWdgt,window.WindowWdgt),window.FolderWindowWdgt.prototype.representativeIcon=function(){return new GenericShortcutIconWdgt(new FolderIconWdgt)},window.FolderWindowWdgt.prototype.closeFromWindowBar=function(){return world.anyReferenceToWdgt(this)?this.close():new SaveShortcutPromptWdgt(this,this).popUpAtHand()},window.FolderWindowWdgt.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){return FolderWindowWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),this.contents.contents.addMorphSpecificMenuEntries(morphOpeningThePopUp,menu)},window.FolderWindowWdgt.prototype.createReference=function(referenceName,whichFolderPanelToAddTo){var morphToAdd;return null!=referenceName&&"string"!=typeof referenceName&&(referenceName=nil,world),morphToAdd=new IconicDesktopSystemFolderShortcutWdgt(this,referenceName),whichFolderPanelToAddTo.add(morphToAdd),morphToAdd.setExtent(new Point(75,75)),morphToAdd.fullChanged(),this.bringToForeground()},window.GlassBoxBottomWdgt=function(){GlassBoxBottomWdgt.__super__.constructor.apply(this,arguments),this.setColor(new Color(230,230,230)),this.strokeColor=new Color(196,195,196),this.setAlphaScaled(50),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.GlassBoxBottomWdgt,"name",{value:"GlassBoxBottomWdgt"}),window.GlassBoxBottomWdgt.instances=[],window.GlassBoxBottomWdgt.__super__=window.BoxMorph.prototype,window.GlassBoxBottomWdgt=extend(window.GlassBoxBottomWdgt,window.BoxMorph),window.GlassBoxBottomWdgt.prototype.reLayout=function(){var childrenNotHandlesNorCarets,eachChild,i,len,ratio,thumbnailSize;for(trackChanges.push(!1),thumbnailSize=this.width(),i=0,len=(childrenNotHandlesNorCarets=this.children.filter(function(m){return!(m instanceof HandleMorph||m instanceof CaretMorph)})).length;i<len;i++)(eachChild=childrenNotHandlesNorCarets[i])instanceof MenuItemMorph?eachChild.fullRawMoveTo(this.topLeft().add(new Point(0,(this.height()-eachChild.height())/2).round())):(null!=eachChild.idealRatioWidthToHeight?(ratio=eachChild.idealRatioWidthToHeight)>1?eachChild.rawSetExtent(new Point(thumbnailSize,thumbnailSize/ratio)):eachChild.rawSetExtent(new Point(thumbnailSize*ratio,thumbnailSize)):eachChild.rawSetExtent(new Point(thumbnailSize,thumbnailSize)),eachChild.fullRawMoveTo(this.topLeft().add(new Point((thumbnailSize-eachChild.width())/2,(thumbnailSize-eachChild.height())/2).round())));return trackChanges.pop(),this.fullChanged()};var WidgetCreatorAndSmartPlacerOnClickMixin;WidgetCreatorAndSmartPlacerOnClickMixin={onceAddedClassProperties:function(fromClass){return this.addInstanceProperties(fromClass,{mouseClickLeft:function(ignored,ignored2,ignored3,ignored4,ignored5,ignored6,ignored7,partOfDoubleClick){var where,widgetToBePlaced;if(!partOfDoubleClick)return widgetToBePlaced=this.createWidgetToBeHandled(),null!=(where=world.topmostChildSuchThat(function(w){return w instanceof WindowWdgt&&null!=w.contents&&(w.contents instanceof StretchableEditableWdgt||w.contents instanceof SimpleDocumentWdgt||w.contents instanceof PatchProgrammingWdgt||w.contents instanceof SimpleSlideWdgt)&&w.contents.dragsDropsAndEditingEnabled}))?where.contents instanceof StretchableEditableWdgt||where.contents instanceof PatchProgrammingWdgt||where.contents instanceof SimpleSlideWdgt?(widgetToBePlaced.fullRawMoveTo(where.contents.stretchableWidgetContainer.center().round().subtract(widgetToBePlaced.extent().floorDivideBy(2))),where.contents.stretchableWidgetContainer.add(widgetToBePlaced),widgetToBePlaced.rememberFractionalSituationInHoldingPanel(),where.contents.stretchableWidgetContainer.bringToForeground(),this.bringToForeground()):(where.contents.simpleDocumentScrollPanel.add(widgetToBePlaced),where.contents.simpleDocumentScrollPanel.scrollToBottom(),where.contents.simpleDocumentScrollPanel.bringToForeground(),this.bringToForeground()):(widgetToBePlaced.fullRawMoveTo(this.topRight().add(new Point(20,-40))),widgetToBePlaced.fullRawMoveWithin(world),world.add(widgetToBePlaced))}})}},window.GlassBoxTopWdgt=function(){window.GlassBoxTopWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.GlassBoxTopWdgt,"name",{value:"GlassBoxTopWdgt"}),window.GlassBoxTopWdgt.instances=[],window.GlassBoxTopWdgt.__super__=window.Widget.prototype,window.GlassBoxTopWdgt=extend(window.GlassBoxTopWdgt,window.Widget),window.GlassBoxTopWdgt.augmentWith(window.HighlightableMixin,"GlassBoxTopWdgt"),window.GlassBoxTopWdgt.augmentWith(window.WidgetCreatorAndSmartPlacerOnClickMixin,"GlassBoxTopWdgt"),window.GlassBoxTopWdgt.prototype.createWidgetToBeHandled=function(){var widgetToBeHandled;return widgetToBeHandled=this.parent.children[0].fullCopy(),widgetToBeHandled.isTemplate=!1,widgetToBeHandled},window.GlassBoxTopWdgt.prototype.findRootForGrab=function(){return this.parent.children[0]},window.GlassBoxTopWdgt.prototype.setColor=function(theColor,ignored,connectionsCalculationToken,superCall){var ref;if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,null!=(ref=this.parent)?ref.setColor(theColor,ignored,connectionsCalculationToken):void 0},window.GrayPaletteMorph=function(target=nil,sizePoint){this.target=target,GrayPaletteMorph.__super__.constructor.call(this,this.target,sizePoint||new Point(80,10)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.GrayPaletteMorph,"name",{value:"GrayPaletteMorph"}),window.GrayPaletteMorph.instances=[],window.GrayPaletteMorph.__super__=window.ColorPaletteMorph.prototype,window.GrayPaletteMorph=extend(window.GrayPaletteMorph,window.ColorPaletteMorph),window.GrayPaletteMorph.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return this.layoutSpecDetails=new WindowContentLayoutSpec(PreferredSize.DONT_MIND,PreferredSize.DONT_MIND,1)},window.GrayPaletteMorph.prototype.colloquialName=function(){return"shades of gray"},window.GrayPaletteMorph.prototype.createRefreshOrGetBackBuffer=function(){var backBuffer,backBufferContext,cacheEntry,cacheHit,cacheKey,extent,gradient;return cacheKey=this.constructor.name+"-"+this.extent().toString(),null!=(cacheHit=world.cacheForImmutableBackBuffers.get(cacheKey))?cacheHit:(extent=this.extent(),backBuffer=newCanvas(extent.scaleBy(pixelRatio)),(backBufferContext=backBuffer.getContext("2d")).scale(pixelRatio,pixelRatio),this.choice=new Color,(gradient=backBufferContext.createLinearGradient(0,extent.y,extent.x,extent.y)).addColorStop(0,"black"),gradient.addColorStop(1,"white"),backBufferContext.fillStyle=gradient,backBufferContext.fillRect(0,0,extent.x,extent.y),cacheEntry=[backBuffer,backBufferContext],world.cacheForImmutableBackBuffers.set(cacheKey,cacheEntry),cacheEntry)},window.HandMorph=function(world){this.world=world,this.mouseOverList=[],this.toolTipsList=[],HandMorph.__super__.constructor.call(this),this.minimumExtent=new Point(0,0),this.silentRawSetBounds(Rectangle.EMPTY),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.HandMorph,"name",{value:"HandMorph"}),window.HandMorph.instances=[],window.HandMorph.__super__=window.Widget.prototype,window.HandMorph=extend(window.HandMorph,window.Widget),window.HandMorph.prototype.world=nil,window.HandMorph.prototype.mouseButton=nil,window.HandMorph.prototype.mouseDownMorph=nil,window.HandMorph.prototype.mouseDownPosition=nil,window.HandMorph.prototype.morphToGrab=nil,window.HandMorph.prototype.grabOrigin=nil,window.HandMorph.prototype.mouseOverList=nil,window.HandMorph.prototype.toolTipsList=nil,window.HandMorph.prototype.touchHoldTimeout=nil,window.HandMorph.prototype.doubleClickMorph=nil,window.HandMorph.prototype.tripleClickMorph=nil,window.HandMorph.prototype.nonFloatDraggedMorph=nil,window.HandMorph.prototype.nonFloatDragPositionWithinMorphAtStart=nil,window.HandMorph.prototype.previousNonFloatDraggingPos=nil,window.HandMorph.prototype.clippedThroughBounds=function(){return this.checkClippedThroughBoundsCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes,this.clippedThroughBoundsCache=this.boundingBox(),this.clippedThroughBoundsCache},window.HandMorph.prototype.clipThrough=function(){return this.checkClipThroughCache=WorldMorph.numberOfAddsAndRemoves+"-"+WorldMorph.numberOfVisibilityFlagsChanges+"-"+WorldMorph.numberOfCollapseFlagsChanges+"-"+WorldMorph.numberOfRawMovesAndResizes,this.clipThroughCache=this.boundingBox(),this.clipThroughCache},window.HandMorph.prototype.topMorphUnderPointer=function(){var result;return null!=(result=this.world.topMorphSuchThat(m=>m.clippedThroughBounds().containsPoint(this.position())&&m.visibleBasedOnIsVisibleProperty()&&!m.isCollapsed()&&(m.noticesTransparentClick||!m.isTransparentAt(this.position()))&&!(m instanceof CaretMorph)&&null==m.morphThisMorphIsHighlighting&&null==m.morphThisMorphIsPinouting))?result:this.world},window.HandMorph.prototype.menuAtPointer=function(){return this.world.topMorphSuchThat(m=>m.clippedThroughBounds().containsPoint(this.position())&&m.visibleBasedOnIsVisibleProperty()&&!m.isCollapsed()&&(m.noticesTransparentClick||!m.isTransparentAt(this.position()))&&m instanceof MenuMorph)},window.HandMorph.prototype.openContextMenuAtPointer=function(morphTheMenuIsAbout){var contextMenu;for(this.destroyTemporaryHandlesAndLayoutAdjustersIfHandHasNotActionedThem(morphTheMenuIsAbout),this.stopEditingIfWidgetDoesntNeedCaretOrActionIsElsewhere(morphTheMenuIsAbout),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state===AutomatorRecorderAndPlayer.PLAYING&&(fade("rightMouseButtonIndicator",0,1,10,(new Date).getTime()),setTimeout(()=>fade("rightMouseButtonIndicator",1,0,500,(new Date).getTime()),100)),contextMenu=morphTheMenuIsAbout.buildContextMenu();!contextMenu&&morphTheMenuIsAbout.parent;)contextMenu=(morphTheMenuIsAbout=morphTheMenuIsAbout.parent).buildContextMenu();if(contextMenu)return contextMenu.popUpAtHand()},window.HandMorph.prototype.allMorphsAtPointer=function(){return this.world.collectAllChildrenBottomToTopSuchThat(m=>m.visibleBasedOnIsVisibleProperty()&&!m.isCollapsed()&&m.clippedThroughBounds().containsPoint(this.position()))},window.HandMorph.prototype.dropTargetFor=function(aMorph){var target;for(target=this.topMorphUnderPointer();!target.wantsDropOf(aMorph);)target=target.parent;return target},window.HandMorph.prototype.grab=function(aMorph,displacementDueToGrabDragThreshold,switcherooHappened){var action,arr,oldParent;return aMorph instanceof WorldMorph?nil:(oldParent=aMorph.parent,this.floatDraggingSomething()?void 0:("undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&(this.world.automatorRecorderAndPlayer.addGrabCommand(),AutomatorRecorderAndPlayer.state===AutomatorRecorderAndPlayer.RECORDING&&(action="grab",arr=window.world.automatorRecorderAndPlayer.tagsCollectedWhileRecordingTest,indexOf.call(arr,action)<0&&arr.push(action))),this.world.stopEditing(),switcherooHappened?(aMorph.fullRawMoveTo(this.position().subtract(aMorph.extent().floorDivideBy(2))),aMorph.fullRawMoveWithin(world)):null!=aMorph.extentToGetWhenDraggedFromGlassBox&&oldParent instanceof GlassBoxBottomWdgt?(aMorph.rawSetExtent(aMorph.extentToGetWhenDraggedFromGlassBox),aMorph.fullRawMoveTo(this.position().subtract(aMorph.extent().floorDivideBy(2))),aMorph.fullRawMoveWithin(world)):null!=displacementDueToGrabDragThreshold&&aMorph.fullMoveTo(aMorph.position().add(displacementDueToGrabDragThreshold)),this.grabOrigin=aMorph.situation(),"function"==typeof aMorph.prepareToBeGrabbed&&aMorph.prepareToBeGrabbed(),this.add(aMorph),"function"==typeof aMorph.justBeenGrabbed&&aMorph.justBeenGrabbed(oldParent),aMorph.addShadow(new Point(6,6),.1),this.fullChanged(),null!=oldParent&&"function"==typeof oldParent.reactToGrabOf?oldParent.reactToGrabOf(aMorph):void 0))},window.HandMorph.prototype.draggingSomething=function(){return this.floatDraggingSomething()||this.nonFloatDraggingSomething()},window.HandMorph.prototype.floatDraggingSomething=function(){return this.children.length>0},window.HandMorph.prototype.nonFloatDraggingSomething=function(){return null!=this.nonFloatDraggedMorph},window.HandMorph.prototype.drop=function(){var action,arr,morphToDrop,target;if(this.floatDraggingSomething())return"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&(this.world.automatorRecorderAndPlayer.addDropCommand(),AutomatorRecorderAndPlayer.state===AutomatorRecorderAndPlayer.RECORDING&&(action="drop",arr=window.world.automatorRecorderAndPlayer.tagsCollectedWhileRecordingTest,indexOf.call(arr,action)<0&&arr.push(action))),morphToDrop=this.children[0],target=("function"==typeof morphToDrop.rejectsBeingDropped?morphToDrop.rejectsBeingDropped():void 0)?world:this.dropTargetFor(morphToDrop),this.fullChanged(),"function"==typeof morphToDrop.aboutToBeDropped&&morphToDrop.aboutToBeDropped(target),"function"==typeof target.aboutToDrop&&target.aboutToDrop(morphToDrop),target.add(morphToDrop,nil,nil,!0,nil,this.position()),morphToDrop.fullChanged(),morphToDrop instanceof HorizontalMenuPanelWdgt||(world.lastNonTextPropertyChangerButtonClickedOrDropped=morphToDrop),this.children=[],this.rawSetExtent(new Point),"function"==typeof target.reactToDropOf&&target.reactToDropOf(morphToDrop,this),"function"==typeof morphToDrop.justDropped?morphToDrop.justDropped(target):void 0},window.HandMorph.prototype.destroyTemporaryHandlesAndLayoutAdjustersIfHandHasNotActionedThem=function(actionedMorph){var i,len,ref;if(this.world.temporaryHandlesAndLayoutAdjusters.length>0&&indexOf.call(this.world.temporaryHandlesAndLayoutAdjusters,actionedMorph)<0){for(i=0,len=(ref=this.world.temporaryHandlesAndLayoutAdjusters).length;i<len;i++)ref[i].fullDestroy();return this.world.temporaryHandlesAndLayoutAdjusters=[]}},window.HandMorph.prototype.stopEditingIfWidgetDoesntNeedCaretOrActionIsElsewhere=function(actionedMorph){var mostRecentlyCreatedPopUp;if(null!=this.world.caret){if(null!=actionedMorph.editorContentPropertyChangerButton&&actionedMorph.editorContentPropertyChangerButton)return;if(null!=actionedMorph.parent&&actionedMorph.parent instanceof SimpleButtonMorph&&null!=actionedMorph.parent.editorContentPropertyChangerButton&&actionedMorph.parent.editorContentPropertyChangerButton)return;if(actionedMorph!==this.world.caret.target){if(null==(mostRecentlyCreatedPopUp=world.mostRecentlyCreatedPopUp()))return this.world.stopEditing();if(!mostRecentlyCreatedPopUp.isAncestorOf(actionedMorph))return this.world.stopEditing()}}},window.HandMorph.prototype.processMouseDown=function(button,buttons,ctrlKey,shiftKey,altKey,metaKey){var actualClick,expectedClick,morph;if(this.destroyToolTips(),this.morphToGrab=nil,"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state===AutomatorRecorderAndPlayer.PLAYING&&(2===button||ctrlKey?fade("rightMouseButtonIndicator",0,1,10,(new Date).getTime()):fade("leftMouseButtonIndicator",0,1,10,(new Date).getTime())),this.mouseDownPosition=this.position(),this.floatDraggingSomething())return this.drop(),this.mouseButton=nil;for(morph=this.topMorphUnderPointer(),this.destroyTemporaryHandlesAndLayoutAdjustersIfHandHasNotActionedThem(morph),this.stopEditingIfWidgetDoesntNeedCaretOrActionIsElsewhere(morph),morph.firstParentThatIsAPopUp()instanceof MenuMorph||this.cleanupMenuMorphs(nil,morph,!0),this.morphToGrab=morph.findRootForGrab(),2===button||ctrlKey?(this.mouseButton="right",actualClick="mouseDownRight",expectedClick="mouseClickRight"):(this.mouseButton="left",actualClick="mouseDownLeft",expectedClick="mouseClickLeft"),this.mouseDownMorph=morph;!this.mouseDownMorph[expectedClick];)this.mouseDownMorph=this.mouseDownMorph.parent;for(;null==morph[actualClick]&&null!=morph.parent;)morph=morph.parent;return null!=morph[actualClick]?morph[actualClick](this.position()):void 0},window.HandMorph.prototype.processTouchStart=function(event){if(event.preventDefault(),clearInterval(this.touchHoldTimeout),1===event.touches.length)return this.touchHoldTimeout=setInterval(()=>(this.processMouseDown(2),this.processMouseUp(2),event.preventDefault(),clearInterval(this.touchHoldTimeout)),400),this.processMouseMove(event.touches[0].pageX,event.touches[0].pageY),this.processMouseDown(0)},window.HandMorph.prototype.processTouchMove=function(event){var touch;if(event.preventDefault(),1===event.touches.length)return touch=event.touches[0],this.processMouseMove(touch.pageX,touch.pageY),clearInterval(this.touchHoldTimeout)},window.HandMorph.prototype.processTouchEnd=function(event){return clearInterval(this.touchHoldTimeout),this.processMouseUp(0)},window.HandMorph.prototype.processMouseUp=function(button,buttons,ctrlKey,shiftKey,altKey,metaKey){var alreadyRecordedLeftOrRightClickOnMenuItem,base,disableConsecutiveClicksFromSingleClicksDueToFastTests,doubleClickInvocation,expectedClick,ignored,labelString,menuItemMorph,morph,occurrenceNumber,pointerAndMorphInfo,toDestructure,tripleClickInvocation;if("undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state===AutomatorRecorderAndPlayer.PLAYING&&(2===button?fade("rightMouseButtonIndicator",1,0,500,(new Date).getTime()):fade("leftMouseButtonIndicator",1,0,500,(new Date).getTime())),morph=this.topMorphUnderPointer(),alreadyRecordedLeftOrRightClickOnMenuItem=!1,this.destroyToolTips(),world.freshlyCreatedPopUps=[],this.floatDraggingSomething())this.drop();else{for(this.nonFloatDraggingSomething()&&"function"==typeof(base=this.nonFloatDraggedMorph).endOfNonFloatDrag&&base.endOfNonFloatDrag(),this.previousNonFloatDraggingPos=nil,ignored=nil,null!=(toDestructure=morph.parentThatIsA(MenuItemMorph))&&([menuItemMorph,ignored]=toDestructure,menuItemMorph&&world.mostRecentlyCreatedPopUp()===menuItemMorph.parent&&(labelString=menuItemMorph.labelString,occurrenceNumber=menuItemMorph.howManySiblingsBeforeMeSuchThat(function(m){return m.labelString===labelString}),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&this.world.automatorRecorderAndPlayer.addCommandLeftOrRightClickOnMenuItem(this.mouseButton,labelString,occurrenceNumber+1),alreadyRecordedLeftOrRightClickOnMenuItem=!0)),"left"===this.mouseButton?expectedClick="mouseClickLeft":(expectedClick="mouseClickRight",this.mouseButton&&(alreadyRecordedLeftOrRightClickOnMenuItem||"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&this.world.automatorRecorderAndPlayer.addOpenContextMenuCommand(morph.uniqueIDString())));!morph[expectedClick]&&null!=(morph=morph.parent););if(null!=morph&&morph===this.mouseDownMorph){switch(expectedClick){case"mouseClickLeft":pointerAndMorphInfo=world.getPointerAndMorphInfo(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&world.automatorRecorderAndPlayer.addMouseClickCommand(0,nil,...pointerAndMorphInfo),"function"==typeof morph.mouseUpLeft&&morph.mouseUpLeft(this.position(),button,buttons,ctrlKey,shiftKey,altKey,metaKey);break;case"mouseClickRight":pointerAndMorphInfo=world.getPointerAndMorphInfo(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&world.automatorRecorderAndPlayer.addMouseClickCommand(2,nil,...pointerAndMorphInfo),"function"==typeof morph.mouseUpRight&&morph.mouseUpRight(this.position(),button,buttons,ctrlKey,shiftKey,altKey,metaKey)}doubleClickInvocation=!1,null!=this.doubleClickMorph?"left"===this.mouseButton&&this.doubleClickMorph===morph&&this.doubleClickPosition.distanceTo(this.position())<WorldMorph.preferencesAndSettings.grabDragThreshold?(this.doubleClickMorph=nil,disableConsecutiveClicksFromSingleClicksDueToFastTests=!1,"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state===AutomatorRecorderAndPlayer.PLAYING&&(window.world.automatorRecorderAndPlayer.runningInSlowMode()||(disableConsecutiveClicksFromSingleClicksDueToFastTests=!0)),disableConsecutiveClicksFromSingleClicksDueToFastTests||(doubleClickInvocation=!0,this.rememberTripleClickMorphsForAWhile(morph))):this.forgetDoubleClickMorphs():this.rememberDoubleClickMorphsForAWhile(morph),tripleClickInvocation=!1,doubleClickInvocation||"left"===this.mouseButton&&this.tripleClickMorph===morph&&this.tripleClickPosition.distanceTo(this.position())<WorldMorph.preferencesAndSettings.grabDragThreshold&&(this.tripleClickMorph===morph?(this.tripleClickMorph=nil,disableConsecutiveClicksFromSingleClicksDueToFastTests=!1,"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state===AutomatorRecorderAndPlayer.PLAYING&&(window.world.automatorRecorderAndPlayer.runningInSlowMode()||(disableConsecutiveClicksFromSingleClicksDueToFastTests=!0)),disableConsecutiveClicksFromSingleClicksDueToFastTests||(tripleClickInvocation=!0)):this.forgetTripleClickMorphs()),morph.editorContentPropertyChangerButton||morph instanceof HorizontalMenuPanelWdgt||(world.lastNonTextPropertyChangerButtonClickedOrDropped=morph),morph[expectedClick](this.position(),button,buttons,ctrlKey,shiftKey,altKey,metaKey,doubleClickInvocation,tripleClickInvocation),doubleClickInvocation&&this.processDoubleClick(morph),tripleClickInvocation&&this.processTripleClick(morph)}null==this.nonFloatDraggedMorph&&this.cleanupMenuMorphs(expectedClick,morph)}return this.mouseButton=nil,this.nonFloatDraggedMorph=nil},window.HandMorph.prototype.forgetDoubleClickMorphs=function(){return this.doubleClickMorph=nil,this.doubleClickPosition=nil},window.HandMorph.prototype.rememberDoubleClickMorphsForAWhile=function(morph){return this.doubleClickMorph=morph,this.doubleClickPosition=this.position(),setTimeout(()=>(this.forgetDoubleClickMorphs(),!1),300)},window.HandMorph.prototype.forgetTripleClickMorphs=function(){return this.tripleClickMorph=nil,this.tripleClickPosition=nil},window.HandMorph.prototype.rememberTripleClickMorphsForAWhile=function(morph){return this.tripleClickMorph=morph,this.tripleClickPosition=this.position(),setTimeout(()=>(this.forgetTripleClickMorphs(),!1),300)},window.HandMorph.prototype.cleanupMenuMorphs=function(expectedClick,morph,alsoKillFreshMenus){var ascendingMorphs,eachMorphWantingToBeNotifiedIfClickOutsideThemOrTheirChildren,firstParentThatIsAPopUp,i,len,morphsDetectingClickOutsideMeOrAnyOfMeChildren,results;for(world.hierarchyOfClickedMorphs=[],world.hierarchyOfClickedMenus=[],world.closePopUpsMarkedForClosure(),ascendingMorphs=morph,world.hierarchyOfClickedMorphs=[ascendingMorphs];null!=ascendingMorphs.parent;)ascendingMorphs=ascendingMorphs.parent,world.hierarchyOfClickedMorphs.push(ascendingMorphs);for(null!=(null!=(firstParentThatIsAPopUp=morph.firstParentThatIsAPopUp())?firstParentThatIsAPopUp.hierarchyOfPopUps:void 0)&&(world.hierarchyOfClickedMenus=firstParentThatIsAPopUp.hierarchyOfPopUps()),results=[],i=0,len=(morphsDetectingClickOutsideMeOrAnyOfMeChildren=arrayShallowCopy(world.morphsDetectingClickOutsideMeOrAnyOfMeChildren)).length;i<len;i++)eachMorphWantingToBeNotifiedIfClickOutsideThemOrTheirChildren=morphsDetectingClickOutsideMeOrAnyOfMeChildren[i],indexOf.call(world.hierarchyOfClickedMenus,eachMorphWantingToBeNotifiedIfClickOutsideThemOrTheirChildren)<0&&indexOf.call(world.hierarchyOfClickedMorphs,eachMorphWantingToBeNotifiedIfClickOutsideThemOrTheirChildren)<0&&(alsoKillFreshMenus||indexOf.call(world.freshlyCreatedPopUps,eachMorphWantingToBeNotifiedIfClickOutsideThemOrTheirChildren)<0)&&null!=eachMorphWantingToBeNotifiedIfClickOutsideThemOrTheirChildren.clickOutsideMeOrAnyOfMeChildrenCallback[0]?results.push(eachMorphWantingToBeNotifiedIfClickOutsideThemOrTheirChildren[eachMorphWantingToBeNotifiedIfClickOutsideThemOrTheirChildren.clickOutsideMeOrAnyOfMeChildrenCallback[0]].call(eachMorphWantingToBeNotifiedIfClickOutsideThemOrTheirChildren,eachMorphWantingToBeNotifiedIfClickOutsideThemOrTheirChildren.clickOutsideMeOrAnyOfMeChildrenCallback[1],eachMorphWantingToBeNotifiedIfClickOutsideThemOrTheirChildren.clickOutsideMeOrAnyOfMeChildrenCallback[2],eachMorphWantingToBeNotifiedIfClickOutsideThemOrTheirChildren.clickOutsideMeOrAnyOfMeChildrenCallback[3])):results.push(void 0);return results},window.HandMorph.prototype.processDoubleClick=function(morph=this.topMorphUnderPointer()){var pointerAndMorphInfo;if(pointerAndMorphInfo=world.getPointerAndMorphInfo(morph),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&world.automatorRecorderAndPlayer.addMouseDoubleClickCommand(nil,...pointerAndMorphInfo),this.destroyToolTips(),this.floatDraggingSomething())this.drop();else{for(;morph&&!morph.mouseDoubleClick;)morph=morph.parent;morph&&morph.mouseDoubleClick(this.position())}return this.mouseButton=nil},window.HandMorph.prototype.processTripleClick=function(morph=this.topMorphUnderPointer()){var pointerAndMorphInfo;if(pointerAndMorphInfo=world.getPointerAndMorphInfo(morph),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&world.automatorRecorderAndPlayer.addMouseTripleClickCommand(nil,...pointerAndMorphInfo),this.destroyToolTips(),this.floatDraggingSomething())this.drop();else{for(;morph&&!morph.mouseTripleClick;)morph=morph.parent;morph&&morph.mouseTripleClick(this.position())}return this.mouseButton=nil},window.HandMorph.prototype.processWheel=function(deltaX,deltaY,deltaZ,altKey,button,buttons){var morph;for(morph=this.topMorphUnderPointer();morph&&!morph.wheel;)morph=morph.parent;if(null!=morph)return morph.wheel(deltaX,deltaY,deltaZ,altKey,button,buttons)},window.HandMorph.prototype.processDrop=function(event){var file,files,img,j,len,parseImgURL,readAudio,readBinary,readImage,readSVG,readText,ref,results,src,target,targetDrop,txt,url;if(files=event instanceof FileList?event:event.target.files||event.dataTransfer.files,url=event.dataTransfer?event.dataTransfer.getData("URL"):nil,txt=event.dataTransfer?event.dataTransfer.getData("Text/HTML"):nil,targetDrop=this.topMorphUnderPointer(),img=new Image,readSVG=function(aFile){var frd,pic,target;for(pic=new Image,frd=new FileReader;!target.droppedSVG;)target=target.parent;return pic.onload=function(){return target.droppedSVG(pic,aFile.name)},frd=new FileReader,frd.onloadend=function(e){return pic.src=e.target.result},frd.readAsDataURL(aFile)},readImage=function(aFile){var frd,pic;for(pic=new Image,frd=new FileReader;!targetDrop.droppedImage;)targetDrop=targetDrop.parent;return pic.onload=function(){var canvas;return(canvas=newCanvas(new Point(pic.width,pic.height))).getContext("2d").drawImage(pic,0,0),targetDrop.droppedImage(canvas,aFile.name)},frd=new FileReader,frd.onloadend=function(e){return pic.src=e.target.result},frd.readAsDataURL(aFile)},readAudio=function(aFile){var frd,snd;for(snd=new Audio,frd=new FileReader;!targetDrop.droppedAudio;)targetDrop=targetDrop.parent;return frd.onloadend=function(e){return snd.src=e.target.result,targetDrop.droppedAudio(snd,aFile.name)},frd.readAsDataURL(aFile)},readText=function(aFile){var frd;for(frd=new FileReader;!targetDrop.droppedText;)targetDrop=targetDrop.parent;return frd.onloadend=function(e){return targetDrop.droppedText(e.target.result,aFile.name)},frd.readAsText(aFile)},readBinary=function(aFile){var frd;for(frd=new FileReader;!targetDrop.droppedBinary;)targetDrop=targetDrop.parent;return frd.onloadend=function(e){return targetDrop.droppedBinary(e.target.result,aFile.name)},frd.readAsArrayBuffer(aFile)},parseImgURL=function(html){var c,i,j,ref,ref1,start;if(url="",-1===(start=html.indexOf('<img src="')))return nil;for(i=j=ref=start+=10,ref1=html.length;ref<=ref1?j<ref1:j>ref1;i=ref<=ref1?++j:--j){if('"'===(c=html[i]))return url;url=url.concat(c)}return nil},files.length){for(results=[],j=0,len=files.length;j<len;j++)(file=files[j]).type.contains("svg")&&!WorldMorph.preferencesAndSettings.rasterizeSVGs?results.push(readSVG(file)):0===file.type.indexOf("image")?results.push(readImage(file)):0===file.type.indexOf("audio")?results.push(readAudio(file)):0===file.type.indexOf("text")?results.push(readText(file)):results.push(readBinary(file));return results}if(url){if("gif"===(ref=url.slice(url.lastIndexOf(".")+1).toLowerCase())||"png"===ref||"jpg"===ref||"jpeg"===ref||"bmp"===ref){for(;!target.droppedImage;)target=target.parent;return img=new Image,img.onload=function(){var canvas;return(canvas=newCanvas(new Point(img.width,img.height))).getContext("2d").drawImage(img,0,0),target.droppedImage(canvas)},img.src=url}}else if(txt){for(;!targetDrop.droppedImage;)targetDrop=targetDrop.parent;if(img=new Image,img.onload=function(){var canvas;return(canvas=newCanvas(new Point(img.width,img.height))).getContext("2d").drawImage(img,0,0),targetDrop.droppedImage(canvas)},src=parseImgURL(txt))return img.src=src}},window.HandMorph.prototype.destroyToolTips=function(){return arrayShallowCopy(this.toolTipsList).forEach(morph=>{if(!morph.boundsContainPoint(this.position()))return morph.fullDestroy(),this.toolTipsList.remove(morph)})},window.HandMorph.prototype.fullRawMoveBy=function(delta){if(!delta.isZero())return trackChanges.push(!1),this.breakNumberOfRawMovesAndResizesCaches(),HandMorph.__super__.fullRawMoveBy.call(this,delta),trackChanges.pop(),this.fullChanged()},window.HandMorph.prototype.processMouseMove=function(worldX,worldY,button,buttons,ctrlKey,shiftKey,altKey,metaKey){var mouseOverNew,mousePointerIndicator,pos,posInDocument,topMorph;return pos=new Point(worldX,worldY),this.fullRawMoveTo(pos),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state===AutomatorRecorderAndPlayer.PLAYING&&((mousePointerIndicator=document.getElementById("mousePointerIndicator")).style.display="block",posInDocument=getDocumentPositionOf(this.world.worldCanvas),mousePointerIndicator.style.left=posInDocument.x+worldX-mousePointerIndicator.clientWidth/2+"px",mousePointerIndicator.style.top=posInDocument.y+worldY-mousePointerIndicator.clientHeight/2+"px"),topMorph=this.topMorphUnderPointer(),mouseOverNew=topMorph.allParentsTopToBottom(),this.determineGrabs(pos,topMorph,mouseOverNew),this.dispatchEventsFollowingMouseMove(mouseOverNew)},window.HandMorph.prototype.checkDraggingTreshold=function(){var currentlyPlayingTestName,displacementDueToGrabDragThreshold,skipGrabDragThreshold;if(displacementDueToGrabDragThreshold=nil,skipGrabDragThreshold=!1,"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state===AutomatorRecorderAndPlayer.PLAYING&&(currentlyPlayingTestName=world.automatorRecorderAndPlayer.currentlyPlayingTestName,null==window[`${currentlyPlayingTestName}`].grabDragThreshold&&(skipGrabDragThreshold=!0)),!skipGrabDragThreshold){if((this.morphToGrab.parent!==world||null==this.morphToGrab.isEditable||this.morphToGrab.isEditable)&&this.mouseDownPosition.distanceTo(this.position())<WorldMorph.preferencesAndSettings.grabDragThreshold)return[!0,nil];displacementDueToGrabDragThreshold=this.position().subtract(this.mouseDownPosition)}return[!1,displacementDueToGrabDragThreshold]},window.HandMorph.prototype.determineGrabs=function(pos,topMorph,mouseOverNew){var base,deltaDragFromPreviousCall,displacementDueToGrabDragThreshold,fb,morph,originalMorphToGrab,skipDragging;if(!this.draggingSomething()&&"left"===this.mouseButton&&(morph=topMorph.findRootForGrab(),topMorph.mouseMove&&topMorph.mouseMove(pos),this.morphToGrab)){if(this.morphToGrab.isTemplate){if([skipDragging,displacementDueToGrabDragThreshold]=this.checkDraggingTreshold(),skipDragging)return;(morph=this.morphToGrab.fullCopy()).isTemplate=!1,this.grab(morph,displacementDueToGrabDragThreshold),this.grabOrigin=this.morphToGrab.situation()}else if(this.morphToGrab.detachesWhenDragged()){if([skipDragging,displacementDueToGrabDragThreshold]=this.checkDraggingTreshold(),skipDragging)return;originalMorphToGrab=this.morphToGrab,this.morphToGrab=this.morphToGrab.grabbedWidgetSwitcheroo(),morph=this.morphToGrab,this.grab(morph,displacementDueToGrabDragThreshold,originalMorphToGrab!==morph)}else this.nonFloatDraggedMorph=this.morphToGrab,this.nonFloatDragPositionWithinMorphAtStart=pos.subtract(this.nonFloatDraggedMorph.position());morph&&((fb=morph.fullBounds()).containsPoint(pos)||(this.rawSetExtent(this.extent().subtract(fb.extent().floorDivideBy(2))),this.grab(morph),this.fullRawMoveTo(pos)))}if(this.nonFloatDraggingSomething()&&this.mouseButton)return deltaDragFromPreviousCall=null!=this.previousNonFloatDraggingPos?pos.subtract(this.previousNonFloatDraggingPos):nil,this.previousNonFloatDraggingPos=pos.copy(),"function"==typeof(base=this.nonFloatDraggedMorph).nonFloatDragging?base.nonFloatDragging(this.nonFloatDragPositionWithinMorphAtStart,pos,deltaDragFromPreviousCall):void 0},window.HandMorph.prototype.nonFloatDragMorphFarAwayToHere=function(morphFarAway,pos){var mouseOverNew;return mouseOverNew=morphFarAway.allParentsTopToBottom(),this.previousNonFloatDraggingPos=morphFarAway.center(),this.nonFloatDragPositionWithinMorphAtStart=new Point(morphFarAway.width()/2,morphFarAway.height()/2).round(),this.nonFloatDraggedMorph=morphFarAway,this.determineGrabs(pos,morphFarAway,mouseOverNew)},window.HandMorph.prototype.reCheckMouseEntersAndMouseLeavesAfterPotentialGeometryChanges=function(){var mouseOverNew,topMorph;return topMorph=this.topMorphUnderPointer(),mouseOverNew=topMorph.allParentsTopToBottom(),this.dispatchEventsFollowingMouseMove(mouseOverNew)},window.HandMorph.prototype.dispatchEventsFollowingMouseMove=function(mouseOverNew){return this.mouseOverList.forEach(old=>{if(indexOf.call(mouseOverNew,old)<0&&("function"==typeof old.mouseLeave&&old.mouseLeave(),this.mouseButton))return"function"==typeof old.mouseLeavefloatDragging?old.mouseLeavefloatDragging():void 0}),mouseOverNew.forEach(newMorph=>{var widgetBeingFloatDragged;if(null!=this.mouseDownPosition&&this.mouseDownPosition.eq(this.position())||"function"==typeof newMorph.mouseMove&&newMorph.mouseMove(this.position(),this.mouseButton),indexOf.call(this.mouseOverList,newMorph)<0&&("function"==typeof newMorph.mouseEnter&&newMorph.mouseEnter(),this.mouseButton&&"function"==typeof newMorph.mouseEnterfloatDragging&&newMorph.mouseEnterfloatDragging()),this.floatDraggingSomething()&&(null==(widgetBeingFloatDragged=this.children[0]).rejectsBeingDropped||!widgetBeingFloatDragged.rejectsBeingDropped())&&newMorph instanceof ScrollPanelWdgt&&!newMorph.boundingBox().insetBy(3*WorldMorph.preferencesAndSettings.scrollBarsThickness).containsPoint(this.position()))return newMorph.startAutoScrolling()}),this.mouseOverList=mouseOverNew},window.HandleMorph=function(target=nil,type="resizeBothDimensionsHandle"){var ref,size;this.target=target,this.type=type,null!=(null!=(ref=this.target)?ref.padding:void 0)?this.inset=new Point(Math.max(this.target.padding,2),Math.max(this.target.padding,2)):this.inset=new Point(2,2),HandleMorph.__super__.constructor.call(this),this.color=new Color(255,255,255),this.noticesTransparentClick=!0,size=WorldMorph.preferencesAndSettings.handleSize,this.silentRawSetExtent(new Point(size,size)),this.target&&this.target.add(this),this.updateResizerHandlePosition(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.HandleMorph,"name",{value:"HandleMorph"}),window.HandleMorph.instances=[],window.HandleMorph.__super__=window.Widget.prototype,window.HandleMorph=extend(window.HandleMorph,window.Widget),window.HandleMorph.prototype.target=nil,window.HandleMorph.prototype.inset=nil,window.HandleMorph.prototype.type=nil,window.HandleMorph.prototype.state=0,window.HandleMorph.prototype.STATE_NORMAL=0,window.HandleMorph.prototype.STATE_HIGHLIGHTED=1,window.HandleMorph.prototype.detachesWhenDragged=function(){return this.parent instanceof WorldMorph},window.HandleMorph.prototype.grabsToParentWhenDragged=function(){return!1},window.HandleMorph.prototype.updateVisibilityAndPosition=function(){if(this.updateVisibility(),this.parent.layoutSpec===LayoutSpec.ATTACHEDAS_FREEFLOATING)return this.updateResizerHandlePosition(),this.moveInFrontOfSiblings()},window.HandleMorph.prototype.updateVisibility=function(){return this.parent.layoutSpec===LayoutSpec.ATTACHEDAS_FREEFLOATING?this.show():this.hide()},window.HandleMorph.prototype.parentHasReLayouted=function(){if(this.updateVisibilityAndPosition(),this.parent.layoutSpec===LayoutSpec.ATTACHEDAS_FREEFLOATING)return HandleMorph.__super__.parentHasReLayouted.apply(this,arguments)},window.HandleMorph.prototype.updateResizerHandlePosition=function(){if(this.target){switch(this.type){case"moveHandle":if(this.target.width()<2*this.width())return void this.hide();this.show();break;case"resizeHorizontalHandle":if(this.target.height()<3*this.height())return void this.hide();this.show();break;case"resizeVerticalHandle":if(this.target.width()<3*this.width())return void this.hide();this.show()}return this.silentUpdateResizerHandlePosition(),this.changed()}},window.HandleMorph.prototype.silentUpdateResizerHandlePosition=function(){var offsetFromMiddlePoint;if(this.target)switch(this.type){case"resizeBothDimensionsHandle":return this.silentFullRawMoveTo(this.target.bottomRight().subtract(this.extent().add(this.inset)));case"moveHandle":return this.silentFullRawMoveTo(this.target.topLeft().add(this.inset));case"resizeHorizontalHandle":return offsetFromMiddlePoint=new Point(this.extent().x+this.inset.x,Math.floor(this.extent().y/2)),this.silentFullRawMoveTo(this.target.rightCenter().subtract(offsetFromMiddlePoint));case"resizeVerticalHandle":return offsetFromMiddlePoint=new Point(Math.floor(this.extent().x/2),this.extent().y+this.inset.y),this.silentFullRawMoveTo(this.target.bottomCenter().subtract(offsetFromMiddlePoint))}},window.HandleMorph.prototype.paintIntoAreaOrBlitFromBackBuffer=function(aContext,clippingRectangle,appliedShadow){var al,area,at,h,morphPosition,sl,st,w;if(!this.preliminaryCheckNothingToDraw(clippingRectangle,aContext))return[area,sl,st,al,at,w,h]=this.calculateKeyValues(aContext,clippingRectangle),area.isNotEmpty()?w<1||h<1?nil:(aContext.save(),aContext.clipToRectangle(al,at,w,h),aContext.globalAlpha=(null!=appliedShadow?appliedShadow.alpha:1)*this.alpha,aContext.scale(pixelRatio,pixelRatio),morphPosition=this.position(),aContext.translate(morphPosition.x,morphPosition.y),this.state===this.STATE_NORMAL&&this.handleMorphRenderingHelper(aContext,this.color,new Color(150,150,150)),this.state===this.STATE_HIGHLIGHTED&&this.handleMorphRenderingHelper(aContext,new Color(255,255,255),new Color(200,200,255)),aContext.restore(),this.paintHighlight(aContext,al,at,w,h)):void 0},window.HandleMorph.prototype.drawArrow=function(context,leftArrowPoint,rightArrowPoint,arrowPieceLeftUp,arrowPieceLeftDown,arrowPieceRightUp,arrowPieceRightDown){return context.beginPath(),context.moveTo(.5+leftArrowPoint.x,.5+leftArrowPoint.y),context.lineTo(.5+leftArrowPoint.x+arrowPieceLeftUp.x,.5+leftArrowPoint.y+arrowPieceLeftUp.y),context.moveTo(.5+leftArrowPoint.x,.5+leftArrowPoint.y),context.lineTo(.5+leftArrowPoint.x+arrowPieceLeftDown.x,.5+leftArrowPoint.y+arrowPieceLeftDown.y),context.moveTo(.5+leftArrowPoint.x,.5+leftArrowPoint.y),context.lineTo(.5+rightArrowPoint.x,.5+rightArrowPoint.y),context.lineTo(.5+rightArrowPoint.x+arrowPieceRightUp.x,.5+rightArrowPoint.y+arrowPieceRightUp.y),context.moveTo(.5+rightArrowPoint.x,.5+rightArrowPoint.y),context.lineTo(.5+rightArrowPoint.x+arrowPieceRightDown.x,.5+rightArrowPoint.y+arrowPieceRightDown.y),context.closePath(),context.stroke()},window.HandleMorph.prototype.drawHandle=function(context){var arrowPieceLeftDown,arrowPieceLeftUp,arrowPieceRightDown,arrowPieceRightUp,bottomLeft,bottomLeftSweep,i,j,leftArrowPoint,p0,ref,results,rightArrowPoint,topRight,topRightSweep;if("resizeHorizontalHandle"!==this.type&&"moveHandle"!==this.type||(leftArrowPoint=(p0=(p0=this.bottomLeft().subtract(this.position())).subtract(new Point(0,Math.ceil(this.height()/2)))).add(new Point(Math.ceil(this.width()/15),0)),rightArrowPoint=p0.add(new Point(this.width()-Math.ceil(this.width()/14),0)),arrowPieceLeftUp=new Point(Math.ceil(this.width()/5),-Math.ceil(this.height()/5)),arrowPieceLeftDown=new Point(Math.ceil(this.width()/5),Math.ceil(this.height()/5)),arrowPieceRightUp=new Point(-Math.ceil(this.width()/5),-Math.ceil(this.height()/5)),arrowPieceRightDown=new Point(-Math.ceil(this.width()/5),Math.ceil(this.height()/5)),this.drawArrow(context,leftArrowPoint,rightArrowPoint,arrowPieceLeftUp,arrowPieceLeftDown,arrowPieceRightUp,arrowPieceRightDown)),"resizeVerticalHandle"!==this.type&&"moveHandle"!==this.type||(leftArrowPoint=(p0=this.bottomCenter().subtract(this.position())).add(new Point(0,-Math.ceil(this.height()/14))),rightArrowPoint=p0.add(new Point(0,-this.height()+Math.ceil(this.height()/15))),arrowPieceLeftUp=new Point(-Math.ceil(this.width()/5),-Math.ceil(this.height()/5)),arrowPieceLeftDown=new Point(Math.ceil(this.width()/5),-Math.ceil(this.height()/5)),arrowPieceRightUp=new Point(-Math.ceil(this.width()/5),Math.ceil(this.height()/5)),arrowPieceRightDown=new Point(Math.ceil(this.width()/5),Math.ceil(this.height()/5)),this.drawArrow(context,leftArrowPoint,rightArrowPoint,arrowPieceLeftUp,arrowPieceLeftDown,arrowPieceRightUp,arrowPieceRightDown)),"resizeBothDimensionsHandle"===this.type){for(bottomLeft=this.bottomLeft().subtract(this.position()),topRight=this.topRight().subtract(this.position()),bottomLeftSweep=bottomLeft.copy(),topRightSweep=topRight.copy(),results=[],i=j=0,ref=this.height();j<=ref;i=j+=6)bottomLeftSweep.x=bottomLeft.x+i,topRightSweep.y=topRight.y+i,context.beginPath(),context.moveTo(bottomLeftSweep.x,bottomLeftSweep.y),context.lineTo(topRightSweep.x,topRightSweep.y),context.closePath(),results.push(context.stroke());return results}},window.HandleMorph.prototype.handleMorphRenderingHelper=function(context,color,shadowColor){return context.lineWidth=.5,context.lineCap="round",context.save(),context.strokeStyle=shadowColor.toString(),context.translate(1,1),this.drawHandle(context),context.translate(1,0),this.drawHandle(context),context.restore(),context.strokeStyle=color.toString(),this.drawHandle(context)},window.HandleMorph.prototype.mouseClickLeft=function(){},window.HandleMorph.prototype.mouseUpLeft=function(){},window.HandleMorph.prototype.mouseDownLeft=function(pos){return this.target?this.target.bringToForeground():nil},window.HandleMorph.prototype.nonFloatDragging=function(nonFloatDragPositionWithinMorphAtStart,pos,deltaDragFromPreviousCall){var newExt,newHeight,newPos,newWidth;switch(newPos=pos.subtract(nonFloatDragPositionWithinMorphAtStart),this.type){case"resizeBothDimensionsHandle":return newExt=newPos.add(this.extent().add(this.inset)).subtract(this.target.position()),this.target.setExtent(newExt,this);case"moveHandle":return this.target.fullMoveTo(newPos.subtract(this.inset),this);case"resizeHorizontalHandle":return newWidth=newPos.x+this.extent().x+this.inset.x-this.target.left(),this.target.setWidth(newWidth);case"resizeVerticalHandle":return newHeight=newPos.y+this.extent().y+this.inset.y-this.target.top(),this.target.setHeight(newHeight)}},window.HandleMorph.prototype.mouseEnter=function(){return this.state=this.STATE_HIGHLIGHTED,this.changed()},window.HandleMorph.prototype.mouseLeave=function(){return this.state=this.STATE_NORMAL,this.changed()},window.HandleMorph.prototype.makeHandleSolidWithParentMorph=function(ignored,ignored2,morphAttachedTo){return this.target=morphAttachedTo,this.target.add(this),this.updateResizerHandlePosition(),this.noticesTransparentClick=!0},window.HandleMorph.prototype.attach=function(){var choices,menu;if(choices=world.plausibleTargetAndDestinationMorphs(this),menu=new MenuMorph(this,!1,this,!0,!0,"choose target:"),choices.length>0?choices.forEach(each=>menu.addMenuItem(each.toString().replace("Wdgt","").slice(0,50)+" ➜",!0,this,"makeHandleSolidWithParentMorph",nil,nil,nil,nil,nil,each,nil,!0)):menu=new MenuMorph(this,!1,this,!0,!0,"no morphs to attach to"),choices.length)return menu.popUpAtHand()},window.HashCalculator=function(){window.HashCalculator.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.HashCalculator,"name",{value:"HashCalculator"}),window.HashCalculator.instances=[],window.HashCalculator.__super__=Object.prototype,window.HashCalculator.calculateHash=function(theString){var hash,i,j,ref;if(hash=0,0===theString.length)return hash;for(i=j=0,ref=theString.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j)hash=(hash<<5)-hash+theString.charCodeAt(i),hash|=0,i++;return hash},window.RectangleMorph=function(extent,color){RectangleMorph.__super__.constructor.call(this),this.appearance=new RectangularAppearance(this),null!=extent&&this.silentRawSetExtent(extent),null!=color&&(this.color=color),this.toolTipMessage="rectangle","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.RectangleMorph,"name",{value:"RectangleMorph"}),window.RectangleMorph.instances=[],window.RectangleMorph.__super__=window.Widget.prototype,window.RectangleMorph=extend(window.RectangleMorph,window.Widget),window.RectangleMorph.prototype.colloquialName=function(){return"rectangle"},window.HighlighterMorph=function(){window.HighlighterMorph.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.HighlighterMorph,"name",{value:"HighlighterMorph"}),window.HighlighterMorph.instances=[],window.HighlighterMorph.__super__=window.RectangleMorph.prototype,window.HighlighterMorph=extend(window.HighlighterMorph,window.RectangleMorph),window.HorizontalMenuPanelWdgt=function(){HorizontalMenuPanelWdgt.__super__.constructor.apply(this,arguments),this.rawSetExtent(new Point(300,15)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.HorizontalMenuPanelWdgt,"name",{value:"HorizontalMenuPanelWdgt"}),window.HorizontalMenuPanelWdgt.instances=[],window.HorizontalMenuPanelWdgt.__super__=window.PanelWdgt.prototype,window.HorizontalMenuPanelWdgt=extend(window.HorizontalMenuPanelWdgt,window.PanelWdgt),window.HorizontalMenuPanelWdgt.prototype.numberOfIconsOnPanel=0,window.HorizontalMenuPanelWdgt.prototype.internalPadding=5,window.HorizontalMenuPanelWdgt.prototype.thumbnailSize=30,window.HorizontalMenuPanelWdgt.prototype.add=function(aMorph,position=nil,layoutSpec=LayoutSpec.ATTACHEDAS_FREEFLOATING,beingDropped,unused,positionOnScreen){var childrenNotHandlesNorCarets,eachChild,foundDrop,glassBoxBottom,glassBoxTop,i,len,positionNumberAmongSiblings;if(aMorph instanceof ModifiedTextTriangleAnnotationWdgt||aMorph instanceof HandleMorph)return HorizontalMenuPanelWdgt.__super__.add.apply(this,arguments);if(aMorph.isTemplate=!0,null==aMorph.extentToGetWhenDraggedFromGlassBox&&(aMorph.extentToGetWhenDraggedFromGlassBox=aMorph.extent()),aMorph instanceof GlassBoxBottomWdgt||((glassBoxBottom=new GlassBoxBottomWdgt).add(aMorph),aMorph.actionableAsThumbnail||(glassBoxTop=new GlassBoxTopWdgt,glassBoxBottom.add(glassBoxTop),glassBoxTop.toolTipMessage=aMorph.toolTipMessage),glassBoxBottom.fullRawMoveTo(this.topLeft().add(new Point(this.internalPadding,this.internalPadding))),aMorph instanceof MenuItemMorph?(aMorph.shrinkToTextSize(),glassBoxBottom.rawSetExtent(new Point(aMorph.width(),this.thumbnailSize))):glassBoxBottom.rawSetExtent(new Point(this.thumbnailSize,this.thumbnailSize)),glassBoxBottom.reLayout(),aMorph=glassBoxBottom),childrenNotHandlesNorCarets=this.children.filter(function(m){return!(m instanceof HandleMorph||m instanceof CaretMorph)}),foundDrop=!1,null!=positionOnScreen&&childrenNotHandlesNorCarets.length>0)for(positionNumberAmongSiblings=0,i=0,len=childrenNotHandlesNorCarets.length;i<len;i++){if((eachChild=childrenNotHandlesNorCarets[i]).bounds.growBy(this.internalPadding).containsPoint(positionOnScreen)){foundDrop=!0,eachChild.bounds.growBy(this.internalPadding).rightHalf().containsPoint(positionOnScreen)&&positionNumberAmongSiblings++;break}positionNumberAmongSiblings++}return foundDrop?HorizontalMenuPanelWdgt.__super__.add.call(this,aMorph,positionNumberAmongSiblings,layoutSpec,beingDropped):HorizontalMenuPanelWdgt.__super__.add.call(this,aMorph,this.numberOfIconsOnPanel,layoutSpec,beingDropped),this.numberOfIconsOnPanel++,this.reLayout()},window.HorizontalMenuPanelWdgt.prototype.rawSetExtent=function(aPoint){return HorizontalMenuPanelWdgt.__super__.rawSetExtent.apply(this,arguments),this.reLayout()},window.HorizontalMenuPanelWdgt.prototype.reLayout=function(){var childrenNotHandlesNorCarets,countOfItems,eachChild,i,j,k,l,len,ref,ref1,ref2,startingPoint,widthLayingDown,widthOfContentsSoFar;for(trackChanges.push(!1),childrenNotHandlesNorCarets=this.children.filter(function(m){return!(m instanceof HandleMorph||m instanceof CaretMorph)}),widthOfContentsSoFar=this.internalPadding,countOfItems=0,j=0,len=childrenNotHandlesNorCarets.length;j<len&&(eachChild=childrenNotHandlesNorCarets[j],!(widthOfContentsSoFar+this.internalPadding+eachChild.width()>this.width()));j++)widthOfContentsSoFar+=this.internalPadding+eachChild.width(),countOfItems++;for(widthLayingDown=this.internalPadding,i=k=0,ref=countOfItems;0<=ref?k<ref:k>ref;i=0<=ref?++k:--k)childrenNotHandlesNorCarets[i].unCollapse(),startingPoint=this.position().add(new Point((this.width()-widthOfContentsSoFar)/2,0)),childrenNotHandlesNorCarets[i].fullRawMoveTo(startingPoint.add(new Point(widthLayingDown,(this.height()-childrenNotHandlesNorCarets[i].height())/2)).round()),widthLayingDown+=childrenNotHandlesNorCarets[i].width()+this.internalPadding;for(i=l=ref1=countOfItems,ref2=childrenNotHandlesNorCarets.length;ref1<=ref2?l<ref2:l>ref2;i=ref1<=ref2?++l:--l)childrenNotHandlesNorCarets[i].collapse();return trackChanges.pop(),this.fullChanged()};var KeepsRatioWhenInVerticalStackMixin;KeepsRatioWhenInVerticalStackMixin={onceAddedClassProperties:function(fromClass){return this.addInstanceProperties(fromClass,{rawSetWidthSizeHeightAccordingly:function(newWidth){var ratio;return"function"==typeof this.rawResizeToWithoutSpacing&&this.rawResizeToWithoutSpacing(),ratio=this.height()/this.width(),this.rawSetExtent(new Point(newWidth,Math.round(newWidth*ratio)))},holderWindowJustBeenGrabbed:function(whereFrom){if(whereFrom instanceof SimpleVerticalStackPanelWdgt)return this.freeFromRatioConstraints()},holderWindowMadeIntoExternal:function(){return this.freeFromRatioConstraints()},freeFromRatioConstraints:function(){var availableHeight;if(null!=this.layoutSpecDetails&&(this.layoutSpecDetails.canSetHeightFreely=!0,availableHeight=world.height()-20,this.parent.height()>availableHeight))return this.parent.rawSetExtent(new Point(Math.min(this.width()/this.height()*availableHeight,world.width()),availableHeight).round()),this.parent.fullRawMoveTo(world.hand.position().subtract(this.parent.extent().floorDivideBy(2))),this.parent.fullRawMoveWithin(world)},holderWindowJustDropped:function(whereIn){if(whereIn instanceof SimpleVerticalStackPanelWdgt&&!(whereIn instanceof WindowWdgt))return this.constrainToRatio()},constrainToRatio:function(){if(null!=this.layoutSpecDetails)return this.layoutSpecDetails.canSetHeightFreely=!1,this.rawSetWidthSizeHeightAccordingly(this.width())}})}},window.IconMorph=function(color=WorldMorph.preferencesAndSettings.iconDarkLineColor){this.color=color,IconMorph.__super__.constructor.call(this),this.appearance=new IconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.IconMorph,"name",{value:"IconMorph"}),window.IconMorph.instances=[],window.IconMorph.__super__=window.Widget.prototype,window.IconMorph=extend(window.IconMorph,window.Widget),window.IconMorph.augmentWith(window.KeepsRatioWhenInVerticalStackMixin,"IconMorph"),window.IconMorph.prototype.widthWithoutSpacing=function(){return this.appearance.widthWithoutSpacing()},window.IconMorph.prototype.rawResizeToWithoutSpacing=function(){return this.rawSetExtent(this.appearance.calculateRectangleOfIcon().extent())},window.IconMorph.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return IconMorph.__super__.initialiseDefaultWindowContentLayoutSpec.apply(this,arguments),this.layoutSpecDetails.canSetHeightFreely=!1},window.IconicDesktopSystemShortcutWdgt=function(target,title,icon){this.target=target,this.title=title,this.icon=icon,null==this.title&&(this.title=this.target.colloquialName()),IconicDesktopSystemShortcutWdgt.__super__.constructor.call(this,this.title,this.icon),world.widgetsReferencingOtherWidgets.push(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.IconicDesktopSystemShortcutWdgt,"name",{value:"IconicDesktopSystemShortcutWdgt"}),window.IconicDesktopSystemShortcutWdgt.instances=[],window.IconicDesktopSystemShortcutWdgt.__super__=window.IconicDesktopSystemLinkWdgt.prototype,window.IconicDesktopSystemShortcutWdgt=extend(window.IconicDesktopSystemShortcutWdgt,window.IconicDesktopSystemLinkWdgt),window.IconicDesktopSystemShortcutWdgt.augmentWith(window.HighlightableMixin,"IconicDesktopSystemShortcutWdgt"),window.IconicDesktopSystemShortcutWdgt.prototype.color_hover=new Color(90,90,90),window.IconicDesktopSystemShortcutWdgt.prototype.color_pressed=new Color(128,128,128),window.IconicDesktopSystemShortcutWdgt.prototype.color_normal=new Color(0,0,0),window.IconicDesktopSystemShortcutWdgt.prototype.reactToDropOf=function(droppedWidget){},window.IconicDesktopSystemShortcutWdgt.prototype.destroy=function(){return IconicDesktopSystemShortcutWdgt.__super__.destroy.apply(this,arguments),world.widgetsReferencingOtherWidgets.remove(this)},window.IconicDesktopSystemShortcutWdgt.prototype.alignCopiedMorphToReferenceTracker=function(cloneOfMe){if(-1!==world.widgetsReferencingOtherWidgets.indexOf(this))return world.widgetsReferencingOtherWidgets.push(cloneOfMe)},window.IconicDesktopSystemDocumentShortcutWdgt=function(target,title,icon){this.target=target,this.title=title,this.icon=icon,null==this.icon&&(this.icon=new GenericShortcutIconWdgt(new GenericObjectIconWdgt(this.target.representativeIcon()))),IconicDesktopSystemDocumentShortcutWdgt.__super__.constructor.call(this,this.target,this.title,this.icon),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.IconicDesktopSystemDocumentShortcutWdgt,"name",{value:"IconicDesktopSystemDocumentShortcutWdgt"}),window.IconicDesktopSystemDocumentShortcutWdgt.instances=[],window.IconicDesktopSystemDocumentShortcutWdgt.__super__=window.IconicDesktopSystemShortcutWdgt.prototype,window.IconicDesktopSystemDocumentShortcutWdgt=extend(window.IconicDesktopSystemDocumentShortcutWdgt,window.IconicDesktopSystemShortcutWdgt),window.IconicDesktopSystemDocumentShortcutWdgt.prototype.reactToDropOf=function(droppedWidget){},window.IconicDesktopSystemDocumentShortcutWdgt.prototype.mouseDoubleClick=function(){var whatToBringUp;if(this.target.destroyed)this.inform("The referenced item\nis dead!");else{if(!this.target.isAncestorOf(this))return this.target.show(),this.positionAmongSiblings(),null==(whatToBringUp=this.target.findRootForGrab())&&this.target.isDirectlyInBasement()&&(whatToBringUp=this.target),null==whatToBringUp?this.inform("The referenced item does exist\nhowever it's part of something\nthat can't be grabbed!"):(whatToBringUp.show(),whatToBringUp.spawnNextTo(this,world),whatToBringUp.rememberFractionalSituationInHoldingPanel(),"function"==typeof whatToBringUp.setTitle?whatToBringUp.setTitle(this.label.text):void 0);this.inform("The referenced item is\nalready open and containing\nwhat you just clicked on!")}},window.IconicDesktopSystemFolderShortcutWdgt=function(target,title){this.target=target,this.title=title,IconicDesktopSystemFolderShortcutWdgt.__super__.constructor.call(this,this.target,this.title,new GenericShortcutIconWdgt(new FolderIconWdgt)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.IconicDesktopSystemFolderShortcutWdgt,"name",{value:"IconicDesktopSystemFolderShortcutWdgt"}),window.IconicDesktopSystemFolderShortcutWdgt.instances=[],window.IconicDesktopSystemFolderShortcutWdgt.__super__=window.IconicDesktopSystemShortcutWdgt.prototype,window.IconicDesktopSystemFolderShortcutWdgt=extend(window.IconicDesktopSystemFolderShortcutWdgt,window.IconicDesktopSystemShortcutWdgt),window.IconicDesktopSystemFolderShortcutWdgt.prototype._acceptsDrops=!0,window.IconicDesktopSystemFolderShortcutWdgt.prototype.reactToDropOf=function(droppedWidget){return droppedWidget instanceof IconicDesktopSystemLinkWdgt?this.target.contents.contents.add(droppedWidget):droppedWidget.createReferenceAndClose(nil,this.target.contents.contents)},window.IconicDesktopSystemFolderShortcutWdgt.prototype.mouseDoubleClick=function(){var whatToBringUp;if(this.target.destroyed)this.inform("The referenced item\nis dead!");else{if(!this.target.isAncestorOf(this))return this.target.show(),this.positionAmongSiblings(),null==(whatToBringUp=this.target.findRootForGrab())&&this.target.isDirectlyInBasement()&&(whatToBringUp=this.target),null==whatToBringUp?this.inform("The referenced item does exist\nhowever it's part of something\nthat can't be grabbed!"):(whatToBringUp.show(),whatToBringUp.spawnNextTo(this,world),whatToBringUp.rememberFractionalSituationInHoldingPanel(),"function"==typeof whatToBringUp.setTitle?whatToBringUp.setTitle(this.label.text):void 0);this.inform("The referenced item is\nalready open and containing\nwhat you just clicked on!")}},window.IconicDesktopSystemScriptShortcutWdgt=function(target,title,icon){this.target=target,this.title=title,this.icon=icon,null==this.icon&&(this.icon=new GenericShortcutIconWdgt(new ScriptIconWdgt)),IconicDesktopSystemScriptShortcutWdgt.__super__.constructor.call(this,this.target,this.title,this.icon),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.IconicDesktopSystemScriptShortcutWdgt,"name",{value:"IconicDesktopSystemScriptShortcutWdgt"}),window.IconicDesktopSystemScriptShortcutWdgt.instances=[],window.IconicDesktopSystemScriptShortcutWdgt.__super__=window.IconicDesktopSystemShortcutWdgt.prototype,window.IconicDesktopSystemScriptShortcutWdgt=extend(window.IconicDesktopSystemScriptShortcutWdgt,window.IconicDesktopSystemShortcutWdgt),window.IconicDesktopSystemScriptShortcutWdgt.prototype.mouseDoubleClick=function(){if(!this.target.destroyed)return this.target.contents.doAll();this.inform("The referenced item\nis dead!")},window.IconicDesktopSystemScriptShortcutWdgt.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){return menu.addLine(),menu.addMenuItem("edit script...",!0,this,"editScript"),menu},window.IconicDesktopSystemScriptShortcutWdgt.prototype.editScript=function(){var whatToBringUp;if(this.target.destroyed)this.inform("The referenced item\nis dead!");else{if(!this.target.isAncestorOf(this))return this.target.show(),this.positionAmongSiblings(),null==(whatToBringUp=this.target.findRootForGrab())&&this.target.isDirectlyInBasement()&&(whatToBringUp=this.target),null==whatToBringUp?this.inform("The referenced item does exist\nhowever it's part of something\nthat can't be grabbed!"):(whatToBringUp.show(),whatToBringUp.spawnNextTo(this,world),whatToBringUp.rememberFractionalSituationInHoldingPanel(),"function"==typeof whatToBringUp.setTitle?whatToBringUp.setTitle(this.label.text):void 0);this.inform("The referenced item is\nalready open and containing\nwhat you just clicked on!")}},window.ListMorph=function(target,action,elements=[],labelGetter=function(element){return"function"==typeof this.registerThisInstance&&this.registerThisInstance(),isString(element)?element:("function"==typeof this.registerThisInstance&&this.registerThisInstance(),element.toSource?element.toSource():element.toString())},format=[],doubleClickAction=nil){this.target=target,this.action=action,this.elements=elements,this.labelGetter=labelGetter,this.format=format,this.doubleClickAction=doubleClickAction,ListMorph.__super__.constructor.call(this),this.contents.disableDrops(),this.color=new Color(255,255,255),this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ListMorph,"name",{value:"ListMorph"}),window.ListMorph.instances=[],window.ListMorph.__super__=window.ScrollPanelWdgt.prototype,window.ListMorph=extend(window.ListMorph,window.ScrollPanelWdgt),window.ListMorph.prototype.elements=nil,window.ListMorph.prototype.labelGetter=nil,window.ListMorph.prototype.format=nil,window.ListMorph.prototype.listContents=nil,window.ListMorph.prototype.selected=nil,window.ListMorph.prototype.active=nil,window.ListMorph.prototype.action=nil,window.ListMorph.prototype.target=nil,window.ListMorph.prototype.doubleClickAction=nil,window.ListMorph.prototype.buildAndConnectChildren=function(){return this.listContents=new MenuMorph(this,!0,this,!1,!1,nil,nil),this.listContents.isLockingToPanels=!0,this.elements.length||(this.elements=["(empty)"]),trackChanges.push(!1),this.elements.forEach(element=>{var bold,color,italic;return color=nil,bold=!1,italic=!1,this.format.forEach(function(pair){if(pair[1].call(nil,element))switch(pair[0]){case"bold":return bold=!0;case"italic":return italic=!0;default:return color=pair[0]}}),this.listContents.addMenuItem(this.labelGetter(element),!0,this,"select",nil,color,bold,italic,this.doubleClickAction)}),trackChanges.pop(),this.listContents.silentFullRawMoveTo(this.contents.position()),this.listContents.reLayout(),this.add(this.listContents)},window.ListMorph.prototype.select=function(item,trigger){this.selected=item,this.active=trigger,null!=this.action&&""!==this.action&&this.target[this.action].call(this.target,item.labelString)},window.ListMorph.prototype.rawSetExtent=function(aPoint){var lb,nb;if(!aPoint.eq(this.extent()))return this.breakNumberOfRawMovesAndResizesCaches(),lb=this.listContents.boundingBox(),(nb=this.bounds.origin.corner(this.bounds.origin.add(aPoint))).right()>lb.right()&&nb.width()<=lb.width()&&this.listContents.fullRawMoveRightSideTo(nb.right()),nb.bottom()>lb.bottom()&&nb.height()<=lb.height()&&this.listContents.fullRawMoveBottomSideTo(nb.bottom()),ListMorph.__super__.rawSetExtent.call(this,aPoint)},window.ModifiedTextTriangleAnnotationWdgt=function(parent=nil,proportionOfParent=0,fixedSize=10){var size;this.proportionOfParent=proportionOfParent,this.fixedSize=fixedSize,ModifiedTextTriangleAnnotationWdgt.__super__.constructor.call(this),this.appearance=new UpperRightTriangleAppearance(this,this.positionWithinParent),this.noticesTransparentClick=!1,size=WorldMorph.preferencesAndSettings.handleSize,this.silentRawSetExtent(new Point(size,size)),parent&&parent.add(this),this.updateResizerPosition(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ModifiedTextTriangleAnnotationWdgt,"name",{value:"ModifiedTextTriangleAnnotationWdgt"}),window.ModifiedTextTriangleAnnotationWdgt.instances=[],window.ModifiedTextTriangleAnnotationWdgt.__super__=window.Widget.prototype,window.ModifiedTextTriangleAnnotationWdgt=extend(window.ModifiedTextTriangleAnnotationWdgt,window.Widget),window.ModifiedTextTriangleAnnotationWdgt.augmentWith(window.UpperRightInternalHaloMixin,"ModifiedTextTriangleAnnotationWdgt"),window.ModifiedTextTriangleAnnotationWdgt.prototype.positionWithinParent="topLeft",window.PopUpWdgt=function(morphOpeningThePopUp,killThisPopUpIfClickOutsideDescendants=!0,killThisPopUpIfClickOnDescendantsTriggers=!0){this.morphOpeningThePopUp=morphOpeningThePopUp,this.killThisPopUpIfClickOutsideDescendants=killThisPopUpIfClickOutsideDescendants,this.killThisPopUpIfClickOnDescendantsTriggers=killThisPopUpIfClickOnDescendantsTriggers,PopUpWdgt.__super__.constructor.call(this),this.isLockingToPanels=!1,world.freshlyCreatedPopUps.push(this),world.openPopUps.push(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PopUpWdgt,"name",{value:"PopUpWdgt"}),window.PopUpWdgt.instances=[],window.PopUpWdgt.__super__=window.Widget.prototype,window.PopUpWdgt=extend(window.PopUpWdgt,window.Widget),window.PopUpWdgt.prototype.killThisPopUpIfClickOnDescendantsTriggers=!0,window.PopUpWdgt.prototype.killThisPopUpIfClickOutsideDescendants=!0,window.PopUpWdgt.prototype.isPopUpMarkedForClosure=!1,window.PopUpWdgt.prototype.morphOpeningThePopUp=nil,window.PopUpWdgt.prototype.hierarchyOfPopUps=function(){var ascendingMorphs,hierarchy;for(hierarchy=[ascendingMorphs=this];null!=(null!=ascendingMorphs?ascendingMorphs.getParentPopUp:void 0);)null!=(ascendingMorphs=ascendingMorphs.getParentPopUp())&&hierarchy.push(ascendingMorphs);return hierarchy},window.PopUpWdgt.prototype.propagateKillPopUps=function(){var ref;if(this.killThisPopUpIfClickOnDescendantsTriggers)return null!=(ref=this.getParentPopUp())&&ref.propagateKillPopUps(),this.markPopUpForClosure()},window.PopUpWdgt.prototype.markPopUpForClosure=function(){return world.popUpsMarkedForClosure.push(this),this.isPopUpMarkedForClosure=!0},window.PopUpWdgt.prototype.isPopUpPinned=function(){return!(this.killThisPopUpIfClickOnDescendantsTriggers||this.killThisPopUpIfClickOutsideDescendants)},window.PopUpWdgt.prototype.getParentPopUp=function(){return this.isPopUpPinned()?this.parent:null!=this.morphOpeningThePopUp?this.morphOpeningThePopUp.firstParentThatIsAPopUp():nil},window.PopUpWdgt.prototype.firstParentThatIsAPopUp=function(){return this.isPopUpMarkedForClosure&&null!=this.parent?this.parent.firstParentThatIsAPopUp():this},window.PopUpWdgt.prototype.pinPopUp=function(pinMenuItem){var ref;return this.killThisPopUpIfClickOnDescendantsTriggers=!1,this.killThisPopUpIfClickOutsideDescendants=!1,this.onClickOutsideMeOrAnyOfMyChildren(nil),null!=pinMenuItem?pinMenuItem.firstParentThatIsAPopUp().propagateKillPopUps():null!=(ref=this.getParentPopUp())&&ref.propagateKillPopUps(),world.closePopUpsMarkedForClosure(),this.updatePopUpShadow()},window.PopUpWdgt.prototype.fullCopy=function(){var copiedMorph;return(copiedMorph=PopUpWdgt.__super__.fullCopy.apply(this,arguments)).onClickOutsideMeOrAnyOfMyChildren(nil),copiedMorph.killThisPopUpIfClickOnDescendantsTriggers=!1,copiedMorph.killThisPopUpIfClickOutsideDescendants=!1,copiedMorph},window.PopUpWdgt.prototype.addMorphSpecificMenuEntries=function(unused_morphOpeningThePopUp,menu){return PopUpWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),menu.addLine(),menu.addMenuItem("pin",!1,this,"pin")},window.PopUpWdgt.prototype.justDropped=function(whereIn){return PopUpWdgt.__super__.justDropped.apply(this,arguments),whereIn!==world&&this.pinPopUp(),this.updatePopUpShadow()},window.PopUpWdgt.prototype.updatePopUpShadow=function(){return this.isPopUpPinned()?this.parent===world?this.addShadow():this.removeShadow():this.addShadow()},window.PopUpWdgt.prototype.addShadow=function(offset=new Point(5,5),alpha=.2,color){if(!this.isPopUpPinned()||this.parent!==world)return PopUpWdgt.__super__.addShadow.call(this,offset,alpha);PopUpWdgt.__super__.addShadow.call(this,new Point(3,3),.3)},window.PopUpWdgt.prototype.popUpCenteredAtHand=function(world){return this.popUp(world.hand.position().subtract(this.extent().floorDivideBy(2)),world)},window.PopUpWdgt.prototype.popUpCenteredInWorld=function(world){return this.popUp(world.center().subtract(this.extent().floorDivideBy(2)),world)},window.PopUpWdgt.prototype.popUpAtHand=function(){return this.popUp(world.hand.position(),world)},window.PopUpWdgt.prototype.popUp=function(pos,morphToAttachTo){return this.silentFullRawMoveTo(pos),morphToAttachTo.add(this),this.fullRawMoveWithin(world),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.addShadow(),this.fullChanged()},window.PopUpWdgt.prototype.destroy=function(){return PopUpWdgt.__super__.destroy.call(this),world.openPopUps.remove(this)},window.PopUpWdgt.prototype.close=function(){return PopUpWdgt.__super__.close.call(this),world.openPopUps.remove(this)},window.ProfilerData=function(){window.ProfilerData.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ProfilerData,"name",{value:"ProfilerData"}),window.ProfilerData.instances=[],window.ProfilerData.__super__=Object.prototype,window.ProfilerData.prototype.nothing=nil,window.MenuMorph=function(morphOpeningThePopUp,isListContents=!1,target,killThisPopUpIfClickOutsideDescendants=!0,killThisPopUpIfClickOnDescendantsTriggers=!0,title=nil,environment=nil,fontSize=nil){this.morphOpeningThePopUp=morphOpeningThePopUp,this.isListContents=isListContents,this.target=target,this.killThisPopUpIfClickOutsideDescendants=killThisPopUpIfClickOutsideDescendants,this.killThisPopUpIfClickOnDescendantsTriggers=killThisPopUpIfClickOnDescendantsTriggers,this.title=title,this.environment=environment,this.fontSize=fontSize,"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.isListContents||this.killThisPopUpIfClickOutsideDescendants&&this.onClickOutsideMeOrAnyOfMyChildren("close"),MenuMorph.__super__.constructor.call(this,this.morphOpeningThePopUp,this.killThisPopUpIfClickOutsideDescendants,this.killThisPopUpIfClickOnDescendantsTriggers),this.isLockingToPanels=!1,this.appearance=new MenuAppearance(this),this.strokeColor=WorldMorph.preferencesAndSettings.menuStrokeColor,this.isListContents&&(world.freshlyCreatedPopUps.remove(this),world.openPopUps.remove(this)),this.isListContents||this.title&&(this.createLabel(),this.silentAdd(this.label)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.MenuMorph,"name",{value:"MenuMorph"}),window.MenuMorph.instances=[],window.MenuMorph.__super__=window.PopUpWdgt.prototype,window.MenuMorph=extend(window.MenuMorph,window.PopUpWdgt),window.MenuMorph.prototype.target=nil,window.MenuMorph.prototype.title=nil,window.MenuMorph.prototype.environment=nil,window.MenuMorph.prototype.fontSize=nil,window.MenuMorph.prototype.label=nil,window.MenuMorph.prototype.isListContents=!1,window.MenuMorph.prototype.colloquialName=function(){return"menu",this.title?'"'+this.title+'" menu':"menu"},window.MenuMorph.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return this.layoutSpecDetails=new WindowContentLayoutSpec(PreferredSize.THIS_ONE_I_HAVE_NOW,PreferredSize.THIS_ONE_I_HAVE_NOW,0),this.layoutSpecDetails.canSetHeightFreely=!1},window.MenuMorph.prototype.createLine=function(height=1){var item;return(item=new RectangleMorph).setMinimumExtent(new Point(5,1)),item.color=new Color(230,230,230),item.rawSetHeight(height+2),item},window.MenuMorph.prototype.addLine=function(height){var item;return item=this.createLine(height),this.silentAdd(item)},window.MenuMorph.prototype.prependLine=function(height){var item;return item=this.createLine(height),this.silentAdd(item,nil,0)},window.MenuMorph.prototype.createLabel=function(){return this.label=new MenuHeader(this.title)},window.MenuMorph.prototype.createMenuItem=function(label,ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked=!0,target,action,toolTipMessage,color,bold=!1,italic=!1,doubleClickAction,arg1,arg2,representsAMorph=!1){var item;return item=new MenuItemMorph(ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked,target,action,label||"close",this.fontSize||WorldMorph.preferencesAndSettings.menuFontSize,WorldMorph.preferencesAndSettings.menuFontName,!1,this.target,this.environment,toolTipMessage,color,bold,italic,doubleClickAction,arg1,arg2,representsAMorph),null==this.environment&&(item.dataSourceMorphForTarget=item,item.morphEnv=this.target),item},window.MenuMorph.prototype.removeMenuItem=function(label){var item;if(null!=(item=this.firstChildSuchThat(function(m){return null!=m.label&&m.label.text===label})))return item.fullDestroy()},window.MenuMorph.prototype.removeConsecutiveLines=function(){var destroyNextLines,i,item,len,ref,results;for(destroyNextLines=!1,results=[],i=0,len=(ref=this.children.slice()).length;i<len;i++)item=ref[i],destroyNextLines&&item instanceof RectangleMorph&&item.fullDestroy(),item instanceof RectangleMorph?destroyNextLines=!0:results.push(destroyNextLines=!1);return results},window.MenuMorph.prototype.addMenuItem=function(label,ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked,target,action,toolTipMessage,color,bold,italic,doubleClickAction,arg1,arg2,representsAMorph){var item;return item=this.createMenuItem(label,ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked,target,action,toolTipMessage,color,bold,italic,doubleClickAction,arg1,arg2,representsAMorph),this.silentAdd(item)},window.MenuMorph.prototype.prependMenuItem=function(label,ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked,target,action,toolTipMessage,color,bold,italic,doubleClickAction,arg1,arg2,representsAMorph){var item;return item=this.createMenuItem(label,ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked,target,action,toolTipMessage,color,bold,italic,doubleClickAction,arg1,arg2,representsAMorph),this.silentAdd(item,nil,0)},window.MenuMorph.prototype.testNumberOfItems=function(){return this.testItems().length},window.MenuMorph.prototype.testItems=function(){var i,item,items,len,ref;for(items=[],i=0,len=(ref=this.children).length;i<len;i++)(item=ref[i])!==this.label&&items.push(item);return items},window.MenuMorph.prototype.reLayout=function(){var fb,i,item,len,ref,x,y;for(MenuMorph.__super__.reLayout.call(this),trackChanges.push(!1),this.isListContents||(this.cornerRadius=WorldMorph.preferencesAndSettings.isFlat?0:5),this.color=new Color(238,238,238),this.silentRawSetExtent(new Point(0,0)),y=this.top(),x=this.left()+2,this.notifyChildrenThatParentHasReLayouted(),this.isListContents||(this.title?(this.label.fullRawMoveTo(this.position().add(2)),y=this.label.bottom()):y=this.top()),y+=1,this.removeShadow(),i=0,len=(ref=this.children).length;i<len;i++)(item=ref[i])!==this.label&&(item.fullRawMoveTo(new Point(x,y)),y+=item.height());return this.adjustWidthsOfMenuEntries(),fb=this.fullBounds(),this.silentRawSetExtent(fb.extent().add(2)),trackChanges.pop(),this.fullChanged()},window.MenuMorph.prototype.maxWidthOfMenuEntries=function(){var w;return w=0,this.children.forEach(function(item){return item instanceof MenuItemMorph?(item.children[0],w=Math.max(w,item.children[0].width()+8)):item instanceof StringFieldMorph||item instanceof ColorPickerMorph||item instanceof SliderMorph?w=Math.max(w,item.width()):void 0}),this.label&&(w=Math.max(w,this.label.width())),w},window.MenuMorph.prototype.adjustWidthsOfMenuEntries=function(){var w;return w=this.maxWidthOfMenuEntries(),this.children.forEach(item=>(trackChanges.push(!1),item.rawSetWidth(w),trackChanges.pop()))},window.MenuMorph.prototype.unselectAllItems=function(){return this.children.forEach(function(item){if(item instanceof MenuItemMorph)return item.state=item.STATE_NORMAL}),this.changed()},window.PromptMorph=function(morphOpeningThePopUp,msg,target,callback,defaultContents,intendedWidth,floorNum,ceilingNum,isRounded){var isNumeric,slider;this.msg=msg,this.target=target,this.callback=callback,this.defaultContents=defaultContents,this.intendedWidth=intendedWidth,this.floorNum=floorNum,this.ceilingNum=ceilingNum,this.isRounded=isRounded,this.ceilingNum&&(isNumeric=!0),this.tempPromptEntryField=new StringFieldMorph(this.defaultContents||"",this.intendedWidth||100,WorldMorph.preferencesAndSettings.prompterFontSize,WorldMorph.preferencesAndSettings.prompterFontName,!1,!1,isNumeric),PromptMorph.__super__.constructor.call(this,morphOpeningThePopUp,!1,this.target,!0,!0,this.msg||"",this.tempPromptEntryField),this.silentAdd(this.tempPromptEntryField),(this.ceilingNum||WorldMorph.preferencesAndSettings.useSliderForInput)&&((slider=new SliderMorph(this.floorNum||0,this.ceilingNum,parseFloat(this.defaultContents),Math.floor((this.ceilingNum-this.floorNum)/4))).alpha=1,slider.color=new Color(225,225,225),slider.button.color=new Color(60,60,60),slider.button.highlightColor=slider.button.color.copy(),slider.button.highlightColor.b+=100,slider.button.pressColor=slider.button.color.copy(),slider.button.pressColor.b+=150,slider.silentRawSetHeight(WorldMorph.preferencesAndSettings.prompterSliderSize),slider.target=this,slider.argumentToAction=this,slider.action="reactToSliderAction",this.silentAdd(slider)),this.addLine(2),this.addMenuItem("Ok",!0,this.target,this.callback),this.addMenuItem("Close",!0,this,"close"),this.reLayout(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PromptMorph,"name",{value:"PromptMorph"}),window.PromptMorph.instances=[],window.PromptMorph.__super__=window.MenuMorph.prototype,window.PromptMorph=extend(window.PromptMorph,window.MenuMorph),window.PromptMorph.prototype.tempPromptEntryField=nil,window.PromptMorph.prototype.reactToSliderAction=function(num){return this.tempPromptEntryField.changed(),this.tempPromptEntryField.text.text=Math.round(num).toString(),this.tempPromptEntryField.text.reLayout(),this.tempPromptEntryField.text.changed(),this.tempPromptEntryField.text.edit()},window.PromptMorph.prototype.reLayout=function(){return PromptMorph.__super__.reLayout.call(this),this.buildSubmorphs(),this.notifyChildrenThatParentHasReLayouted()},window.PromptMorph.prototype.buildSubmorphs=function(){},window.PromptMorph.prototype.iHaveBeenAddedTo=function(whereTo,beingDropped){},window.RadioButtonsHolderMorph=function(){RadioButtonsHolderMorph.__super__.constructor.call(this),this.appearance=new RectangularAppearance(this),this.setColor(new Color(230,230,230)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.RadioButtonsHolderMorph,"name",{value:"RadioButtonsHolderMorph"}),window.RadioButtonsHolderMorph.instances=[],window.RadioButtonsHolderMorph.__super__=window.Widget.prototype,window.RadioButtonsHolderMorph=extend(window.RadioButtonsHolderMorph,window.Widget),window.RadioButtonsHolderMorph.prototype.wantsButtonsToBehaveLikeRadioButtons=!0,window.RadioButtonsHolderMorph.prototype.allowsRadioButtonsToBeAllDisabled=!0,window.RadioButtonsHolderMorph.prototype.mouseClickLeft=function(morphThatFired){var eachChild,i,len,ref,results;for(results=[],i=0,len=(ref=this.children).length;i<len;i++)(eachChild=ref[i])!==morphThatFired?results.push("function"==typeof eachChild.resetSwitchButton?eachChild.resetSwitchButton():void 0):results.push(void 0);return results},window.RadioButtonsHolderMorph.prototype.whichButtonSelected=function(){var eachChild,i,len,ref;for(i=0,len=(ref=this.children).length;i<len;i++)if((eachChild=ref[i]).isSelected())return eachChild;return null},window.RadioButtonsHolderMorph.prototype.unselectAll=function(){var eachChild,i,len,ref;if(this.allowsRadioButtonsToBeAllDisabled)for(i=0,len=(ref=this.children).length;i<len;i++)(eachChild=ref[i]).isSelected()&&eachChild.toggle();return null},window.SaveShortcutPromptWdgt=function(morphOpeningThePopUp,target,defaultContents,intendedWidth=100,wdgtWhereReferenceWillGo){this.target=target,this.defaultContents=defaultContents,this.intendedWidth=intendedWidth,this.wdgtWhereReferenceWillGo=wdgtWhereReferenceWillGo,this.defaultContents||(this.defaultContents=world.getNextUntitledShortcutName()),this.tempPromptEntryField=new StringFieldWdgt2(this.defaultContents,150,WorldMorph.preferencesAndSettings.prompterFontSize,WorldMorph.preferencesAndSettings.prompterFontName,!1,!1,!1),SaveShortcutPromptWdgt.__super__.constructor.call(this,morphOpeningThePopUp,!1,this.target,!0,!0,this.msg,this.tempPromptEntryField),this.silentAdd(this.tempPromptEntryField),this.addMenuItem("Don't save",!0,this.target,"destroy"),this.addMenuItem("Cancel",!0,this,"close"),this.addMenuItem("Ok",!0,this,"createReferenceAndClose"),this.reLayout(),this.rawSetWidth(150),this.tempPromptEntryField.text.edit(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SaveShortcutPromptWdgt,"name",{value:"SaveShortcutPromptWdgt"}),window.SaveShortcutPromptWdgt.instances=[],window.SaveShortcutPromptWdgt.__super__=window.MenuMorph.prototype,window.SaveShortcutPromptWdgt=extend(window.SaveShortcutPromptWdgt,window.MenuMorph),window.SaveShortcutPromptWdgt.prototype.msg=" save as...         ",window.SaveShortcutPromptWdgt.prototype.tempPromptEntryField=nil,window.SaveShortcutPromptWdgt.prototype.reLayout=function(){return SaveShortcutPromptWdgt.__super__.reLayout.call(this),this.buildSubmorphs(),this.notifyChildrenThatParentHasReLayouted()},window.SaveShortcutPromptWdgt.prototype.buildSubmorphs=function(){},window.SaveShortcutPromptWdgt.prototype.iHaveBeenAddedTo=function(whereTo,beingDropped){},window.SaveShortcutPromptWdgt.prototype.createReferenceAndClose=function(){return this.target.createReferenceAndClose(this.tempPromptEntryField.text.text,this.wdgtWhereReferenceWillGo),this.close()},window.ScriptWdgt=function(savedScript=""){this.savedScript=savedScript,ScriptWdgt.__super__.constructor.call(this,new Point(200,400)),this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ScriptWdgt,"name",{value:"ScriptWdgt"}),window.ScriptWdgt.instances=[],window.ScriptWdgt.__super__=window.Widget.prototype,window.ScriptWdgt=extend(window.ScriptWdgt,window.Widget),window.ScriptWdgt.prototype.tempPromptEntryField=nil,window.ScriptWdgt.prototype.textMorph=nil,window.ScriptWdgt.prototype.runItButton=nil,window.ScriptWdgt.prototype.saveButton=nil,window.ScriptWdgt.prototype.saveTextWdgt=nil,window.ScriptWdgt.prototype.savedScript=nil,window.ScriptWdgt.prototype.functionFromCompiledCode=nil,window.ScriptWdgt.prototype.externalPadding=0,window.ScriptWdgt.prototype.internalPadding=5,window.ScriptWdgt.prototype.colloquialName=function(){return"script"},window.ScriptWdgt.prototype.representativeIcon=function(){return new ScriptIconWdgt},window.ScriptWdgt.prototype.closeFromContainerWindow=function(containerWindow){return world.anyReferenceToWdgt(containerWindow)?containerWindow.close():new SaveShortcutPromptWdgt(this,containerWindow).popUpAtHand()},window.ScriptWdgt.prototype.buildAndConnectChildren=function(){return"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.tempPromptEntryField=new SimplePlainTextScrollPanelWdgt(this.savedScript,!1,5),this.tempPromptEntryField.disableDrops(),this.tempPromptEntryField.contents.disableDrops(),this.tempPromptEntryField.color=new Color(255,255,255),this.tempPromptEntryField.addModifiedContentIndicator(),this.tempPromptEntryField.widgetToBeNotifiedOfTextModificationChange=this,this.textMorph=this.tempPromptEntryField.textWdgt,this.textMorph.backgroundColor=new Color(0,0,0,0),this.textMorph.setFontName(nil,nil,this.textMorph.monoFontStack),this.textMorph.isEditable=!0,this.textMorph.enableSelecting(),this.add(this.tempPromptEntryField),this.runItButton=new SimpleButtonMorph(!0,this,"tryIt","try it"),this.add(this.runItButton),this.saveTextWdgt=new StringMorph2("save + close",WorldMorph.preferencesAndSettings.textInButtonsFontSize),this.saveTextWdgt.alignCenter(),this.saveButton=new SimpleButtonMorph(!0,this,"saveScriptAndClose",this.saveTextWdgt),this.add(this.saveButton),this.tempPromptEntryField.checkIfTextContentWasModifiedFromTextAtStart(),this.invalidateLayout()},window.ScriptWdgt.prototype.saveScript=function(){var compiled;return this.savedScript=this.textMorph.text,compiled=compileFGCode(this.savedScript,!0),this.functionFromCompiledCode=new Function(compiled),this.textMorph.considerCurrentTextAsReferenceText(),this.tempPromptEntryField.checkIfTextContentWasModifiedFromTextAtStart()},window.ScriptWdgt.prototype.saveScriptAndClose=function(){return this.saveScript(),this.closeFromContainerWindow(this.parent)},window.ScriptWdgt.prototype.doAll=function(){var ref;return null!=(ref=this.functionFromCompiledCode)?ref.call(world):void 0},window.ScriptWdgt.prototype.tryIt=function(){return world.evaluateString(this.textMorph.text)},window.ScriptWdgt.prototype.textContentModified=function(){},window.ScriptWdgt.prototype.textContentUnmodified=function(){},window.ScriptWdgt.prototype.doLayout=function(newBoundsForThisLayout){var buttonBounds,buttonsWidth,textBottom,textHeight,textWidth;return window.recalculatingLayouts,this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(ScriptWdgt.__super__.doLayout.apply(this,arguments),trackChanges.push(!1),textHeight=this.height()-2*this.externalPadding-this.internalPadding-15,textBottom=this.top()+this.externalPadding+textHeight,textWidth=this.width()-2*this.externalPadding,buttonsWidth=Math.round((textWidth-2*this.internalPadding-WorldMorph.preferencesAndSettings.handleSize)/2),this.tempPromptEntryField.parent===this&&(this.tempPromptEntryField.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.top()+this.externalPadding)),this.tempPromptEntryField.rawSetExtent(new Point(textWidth,textHeight))),this.runItButton.parent===this&&(buttonBounds=(buttonBounds=new Rectangle(new Point(this.left()+this.externalPadding,textBottom+this.internalPadding))).setBoundsWidthAndHeight(buttonsWidth,15),this.runItButton.doLayout(buttonBounds)),this.saveButton.parent===this&&(buttonBounds=(buttonBounds=new Rectangle(new Point(buttonBounds.right()+this.internalPadding,textBottom+this.internalPadding))).setBoundsWidthAndHeight(buttonsWidth,15),this.saveButton.doLayout(buttonBounds)),trackChanges.pop(),this.fullChanged(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted())},window.ShadowInfo=function(offset=new Point(7,7),alpha=.2){this.offset=offset,this.alpha=alpha,this.offset.debugIfFloats(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ShadowInfo,"name",{value:"ShadowInfo"}),window.ShadowInfo.instances=[],window.ShadowInfo.__super__=Object.prototype,window.ShadowInfo.augmentWith(window.DeepCopierMixin,"ShadowInfo"),window.ShadowInfo.prototype.offset=nil,window.ShadowInfo.prototype.alpha=0,window.ShadowInfo.noShadow=function(){return new ShadowInfo(new Point(0,0),0)},window.SimpleDocumentPanelWdgt=function(){window.SimpleDocumentPanelWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleDocumentPanelWdgt,"name",{value:"SimpleDocumentPanelWdgt"}),window.SimpleDocumentPanelWdgt.instances=[],window.SimpleDocumentPanelWdgt.__super__=window.SimpleVerticalStackPanelWdgt.prototype,window.SimpleDocumentPanelWdgt=extend(window.SimpleDocumentPanelWdgt,window.SimpleVerticalStackPanelWdgt),window.SimpleDocumentPanelWdgt.prototype.colloquialName=function(){return"document"},window.SimpleVerticalStackScrollPanelWdgt=function(isTextLineWrapping=!0){var VS,ostmA;this.isTextLineWrapping=isTextLineWrapping,VS=new SimpleVerticalStackPanelWdgt,this.isTextLineWrapping||(VS.constrainContentWidth=!1),VS.tight=!1,VS.isLockingToPanels=!0,SimpleVerticalStackScrollPanelWdgt.__super__.constructor.call(this,VS),this.disableDrops(),(ostmA=new SimplePlainTextWdgt("A small string\n\n\nhere another.",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).isEditable=!0,ostmA.enableSelecting(),this.setContents(ostmA,5),this.setColor(new Color(249,249,249)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleVerticalStackScrollPanelWdgt,"name",{value:"SimpleVerticalStackScrollPanelWdgt"}),window.SimpleVerticalStackScrollPanelWdgt.instances=[],window.SimpleVerticalStackScrollPanelWdgt.__super__=window.ScrollPanelWdgt.prototype,window.SimpleVerticalStackScrollPanelWdgt=extend(window.SimpleVerticalStackScrollPanelWdgt,window.ScrollPanelWdgt),window.SimpleVerticalStackScrollPanelWdgt.prototype.colloquialName=function(){return"stack"},window.SimpleVerticalStackScrollPanelWdgt.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){var childrenNotHandlesNorCarets,ref;return SimpleVerticalStackScrollPanelWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),menu.removeMenuItem("move all inside"),null!=(childrenNotHandlesNorCarets=null!=(ref=this.contents)?ref.children.filter(function(m){return!(m instanceof HandleMorph||m instanceof CaretMorph)}):void 0)&&childrenNotHandlesNorCarets.length>0&&(menu.addLine(),this.dragsDropsAndEditingEnabled?menu.addMenuItem("disable editing",!0,this,"disableDragsDropsAndEditing","prevents dragging content in and out"):menu.addMenuItem("enable editing",!0,this,"enableDragsDropsAndEditing","lets you drag content in and out")),menu.removeConsecutiveLines()},window.SimpleVerticalStackScrollPanelWdgt.prototype.enableDragsDropsAndEditing=function(triggeringWidget){var ref;if(null==triggeringWidget&&(triggeringWidget=this),!this.dragsDropsAndEditingEnabled)return null!=(ref=this.parent)&&"function"==typeof ref.makePencilYellow&&ref.makePencilYellow(),null!=this.parent&&this.parent!==triggeringWidget&&this.parent instanceof SimpleDocumentWdgt?this.parent.enableDragsDropsAndEditing(this):SimpleVerticalStackScrollPanelWdgt.__super__.enableDragsDropsAndEditing.call(this,this)},window.SimpleVerticalStackScrollPanelWdgt.prototype.disableDragsDropsAndEditing=function(triggeringWidget){var ref;if(null==triggeringWidget&&(triggeringWidget=this),this.dragsDropsAndEditingEnabled)return null!=(ref=this.parent)&&"function"==typeof ref.makePencilClear&&ref.makePencilClear(),null!=this.parent&&this.parent!==triggeringWidget&&this.parent instanceof SimpleDocumentWdgt?this.parent.disableDragsDropsAndEditing(this):SimpleVerticalStackScrollPanelWdgt.__super__.disableDragsDropsAndEditing.call(this,this)},window.SimpleDocumentScrollPanelWdgt=function(){window.SimpleDocumentScrollPanelWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleDocumentScrollPanelWdgt,"name",{value:"SimpleDocumentScrollPanelWdgt"}),window.SimpleDocumentScrollPanelWdgt.instances=[],window.SimpleDocumentScrollPanelWdgt.__super__=window.SimpleVerticalStackScrollPanelWdgt.prototype,window.SimpleDocumentScrollPanelWdgt=extend(window.SimpleDocumentScrollPanelWdgt,window.SimpleVerticalStackScrollPanelWdgt),window.SimpleDocumentScrollPanelWdgt.prototype.colloquialName=function(){return"document"},window.SimpleDocumentScrollPanelWdgt.prototype.getNormalParagraph=function(text){var paragraph;return paragraph=new SimplePlainTextWdgt(text,nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1),paragraph.isEditable=!0,paragraph.enableSelecting(),paragraph},window.SimpleDocumentScrollPanelWdgt.prototype.makeAllContentIntoTemplates=function(){var childrenNotHandlesNorCarets,eachChild,i,len,results;for(results=[],i=0,len=(childrenNotHandlesNorCarets=this.contents.children.filter(function(m){return!(m instanceof HandleMorph||m instanceof CaretMorph)})).length;i<len;i++)eachChild=childrenNotHandlesNorCarets[i],results.push(eachChild.isTemplate=!0);return results},window.SimpleDocumentScrollPanelWdgt.prototype.addNormalParagraph=function(text){var paragraph;return paragraph=this.getNormalParagraph(text),this.add(paragraph),paragraph},window.SimpleDocumentScrollPanelWdgt.prototype.addDivider=function(){var divider;return(divider=this.getNormalParagraph("")).toggleHeaderLine(),this.add(divider),divider},window.SimpleDocumentScrollPanelWdgt.prototype.addIndentedText=function(text){var indentedText;return(indentedText=this.getNormalParagraph(text)).rawSetExtent(new Point(Math.round(92*this.width()/100),335)),this.add(indentedText),indentedText.layoutSpecDetails.setAlignmentToRight(),indentedText},window.SimpleDocumentScrollPanelWdgt.prototype.addBulletPoint=function(text){return this.addIndentedText("• "+text)},window.SimpleDocumentScrollPanelWdgt.prototype.addCodeBlock=function(text){var codeBlock;return(codeBlock=this.addIndentedText("a code block with\n  some example\n    code in here")).setFontName(nil,nil,codeBlock.monoFontStack),this.add(codeBlock),codeBlock},window.SimpleDocumentScrollPanelWdgt.prototype.addSpacer=function(numberOfLines=1){var repeatStringNumTimes,spacer;return repeatStringNumTimes=function(string,times){var repeatedString;for(repeatedString="";times>0;)repeatedString+=string,times--;return repeatedString},spacer=this.getNormalParagraph(repeatStringNumTimes("\n",numberOfLines-1)),spacer.isEditable=!0,spacer.enableSelecting(),this.add(spacer),spacer},window.SimpleDropletAppearance=function(){window.SimpleDropletAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleDropletAppearance,"name",{value:"SimpleDropletAppearance"}),window.SimpleDropletAppearance.instances=[],window.SimpleDropletAppearance.__super__=window.RectangularAppearance.prototype,window.SimpleDropletAppearance=extend(window.SimpleDropletAppearance,window.RectangularAppearance),window.SimpleDropletAppearance.prototype.drawAdditionalPartsOnBaseShape=function(alreadyUsingCanvasClipping,alreadyUsingCanvasScaling,appliedShadow,context,al,at,w,h){var color,height,p0,plusSignBottom,plusSignLeft,plusSignRight,plusSignTop,squareDim,width;if(null==appliedShadow)return height=this.morph.height(),width=this.morph.width(),squareDim=Math.min(width/2,height/2),p0=this.morph.bottomLeft(),p0=p0.subtract(new Point(0,Math.ceil(height/2))),p0=p0.add(new Point((width-squareDim)/2,0)),plusSignLeft=p0.add(new Point(Math.ceil(squareDim/15),0)),plusSignRight=p0.add(new Point(squareDim-Math.ceil(squareDim/15),0)),plusSignTop=p0.add(new Point(Math.ceil(squareDim/2),-Math.ceil(squareDim/3))),plusSignBottom=p0.add(new Point(Math.ceil(squareDim/2),Math.ceil(squareDim/3))),color=new Color(255,255,255),context.save(),context.lineWidth=1,context.lineCap="round",context.strokeStyle=color.toString(),alreadyUsingCanvasClipping||context.clipToRectangle(al,at,w,h),alreadyUsingCanvasScaling||context.scale(pixelRatio,pixelRatio),context.beginPath(),context.moveTo(.5+plusSignLeft.x,.5+plusSignLeft.y),context.lineTo(.5+plusSignRight.x,.5+plusSignRight.y),context.moveTo(.5+plusSignTop.x,.5+plusSignTop.y),context.lineTo(.5+plusSignBottom.x,.5+plusSignBottom.y),context.closePath(),context.stroke(),context.restore()},window.SimpleDropletWdgt=function(parentFieldToAttachingTheWidgetToAsString){this.parentFieldToAttachingTheWidgetToAsString=parentFieldToAttachingTheWidgetToAsString,SimpleDropletWdgt.__super__.constructor.call(this),this.appearance=new SimpleDropletAppearance(this),this.setColor(new Color(0,0,0)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleDropletWdgt,"name",{value:"SimpleDropletWdgt"}),window.SimpleDropletWdgt.instances=[],window.SimpleDropletWdgt.__super__=window.Widget.prototype,window.SimpleDropletWdgt=extend(window.SimpleDropletWdgt,window.Widget),window.SimpleDropletWdgt.augmentWith(window.HighlightableMixin,"SimpleDropletWdgt"),window.SimpleDropletWdgt.prototype.color_hover=new Color(90,90,90),window.SimpleDropletWdgt.prototype.color_pressed=new Color(128,128,128),window.SimpleDropletWdgt.prototype.color_normal=new Color(0,0,0),window.SimpleDropletWdgt.prototype._acceptsDrops=!0,window.SimpleDropletWdgt.prototype.parentFieldToAttachingTheWidgetToAsString=nil,window.SimpleDropletWdgt.prototype.reactToDropOf=function(morphBeingDropped){var ref;return null!=(ref=this.parent)&&(ref[this.parentFieldToAttachingTheWidgetToAsString]=morphBeingDropped),this.addAsSiblingAfterMe(morphBeingDropped,nil,nil),morphBeingDropped.setBounds(this.bounds),this.fullDestroy()},window.SimpleLinkWdgt=function(descriptionString="insert link caption here",linkString="http://www.google.com"){this.descriptionString=descriptionString,this.linkString=linkString,SimpleLinkWdgt.__super__.constructor.call(this,new Point(405,50)),this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleLinkWdgt,"name",{value:"SimpleLinkWdgt"}),window.SimpleLinkWdgt.instances=[],window.SimpleLinkWdgt.__super__=window.Widget.prototype,window.SimpleLinkWdgt=extend(window.SimpleLinkWdgt,window.Widget),window.SimpleLinkWdgt.prototype.tempPromptEntryField=nil,window.SimpleLinkWdgt.prototype.textMorph=nil,window.SimpleLinkWdgt.prototype.outputTextArea=nil,window.SimpleLinkWdgt.prototype.outputTextAreaText=nil,window.SimpleLinkWdgt.prototype.externalLinkIcon=nil,window.SimpleLinkWdgt.prototype.externalPadding=5,window.SimpleLinkWdgt.prototype.internalPadding=5,window.SimpleLinkWdgt.prototype.descriptionString=nil,window.SimpleLinkWdgt.prototype.linkString=nil,window.SimpleLinkWdgt.prototype.colloquialName=function(){return"Simple link"},window.SimpleLinkWdgt.prototype.buildAndConnectChildren=function(){return"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.tempPromptEntryField=new StringMorph2(this.descriptionString),this.tempPromptEntryField.isEditable=!0,this.tempPromptEntryField.fittingSpecWhenBoundsTooLarge=FittingSpecTextInLargerBounds.SCALEUP,this.tempPromptEntryField.fittingSpecWhenBoundsTooSmall=FittingSpecTextInSmallerBounds.SCALEDOWN,this.tempPromptEntryField.alignMiddle(),this.tempPromptEntryField.alignRight(),this.add(this.tempPromptEntryField),this.outputTextArea=new StringMorph2(this.linkString),this.outputTextArea.isEditable=!0,this.outputTextArea.fittingSpecWhenBoundsTooLarge=FittingSpecTextInLargerBounds.SCALEUP,this.outputTextArea.fittingSpecWhenBoundsTooSmall=FittingSpecTextInSmallerBounds.SCALEDOWN,this.outputTextArea.alignMiddle(),this.outputTextArea.alignRight(),this.add(this.outputTextArea),this.createLinkIcon(),this.add(this.externalLinkIcon),this.invalidateLayout()},window.SimpleLinkWdgt.prototype.createLinkIcon=function(){return this.externalLinkIcon=new ExternalLinkButtonWdgt},window.SimpleLinkWdgt.prototype.rawSetExtent=function(aPoint){return SimpleLinkWdgt.__super__.rawSetExtent.apply(this,arguments),this.invalidateLayout()},window.SimpleLinkWdgt.prototype.doLayout=function(newBoundsForThisLayout){var availableHeight,squareSize,text1Height,text2Height;return window.recalculatingLayouts,this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(SimpleLinkWdgt.__super__.doLayout.apply(this,arguments),trackChanges.push(!1),availableHeight=this.height()-2*this.externalPadding-this.internalPadding,text1Height=Math.round(50*availableHeight/100),text2Height=availableHeight-text1Height-this.externalPadding,squareSize=Math.min(this.width(),this.height()-2*this.externalPadding),this.tempPromptEntryField.parent===this&&(this.tempPromptEntryField.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.top()+this.externalPadding)),this.tempPromptEntryField.rawSetExtent(new Point(this.width()-2*this.externalPadding-this.internalPadding-squareSize,text1Height))),this.outputTextArea.parent===this&&(this.outputTextArea.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.tempPromptEntryField.bottom()+this.internalPadding)),this.outputTextArea.rawSetExtent(new Point(this.width()-2*this.externalPadding-this.internalPadding-squareSize,text2Height))),this.externalLinkIcon.parent===this&&(this.externalLinkIcon.fullRawMoveTo(new Point(this.right()-this.externalPadding-squareSize,this.top()+this.externalPadding)),this.externalLinkIcon.rawSetExtent(new Point(squareSize,squareSize))),trackChanges.pop(),this.fullChanged(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted())},window.SimplePlainTextPanelWdgt=function(textAsString,wraps,padding){var ostmA;SimplePlainTextPanelWdgt.__super__.constructor.call(this),this.takesOverAndCoalescesChildrensMenus=!0,this.disableDrops(),this.disableDrops(),this.isTextLineWrapping=wraps,this.color=new Color(255,255,255),(ostmA=new SimplePlainTextWdgt(textAsString,nil,nil,nil,nil,nil,new Color(230,230,130),1)).isEditable=!0,wraps||(ostmA.maxTextWidth=0),ostmA.enableSelecting(),this.add(ostmA),ostmA.lockToPanels(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimplePlainTextPanelWdgt,"name",{value:"SimplePlainTextPanelWdgt"}),window.SimplePlainTextPanelWdgt.instances=[],window.SimplePlainTextPanelWdgt.__super__=window.PanelWdgt.prototype,window.SimplePlainTextPanelWdgt=extend(window.SimplePlainTextPanelWdgt,window.PanelWdgt),window.SimplePlainTextWdgt=function(text="SimplePlainText",originallySetFontSize=12,fontName=this.justArialFontStack,isBold=!1,isItalic=!1,color=new Color(0,0,0),backgroundColor=nil,backgroundTransparency=nil){this.text=text,this.originallySetFontSize=originallySetFontSize,this.fontName=fontName,this.isBold=isBold,this.isItalic=isItalic,this.color=color,this.backgroundColor=backgroundColor,this.backgroundTransparency=backgroundTransparency,SimplePlainTextWdgt.__super__.constructor.apply(this,arguments),this.silentRawSetBounds(new Rectangle(0,0,400,40)),this.fittingSpecWhenBoundsTooLarge=FittingSpecTextInLargerBounds.FLOAT,this.fittingSpecWhenBoundsTooSmall=FittingSpecTextInSmallerBounds.SCALEDOWN,this.maxTextWidth=!0,this.reLayout(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimplePlainTextWdgt,"name",{value:"SimplePlainTextWdgt"}),window.SimplePlainTextWdgt.instances=[],window.SimplePlainTextWdgt.__super__=window.TextMorph2.prototype,window.SimplePlainTextWdgt=extend(window.SimplePlainTextWdgt,window.TextMorph2),window.SimplePlainTextWdgt.augmentWith(window.ControllerMixin,"SimplePlainTextWdgt"),window.SimplePlainTextWdgt.prototype.colloquialName=function(){return"text"},window.SimplePlainTextWdgt.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return SimplePlainTextWdgt.__super__.initialiseDefaultWindowContentLayoutSpec.apply(this,arguments),this.layoutSpecDetails.canSetHeightFreely=!1},window.SimplePlainTextWdgt.prototype.openTargetPropertySelector=function(ignored,ignored2,theTarget){var functionNamesStrings,i,j,menu,menuEntriesStrings,ref;for([menuEntriesStrings,functionNamesStrings]=theTarget.stringSetters(),menu=new MenuMorph(this,!1,this,!0,!0,"choose target property:"),i=j=0,ref=menuEntriesStrings.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j)menu.addMenuItem(menuEntriesStrings[i],!0,this,"setTargetAndActionWithOnesPickedFromMenu",nil,nil,nil,nil,nil,theTarget,functionNamesStrings[i]);return 0===menuEntriesStrings.length&&(menu=new MenuMorph(this,!1,this,!0,!0,"no target properties available")),menu.popUpAtHand()},window.SimplePlainTextWdgt.prototype.stringSetters=function(menuEntriesStrings,functionNamesStrings){return[menuEntriesStrings,functionNamesStrings]=SimplePlainTextWdgt.__super__.stringSetters.call(this,menuEntriesStrings,functionNamesStrings),menuEntriesStrings.push("bang!","text"),functionNamesStrings.push("bang","setText"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.SimplePlainTextWdgt.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){return SimplePlainTextWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),menu.removeMenuItem("soft wrap"),menu.removeMenuItem("soft wrap".tick()),menu.removeMenuItem("soft wrap"),menu.removeMenuItem("←☓→ don't expand to fill"),menu.removeMenuItem("←→ expand to fill"),menu.removeMenuItem("→← shrink to fit"),menu.removeMenuItem("→⋯← crop to fit"),menu.removeMenuItem("header line"),menu.removeMenuItem("no header line"),menu.removeMenuItem("↑ align top"),menu.removeMenuItem("⍿ align middle"),menu.removeMenuItem("↓ align bottom"),menu.addLine(),menu.addMenuItem("set target",!0,this,"openTargetSelector","select another morph\nwhose numerical property\nwill be controlled by this one"),this.amIDirectlyInsideScrollPanelWdgt()&&1===this.parent.children.filter(function(m){return!(m instanceof CaretMorph)}).length&&(menu.addLine(),this.parent.parent.isTextLineWrapping?menu.addMenuItem("☒ soft wrap",!0,this,"softWrapOff"):menu.addMenuItem("☐ soft wrap",!0,this,"softWrapOn")),menu.removeConsecutiveLines()},window.SimplePlainTextWdgt.prototype.softWrapOn=function(){return this.parent.parent.isTextLineWrapping=!0,this.maxTextWidth=!0,this.parent.fullRawMoveTo(this.parent.parent.position()),this.parent.rawSetExtent(this.parent.parent.extent()),this.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.SimplePlainTextWdgt.prototype.softWrapOff=function(){return this.parent.parent.isTextLineWrapping=!1,this.maxTextWidth=nil,this.reLayout(),this.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.SimplePlainTextWdgt.prototype.bang=function(newvalue,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.updateTarget()},window.SimplePlainTextWdgt.prototype.setText=function(theTextContent,stringFieldMorph,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,SimplePlainTextWdgt.__super__.setText.call(this,theTextContent,stringFieldMorph,connectionsCalculationToken,!0),this.reLayout(),this.refreshScrollPanelWdgtOrVerticalStackIfIamInIt(),this.updateTarget()},window.SimplePlainTextWdgt.prototype.updateTarget=function(){this.action&&""!==this.action&&this.target[this.action].call(this.target,this.text,nil,this.connectionsCalculationToken)},window.SimplePlainTextWdgt.prototype.reactToTargetConnection=function(){return this.updateTarget()},window.SimplePlainTextWdgt.prototype.toggleShowBlanks=function(){return SimplePlainTextWdgt.__super__.toggleShowBlanks.apply(this,arguments),this.reLayout(),this.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.SimplePlainTextWdgt.prototype.toggleWeight=function(){return SimplePlainTextWdgt.__super__.toggleWeight.apply(this,arguments),this.reLayout(),this.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.SimplePlainTextWdgt.prototype.toggleItalic=function(){return SimplePlainTextWdgt.__super__.toggleItalic.apply(this,arguments),this.reLayout(),this.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.SimplePlainTextWdgt.prototype.toggleIsPassword=function(){return SimplePlainTextWdgt.__super__.toggleIsPassword.apply(this,arguments),this.reLayout(),this.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.SimplePlainTextWdgt.prototype.rawSetExtent=function(aPoint){return SimplePlainTextWdgt.__super__.rawSetExtent.apply(this,arguments),this.reLayout()},window.SimplePlainTextWdgt.prototype.setFontSize=function(sizeOrMorphGivingSize,morphGivingSize){return SimplePlainTextWdgt.__super__.setFontSize.apply(this,arguments),this.reLayout(),this.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.SimplePlainTextWdgt.prototype.setFontName=function(ignored1,ignored2,theNewFontName){return SimplePlainTextWdgt.__super__.setFontName.apply(this,arguments),this.reLayout(),this.refreshScrollPanelWdgtOrVerticalStackIfIamInIt()},window.SimplePlainTextWdgt.prototype.blendInWithPanelColor=function(){if(this.backgroundColor.eq(WorldMorph.preferencesAndSettings.editableItemBackgroundColor))return this.setBackgroundColor(new Color(249,249,249))},window.SimplePlainTextWdgt.prototype.contrastOutFromPanelColor=function(){if(this.backgroundColor.eq(new Color(249,249,249)))return this.setBackgroundColor(WorldMorph.preferencesAndSettings.editableItemBackgroundColor)},window.SimplePlainTextWdgt.prototype.reLayout=function(){var height,veryWideExtent,width;return SimplePlainTextWdgt.__super__.reLayout.call(this),null!=this.maxTextWidth&&0!==this.maxTextWidth?(this.softWrap=!0,[this.wrappedLines,this.wrappedLineSlots,this.widthOfPossiblyCroppedText,this.heightOfPossiblyCroppedText]=this.breakTextIntoLines(this.text,this.originallySetFontSize,this.extent()),width=this.width()):(this.softWrap=!1,veryWideExtent=new Point(1e7,1e7),[this.wrappedLines,this.wrappedLineSlots,this.widthOfPossiblyCroppedText,this.heightOfPossiblyCroppedText]=this.breakTextIntoLines(this.text,this.originallySetFontSize,veryWideExtent),width=this.widthOfPossiblyCroppedText),height=this.wrappedLines.length*Math.ceil(fontHeight(this.originallySetFontSize)),this.silentRawSetExtent(new Point(width,height)),this.changed(),this.notifyChildrenThatParentHasReLayouted()},window.SimpleVideoLinkWdgt=function(descriptionString,linkString="https://goo.gl/9xZrmG"){this.descriptionString=descriptionString,this.linkString=linkString,SimpleVideoLinkWdgt.__super__.constructor.call(this,this.descriptionString,this.linkString),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleVideoLinkWdgt,"name",{value:"SimpleVideoLinkWdgt"}),window.SimpleVideoLinkWdgt.instances=[],window.SimpleVideoLinkWdgt.__super__=window.SimpleLinkWdgt.prototype,window.SimpleVideoLinkWdgt=extend(window.SimpleVideoLinkWdgt,window.SimpleLinkWdgt),window.SimpleVideoLinkWdgt.prototype.createLinkIcon=function(){return this.externalLinkIcon=new VideoPlayButtonWdgt},window.SpeechBubbleWdgt=function(contents="hello"){this.contents=contents,SpeechBubbleWdgt.__super__.constructor.call(this),this.color=WorldMorph.preferencesAndSettings.menuBackgroundColor,this.padding=0,this.strokeColor=WorldMorph.preferencesAndSettings.menuStrokeColor,this.cornerRadius=6,this.appearance=new BubblyAppearance(this),this.toolTipMessage="speech bubble",this.buildAndConnectChildren(),this.minimumExtent=new Point(10,10),this.extentToGetWhenDraggedFromGlassBox=new Point(105,80),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SpeechBubbleWdgt,"name",{value:"SpeechBubbleWdgt"}),window.SpeechBubbleWdgt.instances=[],window.SpeechBubbleWdgt.__super__=window.Widget.prototype,window.SpeechBubbleWdgt=extend(window.SpeechBubbleWdgt,window.Widget),window.SpeechBubbleWdgt.prototype.contents=nil,window.SpeechBubbleWdgt.prototype.padding=nil,window.SpeechBubbleWdgt.prototype.morphInvokingThis=nil,window.SpeechBubbleWdgt.prototype.colloquialName=function(){return"speech bubble"},window.SpeechBubbleWdgt.prototype.buildAndConnectChildren=function(){return this.contentsMorph=new TextMorph2(this.contents,WorldMorph.preferencesAndSettings.bubbleHelpFontSize,nil,!1,!0,"center"),this.contentsMorph.fittingSpecWhenBoundsTooLarge=FittingSpecTextInLargerBounds.SCALEUP,this.contentsMorph.fittingSpecWhenBoundsTooSmall=FittingSpecTextInSmallerBounds.SCALEDOWN,this.contentsMorph.alignMiddle(),this.contentsMorph.alignCenter(),this.contentsMorph.isEditable=!0,this.add(this.contentsMorph),this.invalidateLayout()},window.SpeechBubbleWdgt.prototype.rawSetExtent=function(aPoint){return SpeechBubbleWdgt.__super__.rawSetExtent.apply(this,arguments),this.doLayout(this.bounds)},window.SpeechBubbleWdgt.prototype.doLayout=function(newBoundsForThisLayout){return window.recalculatingLayouts,null==newBoundsForThisLayout&&(null!=this.desiredExtent?(newBoundsForThisLayout=this.desiredExtent,this.desiredExtent=nil):newBoundsForThisLayout=this.extent(),null!=this.desiredPosition?(newBoundsForThisLayout=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(newBoundsForThisLayout),this.desiredPosition=nil):newBoundsForThisLayout=new Rectangle(this.position()).setBoundsWidthAndHeight(newBoundsForThisLayout)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(trackChanges.push(!1),this.silentRawSetWidth(newBoundsForThisLayout.width()),this.silentRawSetHeight(newBoundsForThisLayout.height()),this.contentsMorph.rawSetWidth(newBoundsForThisLayout.width()-2*this.cornerRadius),this.contentsMorph.rawSetHeight(newBoundsForThisLayout.height()-2*this.cornerRadius-newBoundsForThisLayout.height()/5),this.contentsMorph.fullRawMoveTo(this.position().add(new Point(this.padding+this.cornerRadius,this.padding+this.cornerRadius))),trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0)},window.SpeechBubbleWdgt.ongoingTimeouts=[],window.CanvasMorph=function(){CanvasMorph.__super__.constructor.apply(this,arguments),this.color=new Color(255,255,255),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CanvasMorph,"name",{value:"CanvasMorph"}),window.CanvasMorph.instances=[],window.CanvasMorph.__super__=window.PanelWdgt.prototype,window.CanvasMorph=extend(window.CanvasMorph,window.PanelWdgt),window.CanvasMorph.augmentWith(window.BackBufferMixin,"CanvasMorph"),window.CanvasMorph.prototype.iHaveBeenAddedTo=function(whereTo,beingDropped){},window.CanvasMorph.prototype.createRefreshOrGetBackBuffer=function(){var extent,original_backBuffer;return extent=this.extent(),null!=this.backBuffer?new Point(this.backBuffer.width,this.backBuffer.height).eq(extent.scaleBy(pixelRatio))?[this.backBuffer,this.backBufferContext]:(original_backBuffer=this.backBuffer,this.backBuffer=newCanvas(extent.scaleBy(pixelRatio)),this.backBufferContext=this.backBuffer.getContext("2d"),null!=this.color&&(this.backBufferContext.fillStyle=this.color.toString(),this.backBufferContext.fillRect(0,0,extent.x*pixelRatio,extent.y*pixelRatio)),this.backBufferContext.drawImage(original_backBuffer,0,0),this.backBufferContext.scale(pixelRatio,pixelRatio),[this.backBuffer,this.backBufferContext]):(this.backBuffer=newCanvas(extent.scaleBy(pixelRatio)),this.backBufferContext=this.backBuffer.getContext("2d"),null!=this.color&&(this.backBufferContext.fillStyle=this.color.toString(),this.backBufferContext.fillRect(0,0,extent.x*pixelRatio,extent.y*pixelRatio)),this.backBufferContext.scale(pixelRatio,pixelRatio),[this.backBuffer,this.backBufferContext])},window.CanvasMorph.prototype.clear=function(color=this.color){var backBufferExtent;return null==this.backBuffer&&this.createRefreshOrGetBackBuffer(),backBufferExtent=new Point(this.backBuffer.width,this.backBuffer.height),this.backBufferContext.setTransform(1,0,0,1,0,0),this.backBufferContext.fillStyle=color.toString(),this.backBufferContext.fillRect(0,0,backBufferExtent.x,backBufferExtent.y),this.backBufferContext.scale(pixelRatio,pixelRatio),this.changed()},window.CanvasMorph.prototype.drawLine=function(start,dest,lineWidth,color){var context,from,to;return null==this.backBuffer&&this.createRefreshOrGetBackBuffer(),context=this.backBufferContext,from=start,to=dest,context.lineWidth=lineWidth,context.strokeStyle=color.toString(),context.lineCap="round",context.lineJoin="round",context.beginPath(),context.moveTo(from.x,from.y),context.lineTo(to.x,to.y),context.stroke(),this.changed()},window.StretchableCanvasWdgt=function(){window.StretchableCanvasWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.StretchableCanvasWdgt,"name",{value:"StretchableCanvasWdgt"}),window.StretchableCanvasWdgt.instances=[],window.StretchableCanvasWdgt.__super__=window.CanvasMorph.prototype,window.StretchableCanvasWdgt=extend(window.StretchableCanvasWdgt,window.CanvasMorph),window.StretchableCanvasWdgt.prototype.anythingPaintedYet=!1,window.StretchableCanvasWdgt.prototype.extentWhenCanvasGotDirty=nil,window.StretchableCanvasWdgt.prototype.behindTheScenesBackBuffer=nil,window.StretchableCanvasWdgt.prototype.behindTheScenesBackBufferContext=nil,window.StretchableCanvasWdgt.prototype.createRefreshOrGetBackBuffer=function(){var extent;return extent=this.extent(),null==this.backBuffer&&this.createNewFrontFacingBuffer(extent),this.anythingPaintedYet||null==this.color||(this.backBufferContext.fillStyle=this.color.toString(),this.backBufferContext.fillRect(0,0,extent.x*pixelRatio,extent.y*pixelRatio)),this.anythingPaintedYet&&(this.backBufferContext.setTransform(1,0,0,1,0,0),this.backBufferContext.scale(this.width()/this.extentWhenCanvasGotDirty.x,this.height()/this.extentWhenCanvasGotDirty.y),this.backBufferContext.drawImage(this.behindTheScenesBackBuffer,0,0)),this.backBufferContext.scale(pixelRatio,pixelRatio),[this.backBuffer,this.backBufferContext]},window.StretchableCanvasWdgt.prototype.clear=function(color=this.color){throw new Error("not implemented yet")},window.StretchableCanvasWdgt.prototype.createNewBehindTheScenesBuffer=function(extent){return this.behindTheScenesBackBuffer=newCanvas(extent.scaleBy(pixelRatio)),this.behindTheScenesBackBufferContext=this.behindTheScenesBackBuffer.getContext("2d"),null!=this.color&&(this.behindTheScenesBackBufferContext.fillStyle=this.color.toString(),this.behindTheScenesBackBufferContext.fillRect(0,0,extent.x*pixelRatio,extent.y*pixelRatio)),this.behindTheScenesBackBufferContext.scale(pixelRatio,pixelRatio)},window.StretchableCanvasWdgt.prototype.createNewFrontFacingBuffer=function(extent){return this.backBuffer=newCanvas(extent.scaleBy(pixelRatio)),this.backBufferContext=this.backBuffer.getContext("2d"),this.backBufferContext.scale(pixelRatio,pixelRatio)},window.StretchableCanvasWdgt.prototype.rawSetExtent=function(extent){if(!extent.eq(this.extent()))return null!=this.behindTheScenesBackBuffer&&this.anythingPaintedYet||this.createNewBehindTheScenesBuffer(extent),this.createNewFrontFacingBuffer(extent),StretchableCanvasWdgt.__super__.rawSetExtent.apply(this,arguments),this.doLayout(this.bounds)},window.StretchableCanvasWdgt.prototype.getContextForPainting=function(){var ref;return null!=(null!=(ref=this.parent)?ref.setRatio:void 0)&&null==this.parent.ratio&&(this.parent.setRatio(this.width()/this.height()),this.extentWhenCanvasGotDirty=this.extent(),this.anythingPaintedYet=!0),this.behindTheScenesBackBufferContext.setTransform(1,0,0,1,0,0),this.behindTheScenesBackBufferContext.scale(pixelRatio,pixelRatio),this.behindTheScenesBackBufferContext.scale(this.extentWhenCanvasGotDirty.x/this.width(),this.extentWhenCanvasGotDirty.y/this.height()),this.behindTheScenesBackBufferContext.translate(-this.bounds.origin.x,-this.bounds.origin.y),this.behindTheScenesBackBufferContext},window.StretchableCanvasWdgt.prototype.drawLine=function(start,dest,lineWidth,color){throw new Error("not implemented yet")},window.StretchableCanvasWdgt.prototype.paintImage=function(pos,image){var contextForPainting,extent;return extent=this.extent(),null==this.backBuffer&&this.createNewFrontFacingBuffer(extent),null==this.behindTheScenesBackBuffer&&this.createNewBehindTheScenesBuffer(extent),contextForPainting=this.getContextForPainting(),this.behindTheScenesBackBufferContext.scale(1/pixelRatio,1/pixelRatio),contextForPainting.drawImage(image,pos.x*pixelRatio,pos.y*pixelRatio),this.behindTheScenesBackBufferContext.scale(pixelRatio,pixelRatio)},window.StretchableCanvasWdgt.prototype.reactToDropOf=function(droppedWidget){return this.paintImage(droppedWidget.position(),droppedWidget.fullImage(nil,!1,!0)),world.add(droppedWidget,nil,nil,!0)},window.StretchableCanvasWdgt.prototype.doLayout=function(newBoundsForThisLayout){var childrenNotHandlesNorCarets,i,len;if(window.recalculatingLayouts,null==newBoundsForThisLayout&&(null!=this.desiredExtent?(newBoundsForThisLayout=this.desiredExtent,this.desiredExtent=nil):newBoundsForThisLayout=this.extent(),null!=this.desiredPosition?(newBoundsForThisLayout=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(newBoundsForThisLayout),this.desiredPosition=nil):newBoundsForThisLayout=new Rectangle(this.position()).setBoundsWidthAndHeight(newBoundsForThisLayout)),this.isCollapsed())return this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted();for(trackChanges.push(!1),this.rawSetBounds(newBoundsForThisLayout),i=0,len=(childrenNotHandlesNorCarets=this.children.filter(function(m){return!(m instanceof HandleMorph||m instanceof CaretMorph)})).length;i<len;i++)childrenNotHandlesNorCarets[i].rawSetBounds(this.bounds);return trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0},window.StretchableEditableWdgt=function(){StretchableEditableWdgt.__super__.constructor.apply(this,arguments),this.buildAndConnectChildren(),this.invalidateLayout(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.StretchableEditableWdgt,"name",{value:"StretchableEditableWdgt"}),window.StretchableEditableWdgt.instances=[],window.StretchableEditableWdgt.__super__=window.Widget.prototype,window.StretchableEditableWdgt=extend(window.StretchableEditableWdgt,window.Widget),window.StretchableEditableWdgt.augmentWith(window.KeepsRatioWhenInVerticalStackMixin,"StretchableEditableWdgt"),window.StretchableEditableWdgt.prototype.toolsPanel=nil,window.StretchableEditableWdgt.prototype.stretchableWidgetContainer=nil,window.StretchableEditableWdgt.prototype.externalPadding=0,window.StretchableEditableWdgt.prototype.internalPadding=5,window.StretchableEditableWdgt.prototype.providesAmenitiesForEditing=!0,window.StretchableEditableWdgt.prototype.colloquialName=function(){return"Generic panel"},window.StretchableEditableWdgt.prototype.representativeIcon=function(){return new GenericPanelIconWdgt},window.StretchableEditableWdgt.prototype.createToolsPanel=function(){},window.StretchableEditableWdgt.prototype.createNewStretchablePanel=function(){return this.stretchableWidgetContainer=new StretchableWidgetContainerWdgt,this.add(this.stretchableWidgetContainer)},window.StretchableEditableWdgt.prototype.reLayout=function(){var labelBottom,stretchableWidgetContainerHeight,stretchableWidgetContainerLeft,stretchableWidgetContainerWidth;return trackChanges.push(!1),labelBottom=this.top()+this.externalPadding,stretchableWidgetContainerWidth=this.width()-2*this.externalPadding,this.bottom()-2*this.externalPadding,stretchableWidgetContainerHeight=this.height()-2*this.externalPadding,labelBottom+stretchableWidgetContainerHeight,stretchableWidgetContainerLeft=this.left()+this.externalPadding,this.stretchableWidgetContainer.parent===this&&(this.stretchableWidgetContainer.fullRawMoveTo(new Point(stretchableWidgetContainerLeft,labelBottom)),this.stretchableWidgetContainer.setExtent(new Point(stretchableWidgetContainerWidth,stretchableWidgetContainerHeight))),trackChanges.pop(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted()},window.StretchableEditableWdgt.prototype.rawSetExtent=function(aPoint){return StretchableEditableWdgt.__super__.rawSetExtent.apply(this,arguments),this.reLayout()},window.StretchableEditableWdgt.prototype.hasStartingContentBeenChangedByUser=function(){var ref;return null!=(null!=(ref=this.stretchableWidgetContainer)?ref.ratio:void 0)},window.StretchableEditableWdgt.prototype.closeFromContainerWindow=function(containerWindow){return this.hasStartingContentBeenChangedByUser()||world.anyReferenceToWdgt(containerWindow)?world.anyReferenceToWdgt(containerWindow)?containerWindow.close():new SaveShortcutPromptWdgt(this,containerWindow).popUpAtHand():containerWindow.fullDestroy()},window.StretchableEditableWdgt.prototype.editButtonPressedFromWindowBar=function(){return this.dragsDropsAndEditingEnabled?this.disableDragsDropsAndEditing(this):this.enableDragsDropsAndEditing(this)},window.StretchableEditableWdgt.prototype.constrainToRatio=function(){var ref;if(null!=this.layoutSpecDetails&&(this.layoutSpecDetails.canSetHeightFreely=!1,null!=(null!=(ref=this.stretchableWidgetContainer)?ref.ratio:void 0)))return this.rawSetExtent(new Point(this.width(),0))},window.StretchableEditableWdgt.prototype.enableDragsDropsAndEditing=function(triggeringWidget){var ref;if(null==triggeringWidget&&(triggeringWidget=this),!this.dragsDropsAndEditingEnabled)return null!=(ref=this.parent)&&"function"==typeof ref.makePencilYellow&&ref.makePencilYellow(),this.dragsDropsAndEditingEnabled=!0,this.createToolsPanel(),this.stretchableWidgetContainer.enableDragsDropsAndEditing(this)},window.StretchableEditableWdgt.prototype.rawSetWidthSizeHeightAccordingly=function(newWidth){var ref;if(null!=(ref=this.layoutSpecDetails)&&ref.canSetHeightFreely)StretchableEditableWdgt.__super__.rawSetWidthSizeHeightAccordingly.apply(this,arguments);else if(null!=this.stretchableWidgetContainer){if(null!=this.stretchableWidgetContainer.ratio)return this.rawSetExtent(new Point(newWidth,Math.round(newWidth/this.stretchableWidgetContainer.ratio)));StretchableEditableWdgt.__super__.rawSetWidthSizeHeightAccordingly.apply(this,arguments)}else StretchableEditableWdgt.__super__.rawSetWidthSizeHeightAccordingly.apply(this,arguments)},window.StretchableEditableWdgt.prototype.disableDragsDropsAndEditing=function(triggeringWidget){var base,ref;if(null==triggeringWidget&&(triggeringWidget=this),this.dragsDropsAndEditingEnabled)return null!=(ref=this.parent)&&"function"==typeof ref.makePencilClear&&ref.makePencilClear(),this.dragsDropsAndEditingEnabled=!1,null!=this.toolsPanel&&("function"==typeof(base=this.toolsPanel).unselectAll&&base.unselectAll(),this.toolsPanel.destroy(),this.toolsPanel=nil),this.stretchableWidgetContainer.disableDragsDropsAndEditing(this),this.invalidateLayout()},window.StretchableEditableWdgt.prototype.buildAndConnectChildren=function(){return"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.createNewStretchablePanel(),this.createToolsPanel(),this.invalidateLayout()},window.StretchableEditableWdgt.prototype.childPickedUp=function(childPickedUp){if(childPickedUp===this.stretchableWidgetContainer)return this.createNewStretchablePanel(),this.invalidateLayout()},window.StretchableEditableWdgt.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){var childrenNotHandlesNorCarets;return StretchableEditableWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),null!=(childrenNotHandlesNorCarets=this.children.filter(function(m){return!(m instanceof HandleMorph||m instanceof CaretMorph)}))&&childrenNotHandlesNorCarets.length>0&&(menu.addLine(),this.dragsDropsAndEditingEnabled?menu.addMenuItem("disable editing",!0,this,"disableDragsDropsAndEditing","prevents dragging content in and out"):menu.addMenuItem("enable editing",!0,this,"enableDragsDropsAndEditing","lets you drag content in and out")),menu.removeConsecutiveLines()},window.StretchablePanelWdgt=function(){window.StretchablePanelWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.StretchablePanelWdgt,"name",{value:"StretchablePanelWdgt"}),window.StretchablePanelWdgt.instances=[],window.StretchablePanelWdgt.__super__=window.PanelWdgt.prototype,window.StretchablePanelWdgt=extend(window.StretchablePanelWdgt,window.PanelWdgt),window.StretchablePanelWdgt.prototype.childRemoved=function(child){var ref;if(StretchablePanelWdgt.__super__.childRemoved.apply(this,arguments),null!=(null!=(ref=this.parent)?ref.setRatio:void 0)&&null!=this.parent.ratio&&0===this.children.filter(function(m){return!(m instanceof HandleMorph||m instanceof CaretMorph)}).length)return this.parent.resetRatio()},window.StretchablePanelWdgt.prototype.childAdded=function(child){var ref;if(StretchablePanelWdgt.__super__.childAdded.apply(this,arguments),null!=(null!=(ref=this.parent)?ref.setRatio:void 0)&&null==this.parent.ratio&&0!==this.children.filter(function(m){return!(m instanceof HandleMorph||m instanceof CaretMorph)}).length)return this.parent.setRatio(this.width()/this.height())},window.StretchablePanelWdgt.prototype.rawSetExtent=function(extent){if(!extent.eq(this.extent()))return StretchablePanelWdgt.__super__.rawSetExtent.apply(this,arguments),this.doLayout(this.bounds)},window.StretchablePanelWdgt.prototype.doLayout=function(newBoundsForThisLayout){var childrenNotHandlesNorCarets,eachChild,i,len;if(window.recalculatingLayouts,null==newBoundsForThisLayout&&(null!=this.desiredExtent?(newBoundsForThisLayout=this.desiredExtent,this.desiredExtent=nil):newBoundsForThisLayout=this.extent(),null!=this.desiredPosition?(newBoundsForThisLayout=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(newBoundsForThisLayout),this.desiredPosition=nil):newBoundsForThisLayout=new Rectangle(this.position()).setBoundsWidthAndHeight(newBoundsForThisLayout)),this.isCollapsed())return this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted();for(trackChanges.push(!1),i=0,len=(childrenNotHandlesNorCarets=this.children.filter(function(m){return!(m instanceof HandleMorph||m instanceof CaretMorph)})).length;i<len;i++)(eachChild=childrenNotHandlesNorCarets[i]).fullRawMoveInStretchablePanelToFractionalPosition(newBoundsForThisLayout),eachChild.rawSetExtentToFractionalExtentInPaneUserHasSet(newBoundsForThisLayout);return this.rawSetBounds(newBoundsForThisLayout),trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0},window.StretchablePanelWdgt.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){var childrenNotHandlesNorCarets;return StretchablePanelWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),null!=(childrenNotHandlesNorCarets=this.children.filter(function(m){return!(m instanceof HandleMorph||m instanceof CaretMorph)}))&&childrenNotHandlesNorCarets.length>0&&(menu.addLine(),this.dragsDropsAndEditingEnabled?menu.addMenuItem("disable editing",!0,this,"disableDragsDropsAndEditing","prevents dragging content in and out"):menu.addMenuItem("enable editing",!0,this,"enableDragsDropsAndEditing","lets you drag content in and out")),menu.removeConsecutiveLines()},window.StretchablePanelWdgt.prototype.enableDragsDropsAndEditing=function(triggeringWidget){var ref;if(null==triggeringWidget&&(triggeringWidget=this),!this.dragsDropsAndEditingEnabled)return null!=(ref=this.parent)&&"function"==typeof ref.makePencilYellow&&ref.makePencilYellow(),null!=this.parent&&this.parent!==triggeringWidget&&this.parent instanceof StretchableWidgetContainerWdgt?this.parent.enableDragsDropsAndEditing(this):StretchablePanelWdgt.__super__.enableDragsDropsAndEditing.call(this,this)},window.StretchablePanelWdgt.prototype.disableDragsDropsAndEditing=function(triggeringWidget){var ref;if(null==triggeringWidget&&(triggeringWidget=this),this.dragsDropsAndEditingEnabled)return null!=(ref=this.parent)&&"function"==typeof ref.makePencilClear&&ref.makePencilClear(),null!=this.parent&&this.parent!==triggeringWidget&&this.parent instanceof StretchableWidgetContainerWdgt?this.parent.disableDragsDropsAndEditing(this):StretchablePanelWdgt.__super__.disableDragsDropsAndEditing.call(this,this)},window.StretchableWidgetContainerWdgt=function(contents){StretchableWidgetContainerWdgt.__super__.constructor.call(this,new Point(300,300)),null==contents&&(contents=new StretchablePanelWdgt),this.add(contents),this.contents=contents,this.rawSetExtent(new Point(300,300)),this.contents.rawSetExtent(new Point(this.width(),this.height())),this.invalidateLayout(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.StretchableWidgetContainerWdgt,"name",{value:"StretchableWidgetContainerWdgt"}),window.StretchableWidgetContainerWdgt.instances=[],window.StretchableWidgetContainerWdgt.__super__=window.Widget.prototype,window.StretchableWidgetContainerWdgt=extend(window.StretchableWidgetContainerWdgt,window.Widget),window.StretchableWidgetContainerWdgt.prototype.ratio=nil,window.StretchableWidgetContainerWdgt.prototype.contents=nil,window.StretchableWidgetContainerWdgt.prototype.add=function(aMorph,position=nil,layoutSpec=LayoutSpec.ATTACHEDAS_FREEFLOATING,beingDropped){return null==this.contents||aMorph instanceof ModifiedTextTriangleAnnotationWdgt||aMorph instanceof HandleMorph?StretchableWidgetContainerWdgt.__super__.add.apply(this,arguments):(this.contents.add(aMorph,position,layoutSpec,beingDropped),"function"==typeof this.grandChildAdded?this.grandChildAdded():void 0)},window.StretchableWidgetContainerWdgt.prototype.setRatio=function(ratio){var ref;return this.ratio=ratio,null!=(ref=this.layoutSpecDetails)?ref.canSetHeightFreely=!1:void 0},window.StretchableWidgetContainerWdgt.prototype.resetRatio=function(){var ref;if(null!=this.ratio)return this.ratio=nil,null!=(ref=this.layoutSpecDetails)&&(ref.canSetHeightFreely=!0),this.invalidateLayout()},window.StretchableWidgetContainerWdgt.prototype.colloquialName=function(){return"stretchable panel"},window.StretchableWidgetContainerWdgt.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return StretchableWidgetContainerWdgt.__super__.initialiseDefaultWindowContentLayoutSpec.apply(this,arguments),this.layoutSpecDetails.canSetHeightFreely=null==this.ratio},window.StretchableWidgetContainerWdgt.prototype.widthWithoutSpacing=function(){var height,heightBasedOnWidth,width,widthBasedOnHeight;return height=this.height(),width=this.width(),null==this.ratio?width:(widthBasedOnHeight=height*this.ratio,heightBasedOnWidth=width/this.ratio,widthBasedOnHeight<=width?widthBasedOnHeight:heightBasedOnWidth<=height?width:void 0)},window.StretchableWidgetContainerWdgt.prototype.rawResizeToWithoutSpacing=function(){if(null!=this.ratio)return this.rawSetExtent(new Point(this.widthWithoutSpacing(),Math.round(this.widthWithoutSpacing()/this.ratio))),this.invalidateLayout()},window.StretchableWidgetContainerWdgt.prototype.rawSetWidthSizeHeightAccordingly=function(newWidth){var ref;return 0!==this.contents.children.filter(function(m){return!(m instanceof HandleMorph||m instanceof CaretMorph)}).length?(null==this.ratio&&(this.ratio=this.width()/this.height(),null!=(ref=this.layoutSpecDetails)&&(ref.canSetHeightFreely=!1)),this.rawSetExtent(new Point(newWidth,Math.round(newWidth/this.ratio))),this.invalidateLayout()):(this.rawSetExtent(new Point(newWidth,this.height())),this.invalidateLayout())},window.StretchableWidgetContainerWdgt.prototype.rawSetExtent=function(extent){if(!extent.eq(this.extent()))return StretchableWidgetContainerWdgt.__super__.rawSetExtent.apply(this,arguments),this.doLayout(this.bounds)},window.StretchableWidgetContainerWdgt.prototype.doLayout=function(newBoundsForThisLayout){var height,heightBasedOnWidth,newBounds,newExtent,p0,width,widthBasedOnHeight;return window.recalculatingLayouts,null==newBoundsForThisLayout&&(null!=this.desiredExtent?(newBoundsForThisLayout=this.desiredExtent,this.desiredExtent=nil):newBoundsForThisLayout=this.extent(),null!=this.desiredPosition?(newBoundsForThisLayout=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(newBoundsForThisLayout),this.desiredPosition=nil):newBoundsForThisLayout=new Rectangle(this.position()).setBoundsWidthAndHeight(newBoundsForThisLayout)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(this.rawSetBounds(newBoundsForThisLayout),trackChanges.push(!1),height=this.height(),width=this.width(),null!=this.ratio?(widthBasedOnHeight=height*this.ratio,heightBasedOnWidth=width/this.ratio,p0=this.topLeft(),widthBasedOnHeight<=width?(p0=p0.add(new Point((width-widthBasedOnHeight)/2,0)),newExtent=new Point(widthBasedOnHeight,height)):heightBasedOnWidth<=height&&(p0=p0.add(new Point(0,(height-heightBasedOnWidth)/2)),newExtent=new Point(width,heightBasedOnWidth)),newBounds=new Rectangle(p0).setBoundsWidthAndHeight(newExtent),this.contents.doLayout(newBounds.round())):this.contents.doLayout(this.bounds),trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0)},window.StretchableWidgetContainerWdgt.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){var childrenNotHandlesNorCarets;return StretchableWidgetContainerWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),null!=(childrenNotHandlesNorCarets=this.children.filter(function(m){return!(m instanceof HandleMorph||m instanceof CaretMorph)}))&&childrenNotHandlesNorCarets.length>0&&(menu.addLine(),this.dragsDropsAndEditingEnabled?menu.addMenuItem("disable editing",!0,this,"disableDragsDropsAndEditing","prevents dragging content in and out"):menu.addMenuItem("enable editing",!0,this,"enableDragsDropsAndEditing","lets you drag content in and out")),menu.removeConsecutiveLines()},window.StretchableWidgetContainerWdgt.prototype.enableDragsDropsAndEditing=function(triggeringWidget){var ref;if(null==triggeringWidget&&(triggeringWidget=this),!this.dragsDropsAndEditingEnabled)return null!=(ref=this.parent)&&"function"==typeof ref.makePencilYellow&&ref.makePencilYellow(),null!=this.parent&&this.parent!==triggeringWidget&&this.parent instanceof SimpleSlideWdgt?this.parent.enableDragsDropsAndEditing(this):StretchableWidgetContainerWdgt.__super__.enableDragsDropsAndEditing.call(this,this)},window.StretchableWidgetContainerWdgt.prototype.disableDragsDropsAndEditing=function(triggeringWidget){var ref;if(null==triggeringWidget&&(triggeringWidget=this),this.dragsDropsAndEditingEnabled)return null!=(ref=this.parent)&&"function"==typeof ref.makePencilClear&&ref.makePencilClear(),null!=this.parent&&this.parent!==triggeringWidget&&this.parent instanceof SimpleSlideWdgt?this.parent.disableDragsDropsAndEditing(this):StretchableWidgetContainerWdgt.__super__.disableDragsDropsAndEditing.call(this,this)},window.ToolPanelWdgt=function(){window.ToolPanelWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ToolPanelWdgt,"name",{value:"ToolPanelWdgt"}),window.ToolPanelWdgt.instances=[],window.ToolPanelWdgt.__super__=window.PanelWdgt.prototype,window.ToolPanelWdgt=extend(window.ToolPanelWdgt,window.PanelWdgt),window.ToolPanelWdgt.prototype.numberOfIconsOnPanel=0,window.ToolPanelWdgt.prototype.internalPadding=5,window.ToolPanelWdgt.prototype.externalPadding=10,window.ToolPanelWdgt.prototype.thumbnailSize=30,window.ToolPanelWdgt.prototype.addMany=function(widgetsToBeAdded){var eachWidget,i,len;for(i=0,len=widgetsToBeAdded.length;i<len;i++)eachWidget=widgetsToBeAdded[i],this.add(eachWidget,nil,nil,nil,nil,nil,!0);return this.reLayout()},window.ToolPanelWdgt.prototype.add=function(aMorph,position=nil,layoutSpec=LayoutSpec.ATTACHEDAS_FREEFLOATING,beingDropped,unused,positionOnScreen,dontLayout){var childrenNotHandlesNorCarets,eachChild,foundDrop,glassBoxBottom,glassBoxTop,i,len,positionNumberAmongSiblings;if(aMorph instanceof ModifiedTextTriangleAnnotationWdgt||aMorph instanceof HandleMorph)return ToolPanelWdgt.__super__.add.apply(this,arguments);if(aMorph.grabbedWidgetSwitcheroo===Widget.prototype.grabbedWidgetSwitcheroo&&(aMorph.isTemplate=!0),null==aMorph.extentToGetWhenDraggedFromGlassBox&&(aMorph.extentToGetWhenDraggedFromGlassBox=aMorph.extent()),aMorph instanceof GlassBoxBottomWdgt||((glassBoxBottom=new GlassBoxBottomWdgt).add(aMorph),aMorph.actionableAsThumbnail||((glassBoxTop=new GlassBoxTopWdgt).toolTipMessage=aMorph.toolTipMessage,glassBoxBottom.add(glassBoxTop)),glassBoxBottom.fullRawMoveTo(this.topLeft().add(new Point(this.externalPadding,this.externalPadding))),glassBoxBottom.rawSetExtent(new Point(this.thumbnailSize,this.thumbnailSize)),glassBoxBottom.reLayout(),aMorph=glassBoxBottom),childrenNotHandlesNorCarets=this.children.filter(function(m){return!(m instanceof HandleMorph||m instanceof CaretMorph)}),foundDrop=!1,null!=positionOnScreen&&childrenNotHandlesNorCarets.length>0)for(positionNumberAmongSiblings=0,i=0,len=childrenNotHandlesNorCarets.length;i<len;i++){if((eachChild=childrenNotHandlesNorCarets[i]).bounds.growBy(this.internalPadding).containsPoint(positionOnScreen)){foundDrop=!0,eachChild.bounds.growBy(this.internalPadding).rightHalf().containsPoint(positionOnScreen)&&positionNumberAmongSiblings++;break}positionNumberAmongSiblings++}return foundDrop?ToolPanelWdgt.__super__.add.call(this,aMorph,positionNumberAmongSiblings,layoutSpec,beingDropped):ToolPanelWdgt.__super__.add.call(this,aMorph,this.numberOfIconsOnPanel,layoutSpec,beingDropped),this.numberOfIconsOnPanel++,dontLayout?void 0:this.reLayout()},window.ToolPanelWdgt.prototype.rawSetExtent=function(aPoint){return ToolPanelWdgt.__super__.rawSetExtent.apply(this,arguments),this.reLayout()},window.ToolPanelWdgt.prototype.reLayout=function(){var childrenNotHandlesNorCarets,eachChild,horizAdj,i,len,numberOfEntries,scanningChildrenX,scanningChildrenY,vertAdj,widthINeedToFitContentIn,xPos,yPos;for(trackChanges.push(!1),childrenNotHandlesNorCarets=this.children.filter(function(m){return!(m instanceof HandleMorph||m instanceof CaretMorph)}),scanningChildrenX=0,scanningChildrenY=0,numberOfEntries=0,null!=this.parent&&(widthINeedToFitContentIn=this.parent instanceof ScrollPanelWdgt?this.parent.width():this.width()),i=0,len=childrenNotHandlesNorCarets.length;i<len;i++)eachChild=childrenNotHandlesNorCarets[i],xPos=scanningChildrenX*(this.thumbnailSize+this.internalPadding),yPos=scanningChildrenY*(this.thumbnailSize+this.internalPadding),this.externalPadding+xPos+this.thumbnailSize+this.externalPadding>widthINeedToFitContentIn&&(scanningChildrenX=0,0!==numberOfEntries&&scanningChildrenY++,xPos=scanningChildrenX*(this.thumbnailSize+this.internalPadding),yPos=scanningChildrenY*(this.thumbnailSize+this.internalPadding)),horizAdj=(this.thumbnailSize-eachChild.width())/2,vertAdj=(this.thumbnailSize-eachChild.height())/2,eachChild.fullRawMoveTo(this.position().add(new Point(this.externalPadding,this.externalPadding)).add(new Point(xPos,yPos)).add(new Point(horizAdj,vertAdj)).round()),scanningChildrenX++,numberOfEntries++;return trackChanges.pop(),this.layoutIsValid=!0,this.fullChanged()},window.ToolTipWdgt=function(contents="text here",morphInvokingThis,color=WorldMorph.preferencesAndSettings.menuBackgroundColor,cornerRadius,padding=0){this.contents=contents,this.morphInvokingThis=morphInvokingThis,this.color=color,this.padding=padding,ToolTipWdgt.__super__.constructor.call(this),this.strokeColor=WorldMorph.preferencesAndSettings.menuStrokeColor,this.cornerRadius=cornerRadius||6,this.appearance=new BubblyAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ToolTipWdgt,"name",{value:"ToolTipWdgt"}),window.ToolTipWdgt.instances=[],window.ToolTipWdgt.__super__=window.Widget.prototype,window.ToolTipWdgt=extend(window.ToolTipWdgt,window.Widget),window.ToolTipWdgt.prototype.contents=nil,window.ToolTipWdgt.prototype.padding=nil,window.ToolTipWdgt.prototype.morphInvokingThis=nil,window.ToolTipWdgt.prototype.openAt=function(pos){return this.buildAndConnectChildren(),this.fullRawMoveTo(pos.subtract(new Point(8,this.height()))),this.fullRawMoveWithin(world),world.add(this),this.addShadow(),this.fullChanged(),world.hand.destroyToolTips(),world.hand.toolTipsList.push(this)},window.ToolTipWdgt.prototype.buildAndConnectChildren=function(){return this.contentsMorph&&(this.contentsMorph=this.contentsMorph.destroy()),this.contents instanceof Widget?this.contentsMorph=this.contents:isString(this.contents)?this.contentsMorph=new TextMorph(this.contents,WorldMorph.preferencesAndSettings.bubbleHelpFontSize,nil,!1,!0,"center"):this.contents instanceof HTMLCanvasElement?(this.contentsMorph=new Widget,this.contentsMorph.silentRawSetWidth(this.contents.width),this.contentsMorph.silentRawSetHeight(this.contents.height),this.contentsMorph.backBuffer=this.contents,this.contentsMorph.backBufferContext=this.contentsMorph.backBuffer.getContext("2d")):this.contentsMorph=new TextMorph(this.contents.toString(),WorldMorph.preferencesAndSettings.bubbleHelpFontSize,nil,!1,!0,"center"),this.add(this.contentsMorph),this.silentRawSetWidth(this.contentsMorph.width()+(this.padding?2*this.padding:2*this.cornerRadius)),this.silentRawSetHeight(this.contentsMorph.height()+this.cornerRadius+2*this.padding+2),this.contentsMorph.fullRawMoveTo(this.position().add(new Point(this.padding||this.cornerRadius,this.padding+1)))},window.ToolTipWdgt.ongoingTimeouts=[],window.ToolTipWdgt.createBubbleHelpIfHandStillOnMorph=function(contents,morphInvokingThis){if(morphInvokingThis.root()===world&&morphInvokingThis.boundsContainPoint(world.hand.position()))return new this(contents,morphInvokingThis).openAt(morphInvokingThis.topRight())},window.ToolTipWdgt.cancelAllScheduledToolTips=function(){var eachTimeout,i,len,ref;for(i=0,len=(ref=this.ongoingTimeouts).length;i<len;i++)eachTimeout=ref[i],clearTimeout(eachTimeout);return this.eachTimeout=[]},window.ToolTipWdgt.createInAWhileIfHandStillContainedInMorph=function(morphInvokingThis,contents,delay=500){return"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.animationsPacingControl&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE?this.createBubbleHelpIfHandStillOnMorph(contents,morphInvokingThis):this.ongoingTimeouts.push(setTimeout(()=>this.createBubbleHelpIfHandStillOnMorph(contents,morphInvokingThis),delay))},window.UpperRightTriangleAppearance=function(morph,positionWithinParent="topRight"){this.positionWithinParent=positionWithinParent,UpperRightTriangleAppearance.__super__.constructor.call(this,morph),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.UpperRightTriangleAppearance,"name",{value:"UpperRightTriangleAppearance"}),window.UpperRightTriangleAppearance.instances=[],window.UpperRightTriangleAppearance.__super__=window.Appearance.prototype,window.UpperRightTriangleAppearance=extend(window.UpperRightTriangleAppearance,window.Appearance),window.UpperRightTriangleAppearance.prototype.positionWithinParent=nil,window.UpperRightTriangleAppearance.prototype.paintIntoAreaOrBlitFromBackBuffer=function(aContext,clippingRectangle,appliedShadow){var al,area,at,h,morphPosition,sl,st,w;return this.morph.preliminaryCheckNothingToDraw(clippingRectangle,aContext)?nil:([area,sl,st,al,at,w,h]=this.morph.calculateKeyValues(aContext,clippingRectangle),area.isNotEmpty()?w<1||h<1?nil:(aContext.save(),aContext.clipToRectangle(al,at,w,h),aContext.globalAlpha=(null!=appliedShadow?appliedShadow.alpha:1)*this.morph.alpha,aContext.scale(pixelRatio,pixelRatio),morphPosition=this.morph.position(),aContext.translate(morphPosition.x,morphPosition.y),this.renderingHelper(aContext,this.morph.color),aContext.restore(),this.paintHighlight(aContext,al,at,w,h)):void 0)},window.UpperRightTriangleAppearance.prototype.renderingHelper=function(context,color){return context.lineWidth=1,context.lineCap="round",context.save(),context.fillStyle=color.toString(),context.beginPath(),"topRight"===this.positionWithinParent?(context.moveTo(0,0),context.lineTo(this.morph.width(),this.morph.height()),context.lineTo(this.morph.width(),0)):"topLeft"===this.positionWithinParent&&(context.moveTo(0,0),context.lineTo(0,this.morph.height()),context.lineTo(this.morph.width(),0)),context.closePath(),context.fill(),context.restore()},window.UpperRightTriangleAppearance.prototype.isTransparentAt=function(aPoint){var relativePoint,thisMorphPosition;return!this.morph.boundsContainPoint(aPoint)||(thisMorphPosition=this.morph.position(),(relativePoint=new Point(aPoint.x-thisMorphPosition.x,aPoint.y-thisMorphPosition.y)).x/relativePoint.y<this.morph.width()/this.morph.height())},window.AnalogClockWdgt=function(){this.fps=1,world.addSteppingMorph(this),AnalogClockWdgt.__super__.constructor.call(this),this.setColor(new Color(255,125,125)),this.rawSetExtent(new Point(200,200)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AnalogClockWdgt,"name",{value:"AnalogClockWdgt"}),window.AnalogClockWdgt.instances=[],window.AnalogClockWdgt.__super__=window.Widget.prototype,window.AnalogClockWdgt=extend(window.AnalogClockWdgt,window.Widget),window.AnalogClockWdgt.prototype.hoursHandAngle=0,window.AnalogClockWdgt.prototype.minutesHandAngle=0,window.AnalogClockWdgt.prototype.secondsHandAngle=0,window.AnalogClockWdgt.prototype.strokeSizeToClockDimensionRatio=.004,window.AnalogClockWdgt.prototype.colloquialName=function(){return"analog clock"},window.AnalogClockWdgt.prototype.widthWithoutSpacing=function(){return Math.min(this.width(),this.height())},window.AnalogClockWdgt.prototype.rawResizeToWithoutSpacing=function(){return this.rawSetExtent(new Point(this.widthWithoutSpacing(),this.widthWithoutSpacing()))},window.AnalogClockWdgt.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return AnalogClockWdgt.__super__.initialiseDefaultWindowContentLayoutSpec.apply(this,arguments),this.layoutSpecDetails.canSetHeightFreely=!1},window.AnalogClockWdgt.prototype.rawSetWidthSizeHeightAccordingly=function(newWidth){return this.rawSetExtent(new Point(newWidth,newWidth))},window.AnalogClockWdgt.prototype.paintIntoAreaOrBlitFromBackBuffer=function(aContext,clippingRectangle,appliedShadow){var al,area,at,h,morphPosition,sl,st,w;if(!this.preliminaryCheckNothingToDraw(clippingRectangle,aContext))return[area,sl,st,al,at,w,h]=this.calculateKeyValues(aContext,clippingRectangle),area.isNotEmpty()?w<1||h<1?nil:(aContext.save(),aContext.clipToRectangle(al,at,w,h),aContext.globalAlpha=(null!=appliedShadow?appliedShadow.alpha:1)*this.backgroundTransparency,this.paintRectangle(aContext,al,at,w,h,this.backgroundColor),aContext.scale(pixelRatio,pixelRatio),morphPosition=this.position(),aContext.translate(morphPosition.x,morphPosition.y),this.renderingHelper(aContext,new Color(255,255,255),appliedShadow),aContext.restore(),this.paintHighlight(aContext,al,at,w,h)):void 0},window.AnalogClockWdgt.prototype.step=function(){return this.changed()},window.AnalogClockWdgt.prototype.calculateHandsAngles=function(){var hr,min,now,sec;return now="undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.animationsPacingControl&&AutomatorRecorderAndPlayer.state===AutomatorRecorderAndPlayer.PLAYING?new Date(2011,10,30):new Date,sec=now.getSeconds()+now.getMilliseconds()/1e3,min=now.getMinutes(),hr=now.getHours(),hr=hr>=12?hr-12:hr,this.hoursHandAngle=hr*Math.PI/6+Math.PI/360*min+Math.PI/21600*sec,this.minutesHandAngle=Math.PI/30*min+Math.PI/1800*sec,this.secondsHandAngle=sec*Math.PI/30},window.AnalogClockWdgt.prototype.renderingHelper=function(context,color,appliedShadow){var height,i,squareDim,width;for(height=this.height(),width=this.width(),context.lineWidth=1*Math.min(width,height)*this.strokeSizeToClockDimensionRatio,context.lineCap="round",context.save(),context.globalAlpha=(null!=appliedShadow?appliedShadow.alpha:1)*this.alpha,squareDim=Math.min(width/2,height/2),context.translate(width/2,height/2),context.scale(.9,.9),context.rotate(-Math.PI/2),context.strokeStyle="black",context.fillStyle="white",context.lineWidth=6*Math.min(width,height)*this.strokeSizeToClockDimensionRatio,context.lineCap="round",context.save(),i=0;i<12;)context.beginPath(),context.rotate(Math.PI/6),context.moveTo(2.4*squareDim/3,0),context.lineTo(squareDim,0),context.stroke(),i++;for(context.restore(),context.save(),context.lineWidth=5*Math.min(width,height)*this.strokeSizeToClockDimensionRatio,i=0;i<60;)i%5!=0&&(context.beginPath(),context.moveTo(2.7*squareDim/3,0),context.lineTo(squareDim,0),context.stroke()),context.rotate(Math.PI/30),i++;return context.restore(),context.fillStyle="black",this.calculateHandsAngles(),this.drawHoursHand(context,squareDim),this.drawMinutesHand(context,squareDim),this.drawSecondsHand(context,squareDim),this.drawDotInMiddleOfFace(context,squareDim),context.beginPath(),context.lineWidth=10*Math.min(width,height)*this.strokeSizeToClockDimensionRatio,context.strokeStyle="#325FA2",context.arc(0,0,squareDim,0,2*Math.PI),context.stroke(),context.restore(),context.strokeStyle=color.toString()},window.AnalogClockWdgt.prototype.drawHoursHand=function(context,squareDim){var height,width;return height=this.height(),width=this.width(),context.save(),context.rotate(this.hoursHandAngle),context.lineWidth=8*Math.min(width,height)*this.strokeSizeToClockDimensionRatio,context.beginPath(),context.moveTo(-squareDim/7,0),context.lineTo(squareDim/2,0),context.stroke(),context.restore()},window.AnalogClockWdgt.prototype.drawMinutesHand=function(context,squareDim){var height,width;return height=this.height(),width=this.width(),context.save(),context.rotate(this.minutesHandAngle),context.lineWidth=5*Math.min(width,height)*this.strokeSizeToClockDimensionRatio,context.beginPath(),context.moveTo(-squareDim/5,0),context.lineTo(squareDim/1.3,0),context.stroke(),context.restore()},window.AnalogClockWdgt.prototype.drawSecondsHand=function(context,squareDim){var height,width;return height=this.height(),width=this.width(),context.save(),context.rotate(this.secondsHandAngle),context.strokeStyle="#D40000",context.fillStyle="#D40000",context.lineWidth=6*Math.min(width,height)*this.strokeSizeToClockDimensionRatio,context.beginPath(),context.moveTo(-squareDim/5,0),context.lineTo(squareDim/1.3,0),context.stroke(),context.restore()},window.AnalogClockWdgt.prototype.drawDotInMiddleOfFace=function(context,squareDim){var height,width;return height=this.height(),width=this.width(),context.save(),context.fillStyle="#D40000",context.lineWidth=6*Math.min(width,height)*this.strokeSizeToClockDimensionRatio,context.beginPath(),context.arc(0,0,Math.min(width,height)/30,0,2*Math.PI),context.fill(),context.restore()},window.DashboardsWdgt=function(){window.DashboardsWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DashboardsWdgt,"name",{value:"DashboardsWdgt"}),window.DashboardsWdgt.instances=[],window.DashboardsWdgt.__super__=window.StretchableEditableWdgt.prototype,window.DashboardsWdgt=extend(window.DashboardsWdgt,window.StretchableEditableWdgt),window.DashboardsWdgt.prototype.colloquialName=function(){return"Dashboards Maker"},window.DashboardsWdgt.prototype.representativeIcon=function(){return new DashboardsIconWdgt},window.DashboardsWdgt.prototype.createToolsPanel=function(){return this.toolsPanel=new ScrollPanelWdgt(new ToolPanelWdgt),this.toolsPanel.addMany([new TextBoxCreatorButtonWdgt,new ExternalLinkCreatorButtonWdgt,new ScatterPlotWithAxesCreatorButtonWdgt,new FunctionPlotWithAxesCreatorButtonWdgt,new BarPlotWithAxesCreatorButtonWdgt,new Plot3DCreatorButtonWdgt,new WorldMapCreatorButtonWdgt,new USAMapCreatorButtonWdgt,new MapPinIconWdgt,new SpeechBubbleWdgt,new ArrowNIconWdgt,new ArrowSIconWdgt,new ArrowWIconWdgt,new ArrowEIconWdgt,new ArrowNWIconWdgt,new ArrowNEIconWdgt,new ArrowSWIconWdgt,new ArrowSEIconWdgt]),this.toolsPanel.disableDragsDropsAndEditing(),this.add(this.toolsPanel),this.dragsDropsAndEditingEnabled=!0,this.invalidateLayout()},window.DashboardsWdgt.prototype.createNewStretchablePanel=function(){return this.stretchableWidgetContainer=new StretchableWidgetContainerWdgt,this.add(this.stretchableWidgetContainer)},window.DashboardsWdgt.prototype.reLayout=function(){var labelBottom,labelLeft,labelRight,ref,stretchableWidgetContainerHeight,stretchableWidgetContainerLeft,stretchableWidgetContainerWidth;return trackChanges.push(!1),labelLeft=this.left()+this.externalPadding,this.top()+this.externalPadding,labelRight=this.right()-this.externalPadding,labelRight-labelLeft,labelBottom=this.top()+this.externalPadding,this.bottom()-2*this.externalPadding,(null!=(ref=this.toolsPanel)?ref.parent:void 0)===this&&(this.toolsPanel.fullRawMoveTo(new Point(this.left()+this.externalPadding,labelBottom)),this.toolsPanel.rawSetExtent(new Point(95,this.height()-2*this.externalPadding))),stretchableWidgetContainerWidth=this.width()-2*this.externalPadding,this.dragsDropsAndEditingEnabled&&(stretchableWidgetContainerWidth-=this.toolsPanel.width()+this.internalPadding),this.bottom()-2*this.externalPadding,stretchableWidgetContainerHeight=this.height()-2*this.externalPadding,labelBottom+stretchableWidgetContainerHeight,stretchableWidgetContainerLeft=this.dragsDropsAndEditingEnabled?this.toolsPanel.right()+this.internalPadding:this.left()+this.externalPadding,this.stretchableWidgetContainer.parent===this&&(this.stretchableWidgetContainer.fullRawMoveTo(new Point(stretchableWidgetContainerLeft,labelBottom)),this.stretchableWidgetContainer.setExtent(new Point(stretchableWidgetContainerWidth,stretchableWidgetContainerHeight))),trackChanges.pop(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted()},window.PatchProgrammingWdgt=function(){window.PatchProgrammingWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PatchProgrammingWdgt,"name",{value:"PatchProgrammingWdgt"}),window.PatchProgrammingWdgt.instances=[],window.PatchProgrammingWdgt.__super__=window.StretchableEditableWdgt.prototype,window.PatchProgrammingWdgt=extend(window.PatchProgrammingWdgt,window.StretchableEditableWdgt),window.PatchProgrammingWdgt.prototype.colloquialName=function(){return"Patch Programming"},window.PatchProgrammingWdgt.prototype.representativeIcon=function(){return new PatchProgrammingIconWdgt},window.PatchProgrammingWdgt.prototype.createToolsPanel=function(){return this.toolsPanel=new ScrollPanelWdgt(new ToolPanelWdgt),this.toolsPanel.addMany([new TextBoxCreatorButtonWdgt,new SliderNodeCreatorButtonWdgt,new ColorPaletteNodeCreatorButtonWdgt,new GrayscalePaletteNodeCreatorButtonWdgt,new CalculatingNodeCreatorButtonWdgt]),this.toolsPanel.disableDragsDropsAndEditing(),this.add(this.toolsPanel),this.dragsDropsAndEditingEnabled=!0,this.invalidateLayout()},window.PatchProgrammingWdgt.prototype.createNewStretchablePanel=function(){return this.stretchableWidgetContainer=new StretchableWidgetContainerWdgt,this.add(this.stretchableWidgetContainer)},window.PatchProgrammingWdgt.prototype.reLayout=function(){var labelBottom,labelLeft,labelRight,ref,stretchableWidgetContainerHeight,stretchableWidgetContainerLeft,stretchableWidgetContainerWidth;return trackChanges.push(!1),labelLeft=this.left()+this.externalPadding,this.top()+this.externalPadding,labelRight=this.right()-this.externalPadding,labelRight-labelLeft,labelBottom=this.top()+this.externalPadding,this.bottom()-2*this.externalPadding,(null!=(ref=this.toolsPanel)?ref.parent:void 0)===this&&(this.toolsPanel.fullRawMoveTo(new Point(this.left()+this.externalPadding,labelBottom)),this.toolsPanel.rawSetExtent(new Point(95,this.height()-2*this.externalPadding))),stretchableWidgetContainerWidth=this.width()-2*this.externalPadding,this.dragsDropsAndEditingEnabled&&(stretchableWidgetContainerWidth-=this.toolsPanel.width()+this.internalPadding),this.bottom()-2*this.externalPadding,stretchableWidgetContainerHeight=this.height()-2*this.externalPadding,labelBottom+stretchableWidgetContainerHeight,stretchableWidgetContainerLeft=this.dragsDropsAndEditingEnabled?this.toolsPanel.right()+this.internalPadding:this.left()+this.externalPadding,this.stretchableWidgetContainer.parent===this&&(this.stretchableWidgetContainer.fullRawMoveTo(new Point(stretchableWidgetContainerLeft,labelBottom)),this.stretchableWidgetContainer.setExtent(new Point(stretchableWidgetContainerWidth,stretchableWidgetContainerHeight))),trackChanges.pop(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted()},window.ReconfigurablePaintWdgt=function(){window.ReconfigurablePaintWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ReconfigurablePaintWdgt,"name",{value:"ReconfigurablePaintWdgt"}),window.ReconfigurablePaintWdgt.instances=[],window.ReconfigurablePaintWdgt.__super__=window.StretchableEditableWdgt.prototype,window.ReconfigurablePaintWdgt=extend(window.ReconfigurablePaintWdgt,window.StretchableEditableWdgt),window.ReconfigurablePaintWdgt.prototype.mainCanvas=nil,window.ReconfigurablePaintWdgt.prototype.overlayCanvas=nil,window.ReconfigurablePaintWdgt.prototype.pencilToolButton=nil,window.ReconfigurablePaintWdgt.prototype.brushToolButton=nil,window.ReconfigurablePaintWdgt.prototype.toothpasteToolButton=nil,window.ReconfigurablePaintWdgt.prototype.eraserToolButton=nil,window.ReconfigurablePaintWdgt.prototype.highlightedToolIconColor=new Color(245,126,0),window.ReconfigurablePaintWdgt.prototype.colloquialName=function(){return"Drawings Maker"},window.ReconfigurablePaintWdgt.prototype.representativeIcon=function(){return new PaintBucketIconWdgt},window.ReconfigurablePaintWdgt.prototype.isToolPressed=function(buttonToCheckIfPressed){var whichButtonIsSelected;return null!=(whichButtonIsSelected=this.toolsPanel.whichButtonSelected())&&whichButtonIsSelected===buttonToCheckIfPressed.parent},window.ReconfigurablePaintWdgt.prototype.newCodeToInjectFromButton=function(whichButtonHasNewCode){if(this.isToolPressed(whichButtonHasNewCode))return whichButtonHasNewCode.injectCodeIntoTarget()},window.ReconfigurablePaintWdgt.prototype.createNewStretchablePanel=function(){return this.stretchableWidgetContainer=new StretchableWidgetContainerWdgt(new StretchableCanvasWdgt),this.stretchableWidgetContainer.disableDrops(),this.add(this.stretchableWidgetContainer),this.mainCanvas=this.stretchableWidgetContainer.contents,this.overlayCanvas=new CanvasGlassTopWdgt,this.overlayCanvas.underlyingCanvasMorph=this.mainCanvas,this.overlayCanvas.disableDrops(),this.mainCanvas.add(this.overlayCanvas),this.overlayCanvas.noticesTransparentClick=!0,this.overlayCanvas.injectProperty("mouseLeave","# don't leave any trace behind then the pointer\n# moves out.\n(pos) ->\n    context = @backBufferContext\n    context.setTransform 1, 0, 0, 1, 0, 0\n    context.clearRect 0, 0, @width() * pixelRatio, @height() * pixelRatio\n    @changed()")},window.ReconfigurablePaintWdgt.prototype.createToolsPanel=function(){var brushToolButtonOff,brushToolButtonOn,eraserToolButtonOff,eraserToolButtonOn,pencilButtonOff,pencilButtonOn,toothpasteToolButtonOff,toothpasteToolButtonOn;return this.toolsPanel=new RadioButtonsHolderMorph,this.add(this.toolsPanel),pencilButtonOff=new CodeInjectingSimpleRectangularButtonMorph(this,this.overlayCanvas,new Pencil2IconMorph),pencilButtonOff.alpha=.1,pencilButtonOff.sourceCodeToBeInjected='mouseMove = (pos, mouseButton) ->\n    if world.hand.draggingSomething() then return\n    context = @backBufferContext\n    context.setTransform 1, 0, 0, 1, 0, 0\n    context.clearRect 0, 0, @width() * pixelRatio, @height() * pixelRatio\n    context.scale pixelRatio, pixelRatio\n\n    # give it a little bit of a tint so\n    # you can see the canvas when you take it\n    # apart from the paint tool.\n    #context.fillStyle = (new Color 0,255,0,0.5).toString()\n    #context.fillRect 0, 0, @width(), @height()\n\n    context.translate -@bounds.origin.x, -@bounds.origin.y\n    context.translate pos.x, pos.y\n\n    context.beginPath()\n    context.lineWidth="2"\n\n    if mouseButton == \'left\'\n        contextMain = @underlyingCanvasMorph.getContextForPainting()\n        contextMain.translate pos.x, pos.y\n\n        contextMain.beginPath()\n        contextMain.lineWidth="2"\n        contextMain.fillStyle = "black"\n        contextMain.rect(-2,-2,4,4)\n        contextMain.fill()\n        @underlyingCanvasMorph.changed()\n\n    else\n        context.strokeStyle="red"\n        context.rect(-2,-2,4,4)\n        context.stroke()\n    @changed()',pencilButtonOn=new CodeInjectingSimpleRectangularButtonMorph(this,this.overlayCanvas,new Pencil2IconMorph(this.highlightedToolIconColor)),pencilButtonOn.alpha=.1,pencilButtonOn.sourceCodeToBeInjected="mouseMove = -> return",this.pencilToolButton=new ToggleButtonMorph(pencilButtonOff,pencilButtonOn),brushToolButtonOff=new CodeInjectingSimpleRectangularButtonMorph(this,this.overlayCanvas,new BrushIconMorph),brushToolButtonOff.alpha=.1,brushToolButtonOff.sourceCodeToBeInjected='mouseMove = (pos, mouseButton) ->\n    if world.hand.draggingSomething() then return\n    context = @backBufferContext\n    context.setTransform 1, 0, 0, 1, 0, 0\n    context.clearRect 0, 0, @width() * pixelRatio, @height() * pixelRatio\n    context.scale pixelRatio, pixelRatio\n\n    context.translate -@bounds.origin.x, -@bounds.origin.y\n    context.translate pos.x, pos.y\n\n    context.beginPath()\n    context.lineWidth="2"\n\n    if mouseButton == \'left\'\n        context.fillStyle = "red"\n\n        contextMain = @underlyingCanvasMorph.getContextForPainting()\n        contextMain.translate pos.x, pos.y\n        contextMain.fillStyle = "black"\n\n        # the brush is 16 x 16, so center it\n        contextMain.translate -8, -8\n\n        # for convenience, the brush has been\n        # drawn first using 6x6 squares, so now\n        # scale those back\n        contextMain.scale 1/6, 1/6\n\n        contextMain.beginPath()\n        contextMain.rect 48, 0, 6, 6\n        contextMain.rect 36, 6, 6, 6\n        contextMain.rect 54, 6, 6, 6\n        contextMain.rect 66, 6, 6, 6\n        contextMain.rect 30, 12, 12, 6\n        contextMain.rect 48, 12, 6, 6\n        contextMain.rect 72, 12, 6, 6\n        contextMain.rect 12, 18, 36, 6\n        contextMain.rect 60, 18, 6, 6\n        contextMain.rect 78, 18, 6, 6\n        contextMain.rect 24, 24, 42, 6\n        contextMain.rect 72, 24, 6, 6\n        contextMain.rect 90, 24, 6, 6\n        contextMain.rect 18, 30, 42, 6\n        contextMain.rect 66, 30, 6, 6\n        contextMain.rect 18, 36, 36, 6\n        contextMain.rect 6, 36, 6, 6\n        contextMain.rect 60, 36, 12, 6\n        contextMain.rect 78, 36, 6, 6\n        contextMain.rect 90, 36, 6, 6\n        contextMain.rect 24, 42, 36, 6\n        contextMain.rect 66, 42, 12, 6\n        contextMain.rect 6, 48, 6, 6\n        contextMain.rect 18, 48, 6, 6\n        contextMain.rect 30, 48, 12, 6\n        contextMain.rect 54, 48, 6, 6\n        contextMain.rect 78, 48, 6, 6\n        contextMain.rect 36, 54, 6, 12\n        contextMain.rect 48, 54, 6, 6\n        contextMain.rect 60, 54, 12, 6\n        contextMain.rect 90, 54, 6, 6\n        contextMain.rect 6, 60, 6, 6\n        contextMain.rect 18, 60, 12, 6\n        contextMain.rect 54, 60, 6, 12\n        contextMain.rect 78, 60, 6, 6\n        contextMain.rect 0, 66, 6, 6\n        contextMain.rect 42, 66, 6, 12\n        contextMain.rect 66, 66, 6, 6\n        contextMain.rect 18, 72, 6, 6\n        contextMain.rect 30, 72, 6, 6\n        contextMain.rect 60, 78, 6, 6\n        contextMain.rect 78, 78, 6, 6\n        contextMain.rect 12, 84, 6, 6\n        contextMain.rect 36, 84, 6, 6\n        contextMain.rect 54, 84, 6, 6\n        contextMain.rect 42, 90, 6, 6\n        contextMain.rect 18, 6, 6, 6\n        contextMain.rect 6, 24, 6, 6\n        contextMain.rect 0, 42, 6, 6\n        contextMain.fill()\n\n\n        @underlyingCanvasMorph.changed()\n\n    else\n        context.strokeStyle="green"\n    context.rect(-5,-5,10,10)\n    context.stroke()\n    @changed()',brushToolButtonOn=new CodeInjectingSimpleRectangularButtonMorph(this,this.overlayCanvas,new BrushIconMorph(this.highlightedToolIconColor)),brushToolButtonOn.alpha=.1,brushToolButtonOn.sourceCodeToBeInjected="mouseMove = -> return",this.brushToolButton=new ToggleButtonMorph(brushToolButtonOff,brushToolButtonOn),toothpasteToolButtonOff=new CodeInjectingSimpleRectangularButtonMorph(this,this.overlayCanvas,new ToothpasteIconMorph),toothpasteToolButtonOff.alpha=.1,toothpasteToolButtonOff.sourceCodeToBeInjected='# Toothpaste graphics\n# original implementation by Ward Cunningham, from Tektronix Smalltalk\n# implementation of Smalltalk 80\n# on the Magnolia (1980-1983) and the Tek 4404 (1984)\n# "Draw spheres ala Ken Knowlton, Computer Graphics, v15 n4 p352."\n\npaintBrush = (contextMain) ->\n    contextMain.save()\n    # the brush is 16 x 16, so center it\n    contextMain.translate -8, -8\n\n    # for convenience, the brush has been\n    # drawn first using 6x6 squares, so now\n    # scale those back\n    contextMain.scale 1/6, 1/6\n\n    contextMain.beginPath()\n    contextMain.rect 48, 0, 6, 6\n    contextMain.rect 36, 6, 6, 6\n    contextMain.rect 54, 6, 6, 6\n    contextMain.rect 66, 6, 6, 6\n    contextMain.rect 30, 12, 12, 6\n    contextMain.rect 48, 12, 6, 6\n    contextMain.rect 72, 12, 6, 6\n    contextMain.rect 12, 18, 36, 6\n    contextMain.rect 60, 18, 6, 6\n    contextMain.rect 78, 18, 6, 6\n    contextMain.rect 24, 24, 42, 6\n    contextMain.rect 72, 24, 6, 6\n    contextMain.rect 90, 24, 6, 6\n    contextMain.rect 18, 30, 42, 6\n    contextMain.rect 66, 30, 6, 6\n    contextMain.rect 18, 36, 36, 6\n    contextMain.rect 6, 36, 6, 6\n    contextMain.rect 60, 36, 12, 6\n    contextMain.rect 78, 36, 6, 6\n    contextMain.rect 90, 36, 6, 6\n    contextMain.rect 24, 42, 36, 6\n    contextMain.rect 66, 42, 12, 6\n    contextMain.rect 6, 48, 6, 6\n    contextMain.rect 18, 48, 6, 6\n    contextMain.rect 30, 48, 12, 6\n    contextMain.rect 54, 48, 6, 6\n    contextMain.rect 78, 48, 6, 6\n    contextMain.rect 36, 54, 6, 12\n    contextMain.rect 48, 54, 6, 6\n    contextMain.rect 60, 54, 12, 6\n    contextMain.rect 90, 54, 6, 6\n    contextMain.rect 6, 60, 6, 6\n    contextMain.rect 18, 60, 12, 6\n    contextMain.rect 54, 60, 6, 12\n    contextMain.rect 78, 60, 6, 6\n    contextMain.rect 0, 66, 6, 6\n    contextMain.rect 42, 66, 6, 12\n    contextMain.rect 66, 66, 6, 6\n    contextMain.rect 18, 72, 6, 6\n    contextMain.rect 30, 72, 6, 6\n    contextMain.rect 60, 78, 6, 6\n    contextMain.rect 78, 78, 6, 6\n    contextMain.rect 12, 84, 6, 6\n    contextMain.rect 36, 84, 6, 6\n    contextMain.rect 54, 84, 6, 6\n    contextMain.rect 42, 90, 6, 6\n    contextMain.rect 18, 6, 6, 6\n    contextMain.rect 6, 24, 6, 6\n    contextMain.rect 0, 42, 6, 6\n    contextMain.fill()\n\n    contextMain.restore()\n\n# you\'d be tempted to initialise the queue\n# on mouseDown but it would be a bad idea\n# because the mouse could come "already-pressed"\n# from outside the canvas\ninitialiseQueueIfNeeded = ->\n    if !@queue?\n        @queue = [0..24].map -> nil\n    console.log "resetting the queue"\n\nmouseUpLeft = ->\n    if world.hand.draggingSomething() then return\n    if @queue?\n        console.log "draining the queue"\n        contextMain = @underlyingCanvasMorph.getContextForPainting()\n        \n        until @queue.length == 0\n            console.log @queue.length + " more point left to drain"\n            previousPos = @queue[0]\n            @queue.shift()\n            if previousPos?\n                contextMain.save()\n                contextMain.translate previousPos.x, previousPos.y\n                contextMain.fillStyle = "white"\n                @paintBrush contextMain\n                contextMain.restore()\n        delete @queue\n\nmouseMove = (pos, mouseButton) ->\n    if world.hand.draggingSomething() then return\n    context = @backBufferContext\n    context.setTransform 1, 0, 0, 1, 0, 0\n    context.clearRect 0, 0, @width() * pixelRatio, @height() * pixelRatio\n    context.scale pixelRatio, pixelRatio\n\n    context.translate -@bounds.origin.x, -@bounds.origin.y\n    context.translate pos.x, pos.y\n\n    context.beginPath()\n    context.lineWidth="2"\n\n    if mouseButton == \'left\'\n        @initialiseQueueIfNeeded()\n        @queue.push pos\n        context.fillStyle = "red"\n\n        contextMain = @underlyingCanvasMorph.getContextForPainting()\n        \n        contextMain.save()\n        contextMain.translate pos.x, pos.y\n        contextMain.fillStyle = "black"\n        #@paintBrush contextMain\n        contextMain.beginPath()\n        contextMain.arc 0,0,9,0,2*Math.PI\n        contextMain.fill()\n        contextMain.restore()\n\n\n        previousPos = @queue[0]\n        @queue.shift()\n        if previousPos?\n            contextMain.save()\n            contextMain.translate previousPos.x, previousPos.y\n            contextMain.fillStyle = "white"\n            @paintBrush contextMain\n            contextMain.restore()\n\n\n        @underlyingCanvasMorph.changed()\n\n    else\n        context.strokeStyle="green"\n    context.rect(-5,-5,10,10)\n    context.stroke()\n    @changed()',toothpasteToolButtonOn=new CodeInjectingSimpleRectangularButtonMorph(this,this.overlayCanvas,new ToothpasteIconMorph(this.highlightedToolIconColor)),toothpasteToolButtonOn.alpha=.1,toothpasteToolButtonOn.sourceCodeToBeInjected="mouseMove = -> return",this.toothpasteToolButton=new ToggleButtonMorph(toothpasteToolButtonOff,toothpasteToolButtonOn),eraserToolButtonOff=new CodeInjectingSimpleRectangularButtonMorph(this,this.overlayCanvas,new EraserIconMorph),eraserToolButtonOff.alpha=.1,eraserToolButtonOff.sourceCodeToBeInjected='mouseMove = (pos, mouseButton) ->\n    if world.hand.draggingSomething() then return\n    context = @backBufferContext\n    context.setTransform 1, 0, 0, 1, 0, 0\n    context.clearRect 0, 0, @width() * pixelRatio, @height() * pixelRatio\n    context.scale pixelRatio, pixelRatio\n\n    context.translate -@bounds.origin.x, -@bounds.origin.y\n    context.translate pos.x, pos.y\n\n    context.beginPath()\n    context.lineWidth="2"\n\n    if mouseButton == \'left\'\n        context.fillStyle = "red"\n\n        contextMain = @underlyingCanvasMorph.getContextForPainting()\n        contextMain.translate pos.x, pos.y\n\n        contextMain.beginPath()\n        contextMain.lineWidth="2"\n        contextMain.fillStyle = (new Color 255, 255, 255).toString()\n        contextMain.rect(-5,-5,10,10)\n        contextMain.fill()\n        @underlyingCanvasMorph.changed()\n\n    else\n        context.strokeStyle="green"\n    context.rect(-5,-5,10,10)\n    context.stroke()\n    @changed()',eraserToolButtonOn=new CodeInjectingSimpleRectangularButtonMorph(this,this.overlayCanvas,new EraserIconMorph(this.highlightedToolIconColor)),eraserToolButtonOn.alpha=.1,eraserToolButtonOn.sourceCodeToBeInjected="mouseMove = -> return",this.eraserToolButton=new ToggleButtonMorph(eraserToolButtonOff,eraserToolButtonOn),new EditableMarkMorph(this.pencilToolButton,pencilButtonOff,"editInjectableSource"),new EditableMarkMorph(this.brushToolButton,brushToolButtonOff,"editInjectableSource"),new EditableMarkMorph(this.toothpasteToolButton,toothpasteToolButtonOff,"editInjectableSource"),new EditableMarkMorph(this.eraserToolButton,eraserToolButtonOff,"editInjectableSource"),this.toolsPanel.add(this.pencilToolButton),this.toolsPanel.add(this.brushToolButton),this.toolsPanel.add(this.toothpasteToolButton),this.toolsPanel.add(this.eraserToolButton),this.pencilToolButton.toggle(),this.invalidateLayout()},window.ReconfigurablePaintWdgt.prototype.reLayout=function(){var buttonBounds,labelBottom,labelLeft,labelRight,stretchableWidgetContainerHeight,stretchableWidgetContainerLeft,stretchableWidgetContainerWidth,toolButtonSize;return trackChanges.push(!1),labelLeft=this.left()+this.externalPadding,this.top()+this.externalPadding,labelRight=this.right()-this.externalPadding,labelRight-labelLeft,labelBottom=this.top()+this.externalPadding,toolButtonSize=null!=this.toolsPanel&&this.toolsPanel.parent===this?new Point(93,55):new Point(0,0),Math.floor(this.width()-2*this.externalPadding),null!=this.toolsPanel&&this.toolsPanel.parent===this&&Math.floor(this.internalPadding+toolButtonSize.width()),this.bottom()-2*this.externalPadding,null!=this.toolsPanel&&this.toolsPanel.parent===this&&(this.toolsPanel.fullRawMoveTo(new Point(this.left()+this.externalPadding,labelBottom)),this.toolsPanel.rawSetExtent(new Point(2*this.internalPadding+toolButtonSize.width(),this.height()-2*this.externalPadding)),this.pencilToolButton.parent===this.toolsPanel&&(buttonBounds=(buttonBounds=new Rectangle(new Point(this.toolsPanel.left()+this.internalPadding,labelBottom+this.internalPadding))).setBoundsWidthAndHeight(toolButtonSize),this.pencilToolButton.doLayout(buttonBounds)),this.brushToolButton.parent===this.toolsPanel&&(buttonBounds=(buttonBounds=new Rectangle(new Point(this.toolsPanel.left()+this.internalPadding,this.pencilToolButton.bottom()+this.internalPadding))).setBoundsWidthAndHeight(toolButtonSize),this.brushToolButton.doLayout(buttonBounds)),this.toothpasteToolButton.parent===this.toolsPanel&&(buttonBounds=(buttonBounds=new Rectangle(new Point(this.toolsPanel.left()+this.internalPadding,this.brushToolButton.bottom()+this.internalPadding))).setBoundsWidthAndHeight(toolButtonSize),this.toothpasteToolButton.doLayout(buttonBounds)),this.eraserToolButton.parent===this.toolsPanel&&(buttonBounds=(buttonBounds=new Rectangle(new Point(this.toolsPanel.left()+this.internalPadding,this.toothpasteToolButton.bottom()+this.internalPadding))).setBoundsWidthAndHeight(toolButtonSize),this.eraserToolButton.doLayout(buttonBounds))),stretchableWidgetContainerWidth=null!=this.toolsPanel&&this.toolsPanel.parent===this?this.width()-this.toolsPanel.width()-2*this.externalPadding-this.internalPadding:this.width()-2*this.externalPadding,this.bottom()-2*this.externalPadding,stretchableWidgetContainerHeight=this.height()-2*this.externalPadding,labelBottom+stretchableWidgetContainerHeight,stretchableWidgetContainerLeft=null!=this.toolsPanel&&this.toolsPanel.parent===this?this.toolsPanel.right()+this.internalPadding:this.left()+this.externalPadding,this.stretchableWidgetContainer.parent===this&&(this.stretchableWidgetContainer.fullRawMoveTo(new Point(stretchableWidgetContainerLeft,labelBottom)),this.stretchableWidgetContainer.setExtent(new Point(stretchableWidgetContainerWidth,stretchableWidgetContainerHeight))),trackChanges.pop(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted()},window.SimpleDocumentWdgt=function(defaultContents=""){this.defaultContents=defaultContents,SimpleDocumentWdgt.__super__.constructor.call(this,new Point(368,335)),this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleDocumentWdgt,"name",{value:"SimpleDocumentWdgt"}),window.SimpleDocumentWdgt.instances=[],window.SimpleDocumentWdgt.__super__=window.Widget.prototype,window.SimpleDocumentWdgt=extend(window.SimpleDocumentWdgt,window.Widget),window.SimpleDocumentWdgt.prototype.toolsPanel=nil,window.SimpleDocumentWdgt.prototype.defaultContents=nil,window.SimpleDocumentWdgt.prototype.textMorph=nil,window.SimpleDocumentWdgt.prototype.simpleDocumentScrollPanel=nil,window.SimpleDocumentWdgt.prototype.simpleDocumentScrollPanelText=nil,window.SimpleDocumentWdgt.prototype.externalPadding=0,window.SimpleDocumentWdgt.prototype.internalPadding=5,window.SimpleDocumentWdgt.prototype.providesAmenitiesForEditing=!0,window.SimpleDocumentWdgt.prototype.startingText="Your text here.",window.SimpleDocumentWdgt.prototype.colloquialName=function(){return"Docs Maker"},window.SimpleDocumentWdgt.prototype.representativeIcon=function(){return new TypewriterIconWdgt},window.SimpleDocumentWdgt.prototype.hasStartingContentBeenChangedByUser=function(){return!(1===this.simpleDocumentScrollPanel.contents.children.length&&this.simpleDocumentScrollPanel.contents.children[0]instanceof SimplePlainTextWdgt&&this.simpleDocumentScrollPanel.contents.children[0].text===this.startingText)},window.SimpleDocumentWdgt.prototype.closeFromContainerWindow=function(containerWindow){return this.hasStartingContentBeenChangedByUser()||world.anyReferenceToWdgt(containerWindow)?world.anyReferenceToWdgt(containerWindow)?containerWindow.close():new SaveShortcutPromptWdgt(this,containerWindow).popUpAtHand():containerWindow.fullDestroy()},window.SimpleDocumentWdgt.prototype.buildAndConnectChildren=function(){var startingContent;return"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.createToolsPanel(),this.simpleDocumentScrollPanel=new SimpleDocumentScrollPanelWdgt,startingContent=new SimplePlainTextWdgt(this.startingText,nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1),this.simpleDocumentScrollPanel.setContents(startingContent,5),startingContent.isEditable=!0,startingContent.enableSelecting(),this.add(this.simpleDocumentScrollPanel),this.invalidateLayout()},window.SimpleDocumentWdgt.prototype.createToolsPanel=function(){return this.toolsPanel=new HorizontalMenuPanelWdgt,this.toolsPanel.strokeColor=nil,this.toolsPanel.rawSetExtent(new Point(300,10)),this.toolsPanel.add(new ChangeFontButtonWdgt(this)),this.toolsPanel.add(new BoldButtonWdgt),this.toolsPanel.add(new ItalicButtonWdgt),this.toolsPanel.add(new FormatAsCodeButtonWdgt),this.toolsPanel.add(new IncreaseFontSizeButtonWdgt),this.toolsPanel.add(new DecreaseFontSizeButtonWdgt),this.toolsPanel.add(new AlignLeftButtonWdgt),this.toolsPanel.add(new AlignCenterButtonWdgt),this.toolsPanel.add(new AlignRightButtonWdgt),this.toolsPanel.add(new TemplatesButtonWdgt),this.add(this.toolsPanel),this.toolsPanel.disableDragsDropsAndEditing(),this.dragsDropsAndEditingEnabled=!0,this.invalidateLayout()},window.SimpleDocumentWdgt.prototype.editButtonPressedFromWindowBar=function(){return this.dragsDropsAndEditingEnabled?this.disableDragsDropsAndEditing(this):this.enableDragsDropsAndEditing(this)},window.SimpleDocumentWdgt.prototype.enableDragsDropsAndEditing=function(triggeringWidget){var ref;if(null==triggeringWidget&&(triggeringWidget=this),!this.dragsDropsAndEditingEnabled)return null!=(ref=this.parent)&&"function"==typeof ref.makePencilYellow&&ref.makePencilYellow(),this.dragsDropsAndEditingEnabled=!0,this.createToolsPanel(),this.simpleDocumentScrollPanel.enableDragsDropsAndEditing(this)},window.SimpleDocumentWdgt.prototype.disableDragsDropsAndEditing=function(triggeringWidget){var ref;if(null==triggeringWidget&&(triggeringWidget=this),this.dragsDropsAndEditingEnabled)return null!=(ref=this.parent)&&"function"==typeof ref.makePencilClear&&ref.makePencilClear(),this.toolsPanel.destroy(),this.toolsPanel=nil,this.dragsDropsAndEditingEnabled=!1,this.simpleDocumentScrollPanel.disableDragsDropsAndEditing(this),this.invalidateLayout()},window.SimpleDocumentWdgt.prototype.doLayout=function(newBoundsForThisLayout){var availableHeight,ref,simpleDocumentScrollPanelHeight,simpleDocumentScrollPanelTop,toolsPanelHeight;return window.recalculatingLayouts,this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(SimpleDocumentWdgt.__super__.doLayout.apply(this,arguments),trackChanges.push(!1),availableHeight=this.height()-2*this.externalPadding,simpleDocumentScrollPanelTop=this.top()+this.externalPadding,toolsPanelHeight=0,this.dragsDropsAndEditingEnabled&&(toolsPanelHeight=35,availableHeight-=this.internalPadding,simpleDocumentScrollPanelTop+=toolsPanelHeight+this.internalPadding),simpleDocumentScrollPanelHeight=availableHeight-toolsPanelHeight,(null!=(ref=this.toolsPanel)?ref.parent:void 0)===this&&(this.toolsPanel.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.top()+this.externalPadding)),this.toolsPanel.rawSetExtent(new Point(this.width()-2*this.externalPadding,toolsPanelHeight))),this.simpleDocumentScrollPanel.parent===this&&(this.simpleDocumentScrollPanel.fullRawMoveTo(new Point(this.left()+this.externalPadding,simpleDocumentScrollPanelTop)),this.simpleDocumentScrollPanel.rawSetExtent(new Point(this.width()-2*this.externalPadding,simpleDocumentScrollPanelHeight))),trackChanges.pop(),this.fullChanged(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted())},window.SimpleDocumentWdgt.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){var childrenNotHandlesNorCarets;return SimpleDocumentWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),null!=(childrenNotHandlesNorCarets=this.children.filter(function(m){return!(m instanceof HandleMorph||m instanceof CaretMorph)}))&&childrenNotHandlesNorCarets.length>0&&(menu.addLine(),this.dragsDropsAndEditingEnabled?menu.addMenuItem("disable editing",!0,this,"disableDragsDropsAndEditing","prevents dragging content in and out"):menu.addMenuItem("enable editing",!0,this,"enableDragsDropsAndEditing","lets you drag content in and out")),menu.removeConsecutiveLines()},window.SimpleSlideWdgt=function(){window.SimpleSlideWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleSlideWdgt,"name",{value:"SimpleSlideWdgt"}),window.SimpleSlideWdgt.instances=[],window.SimpleSlideWdgt.__super__=window.StretchableEditableWdgt.prototype,window.SimpleSlideWdgt=extend(window.SimpleSlideWdgt,window.StretchableEditableWdgt),window.SimpleSlideWdgt.prototype.colloquialName=function(){return"Slides Maker"},window.SimpleSlideWdgt.prototype.representativeIcon=function(){return new SimpleSlideIconWdgt},window.SimpleSlideWdgt.prototype.createToolsPanel=function(){return this.toolsPanel=new ScrollPanelWdgt(new ToolPanelWdgt),this.toolsPanel.addMany([new TextBoxCreatorButtonWdgt,new ExternalLinkCreatorButtonWdgt,new VideoPlayCreatorButtonWdgt,new WorldMapCreatorButtonWdgt,new USAMapCreatorButtonWdgt,new RectangleMorph,new MapPinIconWdgt,new SpeechBubbleWdgt,new DestroyIconMorph,new ScratchAreaIconMorph,new FloraIconMorph,new ScooterIconMorph,new HeartIconMorph,new FizzygumLogoIconWdgt,new FizzygumLogoWithTextIconWdgt,new VaporwaveBackgroundIconWdgt,new VaporwaveSunIconWdgt,new ArrowNIconWdgt,new ArrowSIconWdgt,new ArrowWIconWdgt,new ArrowEIconWdgt,new ArrowNWIconWdgt,new ArrowNEIconWdgt,new ArrowSWIconWdgt,new ArrowSEIconWdgt]),this.toolsPanel.disableDragsDropsAndEditing(),this.add(this.toolsPanel),this.dragsDropsAndEditingEnabled=!0,this.invalidateLayout()},window.SimpleSlideWdgt.prototype.createNewStretchablePanel=function(){return this.stretchableWidgetContainer=new StretchableWidgetContainerWdgt,this.add(this.stretchableWidgetContainer)},window.SimpleSlideWdgt.prototype.reLayout=function(){var labelBottom,labelLeft,labelRight,ref,stretchableWidgetContainerHeight,stretchableWidgetContainerLeft,stretchableWidgetContainerWidth;return trackChanges.push(!1),labelLeft=this.left()+this.externalPadding,this.top()+this.externalPadding,labelRight=this.right()-this.externalPadding,labelRight-labelLeft,labelBottom=this.top()+this.externalPadding,this.bottom()-2*this.externalPadding,(null!=(ref=this.toolsPanel)?ref.parent:void 0)===this&&(this.toolsPanel.fullRawMoveTo(new Point(this.left()+this.externalPadding,labelBottom)),this.toolsPanel.rawSetExtent(new Point(95,this.height()-2*this.externalPadding))),stretchableWidgetContainerWidth=this.width()-2*this.externalPadding,this.dragsDropsAndEditingEnabled&&(stretchableWidgetContainerWidth-=this.toolsPanel.width()+this.internalPadding),this.bottom()-2*this.externalPadding,stretchableWidgetContainerHeight=this.height()-2*this.externalPadding,labelBottom+stretchableWidgetContainerHeight,stretchableWidgetContainerLeft=this.dragsDropsAndEditingEnabled?this.toolsPanel.right()+this.internalPadding:this.left()+this.externalPadding,this.stretchableWidgetContainer.parent===this&&(this.stretchableWidgetContainer.fullRawMoveTo(new Point(stretchableWidgetContainerLeft,labelBottom)),this.stretchableWidgetContainer.setExtent(new Point(stretchableWidgetContainerWidth,stretchableWidgetContainerHeight))),trackChanges.pop(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted()},window.Point=function(x=0,y=0){this.x=x,this.y=y,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Point,"name",{value:"Point"}),window.Point.instances=[],window.Point.__super__=Object.prototype,window.Point.augmentWith(window.DeepCopierMixin,"Point"),window.Point.prototype.x=nil,window.Point.prototype.y=nil,window.Point.prototype.onlyContainingIntegers=function(){return Math.floor(this.x)===this.x&&Math.floor(this.y)===this.y},window.Point.prototype.debugIfFloats=function(){this.onlyContainingIntegers()},window.Point.prototype.toString=function(){return Math.round(this.x)+"@"+Math.round(this.y)},window.Point.prototype.prepareBeforeSerialization=function(){var property,results;this.className=this.constructor.name,this.classVersion="0.0.1",this.serializerVersion="0.0.1",results=[];for(property in this)null!=this[property]&&"object"==typeof this[property]&&null==this[property].className&&null!=this[property].prepareBeforeSerialization?results.push(this[property].prepareBeforeSerialization()):results.push(void 0);return results},window.Point.prototype.copy=function(){return new this.constructor(this.x,this.y)},window.Point.prototype.isZero=function(aPoint){return 0===this.x&&0===this.y},window.Point.prototype.eq=function(aPoint){return this.x===aPoint.x&&this.y===aPoint.y},window.Point.prototype.lt=function(aPoint){return this.x<aPoint.x&&this.y<aPoint.y},window.Point.prototype.gt=function(aPoint){return this.x>aPoint.x&&this.y>aPoint.y},window.Point.prototype.ge=function(aPoint){return this.x>=aPoint.x&&this.y>=aPoint.y},window.Point.prototype.le=function(aPoint){return this.x<=aPoint.x&&this.y<=aPoint.y},window.Point.prototype.max=function(aPoint){return this.debugIfFloats(),new this.constructor(Math.max(this.x,aPoint.x),Math.max(this.y,aPoint.y))},window.Point.prototype.min=function(aPoint){return this.debugIfFloats(),new this.constructor(Math.min(this.x,aPoint.x),Math.min(this.y,aPoint.y))},window.Point.prototype.round=function(){return new this.constructor(Math.round(this.x),Math.round(this.y))},window.Point.prototype.abs=function(){return this.debugIfFloats(),new this.constructor(Math.abs(this.x),Math.abs(this.y))},window.Point.prototype.neg=function(){return this.debugIfFloats(),new this.constructor(-this.x,-this.y)},window.Point.prototype.mirror=function(){return this.debugIfFloats(),new this.constructor(this.y,this.x)},window.Point.prototype.floor=function(){return new this.constructor(Math.max(Math.floor(this.x),0),Math.max(Math.floor(this.y),0))},window.Point.prototype.ceil=function(){return new this.constructor(Math.ceil(this.x),Math.ceil(this.y))},window.Point.prototype.width=function(){return this.x},window.Point.prototype.height=function(){return this.y},window.Point.prototype.add=function(other){return this.debugIfFloats(),other instanceof Point?new this.constructor(this.x+other.x,this.y+other.y):new this.constructor(this.x+other,this.y+other)},window.Point.prototype.subtract=function(other){return this.debugIfFloats(),other instanceof Point?new this.constructor(this.x-other.x,this.y-other.y):new this.constructor(this.x-other,this.y-other)},window.Point.prototype.multiplyBy=function(other){return this.debugIfFloats(),other instanceof Point?new this.constructor(this.x*other.x,this.y*other.y):new this.constructor(this.x*other,this.y*other)},window.Point.prototype.divideBy=function(other){return this.debugIfFloats(),other instanceof Point?new this.constructor(this.x/other.x,this.y/other.y):new this.constructor(this.x/other,this.y/other)},window.Point.prototype.floorDivideBy=function(other){return this.debugIfFloats(),other instanceof Point?new this.constructor(Math.floor(this.x/other.x),Math.floor(this.y/other.y)):new this.constructor(Math.floor(this.x/other),Math.floor(this.y/other))},window.Point.prototype.toLocalCoordinatesOf=function(aMorph){return new this.constructor(this.x-aMorph.left(),this.y-aMorph.top())},window.Point.prototype.r=function(){var t;return t=this.multiplyBy(this),Math.sqrt(t.x+t.y)},window.Point.prototype.degrees=function(){var tan,theta;return 0===this.x?this.y>=0?90:270:(tan=this.y/this.x,theta=Math.atan(tan),this.x>=0?this.y>=0?radiansToDegrees(theta):360+radiansToDegrees(theta):180+radiansToDegrees(theta))},window.Point.prototype.theta=function(){var tan,theta;return 0===this.x?this.y>=0?degreesToRadians(90):degreesToRadians(270):(tan=this.y/this.x,theta=Math.atan(tan),this.x>=0?this.y>=0?theta:degreesToRadians(360)+theta:degreesToRadians(180)+theta)},window.Point.prototype.distanceTo=function(aPoint){return aPoint.subtract(this).r()},window.Point.prototype.rotate=function(direction,center){var offset;return offset=this.subtract(center),"right"===direction?new this.constructor(-offset.y,offset.y).add(center):"left"===direction?new this.constructor(offset.y,-offset.y).add(center):center.subtract(offset)},window.Point.prototype.flip=function(direction,center){return"vertical"===direction?new this.constructor(this.x,2*center.y-this.y):new this.constructor(2*center.x-this.x,this.y)},window.Point.prototype.distanceAngle=function(dist,angle){var deg,x,y;return(deg=angle)>270?deg-=360:deg<-270&&(deg+=360),-90<=deg&&deg<=90?(x=Math.sin(degreesToRadians(deg))*dist,y=Math.sqrt(dist*dist-x*x),new this.constructor(x+this.x,this.y-y)):(x=Math.sin(degreesToRadians(180-deg))*dist,y=Math.sqrt(dist*dist-x*x),new this.constructor(x+this.x,this.y+y))},window.Point.prototype.scaleBy=function(scalePoint){return this.multiplyBy(scalePoint)},window.Point.prototype.translateBy=function(deltaPoint){return this.add(deltaPoint)},window.Point.prototype.rotateBy=function(angle,center=new this.constructor(0,0)){var p,r,theta;return p=this.subtract(center),r=p.r(),theta=angle-p.theta(),new this.constructor(center.x+r*Math.cos(theta),center.y-r*Math.sin(theta))},window.Point.prototype.asArray=function(){return[this.x,this.y]},window.Point.prototype.corner=function(cornerPoint){return new Rectangle(this.x,this.y,cornerPoint.x,cornerPoint.y)},window.Point.prototype.rectangle=function(aPoint){var crn,org;return org=this.min(aPoint),crn=this.max(aPoint),new Rectangle(org.x,org.y,crn.x,crn.y)},window.Point.prototype.extent=function(aPoint){var crn;return crn=this.add(aPoint),new Rectangle(this.x,this.y,crn.x,crn.y)},window.Rectangle=function(left=0,top=0,right=0,bottom=0){"number"==typeof left&&"number"==typeof top&&"number"==typeof right&&"number"==typeof bottom?(this.origin=new Point(left,top),this.corner=new Point(right,bottom)):left instanceof Point&&"number"==typeof top&&"number"==typeof right?(this.origin=left,this.corner=new Point(top,right)):"number"==typeof left&&"number"==typeof top&&right instanceof Point?(this.origin=new Point(left,top),this.corner=right):left instanceof Point&&top instanceof Point?(this.origin=left,this.corner=top):left instanceof Point?(this.origin=left,this.corner=new Point(0,0)):left instanceof Rectangle&&(this.origin=left.origin,this.corner=top.origin),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Rectangle,"name",{value:"Rectangle"}),window.Rectangle.instances=[],window.Rectangle.__super__=Object.prototype,window.Rectangle.augmentWith(window.DeepCopierMixin,"Rectangle"),window.Rectangle.prototype.origin=nil,window.Rectangle.prototype.corner=nil,window.Rectangle.prototype.toString=function(){return"["+this.origin+" | "+this.extent()+"]"},window.Rectangle.prototype.onlyContainingIntegers=function(){return Math.floor(this.origin.x)===this.origin.x&&Math.floor(this.origin.y)===this.origin.y&&Math.floor(this.corner.x)===this.corner.x&&Math.floor(this.corner.y)===this.corner.y},window.Rectangle.prototype.debugIfFloats=function(){},window.Rectangle.prototype.prepareBeforeSerialization=function(){var property,results;this.debugIfFloats(),this.className=this.constructor.name,this.classVersion="0.0.1",this.serializerVersion="0.0.1",results=[];for(property in this)null!=this[property]&&"object"==typeof this[property]&&null==this[property].className&&null!=this[property].prepareBeforeSerialization?results.push(this[property].prepareBeforeSerialization()):results.push(void 0);return results},window.Rectangle.prototype.copy=function(){return this.debugIfFloats(),new this.constructor(this.left(),this.top(),this.right(),this.bottom())},window.Rectangle.prototype.setTo=function(left,top,right,bottom){return this.debugIfFloats(),this.origin=new Point(left||(0===left?0:this.left()),top||(0===top?0:this.top())),this.corner=new Point(right||(0===right?0:this.right()),bottom||(0===bottom?0:this.bottom()))},window.Rectangle.prototype.setBoundsWidthAndHeight=function(width,height){var copy;return copy=this.copy(),"number"==typeof width&&"number"==typeof height?copy.corner=new Point(width+copy.origin.x,height+copy.origin.y):width instanceof Point&&(copy.corner=new Point(width.x+copy.origin.x,width.y+copy.origin.y)),copy},window.Rectangle.prototype.area=function(){var w;return this.debugIfFloats(),(w=this.width())<0?0:Math.max(w*this.height(),0)},window.Rectangle.prototype.bottom=function(){return this.debugIfFloats(),this.corner.y},window.Rectangle.prototype.bottomCenter=function(){return this.debugIfFloats(),new Point(this.center().x,this.bottom())},window.Rectangle.prototype.bottomLeft=function(){return this.debugIfFloats(),new Point(this.origin.x,this.corner.y)},window.Rectangle.prototype.bottomRight=function(){return this.debugIfFloats(),this.corner.copy()},window.Rectangle.prototype.boundingBox=function(){return this.debugIfFloats(),this},window.Rectangle.prototype.center=function(){return this.debugIfFloats(),this.origin.add(this.corner.subtract(this.origin).floorDivideBy(2))},window.Rectangle.prototype.corners=function(){return this.debugIfFloats(),[this.origin,this.bottomLeft(),this.corner,this.topRight()]},window.Rectangle.prototype.extent=function(){return this.debugIfFloats(),this.corner.subtract(this.origin)},window.Rectangle.prototype.isEmpty=function(){return this.debugIfFloats(),this.width()<=0||this.height()<=0},window.Rectangle.prototype.isNotEmpty=function(){return!this.isEmpty()},window.Rectangle.prototype.height=function(){return this.debugIfFloats(),this.corner.y-this.origin.y},window.Rectangle.prototype.left=function(){return this.debugIfFloats(),this.origin.x},window.Rectangle.prototype.leftCenter=function(){return this.debugIfFloats(),new Point(this.left(),this.center().y)},window.Rectangle.prototype.right=function(){return this.debugIfFloats(),this.corner.x},window.Rectangle.prototype.rightCenter=function(){return this.debugIfFloats(),new Point(this.right(),this.center().y)},window.Rectangle.prototype.top=function(){return this.debugIfFloats(),this.origin.y},window.Rectangle.prototype.topCenter=function(){return this.debugIfFloats(),new Point(this.center().x,this.top())},window.Rectangle.prototype.topLeft=function(){return this.debugIfFloats(),this.origin},window.Rectangle.prototype.topRight=function(){return this.debugIfFloats(),new Point(this.corner.x,this.origin.y)},window.Rectangle.prototype.width=function(){return this.debugIfFloats(),this.corner.x-this.origin.x},window.Rectangle.prototype.position=function(){return this.debugIfFloats(),this.origin},window.Rectangle.prototype.eq=function(aRect){return null!=aRect&&(this.debugIfFloats(),this.origin.eq(aRect.origin)&&this.corner.eq(aRect.corner))},window.Rectangle.prototype.abs=function(){var newCorner,newOrigin;return this.debugIfFloats(),newOrigin=this.origin.abs(),newCorner=this.corner.max(newOrigin),newOrigin.corner(newCorner)},window.Rectangle.prototype.insetBy=function(delta){var result;return this.debugIfFloats(),result=new this.constructor,result.origin=this.origin.add(delta),result.corner=this.corner.subtract(delta),result.debugIfFloats(),result},window.Rectangle.prototype.rightHalf=function(){var result;return this.debugIfFloats(),result=new this.constructor,result.origin=this.origin.add(new Point(Math.round(this.width()/2),0)),result.corner=this.corner.copy(),result.debugIfFloats(),result},window.Rectangle.prototype.expandBy=function(delta){var result;return this.debugIfFloats(),result=new this.constructor,result.origin=this.origin.subtract(delta),result.corner=this.corner.add(delta),result.debugIfFloats(),result},window.Rectangle.prototype.growBy=function(delta){var result;return this.debugIfFloats(),result=new this.constructor,result.origin=this.origin.copy(),result.corner=this.corner.add(delta),result.debugIfFloats(),result},window.Rectangle.prototype.intersect=function(aRect){var a,b,result;return this.debugIfFloats(),a=this.zeroIfNegative(),b=aRect.zeroIfNegative(),a.isEmpty()||b.isEmpty()?this.constructor.EMPTY:(result=new this.constructor,result.origin=a.origin.max(b.origin),result.corner=a.corner.min(b.corner),(result=result.zeroIfNegative()).debugIfFloats(),result)},window.Rectangle.prototype.zeroIfNegative=function(){return this.debugIfFloats(),this.isEmpty()?this.constructor.EMPTY:this},window.Rectangle.prototype.merge=function(aRect){var a,b,result;return this.debugIfFloats(),a=this.zeroIfNegative(),b=aRect.zeroIfNegative(),a.isEmpty()?b:b.isEmpty()?a:(result=new this.constructor,result.origin=a.origin.min(b.origin),result.corner=a.corner.max(aRect.corner),result.debugIfFloats(),result)},window.Rectangle.prototype.round=function(){return this.origin.round().corner(this.corner.round())},window.Rectangle.prototype.floor=function(){return this.origin.floor().corner(this.corner.floor())},window.Rectangle.prototype.ceil=function(){return this.origin.ceil().corner(this.corner.ceil())},window.Rectangle.prototype.spread=function(){return this.debugIfFloats(),this.origin.floor().corner(this.corner.ceil())},window.Rectangle.prototype.amountToTranslateWithin=function(aRect){var dx,dy;return this.debugIfFloats(),this.right()>aRect.right()&&(dx=aRect.right()-this.right()),this.bottom()>aRect.bottom()&&(dy=aRect.bottom()-this.bottom()),this.left()+dx<aRect.left()&&(dx=aRect.left()-this.left()),this.top()+dy<aRect.top()&&(dy=aRect.top()-this.top()),new Point(dx,dy)},window.Rectangle.prototype.toLocalCoordinatesOf=function(aMorph){return new this.constructor(this.origin.x-aMorph.left(),this.origin.y-aMorph.top(),this.corner.x-aMorph.left(),this.corner.y-aMorph.top())},window.Rectangle.prototype.containsPoint=function(aPoint){return this.debugIfFloats(),this.origin.le(aPoint)&&aPoint.lt(this.corner)},window.Rectangle.prototype.containsRectangle=function(aRect){return this.debugIfFloats(),aRect.origin.ge(this.origin)&&aRect.corner.le(this.corner)},window.Rectangle.prototype.isIntersecting=function(aRect){var rc,ro;return this.debugIfFloats(),ro=aRect.origin,(rc=aRect.corner).x>=this.origin.x&&rc.y>=this.origin.y&&ro.x<=this.corner.x&&ro.y<=this.corner.y},window.Rectangle.prototype.scaleBy=function(scale){var c,o;return this.debugIfFloats(),o=this.origin.multiplyBy(scale),c=this.corner.multiplyBy(scale),new this.constructor(o.x,o.y,c.x,c.y)},window.Rectangle.prototype.translateBy=function(factor){var c,o;return this.debugIfFloats(),o=this.origin.add(factor),c=this.corner.add(factor),new this.constructor(o.x,o.y,c.x,c.y)},window.Rectangle.prototype.translateTo=function(aPoint){var c;return this.debugIfFloats(),c=this.corner,new this.constructor(aPoint.x,aPoint.y,c.x,c.y)},window.Rectangle.prototype.asArray=function(){return this.debugIfFloats(),[this.left(),this.top(),this.right(),this.bottom()]},window.Rectangle.prototype.asArray_xywh=function(){return this.debugIfFloats(),[this.left(),this.top(),this.width(),this.height()]},window.Rectangle.EMPTY=new Rectangle,window.BlinkerMorph=function(fps=2){this.fps=fps,world.addSteppingMorph(this),BlinkerMorph.__super__.constructor.call(this),this.appearance=new RectangularAppearance(this),this.color=new Color(0,0,0),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BlinkerMorph,"name",{value:"BlinkerMorph"}),window.BlinkerMorph.instances=[],window.BlinkerMorph.__super__=window.Widget.prototype,window.BlinkerMorph=extend(window.BlinkerMorph,window.Widget),window.BlinkerMorph.prototype.step=function(){if("undefined"==typeof AutomatorRecorderAndPlayer||null===AutomatorRecorderAndPlayer||!AutomatorRecorderAndPlayer.animationsPacingControl||AutomatorRecorderAndPlayer.state===AutomatorRecorderAndPlayer.IDLE)return this.toggleVisibility()},window.CanvasGlassTopWdgt=function(){CanvasGlassTopWdgt.__super__.constructor.apply(this,arguments),this.color=nil,this.isLockingToPanels=!0,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CanvasGlassTopWdgt,"name",{value:"CanvasGlassTopWdgt"}),window.CanvasGlassTopWdgt.instances=[],window.CanvasGlassTopWdgt.__super__=window.CanvasMorph.prototype,window.CanvasGlassTopWdgt=extend(window.CanvasGlassTopWdgt,window.CanvasMorph),window.CanvasGlassTopWdgt.prototype.underlyingCanvasMorph=nil,window.CanvasGlassTopWdgt.prototype.defaultRejectDrags=!0,window.CaretMorph=function(target){var ref;this.target=target,this.slot=this.target.text.length,CaretMorph.__super__.constructor.call(this),1===(null!=(ref=this.target.undoHistory)?ref.length:void 0)&&this.target.undoHistory[this.target.undoHistory.length-1].isJustFirstClickToPositionCursor&&(this.target.undoHistory=[]),this.minimumExtent=new Point(1,1),this.target instanceof TextMorph&&"left"!==this.target.alignment&&this.target.setAlignmentToLeft(),this.adjustAccordingToTargetText(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CaretMorph,"name",{value:"CaretMorph"}),window.CaretMorph.instances=[],window.CaretMorph.__super__=window.BlinkerMorph.prototype,window.CaretMorph=extend(window.CaretMorph,window.BlinkerMorph),window.CaretMorph.prototype.keyDownEventUsed=!1,window.CaretMorph.prototype.target=nil,window.CaretMorph.prototype.slot=nil,window.CaretMorph.prototype.viewPadding=1,window.CaretMorph.prototype.currentCaretFontSize=nil,window.CaretMorph.prototype.adjustAccordingToTargetText=function(){return this.updateDimension(),this.gotoSlot(this.slot)},window.CaretMorph.prototype.justBeforeBeingPainted=function(){return this.adjustAccordingToTargetText()},window.CaretMorph.prototype.updateDimension=function(){var ls;if((ls=fontHeight(this.target.actualFontSizeUsedInRendering()))!==this.currentCaretFontSize)return this.currentCaretFontSize=ls,this.rawSetExtent(new Point(Math.max(Math.floor(ls/20),1),ls))},window.CaretMorph.prototype.processKeyPress=function(charCode,symbol,shiftKey,ctrlKey,altKey,metaKey){return this.keyDownEventUsed?(this.keyDownEventUsed=!1,this.updateDimension(),nil):(ctrlKey?this.ctrl(charCode,shiftKey):metaKey?this.cmd(charCode,shiftKey):this.insert(symbol,shiftKey),this.target.escalateEvent("reactToKeystroke",charCode,symbol,shiftKey,ctrlKey,altKey,metaKey),this.updateDimension())},window.CaretMorph.prototype.processKeyDown=function(scanCode,shiftKey,ctrlKey,altKey,metaKey){if(this.keyDownEventUsed=!1,ctrlKey)return this.ctrl(scanCode,shiftKey),this.target.escalateEvent("reactToKeystroke",scanCode,nil,shiftKey,ctrlKey,altKey,metaKey),void this.updateDimension();if(metaKey)return this.cmd(scanCode,shiftKey),this.target.escalateEvent("reactToKeystroke",scanCode,nil,shiftKey,ctrlKey,altKey,metaKey),void this.updateDimension();switch(scanCode){case 32:this.insert(" "),this.keyDownEventUsed=!0;break;case 37:this.goLeft(shiftKey),this.keyDownEventUsed=!0;break;case 39:this.goRight(shiftKey),this.keyDownEventUsed=!0;break;case 38:this.goUp(shiftKey),this.keyDownEventUsed=!0;break;case 40:this.goDown(shiftKey),this.keyDownEventUsed=!0;break;case 36:this.goHome(shiftKey),this.keyDownEventUsed=!0;break;case 35:this.goEnd(shiftKey),this.keyDownEventUsed=!0;break;case 46:this.deleteRight(),this.keyDownEventUsed=!0;break;case 8:this.deleteLeft(),this.keyDownEventUsed=!0;break;case 13:"StringMorph"===this.target.constructor.name||"StringMorph2"===this.target.constructor.name?this.accept():this.insert("\n"),this.keyDownEventUsed=!0;break;case 27:this.cancel(),this.keyDownEventUsed=!0}return this.target.escalateEvent("reactToKeystroke",scanCode,nil,shiftKey,ctrlKey,altKey,metaKey),this.updateDimension()},window.CaretMorph.prototype.gotoSlot=function(slot,becauseOfMouseClick){var base,left,length,pos,ref,right;if(length=this.target.text.length,this.slot=slot<0?0:slot>length?length:slot,null!=(pos=this.target.slotCoordinates(this.slot))&&(this.parent&&this.target.isScrollable&&(right=this.parent.right()-this.viewPadding,left=this.parent.left()+this.viewPadding,pos.x>right&&(this.target.fullRawMoveLeftSideTo(this.target.left()+right-pos.x),pos.x=right),pos.x<left&&(left=Math.min(this.parent.left(),left),this.target.fullRawMoveLeftSideTo(this.target.left()+left-pos.x),pos.x=left),this.target.right()<right&&right-this.target.width()<left&&(pos.x+=right-this.target.right(),this.target.fullRawMoveRightSideTo(right))),this.show(),this.fullRawMoveTo(pos.floor()),this.amIDirectlyInsideScrollPanelWdgt()&&this.target.isScrollable&&this.parent.parent.scrollCaretIntoView(this)),becauseOfMouseClick&&0===(null!=(ref=this.target.undoHistory)?ref.length:void 0))return"function"==typeof(base=this.target).pushUndoState?base.pushUndoState(this.slot,!0):void 0},window.CaretMorph.prototype.goLeft=function(shift){return shift||null==this.target.firstSelectedSlot()?(this.updateSelection(shift),this.gotoSlot(this.slot-1),this.updateSelection(shift),this.clearSelectionIfStartAndEndMeet(shift)):(this.gotoSlot(this.target.firstSelectedSlot()),this.updateSelection(shift)),this.target.caretHorizPositionForVertMovement=this.slot},window.CaretMorph.prototype.goRight=function(shift,howMany){return shift||null==this.target.lastSelectedSlot()?(this.updateSelection(shift),this.gotoSlot(this.slot+(howMany||1)),this.updateSelection(shift),this.clearSelectionIfStartAndEndMeet(shift)):(this.gotoSlot(this.target.lastSelectedSlot()),this.updateSelection(shift)),this.target.caretHorizPositionForVertMovement=this.slot},window.CaretMorph.prototype.goUp=function(shift){return shift||null==this.target.lastSelectedSlot()?(this.updateSelection(shift),this.gotoSlot(this.target.upFrom(this.slot)),this.updateSelection(shift),this.clearSelectionIfStartAndEndMeet(shift)):(this.gotoSlot(this.target.firstSelectedSlot()),this.updateSelection(shift))},window.CaretMorph.prototype.goDown=function(shift){return shift||null==this.target.lastSelectedSlot()?(this.updateSelection(shift),this.gotoSlot(this.target.downFrom(this.slot)),this.updateSelection(shift),this.clearSelectionIfStartAndEndMeet(shift)):(this.gotoSlot(this.target.lastSelectedSlot()),this.updateSelection(shift))},window.CaretMorph.prototype.goHome=function(shift){return this.updateSelection(shift),this.gotoSlot(this.target.startOfLine(this.slot)),this.updateSelection(shift),this.clearSelectionIfStartAndEndMeet(shift)},window.CaretMorph.prototype.goEnd=function(shift){return this.updateSelection(shift),this.gotoSlot(this.target.endOfLine(this.slot)),this.updateSelection(shift),this.clearSelectionIfStartAndEndMeet(shift)},window.CaretMorph.prototype.gotoPos=function(aPoint){var slotToGoTo;return slotToGoTo=this.target.slotAt(aPoint),this.gotoSlot(slotToGoTo),this.show(),slotToGoTo},window.CaretMorph.prototype.clearSelectionIfStartAndEndMeet=function(shift){if(shift&&this.target.startMark===this.target.endMark)return this.target.clearSelection()},window.CaretMorph.prototype.updateSelection=function(shift){return shift?null==this.target.endMark&&null==this.target.startMark?this.target.selectBetween(this.slot,this.slot):this.target.endMark!==this.slot?this.target.setEndMark(this.slot):void 0:this.target.clearSelection()},window.CaretMorph.prototype.accept=function(){return world.stopEditing(),this.escalateEvent("accept",nil)},window.CaretMorph.prototype.cancel=function(){return world.stopEditing(),this.escalateEvent("cancel",nil)},window.CaretMorph.prototype.undo=function(shiftKey){var redoState,undoState;if(null!=this.target.undoHistory)if(shiftKey){if(null!=(redoState=this.target.popRedoState()))return this.bringTextAndCaretToState(redoState)}else if(this.target.undoHistory.length>1)return this.target.popUndoState(),undoState=this.target.undoHistory[this.target.undoHistory.length-1],this.bringTextAndCaretToState(undoState)},window.CaretMorph.prototype.bringTextAndCaretToState=function(state){return this.target.setText(state.textContent,nil,nil),this.gotoSlot(state.cursorPos),null!=state.selectionStart&&null!=state.selectionEnd?this.target.selectBetween(state.selectionStart,state.selectionEnd):this.target.clearSelection()},window.CaretMorph.prototype.insert=function(symbol,shiftKey){var base,base1,text;return"\t"===symbol?(this.target.escalateEvent("reactToEdit",this.target),shiftKey?this.target.backTab(this.target):this.target.tab(this.target)):this.target.isNumeric&&isNaN(parseFloat(symbol))&&"-"!==symbol&&"."!==symbol?void 0:("function"==typeof(base=this.target).pushUndoState&&base.pushUndoState(this.slot),""!==this.target.selection()&&(this.gotoSlot(this.target.firstSelectedSlot()),this.target.deleteSelection()),text=this.target.text,text=text.slice(0,this.slot)+symbol+text.slice(this.slot),this.target.setText(text,nil,nil),this.goRight(!1,symbol.length),this.updateDimension(),"function"==typeof(base1=this.target).pushUndoState?base1.pushUndoState(this.slot):void 0)},window.CaretMorph.prototype.ctrl=function(scanCodeOrCharCode,shiftKey){switch(scanCodeOrCharCode){case 97:case 65:return this.target.selectAll();case 90:return this.undo(shiftKey);case 123:return this.insert("{");case 125:return this.insert("}");case 91:return this.insert("[");case 93:return this.insert("]");case 64:return this.insert("@")}},window.CaretMorph.prototype.cmd=function(scanCode,shiftKey){switch(scanCode){case 65:return this.target.selectAll();case 90:return this.undo(shiftKey)}},window.CaretMorph.prototype.deleteRight=function(){var text;return""!==this.target.selection()?(this.gotoSlot(this.target.firstSelectedSlot()),this.target.deleteSelection()):(text=this.target.text,text=text.slice(0,this.slot)+text.slice(this.slot+1),this.target.setText(text,nil,nil))},window.CaretMorph.prototype.deleteLeft=function(){var text;return this.target.selection()?(this.gotoSlot(this.target.firstSelectedSlot()),this.target.deleteSelection()):(text=this.target.text,this.target.setText(text.substring(0,this.slot-1)+text.substr(this.slot),nil,nil),this.goLeft()),this.updateSelection(!1),this.gotoSlot(this.slot),this.updateSelection(!1),this.clearSelectionIfStartAndEndMeet(!1)},window.CaretMorph.prototype.inspectKeyEvent=function(event){return this.inform("Key pressed: "+String.fromCharCode(event.charCode)+"\n------------------------\ncharCode: "+event.charCode+"\nkeyCode: "+event.keyCode+"\naltKey: "+event.altKey+"\nctrlKey: "+event.ctrlKey+"\ncmdKey: "+event.metaKey)},window.CircleBoxMorph=function(){CircleBoxMorph.__super__.constructor.call(this),this.appearance=new CircleBoxyAppearance(this),this.silentRawSetExtent(new Point(20,100)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CircleBoxMorph,"name",{value:"CircleBoxMorph"}),window.CircleBoxMorph.instances=[],window.CircleBoxMorph.__super__=window.Widget.prototype,window.CircleBoxMorph=extend(window.CircleBoxMorph,window.Widget),window.CircleBoxMorph.prototype.colloquialName=function(){return"circle-box"},window.CircleBoxMorph.prototype.autoOrientation=function(){return this.height()>this.width()?"vertical":"horizontal"},window.CircleBoxyAppearance=function(morph){CircleBoxyAppearance.__super__.constructor.call(this,morph),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CircleBoxyAppearance,"name",{value:"CircleBoxyAppearance"}),window.CircleBoxyAppearance.instances=[],window.CircleBoxyAppearance.__super__=window.Appearance.prototype,window.CircleBoxyAppearance=extend(window.CircleBoxyAppearance,window.Appearance),window.CircleBoxyAppearance.prototype.autoOrientation=function(){return this.morph.height()>this.morph.width()?"vertical":"horizontal"},window.CircleBoxyAppearance.prototype.calculateKeyPoints=function(){var center1,center2,radius,rect,x,y;return"vertical"===this.autoOrientation()?(radius=this.morph.width()/2,x=this.morph.center().x,center1=new Point(x,this.morph.top()+radius).round(),center2=new Point(x,this.morph.bottom()-radius).round(),rect=this.morph.topLeft().add(new Point(0,radius)).corner(this.morph.bottomRight().subtract(new Point(0,radius)))):(radius=this.morph.height()/2,y=this.morph.center().y,center1=new Point(this.morph.left()+radius,y).round(),center2=new Point(this.morph.right()-radius,y).round(),rect=this.morph.topLeft().add(new Point(radius,0)).corner(this.morph.bottomRight().subtract(new Point(radius,0)))),[radius,center1,center2,rect]},window.CircleBoxyAppearance.prototype.isTransparentAt=function(aPoint){var center1,center2,radius,rect;return!this.morph.boundsContainPoint(aPoint)||([radius,center1,center2,rect]=this.calculateKeyPoints(),!(center1.distanceTo(aPoint)<radius||center2.distanceTo(aPoint)<radius||rect.containsPoint(aPoint)))},window.CircleBoxyAppearance.prototype.paintIntoAreaOrBlitFromBackBuffer=function(aContext,clippingRectangle,appliedShadow){var al,area,at,center1,center2,color,h,morphPosition,points,radius,rect,sl,st,w;return this.morph.preliminaryCheckNothingToDraw(clippingRectangle,aContext)?nil:([area,sl,st,al,at,w,h]=this.morph.calculateKeyValues(aContext,clippingRectangle),area.isNotEmpty()?w<1||h<1?nil:(aContext.save(),aContext.clipToRectangle(al,at,w,h),aContext.globalAlpha=(null!=appliedShadow?appliedShadow.alpha:1)*this.morph.alpha,aContext.scale(pixelRatio,pixelRatio),morphPosition=this.morph.position(),aContext.translate(morphPosition.x,morphPosition.y),[radius,center1,center2,rect]=this.calculateKeyPoints(),points=[center1.toLocalCoordinatesOf(this.morph),center2.toLocalCoordinatesOf(this.morph)],color=this.morph.color,aContext.fillStyle=null!=appliedShadow?"black":color.toString(),aContext.beginPath(),aContext.arc(points[0].x,points[0].y,radius,0,2*Math.PI),aContext.arc(points[1].x,points[1].y,radius,0,2*Math.PI),rect=rect.floor(),rect=rect.toLocalCoordinatesOf(this.morph),aContext.moveTo(rect.origin.x,rect.origin.y),aContext.lineTo(rect.origin.x+rect.width(),rect.origin.y),aContext.lineTo(rect.origin.x+rect.width(),rect.origin.y+rect.height()),aContext.lineTo(rect.origin.x,rect.origin.y+rect.height()),aContext.closePath(),aContext.fill(),aContext.restore(),this.paintHighlight(aContext,al,at,w)):void 0)},window.ClippingBoxMorph=function(){window.ClippingBoxMorph.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ClippingBoxMorph,"name",{value:"ClippingBoxMorph"}),window.ClippingBoxMorph.instances=[],window.ClippingBoxMorph.__super__=window.BoxMorph.prototype,window.ClippingBoxMorph=extend(window.ClippingBoxMorph,window.BoxMorph),window.ClippingBoxMorph.augmentWith(window.ClippingAtRectangularBoundsMixin,"ClippingBoxMorph"),window.SliderButtonMorph=function(){SliderButtonMorph.__super__.constructor.apply(this,arguments),this.isLockingToPanels=!1,this.color=this.normalColor.copy(),this.noticesTransparentClick=!0,this.alpha=.4,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SliderButtonMorph,"name",{value:"SliderButtonMorph"}),window.SliderButtonMorph.instances=[],window.SliderButtonMorph.__super__=window.CircleBoxMorph.prototype,window.SliderButtonMorph=extend(window.SliderButtonMorph,window.CircleBoxMorph),window.SliderButtonMorph.prototype.highlightColor=new Color(110,110,110),window.SliderButtonMorph.prototype.pressColor=new Color(100,100,100),window.SliderButtonMorph.prototype.normalColor=new Color(0,0,0),window.SliderButtonMorph.prototype.state=0,window.SliderButtonMorph.prototype.STATE_NORMAL=0,window.SliderButtonMorph.prototype.STATE_HIGHLIGHTED=1,window.SliderButtonMorph.prototype.STATE_PRESSED=2,window.SliderButtonMorph.prototype.detachesWhenDragged=function(){return!(this.parent instanceof SliderMorph)},window.SliderButtonMorph.prototype.reLayout=function(){var bh,bw,posX,posY,sliderValue;if(SliderButtonMorph.__super__.reLayout.call(this),sliderValue=this.parent.value,isNaN(sliderValue)&&(sliderValue=0),null!=this.parent)return"vertical"===this.parent.autoOrientation()?(bw=this.parent.width()-2,bh=Math.max(bw,Math.round(this.parent.height()*this.parent.ratio())),this.silentRawSetExtent(new Point(bw,bh)),posX=1,posY=Math.max(0,Math.min(Math.round((sliderValue-this.parent.start)*this.parent.unitSize()),this.parent.height()-this.height())),this.parent.smallestValueIsAtBottomEnd&&(posY=this.parent.height()-(posY+this.height()))):(bh=this.parent.height()-2,bw=Math.max(bh,Math.round(this.parent.width()*this.parent.ratio())),this.silentRawSetExtent(new Point(bw,bh)),posY=1,posX=Math.max(0,Math.min(Math.round((sliderValue-this.parent.start)*this.parent.unitSize()),this.parent.width()-this.width()))),this.silentFullRawMoveTo(new Point(posX,posY).add(this.parent.position())),this.notifyChildrenThatParentHasReLayouted()},window.SliderButtonMorph.prototype.grabsToParentWhenDragged=function(){return!(this.parent instanceof SliderMorph)&&SliderButtonMorph.__super__.grabsToParentWhenDragged.apply(this,arguments)},window.SliderButtonMorph.prototype.nonFloatDragging=function(nonFloatDragPositionWithinMorphAtStart,pos,deltaDragFromPreviousCall){var newPosition,newX,newY,oldButtonPosition;if(this.offset=pos.subtract(nonFloatDragPositionWithinMorphAtStart),world.hand.mouseButton&&this.visibleBasedOnIsVisibleProperty()&&!this.isCollapsed()&&(oldButtonPosition=this.position(),"vertical"===this.parent.autoOrientation()?(newX=this.left(),newY=Math.max(Math.min(this.offset.y,this.parent.bottom()-this.height()),this.parent.top())):(newY=this.top(),newX=Math.max(Math.min(this.offset.x,this.parent.right()-this.width()),this.parent.left())),newPosition=new Point(newX,newY),!oldButtonPosition.eq(newPosition)))return this.fullRawMoveTo(newPosition),this.parent.updateValue()},window.SliderButtonMorph.prototype.endOfNonFloatDrag=function(){if(this.state!==this.STATE_NORMAL)return this.state=this.STATE_NORMAL,this.color=this.normalColor.copy(),this.changed()},window.SliderButtonMorph.prototype.setHiglightedColor=function(){if(this.state!==this.STATE_HIGHLIGHTED)return this.state=this.STATE_HIGHLIGHTED,this.color=this.highlightColor.copy(),this.changed()},window.SliderButtonMorph.prototype.setNormalColor=function(){if(this.state!==this.STATE_NORMAL)return this.state=this.STATE_NORMAL,this.color=this.normalColor.copy(),this.changed()},window.SliderButtonMorph.prototype.setPressedColor=function(){if(this.state!==this.STATE_PRESSED)return this.state=this.STATE_PRESSED,this.color=this.pressColor.copy(),this.changed()},window.SliderButtonMorph.prototype.mouseMove=function(){if(this.state!==this.STATE_PRESSED&&!world.hand.draggingSomething())return this.setHiglightedColor()},window.SliderButtonMorph.prototype.mouseEnter=function(){if(!world.hand.draggingSomething())return this.setHiglightedColor()},window.SliderButtonMorph.prototype.mouseLeave=function(){if(!world.hand.draggingSomething())return this.setNormalColor()},window.SliderButtonMorph.prototype.mouseDownLeft=function(pos){return this.bringToForeground(),this.setPressedColor()},window.SliderButtonMorph.prototype.mouseClickLeft=function(){return this.bringToForeground(),this.setHiglightedColor()},window.SliderMorph=function(start=1,stop=100,value=50,size=10,color=new Color(0,0,0),smallestValueIsAtBottomEnd=!1){this.start=start,this.stop=stop,this.value=value,this.size=size,this.color=color,this.smallestValueIsAtBottomEnd=smallestValueIsAtBottomEnd,this.button=new SliderButtonMorph,SliderMorph.__super__.constructor.call(this,this.alpha=.1),this.silentRawSetExtent(new Point(20,100)),this.silentAdd(this.button),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SliderMorph,"name",{value:"SliderMorph"}),window.SliderMorph.instances=[],window.SliderMorph.__super__=window.CircleBoxMorph.prototype,window.SliderMorph=extend(window.SliderMorph,window.CircleBoxMorph),window.SliderMorph.augmentWith(window.ControllerMixin,"SliderMorph"),window.SliderMorph.prototype.target=nil,window.SliderMorph.prototype.action=nil,window.SliderMorph.prototype.start=nil,window.SliderMorph.prototype.stop=nil,window.SliderMorph.prototype.value=nil,window.SliderMorph.prototype.size=nil,window.SliderMorph.prototype.offset=nil,window.SliderMorph.prototype.button=nil,window.SliderMorph.prototype.argumentToAction=nil,window.SliderMorph.prototype.smallestValueIsAtBottomEnd=!1,window.SliderMorph.prototype.idealRatioWidthToHeight=.25,window.SliderMorph.prototype.colloquialName=function(){return"slider"},window.SliderMorph.prototype.initialiseDefaultVerticalStackLayoutSpec=function(){if(!(this.layoutSpecDetails instanceof VerticalStackLayoutSpec)||null==this.layoutSpecDetails)return this.layoutSpecDetails=new VerticalStackLayoutSpec(0)},window.SliderMorph.prototype.iHaveBeenAddedTo=function(whereTo,beingDropped){return this.reLayout(),null!=this.button&&this.button instanceof SliderButtonMorph&&this.button.reLayout(),this.changed()},window.SliderMorph.prototype.rawSetExtent=function(aPoint){if(!aPoint.eq(this.extent()))return this.breakNumberOfRawMovesAndResizesCaches(),SliderMorph.__super__.rawSetExtent.call(this,aPoint),this.button.reLayout()},window.SliderMorph.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return this.layoutSpecDetails=new WindowContentLayoutSpec(PreferredSize.THIS_ONE_I_HAVE_NOW,PreferredSize.THIS_ONE_I_HAVE_NOW,0),this.layoutSpecDetails.resizerCanOverlapContents=!1},window.SliderMorph.prototype.rangeSize=function(){return this.stop-this.start},window.SliderMorph.prototype.ratio=function(){return this.size/this.rangeSize()},window.SliderMorph.prototype.unitSize=function(){return null!=this.button&&this.button instanceof SliderButtonMorph?"vertical"===this.autoOrientation()?(this.height()-this.button.height())/this.rangeSize():(this.width()-this.button.width())/this.rangeSize():1},window.SliderMorph.prototype.setValue=function(newvalue,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.value=Number(newvalue),this.updateTarget(),this.reLayout(),this.button.reLayout(),this.changed()},window.SliderMorph.prototype.updateValue=function(){var newvalue,relPos;if(relPos="vertical"===this.autoOrientation()?this.smallestValueIsAtBottomEnd?this.bottom()-this.button.bottom():this.button.top()-this.top():this.button.left()-this.left(),newvalue=Math.round(relPos/this.unitSize()+this.start),this.value!==newvalue)return this.setValue(newvalue,nil,nil)},window.SliderMorph.prototype.bang=function(newvalue,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.updateTarget()},window.SliderMorph.prototype.updateTarget=function(){this.action&&""!==this.action&&this.target[this.action].call(this.target,this.value,this.argumentToAction,this.connectionsCalculationToken)},window.SliderMorph.prototype.reactToTargetConnection=function(){return this.updateTarget()},window.SliderMorph.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){return SliderMorph.__super__.addMorphSpecificMenuEntries.apply(this,arguments),menu.addLine(),menu.addMenuItem("show value",!0,this,"showValue","display a dialog box\nshowing the selected number"),menu.addMenuItem("floor...",!0,this,function(){return this.prompt(menu.title+"\nfloor:",this.setStart,this.start.toString(),nil,0,this.stop-this.size,!0)},"set the minimum value\nwhich can be selected"),menu.addMenuItem("ceiling...",!0,this,function(){return this.prompt(menu.title+"\nceiling:",this.setStop,this.stop.toString(),nil,this.start+this.size,100*this.size,!0)},"set the maximum value\nwhich can be selected"),menu.addMenuItem("button size...",!0,this,function(){return this.prompt(menu.title+"\nbutton size:",this.setSize,this.size.toString(),nil,1,this.stop-this.start,!0)},"set the range\ncovered by\nthe slider button"),menu.addLine(),menu.addMenuItem("set target",!0,this,"openTargetSelector","select another morph\nwhose numerical property\nwill be controlled by this one")},window.SliderMorph.prototype.showValue=function(){return this.inform(this.value)},window.SliderMorph.prototype.userSetStart=function(num){return this.start=Math.max(num,this.stop)},window.SliderMorph.prototype.updateSpecs=function(start,stop,value,size){return null!=start&&(this.start=start),null!=stop&&(this.stop=stop),null!=value&&(this.value=value),null!=size&&(this.size=size),this.reLayout(),this.button.reLayout(),this.parent!==this.target?this.changed():this.parent.fullChanged()},window.SliderMorph.prototype.setStart=function(numOrMorphGivingNum){var newStart,num;return"number"==typeof(num=null!=numOrMorphGivingNum.getValue?numOrMorphGivingNum.getValue():numOrMorphGivingNum)?this.start=Math.min(Math.max(num,0),this.stop-this.size):(newStart=parseFloat(num),isNaN(newStart)||(this.start=Math.min(Math.max(newStart,0),this.stop-this.size))),this.value=Math.max(this.value,this.start),this.updateTarget(),this.reLayout(),this.button.reLayout(),this.changed()},window.SliderMorph.prototype.setStop=function(numOrMorphGivingNum){var newStop,num;return"number"==typeof(num=null!=numOrMorphGivingNum.getValue?numOrMorphGivingNum.getValue():numOrMorphGivingNum)?this.stop=Math.max(num,this.start+this.size):(newStop=parseFloat(num),isNaN(newStop)||(this.stop=Math.max(newStop,this.start+this.size))),this.value=Math.min(this.value,this.stop),this.updateTarget(),this.reLayout(),this.button.reLayout(),this.changed()},window.SliderMorph.prototype.mouseDownLeft=function(pos){return this.button.parent===this&&(this.parent instanceof ScrollPanelWdgt||this.parent instanceof PromptMorph)?(world.hand.nonFloatDragMorphFarAwayToHere(this.button,pos),this.button.setPressedColor()):this.escalateEvent("mouseDownLeft",pos)},window.SliderMorph.prototype.setSize=function(sizeOrMorphGivingSize){var newSize,size;return"number"==typeof(size=null!=sizeOrMorphGivingSize.getValue?sizeOrMorphGivingSize.getValue():sizeOrMorphGivingSize)?this.size=Math.min(Math.max(size,1),this.stop-this.start):(newSize=parseFloat(size),isNaN(newSize)||(this.size=Math.min(Math.max(newSize,1),this.stop-this.start))),this.value=Math.min(this.value,this.stop-this.size),this.reLayout(),this.button.reLayout(),this.changed()},window.SliderMorph.prototype.openTargetPropertySelector=function(ignored,ignored2,theTarget){var functionNamesStrings,i,j,menu,menuEntriesStrings,ref;for([menuEntriesStrings,functionNamesStrings]=theTarget.numericalSetters(),menu=new MenuMorph(this,!1,this,!0,!0,"choose target property:"),i=j=0,ref=menuEntriesStrings.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j)menu.addMenuItem(menuEntriesStrings[i],!0,this,"setTargetAndActionWithOnesPickedFromMenu",nil,nil,nil,nil,nil,theTarget,functionNamesStrings[i]);return 0===menuEntriesStrings.length&&(menu=new MenuMorph(this,!1,this,!0,!0,"no target properties available")),menu.popUpAtHand()},window.SliderMorph.prototype.stringSetters=function(menuEntriesStrings,functionNamesStrings){return[menuEntriesStrings,functionNamesStrings]=SliderMorph.__super__.stringSetters.call(this,menuEntriesStrings,functionNamesStrings),menuEntriesStrings.push("bang!","value"),functionNamesStrings.push("bang","setValue"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.SliderMorph.prototype.numericalSetters=function(menuEntriesStrings,functionNamesStrings){return[menuEntriesStrings,functionNamesStrings]=SliderMorph.__super__.numericalSetters.call(this,menuEntriesStrings,functionNamesStrings),menuEntriesStrings.push("bang!","value","start","stop","size"),functionNamesStrings.push("bang","setValue","setStart","setStop","setSize"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.SliderMorph.prototype.colorSetters=function(menuEntriesStrings,functionNamesStrings){return[menuEntriesStrings,functionNamesStrings]=SliderMorph.__super__.colorSetters.call(this,menuEntriesStrings,functionNamesStrings),menuEntriesStrings.push("bang!"),functionNamesStrings.push("bang"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.StringFieldMorph=function(defaultContents="",minTextWidth=100,fontSize=12,fontStyle="sans-serif",isBold=!1,isItalic=!1,isNumeric=!1){this.defaultContents=defaultContents,this.minTextWidth=minTextWidth,this.fontSize=fontSize,this.fontStyle=fontStyle,this.isBold=isBold,this.isItalic=isItalic,this.isNumeric=isNumeric,StringFieldMorph.__super__.constructor.call(this),this.color=new Color(255,255,255),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.StringFieldMorph,"name",{value:"StringFieldMorph"}),window.StringFieldMorph.instances=[],window.StringFieldMorph.__super__=window.PanelWdgt.prototype,window.StringFieldMorph=extend(window.StringFieldMorph,window.PanelWdgt),window.StringFieldMorph.prototype.defaultContents=nil,window.StringFieldMorph.prototype.minTextWidth=nil,window.StringFieldMorph.prototype.fontSize=nil,window.StringFieldMorph.prototype.fontStyle=nil,window.StringFieldMorph.prototype.isBold=nil,window.StringFieldMorph.prototype.isItalic=nil,window.StringFieldMorph.prototype.isNumeric=nil,window.StringFieldMorph.prototype.text=nil,window.StringFieldMorph.prototype.isEditable=!0,window.StringFieldMorph.prototype.rawSetWidth=function(newWidth){return StringFieldMorph.__super__.rawSetWidth.apply(this,arguments),this.text.rawSetWidth(newWidth)},window.StringFieldMorph.prototype.calculateAndUpdateExtent=function(){var text,txt;return txt=this.text?this.getValue():this.defaultContents,text=new StringMorph(txt,this.fontSize,this.fontStyle,this.isBold,this.isItalic,this.isNumeric),this.rawSetWidth(Math.max(this.minTextWidth,text.width()))},window.StringFieldMorph.prototype.reLayout=function(){var txt;return StringFieldMorph.__super__.reLayout.call(this),txt=this.text?this.getValue():this.defaultContents,null==this.text&&(this.text=new StringMorph(txt,this.fontSize,this.fontStyle,this.isBold,this.isItalic,this.isNumeric),this.text.isNumeric=this.isNumeric,this.text.isEditable=this.isEditable,this.text.enableSelecting(),this.add(this.text)),this.text.fullRawMoveTo(this.position()),this.silentRawSetExtent(new Point(Math.max(this.width(),this.minTextWidth),this.text.height())),this.notifyChildrenThatParentHasReLayouted()},window.StringFieldMorph.prototype.getValue=function(){return this.text.text},window.StringFieldMorph.prototype.mouseClickLeft=function(pos){return this.bringToForeground(),this.isEditable?this.text.edit():this.escalateEvent("mouseClickLeft",pos)},window.StringFieldWdgt2=function(defaultContents="",minTextWidth=100,fontSize=12,fontStyle="sans-serif",isBold=!1,isItalic=!1,isNumeric=!1){this.defaultContents=defaultContents,this.minTextWidth=minTextWidth,this.fontSize=fontSize,this.fontStyle=fontStyle,this.isBold=isBold,this.isItalic=isItalic,this.isNumeric=isNumeric,StringFieldWdgt2.__super__.constructor.call(this),this.color=new Color(255,255,255),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.StringFieldWdgt2,"name",{value:"StringFieldWdgt2"}),window.StringFieldWdgt2.instances=[],window.StringFieldWdgt2.__super__=window.PanelWdgt.prototype,window.StringFieldWdgt2=extend(window.StringFieldWdgt2,window.PanelWdgt),window.StringFieldWdgt2.prototype.defaultContents=nil;window.StringFieldWdgt2.prototype.minTextWidth=nil,window.StringFieldWdgt2.prototype.fontSize=nil,window.StringFieldWdgt2.prototype.fontStyle=nil,window.StringFieldWdgt2.prototype.isBold=nil,window.StringFieldWdgt2.prototype.isItalic=nil,window.StringFieldWdgt2.prototype.isNumeric=nil,window.StringFieldWdgt2.prototype.text=nil,window.StringFieldWdgt2.prototype.isEditable=!0,window.StringFieldWdgt2.prototype.rawSetWidth=function(newWidth){return StringFieldWdgt2.__super__.rawSetWidth.apply(this,arguments),this.text.rawSetWidth(300)},window.StringFieldWdgt2.prototype.calculateAndUpdateExtent=function(){var text,txt;return txt=this.text?this.getValue():this.defaultContents,text=new StringMorph2(txt,this.fontSize,this.fontStyle,this.isBold,this.isItalic,!1,this.isNumeric),text.fittingSpecWhenBoundsTooSmall=FittingSpecTextInSmallerBounds.SCALEDOWN,this.rawSetWidth(Math.max(this.minTextWidth,text.width()))},window.StringFieldWdgt2.prototype.reLayout=function(){var txt;return StringFieldWdgt2.__super__.reLayout.call(this),txt=this.text?this.getValue():this.defaultContents,null==this.text&&(this.text=new StringMorph2(txt,this.fontSize,this.fontStyle,this.isBold,this.isItalic,!1,this.isNumeric),this.text.isNumeric=this.isNumeric,this.text.isEditable=this.isEditable,this.text.enableSelecting(),this.text.fittingSpecWhenBoundsTooSmall=FittingSpecTextInSmallerBounds.SCALEDOWN,this.add(this.text)),this.text.fullRawMoveTo(this.position().add(new Point(5,2))),this.text.rawSetExtent(new Point(300,18)),this.silentRawSetExtent(new Point(this.width(),18)),this.notifyChildrenThatParentHasReLayouted()},window.StringFieldWdgt2.prototype.getValue=function(){return this.text.text},window.StringFieldWdgt2.prototype.mouseClickLeft=function(pos){return this.bringToForeground(),this.isEditable?this.text.edit():this.escalateEvent("mouseClickLeft",pos)},window.StringMorph=function(text1=(""===text?"":"StringMorph"),fontSize=12,fontStyle="sans-serif",isBold=!1,isItalic=!1,isNumeric=!1,color=new Color(0,0,0),fontName=""){this.text=text1,this.fontSize=fontSize,this.fontStyle=fontStyle,this.isBold=isBold,this.isItalic=isItalic,this.isNumeric=isNumeric,this.color=color,this.fontName=fontName,StringMorph.__super__.constructor.call(this),this.noticesTransparentClick=!0,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.StringMorph,"name",{value:"StringMorph"}),window.StringMorph.instances=[],window.StringMorph.__super__=window.Widget.prototype,window.StringMorph=extend(window.StringMorph,window.Widget),window.StringMorph.augmentWith(window.BackBufferMixin,"StringMorph"),window.StringMorph.prototype.text="",window.StringMorph.prototype.fontSize=nil,window.StringMorph.prototype.fontName=nil,window.StringMorph.prototype.fontStyle=nil,window.StringMorph.prototype.isBold=nil,window.StringMorph.prototype.isItalic=nil,window.StringMorph.prototype.isEditable=!1,window.StringMorph.prototype.isNumeric=nil,window.StringMorph.prototype.isPassword=!1,window.StringMorph.prototype.isShowingBlanks=!1,window.StringMorph.prototype.blanksColor=new Color(180,140,140),window.StringMorph.prototype.isScrollable=!0,window.StringMorph.prototype.currentlySelecting=!1,window.StringMorph.prototype.startMark=nil,window.StringMorph.prototype.endMark=nil,window.StringMorph.prototype.markedTextColor=new Color(255,255,255),window.StringMorph.prototype.markedBackgoundColor=new Color(60,60,120),window.StringMorph.prototype.setText=function(theTextContent,stringFieldMorph,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,null!=stringFieldMorph&&(theTextContent=stringFieldMorph.text.text),theTextContent+="",this.text!==theTextContent?(this.text=theTextContent,this.reLayout(),this.changed()):void 0},window.StringMorph.prototype.actualFontSizeUsedInRendering=function(){return this.fontSize},window.StringMorph.prototype.toString=function(){var firstPart;return firstPart=StringMorph.__super__.toString.call(this),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.hidingOfMorphsContentExtractInLabels?firstPart:firstPart+' ("'+this.text.slice(0,30).replace(/(?:\r\n|\r|\n)/g,"↵")+'...")'},window.StringMorph.prototype.getTextDescription=function(){return null!=this.textDescription?this.textDescription+" (adhoc description of string)":this.text.replace(/#\d*/,"").slice(0,30)+" (content of string)"},window.StringMorph.prototype.password=function(letter,length){var ans,j,ref;for(ans="",j=0,ref=length;0<=ref?j<ref:j>ref;0<=ref?++j:--j)ans+=letter;return ans},window.StringMorph.prototype.buildCanvasFontProperty=function(){var font;return font="",this.isBold&&(font+="bold "),this.isItalic&&(font+="italic "),font+this.fontSize+"px "+(this.fontName?this.fontName+", ":"")+this.fontStyle},window.StringMorph.prototype.widthOfText=function(text=this.text){return text=this.isPassword?this.password("*",text.length):text,world.canvasContextForTextMeasurements.font=this.buildCanvasFontProperty(),Math.ceil(Math.max(world.canvasContextForTextMeasurements.measureText(text).width,1))},window.StringMorph.prototype.reLayout=function(){var width;return StringMorph.__super__.reLayout.call(this),width=this.widthOfText(this.text),this.silentRawSetExtent(new Point(width,fontHeight(this.fontSize))),this.notifyChildrenThatParentHasReLayouted()},window.StringMorph.prototype.reflowText=function(){return this.reLayout()},window.StringMorph.prototype.createRefreshOrGetBackBuffer=function(){var backBuffer,backBufferContext,c,cacheEntry,cacheHit,cacheKey,i,j,p,ref,ref1,text,width;if(cacheKey=this.extent().toString()+"-"+this.isPassword+"-"+this.isShowingBlanks+"-"+this.buildCanvasFontProperty()+"-"+this.alignment+"-"+this.color.toString()+"-"+hashCode(this.text)+"-"+this.startMark+"-"+this.endMark+"-"+this.markedBackgoundColor.toString(),null!=(cacheHit=world.cacheForImmutableBackBuffers.get(cacheKey)))return cacheHit;for(text=this.isPassword?this.password("*",this.text.length):this.text,width=this.widthOfText(this.text),(backBufferContext=(backBuffer=newCanvas(new Point(width,this.height()).scaleBy(pixelRatio))).getContext("2d")).scale(pixelRatio,pixelRatio),backBufferContext.font=this.buildCanvasFontProperty(),backBufferContext.textAlign="left",backBufferContext.textBaseline="bottom",backBufferContext.fillStyle=this.color.toString(),this.isShowingBlanks?this.renderWithBlanks(backBufferContext,0,fontHeight(this.fontSize)):backBufferContext.fillText(text,0,fontHeight(this.fontSize)),i=j=ref=Math.min(this.startMark,this.endMark),ref1=Math.max(this.startMark,this.endMark);ref<=ref1?j<ref1:j>ref1;i=ref<=ref1?++j:--j)p=this.slotCoordinates(i).subtract(this.position()),c=text.charAt(i),backBufferContext.fillStyle=this.markedBackgoundColor.toString(),backBufferContext.fillRect(p.x,p.y,Math.ceil(backBufferContext.measureText(c).width)+1,fontHeight(this.fontSize)),backBufferContext.fillStyle=this.markedTextColor.toString(),backBufferContext.fillText(c,p.x,fontHeight(this.fontSize));return cacheEntry=[backBuffer,backBufferContext],world.cacheForImmutableBackBuffers.set(cacheKey,cacheEntry),cacheEntry},window.StringMorph.prototype.renderWithBlanks=function(context,x=0,y){var blank,ctx,drawBlank,isFirst,space,words;return drawBlank=function(){return context.drawImage(blank,Math.round(x),0),x+=space},space=Math.ceil(context.measureText(" ").width),blank=newCanvas(new Point(space,this.height()).scaleBy(pixelRatio)),ctx=blank.getContext("2d"),words=this.text.split(" "),isFirst=!0,ctx.fillStyle=this.blanksColor.toString(),ctx.arc(space/2,blank.height/2,space/2,degreesToRadians(0),degreesToRadians(360)),ctx.fill(),words.forEach(function(word){if(isFirst||drawBlank(),isFirst=!1,""!==word)return context.fillText(word,x,y),x+=Math.ceil(context.measureText(word).width)})},window.StringMorph.prototype.slotCoordinates=function(slot){var checkedSlot,text,x,xOffset,y;return text=this.isPassword?this.password("*",this.text.length):this.text,checkedSlot=Math.min(Math.max(slot,0),text.length),slot!==checkedSlot&&alert("something wrong - slot is out of range"),slot=checkedSlot,xOffset=Math.ceil(this.widthOfText(text.substring(0,slot))),x=this.left()+xOffset,y=this.top(),new Point(x,y)},window.StringMorph.prototype.slotAt=function(aPoint){var charX,idx,text;for(text=this.isPassword?this.password("*",this.text.length):this.text,idx=0,charX=0;aPoint.x-this.left()>charX;)if(charX+=Math.ceil(this.widthOfText(text[idx])),(idx+=1)===text.length&&Math.ceil(this.widthOfText(text))-Math.ceil(this.widthOfText(text[idx-1]))/2<aPoint.x-this.left())return idx;return idx-1},window.StringMorph.prototype.upFrom=function(slot){return this.startOfLine()},window.StringMorph.prototype.downFrom=function(slot){return this.endOfLine()},window.StringMorph.prototype.startOfLine=function(){return 0},window.StringMorph.prototype.endOfLine=function(){return this.text.length},window.StringMorph.prototype.fontSizePopup=function(menuItem){return this.prompt(menuItem.parent.title+"\nfont\nsize:",this,"setFontSize",this.fontSize.toString(),nil,6,500,!0)},window.StringMorph.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){return StringMorph.__super__.addMorphSpecificMenuEntries.apply(this,arguments),menu.addLine(),menu.addMenuItem("edit",!0,this,"edit"),menu.addMenuItem("font size...",!0,this,"fontSizePopup","set this String's\nfont point size"),"serif"!==this.fontStyle&&menu.addMenuItem("serif",!0,this,"setSerif"),"sans-serif"!==this.fontStyle&&menu.addMenuItem("sans-serif",!0,this,"setSansSerif"),this.isBold?menu.addMenuItem("normal weight",!0,this,"toggleWeight"):menu.addMenuItem("bold",!0,this,"toggleWeight"),this.isItalic?menu.addMenuItem("normal style",!0,this,"toggleItalic"):menu.addMenuItem("italic",!0,this,"toggleItalic"),this.isShowingBlanks?menu.addMenuItem("hide blanks",!0,this,"toggleShowBlanks"):menu.addMenuItem("show blanks",!0,this,"toggleShowBlanks"),this.isPassword?menu.addMenuItem("show characters",!0,this,"toggleIsPassword"):menu.addMenuItem("hide characters",!0,this,"toggleIsPassword")},window.StringMorph.prototype.toggleShowBlanks=function(){return this.isShowingBlanks=!this.isShowingBlanks,this.reLayout(),this.changed()},window.StringMorph.prototype.toggleWeight=function(){return this.isBold=!this.isBold,this.reLayout(),this.changed()},window.StringMorph.prototype.toggleItalic=function(){return this.isItalic=!this.isItalic,this.reLayout(),this.changed()},window.StringMorph.prototype.toggleIsPassword=function(){return this.isPassword=!this.isPassword,this.reLayout(),this.changed()},window.StringMorph.prototype.setSerif=function(){return this.fontStyle="serif",this.reLayout(),this.changed()},window.StringMorph.prototype.setSansSerif=function(){return this.fontStyle="sans-serif",this.reLayout(),this.changed()},window.StringMorph.prototype.setFontSize=function(sizeOrMorphGivingSize,morphGivingSize){var newSize,size;return"number"==typeof(size=null!=(null!=morphGivingSize?morphGivingSize.getValue:void 0)?morphGivingSize.getValue():sizeOrMorphGivingSize)?this.fontSize=Math.round(Math.min(Math.max(size,4),500)):(newSize=parseFloat(size),isNaN(newSize)||(this.fontSize=Math.round(Math.min(Math.max(newSize,4),500)))),this.reLayout(),this.changed()},window.StringMorph.prototype.numericalSetters=function(menuEntriesStrings,functionNamesStrings){return[menuEntriesStrings,functionNamesStrings]=StringMorph.__super__.numericalSetters.call(this,menuEntriesStrings,functionNamesStrings),menuEntriesStrings.push("alpha 0-100","font size","text"),functionNamesStrings.push("setAlphaScaled","setFontSize","setText"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.StringMorph.prototype.edit=function(){return world.edit(this)},window.StringMorph.prototype.selection=function(){var start,stop;return start=Math.min(this.startMark,this.endMark),stop=Math.max(this.startMark,this.endMark),this.text.slice(start,stop)},window.StringMorph.prototype.firstSelectedSlot=function(){return Math.min(this.startMark,this.endMark),null==this.startMark||null==this.endMark?nil:Math.min(this.startMark,this.endMark)},window.StringMorph.prototype.lastSelectedSlot=function(){return null==this.startMark||null==this.endMark?nil:Math.max(this.startMark,this.endMark)},window.StringMorph.prototype.clearSelection=function(){return this.currentlySelecting=!1,this.startMark=nil,this.endMark=nil,this.changed()},window.StringMorph.prototype.setEndMark=function(slot){return this.endMark=slot,this.changed()},window.StringMorph.prototype.selectBetween=function(start,end){return this.startMark=Math.min(start,end),this.endMark=Math.max(start,end),this.changed()},window.StringMorph.prototype.deleteSelection=function(){var start,stop,text;return text=this.text,start=Math.min(this.startMark,this.endMark),stop=Math.max(this.startMark,this.endMark),this.text=text.slice(0,start)+text.slice(stop),this.changed(),this.clearSelection()},window.StringMorph.prototype.selectAll=function(){return this.startMark=0,this.endMark=this.text.length,this.changed()},window.StringMorph.prototype.mouseClickLeft=function(pos){var caret;return this.bringToForeground(),caret=world.caret,this.isEditable?(this.currentlySelecting||this.edit(),caret&&caret.gotoPos(pos),world.caret.gotoPos(pos),this.currentlySelecting=!0):this.escalateEvent("mouseClickLeft",pos)},window.StringMorph.prototype.enableSelecting=function(){return this.mouseDownLeft=function(pos){if(this.clearSelection(),this.isEditable&&!this.grabsToParentWhenDragged())return this.edit(),world.caret.gotoPos(pos),this.startMark=this.slotAt(pos),this.endMark=this.startMark,this.currentlySelecting=!0},this.mouseMove=function(pos){var newMark;return this.isEditable&&this.currentlySelecting?(newMark=this.slotAt(pos))!==this.endMark?(this.endMark=newMark,this.changed()):void 0:this.disableSelecting()}},window.StringMorph.prototype.disableSelecting=function(){return this.clearSelection(),this.mouseDownLeft=StringMorph.prototype.mouseDownLeft,delete this.mouseMove},window.TextMorph=function(text="TextMorph",fontSize=12,fontStyle="sans-serif",isBold=!1,isItalic=!1,alignment="left",maxTextWidth=0,fontName="",shadowOffset=new Point(0,0),shadowColor=nil){this.text=text,this.fontSize=fontSize,this.fontStyle=fontStyle,this.isBold=isBold,this.isItalic=isItalic,this.alignment=alignment,this.maxTextWidth=maxTextWidth,this.fontName=fontName,this.shadowOffset=shadowOffset,this.shadowColor=shadowColor,TextMorph.__super__.constructor.call(this,this.text,this.fontSize,this.fontStyle,this.isBold,this.isItalic,nil,this.shadowOffset,this.shadowColor,nil,this.fontName),this.markedTextColor=new Color(255,255,255),this.markedBackgoundColor=new Color(60,60,120),this.color=new Color(0,0,0),this.noticesTransparentClick=!0,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TextMorph,"name",{value:"TextMorph"}),window.TextMorph.instances=[],window.TextMorph.__super__=window.StringMorph.prototype,window.TextMorph=extend(window.TextMorph,window.StringMorph),window.TextMorph.prototype.words=[],window.TextMorph.prototype.lines=[],window.TextMorph.prototype.lineSlots=[],window.TextMorph.prototype.alignment=nil,window.TextMorph.prototype.maxTextWidth=nil,window.TextMorph.prototype.maxLineWidth=0,window.TextMorph.prototype.backgroundColor=nil,window.TextMorph.prototype.receiver=nil,window.TextMorph.prototype.breakTextIntoLines=function(){var canvas,context,currentLine,paragraphs,slot;return paragraphs=this.text.split("\n"),canvas=newCanvas(),(context=canvas.getContext("2d")).scale(pixelRatio,pixelRatio),currentLine="",slot=0,context.font=this.buildCanvasFontProperty(),this.maxLineWidth=0,this.lines=[],this.lineSlots=[0],this.words=[],paragraphs.forEach(p=>(this.words=this.words.concat(p.split(" ")),this.words.push("\n"))),this.words.forEach(word=>{var lineForOverflowTest;return"\n"===word?(this.lines.push(currentLine),this.lineSlots.push(slot),this.maxLineWidth=Math.max(this.maxLineWidth,Math.ceil(context.measureText(currentLine).width)),currentLine=""):(this.maxTextWidth>0?(lineForOverflowTest=currentLine+word+" ",Math.ceil(context.measureText(lineForOverflowTest).width)>this.maxTextWidth?(this.lines.push(currentLine),this.lineSlots.push(slot),this.maxLineWidth=Math.max(this.maxLineWidth,Math.ceil(context.measureText(currentLine).width)),currentLine=word+" "):currentLine=lineForOverflowTest):currentLine=currentLine+word+" ",slot+=word.length+1)})},window.TextMorph.prototype.reLayout=function(){var ANimage,context,height,shadowHeight,shadowWidth;return TextMorph.__super__.reLayout.call(this),ANimage=newCanvas(),context=ANimage.getContext("2d"),context.font=this.buildCanvasFontProperty(),this.breakTextIntoLines(),shadowWidth=Math.abs(this.shadowOffset.x),shadowHeight=Math.abs(this.shadowOffset.y),height=this.lines.length*(Math.ceil(fontHeight(this.fontSize))+shadowHeight),0===this.maxTextWidth?this.silentRawSetExtent(new Point(this.maxLineWidth+shadowWidth,height)):this.silentRawSetExtent(new Point(this.maxTextWidth+shadowWidth,height)),this.notifyChildrenThatParentHasReLayouted()},window.TextMorph.prototype.createRefreshOrGetBackBuffer=function(){var backBuffer,backBufferContext,c,cacheEntry,cacheHit,cacheKey,i,j,k,l,len,len1,line,offx,offy,p,ref,ref1,ref2,ref3,ref4,shadowHeight,shadowWidth,width,x,y;if(cacheKey=this.extent().toString()+"-"+this.buildCanvasFontProperty()+"-"+this.alignment+"-"+(null!=(ref=this.backgroundColor)?ref.toString():void 0)+"-"+this.color.toString()+"-"+hashCode(this.text)+"-"+this.startMark+"-"+this.endMark+"-"+this.markedBackgoundColor.toString(),null!=(cacheHit=world.cacheForImmutableBackBuffers.get(cacheKey)))return cacheHit;if(backBuffer=newCanvas(),backBufferContext=backBuffer.getContext("2d"),shadowWidth=Math.abs(this.shadowOffset.x),shadowHeight=Math.abs(this.shadowOffset.y),backBuffer.width=this.width()*pixelRatio,backBuffer.height=this.height()*pixelRatio,backBufferContext.scale(pixelRatio,pixelRatio),backBufferContext.font=this.buildCanvasFontProperty(),backBufferContext.textAlign="left",backBufferContext.textBaseline="bottom",this.backgroundColor&&(backBufferContext.fillStyle=this.backgroundColor.toString(),backBufferContext.fillRect(0,0,this.width(),this.height())),this.shadowColor)for(offx=Math.max(this.shadowOffset.x,0),offy=Math.max(this.shadowOffset.y,0),backBufferContext.fillStyle=this.shadowColor.toString(),i=0,j=0,len=(ref1=this.lines).length;j<len;j++)line=ref1[j],width=Math.ceil(backBufferContext.measureText(line).width)+shadowWidth,x=function(){switch(this.alignment){case"right":return this.width()-width;case"center":return(this.width()-width)/2;default:return 0}}.call(this),y=(i+1)*(Math.ceil(fontHeight(this.fontSize))+shadowHeight)-shadowHeight,i++,backBufferContext.fillText(line,x+offx,y+offy);for(offx=Math.abs(Math.min(this.shadowOffset.x,0)),offy=Math.abs(Math.min(this.shadowOffset.y,0)),backBufferContext.fillStyle=this.color.toString(),i=0,k=0,len1=(ref2=this.lines).length;k<len1;k++)line=ref2[k],width=Math.ceil(backBufferContext.measureText(line).width)+shadowWidth,x=function(){switch(this.alignment){case"right":return this.width()-width;case"center":return(this.width()-width)/2;default:return 0}}.call(this),y=(i+1)*(Math.ceil(fontHeight(this.fontSize))+shadowHeight)-shadowHeight,i++,backBufferContext.fillText(line,x+offx,y+offy);for(i=l=ref3=Math.min(this.startMark,this.endMark),ref4=Math.max(this.startMark,this.endMark);ref3<=ref4?l<ref4:l>ref4;i=ref3<=ref4?++l:--l)p=this.slotCoordinates(i).subtract(this.position()),c=this.text.charAt(i),backBufferContext.fillStyle=this.markedBackgoundColor.toString(),backBufferContext.fillRect(p.x,p.y,Math.ceil(backBufferContext.measureText(c).width)+1,Math.ceil(fontHeight(this.fontSize))),backBufferContext.fillStyle=this.markedTextColor.toString(),backBufferContext.fillText(c,p.x,p.y+Math.ceil(fontHeight(this.fontSize)));return cacheEntry=[backBuffer,backBufferContext],world.cacheForImmutableBackBuffers.set(cacheKey,cacheEntry),cacheEntry},window.TextMorph.prototype.rawSetExtent=function(aPoint){if(!aPoint.eq(this.extent()))return this.breakNumberOfRawMovesAndResizesCaches(),this.maxTextWidth=Math.max(aPoint.x,0),this.reLayout(),this.changed()},window.TextMorph.prototype.slotRowAndColumn=function(slot){var col,i,idx,j,ref,ref1,row;for(idx=0,row=i=0,ref=this.lines.length;0<=ref?i<ref:i>ref;row=0<=ref?++i:--i)for(idx=this.lineSlots[row],col=j=0,ref1=this.lines[row].length;0<=ref1?j<ref1:j>ref1;col=0<=ref1?++j:--j){if(idx===slot)return[row,col];idx+=1}return[this.lines.length-1,this.lines[this.lines.length-1].length-1]},window.TextMorph.prototype.slotCoordinates=function(slot){var shadowHeight,slotColumn,slotRow,x,xOffset,y,yOffset;return[slotRow,slotColumn]=this.slotRowAndColumn(slot),shadowHeight=Math.abs(this.shadowOffset.y),yOffset=slotRow*(Math.ceil(fontHeight(this.fontSize))+shadowHeight),xOffset=Math.ceil(this.backBufferContext.measureText(this.lines[slotRow].substring(0,slotColumn)).width),x=this.left()+xOffset,y=this.top()+yOffset,new Point(x,y)},window.TextMorph.prototype.slotAt=function(aPoint){var charX,col,row,shadowHeight;for(charX=0,row=0,col=0,shadowHeight=Math.abs(this.shadowOffset.y);aPoint.y-this.top()>(Math.ceil(fontHeight(this.fontSize))+shadowHeight)*row;)row+=1;for(row=Math.max(row,1);aPoint.x-this.left()>charX;)charX+=Math.ceil(this.backBufferContext.measureText(this.lines[row-1][col]).width),col+=1;return this.lineSlots[Math.max(row-1,0)]+col-1},window.TextMorph.prototype.upFrom=function(slot){var above,slotColumn,slotRow;return[slotRow,slotColumn]=this.slotRowAndColumn(slot),slotRow<1?slot:(above=this.lines[slotRow-1]).length<slotColumn-1?this.lineSlots[slotRow-1]+above.length:this.lineSlots[slotRow-1]+slotColumn},window.TextMorph.prototype.downFrom=function(slot){var below,slotColumn,slotRow;return[slotRow,slotColumn]=this.slotRowAndColumn(slot),slotRow>this.lines.length-2?slot:(below=this.lines[slotRow+1]).length<slotColumn-1?this.lineSlots[slotRow+1]+below.length:this.lineSlots[slotRow+1]+slotColumn},window.TextMorph.prototype.startOfLine=function(slot){return this.lineSlots[this.slotRowAndColumn(slot).y]},window.TextMorph.prototype.endOfLine=function(slot){return this.startOfLine(slot)+this.lines[this.slotRowAndColumn(slot).y].length-1},window.TextMorph.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){return TextMorph.__super__.addMorphSpecificMenuEntries.apply(this,arguments),menu.addLine(),"left"!==this.alignment&&menu.addMenuItem("align left",!0,this,"setAlignmentToLeft"),"right"!==this.alignment&&menu.addMenuItem("align right",!0,this,"setAlignmentToRight"),"center"!==this.alignment&&menu.addMenuItem("align center",!0,this,"setAlignmentToCenter"),menu.addMenuItem("run contents",!0,this,"doContents")},window.TextMorph.prototype.setAlignmentToLeft=function(){return this.alignment="left",this.reLayout(),this.changed()},window.TextMorph.prototype.setAlignmentToRight=function(){return this.alignment="right",this.reLayout(),this.changed()},window.TextMorph.prototype.setAlignmentToCenter=function(){return this.alignment="center",this.reLayout(),this.changed()},window.TextMorph.prototype.evaluationMenu=function(){var menu;return menu=this.buildHierarchyMenu(),this.text.length>0&&(menu.prependLine(),menu.prependMenuItem("select all",!0,this,"selectAllAndEdit"),menu.prependMenuItem("do all",!0,this,"doAll")),""!==this.selection().replace(/^\s\s*/,"").replace(/\s\s*$/,"")&&(menu.prependLine(),menu.prependMenuItem("inspect selection",!0,this,"inspectSelection","evaluate the\nselected expression\nand inspect the result"),menu.prependMenuItem("show selection",!0,this,"showSelection","evaluate the\nselected expression\nand show the result"),menu.prependMenuItem("do selection",!0,this,"doSelection","evaluate the\nselected expression")),menu},window.TextMorph.prototype.selectAllAndEdit=function(){return this.edit(),this.selectAll()},window.TextMorph.prototype.doAll=function(){return this.edit(),this.selectAll(),this.doSelection(),this.clearSelection()},window.TextMorph.prototype.setReceiver=function(obj){return this.receiver=obj,this.overridingContextMenu=this.evaluationMenu},window.TextMorph.prototype.doSelection=function(){return this.receiver.evaluateString(this.selection()),this.edit()},window.TextMorph.prototype.doContents=function(){return null!=this.receiver?this.receiver.evaluateString(this.text):this.evaluateString(this.text)},window.TextMorph.prototype.showSelection=function(){var result;if(null!=(result=this.receiver.evaluateString(this.selection())))return this.inform(result)},window.TextMorph.prototype.inspectSelection=function(){var result;if(null!=(result=this.receiver.evaluateString(this.selection())))return this.spawnInspector(result)},window.TriggerMorph=function(ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked=!0,target=nil,action=nil,labelString=nil,fontSize=WorldMorph.preferencesAndSettings.menuFontSize,fontStyle="sans-serif",centered=!1,dataSourceMorphForTarget=nil,morphEnv,toolTipMessage=nil,labelColor=WorldMorph.preferencesAndSettings.menuButtonsLabelColor,labelBold=!1,labelItalic=!1,doubleClickAction=nil,argumentToAction1=nil,argumentToAction2=nil,representsAMorph=!1){this.ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked=ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked,this.target=target,this.action=action,this.labelString=labelString,this.fontSize=fontSize,this.fontStyle=fontStyle,this.centered=centered,this.dataSourceMorphForTarget=dataSourceMorphForTarget,this.morphEnv=morphEnv,this.toolTipMessage=toolTipMessage,this.labelColor=labelColor,this.labelBold=labelBold,this.labelItalic=labelItalic,this.doubleClickAction=doubleClickAction,this.argumentToAction1=argumentToAction1,this.argumentToAction2=argumentToAction2,this.representsAMorph=representsAMorph,TriggerMorph.__super__.constructor.call(this),this.defaultRejectDrags=!0,this.color=WorldMorph.preferencesAndSettings.menuBackgroundColor,null!=this.labelString&&this.layoutSubmorphs(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TriggerMorph,"name",{value:"TriggerMorph"}),window.TriggerMorph.instances=[],window.TriggerMorph.__super__=window.Widget.prototype,window.TriggerMorph=extend(window.TriggerMorph,window.Widget),window.TriggerMorph.prototype.target=nil,window.TriggerMorph.prototype.action=nil,window.TriggerMorph.prototype.dataSourceMorphForTarget=nil,window.TriggerMorph.prototype.morphEnv=nil,window.TriggerMorph.prototype.label=nil,window.TriggerMorph.prototype.labelString=nil,window.TriggerMorph.prototype.labelColor=nil,window.TriggerMorph.prototype.labelBold=nil,window.TriggerMorph.prototype.labelItalic=nil,window.TriggerMorph.prototype.doubleClickAction=nil,window.TriggerMorph.prototype.argumentToAction1=nil,window.TriggerMorph.prototype.argumentToAction2=nil,window.TriggerMorph.prototype.toolTipMessage=nil,window.TriggerMorph.prototype.fontSize=nil,window.TriggerMorph.prototype.fontStyle=nil,window.TriggerMorph.prototype.highlightColor=new Color(192,192,192),window.TriggerMorph.prototype.pressColor=new Color(128,128,128),window.TriggerMorph.prototype.centered=!1,window.TriggerMorph.prototype.ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked=!0,window.TriggerMorph.prototype.representsAMorph=!1,window.TriggerMorph.prototype.state=0,window.TriggerMorph.prototype.STATE_NORMAL=0,window.TriggerMorph.prototype.STATE_HIGHLIGHTED=1,window.TriggerMorph.prototype.STATE_PRESSED=2,window.TriggerMorph.prototype.layoutSubmorphs=function(morphStartingTheChange=nil){if(TriggerMorph.__super__.layoutSubmorphs.call(this),null==this.label&&this.createLabel(),this.centered)return this.label.fullRawMoveTo(this.center().subtract(this.label.extent().floorDivideBy(2)))},window.TriggerMorph.prototype.getTextDescription=function(){return null!=this.textDescription?this.textDescription+" (adhoc description of button)":this.labelString?this.labelString.replace(/#\d*/,"")+" (text in button)":TriggerMorph.__super__.getTextDescription.call(this)},window.TriggerMorph.prototype.setLabel=function(labelString){return this.labelString=labelString,null!=this.label&&(this.label=this.label.fullDestroy()),this.layoutSubmorphs()},window.TriggerMorph.prototype.alignCenter=function(){if(!this.centered)return this.centered=!0,this.layoutSubmorphs()},window.TriggerMorph.prototype.alignLeft=function(){if(this.centered)return this.centered=!1,this.layoutSubmorphs()},window.TriggerMorph.prototype.paintIntoAreaOrBlitFromBackBuffer=function(aContext,clippingRectangle,appliedShadow){var al,area,at,color,h,sl,st,w;return!this.visibleBasedOnIsVisibleProperty()||this.isCollapsed()?nil:([area,sl,st,al,at,w,h]=this.calculateKeyValues(aContext,clippingRectangle),area.isNotEmpty()?w<1||h<1?nil:(color=null!=appliedShadow?"black":function(){switch(this.state){case this.STATE_NORMAL:return this.color;case this.STATE_HIGHLIGHTED:return this.highlightColor;case this.STATE_PRESSED:return this.pressColor}}.call(this),this.paintRectangle(aContext,al,at,w,h,color,this.alpha,!0,appliedShadow),this.paintHighlight(aContext,al,at,w,h)):void 0)},window.TriggerMorph.prototype.createLabel=function(){return this.label=new StringMorph(this.labelString||"",this.fontSize,this.fontStyle,this.labelBold,this.labelItalic,!1,this.labelColor),this.add(this.label)},window.TriggerMorph.prototype.rejectDrags=function(){return!(this.parent instanceof WorldMorph)&&this.defaultRejectDrags},window.TriggerMorph.prototype.trigger=function(){this.action&&""!==this.action&&this.target[this.action].call(this.target,this.dataSourceMorphForTarget,this.morphEnv,this.argumentToAction1,this.argumentToAction2)},window.TriggerMorph.prototype.triggerDoubleClick=function(){if(this.doubleClickAction)return this.target[this.doubleClickAction]()},window.TriggerMorph.prototype.mouseEnter=function(){if(this.state=this.STATE_HIGHLIGHTED,this.changed(),this.toolTipMessage)return this.startCountdownForBubbleHelp(this.toolTipMessage)},window.TriggerMorph.prototype.justBeenCopied=function(){return this.mouseLeave()},window.TriggerMorph.prototype.mouseLeave=function(){if(this.state=this.STATE_NORMAL,this.changed(),this.toolTipMessage)return world.hand.destroyToolTips()},window.TriggerMorph.prototype.mouseDownLeft=function(){return this.state=this.STATE_PRESSED,this.changed(),TriggerMorph.__super__.mouseDownLeft.apply(this,arguments)},window.TriggerMorph.prototype.mouseClickLeft=function(){return this.bringToForeground(),this.state=this.STATE_HIGHLIGHTED,this.changed(),this.ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked&&this.propagateKillPopUps(),this.trigger()},window.TriggerMorph.prototype.mouseDoubleClick=function(){return this.triggerDoubleClick()},window.MenuAppearance=function(){window.MenuAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.MenuAppearance,"name",{value:"MenuAppearance"}),window.MenuAppearance.instances=[],window.MenuAppearance.__super__=window.BoxyAppearance.prototype,window.MenuAppearance=extend(window.MenuAppearance,window.BoxyAppearance),window.MenuAppearance.prototype.nothing=nil,window.MenuHeader=function(textContents){MenuHeader.__super__.constructor.call(this,3),this.color=WorldMorph.preferencesAndSettings.menuHeaderColor,this.text=new TextMorph(textContents,this.fontSize||WorldMorph.preferencesAndSettings.menuHeaderFontSize,WorldMorph.preferencesAndSettings.menuFontName,WorldMorph.preferencesAndSettings.menuHeaderBold,!1,"center"),this.text.alignment="center",this.text.color=new Color(255,255,255),this.text.backgroundColor=this.color.copy(),this.add(this.text),this.rawSetExtent(this.text.extent().add(2)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.MenuHeader,"name",{value:"MenuHeader"}),window.MenuHeader.instances=[],window.MenuHeader.__super__=window.BoxMorph.prototype,window.MenuHeader=extend(window.MenuHeader,window.BoxMorph),window.MenuHeader.prototype.text=nil,window.MenuHeader.prototype.rawSetWidth=function(theWidth){return MenuHeader.__super__.rawSetWidth.apply(this,arguments),this.text.fullRawMoveTo(this.center().subtract(this.text.extent().floorDivideBy(2)))},window.MenuHeader.prototype.mouseClickLeft=function(){var ref;if(MenuHeader.__super__.mouseClickLeft.apply(this,arguments),null!=this.parent)return null!=(ref=this.firstParentThatIsAPopUp())?ref.pinPopUp(this):void 0},window.MenuItemMorph=function(ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked,target,action,labelString,fontSize,fontStyle,centered,environment,morphEnv,toolTipMessage,color,bold,italic,doubleClickAction,argumentToAction1,argumentToAction2,representsAMorph){MenuItemMorph.__super__.constructor.call(this,ifInsidePopUpThenClosesUnpinnedPopUpsWhenClicked,target,action,labelString,fontSize,fontStyle,centered,environment,morphEnv,toolTipMessage,color,bold,italic,doubleClickAction,argumentToAction1,argumentToAction2,representsAMorph),this.actionableAsThumbnail=!0,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.MenuItemMorph,"name",{value:"MenuItemMorph"}),window.MenuItemMorph.instances=[],window.MenuItemMorph.__super__=window.TriggerMorph.prototype,window.MenuItemMorph=extend(window.MenuItemMorph,window.TriggerMorph),window.MenuItemMorph.prototype.getTextDescription=function(){return null!=this.textDescription?this.textDescription+" (adhoc description of menu item)":this.labelString?this.labelString.replace(/#\d*/,"")+" (text in button)":MenuItemMorph.__super__.getTextDescription.call(this)},window.MenuItemMorph.prototype.isTicked=function(){return this.label.text.isTicked()},window.MenuItemMorph.prototype.toggleTick=function(){return this.label.text.isTicked()?(this.label.text=this.label.text.toggleTick(),this.label.reLayout(),this.label.changed()):this.label.text.isUnticked()?(this.label.text=this.label.text.toggleTick(),this.label.reLayout(),this.label.changed()):void 0},window.MenuItemMorph.prototype.createLabel=function(){var icon,lbl,np,w;return isString(this.labelString)?this.label=this.createLabelString(this.labelString):this.labelString instanceof Array?(this.label=new Widget,this.label.alpha=0,icon=this.createIcon(this.labelString[0]),this.label.add(icon),lbl=this.createLabelString(this.labelString[1]),this.label.add(lbl),lbl.fullRawMoveCenterTo(icon.center()),lbl.fullRawMoveLeftSideTo(icon.right()+4),this.label.rawSetBounds(icon.boundingBox().merge(lbl.boundingBox()))):this.label=this.createIcon(this.labelString),this.add(this.label),w=this.width(),this.silentRawSetExtent(this.label.extent().add(new Point(8,0))),this.silentRawSetWidth(w),np=this.position().add(new Point(4,0)),this.label.silentFullRawMoveTo(np)},window.MenuItemMorph.prototype.createIcon=function(source){var icon,src;return icon=new Widget,icon.backBuffer=source instanceof Widget?source.fullImage():source,icon.backBufferContext=icon.backBuffer.getContext("2d"),source instanceof Widget&&source.hasShadow()&&(src=icon.backBuffer,icon.backBuffer=newCanvas(source.fullBounds().extent().subtract(2*this.shadowBlur).scaleBy(pixelRatio)),icon.backBufferContext=icon.backBuffer.getContext("2d"),icon.backBufferContext.drawImage(src,0,0)),icon.silentRawSetWidth(icon.backBuffer.width),icon.silentRawSetHeight(icon.backBuffer.height),icon},window.MenuItemMorph.prototype.createLabelString=function(string){var lbl;return(lbl=new TextMorph(string,this.fontSize,this.fontStyle)).setColor(this.labelColor),lbl},window.MenuItemMorph.prototype.shrinkToTextSize=function(){return this.rawSetWidth(this.widthOfLabel()+5)},window.MenuItemMorph.prototype.widthOfLabel=function(){return this.label.width()},window.MenuItemMorph.prototype.mouseEnter=function(){if(this.representsAMorph&&(nil,(null!=this.argumentToAction1?this.argumentToAction1:this.target).turnOnHighlight()),this.isListItem()||(this.state=this.STATE_HIGHLIGHTED,this.changed()),this.toolTipMessage)return this.startCountdownForBubbleHelp(this.toolTipMessage)},window.MenuItemMorph.prototype.mouseLeave=function(){if(this.representsAMorph&&(nil,(null!=this.argumentToAction1?this.argumentToAction1:this.target).turnOffHighlight()),this.isListItem()||(this.state=this.STATE_NORMAL,this.changed()),this.toolTipMessage)return world.hand.destroyToolTips()},window.MenuItemMorph.prototype.mouseDownLeft=function(pos){return this.isListItem()&&(this.parent.unselectAllItems(),this.escalateEvent("mouseDownLeft",pos)),this.state=this.STATE_PRESSED,this.changed(),MenuItemMorph.__super__.mouseDownLeft.apply(this,arguments)},window.MenuItemMorph.prototype.isListItem=function(){return!!this.parent&&this.parent.isListContents},window.MenuItemMorph.prototype.isSelectedListItem=function(){return!!this.isListItem()&&this.state===this.STATE_PRESSED},window.MenusHelper=function(){window.MenusHelper.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.MenusHelper,"name",{value:"MenusHelper"}),window.MenusHelper.instances=[],window.MenusHelper.__super__=Object.prototype,window.MenusHelper.augmentWith(window.DeepCopierMixin,"MenusHelper"),window.MenusHelper.prototype.popUpDevToolsMenu=function(morphOpeningThePopUp,widgetThisMenuIsAbout){var menu;return(menu=new MenuMorph(morphOpeningThePopUp,!1,this,!0,!0,"Dev Tools")).addMenuItem("inspect",!0,widgetThisMenuIsAbout,"inspect2","open a window\non all properties"),menu.addMenuItem("console",!0,widgetThisMenuIsAbout,"createConsole","console"),menu.popUpAtHand()},window.MenusHelper.prototype.createReconfigurablePaint=function(){var reconfPaint,wm;return reconfPaint=new ReconfigurablePaintWdgt,(wm=new WindowWdgt(nil,nil,reconfPaint)).setExtent(new Point(460,400)),wm.fullRawMoveTo(world.hand.position()),wm.fullRawMoveWithin(world),world.add(wm),wm.changed()},window.MenusHelper.prototype.createSimpleSlideWdgt=function(){var simpleSlide,wm;return simpleSlide=new SimpleSlideWdgt,(wm=new WindowWdgt(nil,nil,simpleSlide)).setExtent(new Point(460,400)),wm.fullRawMoveTo(world.hand.position()),wm.fullRawMoveWithin(world),world.add(wm),wm.changed()},window.MenusHelper.prototype.createSimpleButton=function(){return world.create(new SimpleRectangularButtonMorph(!0,this,nil,new IconMorph(nil)))},window.MenusHelper.prototype.createSwitchButtonMorph=function(){var button1,button2;return button1=new SimpleRectangularButtonMorph(!0,this,nil,new IconMorph(nil)),button2=new SimpleRectangularButtonMorph(!0,this,nil,new StringMorph2("Hello World! ⎲ƒ⎳⎷ ⎸⎹ ")),world.create(new SwitchButtonMorph([button1,button2]))},window.MenusHelper.prototype.createNewClippingBoxMorph=function(){return world.create(new ClippingBoxMorph)},window.MenusHelper.prototype.makeSlidersButtonsStatesBright=function(){return world.forAllChildrenBottomToTop(function(child){if(child instanceof SliderButtonMorph)return child.pressColor=new Color(0,255,0),child.highlightColor=new Color(0,0,255),child.normalColor=new Color(0,0,0)})},window.MenusHelper.prototype.makeIconWithText=function(){return world.create(new WidgetHolderWithCaptionWdgt("hey there",new BrushIconMorph))},window.MenusHelper.prototype.makeEmptyIconWithText=function(){return world.create(new WidgetHolderWithCaptionWdgt("hey there"))},window.MenusHelper.prototype.makeFolderWindow=function(a,b,c,d,e){return world.create(new FolderWindowWdgt(nil,nil,nil,nil,this))},window.MenusHelper.prototype.makeBouncingParticle=function(){return world.create(new BouncerWdgt)},window.MenusHelper.prototype.createDestroyIconMorph=function(){return world.create(new DestroyIconMorph)},window.MenusHelper.prototype.createUnderCarpetIconMorph=function(){return world.create(new UnderCarpetIconMorph)},window.MenusHelper.prototype.createUncollapsedStateIconMorph=function(){return world.create(new UncollapsedStateIconMorph)},window.MenusHelper.prototype.createCollapsedStateIconMorph=function(){return world.create(new CollapsedStateIconMorph)},window.MenusHelper.prototype.createCloseIconButtonMorph=function(){return world.create(new CloseIconButtonMorph)},window.MenusHelper.prototype.createScratchAreaIconMorph=function(){return world.create(new ScratchAreaIconMorph)},window.MenusHelper.prototype.createFloraIconMorph=function(){return world.create(new FloraIconMorph)},window.MenusHelper.prototype.createScooterIconMorph=function(){return world.create(new ScooterIconMorph)},window.MenusHelper.prototype.createHeartIconMorph=function(){return world.create(new HeartIconMorph)},window.MenusHelper.prototype.createPencil1IconMorph=function(){return world.create(new PencilIconMorph)},window.MenusHelper.prototype.createPencil2IconMorph=function(){return world.create(new Pencil2IconMorph)},window.MenusHelper.prototype.createBrushIconMorph=function(){return world.create(new BrushIconMorph)},window.MenusHelper.prototype.createToothpasteIconMorph=function(){return world.create(new ToothpasteIconMorph)},window.MenusHelper.prototype.createEraserIconMorph=function(){return world.create(new EraserIconMorph)},window.MenusHelper.prototype.createTrashcanIconWdgt=function(){return world.create(new TrashcanIconWdgt)},window.MenusHelper.prototype.createShortcutArrowIconWdgt=function(){return world.create(new ShortcutArrowIconWdgt)},window.MenusHelper.prototype.createRasterPicIconWdgt=function(){return world.create(new RasterPicIconWdgt)},window.MenusHelper.prototype.createPaintBucketIconWdgt=function(){return world.create(new PaintBucketIconWdgt)},window.MenusHelper.prototype.createObjectIconWdgt=function(){return world.create(new ObjectIconWdgt)},window.MenusHelper.prototype.createFolderIconWdgt=function(){return world.create(new FolderIconWdgt)},window.MenusHelper.prototype.createBasementIconWdgt=function(){return world.create(new BasementIconWdgt)},window.MenusHelper.prototype.createWidgetIconWdgt=function(){return world.create(new WidgetIconWdgt)},window.MenusHelper.prototype.makeGenericReferenceIcon=function(){return world.create(new GenericShortcutIconWdgt)},window.MenusHelper.prototype.makeGenericObjectIcon=function(){return world.create(new GenericObjectIconWdgt)},window.MenusHelper.prototype.basementIconAndText=function(){return world.add(new BasementOpenerWdgt)},window.MenusHelper.prototype.newScriptWindow=function(){var scriptWdgt,wm;return scriptWdgt=new ScriptWdgt,(wm=new WindowWdgt(nil,nil,scriptWdgt)).setExtent(new Point(460,400)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.fullRawMoveWithin(world),world.add(wm),wm.changed()},window.MenusHelper.prototype.createFizzyPaintLauncher=function(){var fizzyPaintLauncher,scriptWdgt,wm;return(scriptWdgt=new ScriptWdgt("reconfPaint = new ReconfigurablePaintWdgt()\nwm = new WindowWdgt nil, nil, reconfPaint\nwm.setExtent new Point 460, 400\nwm.fullRawMoveTo new Point 174, 114\nwm.fullRawMoveWithin world\nworld.add wm\nwm.changed()\n\nmenusHelper.createDrawingsMakerOneOffInfoWindowNextTo wm")).saveScript(),(wm=new WindowWdgt(nil,nil,scriptWdgt)).setExtent(new Point(460,400)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.fullRawMoveWithin(world),wm.changed(),fizzyPaintLauncher=new IconicDesktopSystemScriptShortcutWdgt(wm,"Draw",new PaintBucketIconWdgt),world.add(fizzyPaintLauncher),fizzyPaintLauncher.setExtent(new Point(75,75)),fizzyPaintLauncher.fullChanged(),wm},window.MenusHelper.prototype.createFizzyPaintLauncherAndItsIcon=function(){var wm;return wm=this.createFizzyPaintLauncher(),world.add(wm)},window.MenusHelper.prototype.createSimpleDocumentLauncher=function(){var scriptWdgt,simpleDocumentLauncher,wm;return(scriptWdgt=new ScriptWdgt("reconfPaint = new SimpleDocumentWdgt()\nwm = new WindowWdgt nil, nil, reconfPaint\nwm.setExtent new Point 370, 395\nwm.fullRawMoveTo new Point 170, 88\nwm.fullRawMoveWithin world\nworld.add wm\nwm.changed()\n\nmenusHelper.createDocsMakerOneOffInfoWindowNextTo wm")).saveScript(),(wm=new WindowWdgt(nil,nil,scriptWdgt)).setExtent(new Point(460,400)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.fullRawMoveWithin(world),wm.changed(),simpleDocumentLauncher=new IconicDesktopSystemScriptShortcutWdgt(wm,"Docs Maker",new TypewriterIconWdgt),world.add(simpleDocumentLauncher),simpleDocumentLauncher.setExtent(new Point(75,75)),simpleDocumentLauncher.fullChanged(),wm},window.MenusHelper.prototype.createSimpleDocumentLauncherAndItsIcon=function(){var wm;return wm=this.createSimpleDocumentLauncher(),world.add(wm)},window.MenusHelper.prototype.createSimpleSlideLauncher=function(){var scriptWdgt,simpleSlideLauncher,wm;return(scriptWdgt=new ScriptWdgt("reconfPaint = new SimpleSlideWdgt()\nwm = new WindowWdgt nil, nil, reconfPaint\nwm.setExtent new Point 460, 400\nwm.fullRawMoveTo new Point 168, 134\nwm.fullRawMoveWithin world\nworld.add wm\nwm.changed()\n \nmenusHelper.createSlidesMakerOneOffInfoWindowNextTo wm\n")).saveScript(),(wm=new WindowWdgt(nil,nil,scriptWdgt)).setExtent(new Point(460,400)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.fullRawMoveWithin(world),wm.changed(),simpleSlideLauncher=new IconicDesktopSystemScriptShortcutWdgt(wm,"Slides Maker",new SimpleSlideIconWdgt),world.add(simpleSlideLauncher),simpleSlideLauncher.setExtent(new Point(75,75)),simpleSlideLauncher.fullChanged(),wm},window.MenusHelper.prototype.createSimpleSlideLauncherAndItsIcon=function(){var wm;return wm=this.createSimpleSlideLauncher(),world.add(wm)},window.MenusHelper.prototype.createDashboardsLauncher=function(){var scriptWdgt,simpleDashboardsLauncher,wm;return(scriptWdgt=new ScriptWdgt("reconfPaint = new DashboardsWdgt()\nwm = new WindowWdgt nil, nil, reconfPaint\nwm.setExtent new Point 460, 400\nwm.fullRawMoveTo world.hand.position()\nwm.fullRawMoveWithin world\nworld.add wm\nwm.changed()\n\nmenusHelper.createDashboardsMakerOneOffInfoWindowNextTo wm")).saveScript(),(wm=new WindowWdgt(nil,nil,scriptWdgt)).setExtent(new Point(460,400)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.fullRawMoveWithin(world),wm.changed(),simpleDashboardsLauncher=new IconicDesktopSystemScriptShortcutWdgt(wm,"Dashboards",new DashboardsIconWdgt),world.add(simpleDashboardsLauncher),simpleDashboardsLauncher.setExtent(new Point(75,75)),simpleDashboardsLauncher.fullChanged(),wm},window.MenusHelper.prototype.createPatchProgrammingLauncher=function(){var patchProgrammingLauncher,scriptWdgt,wm;return(scriptWdgt=new ScriptWdgt("patchProgramming = new PatchProgrammingWdgt()\nwm = new WindowWdgt nil, nil, patchProgramming\nwm.setExtent new Point 460, 400\nwm.fullRawMoveTo world.hand.position()\nwm.fullRawMoveWithin world\nworld.add wm\nwm.changed()\n\nmenusHelper.createPatchProgrammingOneOffInfoWindowNextTo wm")).saveScript(),(wm=new WindowWdgt(nil,nil,scriptWdgt)).setExtent(new Point(460,400)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.fullRawMoveWithin(world),wm.changed(),patchProgrammingLauncher=new IconicDesktopSystemScriptShortcutWdgt(wm,"Patch progr.",new PatchProgrammingIconWdgt),world.add(patchProgrammingLauncher),patchProgrammingLauncher.setExtent(new Point(75,75)),patchProgrammingLauncher.fullChanged(),wm},window.MenusHelper.prototype.createGenericPanelLauncher=function(){var genericPanelLauncher,scriptWdgt,wm;return(scriptWdgt=new ScriptWdgt("genericPanel = new StretchableEditableWdgt()\nwm = new WindowWdgt nil, nil, genericPanel\nwm.setExtent new Point 460, 400\nwm.fullRawMoveTo world.hand.position()\nwm.fullRawMoveWithin world\nworld.add wm\nwm.changed()\n\nmenusHelper.createGenericPanelOneOffInfoWindowNextTo wm")).saveScript(),(wm=new WindowWdgt(nil,nil,scriptWdgt)).setExtent(new Point(460,400)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.fullRawMoveWithin(world),wm.changed(),genericPanelLauncher=new IconicDesktopSystemScriptShortcutWdgt(wm,"Generic panel",new GenericPanelIconWdgt),world.add(genericPanelLauncher),genericPanelLauncher.setExtent(new Point(75,75)),genericPanelLauncher.fullChanged(),wm},window.MenusHelper.prototype.createToolbarsOpener=function(){var scriptWdgt,toolbarsOpenerLauncher,wm;return(scriptWdgt=new ScriptWdgt("\n# tools -------------------------------\ntoolsPanel = new ScrollPanelWdgt new ToolPanelWdgt()\n\ntoolsPanel.addMany [\n  new TextToolbarCreatorButtonWdgt()\n  new UsefulTextSnippetsToolbarCreatorButtonWdgt()\n  new SlidesToolbarCreatorButtonWdgt()\n  new PlotsToolbarCreatorButtonWdgt()\n  new PatchProgrammingComponentsToolbarCreatorButtonWdgt()\n  new WindowsToolbarCreatorButtonWdgt()\n]\n\ntoolsPanel.disableDragsDropsAndEditing()\n\nwm = new WindowWdgt nil, nil, toolsPanel\nwm.setExtent new Point 60, 261\nwm.fullRawMoveTo new Point 170, 170\nwm.fullRawMoveWithin world\nworld.add wm\nwm.changed()\n\nmenusHelper.createSuperToolbarOneOffInfoWindowNextTo wm\n")).saveScript(),(wm=new WindowWdgt(nil,nil,scriptWdgt)).setExtent(new Point(460,400)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.fullRawMoveWithin(world),wm.changed(),toolbarsOpenerLauncher=new IconicDesktopSystemScriptShortcutWdgt(wm,"Super Toolbar",new ToolbarsIconWdgt),toolbarsOpenerLauncher.toolTipMessage="a toolbar to rule them all",world.add(toolbarsOpenerLauncher),toolbarsOpenerLauncher.setExtent(new Point(75,75)),toolbarsOpenerLauncher.fullChanged(),wm},window.MenusHelper.prototype.createNewTemplatesWindow=function(){var sdspw,startingContent,wm;return(sdspw=new SimpleDocumentScrollPanelWdgt).rawSetExtent(new Point(365,335)),(startingContent=new SimplePlainTextWdgt("Simply drag the items below into your document",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),startingContent.setFontSize(18),startingContent.isEditable=!0,startingContent.enableSelecting(),sdspw.setContents(startingContent,5),(startingContent=new ArrowSIconWdgt).rawSetExtent(new Point(25,25)),sdspw.add(startingContent),startingContent.layoutSpecDetails.setAlignmentToCenter(),sdspw.addDivider(),(startingContent=new SimplePlainTextWdgt("Title",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),startingContent.setFontName(nil,nil,startingContent.georgiaFontStack),startingContent.setFontSize(48),startingContent.isEditable=!0,startingContent.enableSelecting(),sdspw.add(startingContent),(startingContent=new SimplePlainTextWdgt("Section X",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).toggleWeight(),startingContent.isEditable=!0,startingContent.enableSelecting(),startingContent.setFontSize(28),sdspw.add(startingContent),startingContent=new SimplePlainTextWdgt("Section X.X",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1),startingContent.isEditable=!0,startingContent.enableSelecting(),startingContent.setFontSize(24),sdspw.add(startingContent),sdspw.addNormalParagraph("Normal text."),(startingContent=new SimplePlainTextWdgt("“Be careful--with quotations, you can damn anything.”\n― André Malraux",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).toggleItalic(),startingContent.alignRight(),startingContent.isEditable=!0,startingContent.enableSelecting(),sdspw.add(startingContent),sdspw.addIndentedText("indentedText"),sdspw.addBulletPoint("bullet point"),sdspw.addCodeBlock("a code block with\n  some example\n    code in here"),(startingContent=new SimplePlainTextWdgt("Spacers:",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).toggleWeight(),startingContent.isEditable=!0,startingContent.enableSelecting(),sdspw.add(startingContent),sdspw.addSpacer(),sdspw.addSpacer(2),sdspw.addSpacer(3),(startingContent=new SimplePlainTextWdgt("Divider line:",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).toggleWeight(),startingContent.isEditable=!0,startingContent.enableSelecting(),sdspw.add(startingContent),sdspw.addDivider(),(startingContent=new SimplePlainTextWdgt("Links:",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).toggleWeight(),startingContent.isEditable=!0,startingContent.enableSelecting(),sdspw.add(startingContent),(startingContent=new SimpleLinkWdgt).rawSetExtent(new Point(405,50)),sdspw.add(startingContent),startingContent.layoutSpecDetails.setAlignmentToRight(),(startingContent=new SimpleVideoLinkWdgt).rawSetExtent(new Point(405,50)),sdspw.add(startingContent),startingContent.layoutSpecDetails.setAlignmentToRight(),(startingContent=new SimplePlainTextWdgt("Useful characters:",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).toggleWeight(),startingContent.isEditable=!0,startingContent.enableSelecting(),sdspw.add(startingContent),sdspw.addNormalParagraph("… †‡§ ↵⏎⇧␣ ☐☑☒✓X✗ •‣⁃◦ °±⁻¹²³µ×÷ℓΩ√∛∜∝∞∟∠∡∩∪∿≈⊂⋅⌀▫◽◻□⩽⩾ ¼½¾⅛⅜⅝⅞ ←↑→↓↔↕↵⇎⇏⇑⇒⇓⇔⇕ ©®™ $£€¥").setFontSize(16),sdspw.makeAllContentIntoTemplates(),(wm=new WindowWdgt(nil,nil,sdspw)).setExtent(new Point(370,335)),wm.setTitleWithoutPrependedContentName("useful snippets"),wm.changed(),wm},window.MenusHelper.prototype.createFanout=function(){var fanoutWdgt;return fanoutWdgt=new FanoutWdgt,world.create(fanoutWdgt),fanoutWdgt.setExtent(new Point(100,100))},window.MenusHelper.prototype.createCalculatingPatchNode=function(){var calculatingPatchNodeWdgt,wm;return calculatingPatchNodeWdgt=new CalculatingPatchNodeWdgt,(wm=new WindowWdgt(nil,nil,calculatingPatchNodeWdgt,!0)).setExtent(new Point(460,400)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.fullRawMoveWithin(world),world.add(wm),wm.changed()},window.MenusHelper.prototype.createDiffingPatchNode=function(){var diffingPatchNodeWdgt,wm;return diffingPatchNodeWdgt=new DiffingPatchNodeWdgt,(wm=new WindowWdgt(nil,nil,diffingPatchNodeWdgt,!0)).setExtent(new Point(460,400)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.fullRawMoveWithin(world),world.add(wm),wm.changed()},window.MenusHelper.prototype.createSliderWithSmallestValueAtBottomEnd=function(){return world.create(new SliderMorph(nil,nil,nil,nil,nil,!0))},window.MenusHelper.prototype.createRegexSubstitutionPatchNodeWdgt=function(){var regexSubstitutionPatchNodeWdgt,wm;return regexSubstitutionPatchNodeWdgt=new RegexSubstitutionPatchNodeWdgt,(wm=new WindowWdgt(nil,nil,regexSubstitutionPatchNodeWdgt,!0)).setExtent(new Point(460,400)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.fullRawMoveWithin(world),world.add(wm),wm.changed()},window.MenusHelper.prototype.throwAnError=function(){throw new Error("you manually threw an error!")},window.MenusHelper.prototype.createStretchablePanel=function(){var stretchablePanel;return stretchablePanel=new StretchableWidgetContainerWdgt,world.create(stretchablePanel),stretchablePanel.setExtent(new Point(400,300))},window.MenusHelper.prototype.createToolsPanel=function(){var toolPanel,wm;return toolPanel=new ScrollPanelWdgt(new ToolPanelWdgt),(wm=new WindowWdgt(nil,nil,toolPanel,!0)).setExtent(new Point(200,400)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.fullRawMoveWithin(world),world.add(wm),wm.changed()},window.MenusHelper.prototype.createHorizontalMenuPanelPanel=function(){var horizontalMenuPanel,wm;return horizontalMenuPanel=new HorizontalMenuPanelWdgt,(wm=new WindowWdgt(nil,nil,horizontalMenuPanel,!0)).setExtent(new Point(200,400)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.fullRawMoveWithin(world),world.add(wm),wm.changed()},window.MenusHelper.prototype.popUpMore1IconsMenu=function(morphOpeningThePopUp){var menu;return(menu=new MenuMorph(morphOpeningThePopUp,!1,this,!0,!0,"More Icons 1")).addMenuItem("Pencil 1 icon",!0,menusHelper,"createPencil1IconMorph"),menu.addMenuItem("Pencil 2 icon",!0,menusHelper,"createPencil2IconMorph"),menu.addMenuItem("Brush icon",!0,menusHelper,"createBrushIconMorph"),menu.addMenuItem("Toothpaste icon",!0,menusHelper,"createToothpasteIconMorph"),menu.addMenuItem("Eraser icon",!0,menusHelper,"createEraserIconMorph"),menu.addMenuItem("Trashcan icon",!0,menusHelper,"createTrashcanIconWdgt"),menu.addMenuItem("Shortcut arrow icon",!0,menusHelper,"createShortcutArrowIconWdgt"),menu.addMenuItem("Raster pic icon",!0,menusHelper,"createRasterPicIconWdgt"),menu.addMenuItem("Paint bucket icon",!0,menusHelper,"createPaintBucketIconWdgt"),menu.addMenuItem("Object icon",!0,menusHelper,"createObjectIconWdgt"),menu.addMenuItem("Folder icon",!0,menusHelper,"createFolderIconWdgt"),menu.addMenuItem("Basement icon",!0,menusHelper,"createBasementIconWdgt"),menu.addMenuItem("Widget icon",!0,menusHelper,"createWidgetIconWdgt"),menu.popUpAtHand()},window.MenusHelper.prototype.popUpMore2IconsMenu=function(morphOpeningThePopUp){var menu;return(menu=new MenuMorph(morphOpeningThePopUp,!1,this,!0,!0,"More Icons 2")).addMenuItem("Format as code icon",!0,menusHelper,"createFormatAsCodeIconWdgt"),menu.addMenuItem("Ch. X icon",!0,menusHelper,"createChXIconWdgt"),menu.addMenuItem("Ch. X.X icon",!0,menusHelper,"createChXXIconWdgt"),menu.addMenuItem("Ch. X.X.X icon",!0,menusHelper,"createChXXXIconWdgt"),menu.addMenuItem("Align right icon",!0,menusHelper,"createAlignRightIconWdgt"),menu.addMenuItem("Align center icon",!0,menusHelper,"createAlignCenterIconWdgt"),menu.addMenuItem("Align left icon",!0,menusHelper,"createAlignLeftIconWdgt"),menu.addMenuItem("Bold icon",!0,menusHelper,"createBoldIconWdgt"),menu.addMenuItem("Italic icon",!0,menusHelper,"createItalicIconWdgt"),menu.addMenuItem("Information icon",!0,menusHelper,"createInformationIconWdgt"),menu.addMenuItem("Textbox icon",!0,menusHelper,"createTextboxIconWdgt"),menu.addMenuItem("Video play icon",!0,menusHelper,"createVideoPlayIconWdgt"),menu.addMenuItem("Decrease font size icon",!0,menusHelper,"createDecreaseFontSizeIconWdgt"),menu.addMenuItem("Increase font size icon",!0,menusHelper,"createIncreaseFontSizeIconWdgt"),menu.addMenuItem("External link icon",!0,menusHelper,"createExternalLinkIconWdgt"),menu.addMenuItem("Templates icon",!0,menusHelper,"createTemplatesIconWdgt"),menu.popUpAtHand()},window.MenusHelper.prototype.popUpMore3IconsMenu=function(morphOpeningThePopUp){var menu;return(menu=new MenuMorph(morphOpeningThePopUp,!1,this,!0,!0,"More Icons 2")).addMenuItem("Fizzygum logo",!0,menusHelper,"createFizzygumLogoIconWdgt"),menu.addMenuItem("Fizzygum logo with text",!0,menusHelper,"createFizzygumLogoWithTextIconWdgt"),menu.addMenuItem("Vaporwave sun",!0,menusHelper,"createVaporwaveSunIconWdgt"),menu.addMenuItem("Vaporwave background",!0,menusHelper,"createVaporwaveBackgroundIconWdgt"),menu.addMenuItem("Change font icon",!0,menusHelper,"createChangeFontIconWdgt"),menu.addMenuItem("C <-> F converter icon",!0,menusHelper,"createCFDegreesConverterIconWdgt"),menu.addMenuItem("Simple slide icon",!0,menusHelper,"createSimpleSlideIconWdgt"),menu.addMenuItem("Typewriter icon",!0,menusHelper,"createTypewriterIconWdgt"),menu.addMenuItem("Little world icon",!0,menusHelper,"createLittleWorldIconWdgt"),menu.addMenuItem("Little USA icon",!0,menusHelper,"createLittleUSAIconWdgt"),menu.addMenuItem("Map pin icon",!0,menusHelper,"createMapPinIconWdgt"),menu.addMenuItem("Save icon",!0,menusHelper,"createSaveIconWdgt"),menu.popUpAtHand()},window.MenusHelper.prototype.createFizzygumLogoWithTextIconWdgt=function(){return world.create(new FizzygumLogoWithTextIconWdgt)},window.MenusHelper.prototype.createVaporwaveBackgroundIconWdgt=function(){return world.create(new VaporwaveBackgroundIconWdgt)},window.MenusHelper.prototype.createCFDegreesConverterIconWdgt=function(){return world.create(new CFDegreesConverterIconWdgt)},window.MenusHelper.prototype.createFizzygumLogoIconWdgt=function(){return world.create(new FizzygumLogoIconWdgt)},window.MenusHelper.prototype.createVaporwaveSunIconWdgt=function(){return world.create(new VaporwaveSunIconWdgt)},window.MenusHelper.prototype.createLittleWorldIconWdgt=function(){return world.create(new LittleWorldIconWdgt)},window.MenusHelper.prototype.createChangeFontIconWdgt=function(){return world.create(new ChangeFontIconWdgt)},window.MenusHelper.prototype.createSimpleSlideIconWdgt=function(){return world.create(new SimpleSlideIconWdgt)},window.MenusHelper.prototype.createTypewriterIconWdgt=function(){return world.create(new TypewriterIconWdgt)},window.MenusHelper.prototype.createLittleUSAIconWdgt=function(){return world.create(new LittleUSAIconWdgt)},window.MenusHelper.prototype.createMapPinIconWdgt=function(){return world.create(new MapPinIconWdgt)},window.MenusHelper.prototype.createSaveIconWdgt=function(){return world.create(new SaveIconWdgt)},window.MenusHelper.prototype.popUpArrowsIconsMenu=function(morphOpeningThePopUp){var menu;return(menu=new MenuMorph(morphOpeningThePopUp,!1,this,!0,!0,"Arrows")).addMenuItem("Arrow N icon",!0,menusHelper,"createArrowNIconWdgt"),menu.addMenuItem("Arrow S icon",!0,menusHelper,"createArrowSIconWdgt"),menu.addMenuItem("Arrow W icon",!0,menusHelper,"createArrowWIconWdgt"),menu.addMenuItem("Arrow E icon",!0,menusHelper,"createArrowEIconWdgt"),menu.addMenuItem("Arrow NW icon",!0,menusHelper,"createArrowNWIconWdgt"),menu.addMenuItem("Arrow NE icon",!0,menusHelper,"createArrowNEIconWdgt"),menu.addMenuItem("Arrow SE icon",!0,menusHelper,"createArrowSEIconWdgt"),menu.addMenuItem("Arrow SW icon",!0,menusHelper,"createArrowSWIconWdgt"),menu.popUpAtHand()},window.MenusHelper.prototype.createArrowEIconWdgt=function(){return world.create(new ArrowEIconWdgt)},window.MenusHelper.prototype.createArrowNEIconWdgt=function(){return world.create(new ArrowNEIconWdgt)},window.MenusHelper.prototype.createArrowNIconWdgt=function(){return world.create(new ArrowNIconWdgt)},window.MenusHelper.prototype.createArrowNWIconWdgt=function(){return world.create(new ArrowNWIconWdgt)},window.MenusHelper.prototype.createArrowSEIconWdgt=function(){return world.create(new ArrowSEIconWdgt)},window.MenusHelper.prototype.createArrowSIconWdgt=function(){return world.create(new ArrowSIconWdgt)},window.MenusHelper.prototype.createArrowSWIconWdgt=function(){return world.create(new ArrowSWIconWdgt)},window.MenusHelper.prototype.createArrowWIconWdgt=function(){return world.create(new ArrowWIconWdgt)},window.MenusHelper.prototype.createDecreaseFontSizeIconWdgt=function(){return world.create(new DecreaseFontSizeIconWdgt)},window.MenusHelper.prototype.createExternalLinkIconWdgt=function(){return world.create(new ExternalLinkIconWdgt)},window.MenusHelper.prototype.createIncreaseFontSizeIconWdgt=function(){return world.create(new IncreaseFontSizeIconWdgt)},window.MenusHelper.prototype.createTemplatesIconWdgt=function(){return world.create(new TemplatesIconWdgt)},window.MenusHelper.prototype.createFormatAsCodeIconWdgt=function(){return world.create(new FormatAsCodeIconWdgt)},window.MenusHelper.prototype.createChXIconWdgt=function(){return world.create(new ChapterXIconWdgt)},window.MenusHelper.prototype.createChXXIconWdgt=function(){return world.create(new ChapterXXIconWdgt)},window.MenusHelper.prototype.createChXXXIconWdgt=function(){return world.create(new ChapterXXXIconWdgt)},window.MenusHelper.prototype.createAlignRightIconWdgt=function(){return world.create(new AlignRightIconWdgt)},window.MenusHelper.prototype.createAlignCenterIconWdgt=function(){return world.create(new AlignCenterIconWdgt)},window.MenusHelper.prototype.createAlignLeftIconWdgt=function(){return world.create(new AlignLeftIconWdgt)},window.MenusHelper.prototype.createWorldMapIconMorph=function(){return world.create(new SimpleWorldMapIconWdgt)},window.MenusHelper.prototype.createUSAMapIconMorph=function(){return world.create(new SimpleUSAMapIconWdgt)},window.MenusHelper.prototype.createBoldIconWdgt=function(){return world.create(new BoldIconWdgt)},window.MenusHelper.prototype.createItalicIconWdgt=function(){return world.create(new ItalicIconWdgt)},window.MenusHelper.prototype.createInformationIconWdgt=function(){return world.create(new InformationIconWdgt)},window.MenusHelper.prototype.createTextboxIconWdgt=function(){return world.create(new TextIconWdgt)},window.MenusHelper.prototype.createVideoPlayIconWdgt=function(){return world.create(new VideoPlayIconWdgt)},window.MenusHelper.prototype.createSimpleDocumentWdgt=function(){var simpleDocument,wm;return simpleDocument=new SimpleDocumentWdgt,(wm=new WindowWdgt(nil,nil,simpleDocument)).setExtent(new Point(368,335)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.fullRawMoveWithin(world),world.add(wm),wm.changed()},window.MenusHelper.prototype.createSimpleLinkWdgt=function(){var simpleLinkWdgt;return(simpleLinkWdgt=new SimpleLinkWdgt).setExtent(new Point(405,50)),world.create(simpleLinkWdgt)},window.MenusHelper.prototype.createSimpleVideoLinkWdgt=function(){var simpleVideoLinkWdgt;return(simpleVideoLinkWdgt=new SimpleVideoLinkWdgt).setExtent(new Point(405,50)),world.create(simpleVideoLinkWdgt)},window.MenusHelper.prototype.create2DAxis=function(){var vertAxis;return(vertAxis=new AxisWdgt).setExtent(new Point(40,300)),world.create(vertAxis)},window.MenusHelper.prototype.createExampleScatterPlot=function(){var exampleScatterPlot;return(exampleScatterPlot=new ExampleScatterPlotWdgt).setExtent(new Point(300,300)),world.create(exampleScatterPlot)},window.MenusHelper.prototype.createExampleScatterPlotWithAxes=function(){var exampleScatterPlot,plotWithAxesWdgt;return exampleScatterPlot=new ExampleScatterPlotWdgt,(plotWithAxesWdgt=new PlotWithAxesWdgt(exampleScatterPlot)).rawSetExtent(new Point(300,300)),world.create(plotWithAxesWdgt)},window.MenusHelper.prototype.createExampleFunctionPlot=function(){var exampleFunctionPlot;return(exampleFunctionPlot=new ExampleFunctionPlotWdgt).setExtent(new Point(300,300)),world.create(exampleFunctionPlot)},window.MenusHelper.prototype.createExampleBarPlot=function(){var exampleBarPlot;return(exampleBarPlot=new ExampleBarPlotWdgt).setExtent(new Point(300,300)),world.create(exampleBarPlot)},window.MenusHelper.prototype.createExample3DPlot=function(){var example3DPlot;return(example3DPlot=new Example3DPlotWdgt).setExtent(new Point(300,300)),world.create(example3DPlot)},window.MenusHelper.prototype.popUpMapsMenu=function(morphOpeningThePopUp){var menu;return(menu=new MenuMorph(morphOpeningThePopUp,!1,this,!0,!0,"Maps")).addMenuItem("world map",!0,menusHelper,"createWorldMapIconMorph","others"),menu.addMenuItem("USA map",!0,menusHelper,"createUSAMapIconMorph","others"),menu.popUpAtHand()},window.MenusHelper.prototype.popUpGraphsMenu=function(morphOpeningThePopUp){var menu;return(menu=new MenuMorph(morphOpeningThePopUp,!1,this,!0,!0,"graphs")).addMenuItem("axis",!0,menusHelper,"create2DAxis"),menu.addMenuItem("scatter plot",!0,menusHelper,"createExampleScatterPlot"),menu.addMenuItem("scatter plot with axes",!0,menusHelper,"createExampleScatterPlotWithAxes"),menu.addMenuItem("function plot",!0,menusHelper,"createExampleFunctionPlot"),menu.addMenuItem("bar plot",!0,menusHelper,"createExampleBarPlot"),menu.addMenuItem("3D plot",!0,menusHelper,"createExample3DPlot"),menu.popUpAtHand()},window.MenusHelper.prototype.popUpSupportDocsMenu=function(morphOpeningThePopUp){var menu;return(menu=new MenuMorph(morphOpeningThePopUp,!1,this,!0,!0,"Support Docs")).addMenuItem("welcome message",!0,this,"createWelcomeMessageWindowAndShortcut","welcome message"),menu.popUpAtHand()},window.MenusHelper.prototype.createWelcomeMessageWindowAndShortcut=function(){var readmeLauncher,sdspw,simpleDocument,startingContent,wm;return simpleDocument=new SimpleDocumentWdgt,(sdspw=simpleDocument.simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),sdspw.rawSetExtent(new Point(365,405)),(startingContent=new FizzygumLogoIconWdgt).rawSetExtent(new Point(85,85)),sdspw.setContents(startingContent,5),startingContent.layoutSpecDetails.setElasticity(0),startingContent.layoutSpecDetails.setAlignmentToCenter(),(startingContent=new SimplePlainTextWdgt("Welcome to Fizzygum",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),startingContent.setFontSize(24),startingContent.isEditable=!0,startingContent.enableSelecting(),sdspw.add(startingContent),(startingContent=new SimplePlainTextWdgt("version 1.1.1",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),startingContent.setFontSize(9),startingContent.isEditable=!0,startingContent.enableSelecting(),sdspw.add(startingContent),sdspw.addDivider(),sdspw.addNormalParagraph("Welcome to a powerful new framework designed from the ground up to do complex things, simply. Welcome to Fizzygum."),sdspw.addSpacer(),(startingContent=new SimplePlainTextWdgt("What it can do for you",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),startingContent.setFontSize(22),startingContent.isEditable=!0,startingContent.enableSelecting(),sdspw.add(startingContent),sdspw.addDivider(),sdspw.addNormalParagraph("Fizzygum enables you to do all of this and more:"),sdspw.addBulletPoint("make dashboards and visualise data (plots, maps, ...)"),sdspw.addBulletPoint("author, organise and navigate documents (drawings / text docs / slides)"),sdspw.addBulletPoint("embed live graphs, dynamic calculations or even entire running programs inside any document, via simple drag & drop"),sdspw.addBulletPoint("go beyond traditional embedding: you can now infinitely nest and compose programs and documents. Need a program inside a presentation inside a text? You have it"),sdspw.addBulletPoint("make custom utilities (e.g. temperature converter) by simply connecting existing components - no coding required"),sdspw.addBulletPoint("use the internal development tools to create entirely new apps, or change existing ones while they are running. Add custom features without even needing to refresh the page."),sdspw.addBulletPoint("do all of the above, concurrently"),sdspw.addSpacer(),(startingContent=new SimplePlainTextWdgt("New here?",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),startingContent.setFontSize(22),startingContent.isEditable=!0,startingContent.enableSelecting(),sdspw.add(startingContent),sdspw.addDivider(),sdspw.addNormalParagraph("Feel free to click around this sandbox. Just reload to start again from scratch."),sdspw.addSpacer(),sdspw.addNormalParagraph("Also check out some screenshots here:"),(startingContent=new SimpleLinkWdgt("screenshots")).rawSetExtent(new Point(405,50)),sdspw.add(startingContent),startingContent.layoutSpecDetails.setAlignmentToRight(),sdspw.addNormalParagraph("...or watch some quick demos on the Youtube channel:"),(startingContent=new SimpleVideoLinkWdgt("YouTube channel")).rawSetExtent(new Point(405,50)),sdspw.add(startingContent),startingContent.layoutSpecDetails.setAlignmentToRight(),sdspw.addNormalParagraph("...or docs here:"),(startingContent=new SimpleLinkWdgt("docs")).rawSetExtent(new Point(405,50)),sdspw.add(startingContent),startingContent.layoutSpecDetails.setAlignmentToRight(),sdspw.addSpacer(2),(startingContent=new SimplePlainTextWdgt("Get in touch",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),startingContent.setFontSize(22),startingContent.isEditable=!0,startingContent.enableSelecting(),sdspw.add(startingContent),sdspw.addDivider(),sdspw.addNormalParagraph("Mail? Mailing list? Facebook page? Twitter? Chat? We have it all."),(startingContent=new SimpleLinkWdgt("contacts")).rawSetExtent(new Point(405,50)),sdspw.add(startingContent),startingContent.layoutSpecDetails.setAlignmentToRight(),(wm=new WindowWdgt(nil,nil,simpleDocument)).rawSetExtent(new Point(365,405)),wm.fullRawMoveFullCenterTo(world.center()),world.add(wm),wm.setTitleWithoutPrependedContentName("Welcome"),wm.changed(),simpleDocument.disableDragsDropsAndEditing(),readmeLauncher=new IconicDesktopSystemDocumentShortcutWdgt(wm,"Welcome",new WelcomeIconWdgt),world.add(readmeLauncher),readmeLauncher.setExtent(new Point(75,75)),readmeLauncher.fullChanged()},window.MenusHelper.prototype.createSuperToolbarOneOffInfoWindowNextTo=function(nextToThisWidget){var sdspw,simpleDocument,startingContent,wm;return world.infoDoc_superToolbar_created?nil:(simpleDocument=new SimpleDocumentWdgt,(sdspw=simpleDocument.simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),sdspw.rawSetExtent(new Point(365,405)),(startingContent=new ToolbarsIconWdgt).rawSetExtent(new Point(85,85)),sdspw.setContents(startingContent,5),startingContent.layoutSpecDetails.setElasticity(0),startingContent.layoutSpecDetails.setAlignmentToCenter(),(startingContent=new SimplePlainTextWdgt("Super Toolbar",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),startingContent.setFontSize(22),startingContent.isEditable=!0,startingContent.enableSelecting(),sdspw.add(startingContent),sdspw.addDivider(),sdspw.addNormalParagraph("The Super Toolbar can create all other toolbars for you, and from those toolbars you can create any widget.\n\nThis is handy because any widget can go in any document... so here is a way to access them all.\n\nFor an example on how this is useful, see the video on `mixing widgets`:"),(startingContent=new SimpleVideoLinkWdgt("Mixing widgets")).rawSetExtent(new Point(405,50)),sdspw.add(startingContent),startingContent.layoutSpecDetails.setAlignmentToRight(),(wm=new WindowWdgt(nil,nil,simpleDocument)).rawSetExtent(new Point(365,405)),wm.fullRawMoveFullCenterTo(world.center()),world.add(wm),wm.setTitleWithoutPrependedContentName("Super Toolbar info"),wm.changed(),simpleDocument.disableDragsDropsAndEditing(),world.infoDoc_superToolbar_created=!0,simpleDocument.closeFromContainerWindow=function(containerWindow){return containerWindow.destroy()},wm.fullRawMoveToSideOf(nextToThisWidget),wm.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.prototype.createDocsMakerOneOffInfoWindowNextTo=function(nextToThisWidget){var sdspw,simpleDocument,startingContent,wm;return world.infoDoc_docsMaker_created?nil:(simpleDocument=new SimpleDocumentWdgt,(sdspw=simpleDocument.simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),sdspw.rawSetExtent(new Point(365,405)),(startingContent=new TypewriterIconWdgt).rawSetExtent(new Point(85,85)),sdspw.setContents(startingContent,5),startingContent.layoutSpecDetails.setElasticity(0),startingContent.layoutSpecDetails.setAlignmentToCenter(),(startingContent=new SimplePlainTextWdgt("Docs Maker",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),startingContent.setFontSize(22),startingContent.isEditable=!0,startingContent.enableSelecting(),sdspw.add(startingContent),sdspw.addDivider(),sdspw.addNormalParagraph("A basic text editor. But you can drop anything inside it.\n\nNote that the Docs Maker works 'by paragraph': you can drag/drop paragraphs, and when you change the style the whole paragraph is affected.\n\nQuickest way to compose a document is to drag/drop snippets, which you can find by clicking the button that looks like this:"),startingContent=new TemplatesButtonWdgt,sdspw.add(startingContent),startingContent.layoutSpecDetails.setAlignmentToCenter(),sdspw.addSpacer(),sdspw.addNormalParagraph("Once you are done editing, click the pencil icon on the window bar."),sdspw.addNormalParagraph("To see an example of use, check out the video here:"),(startingContent=new SimpleVideoLinkWdgt("Docs Maker")).rawSetExtent(new Point(405,50)),sdspw.add(startingContent),startingContent.layoutSpecDetails.setAlignmentToRight(),(wm=new WindowWdgt(nil,nil,simpleDocument)).rawSetExtent(new Point(365,405)),wm.fullRawMoveFullCenterTo(world.center()),world.add(wm),wm.setTitleWithoutPrependedContentName("Docs Maker info"),wm.changed(),simpleDocument.disableDragsDropsAndEditing(),world.infoDoc_docsMaker_created=!0,simpleDocument.closeFromContainerWindow=function(containerWindow){return containerWindow.destroy()},wm.fullRawMoveToSideOf(nextToThisWidget),wm.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.prototype.createDrawingsMakerOneOffInfoWindowNextTo=function(nextToThisWidget){var sdspw,simpleDocument,startingContent,wm;return world.infoDoc_drawingsMaker_created?nil:(simpleDocument=new SimpleDocumentWdgt,(sdspw=simpleDocument.simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),sdspw.rawSetExtent(new Point(365,405)),(startingContent=new PaintBucketIconWdgt).rawSetExtent(new Point(85,85)),sdspw.setContents(startingContent,5),startingContent.layoutSpecDetails.setElasticity(0),startingContent.layoutSpecDetails.setAlignmentToCenter(),(startingContent=new SimplePlainTextWdgt("Drawings Maker",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),startingContent.setFontSize(22),startingContent.isEditable=!0,startingContent.enableSelecting(),sdspw.add(startingContent),sdspw.addDivider(),sdspw.addNormalParagraph("Simple paint app. But you can drop anything inside it (try with the clock) to 'use it as a stamp'."),sdspw.addNormalParagraph("Once you are done editing, click the pencil icon on the window bar."),sdspw.addNormalParagraph("To see an example of use, check out the video here:"),(startingContent=new SimpleVideoLinkWdgt("Docs Maker")).rawSetExtent(new Point(405,50)),sdspw.add(startingContent),startingContent.layoutSpecDetails.setAlignmentToRight(),sdspw.addNormalParagraph("You can also edit the tools you use, by clicking on the pencil icon next to the tool."),sdspw.addNormalParagraph("To see how an example of editing the tools, see this video:"),(startingContent=new SimpleVideoLinkWdgt("Hacking Fizzygum from within Fizzygum")).rawSetExtent(new Point(405,50)),sdspw.add(startingContent),startingContent.layoutSpecDetails.setAlignmentToRight(),(wm=new WindowWdgt(nil,nil,simpleDocument)).rawSetExtent(new Point(365,405)),wm.fullRawMoveFullCenterTo(world.center()),world.add(wm),wm.setTitleWithoutPrependedContentName("Drawings Maker info"),wm.changed(),simpleDocument.disableDragsDropsAndEditing(),world.infoDoc_drawingsMaker_created=!0,simpleDocument.closeFromContainerWindow=function(containerWindow){return containerWindow.destroy()},wm.fullRawMoveToSideOf(nextToThisWidget),wm.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.prototype.createSlidesMakerOneOffInfoWindowNextTo=function(nextToThisWidget){var sdspw,simpleDocument,startingContent,wm;return world.infoDoc_slidesMaker_created?nil:(simpleDocument=new SimpleDocumentWdgt,(sdspw=simpleDocument.simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),sdspw.rawSetExtent(new Point(365,405)),(startingContent=new SimpleSlideIconWdgt).rawSetExtent(new Point(85,85)),sdspw.setContents(startingContent,5),startingContent.layoutSpecDetails.setElasticity(0),startingContent.layoutSpecDetails.setAlignmentToCenter(),(startingContent=new SimplePlainTextWdgt("Slides Maker",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),startingContent.setFontSize(22),startingContent.isEditable=!0,startingContent.enableSelecting(),sdspw.add(startingContent),sdspw.addDivider(),sdspw.addNormalParagraph("Anything you drop inside the slide 'keeps proportion' when resized, which makes it handy to put pins on maps, add callouts, arrange text in custom layouts etc."),sdspw.addNormalParagraph("Once you are done editing, click the pencil icon on the window bar."),sdspw.addNormalParagraph("To see an example of use, check out the video here:"),(startingContent=new SimpleVideoLinkWdgt("Slides Maker")).rawSetExtent(new Point(405,50)),sdspw.add(startingContent),startingContent.layoutSpecDetails.setAlignmentToRight(),(wm=new WindowWdgt(nil,nil,simpleDocument)).rawSetExtent(new Point(365,405)),wm.fullRawMoveFullCenterTo(world.center()),world.add(wm),wm.setTitleWithoutPrependedContentName("Slides Maker info"),wm.changed(),simpleDocument.disableDragsDropsAndEditing(),world.infoDoc_slidesMaker_created=!0,simpleDocument.closeFromContainerWindow=function(containerWindow){return containerWindow.destroy()},wm.fullRawMoveToSideOf(nextToThisWidget),wm.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.prototype.createDashboardsMakerOneOffInfoWindowNextTo=function(nextToThisWidget){var sdspw,simpleDocument,startingContent,wm;return world.infoDoc_dashboardsMaker_created?nil:(simpleDocument=new SimpleDocumentWdgt,(sdspw=simpleDocument.simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),sdspw.rawSetExtent(new Point(365,405)),(startingContent=new DashboardsIconWdgt).rawSetExtent(new Point(85,85)),sdspw.setContents(startingContent,5),startingContent.layoutSpecDetails.setElasticity(0),startingContent.layoutSpecDetails.setAlignmentToCenter(),(startingContent=new SimplePlainTextWdgt("Dashboards Maker",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),startingContent.setFontSize(22),startingContent.isEditable=!0,startingContent.enableSelecting(),sdspw.add(startingContent),sdspw.addDivider(),sdspw.addNormalParagraph("Lets you arrange a choice of graphs/charts/plots/maps in any way you please. The visualisations can also be interactive (as in the 3D plot example, which you can drag to rotate) and/or calculated on the fly.\n\nOn the bar on the left you can find four example graphs and two example maps."),sdspw.addNormalParagraph("Once you are done editing, click the pencil icon on the window bar."),sdspw.addNormalParagraph("To see an example of use, check out the video here:"),(startingContent=new SimpleVideoLinkWdgt("Dashboards Maker")).rawSetExtent(new Point(405,50)),sdspw.add(startingContent),startingContent.layoutSpecDetails.setAlignmentToRight(),(wm=new WindowWdgt(nil,nil,simpleDocument)).rawSetExtent(new Point(365,405)),wm.fullRawMoveFullCenterTo(world.center()),world.add(wm),wm.setTitleWithoutPrependedContentName("Dashboards Maker info"),wm.changed(),simpleDocument.disableDragsDropsAndEditing(),world.infoDoc_dashboardsMaker_created=!0,simpleDocument.closeFromContainerWindow=function(containerWindow){return containerWindow.destroy()},wm.fullRawMoveToSideOf(nextToThisWidget),wm.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.prototype.createPatchProgrammingOneOffInfoWindowNextTo=function(nextToThisWidget){var sdspw,simpleDocument,startingContent,wm;return world.infoDoc_patchProgramming_created?nil:(simpleDocument=new SimpleDocumentWdgt,(sdspw=simpleDocument.simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),sdspw.rawSetExtent(new Point(365,405)),(startingContent=new PatchProgrammingIconWdgt).rawSetExtent(new Point(85,85)),sdspw.setContents(startingContent,5),startingContent.layoutSpecDetails.setElasticity(0),startingContent.layoutSpecDetails.setAlignmentToCenter(),(startingContent=new SimplePlainTextWdgt("Patch Programming",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),startingContent.setFontSize(22),startingContent.isEditable=!0,startingContent.enableSelecting(),sdspw.add(startingContent),sdspw.addDivider(),sdspw.addNormalParagraph("'Patch programming' is a type of visual programming where you simply connect together existing widgets. It's useful to make simple applications/utilities quickly."),sdspw.addNormalParagraph("You can imagine the widgets being 'patched together' by imaginary wires."),sdspw.addNormalParagraph("You can see in the `example docs` folder a °C ↔ °F converter example made with this."),sdspw.addNormalParagraph("Once you are done editing, click the pencil icon on the window bar."),sdspw.addNormalParagraph("To see an example of use, check out the video here:"),(startingContent=new SimpleVideoLinkWdgt("Patch programming")).rawSetExtent(new Point(405,50)),sdspw.add(startingContent),startingContent.layoutSpecDetails.setAlignmentToRight(),(wm=new WindowWdgt(nil,nil,simpleDocument)).rawSetExtent(new Point(365,405)),wm.fullRawMoveFullCenterTo(world.center()),world.add(wm),wm.setTitleWithoutPrependedContentName("Patch Programming info"),wm.changed(),simpleDocument.disableDragsDropsAndEditing(),world.infoDoc_patchProgramming_created=!0,simpleDocument.closeFromContainerWindow=function(containerWindow){return containerWindow.destroy()},wm.fullRawMoveToSideOf(nextToThisWidget),wm.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.prototype.createGenericPanelOneOffInfoWindowNextTo=function(nextToThisWidget){var sdspw,simpleDocument,startingContent,wm;return world.infoDoc_genericPanel_created?nil:(simpleDocument=new SimpleDocumentWdgt,(sdspw=simpleDocument.simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),sdspw.rawSetExtent(new Point(365,405)),(startingContent=new GenericPanelIconWdgt).rawSetExtent(new Point(85,85)),sdspw.setContents(startingContent,5),startingContent.layoutSpecDetails.setElasticity(0),startingContent.layoutSpecDetails.setAlignmentToCenter(),(startingContent=new SimplePlainTextWdgt("Generic Panel",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),startingContent.setFontSize(22),startingContent.isEditable=!0,startingContent.enableSelecting(),sdspw.add(startingContent),sdspw.addDivider(),sdspw.addNormalParagraph("You can use this panel to temporarily hold widgets, or to put together any mix of widgets. It's just a more generic version of slides and dashboards."),sdspw.addNormalParagraph("Once you are done editing, click the pencil icon on the window bar."),sdspw.addNormalParagraph("To see an example of use, check out the video here:"),(startingContent=new SimpleVideoLinkWdgt("Generic Panels")).rawSetExtent(new Point(405,50)),sdspw.add(startingContent),startingContent.layoutSpecDetails.setAlignmentToRight(),(wm=new WindowWdgt(nil,nil,simpleDocument)).rawSetExtent(new Point(365,405)),wm.fullRawMoveFullCenterTo(world.center()),world.add(wm),wm.setTitleWithoutPrependedContentName("Generic Panels info"),wm.changed(),simpleDocument.disableDragsDropsAndEditing(),world.infoDoc_genericPanel_created=!0,simpleDocument.closeFromContainerWindow=function(containerWindow){return containerWindow.destroy()},wm.fullRawMoveToSideOf(nextToThisWidget),wm.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.prototype.createBasementOneOffInfoWindowNextTo=function(nextToThisWidget){var sdspw,simpleDocument,startingContent,wm;return world.infoDoc_basement_created?nil:(simpleDocument=new SimpleDocumentWdgt,(sdspw=simpleDocument.simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),sdspw.rawSetExtent(new Point(365,405)),(startingContent=new BasementIconWdgt).rawSetExtent(new Point(85,85)),sdspw.setContents(startingContent,5),startingContent.layoutSpecDetails.setElasticity(0),startingContent.layoutSpecDetails.setAlignmentToCenter(),(startingContent=new SimplePlainTextWdgt("Basement",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),startingContent.setFontSize(22),startingContent.isEditable=!0,startingContent.enableSelecting(),sdspw.add(startingContent),sdspw.addDivider(),sdspw.addNormalParagraph("Drag things in here to recycle them.\n\nClosed or invisible items also end up in here, and the items that can't be used again are automatically recycled."),(wm=new WindowWdgt(nil,nil,simpleDocument)).rawSetExtent(new Point(365,405)),wm.fullRawMoveFullCenterTo(world.center()),world.add(wm),wm.setTitleWithoutPrependedContentName("Basement info"),wm.changed(),simpleDocument.disableDragsDropsAndEditing(),world.infoDoc_basement_created=!0,simpleDocument.closeFromContainerWindow=function(containerWindow){return containerWindow.destroy()},wm.fullRawMoveToSideOf(nextToThisWidget),wm.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.prototype.createWindowsToolbarOneOffInfoWindowNextTo=function(nextToThisWidget){var sdspw,simpleDocument,startingContent,wm;return world.infoDoc_windowsToolbar_created?nil:(simpleDocument=new SimpleDocumentWdgt,(sdspw=simpleDocument.simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),sdspw.rawSetExtent(new Point(365,405)),(startingContent=new WindowsToolbarIconWdgt).rawSetExtent(new Point(85,85)),sdspw.setContents(startingContent,5),startingContent.layoutSpecDetails.setElasticity(0),startingContent.layoutSpecDetails.setAlignmentToCenter(),(startingContent=new SimplePlainTextWdgt("Types of windows",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),startingContent.setFontSize(22),startingContent.isEditable=!0,startingContent.enableSelecting(),sdspw.add(startingContent),sdspw.addDivider(),sdspw.addNormalParagraph("There are four main types of windows"),sdspw.addBulletPoint("empty windows, with a target area where you can drop other items in"),sdspw.addBulletPoint("windows that crop their content"),sdspw.addBulletPoint("windows with a scroll view on their content"),sdspw.addBulletPoint("windows with an elastic panel, such that when resized the content will resize as well"),sdspw.addNormalParagraph("Check out some examples of use in this video:"),(startingContent=new SimpleVideoLinkWdgt("Using windows")).rawSetExtent(new Point(405,50)),sdspw.add(startingContent),startingContent.layoutSpecDetails.setAlignmentToRight(),(wm=new WindowWdgt(nil,nil,simpleDocument)).rawSetExtent(new Point(365,405)),wm.fullRawMoveFullCenterTo(world.center()),world.add(wm),wm.setTitleWithoutPrependedContentName("Windows info"),wm.changed(),simpleDocument.disableDragsDropsAndEditing(),world.infoDoc_windowsToolbar_created=!0,simpleDocument.closeFromContainerWindow=function(containerWindow){return containerWindow.destroy()},wm.fullRawMoveToSideOf(nextToThisWidget),wm.rememberFractionalSituationInHoldingPanel(),wm)},window.MenusHelper.prototype.createDegreesConverterOpener=function(inWhichFolder){var degreesConverterOpenerLauncher,scriptWdgt,wm;return(scriptWdgt=new ScriptWdgt("\nmenusHelper.createDegreesConverterWindowOrBringItUpIfAlreadyCreated()\n\n")).saveScript(),(wm=new WindowWdgt(nil,nil,scriptWdgt)).setExtent(new Point(460,400)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.fullRawMoveWithin(world),wm.changed(),(degreesConverterOpenerLauncher=new IconicDesktopSystemScriptShortcutWdgt(wm,"°C ↔ °F",new DegreesConverterIconWdgt)).setExtent(new Point(75,75)),null!=inWhichFolder?inWhichFolder.contents.contents.add(degreesConverterOpenerLauncher):world.add(degreesConverterOpenerLauncher),wm},window.MenusHelper.prototype.createSampleDashboardOpener=function(inWhichFolder){var degreesConverterOpenerLauncher,scriptWdgt,wm;return(scriptWdgt=new ScriptWdgt("\nmenusHelper.createSampleDashboardWindowOrBringItUpIfAlreadyCreated()\n\n")).saveScript(),(wm=new WindowWdgt(nil,nil,scriptWdgt)).setExtent(new Point(460,400)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.fullRawMoveWithin(world),wm.changed(),(degreesConverterOpenerLauncher=new IconicDesktopSystemScriptShortcutWdgt(wm,"sample dashb",new GenericShortcutIconWdgt(new DashboardsIconWdgt))).setExtent(new Point(75,75)),null!=inWhichFolder?inWhichFolder.contents.contents.add(degreesConverterOpenerLauncher):world.add(degreesConverterOpenerLauncher),wm},window.MenusHelper.prototype.createSampleDashboardWindowOrBringItUpIfAlreadyCreated=function(){var barPlot,container,dashboardTitle,functionPlot,mapPin1,mapPin2,mapPin3,mapPin4,mapPin5,plot3D,scatterPlot,slideWdgt,slider1,speechBubble1,speechBubble2,usaMap,wm,worldMap;return null==world.sampleDashboardWindow||world.sampleDashboardWindow.destroyed||null==world.sampleDashboardWindow.parent?(slideWdgt=new SimpleSlideWdgt,(container=slideWdgt.stretchableWidgetContainer.contents).rawSetExtent(new Point(725,556)),(scatterPlot=new WindowWdgt(nil,nil,new PlotWithAxesWdgt(new ExampleScatterPlotWdgt),!0,!0)).fullRawMoveTo(container.position().add(new Point(19,86))),scatterPlot.rawSetExtent(new Point(200,200)),container.add(scatterPlot),scatterPlot.rememberFractionalSituationInHoldingPanel(),(functionPlot=new WindowWdgt(nil,nil,new PlotWithAxesWdgt(new ExampleFunctionPlotWdgt),!0,!0)).fullRawMoveTo(container.position().add(new Point(251,86))),functionPlot.rawSetExtent(new Point(200,200)),container.add(functionPlot),functionPlot.rememberFractionalSituationInHoldingPanel(),(barPlot=new WindowWdgt(nil,nil,new PlotWithAxesWdgt(new ExampleBarPlotWdgt),!0,!0)).fullRawMoveTo(container.position().add(new Point(19,327))),barPlot.rawSetExtent(new Point(200,200)),container.add(barPlot),barPlot.rememberFractionalSituationInHoldingPanel(),(plot3D=new WindowWdgt(nil,nil,new Example3DPlotWdgt,!0,!0)).fullRawMoveTo(container.position().add(new Point(491,327))),plot3D.rawSetExtent(new Point(200,150)),container.add(plot3D),plot3D.rememberFractionalSituationInHoldingPanel(),(usaMap=new SimpleUSAMapIconWdgt(new Color(183,183,183))).fullRawMoveTo(container.position().add(new Point(242,355))),usaMap.rawSetExtent(new Point(230,145)),container.add(usaMap),usaMap.rememberFractionalSituationInHoldingPanel(),(mapPin1=new MapPinIconWdgt).fullRawMoveTo(container.position().add(new Point(226,376))),container.add(mapPin1),mapPin1.rememberFractionalSituationInHoldingPanel(),(mapPin2=new MapPinIconWdgt).fullRawMoveTo(container.position().add(new Point(289,363))),container.add(mapPin2),mapPin2.rememberFractionalSituationInHoldingPanel(),(mapPin3=new MapPinIconWdgt).fullRawMoveTo(container.position().add(new Point(323,397))),container.add(mapPin3),mapPin3.rememberFractionalSituationInHoldingPanel(),(mapPin4=new MapPinIconWdgt).fullRawMoveTo(container.position().add(new Point(360,421))),container.add(mapPin4),mapPin4.rememberFractionalSituationInHoldingPanel(),(mapPin5=new MapPinIconWdgt).fullRawMoveTo(container.position().add(new Point(417,374))),container.add(mapPin5),mapPin5.rememberFractionalSituationInHoldingPanel(),(worldMap=new SimpleWorldMapIconWdgt(new Color(183,183,183))).fullRawMoveTo(container.position().add(new Point(464,128))),worldMap.rawSetExtent(new Point(240,125)),container.add(worldMap),worldMap.rememberFractionalSituationInHoldingPanel(),(speechBubble1=new SpeechBubbleWdgt("online")).fullRawMoveTo(container.position().add(new Point(506,123))),speechBubble1.rawSetExtent(new Point(66,42)),container.add(speechBubble1),speechBubble1.rememberFractionalSituationInHoldingPanel(),(speechBubble2=new SpeechBubbleWdgt("offline")).fullRawMoveTo(container.position().add(new Point(590,105))),speechBubble2.rawSetExtent(new Point(66,42)),container.add(speechBubble2),speechBubble2.rememberFractionalSituationInHoldingPanel(),(dashboardTitle=new TextMorph2("Example dashboard with interactive 3D plot")).alignRight(),dashboardTitle.alignMiddle(),dashboardTitle.fullRawMoveTo(container.position().add(new Point(161,6))),dashboardTitle.rawSetExtent(new Point(403,50)),container.add(dashboardTitle),dashboardTitle.rememberFractionalSituationInHoldingPanel(),(slider1=new SliderMorph(nil,nil,nil,nil,nil,!0)).fullRawMoveTo(container.position().add(new Point(491,484))),slider1.rawSetExtent(new Point(201,24)),container.add(slider1),slider1.rememberFractionalSituationInHoldingPanel(),slider1.setTargetAndActionWithOnesPickedFromMenu(nil,nil,plot3D.contents,"setParameter"),(wm=new WindowWdgt(nil,nil,slideWdgt)).fullRawMoveTo(new Point(114,10)),wm.rawSetExtent(new Point(596,592)),world.add(wm),wm.setTitleWithoutPrependedContentName("Sample dashboard"),wm.changed(),slideWdgt.disableDragsDropsAndEditing(),slideWdgt.closeFromContainerWindow=function(containerWindow){return containerWindow.close()},world.sampleDashboardWindow=wm):(world.add(world.sampleDashboardWindow),world.sampleDashboardWindow.bringToForeground(),world.sampleDashboardWindow.fullRawMoveTo(world.hand.position().add(new Point(100,-50))),world.sampleDashboardWindow.fullRawMoveWithin(world),void world.sampleDashboardWindow.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.prototype.createDegreesConverterWindowOrBringItUpIfAlreadyCreated=function(){var cLabel,cText,calc1,calc2,container,fLabel,fText,patchProgrammingWdgt,slider1,slider2,wm;return null==world.degreesConverterWindow||world.degreesConverterWindow.destroyed||null==world.degreesConverterWindow.parent?(32,50,patchProgrammingWdgt=new PatchProgrammingWdgt,(container=patchProgrammingWdgt.stretchableWidgetContainer.contents).rawSetExtent(new Point(584,552)),(slider1=new SliderMorph(nil,nil,nil,nil,nil,!0)).fullRawMoveTo(container.position().add(new Point(75,245))),slider1.rawSetExtent(new Point(20,100)),container.add(slider1),slider1.rememberFractionalSituationInHoldingPanel(),(slider2=new SliderMorph(nil,nil,nil,nil,nil,!0)).fullRawMoveTo(container.position().add(new Point(504,253))),slider2.rawSetExtent(new Point(20,100)),container.add(slider2),slider2.rememberFractionalSituationInHoldingPanel(),(cText=new TextMorph2("0")).fullRawMoveTo(container.position().add(new Point(104,253))),cText.rawSetExtent(new Point(150,75)),container.add(cText),cText.rememberFractionalSituationInHoldingPanel(),(fText=new TextMorph2("0")).fullRawMoveTo(container.position().add(new Point(344,255))),fText.alignRight(),fText.rawSetExtent(new Point(150,75)),container.add(fText),fText.rememberFractionalSituationInHoldingPanel(),(calc1=new WindowWdgt(nil,nil,new CalculatingPatchNodeWdgt("# °C → °F formula\n(in1)->Math.round in1*9/5+32"),!0)).fullRawMoveTo(container.position().add(new Point(164,19))),calc1.rawSetExtent(new Point(241,167)),container.add(calc1),calc1.rememberFractionalSituationInHoldingPanel(),(calc2=new WindowWdgt(nil,nil,new CalculatingPatchNodeWdgt("# °F → °C formula\n(in1)->Math.round (in1-32)*5/9"),!0)).fullRawMoveTo(container.position().add(new Point(164,365))),calc2.rawSetExtent(new Point(241,167)),container.add(calc2),calc2.rememberFractionalSituationInHoldingPanel(),slider1.setTargetAndActionWithOnesPickedFromMenu(nil,nil,cText,"setText"),cText.setTargetAndActionWithOnesPickedFromMenu(nil,nil,calc1.contents,"setInput1"),calc1.contents.setTargetAndActionWithOnesPickedFromMenu(nil,nil,fText,"setText"),fText.setTargetAndActionWithOnesPickedFromMenu(nil,nil,slider2,"setValue"),slider2.setTargetAndActionWithOnesPickedFromMenu(nil,nil,calc2.contents,"setInput1"),calc2.contents.setTargetAndActionWithOnesPickedFromMenu(nil,nil,slider1,"setValue"),(cLabel=new TextMorph2("°C")).fullRawMoveTo(container.position().add(new Point(32,152))),cLabel.rawSetExtent(new Point(90,90)),container.add(cLabel),cLabel.rememberFractionalSituationInHoldingPanel(),(fLabel=new TextMorph2("°F")).fullRawMoveTo(container.position().add(new Point(454,152))),fLabel.rawSetExtent(new Point(90,90)),container.add(fLabel),fLabel.rememberFractionalSituationInHoldingPanel(),(wm=new WindowWdgt(nil,nil,patchProgrammingWdgt)).fullRawMoveTo(new Point(114,10)),wm.rawSetExtent(new Point(596,592)),world.add(wm),wm.setTitleWithoutPrependedContentName("°C ↔ °F converter"),wm.changed(),patchProgrammingWdgt.disableDragsDropsAndEditing(),cText.isEditable=!0,fText.isEditable=!0,patchProgrammingWdgt.closeFromContainerWindow=function(containerWindow){return containerWindow.close()},world.degreesConverterWindow=wm):(world.add(world.degreesConverterWindow),world.degreesConverterWindow.bringToForeground(),world.degreesConverterWindow.fullRawMoveTo(world.hand.position().add(new Point(100,-50))),world.degreesConverterWindow.fullRawMoveWithin(world),void world.degreesConverterWindow.rememberFractionalSituationInHoldingPanel())},window.MenusHelper.prototype.createHowToSaveMessageOpener=function(){var scriptWdgt,toolbarsOpenerLauncher,wm;return(scriptWdgt=new ScriptWdgt("\nmenusHelper.createHowToSaveMessageWindowOrBringItUpIfAlreadyCreated()\n\n")).saveScript(),(wm=new WindowWdgt(nil,nil,scriptWdgt)).setExtent(new Point(460,400)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.fullRawMoveWithin(world),wm.changed(),toolbarsOpenerLauncher=new IconicDesktopSystemScriptShortcutWdgt(wm,"How to save?",new FloppyDiskIconWdgt),world.add(toolbarsOpenerLauncher),toolbarsOpenerLauncher.setExtent(new Point(75,75)),toolbarsOpenerLauncher.fullChanged(),wm},window.MenusHelper.prototype.createHowToSaveMessageWindowOrBringItUpIfAlreadyCreated=function(){var sdspw,simpleDocument,startingContent,wm;return null==world.howToSaveDocWindow||world.howToSaveDocWindow.destroyed||null==world.howToSaveDocWindow.parent?(simpleDocument=new SimpleDocumentWdgt,(sdspw=simpleDocument.simpleDocumentScrollPanel).fullRawMoveTo(new Point(114,10)),sdspw.rawSetExtent(new Point(365,405)),(startingContent=new FloppyDiskIconWdgt).rawSetExtent(new Point(85,85)),sdspw.setContents(startingContent,5),startingContent.layoutSpecDetails.setElasticity(0),startingContent.layoutSpecDetails.setAlignmentToCenter(),(startingContent=new SimplePlainTextWdgt("How to save?",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).alignCenter(),startingContent.setFontSize(24),startingContent.isEditable=!0,startingContent.enableSelecting(),sdspw.add(startingContent),sdspw.addDivider(),sdspw.addNormalParagraph("There are a couple of ways to save data in Fizzygum.¹\n\nHowever, \"in-house\" stable saving solutions are only available in private versions.²\n\nIn the meantime that these solutions make their way into the public version, the Fizzygum team can consult for you to tailor 'saving' functionality to your needs (save to file, save to cloud, connect to databases etc. ).\n\nPlease enquiry via one of the Fizzygum contacts here:"),sdspw.addSpacer(),(startingContent=new SimpleLinkWdgt("contacts")).rawSetExtent(new Point(405,50)),sdspw.add(startingContent),startingContent.layoutSpecDetails.setAlignmentToRight(),sdspw.addSpacer(),(startingContent=new SimplePlainTextWdgt("Footnotes",nil,nil,nil,nil,nil,WorldMorph.preferencesAndSettings.editableItemBackgroundColor,1)).toggleWeight(),startingContent.isEditable=!0,startingContent.enableSelecting(),startingContent.toggleHeaderLine(),sdspw.add(startingContent),sdspw.addSpacer(),sdspw.addNormalParagraph('¹ Saving solutions:\n1) saving data with existing formats (e.g. markdown etc.). Advantages: compatibility. Disadvantages: works only with "plain" documents (no live documents, no documents within documents etc.)\n2) serialising objects graph. Advantages: fidelity. Disadvantages: needs some management of versioning of Fizzygum platform and documents\n3) deducing source code to generate content. Advantages: compactness, inspectability of source code, high-level semantics of source code preserved. Disadvantages: only possible with relatively simple objects.\n\n² Why private beta:\nProliferation of saving solutions done without our help could be detrimental to the Fizzygum platform (due to degraded experience on third party sites, incompatibilities between sites, migration issues, security issues, etc.), hence the Fizzygum team decided to withhold this functionality from public until we can package an open turn-key solution that minimises misuse and sub-par experiences.'),(wm=new WindowWdgt(nil,nil,simpleDocument)).fullRawMoveTo(new Point(114,10)),wm.rawSetExtent(new Point(365,447)),world.add(wm),wm.rememberFractionalSituationInHoldingPanel(),wm.setTitleWithoutPrependedContentName("How to save?"),wm.changed(),simpleDocument.disableDragsDropsAndEditing(),simpleDocument.closeFromContainerWindow=function(containerWindow){return containerWindow.close()},world.howToSaveDocWindow=wm):(world.add(world.howToSaveDocWindow),world.howToSaveDocWindow.bringToForeground(),world.howToSaveDocWindow.fullRawMoveTo(world.hand.position().add(new Point(100,-50))),world.howToSaveDocWindow.fullRawMoveWithin(world),void world.howToSaveDocWindow.rememberFractionalSituationInHoldingPanel())};var ParentStainerMixin;ParentStainerMixin={onceAddedClassProperties:function(fromClass){return this.addInstanceProperties(fromClass,{setColor:function(theColor,ignored,connectionsCalculationToken,superCall){var ref;if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,window[this[arguments.callee.name+"_class_injected_in"]].__super__[arguments.callee.name].call(this,theColor,ignored,connectionsCalculationToken,!0),null!=(ref=this.parent)?ref.setColor(theColor,ignored,connectionsCalculationToken):void 0}})}},window.AlignCenterButtonWdgt=function(color){this.color=color,AlignCenterButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new AlignCenterIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.actionableAsThumbnail=!0,this.editorContentPropertyChangerButton=!0,this.toolTipMessage="align center","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AlignCenterButtonWdgt,"name",{value:"AlignCenterButtonWdgt"}),window.AlignCenterButtonWdgt.instances=[],window.AlignCenterButtonWdgt.__super__=window.Widget.prototype,window.AlignCenterButtonWdgt=extend(window.AlignCenterButtonWdgt,window.Widget),window.AlignCenterButtonWdgt.augmentWith(window.HighlightableMixin,"AlignCenterButtonWdgt"),window.AlignCenterButtonWdgt.augmentWith(window.ParentStainerMixin,"AlignCenterButtonWdgt"),window.AlignCenterButtonWdgt.prototype.color_hover=new Color(90,90,90),window.AlignCenterButtonWdgt.prototype.color_pressed=new Color(128,128,128),window.AlignCenterButtonWdgt.prototype.color_normal=new Color(230,230,230),window.AlignCenterButtonWdgt.prototype.mouseClickLeft=function(){var lastNonTextPropertyChangerButtonClickedOrDropped,ref;return null!=(null!=(ref=world.lastNonTextPropertyChangerButtonClickedOrDropped)?ref.alignCenter:void 0)?world.lastNonTextPropertyChangerButtonClickedOrDropped.alignCenter():null!=world.lastNonTextPropertyChangerButtonClickedOrDropped&&null!=(null!=(lastNonTextPropertyChangerButtonClickedOrDropped=world.lastNonTextPropertyChangerButtonClickedOrDropped.findRootForGrab())?lastNonTextPropertyChangerButtonClickedOrDropped.layoutSpec:void 0)&&lastNonTextPropertyChangerButtonClickedOrDropped.layoutSpec===LayoutSpec.ATTACHEDAS_VERTICAL_STACK_ELEMENT?lastNonTextPropertyChangerButtonClickedOrDropped.layoutSpecDetails.setAlignmentToCenter():void 0},window.AlignLeftButtonWdgt=function(color){this.color=color,AlignLeftButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new AlignLeftIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.actionableAsThumbnail=!0,this.editorContentPropertyChangerButton=!0,this.toolTipMessage="align left","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AlignLeftButtonWdgt,"name",{value:"AlignLeftButtonWdgt"}),window.AlignLeftButtonWdgt.instances=[],window.AlignLeftButtonWdgt.__super__=window.Widget.prototype,window.AlignLeftButtonWdgt=extend(window.AlignLeftButtonWdgt,window.Widget),window.AlignLeftButtonWdgt.augmentWith(window.HighlightableMixin,"AlignLeftButtonWdgt"),window.AlignLeftButtonWdgt.augmentWith(window.ParentStainerMixin,"AlignLeftButtonWdgt"),window.AlignLeftButtonWdgt.prototype.color_hover=new Color(90,90,90),window.AlignLeftButtonWdgt.prototype.color_pressed=new Color(128,128,128),window.AlignLeftButtonWdgt.prototype.color_normal=new Color(230,230,230),window.AlignLeftButtonWdgt.prototype.mouseClickLeft=function(){var lastNonTextPropertyChangerButtonClickedOrDropped,ref;return null!=(null!=(ref=world.lastNonTextPropertyChangerButtonClickedOrDropped)?ref.alignLeft:void 0)?world.lastNonTextPropertyChangerButtonClickedOrDropped.alignLeft():null!=world.lastNonTextPropertyChangerButtonClickedOrDropped&&null!=(null!=(lastNonTextPropertyChangerButtonClickedOrDropped=world.lastNonTextPropertyChangerButtonClickedOrDropped.findRootForGrab())?lastNonTextPropertyChangerButtonClickedOrDropped.layoutSpec:void 0)&&lastNonTextPropertyChangerButtonClickedOrDropped.layoutSpec===LayoutSpec.ATTACHEDAS_VERTICAL_STACK_ELEMENT?lastNonTextPropertyChangerButtonClickedOrDropped.layoutSpecDetails.setAlignmentToLeft():void 0},window.AlignRightButtonWdgt=function(color){this.color=color,AlignRightButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new AlignRightIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.actionableAsThumbnail=!0,this.editorContentPropertyChangerButton=!0,this.toolTipMessage="align right","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AlignRightButtonWdgt,"name",{value:"AlignRightButtonWdgt"}),window.AlignRightButtonWdgt.instances=[],window.AlignRightButtonWdgt.__super__=window.Widget.prototype,window.AlignRightButtonWdgt=extend(window.AlignRightButtonWdgt,window.Widget),window.AlignRightButtonWdgt.augmentWith(window.HighlightableMixin,"AlignRightButtonWdgt"),window.AlignRightButtonWdgt.augmentWith(window.ParentStainerMixin,"AlignRightButtonWdgt"),window.AlignRightButtonWdgt.prototype.color_hover=new Color(90,90,90),window.AlignRightButtonWdgt.prototype.color_pressed=new Color(128,128,128),window.AlignRightButtonWdgt.prototype.color_normal=new Color(230,230,230),window.AlignRightButtonWdgt.prototype.mouseClickLeft=function(){var lastNonTextPropertyChangerButtonClickedOrDropped,ref;return null!=(null!=(ref=world.lastNonTextPropertyChangerButtonClickedOrDropped)?ref.alignRight:void 0)?world.lastNonTextPropertyChangerButtonClickedOrDropped.alignRight():null!=world.lastNonTextPropertyChangerButtonClickedOrDropped&&null!=(null!=(lastNonTextPropertyChangerButtonClickedOrDropped=world.lastNonTextPropertyChangerButtonClickedOrDropped.findRootForGrab())?lastNonTextPropertyChangerButtonClickedOrDropped.layoutSpec:void 0)&&lastNonTextPropertyChangerButtonClickedOrDropped.layoutSpec===LayoutSpec.ATTACHEDAS_VERTICAL_STACK_ELEMENT?lastNonTextPropertyChangerButtonClickedOrDropped.layoutSpecDetails.setAlignmentToRight():void 0},window.CreatorButtonWdgt=function(){CreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.actionableAsThumbnail=!0,this.editorContentPropertyChangerButton=!0,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CreatorButtonWdgt,"name",{value:"CreatorButtonWdgt"}),window.CreatorButtonWdgt.instances=[],window.CreatorButtonWdgt.__super__=window.Widget.prototype,window.CreatorButtonWdgt=extend(window.CreatorButtonWdgt,window.Widget),window.CreatorButtonWdgt.augmentWith(window.HighlightableMixin,"CreatorButtonWdgt"),window.CreatorButtonWdgt.augmentWith(window.ParentStainerMixin,"CreatorButtonWdgt"),window.CreatorButtonWdgt.augmentWith(window.WidgetCreatorAndSmartPlacerOnClickMixin,"CreatorButtonWdgt"),window.CreatorButtonWdgt.prototype.color_hover=new Color(90,90,90),window.CreatorButtonWdgt.prototype.color_pressed=new Color(128,128,128),window.CreatorButtonWdgt.prototype.color_normal=new Color(230,230,230),window.CreatorButtonWdgt.prototype.grabbedWidgetSwitcheroo=function(){return this.createWidgetToBeHandled()},window.CreatorButtonWdgt.prototype.grabsToParentWhenDragged=function(){return!1},window.BarPlotWithAxesCreatorButtonWdgt=function(){BarPlotWithAxesCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new BarPlotIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="bar plot","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BarPlotWithAxesCreatorButtonWdgt,"name",{value:"BarPlotWithAxesCreatorButtonWdgt"}),window.BarPlotWithAxesCreatorButtonWdgt.instances=[],window.BarPlotWithAxesCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.BarPlotWithAxesCreatorButtonWdgt=extend(window.BarPlotWithAxesCreatorButtonWdgt,window.CreatorButtonWdgt),window.BarPlotWithAxesCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var switcherooWm;return(switcherooWm=new WindowWdgt(nil,nil,new PlotWithAxesWdgt(new ExampleBarPlotWdgt),!0,!0)).rawSetExtent(new Point(200,200)),switcherooWm},window.BoldButtonWdgt=function(){BoldButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new BoldIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.actionableAsThumbnail=!0,this.editorContentPropertyChangerButton=!0,this.toolTipMessage="bold","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BoldButtonWdgt,"name",{value:"BoldButtonWdgt"}),window.BoldButtonWdgt.instances=[],window.BoldButtonWdgt.__super__=window.Widget.prototype,window.BoldButtonWdgt=extend(window.BoldButtonWdgt,window.Widget),window.BoldButtonWdgt.augmentWith(window.HighlightableMixin,"BoldButtonWdgt"),window.BoldButtonWdgt.augmentWith(window.ParentStainerMixin,"BoldButtonWdgt"),window.BoldButtonWdgt.prototype.color_hover=new Color(90,90,90),window.BoldButtonWdgt.prototype.color_pressed=new Color(128,128,128),window.BoldButtonWdgt.prototype.color_normal=new Color(230,230,230),window.BoldButtonWdgt.prototype.mouseClickLeft=function(){var ref;if(null!=(null!=(ref=world.lastNonTextPropertyChangerButtonClickedOrDropped)?ref.toggleWeight:void 0))return world.lastNonTextPropertyChangerButtonClickedOrDropped.toggleWeight()},window.CalculatingNodeCreatorButtonWdgt=function(){CalculatingNodeCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new CalculatingNodeIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="calculating node","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CalculatingNodeCreatorButtonWdgt,"name",{value:"CalculatingNodeCreatorButtonWdgt"}),window.CalculatingNodeCreatorButtonWdgt.instances=[],window.CalculatingNodeCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.CalculatingNodeCreatorButtonWdgt=extend(window.CalculatingNodeCreatorButtonWdgt,window.CreatorButtonWdgt),window.CalculatingNodeCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var switcherooWm;return(switcherooWm=new WindowWdgt(nil,nil,new CalculatingPatchNodeWdgt,!0)).rawSetExtent(new Point(260,265)),switcherooWm},window.ChangeFontButtonWdgt=function(simpleDocument){this.simpleDocument=simpleDocument,ChangeFontButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ChangeFontIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.actionableAsThumbnail=!0,this.editorContentPropertyChangerButton=!0,this.toolTipMessage="change font","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ChangeFontButtonWdgt,"name",{value:"ChangeFontButtonWdgt"}),window.ChangeFontButtonWdgt.instances=[],window.ChangeFontButtonWdgt.__super__=window.IconMorph.prototype,window.ChangeFontButtonWdgt=extend(window.ChangeFontButtonWdgt,window.IconMorph),window.ChangeFontButtonWdgt.augmentWith(window.HighlightableMixin,"ChangeFontButtonWdgt"),window.ChangeFontButtonWdgt.augmentWith(window.ParentStainerMixin,"ChangeFontButtonWdgt"),window.ChangeFontButtonWdgt.prototype.color_hover=new Color(90,90,90),window.ChangeFontButtonWdgt.prototype.color_pressed=new Color(128,128,128),window.ChangeFontButtonWdgt.prototype.color_normal=new Color(230,230,230),window.ChangeFontButtonWdgt.prototype.simpleDocument=nil,window.ChangeFontButtonWdgt.prototype.mouseClickLeft=function(){var menu;return null==this.simpleDocument.fontSelectionMenu||this.simpleDocument.fontSelectionMenu.destroyed?((menu=new MenuMorph(this,!1,this,!0,!0,"Fonts")).addMenuItem("Arial",!0,this,"setFontName",nil,nil,nil,nil,nil,"justArialFontStack"),menu.addMenuItem("Times",!0,this,"setFontName",nil,nil,nil,nil,nil,"timesFontStack"),menu.addMenuItem("Georgia",!0,this,"setFontName",nil,nil,nil,nil,nil,"georgiaFontStack"),menu.addMenuItem("Garamo",!0,this,"setFontName",nil,nil,nil,nil,nil,"garamoFontStack"),menu.addMenuItem("Helve",!0,this,"setFontName",nil,nil,nil,nil,nil,"helveFontStack"),menu.addMenuItem("Verda",!0,this,"setFontName",nil,nil,nil,nil,nil,"verdaFontStack"),menu.addMenuItem("Treby",!0,this,"setFontName",nil,nil,nil,nil,nil,"trebuFontStack"),menu.addMenuItem("Heavy",!0,this,"setFontName",nil,nil,nil,nil,nil,"heavyFontStack"),menu.addMenuItem("Mono",!0,this,"setFontName",nil,nil,nil,nil,nil,"monoFontStack"),menu.popUp(this.position().subtract(new Point(80,0)),world),menu.editorContentPropertyChangerButton=!0,menu.forAllChildrenBottomToTop(function(eachDescendent){return eachDescendent.editorContentPropertyChangerButton=!0}),this.simpleDocument.fontSelectionMenu=menu):this.simpleDocument.fontSelectionMenu.popUp(this.position().subtract(new Point(80,0)),world)},window.ChangeFontButtonWdgt.prototype.setFontName=function(ignored1,ignored2,theNewFontName){var ref,widgetClickedLast;if(null!=(null!=(ref=world.lastNonTextPropertyChangerButtonClickedOrDropped)?ref.setFontName:void 0))return(widgetClickedLast=world.lastNonTextPropertyChangerButtonClickedOrDropped).setFontName(nil,ignored2,widgetClickedLast[theNewFontName])},window.CloseIconButtonMorph=function(target){this.target=target,CloseIconButtonMorph.__super__.constructor.call(this,!0,this,"actOnClick",new Widget),this.color_hover=new Color(255,0,0),this.color_pressed=this.color_hover,this.appearance=new CloseIconAppearance(this),this.toolTipMessage="close window","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CloseIconButtonMorph,"name",{value:"CloseIconButtonMorph"}),window.CloseIconButtonMorph.instances=[],window.CloseIconButtonMorph.__super__=window.EmptyButtonMorph.prototype,window.CloseIconButtonMorph=extend(window.CloseIconButtonMorph,window.EmptyButtonMorph),window.CloseIconButtonMorph.prototype.actOnClick=function(){var ref;if(null!=this.parent)return this.parent instanceof WindowWdgt&&null!=this.parent.contents?this.parent.closeFromWindowBar():null!=(ref=this.parent)?ref.close():void 0},window.CollapseIconButtonMorph=function(target){this.target=target,CollapseIconButtonMorph.__super__.constructor.call(this,!0,this,"actOnClick",new Widget),this.color_hover=new Color(255,153,0),this.color_pressed=this.color_hover,this.appearance=new CollapseIconAppearance(this),this.toolTipMessage="collapse window","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CollapseIconButtonMorph,"name",{value:"CollapseIconButtonMorph"}),window.CollapseIconButtonMorph.instances=[],window.CollapseIconButtonMorph.__super__=window.EmptyButtonMorph.prototype,window.CollapseIconButtonMorph=extend(window.CollapseIconButtonMorph,window.EmptyButtonMorph),window.CollapseIconButtonMorph.prototype.actOnClick=function(){return this.parent.parent.contents.collapse()},window.ColorPaletteNodeCreatorButtonWdgt=function(){ColorPaletteNodeCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ColorPalettePatchProgrammingIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="color palette","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ColorPaletteNodeCreatorButtonWdgt,"name",{value:"ColorPaletteNodeCreatorButtonWdgt"}),window.ColorPaletteNodeCreatorButtonWdgt.instances=[],window.ColorPaletteNodeCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.ColorPaletteNodeCreatorButtonWdgt=extend(window.ColorPaletteNodeCreatorButtonWdgt,window.CreatorButtonWdgt),window.ColorPaletteNodeCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var switcherooWm;return(switcherooWm=new WindowWdgt(nil,nil,new ColorPaletteMorph,!0)).rawSetExtent(new Point(200,200)),switcherooWm},window.DecreaseFontSizeButtonWdgt=function(){DecreaseFontSizeButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new DecreaseFontSizeIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.actionableAsThumbnail=!0,this.editorContentPropertyChangerButton=!0,this.toolTipMessage="decrease font size","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DecreaseFontSizeButtonWdgt,"name",{value:"DecreaseFontSizeButtonWdgt"}),window.DecreaseFontSizeButtonWdgt.instances=[],window.DecreaseFontSizeButtonWdgt.__super__=window.IconMorph.prototype,window.DecreaseFontSizeButtonWdgt=extend(window.DecreaseFontSizeButtonWdgt,window.IconMorph),window.DecreaseFontSizeButtonWdgt.augmentWith(window.HighlightableMixin,"DecreaseFontSizeButtonWdgt"),window.DecreaseFontSizeButtonWdgt.augmentWith(window.ParentStainerMixin,"DecreaseFontSizeButtonWdgt"),window.DecreaseFontSizeButtonWdgt.prototype.color_hover=new Color(90,90,90),window.DecreaseFontSizeButtonWdgt.prototype.color_pressed=new Color(128,128,128),window.DecreaseFontSizeButtonWdgt.prototype.color_normal=new Color(230,230,230),window.DecreaseFontSizeButtonWdgt.prototype.mouseClickLeft=function(){var ref,widgetClickedLast;if(null!=(null!=(ref=world.lastNonTextPropertyChangerButtonClickedOrDropped)?ref.originallySetFontSize:void 0))return(widgetClickedLast=world.lastNonTextPropertyChangerButtonClickedOrDropped).originallySetFontSize>90?widgetClickedLast.setFontSize(widgetClickedLast.originallySetFontSize-10):widgetClickedLast.originallySetFontSize>80?widgetClickedLast.setFontSize(80):widgetClickedLast.originallySetFontSize>72?widgetClickedLast.setFontSize(72):widgetClickedLast.originallySetFontSize>48?widgetClickedLast.setFontSize(48):widgetClickedLast.originallySetFontSize>36?widgetClickedLast.setFontSize(36):widgetClickedLast.originallySetFontSize>28?widgetClickedLast.setFontSize(28):widgetClickedLast.originallySetFontSize>12?widgetClickedLast.setFontSize(widgetClickedLast.originallySetFontSize-2):widgetClickedLast.setFontSize(widgetClickedLast.originallySetFontSize-1)},window.EditIconButtonWdgt=function(target){this.target=target,EditIconButtonWdgt.__super__.constructor.call(this,!0,this,"actOnClick",new Widget),this.color_hover=new Color(255,153,0),this.color_pressed=this.color_hover,this.appearance=new PencilIconAppearance(this),this.toolTipMessage="edit contents","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.EditIconButtonWdgt,"name",{value:"EditIconButtonWdgt"}),window.EditIconButtonWdgt.instances=[],window.EditIconButtonWdgt.__super__=window.EmptyButtonMorph.prototype,window.EditIconButtonWdgt=extend(window.EditIconButtonWdgt,window.EmptyButtonMorph),window.EditIconButtonWdgt.prototype.actOnClick=function(){var ref;if(null!=this.parent&&this.parent instanceof WindowWdgt)return null!=(ref=this.parent.contents)&&"function"==typeof ref.editButtonPressedFromWindowBar?ref.editButtonPressedFromWindowBar():void 0},window.ElasticWindowCreatorButtonWdgt=function(){ElasticWindowCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ElasticWindowIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="elastic panel","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ElasticWindowCreatorButtonWdgt,"name",{value:"ElasticWindowCreatorButtonWdgt"}),window.ElasticWindowCreatorButtonWdgt.instances=[],window.ElasticWindowCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.ElasticWindowCreatorButtonWdgt=extend(window.ElasticWindowCreatorButtonWdgt,window.CreatorButtonWdgt),window.ElasticWindowCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var genericPanel,switcherooWm;return genericPanel=new StretchableEditableWdgt,(switcherooWm=new WindowWdgt(nil,nil,genericPanel,!0,!0)).setTitleWithoutPrependedContentName("elastic panel"),switcherooWm.rawSetExtent(new Point(200,200)),switcherooWm},window.EmptyWindowCreatorButtonWdgt=function(){EmptyWindowCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new EmptyWindowIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="empty window","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.EmptyWindowCreatorButtonWdgt,"name",{value:"EmptyWindowCreatorButtonWdgt"}),window.EmptyWindowCreatorButtonWdgt.instances=[],window.EmptyWindowCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.EmptyWindowCreatorButtonWdgt=extend(window.EmptyWindowCreatorButtonWdgt,window.CreatorButtonWdgt),window.EmptyWindowCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var switcherooWm;return(switcherooWm=new WindowWdgt(nil,nil,nil,!0,!0)).rawSetExtent(new Point(200,200)),switcherooWm},window.ExternalIconButtonWdgt=function(target){this.target=target,ExternalIconButtonWdgt.__super__.constructor.call(this,!0,this,"actOnClick",new Widget),this.color_hover=new Color(255,153,0),this.color_pressed=this.color_hover,this.appearance=new ExternalIconAppearance(this),this.toolTipMessage="make this window droppable\ninto other documents","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ExternalIconButtonWdgt,"name",{value:"ExternalIconButtonWdgt"}),window.ExternalIconButtonWdgt.instances=[],window.ExternalIconButtonWdgt.__super__=window.EmptyButtonMorph.prototype,window.ExternalIconButtonWdgt=extend(window.ExternalIconButtonWdgt,window.EmptyButtonMorph),window.ExternalIconButtonWdgt.prototype.actOnClick=function(){var ref;if(null!=(null!=(ref=this.parent)?ref.parent:void 0)&&this.parent.parent instanceof WindowWdgt)return this.parent.parent.makeInternal()},window.ExternalLinkButtonWdgt=function(color){this.color=color,ExternalLinkButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ExternalLinkIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ExternalLinkButtonWdgt,"name",{value:"ExternalLinkButtonWdgt"}),window.ExternalLinkButtonWdgt.instances=[],window.ExternalLinkButtonWdgt.__super__=window.IconMorph.prototype,window.ExternalLinkButtonWdgt=extend(window.ExternalLinkButtonWdgt,window.IconMorph),window.ExternalLinkButtonWdgt.prototype.mouseClickLeft=function(){if(null!=this.parent&&this.parent instanceof SimpleLinkWdgt)return window.open(this.parent.outputTextArea.text)},window.ExternalLinkButtonWdgt.prototype.mouseEnter=function(){return world.worldCanvas.style.cursor="pointer"},window.ExternalLinkButtonWdgt.prototype.mouseLeave=function(){return world.worldCanvas.style.cursor=""},window.ExternalLinkCreatorButtonWdgt=function(){ExternalLinkCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ExternalLinkIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="external link","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ExternalLinkCreatorButtonWdgt,"name",{value:"ExternalLinkCreatorButtonWdgt"}),window.ExternalLinkCreatorButtonWdgt.instances=[],window.ExternalLinkCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.ExternalLinkCreatorButtonWdgt=extend(window.ExternalLinkCreatorButtonWdgt,window.CreatorButtonWdgt),window.ExternalLinkCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var switcheroo;return(switcheroo=new SimpleLinkWdgt).fullRawMoveTo(this.position()),switcheroo.rawSetExtent(new Point(330,65)),switcheroo},window.FormatAsCodeButtonWdgt=function(){FormatAsCodeButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new FormatAsCodeIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.actionableAsThumbnail=!0,this.editorContentPropertyChangerButton=!0,this.toolTipMessage="format as code","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FormatAsCodeButtonWdgt,"name",{value:"FormatAsCodeButtonWdgt"}),window.FormatAsCodeButtonWdgt.instances=[],window.FormatAsCodeButtonWdgt.__super__=window.IconMorph.prototype,window.FormatAsCodeButtonWdgt=extend(window.FormatAsCodeButtonWdgt,window.IconMorph),window.FormatAsCodeButtonWdgt.augmentWith(window.HighlightableMixin,"FormatAsCodeButtonWdgt"),window.FormatAsCodeButtonWdgt.augmentWith(window.ParentStainerMixin,"FormatAsCodeButtonWdgt"),window.FormatAsCodeButtonWdgt.prototype.color_hover=new Color(90,90,90),window.FormatAsCodeButtonWdgt.prototype.color_pressed=new Color(128,128,128),window.FormatAsCodeButtonWdgt.prototype.color_normal=new Color(230,230,230),window.FormatAsCodeButtonWdgt.prototype.mouseClickLeft=function(){var ref,widgetClickedLast;if(null!=(null!=(ref=world.lastNonTextPropertyChangerButtonClickedOrDropped)?ref.setFontName:void 0))return(widgetClickedLast=world.lastNonTextPropertyChangerButtonClickedOrDropped).fontName!==widgetClickedLast.monoFontStack?widgetClickedLast.setFontName(nil,nil,widgetClickedLast.monoFontStack):widgetClickedLast.setFontName(nil,nil,widgetClickedLast.justArialFontStack)},window.FunctionPlotWithAxesCreatorButtonWdgt=function(){FunctionPlotWithAxesCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new FunctionPlotIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="function plot","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FunctionPlotWithAxesCreatorButtonWdgt,"name",{value:"FunctionPlotWithAxesCreatorButtonWdgt"}),window.FunctionPlotWithAxesCreatorButtonWdgt.instances=[],window.FunctionPlotWithAxesCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.FunctionPlotWithAxesCreatorButtonWdgt=extend(window.FunctionPlotWithAxesCreatorButtonWdgt,window.CreatorButtonWdgt),window.FunctionPlotWithAxesCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var switcherooWm;return(switcherooWm=new WindowWdgt(nil,nil,new PlotWithAxesWdgt(new ExampleFunctionPlotWdgt),!0,!0)).rawSetExtent(new Point(200,200)),switcherooWm},window.GrayscalePaletteNodeCreatorButtonWdgt=function(){GrayscalePaletteNodeCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new GrayscalePalettePatchProgrammingIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="grayscale palette","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.GrayscalePaletteNodeCreatorButtonWdgt,"name",{value:"GrayscalePaletteNodeCreatorButtonWdgt"}),window.GrayscalePaletteNodeCreatorButtonWdgt.instances=[],window.GrayscalePaletteNodeCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.GrayscalePaletteNodeCreatorButtonWdgt=extend(window.GrayscalePaletteNodeCreatorButtonWdgt,window.CreatorButtonWdgt),window.GrayscalePaletteNodeCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var switcherooWm;return(switcherooWm=new WindowWdgt(nil,nil,new GrayPaletteMorph,!0)).rawSetExtent(new Point(200,200)),switcherooWm},window.IncreaseFontSizeButtonWdgt=function(){IncreaseFontSizeButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new IncreaseFontSizeIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.actionableAsThumbnail=!0,this.editorContentPropertyChangerButton=!0,this.toolTipMessage="increase font size","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.IncreaseFontSizeButtonWdgt,"name",{value:"IncreaseFontSizeButtonWdgt"}),window.IncreaseFontSizeButtonWdgt.instances=[],window.IncreaseFontSizeButtonWdgt.__super__=window.IconMorph.prototype,window.IncreaseFontSizeButtonWdgt=extend(window.IncreaseFontSizeButtonWdgt,window.IconMorph),window.IncreaseFontSizeButtonWdgt.augmentWith(window.HighlightableMixin,"IncreaseFontSizeButtonWdgt"),window.IncreaseFontSizeButtonWdgt.augmentWith(window.ParentStainerMixin,"IncreaseFontSizeButtonWdgt"),window.IncreaseFontSizeButtonWdgt.prototype.color_hover=new Color(90,90,90),window.IncreaseFontSizeButtonWdgt.prototype.color_pressed=new Color(128,128,128),window.IncreaseFontSizeButtonWdgt.prototype.color_normal=new Color(230,230,230),window.IncreaseFontSizeButtonWdgt.prototype.mouseClickLeft=function(){var ref,widgetClickedLast;if(null!=(null!=(ref=world.lastNonTextPropertyChangerButtonClickedOrDropped)?ref.originallySetFontSize:void 0))return(widgetClickedLast=world.lastNonTextPropertyChangerButtonClickedOrDropped).originallySetFontSize<12?widgetClickedLast.setFontSize(widgetClickedLast.originallySetFontSize+1):widgetClickedLast.originallySetFontSize<28?widgetClickedLast.setFontSize(widgetClickedLast.originallySetFontSize+2):widgetClickedLast.originallySetFontSize<36?widgetClickedLast.setFontSize(36):widgetClickedLast.originallySetFontSize<48?widgetClickedLast.setFontSize(48):widgetClickedLast.originallySetFontSize<72?widgetClickedLast.setFontSize(72):widgetClickedLast.originallySetFontSize<80?widgetClickedLast.setFontSize(80):widgetClickedLast.setFontSize(widgetClickedLast.originallySetFontSize+10)},window.InternalIconButtonWdgt=function(target){this.target=target,InternalIconButtonWdgt.__super__.constructor.call(this,!0,this,"actOnClick",new Widget),this.color_hover=new Color(255,153,0),this.color_pressed=this.color_hover,this.appearance=new InternalIconAppearance(this),this.toolTipMessage="pop-out window from documents,\nmake it un-droppable\ninto other documents","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.InternalIconButtonWdgt,"name",{value:"InternalIconButtonWdgt"}),window.InternalIconButtonWdgt.instances=[],window.InternalIconButtonWdgt.__super__=window.EmptyButtonMorph.prototype,window.InternalIconButtonWdgt=extend(window.InternalIconButtonWdgt,window.EmptyButtonMorph),window.InternalIconButtonWdgt.prototype.actOnClick=function(){var ref;if(null!=(null!=(ref=this.parent)?ref.parent:void 0)&&this.parent.parent instanceof WindowWdgt)return this.parent.parent.makeExternal()},window.ItalicButtonWdgt=function(color){this.color=color,ItalicButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ItalicIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.actionableAsThumbnail=!0,this.editorContentPropertyChangerButton=!0,this.toolTipMessage="italic","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ItalicButtonWdgt,"name",{value:"ItalicButtonWdgt"}),window.ItalicButtonWdgt.instances=[],window.ItalicButtonWdgt.__super__=window.Widget.prototype,window.ItalicButtonWdgt=extend(window.ItalicButtonWdgt,window.Widget),window.ItalicButtonWdgt.augmentWith(window.HighlightableMixin,"ItalicButtonWdgt"),window.ItalicButtonWdgt.augmentWith(window.ParentStainerMixin,"ItalicButtonWdgt"),window.ItalicButtonWdgt.prototype.color_hover=new Color(90,90,90),window.ItalicButtonWdgt.prototype.color_pressed=new Color(128,128,128),window.ItalicButtonWdgt.prototype.color_normal=new Color(230,230,230),window.ItalicButtonWdgt.prototype.mouseClickLeft=function(){var ref;if(null!=(null!=(ref=world.lastNonTextPropertyChangerButtonClickedOrDropped)?ref.toggleItalic:void 0))return world.lastNonTextPropertyChangerButtonClickedOrDropped.toggleItalic()},window.ToolbarCreatorButtonWdgt=function(){window.ToolbarCreatorButtonWdgt.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ToolbarCreatorButtonWdgt,"name",{value:"ToolbarCreatorButtonWdgt"}),window.ToolbarCreatorButtonWdgt.instances=[],window.ToolbarCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.ToolbarCreatorButtonWdgt=extend(window.ToolbarCreatorButtonWdgt,window.CreatorButtonWdgt),window.ToolbarCreatorButtonWdgt.prototype.mouseClickLeft=function(ignored,ignored2,ignored3,ignored4,ignored5,ignored6,ignored7,partOfDoubleClick){var windowToBePlaced;if(!partOfDoubleClick)return(windowToBePlaced=this.createWidgetToBeHandled()).fullRawMoveTo(this.topRight().add(new Point(20,-40))),world.add(windowToBePlaced),windowToBePlaced.fullRawMoveWithin(world)},window.PatchProgrammingComponentsToolbarCreatorButtonWdgt=function(){PatchProgrammingComponentsToolbarCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new PatchProgrammingComponentsIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="components that can be connected","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PatchProgrammingComponentsToolbarCreatorButtonWdgt,"name",{value:"PatchProgrammingComponentsToolbarCreatorButtonWdgt"}),window.PatchProgrammingComponentsToolbarCreatorButtonWdgt.instances=[],window.PatchProgrammingComponentsToolbarCreatorButtonWdgt.__super__=window.ToolbarCreatorButtonWdgt.prototype,window.PatchProgrammingComponentsToolbarCreatorButtonWdgt=extend(window.PatchProgrammingComponentsToolbarCreatorButtonWdgt,window.ToolbarCreatorButtonWdgt),window.PatchProgrammingComponentsToolbarCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var switcherooWm,toolsPanel;return(toolsPanel=new ScrollPanelWdgt(new ToolPanelWdgt)).addMany([new SliderNodeCreatorButtonWdgt,new ColorPaletteNodeCreatorButtonWdgt,new GrayscalePaletteNodeCreatorButtonWdgt,new CalculatingNodeCreatorButtonWdgt]),toolsPanel.disableDragsDropsAndEditing(),(switcherooWm=new WindowWdgt(nil,nil,toolsPanel)).fullRawMoveTo(new Point(90,Math.floor((world.height()-192)/2))),switcherooWm.fullRawMoveWithin(world),world.add(switcherooWm),switcherooWm.rawSetExtent(new Point(61,192)),switcherooWm},window.Plot3DCreatorButtonWdgt=function(){Plot3DCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new Plot3DIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="3D plot","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Plot3DCreatorButtonWdgt,"name",{value:"Plot3DCreatorButtonWdgt"}),window.Plot3DCreatorButtonWdgt.instances=[],window.Plot3DCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.Plot3DCreatorButtonWdgt=extend(window.Plot3DCreatorButtonWdgt,window.CreatorButtonWdgt),window.Plot3DCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var switcherooWm;return(switcherooWm=new WindowWdgt(nil,nil,new Example3DPlotWdgt,!0,!0)).rawSetExtent(new Point(200,200)),switcherooWm},window.PlotsToolbarCreatorButtonWdgt=function(){PlotsToolbarCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new AllPlotsIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="plots/graphs","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PlotsToolbarCreatorButtonWdgt,"name",{value:"PlotsToolbarCreatorButtonWdgt"}),window.PlotsToolbarCreatorButtonWdgt.instances=[],window.PlotsToolbarCreatorButtonWdgt.__super__=window.ToolbarCreatorButtonWdgt.prototype,window.PlotsToolbarCreatorButtonWdgt=extend(window.PlotsToolbarCreatorButtonWdgt,window.ToolbarCreatorButtonWdgt),window.PlotsToolbarCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var switcherooWm,toolsPanel;return(toolsPanel=new ScrollPanelWdgt(new ToolPanelWdgt)).addMany([new ScatterPlotWithAxesCreatorButtonWdgt,new FunctionPlotWithAxesCreatorButtonWdgt,new BarPlotWithAxesCreatorButtonWdgt,new Plot3DCreatorButtonWdgt]),toolsPanel.disableDragsDropsAndEditing(),(switcherooWm=new WindowWdgt(nil,nil,toolsPanel)).setExtent(new Point(60,192)),switcherooWm.fullRawMoveTo(new Point(90,Math.floor((world.height()-192)/2))),switcherooWm.fullRawMoveWithin(world),world.add(switcherooWm),switcherooWm.changed(),switcherooWm},window.ScatterPlotWithAxesCreatorButtonWdgt=function(){ScatterPlotWithAxesCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ScatterPlotIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="scatter plot","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ScatterPlotWithAxesCreatorButtonWdgt,"name",{value:"ScatterPlotWithAxesCreatorButtonWdgt"}),window.ScatterPlotWithAxesCreatorButtonWdgt.instances=[],window.ScatterPlotWithAxesCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.ScatterPlotWithAxesCreatorButtonWdgt=extend(window.ScatterPlotWithAxesCreatorButtonWdgt,window.CreatorButtonWdgt),window.ScatterPlotWithAxesCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var switcherooWm;return(switcherooWm=new WindowWdgt(nil,nil,new PlotWithAxesWdgt(new ExampleScatterPlotWdgt),!0,!0)).rawSetExtent(new Point(200,200)),switcherooWm},window.SliderNodeCreatorButtonWdgt=function(){SliderNodeCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new SliderNodeIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="slider node","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SliderNodeCreatorButtonWdgt,"name",{value:"SliderNodeCreatorButtonWdgt"}),window.SliderNodeCreatorButtonWdgt.instances=[],window.SliderNodeCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.SliderNodeCreatorButtonWdgt=extend(window.SliderNodeCreatorButtonWdgt,window.CreatorButtonWdgt),window.SliderNodeCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){return new SliderMorph(nil,nil,nil,nil,nil,!0)},window.SlidesToolbarCreatorButtonWdgt=function(){SlidesToolbarCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new SlidesToolbarIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="items for slides","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SlidesToolbarCreatorButtonWdgt,"name",{value:"SlidesToolbarCreatorButtonWdgt"}),window.SlidesToolbarCreatorButtonWdgt.instances=[],window.SlidesToolbarCreatorButtonWdgt.__super__=window.ToolbarCreatorButtonWdgt.prototype,window.SlidesToolbarCreatorButtonWdgt=extend(window.SlidesToolbarCreatorButtonWdgt,window.ToolbarCreatorButtonWdgt),window.SlidesToolbarCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var switcherooWm,toolsPanel;return(toolsPanel=new ScrollPanelWdgt(new ToolPanelWdgt)).addMany([new TextBoxCreatorButtonWdgt,new ExternalLinkCreatorButtonWdgt,new VideoPlayCreatorButtonWdgt,new WorldMapCreatorButtonWdgt,new USAMapCreatorButtonWdgt,new RectangleMorph,new MapPinIconWdgt,new SpeechBubbleWdgt,new DestroyIconMorph,new ScratchAreaIconMorph,new FloraIconMorph,new ScooterIconMorph,new HeartIconMorph,new FizzygumLogoIconWdgt,new FizzygumLogoWithTextIconWdgt,new VaporwaveBackgroundIconWdgt,new VaporwaveSunIconWdgt,new ArrowNIconWdgt,new ArrowSIconWdgt,new ArrowWIconWdgt,new ArrowEIconWdgt,new ArrowNWIconWdgt,new ArrowNEIconWdgt,new ArrowSWIconWdgt,new ArrowSEIconWdgt]),toolsPanel.disableDragsDropsAndEditing(),(switcherooWm=new WindowWdgt(nil,nil,toolsPanel)).fullRawMoveTo(new Point(90,Math.floor((world.height()-192)/2))),switcherooWm.fullRawMoveWithin(world),world.add(switcherooWm),switcherooWm.rawSetExtent(new Point(105,300)),switcherooWm},window.TemplatesButtonWdgt=function(){TemplatesButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new TemplatesIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.actionableAsThumbnail=!0,this.editorContentPropertyChangerButton=!0,this.toolTipMessage="useful snippets","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TemplatesButtonWdgt,"name",{value:"TemplatesButtonWdgt"}),window.TemplatesButtonWdgt.instances=[],window.TemplatesButtonWdgt.__super__=window.IconMorph.prototype,window.TemplatesButtonWdgt=extend(window.TemplatesButtonWdgt,window.IconMorph),window.TemplatesButtonWdgt.augmentWith(window.HighlightableMixin,"TemplatesButtonWdgt"),window.TemplatesButtonWdgt.augmentWith(window.ParentStainerMixin,"TemplatesButtonWdgt"),window.TemplatesButtonWdgt.prototype.color_hover=new Color(90,90,90),window.TemplatesButtonWdgt.prototype.color_pressed=new Color(128,128,128),window.TemplatesButtonWdgt.prototype.color_normal=new Color(230,230,230),window.TemplatesButtonWdgt.prototype.bringTemplatesWindowIntoView=function(){return world.simpleEditorTemplates.bringToForeground(),world.simpleEditorTemplates.fullRawMoveTo(world.hand.position().subtract(new Point(50,50))),world.simpleEditorTemplates.fullRawMoveWithin(world)},window.TemplatesButtonWdgt.prototype.mouseClickLeft=function(){var templatesWindow;return null==world.simpleEditorTemplates?(templatesWindow=menusHelper.createNewTemplatesWindow(),this.positionTemplatesWindowAndRegisterIt(templatesWindow)):world.simpleEditorTemplates.destroyed||null==world.simpleEditorTemplates.parent?(templatesWindow=menusHelper.createNewTemplatesWindow(),this.positionTemplatesWindowAndRegisterIt(templatesWindow)):null!=world.simpleEditorTemplates.parent&&world.simpleEditorTemplates.parent===world.basementWdgt.scrollPanel.contents?(world.add(world.simpleEditorTemplates),this.bringTemplatesWindowIntoView()):world.simpleEditorTemplates.destroyed||world.simpleEditorTemplates.parent!==world?void 0:this.bringTemplatesWindowIntoView()},window.TemplatesButtonWdgt.prototype.positionTemplatesWindowAndRegisterIt=function(templatesWindow){return templatesWindow.fullRawMoveTo(world.hand.position().subtract(new Point(50,50))),templatesWindow.fullRawMoveWithin(world),world.add(templatesWindow),world.simpleEditorTemplates=templatesWindow},window.TextBoxCreatorButtonWdgt=function(){TextBoxCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new TextIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="text box","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TextBoxCreatorButtonWdgt,"name",{value:"TextBoxCreatorButtonWdgt"}),window.TextBoxCreatorButtonWdgt.instances=[],window.TextBoxCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.TextBoxCreatorButtonWdgt=extend(window.TextBoxCreatorButtonWdgt,window.CreatorButtonWdgt),window.TextBoxCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var switcheroo;return switcheroo=new TextMorph2("insert text here"),switcheroo.isEditable=!0,switcheroo.fittingSpecWhenBoundsTooLarge=FittingSpecTextInLargerBounds.SCALEUP,switcheroo.fittingSpecWhenBoundsTooSmall=FittingSpecTextInSmallerBounds.SCALEDOWN,switcheroo.alignMiddle(),switcheroo.alignLeft(),switcheroo.fullRawMoveTo(this.position()),switcheroo.rawSetExtent(new Point(150,75)),switcheroo},window.TextToolbarCreatorButtonWdgt=function(){TextToolbarCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new TextToolbarIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="Text tools","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TextToolbarCreatorButtonWdgt,"name",{value:"TextToolbarCreatorButtonWdgt"}),window.TextToolbarCreatorButtonWdgt.instances=[],window.TextToolbarCreatorButtonWdgt.__super__=window.ToolbarCreatorButtonWdgt.prototype,window.TextToolbarCreatorButtonWdgt=extend(window.TextToolbarCreatorButtonWdgt,window.ToolbarCreatorButtonWdgt),window.TextToolbarCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var switcherooWm,toolsPanel;return(toolsPanel=new ScrollPanelWdgt(new ToolPanelWdgt)).addMany([new ChangeFontButtonWdgt(this),new BoldButtonWdgt,new ItalicButtonWdgt,new FormatAsCodeButtonWdgt,new IncreaseFontSizeButtonWdgt,new DecreaseFontSizeButtonWdgt,new AlignLeftButtonWdgt,new AlignCenterButtonWdgt,new AlignRightButtonWdgt]),toolsPanel.disableDragsDropsAndEditing(),(switcherooWm=new WindowWdgt(nil,nil,toolsPanel)).fullRawMoveTo(new Point(90,Math.floor((world.height()-192)/2))),switcherooWm.fullRawMoveWithin(world),world.add(switcherooWm),switcherooWm.rawSetExtent(new Point(130,156)),switcherooWm},window.USAMapCreatorButtonWdgt=function(){USAMapCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new LittleUSAIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="USA map","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.USAMapCreatorButtonWdgt,"name",{value:"USAMapCreatorButtonWdgt"}),window.USAMapCreatorButtonWdgt.instances=[],window.USAMapCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.USAMapCreatorButtonWdgt=extend(window.USAMapCreatorButtonWdgt,window.CreatorButtonWdgt),window.USAMapCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var switcheroo;return(switcheroo=new SimpleUSAMapIconWdgt).rawSetExtent(new Point(230,145)),switcheroo.setColor(new Color(183,183,183)),switcheroo},window.UncollapseIconButtonMorph=function(target){this.target=target,UncollapseIconButtonMorph.__super__.constructor.call(this,!0,this,"actOnClick",new Widget),this.color_hover=new Color(255,153,0),this.color_pressed=this.color_hover,this.appearance=new UncollapseIconAppearance(this),this.toolTipMessage="un-collapse window","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.UncollapseIconButtonMorph,"name",{value:"UncollapseIconButtonMorph"}),window.UncollapseIconButtonMorph.instances=[],window.UncollapseIconButtonMorph.__super__=window.EmptyButtonMorph.prototype,window.UncollapseIconButtonMorph=extend(window.UncollapseIconButtonMorph,window.EmptyButtonMorph),window.UncollapseIconButtonMorph.prototype.actOnClick=function(){return this.parent.parent.contents.unCollapse()},window.UsefulTextSnippetsToolbarCreatorButtonWdgt=function(){UsefulTextSnippetsToolbarCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new TemplatesIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="Useful text snippets","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.UsefulTextSnippetsToolbarCreatorButtonWdgt,"name",{value:"UsefulTextSnippetsToolbarCreatorButtonWdgt"}),window.UsefulTextSnippetsToolbarCreatorButtonWdgt.instances=[],window.UsefulTextSnippetsToolbarCreatorButtonWdgt.__super__=window.ToolbarCreatorButtonWdgt.prototype,window.UsefulTextSnippetsToolbarCreatorButtonWdgt=extend(window.UsefulTextSnippetsToolbarCreatorButtonWdgt,window.ToolbarCreatorButtonWdgt),window.UsefulTextSnippetsToolbarCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){return menusHelper.createNewTemplatesWindow()},window.VideoPlayButtonWdgt=function(color){this.color=color,VideoPlayButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new VideoPlayIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.VideoPlayButtonWdgt,"name",{value:"VideoPlayButtonWdgt"}),window.VideoPlayButtonWdgt.instances=[],window.VideoPlayButtonWdgt.__super__=window.ExternalLinkButtonWdgt.prototype,window.VideoPlayButtonWdgt=extend(window.VideoPlayButtonWdgt,window.ExternalLinkButtonWdgt),window.VideoPlayCreatorButtonWdgt=function(color){this.color=color,VideoPlayCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new VideoPlayIconAppearance(this),this.toolTipMessage="link to video","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.VideoPlayCreatorButtonWdgt,"name",{value:"VideoPlayCreatorButtonWdgt"}),window.VideoPlayCreatorButtonWdgt.instances=[],window.VideoPlayCreatorButtonWdgt.__super__=window.ExternalLinkCreatorButtonWdgt.prototype,window.VideoPlayCreatorButtonWdgt=extend(window.VideoPlayCreatorButtonWdgt,window.ExternalLinkCreatorButtonWdgt),window.VideoPlayCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var switcheroo;return(switcheroo=new SimpleVideoLinkWdgt).fullRawMoveTo(this.position()),switcheroo.rawSetExtent(new Point(330,65)),switcheroo},window.WindowWithPanelCreatorButtonWdgt=function(){WindowWithPanelCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new WindowWithCroppingPanelIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="cropping panel","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowWithPanelCreatorButtonWdgt,"name",{value:"WindowWithPanelCreatorButtonWdgt"}),window.WindowWithPanelCreatorButtonWdgt.instances=[],window.WindowWithPanelCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.WindowWithPanelCreatorButtonWdgt=extend(window.WindowWithPanelCreatorButtonWdgt,window.CreatorButtonWdgt),window.WindowWithPanelCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var switcherooWm;return(switcherooWm=new WindowWdgt(nil,nil,new PanelWdgt,!0,!0)).rawSetExtent(new Point(200,200)),switcherooWm},window.WindowWithScrollPanelCreatorButtonWdgt=function(){WindowWithScrollPanelCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new WindowWithScrollingPanelIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="scroll panel","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowWithScrollPanelCreatorButtonWdgt,"name",{value:"WindowWithScrollPanelCreatorButtonWdgt"}),window.WindowWithScrollPanelCreatorButtonWdgt.instances=[],window.WindowWithScrollPanelCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.WindowWithScrollPanelCreatorButtonWdgt=extend(window.WindowWithScrollPanelCreatorButtonWdgt,window.CreatorButtonWdgt),window.WindowWithScrollPanelCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var switcherooWm;return(switcherooWm=new WindowWdgt(nil,nil,new ScrollPanelWdgt,!0,!0)).rawSetExtent(new Point(200,200)),switcherooWm},window.WindowsToolbarCreatorButtonWdgt=function(){WindowsToolbarCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new WindowsToolbarIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="many types of\npre-made windows","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowsToolbarCreatorButtonWdgt,"name",{value:"WindowsToolbarCreatorButtonWdgt"}),window.WindowsToolbarCreatorButtonWdgt.instances=[],window.WindowsToolbarCreatorButtonWdgt.__super__=window.ToolbarCreatorButtonWdgt.prototype,window.WindowsToolbarCreatorButtonWdgt=extend(window.WindowsToolbarCreatorButtonWdgt,window.ToolbarCreatorButtonWdgt),window.WindowsToolbarCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var readmeWindow,switcherooWm,toolsPanel;return(toolsPanel=new ScrollPanelWdgt(new ToolPanelWdgt)).addMany([new EmptyWindowCreatorButtonWdgt,new WindowWithPanelCreatorButtonWdgt,new WindowWithScrollPanelCreatorButtonWdgt,new ElasticWindowCreatorButtonWdgt]),toolsPanel.disableDragsDropsAndEditing(),(switcherooWm=new WindowWdgt(nil,nil,toolsPanel)).fullRawMoveTo(new Point(90,Math.floor((world.height()-192)/2))),switcherooWm.fullRawMoveWithin(world),world.add(switcherooWm),switcherooWm.rawSetExtent(new Point(61,192)),null!=(readmeWindow=menusHelper.createWindowsToolbarOneOffInfoWindowNextTo(switcherooWm))&&readmeWindow.fullRawMoveTo(new Point(300,200)),null!=readmeWindow&&readmeWindow.rememberFractionalSituationInHoldingPanel(),switcherooWm},window.WorldMapCreatorButtonWdgt=function(){WorldMapCreatorButtonWdgt.__super__.constructor.apply(this,arguments),this.appearance=new LittleWorldIconAppearance(this,WorldMorph.preferencesAndSettings.iconDarkLineColor),this.toolTipMessage="world map","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WorldMapCreatorButtonWdgt,"name",{value:"WorldMapCreatorButtonWdgt"}),window.WorldMapCreatorButtonWdgt.instances=[],window.WorldMapCreatorButtonWdgt.__super__=window.CreatorButtonWdgt.prototype,window.WorldMapCreatorButtonWdgt=extend(window.WorldMapCreatorButtonWdgt,window.CreatorButtonWdgt),window.WorldMapCreatorButtonWdgt.prototype.createWidgetToBeHandled=function(){var switcheroo;return(switcheroo=new SimpleWorldMapIconWdgt).rawSetExtent(new Point(240,125)),switcheroo.setColor(new Color(183,183,183)),switcheroo},window.AxisWdgt=function(min=-15,max=15){this.min=min,this.max=max,AxisWdgt.__super__.constructor.call(this),this.ticksRectangles=[],this.labelsTextBoxes=[],this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AxisWdgt,"name",{value:"AxisWdgt"}),window.AxisWdgt.instances=[],window.AxisWdgt.__super__=window.Widget.prototype,window.AxisWdgt=extend(window.AxisWdgt,window.Widget),window.AxisWdgt.prototype.majorDimLine=nil,window.AxisWdgt.prototype.ticksRectangles=nil,window.AxisWdgt.prototype.labelsTextBoxes=nil,window.AxisWdgt.prototype.min=0,window.AxisWdgt.prototype.max=0,window.AxisWdgt.prototype.buildAndConnectChildren=function(){var i,j,ref;for(this.majorDimLine=new RectangleMorph,this.majorDimLine.minimumExtent=new Point(1,1),this.add(this.majorDimLine),i=j=0,ref=this.max-this.min+1;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j)this.ticksRectangles[i]=new RectangleMorph,this.ticksRectangles[i].minimumExtent=new Point(1,1),this.add(this.ticksRectangles[i]),this.labelsTextBoxes[i]=new StringMorph2(""),this.labelsTextBoxes[i].fittingSpecWhenBoundsTooLarge=FittingSpecTextInLargerBounds.SCALEUP,this.labelsTextBoxes[i].fittingSpecWhenBoundsTooSmall=FittingSpecTextInSmallerBounds.SCALEDOWN,this.add(this.labelsTextBoxes[i]);return this.invalidateLayout()},window.AxisWdgt.prototype.rawSetExtent=function(aPoint){return AxisWdgt.__super__.rawSetExtent.apply(this,arguments),this.invalidateLayout()},window.AxisWdgt.prototype.distanceOfAxisOriginFromEdge=function(){var height,numberOfTicks,tickHeight,width;return height=this.height(),width=this.width(),numberOfTicks=this.max-this.min+1,height>width?(tickHeight=height/(numberOfTicks+1),new Point(-5,tickHeight)):(tickHeight=width/(numberOfTicks+1),new Point(tickHeight,5))},window.AxisWdgt.prototype.doLayout=function(newBoundsForThisLayout){var height,heightOfTheDrawnBar,i,j,labelSpace,numberOfTicks,ref,tickHeight,width;if(window.recalculatingLayouts,null==newBoundsForThisLayout&&(null!=this.desiredExtent?(newBoundsForThisLayout=this.desiredExtent,this.desiredExtent=nil):newBoundsForThisLayout=this.extent(),null!=this.desiredPosition?(newBoundsForThisLayout=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(newBoundsForThisLayout),this.desiredPosition=nil):newBoundsForThisLayout=new Rectangle(this.position()).setBoundsWidthAndHeight(newBoundsForThisLayout)),this.isCollapsed())return this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted();for(this.rawSetBounds(newBoundsForThisLayout),trackChanges.push(!1),height=this.height(),width=this.width(),heightOfTheDrawnBar=((numberOfTicks=this.max-this.min+1)-1)*(tickHeight=height>width?height/(numberOfTicks+1):width/(numberOfTicks+1)),2,.7,labelSpace=.7*tickHeight,height>width?(this.majorDimLine.fullRawMoveTo(new Point(this.right()-5,this.top()+tickHeight)),this.majorDimLine.setExtent(new Point(2,heightOfTheDrawnBar))):(this.majorDimLine.fullRawMoveTo(new Point(this.left()+tickHeight,this.top()+5)),this.majorDimLine.setExtent(new Point(heightOfTheDrawnBar,2))),i=j=0,ref=numberOfTicks;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j)height>width?(this.ticksRectangles[i].fullRawMoveTo(new Point(this.right()-10,this.top()+tickHeight+Math.round(i*tickHeight))),this.ticksRectangles[i].setExtent(new Point(7,2)),this.labelsTextBoxes[i].setText(""+(this.max-i)),this.labelsTextBoxes[i].fullRawMoveTo(new Point(this.left(),this.top()+tickHeight+Math.round(i*tickHeight)-labelSpace/2)),this.labelsTextBoxes[i].setExtent(new Point(width-10,labelSpace)),this.labelsTextBoxes[i].alignMiddle(),this.labelsTextBoxes[i].alignRight()):(this.ticksRectangles[i].fullRawMoveTo(new Point(this.left()+tickHeight+Math.round(i*tickHeight),this.top()+5)),this.ticksRectangles[i].setExtent(new Point(2,7)),this.labelsTextBoxes[i].setText(""+(this.min+i)),this.labelsTextBoxes[i].fullRawMoveTo(new Point(this.left()+tickHeight+Math.round(i*tickHeight)-labelSpace/2,this.top()+5+5)),this.labelsTextBoxes[i].setExtent(new Point(labelSpace,height-10)),this.labelsTextBoxes[i].alignTop(),this.labelsTextBoxes[i].alignCenter());return trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0},window.Point3D=function(x=0,y=0,z=0){this.x=x,this.y=y,this.z=z,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Point3D,"name",{value:"Point3D"}),window.Point3D.instances=[],window.Point3D.__super__=Object.prototype,window.Point3D.augmentWith(window.DeepCopierMixin,"Point3D"),window.Point3D.prototype.x=nil,window.Point3D.prototype.y=nil,window.Point3D.prototype.z=nil,window.Point3D.prototype.rotateX=function(angle){var cosa,rad,sina,y,z;return rad=angle*Math.PI/180,cosa=Math.cos(rad),sina=Math.sin(rad),y=this.y*cosa-this.z*sina,z=this.y*sina+this.z*cosa,new this.constructor(this.x,y,z)},window.Point3D.prototype.rotateY=function(angle){var cosa,rad,sina,x,z;return rad=angle*Math.PI/180,cosa=Math.cos(rad),sina=Math.sin(rad),z=this.z*cosa-this.x*sina,x=this.z*sina+this.x*cosa,new this.constructor(x,this.y,z)},window.Point3D.prototype.rotateZ=function(angle){var cosa,rad,sina,x,y;return rad=angle*Math.PI/180,cosa=Math.cos(rad),sina=Math.sin(rad),x=this.x*cosa-this.y*sina,y=this.x*sina+this.y*cosa,new this.constructor(x,y,this.z)},window.Point3D.prototype.translateXYZ=function(dx,dy,dz){return new this.constructor(this.x+dx,this.y+dy,this.z+dz)},window.Point3D.prototype.project=function(viewWidth,viewHeight,fieldOfView,viewDistance){var factor,x,y;return factor=fieldOfView/(viewDistance+this.z),x=this.x*factor+viewWidth/2,y=this.y*factor+viewHeight/2,new Point(x,y)},window.Example3DPlotWdgt=function(){Example3DPlotWdgt.__super__.constructor.call(this),this.defaultRejectDrags=!0,this.isLockingToPanels=!0,this.fps=0,world.addSteppingMorph(this),this.setColor(new Color(255,125,125)),this.rawSetExtent(new Point(200,200)),this.edges=[],this.quads=[],this.currentAngle=0,this.step(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Example3DPlotWdgt,"name",{value:"Example3DPlotWdgt"}),window.Example3DPlotWdgt.instances=[],window.Example3DPlotWdgt.__super__=window.Widget.prototype,window.Example3DPlotWdgt=extend(window.Example3DPlotWdgt,window.Widget),window.Example3DPlotWdgt.prototype.vertices=nil,window.Example3DPlotWdgt.prototype.quads=nil,window.Example3DPlotWdgt.prototype.currentAngle=nil,window.Example3DPlotWdgt.prototype.planeGrid=nil,window.Example3DPlotWdgt.prototype.graphGrid=nil,window.Example3DPlotWdgt.prototype.previousMousePoint=nil,window.Example3DPlotWdgt.prototype.autoRotate=!0,window.Example3DPlotWdgt.prototype.ratio=nil,window.Example3DPlotWdgt.prototype.parameterValue=0,window.Example3DPlotWdgt.prototype.colloquialName=function(){return"3D plot"},window.Example3DPlotWdgt.prototype.setParameter=function(parameterValue,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.parameterValue=parameterValue,this.calculateNewPlotValues()},window.Example3DPlotWdgt.prototype.reactToTargetConnection=function(){return this.calculateNewPlotValues()},window.Example3DPlotWdgt.prototype.numericalSetters=function(menuEntriesStrings,functionNamesStrings){return null==menuEntriesStrings&&(menuEntriesStrings=[],functionNamesStrings=[]),menuEntriesStrings.push("param"),functionNamesStrings.push("setParameter"),null!=this.addShapeSpecificNumericalSetters&&([menuEntriesStrings,functionNamesStrings]=this.addShapeSpecificNumericalSetters(menuEntriesStrings,functionNamesStrings)),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.Example3DPlotWdgt.prototype.justDropped=function(whereIn){if(Example3DPlotWdgt.__super__.justDropped.apply(this,arguments),whereIn instanceof SimpleVerticalStackPanelWdgt&&!(whereIn instanceof WindowWdgt))return this.constrainToRatio()},window.Example3DPlotWdgt.prototype.holderWindowJustDropped=function(whereIn){if(whereIn instanceof SimpleVerticalStackPanelWdgt&&!(whereIn instanceof WindowWdgt))return this.constrainToRatio()},window.Example3DPlotWdgt.prototype.constrainToRatio=function(){if(null!=this.layoutSpecDetails)return this.ratio=this.width()/this.height(),this.layoutSpecDetails.canSetHeightFreely=!1,this.rawSetExtent(new Point(this.width(),0))},window.Example3DPlotWdgt.prototype.holderWindowJustBeenGrabbed=function(whereFrom){if(whereFrom instanceof SimpleVerticalStackPanelWdgt)return this.freeFromRatioConstraints()},window.Example3DPlotWdgt.prototype.justBeenGrabbed=function(whereFrom){if(whereFrom instanceof SimpleVerticalStackPanelWdgt)return this.freeFromRatioConstraints()},window.Example3DPlotWdgt.prototype.freeFromRatioConstraints=function(){var availableHeight;if(null!=this.layoutSpecDetails&&(this.layoutSpecDetails.canSetHeightFreely=!0,this.ratio=nil,availableHeight=world.height()-20,this.parent.height()>availableHeight))return this.parent.rawSetExtent(new Point(Math.min(this.width()/this.height()*availableHeight,world.width()),availableHeight).round()),this.parent.fullRawMoveTo(world.hand.position().subtract(this.parent.extent().floorDivideBy(2))),this.parent.fullRawMoveWithin(world)},window.Example3DPlotWdgt.prototype.rawSetWidthSizeHeightAccordingly=function(newWidth){return null!=this.ratio?this.rawSetExtent(new Point(newWidth,Math.round(newWidth/this.ratio))):Example3DPlotWdgt.__super__.rawSetWidthSizeHeightAccordingly.apply(this,arguments)},window.Example3DPlotWdgt.prototype.step=function(){return this.autoRotate&&this.currentAngle++,this.calculateNewPlotValues()},window.Example3DPlotWdgt.prototype.calculateNewPlotValues=function(){var i,j,k,l,m,n;for(this.vertices=[],this.graphGrid=new Grid3D(21,21,[]),i=k=-1;k<=1;i=k+=.1)for(j=l=-1;l<=1;j=l+=.1)this.vertices.push(new Point3D(i,j,Math.sin(i*this.parameterValue/30)+(Math.sin(3*i+this.currentAngle/160)+Math.cos(3*j+this.currentAngle/160))/2)),this.graphGrid.vertexIndexes.push(this.vertices.length-1);for(this.planeGrid=new PlaneGrid3D(21,21),i=m=-1;m<=1;i=m+=.1)this.vertices.push(new Point3D(i,-1,0)),this.planeGrid.vertexIndexes.push(this.vertices.length-1),this.vertices.push(new Point3D(i,1,0)),this.planeGrid.vertexIndexes.push(this.vertices.length-1);for(j=n=-1;n<=1;j=n+=.1)this.vertices.push(new Point3D(-1,j,0)),this.planeGrid.vertexIndexes.push(this.vertices.length-1),this.vertices.push(new Point3D(1,j,0)),this.planeGrid.vertexIndexes.push(this.vertices.length-1);return this.changed()},window.Example3DPlotWdgt.prototype.paintIntoAreaOrBlitFromBackBuffer=function(aContext,clippingRectangle,appliedShadow){var al,area,at,h,morphPosition,sl,st,w;if(!this.preliminaryCheckNothingToDraw(clippingRectangle,aContext))return[area,sl,st,al,at,w,h]=this.calculateKeyValues(aContext,clippingRectangle),area.isNotEmpty()?w<1||h<1?nil:(aContext.save(),aContext.clipToRectangle(al,at,w,h),aContext.globalAlpha=(null!=appliedShadow?appliedShadow.alpha:1)*this.backgroundTransparency,this.paintRectangle(aContext,al,at,w,h,this.backgroundColor),aContext.scale(pixelRatio,pixelRatio),morphPosition=this.position(),aContext.translate(morphPosition.x,morphPosition.y),this.renderingHelper(aContext,new Color(255,255,255),appliedShadow),aContext.restore(),this.paintHighlight(aContext,al,at,w,h)):void 0},window.Example3DPlotWdgt.prototype.mouseMove=function(pos,mouseButton){if(!world.hand.draggingSomething())return"left"===mouseButton?(null!=this.previousMousePoint&&(this.currentAngle+=this.previousMousePoint.x-pos.x),this.previousMousePoint=pos):void 0},window.Example3DPlotWdgt.prototype.mouseDownLeft=function(pos){return this.autoRotate=!1,this.bringToForeground()},window.Example3DPlotWdgt.prototype.mouseUpLeft=function(){return this.autoRotate=!0},window.Example3DPlotWdgt.prototype.mouseLeave=function(){return this.autoRotate=!0},window.Example3DPlotWdgt.prototype.renderingHelper=function(context,color,appliedShadow){var eachEdge,eachQuad,height,i,j,k,l,len,len1,len2,m,n,newPoint,o,originalAlpha,p,points,q,r,ref,ref1,ref2,ref3,ref4,ref5,ref6,ref7,ref8,ref9,s,squareDim,width;if(height=this.height(),width=this.width(),null!=appliedShadow)return context.globalAlpha=(null!=appliedShadow?appliedShadow.alpha:1)*this.alpha,context.fillStyle=new Color(80,80,80).toString(),void context.fillRect(0,0,width,height);for(context.fillStyle=WorldMorph.preferencesAndSettings.editableItemBackgroundColor.toString(),context.fillRect(0,0,width,height),squareDim=Math.min(width,height),context.translate((width-squareDim)/2,(height-squareDim)/2),points=[],context.strokeStyle="black",originalAlpha=context.globalAlpha,context.globalAlpha=.6,context.scale(squareDim/300,squareDim/300),k=0,len=(ref=this.vertices).length;k<len;k++)(newPoint=ref[k].rotateX(90).rotateY(this.currentAngle/2).translateXYZ(0,.5,0).project(300,300,220,3)).y-=1*squareDim/6,points.push(newPoint);for(l=0,len1=(ref1=this.quads).length;l<len1;l++)eachQuad=ref1[l],context.beginPath(),context.moveTo(points[eachQuad[0]].x,points[eachQuad[0]].y),context.lineTo(points[eachQuad[1]].x,points[eachQuad[1]].y),context.lineTo(points[eachQuad[2]].x,points[eachQuad[2]].y),context.lineTo(points[eachQuad[3]].x,points[eachQuad[3]].y),context.closePath(),context.stroke();for(m=0,len2=(ref2=this.edges).length;m<len2;m++)eachEdge=ref2[m],context.beginPath(),context.moveTo(points[eachEdge[0]].x,points[eachEdge[0]].y),context.lineTo(points[eachEdge[1]].x,points[eachEdge[1]].y),context.closePath(),context.stroke();for(context.beginPath(),i=n=0,ref3=this.graphGrid.width-1;0<=ref3?n<ref3:n>ref3;i=0<=ref3?++n:--n)for(j=o=0,ref4=this.graphGrid.height;0<=ref4?o<ref4:o>ref4;j=0<=ref4?++o:--o)i+1+j*this.graphGrid.width<this.graphGrid.vertexIndexes.length&&(context.moveTo(points[this.graphGrid.vertexIndexes[i+j*this.graphGrid.width]].x,points[this.graphGrid.vertexIndexes[i+j*this.graphGrid.width]].y),context.lineTo(points[this.graphGrid.vertexIndexes[i+1+j*this.graphGrid.width]].x,points[this.graphGrid.vertexIndexes[i+1+j*this.graphGrid.width]].y));for(i=p=0,ref5=this.graphGrid.width;0<=ref5?p<ref5:p>ref5;i=0<=ref5?++p:--p)for(j=q=0,ref6=this.graphGrid.height-1;0<=ref6?q<ref6:q>ref6;j=0<=ref6?++q:--q)i+(j+1)*this.graphGrid.width<this.graphGrid.vertexIndexes.length&&(context.moveTo(points[this.graphGrid.vertexIndexes[i+j*this.graphGrid.width]].x,points[this.graphGrid.vertexIndexes[i+j*this.graphGrid.width]].y),context.lineTo(points[this.graphGrid.vertexIndexes[i+(j+1)*this.graphGrid.width]].x,points[this.graphGrid.vertexIndexes[i+(j+1)*this.graphGrid.width]].y));for(context.closePath(),context.strokeStyle="black",context.stroke(),context.beginPath(),i=r=0,ref7=this.planeGrid.width-1;0<=ref7?r<ref7:r>ref7;i=0<=ref7?++r:--r)context.moveTo(points[this.planeGrid.vertexIndexes[2*i]].x,points[this.planeGrid.vertexIndexes[2*i]].y),context.lineTo(points[this.planeGrid.vertexIndexes[2*i+1]].x,points[this.planeGrid.vertexIndexes[2*i+1]].y);for(i=s=ref8=this.planeGrid.width-1,ref9=this.planeGrid.width+this.planeGrid.height;ref8<=ref9?s<ref9:s>ref9;i=ref8<=ref9?++s:--s)context.moveTo(points[this.planeGrid.vertexIndexes[2*i]].x,points[this.planeGrid.vertexIndexes[2*i]].y),context.lineTo(points[this.planeGrid.vertexIndexes[2*i+1]].x,points[this.planeGrid.vertexIndexes[2*i+1]].y);return context.closePath(),context.strokeStyle="grey",context.stroke(),context.globalAlpha=originalAlpha},window.GraphsPlotsChartsWdgt=function(drawOnlyPartOfBoundingRect){this.drawOnlyPartOfBoundingRect=drawOnlyPartOfBoundingRect,GraphsPlotsChartsWdgt.__super__.constructor.call(this),this.setColor(new Color(255,125,125)),this.rawSetExtent(new Point(200,200)),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.GraphsPlotsChartsWdgt,"name",{value:"GraphsPlotsChartsWdgt"}),window.GraphsPlotsChartsWdgt.instances=[],window.GraphsPlotsChartsWdgt.__super__=window.Widget.prototype,window.GraphsPlotsChartsWdgt=extend(window.GraphsPlotsChartsWdgt,window.Widget),window.GraphsPlotsChartsWdgt.augmentWith(window.KeepsRatioWhenInVerticalStackMixin,"GraphsPlotsChartsWdgt"),window.GraphsPlotsChartsWdgt.prototype.drawOnlyPartOfBoundingRect=!1,window.GraphsPlotsChartsWdgt.prototype.seededRandom=function(){var x;return(x=1e4*Math.sin(this.seed++))-Math.floor(x)},window.GraphsPlotsChartsWdgt.prototype.seeded_randn_bm=function(){var u,v;for(u=0,v=0;0===u;)u=this.seededRandom();for(;0===v;)v=this.seededRandom();return Math.sqrt(-2*Math.log(u))*Math.cos(2*Math.PI*v)},window.GraphsPlotsChartsWdgt.prototype.simpleShadow=function(context,color,appliedShadow){var height,width;if(height=this.height(),width=this.width(),null!=appliedShadow)return context.globalAlpha=(null!=appliedShadow?appliedShadow.alpha:1)*this.alpha,context.fillStyle=new Color(80,80,80).toString(),context.fillRect(0,0,width,height)},window.GraphsPlotsChartsWdgt.prototype.drawBoundingBox=function(context,color,appliedShadow){var height,width;return height=this.height(),width=this.width(),context.strokeStyle=new Color(30,30,30).toString(),this.drawOnlyPartOfBoundingRect?(context.beginPath(),context.moveTo(0,0),context.lineTo(width,0),context.lineTo(width,height),context.stroke()):context.strokeRect(0,0,width,height)},window.ExampleBarPlotWdgt=function(drawOnlyPartOfBoundingRect){this.drawOnlyPartOfBoundingRect=drawOnlyPartOfBoundingRect,ExampleBarPlotWdgt.__super__.constructor.call(this),this.fps=.5,world.addSteppingMorph(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ExampleBarPlotWdgt,"name",{value:"ExampleBarPlotWdgt"}),window.ExampleBarPlotWdgt.instances=[],window.ExampleBarPlotWdgt.__super__=window.GraphsPlotsChartsWdgt.prototype,window.ExampleBarPlotWdgt=extend(window.ExampleBarPlotWdgt,window.GraphsPlotsChartsWdgt),window.ExampleBarPlotWdgt.prototype.graphNumber=1,window.ExampleBarPlotWdgt.prototype.drawOnlyPartOfBoundingRect=!1,window.ExampleBarPlotWdgt.prototype.colloquialName=function(){return"Bar plot"},window.ExampleBarPlotWdgt.prototype.paintIntoAreaOrBlitFromBackBuffer=function(aContext,clippingRectangle,appliedShadow){var al,area,at,h,morphPosition,sl,st,w;if(!this.preliminaryCheckNothingToDraw(clippingRectangle,aContext))return[area,sl,st,al,at,w,h]=this.calculateKeyValues(aContext,clippingRectangle),area.isNotEmpty()?w<1||h<1?nil:(aContext.save(),aContext.clipToRectangle(al,at,w,h),aContext.globalAlpha=(null!=appliedShadow?appliedShadow.alpha:1)*this.backgroundTransparency,this.paintRectangle(aContext,al,at,w,h,this.backgroundColor),aContext.scale(pixelRatio,pixelRatio),morphPosition=this.position(),aContext.translate(morphPosition.x,morphPosition.y),this.renderingHelper(aContext,new Color(255,255,255),appliedShadow),aContext.restore(),this.paintHighlight(aContext,al,at,w,h)):void 0},window.ExampleBarPlotWdgt.prototype.step=function(){return this.graphNumber++,this.changed()},window.ExampleBarPlotWdgt.prototype.renderingHelper=function(context,color,appliedShadow){var availableHeight,height,heightPerc,i,j,width,xPos;if(this.seed=this.graphNumber,5,height=this.height(),width=this.width(),null==appliedShadow){for(context.fillStyle=WorldMorph.preferencesAndSettings.editableItemBackgroundColor.toString(),context.fillRect(0,0,width,height),availableHeight=height,width-10,context.globalAlpha=(null!=appliedShadow?appliedShadow.alpha:1)*this.alpha,i=j=0;j<=20;i=++j)xPos=i/21*width,heightPerc=.2+3*Math.sin(i/100)-i/1e4+this.seeded_randn_bm()/20,this.seededRandom()>.5?context.fillStyle="#325FA2":context.fillStyle="#FF0000",context.fillRect(Math.round(xPos),Math.round(availableHeight-availableHeight*heightPerc),Math.round(.05*width-2),Math.round(availableHeight*heightPerc));return this.drawBoundingBox(context,color,appliedShadow)}this.simpleShadow(context,color,appliedShadow)},window.ExampleFunctionPlotWdgt=function(drawOnlyPartOfBoundingRect){this.drawOnlyPartOfBoundingRect=drawOnlyPartOfBoundingRect,ExampleFunctionPlotWdgt.__super__.constructor.call(this),this.fps=2,world.addSteppingMorph(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ExampleFunctionPlotWdgt,"name",{value:"ExampleFunctionPlotWdgt"}),window.ExampleFunctionPlotWdgt.instances=[],window.ExampleFunctionPlotWdgt.__super__=window.GraphsPlotsChartsWdgt.prototype,window.ExampleFunctionPlotWdgt=extend(window.ExampleFunctionPlotWdgt,window.GraphsPlotsChartsWdgt),window.ExampleFunctionPlotWdgt.prototype.graphNumber=1,window.ExampleFunctionPlotWdgt.prototype.drawOnlyPartOfBoundingRect=!1,window.ExampleFunctionPlotWdgt.prototype.colloquialName=function(){return"Function plot"},window.ExampleFunctionPlotWdgt.prototype.paintIntoAreaOrBlitFromBackBuffer=function(aContext,clippingRectangle,appliedShadow){var al,area,at,h,morphPosition,sl,st,w;if(!this.preliminaryCheckNothingToDraw(clippingRectangle,aContext))return[area,sl,st,al,at,w,h]=this.calculateKeyValues(aContext,clippingRectangle),area.isNotEmpty()?w<1||h<1?nil:(aContext.save(),aContext.clipToRectangle(al,at,w,h),aContext.globalAlpha=(null!=appliedShadow?appliedShadow.alpha:1)*this.backgroundTransparency,this.paintRectangle(aContext,al,at,w,h,this.backgroundColor),aContext.scale(pixelRatio,pixelRatio),morphPosition=this.position(),aContext.translate(morphPosition.x,morphPosition.y),this.renderingHelper(aContext,new Color(255,255,255),appliedShadow),aContext.restore(),this.paintHighlight(aContext,al,at,w,h)):void 0},window.ExampleFunctionPlotWdgt.prototype.step=function(){return this.graphNumber++,this.changed()},window.ExampleFunctionPlotWdgt.prototype.renderingHelper=function(context,color,appliedShadow){var angle,availableHeight,height,heightPerc,i,j,ref,width,xPos;if(this.seed=this.graphNumber,5,height=this.height(),width=this.width(),null==appliedShadow){for(context.fillStyle=WorldMorph.preferencesAndSettings.editableItemBackgroundColor.toString(),context.fillRect(0,0,width,height),availableHeight=height-10,width-10,context.globalAlpha=(null!=appliedShadow?appliedShadow.alpha:1)*this.alpha,context.fillStyle="#325FA2",angle=this.seededRandom(),xPos=j=0,ref=width;0<=ref?j<=ref:j>=ref;xPos=0<=ref?++j:--j)i=xPos/width*1e3,heightPerc=.5+Math.sin(10*angle+i/(300*(angle+.01)))/3-i/(5e3+5e4*angle),context.fillRect(xPos,availableHeight*heightPerc,2,2);return this.drawBoundingBox(context,color,appliedShadow)}this.simpleShadow(context,color,appliedShadow)},window.ExampleScatterPlotWdgt=function(drawOnlyPartOfBoundingRect){this.drawOnlyPartOfBoundingRect=drawOnlyPartOfBoundingRect,ExampleScatterPlotWdgt.__super__.constructor.call(this),this.fps=1,world.addSteppingMorph(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ExampleScatterPlotWdgt,"name",{value:"ExampleScatterPlotWdgt"}),window.ExampleScatterPlotWdgt.instances=[],window.ExampleScatterPlotWdgt.__super__=window.GraphsPlotsChartsWdgt.prototype,window.ExampleScatterPlotWdgt=extend(window.ExampleScatterPlotWdgt,window.GraphsPlotsChartsWdgt),window.ExampleScatterPlotWdgt.prototype.graphNumber=1,window.ExampleScatterPlotWdgt.prototype.drawOnlyPartOfBoundingRect=!1,window.ExampleScatterPlotWdgt.prototype.colloquialName=function(){return"Scatter plot"},window.ExampleScatterPlotWdgt.prototype.paintIntoAreaOrBlitFromBackBuffer=function(aContext,clippingRectangle,appliedShadow){var al,area,at,h,morphPosition,sl,st,w;if(!this.preliminaryCheckNothingToDraw(clippingRectangle,aContext))return[area,sl,st,al,at,w,h]=this.calculateKeyValues(aContext,clippingRectangle),area.isNotEmpty()?w<1||h<1?nil:(aContext.save(),aContext.clipToRectangle(al,at,w,h),aContext.globalAlpha=(null!=appliedShadow?appliedShadow.alpha:1)*this.backgroundTransparency,this.paintRectangle(aContext,al,at,w,h,this.backgroundColor),aContext.scale(pixelRatio,pixelRatio),morphPosition=this.position(),aContext.translate(morphPosition.x,morphPosition.y),this.renderingHelper(aContext,new Color(255,255,255),appliedShadow),aContext.restore(),this.paintHighlight(aContext,al,at,w,h)):void 0},window.ExampleScatterPlotWdgt.prototype.step=function(){return this.graphNumber++,this.changed()},window.ExampleScatterPlotWdgt.prototype.renderingHelper=function(context,color,appliedShadow){var availableHeight,availableWidth,height,heightPerc,j,k,width,widthPerc;if(this.seed=this.graphNumber,5,height=this.height(),width=this.width(),null==appliedShadow){for(context.fillStyle=WorldMorph.preferencesAndSettings.editableItemBackgroundColor.toString(),context.fillRect(0,0,width,height),availableHeight=height-10,availableWidth=width-10,context.globalAlpha=(null!=appliedShadow?appliedShadow.alpha:1)*this.alpha,context.lineWidth=1,context.beginPath(),j=0;j<100;++j)widthPerc=.4+this.seeded_randn_bm()/10,heightPerc=.4+this.seeded_randn_bm()/10,context.moveTo(Math.round(10+availableWidth*widthPerc),Math.round(5+availableHeight*heightPerc)),context.arc(Math.round(5+availableWidth*widthPerc),Math.round(5+availableHeight*heightPerc),5,0,2*Math.PI);for(context.strokeStyle="#325FA2",context.stroke(),context.beginPath(),k=0;k<100;++k)widthPerc=.6+this.seeded_randn_bm()/10,heightPerc=.6+this.seeded_randn_bm()/10,context.moveTo(Math.round(10+availableWidth*widthPerc),Math.round(5+availableHeight*heightPerc)),context.arc(Math.round(5+availableWidth*widthPerc),Math.round(5+availableHeight*heightPerc),5,0,2*Math.PI);return context.strokeStyle="#FF0000",context.stroke(),this.drawBoundingBox(context,color,appliedShadow)}this.simpleShadow(context,color,appliedShadow)},window.Grid3D=function(width,height,vertexIndexes=[]){this.width=width,this.height=height,this.vertexIndexes=vertexIndexes,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Grid3D,"name",{value:"Grid3D"}),window.Grid3D.instances=[],window.Grid3D.__super__=Object.prototype,window.Grid3D.augmentWith(window.DeepCopierMixin,"Grid3D"),window.Grid3D.prototype.width=nil,window.Grid3D.prototype.height=nil,window.Grid3D.prototype.vertexIndexes=nil,window.PlaneGrid3D=function(width,height,vertexIndexes=[]){this.width=width,this.height=height,this.vertexIndexes=vertexIndexes,"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PlaneGrid3D,"name",{value:"PlaneGrid3D"}),window.PlaneGrid3D.instances=[],window.PlaneGrid3D.__super__=Object.prototype,window.PlaneGrid3D.augmentWith(window.DeepCopierMixin,"PlaneGrid3D"),window.PlaneGrid3D.prototype.width=nil,window.PlaneGrid3D.prototype.height=nil,window.PlaneGrid3D.prototype.vertexIndexes=nil,window.PlotWithAxesWdgt=function(plot){this.plot=plot,PlotWithAxesWdgt.__super__.constructor.apply(this,arguments),this.plot.drawOnlyPartOfBoundingRect=!0,this.appearance=new RectangularAppearance(this),this.add(this.plot),this.vertAxis=new AxisWdgt(-5,5),this.add(this.vertAxis),this.horizAxis=new AxisWdgt(-5,5),this.add(this.horizAxis),this.setColor(new Color(242,242,242)),this.invalidateLayout(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PlotWithAxesWdgt,"name",{value:"PlotWithAxesWdgt"}),window.PlotWithAxesWdgt.instances=[],window.PlotWithAxesWdgt.__super__=window.Widget.prototype,window.PlotWithAxesWdgt=extend(window.PlotWithAxesWdgt,window.Widget),window.PlotWithAxesWdgt.augmentWith(window.KeepsRatioWhenInVerticalStackMixin,"PlotWithAxesWdgt"),window.PlotWithAxesWdgt.prototype.colloquialName=function(){return this.plot.colloquialName()},window.PlotWithAxesWdgt.prototype.rawSetExtent=function(aPoint){return PlotWithAxesWdgt.__super__.rawSetExtent.apply(this,arguments),this.invalidateLayout()},window.PlotWithAxesWdgt.prototype.doLayout=function(newBoundsForThisLayout){var adjustmentX,height,width;return window.recalculatingLayouts,null==newBoundsForThisLayout&&(null!=this.desiredExtent?(newBoundsForThisLayout=this.desiredExtent,this.desiredExtent=nil):newBoundsForThisLayout=this.extent(),null!=this.desiredPosition?(newBoundsForThisLayout=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(newBoundsForThisLayout),this.desiredPosition=nil):newBoundsForThisLayout=new Rectangle(this.position()).setBoundsWidthAndHeight(newBoundsForThisLayout)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(this.rawSetBounds(newBoundsForThisLayout),trackChanges.push(!1),height=this.height(),width=this.width(),35,this.vertAxis.rawSetExtent(new Point(width/10-4,height).round()),this.vertAxis.fullRawMoveTo(this.position().add(new Point(0,-2)).subtract(new Point(-width/35,height/35).round())),this.horizAxis.rawSetExtent(new Point(width,height/10).round()),adjustmentX=this.vertAxis.left()+this.horizAxis.distanceOfAxisOriginFromEdge().x-(this.vertAxis.right()+this.vertAxis.distanceOfAxisOriginFromEdge().x),this.horizAxis.fullRawMoveTo(this.bottomLeft().subtract(new Point(adjustmentX,height/10)).round().subtract(new Point(-width/35,height/35).round())),this.plot.rawSetExtent(new Point(width-2*this.horizAxis.distanceOfAxisOriginFromEdge().x,height-2*this.vertAxis.distanceOfAxisOriginFromEdge().y).round()),this.plot.fullRawMoveTo(this.position().add(new Point(this.horizAxis.distanceOfAxisOriginFromEdge().x-adjustmentX+1,this.vertAxis.distanceOfAxisOriginFromEdge().y-1)).round().subtract(new Point(-width/35,height/35).round())),trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0)},window.IconAppearance=function(){window.IconAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.IconAppearance,"name",{value:"IconAppearance"}),window.IconAppearance.instances=[],window.IconAppearance.__super__=window.Appearance.prototype,window.IconAppearance=extend(window.IconAppearance,window.Appearance),window.IconAppearance.prototype.preferredSize=new Point(200,200),window.IconAppearance.prototype.specificationSize=new Point(200,200),window.IconAppearance.prototype.paintFunction=function(context){var fillColor;return fillColor=this.color,context.beginPath(),context.moveTo(100.5,7),context.bezierCurveTo(50.05,7,9,48.04,9,98.5),context.bezierCurveTo(9,148.95,50.05,190,100.5,190),context.bezierCurveTo(150.95,190,192,148.95,192,98.5),context.bezierCurveTo(192,48.04,150.95,7,100.5,7),context.closePath(),context.moveTo(100.5,20.39),context.bezierCurveTo(143.72,20.39,178.61,55.28,178.61,98.5),context.bezierCurveTo(178.61,141.72,143.72,176.61,100.5,176.61),context.bezierCurveTo(57.28,176.61,22.39,141.72,22.39,98.5),context.bezierCurveTo(22.39,55.28,57.28,20.39,100.5,20.39),context.closePath(),context.fillStyle=fillColor.toString(),context.fill()},window.IconAppearance.prototype.calculateRectangleOfIcon=function(){var height,result,result2H,result2W,result2X,result2Y,scaleH,scaleW,width;return height=this.morph.height(),width=this.morph.width(),scaleW=Math.abs(width/this.preferredSize.width()),scaleH=Math.abs(height/this.preferredSize.height()),scaleW=Math.min(scaleW,scaleH),scaleH=scaleW,result=new Rectangle(Math.min(0,this.preferredSize.width()),Math.min(0,this.preferredSize.height()),Math.abs(this.preferredSize.width()),Math.abs(this.preferredSize.height())),result2W=result.width()*scaleW,result2H=result.height()*scaleH,result2X=this.morph.left()+(width-result2W)/2,result2Y=this.morph.top()+(height-result2H)/2,(result=new Rectangle(result2X,result2Y,result2X+result2W,result2Y+result2H)).round()},window.IconAppearance.prototype.widthWithoutSpacing=function(){return this.calculateRectangleOfIcon().width()},window.IconAppearance.prototype.paintIntoAreaOrBlitFromBackBuffer=function(aContext,clippingRectangle,appliedShadow){var al,area,at,h,result,sl,st,w;if(!this.morph.preliminaryCheckNothingToDraw(clippingRectangle,aContext))return[area,sl,st,al,at,w,h]=this.morph.calculateKeyValues(aContext,clippingRectangle),area.isNotEmpty()?w<1||h<1?nil:(aContext.save(),aContext.clipToRectangle(al,at,w,h),aContext.globalAlpha=(null!=appliedShadow?appliedShadow.alpha:1)*this.morph.alpha,aContext.scale(pixelRatio,pixelRatio),this.morph.position(),result=this.calculateRectangleOfIcon(),aContext.translate(result.left(),result.top()),aContext.scale(result.width()/this.preferredSize.width(),result.height()/this.preferredSize.height()),aContext.scale(this.preferredSize.width()/this.specificationSize.width(),this.preferredSize.height()/this.specificationSize.height()),this.paintFunction(aContext),aContext.restore()):void 0},window.IconAppearance.prototype.oval=function(context,x,y,w,h){context.save(),context.beginPath(),context.translate(x,y),context.scale(w/2,h/2),context.arc(1,1,1,0,2*Math.PI),context.closePath(),context.restore()},window.IconAppearance.prototype.arc=function(context,x,y,w,h,startAngle,endAngle,isClosed){context.save(),context.beginPath(),context.translate(x,y),context.scale(w/2,h/2),context.arc(1,1,1,Math.PI/180*startAngle,Math.PI/180*endAngle),isClosed&&(context.lineTo(1,1),context.closePath()),context.restore()},window.AlignCenterIconAppearance=function(morph){this.morph=morph,AlignCenterIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AlignCenterIconAppearance,"name",{value:"AlignCenterIconAppearance"}),window.AlignCenterIconAppearance.instances=[],window.AlignCenterIconAppearance.__super__=window.IconAppearance.prototype,window.AlignCenterIconAppearance=extend(window.AlignCenterIconAppearance,window.IconAppearance),window.AlignCenterIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(30.5,38.5),context.lineTo(70.5,38.5),context.strokeStyle=outlineColorString,context.lineWidth=23,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(25.03,61.25),context.lineTo(75.66,61.25),context.strokeStyle=outlineColorString,context.lineWidth=23,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(15.5,17.5),context.lineTo(86.66,17.46),context.strokeStyle=outlineColorString,context.lineWidth=23,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(17.16,82.54),context.lineTo(84.66,82.54),context.strokeStyle=outlineColorString,context.lineWidth=23,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(14,17),context.lineTo(89,17),context.strokeStyle=iconColorString,context.lineWidth=8.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(15.75,82),context.lineTo(87,82),context.strokeStyle=iconColorString,context.lineWidth=8.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(23.69,60.71),context.lineTo(79,60.71),context.strokeStyle=iconColorString,context.lineWidth=8.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(29.88,38.36),context.lineTo(73,38.36),context.strokeStyle=iconColorString,context.lineWidth=8.5,context.lineCap="round",context.stroke()},window.AlignCenterIconWdgt=function(color){this.color=color,AlignCenterIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new AlignCenterIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AlignCenterIconWdgt,"name",{value:"AlignCenterIconWdgt"}),window.AlignCenterIconWdgt.instances=[],window.AlignCenterIconWdgt.__super__=window.IconMorph.prototype,window.AlignCenterIconWdgt=extend(window.AlignCenterIconWdgt,window.IconMorph),window.AlignLeftIconAppearance=function(morph){this.morph=morph,AlignLeftIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AlignLeftIconAppearance,"name",{value:"AlignLeftIconAppearance"}),window.AlignLeftIconAppearance.instances=[],window.AlignLeftIconAppearance.__super__=window.IconAppearance.prototype,window.AlignLeftIconAppearance=extend(window.AlignLeftIconAppearance,window.IconAppearance),window.AlignLeftIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(15.5,38.5),context.lineTo(55.5,38.5),context.strokeStyle=outlineColorString,context.lineWidth=23,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(15.03,61.25),context.lineTo(65.66,61.25),context.strokeStyle=outlineColorString,context.lineWidth=23,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(14.5,17.5),context.lineTo(85.66,17.46),context.strokeStyle=outlineColorString,context.lineWidth=23,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(14.16,82.54),context.lineTo(81.66,82.54),context.strokeStyle=outlineColorString,context.lineWidth=23,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(13,17),context.lineTo(88,17),context.strokeStyle=iconColorString,context.lineWidth=8.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(12.75,82),context.lineTo(84,82),context.strokeStyle=iconColorString,context.lineWidth=8.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(13.69,60.71),context.lineTo(69,60.71),context.strokeStyle=iconColorString,context.lineWidth=8.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(13.88,38.36),context.lineTo(57,38.36),context.strokeStyle=iconColorString,context.lineWidth=8.5,context.lineCap="round",context.stroke()},window.AlignLeftIconWdgt=function(color){this.color=color,AlignLeftIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new AlignLeftIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AlignLeftIconWdgt,"name",{value:"AlignLeftIconWdgt"}),window.AlignLeftIconWdgt.instances=[],window.AlignLeftIconWdgt.__super__=window.IconMorph.prototype,window.AlignLeftIconWdgt=extend(window.AlignLeftIconWdgt,window.IconMorph),window.AlignRightIconAppearance=function(morph){this.morph=morph,AlignRightIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AlignRightIconAppearance,"name",{value:"AlignRightIconAppearance"}),window.AlignRightIconAppearance.instances=[],window.AlignRightIconAppearance.__super__=window.IconAppearance.prototype,window.AlignRightIconAppearance=extend(window.AlignRightIconAppearance,window.IconAppearance),window.AlignRightIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(44.5,38.5),context.lineTo(84.5,38.5),context.strokeStyle=outlineColorString,context.lineWidth=23,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(35.03,61.25),context.lineTo(85.66,61.25),context.strokeStyle=outlineColorString,context.lineWidth=23,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(14.5,17.5),context.lineTo(85.66,17.46),context.strokeStyle=outlineColorString,context.lineWidth=23,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(18.16,82.54),context.lineTo(85.66,82.54),context.strokeStyle=outlineColorString,context.lineWidth=23,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(13,17),context.lineTo(88,17),context.strokeStyle=iconColorString,context.lineWidth=8.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(16.75,82),context.lineTo(88,82),context.strokeStyle=iconColorString,context.lineWidth=8.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(32.69,60.71),context.lineTo(88,60.71),context.strokeStyle=iconColorString,context.lineWidth=8.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(43.88,38.36),context.lineTo(87,38.36),context.strokeStyle=iconColorString,context.lineWidth=8.5,context.lineCap="round",context.stroke()},window.AlignRightIconWdgt=function(color){this.color=color,AlignRightIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new AlignRightIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AlignRightIconWdgt,"name",{value:"AlignRightIconWdgt"}),window.AlignRightIconWdgt.instances=[],window.AlignRightIconWdgt.__super__=window.IconMorph.prototype,window.AlignRightIconWdgt=extend(window.AlignRightIconWdgt,window.IconMorph),window.AllPlotsIconAppearance=function(morph){this.morph=morph,AllPlotsIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AllPlotsIconAppearance,"name",{value:"AllPlotsIconAppearance"}),window.AllPlotsIconAppearance.instances=[],window.AllPlotsIconAppearance.__super__=window.IconAppearance.prototype,window.AllPlotsIconAppearance=extend(window.AllPlotsIconAppearance,window.IconAppearance),window.AllPlotsIconAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),context.beginPath(),context.moveTo(7,8),context.lineTo(11.25,8),context.lineTo(11.25,88.76),context.lineTo(92,88.76),context.lineTo(92,93),context.lineTo(7,93),context.lineTo(7,8),context.closePath(),context.fillStyle=iconColorString,context.fill(),this.oval(context,37,20,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,20,39,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,20,18,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,29,29,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,42,29,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,53,25,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,53,15,5,5),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(20.06,79.26),context.lineTo(15.23,75.9),context.lineTo(26.06,56.31),context.bezierCurveTo(30.65,47.24,35.32,43.21,40.07,44.24),context.bezierCurveTo(43.14,44.9,54.09,61.41,57.5,57.37),context.bezierCurveTo(58.98,57.16,82.84,11.04,82.84,11.04),context.lineTo(87.75,14.04),context.bezierCurveTo(87.75,14.04,64.04,58.55,62.73,60.59),context.bezierCurveTo(61.13,62.57,59.42,63.75,57.1,63.64),context.bezierCurveTo(54.43,63.84,52,63,48.31,59.85),context.bezierCurveTo(44.62,56.71,41.39,52.14,38.2,51.57),context.bezierCurveTo(35,51,32.45,56.53,30.62,59.61),context.lineTo(20.06,79.26),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.rect(79,41,11,45),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.rect(63,66,11,20),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.rect(47,72,11,14),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.rect(32,66,10,20),context.fillStyle=iconColorString,context.fill()},window.AllPlotsIconWdgt=function(color){this.color=color,AllPlotsIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new AllPlotsIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AllPlotsIconWdgt,"name",{value:"AllPlotsIconWdgt"}),window.AllPlotsIconWdgt.instances=[],window.AllPlotsIconWdgt.__super__=window.IconMorph.prototype,window.AllPlotsIconWdgt=extend(window.AllPlotsIconWdgt,window.IconMorph),window.AngledArrowUpLeftIconAppearance=function(){window.AngledArrowUpLeftIconAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AngledArrowUpLeftIconAppearance,"name",{value:"AngledArrowUpLeftIconAppearance"}),window.AngledArrowUpLeftIconAppearance.instances=[],window.AngledArrowUpLeftIconAppearance.__super__=window.IconAppearance.prototype,window.AngledArrowUpLeftIconAppearance=extend(window.AngledArrowUpLeftIconAppearance,window.IconAppearance),window.AngledArrowUpLeftIconAppearance.prototype.paintFunction=function(context){var fillColor;return fillColor=this.morph.color,context.save(),context.translate(90,37),context.rotate(90*Math.PI/180),context.beginPath(),context.moveTo(-25,-9.04),context.lineTo(16.6,32.5),context.lineTo(16.6,1.35),context.lineTo(79,1.35),context.lineTo(79,-102.5),context.lineTo(58.2,-102.5),context.lineTo(58.2,-19.42),context.lineTo(16.6,-19.42),context.lineTo(16.6,-50.58),context.bezierCurveTo(-4.2,-29.81,-25,-9.04,-25,-9.04),context.closePath(),context.fillStyle=fillColor.toString(),context.fill(),context.restore()},window.AngledArrowUpLeftIconMorph=function(color){this.color=color,AngledArrowUpLeftIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new AngledArrowUpLeftIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.AngledArrowUpLeftIconMorph,"name",{value:"AngledArrowUpLeftIconMorph"}),window.AngledArrowUpLeftIconMorph.instances=[],window.AngledArrowUpLeftIconMorph.__super__=window.IconMorph.prototype,window.AngledArrowUpLeftIconMorph=extend(window.AngledArrowUpLeftIconMorph,window.IconMorph),window.ArrowEIconAppearance=function(morph){this.morph=morph,ArrowEIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowEIconAppearance,"name",{value:"ArrowEIconAppearance"}),window.ArrowEIconAppearance.instances=[],window.ArrowEIconAppearance.__super__=window.IconAppearance.prototype,window.ArrowEIconAppearance=extend(window.ArrowEIconAppearance,window.IconAppearance),window.ArrowEIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(49.56,2),context.lineTo(30.42,21.15),context.bezierCurveTo(30.42,21.15,37.12,27.85,46.61,37.35),context.lineTo(2,37.35),context.lineTo(2,63.64),context.lineTo(46.61,63.64),context.lineTo(30.41,79.85),context.lineTo(49.56,99),context.lineTo(98,50.5),context.lineTo(49.56,2),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(49.55,4.94),context.lineTo(33.42,21.09),context.bezierCurveTo(33.42,21.09,42.47,30.15,51.39,39.07),context.lineTo(3.96,39.07),context.lineTo(3.96,61.92),context.lineTo(51.39,61.92),context.lineTo(33.41,79.91),context.lineTo(49.55,96.06),context.lineTo(95.06,50.5),context.lineTo(49.55,4.94),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.ArrowEIconWdgt=function(color){this.color=color,ArrowEIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ArrowEIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowEIconWdgt,"name",{value:"ArrowEIconWdgt"}),window.ArrowEIconWdgt.instances=[],window.ArrowEIconWdgt.__super__=window.IconMorph.prototype,window.ArrowEIconWdgt=extend(window.ArrowEIconWdgt,window.IconMorph),window.ArrowNEIconAppearance=function(morph){this.morph=morph,ArrowNEIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowNEIconAppearance,"name",{value:"ArrowNEIconAppearance"}),window.ArrowNEIconAppearance.instances=[],window.ArrowNEIconAppearance.__super__=window.IconAppearance.prototype,window.ArrowNEIconAppearance=extend(window.ArrowNEIconAppearance,window.IconAppearance),window.ArrowNEIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(16.12,7.13),context.lineTo(16.26,37.43),context.bezierCurveTo(16.26,37.43,26.86,37.47,41.89,37.54),context.lineTo(6.73,72.7),context.lineTo(27.62,93.59),context.lineTo(62.78,58.43),context.lineTo(62.89,84.08),context.lineTo(93.2,84.2),context.lineTo(92.84,7.49),context.lineTo(16.12,7.13),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(18.46,9.47),context.lineTo(18.57,35.02),context.bezierCurveTo(18.57,35.02,32.9,35.08,47.02,35.14),context.lineTo(9.64,72.52),context.lineTo(27.8,90.68),context.lineTo(65.18,53.3),context.lineTo(65.3,81.76),context.lineTo(90.86,81.87),context.lineTo(90.52,9.8),context.lineTo(18.46,9.47),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.ArrowNEIconWdgt=function(color){this.color=color,ArrowNEIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ArrowNEIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowNEIconWdgt,"name",{value:"ArrowNEIconWdgt"}),window.ArrowNEIconWdgt.instances=[],window.ArrowNEIconWdgt.__super__=window.IconMorph.prototype,window.ArrowNEIconWdgt=extend(window.ArrowNEIconWdgt,window.IconMorph),window.ArrowNIconAppearance=function(morph){this.morph=morph,ArrowNIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowNIconAppearance,"name",{value:"ArrowNIconAppearance"}),window.ArrowNIconAppearance.instances=[],window.ArrowNIconAppearance.__super__=window.IconAppearance.prototype,window.ArrowNIconAppearance=extend(window.ArrowNIconAppearance,window.IconAppearance),window.ArrowNIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(1.5,50.94),context.lineTo(20.65,70.08),context.bezierCurveTo(20.65,70.08,27.35,63.38,36.85,53.89),context.lineTo(36.85,98.5),context.lineTo(63.14,98.5),context.lineTo(63.14,53.89),context.lineTo(79.35,70.09),context.lineTo(98.5,50.94),context.lineTo(50,2.5),context.lineTo(1.5,50.94),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(4.44,50.95),context.lineTo(20.59,67.08),context.bezierCurveTo(20.59,67.08,29.65,58.03,38.57,49.11),context.lineTo(38.57,96.54),context.lineTo(61.42,96.54),context.lineTo(61.42,49.11),context.lineTo(79.41,67.09),context.lineTo(95.56,50.95),context.lineTo(50,5.44),context.lineTo(4.44,50.95),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.ArrowNIconWdgt=function(color){this.color=color,ArrowNIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ArrowNIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowNIconWdgt,"name",{value:"ArrowNIconWdgt"}),window.ArrowNIconWdgt.instances=[],window.ArrowNIconWdgt.__super__=window.IconMorph.prototype,window.ArrowNIconWdgt=extend(window.ArrowNIconWdgt,window.IconMorph),window.ArrowNWIconAppearance=function(morph){this.morph=morph,ArrowNWIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowNWIconAppearance,"name",{value:"ArrowNWIconAppearance"}),window.ArrowNWIconAppearance.instances=[],window.ArrowNWIconAppearance.__super__=window.IconAppearance.prototype,window.ArrowNWIconAppearance=extend(window.ArrowNWIconAppearance,window.IconAppearance),window.ArrowNWIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(6.63,83.38),context.lineTo(36.93,83.24),context.bezierCurveTo(36.93,83.24,36.97,72.64,37.04,57.61),context.lineTo(72.2,92.77),context.lineTo(93.09,71.88),context.lineTo(57.93,36.72),context.lineTo(83.58,36.61),context.lineTo(83.7,6.3),context.lineTo(6.99,6.66),context.lineTo(6.63,83.38),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(8.97,81.04),context.lineTo(34.52,80.93),context.bezierCurveTo(34.52,80.93,34.58,66.6,34.64,52.48),context.lineTo(72.02,89.86),context.lineTo(90.18,71.7),context.lineTo(52.8,34.32),context.lineTo(81.26,34.2),context.lineTo(81.37,8.64),context.lineTo(9.3,8.98),context.lineTo(8.97,81.04),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.ArrowNWIconWdgt=function(color){this.color=color,ArrowNWIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ArrowNWIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowNWIconWdgt,"name",{value:"ArrowNWIconWdgt"}),window.ArrowNWIconWdgt.instances=[],window.ArrowNWIconWdgt.__super__=window.IconMorph.prototype,window.ArrowNWIconWdgt=extend(window.ArrowNWIconWdgt,window.IconMorph),window.ArrowSEIconAppearance=function(morph){this.morph=morph,ArrowSEIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowSEIconAppearance,"name",{value:"ArrowSEIconAppearance"}),window.ArrowSEIconAppearance.instances=[],window.ArrowSEIconAppearance.__super__=window.IconAppearance.prototype,window.ArrowSEIconAppearance=extend(window.ArrowSEIconAppearance,window.IconAppearance),window.ArrowSEIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(93.37,16.62),context.lineTo(63.07,16.76),context.bezierCurveTo(63.07,16.76,63.03,27.36,62.96,42.39),context.lineTo(27.8,7.23),context.lineTo(6.91,28.12),context.lineTo(42.07,63.28),context.lineTo(16.42,63.39),context.lineTo(16.3,93.7),context.lineTo(93.01,93.34),context.lineTo(93.37,16.62),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(91.03,18.96),context.lineTo(65.48,19.07),context.bezierCurveTo(65.48,19.07,65.42,33.4,65.36,47.52),context.lineTo(27.98,10.14),context.lineTo(9.82,28.3),context.lineTo(47.2,65.68),context.lineTo(18.74,65.8),context.lineTo(18.63,91.36),context.lineTo(90.7,91.02),context.lineTo(91.03,18.96),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.ArrowSEIconWdgt=function(color){this.color=color,ArrowSEIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ArrowSEIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowSEIconWdgt,"name",{value:"ArrowSEIconWdgt"}),window.ArrowSEIconWdgt.instances=[],window.ArrowSEIconWdgt.__super__=window.IconMorph.prototype,window.ArrowSEIconWdgt=extend(window.ArrowSEIconWdgt,window.IconMorph),window.ArrowSIconAppearance=function(morph){this.morph=morph,ArrowSIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowSIconAppearance,"name",{value:"ArrowSIconAppearance"}),window.ArrowSIconAppearance.instances=[],window.ArrowSIconAppearance.__super__=window.IconAppearance.prototype,window.ArrowSIconAppearance=extend(window.ArrowSIconAppearance,window.IconAppearance),window.ArrowSIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(98.5,50.06),context.lineTo(79.35,30.92),context.bezierCurveTo(79.35,30.92,72.65,37.62,63.15,47.11),context.lineTo(63.15,2.5),context.lineTo(36.86,2.5),context.lineTo(36.86,47.11),context.lineTo(20.65,30.91),context.lineTo(1.5,50.06),context.lineTo(50,98.5),context.lineTo(98.5,50.06),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(95.56,50.05),context.lineTo(79.41,33.92),context.bezierCurveTo(79.41,33.92,70.35,42.97,61.43,51.89),context.lineTo(61.43,4.46),context.lineTo(38.58,4.46),context.lineTo(38.58,51.89),context.lineTo(20.59,33.91),context.lineTo(4.44,50.05),context.lineTo(50,95.56),context.lineTo(95.56,50.05),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.ArrowSIconWdgt=function(color){this.color=color,ArrowSIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ArrowSIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowSIconWdgt,"name",{value:"ArrowSIconWdgt"}),window.ArrowSIconWdgt.instances=[],window.ArrowSIconWdgt.__super__=window.IconMorph.prototype,window.ArrowSIconWdgt=extend(window.ArrowSIconWdgt,window.IconMorph),window.ArrowSWIconAppearance=function(morph){this.morph=morph,ArrowSWIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowSWIconAppearance,"name",{value:"ArrowSWIconAppearance"}),window.ArrowSWIconAppearance.instances=[],window.ArrowSWIconAppearance.__super__=window.IconAppearance.prototype,window.ArrowSWIconAppearance=extend(window.ArrowSWIconAppearance,window.IconAppearance),window.ArrowSWIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(83.88,92.87),context.lineTo(83.74,62.57),context.bezierCurveTo(83.74,62.57,73.14,62.53,58.11,62.46),context.lineTo(93.27,27.3),context.lineTo(72.38,6.41),context.lineTo(37.22,41.57),context.lineTo(37.11,15.92),context.lineTo(6.8,15.8),context.lineTo(7.16,92.51),context.lineTo(83.88,92.87),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(81.54,90.53),context.lineTo(81.43,64.98),context.bezierCurveTo(81.43,64.98,67.1,64.92,52.98,64.86),context.lineTo(90.36,27.48),context.lineTo(72.2,9.32),context.lineTo(34.82,46.7),context.lineTo(34.7,18.24),context.lineTo(9.14,18.13),context.lineTo(9.48,90.2),context.lineTo(81.54,90.53),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.ArrowSWIconWdgt=function(color){this.color=color,ArrowSWIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ArrowSWIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowSWIconWdgt,"name",{value:"ArrowSWIconWdgt"}),window.ArrowSWIconWdgt.instances=[],window.ArrowSWIconWdgt.__super__=window.IconMorph.prototype,window.ArrowSWIconWdgt=extend(window.ArrowSWIconWdgt,window.IconMorph),window.ArrowWIconAppearance=function(morph){this.morph=morph,ArrowWIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowWIconAppearance,"name",{value:"ArrowWIconAppearance"}),window.ArrowWIconAppearance.instances=[],window.ArrowWIconAppearance.__super__=window.IconAppearance.prototype,window.ArrowWIconAppearance=extend(window.ArrowWIconAppearance,window.IconAppearance),window.ArrowWIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(49.44,99),context.lineTo(68.58,79.85),context.bezierCurveTo(68.58,79.85,61.88,73.15,52.39,63.65),context.lineTo(97,63.65),context.lineTo(97,37.36),context.lineTo(52.39,37.36),context.lineTo(68.59,21.15),context.lineTo(49.44,2),context.lineTo(1,50.5),context.lineTo(49.44,99),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(49.45,96.06),context.lineTo(65.58,79.91),context.bezierCurveTo(65.58,79.91,56.53,70.85,47.61,61.93),context.lineTo(95.04,61.93),context.lineTo(95.04,39.08),context.lineTo(47.61,39.08),context.lineTo(65.59,21.09),context.lineTo(49.45,4.94),context.lineTo(3.94,50.5),context.lineTo(49.45,96.06),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.ArrowWIconWdgt=function(color){this.color=color,ArrowWIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ArrowWIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ArrowWIconWdgt,"name",{value:"ArrowWIconWdgt"}),window.ArrowWIconWdgt.instances=[],window.ArrowWIconWdgt.__super__=window.IconMorph.prototype,window.ArrowWIconWdgt=extend(window.ArrowWIconWdgt,window.IconMorph),window.BarPlotIconAppearance=function(morph){this.morph=morph,BarPlotIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BarPlotIconAppearance,"name",{value:"BarPlotIconAppearance"}),window.BarPlotIconAppearance.instances=[],window.BarPlotIconAppearance.__super__=window.IconAppearance.prototype,window.BarPlotIconAppearance=extend(window.BarPlotIconAppearance,window.IconAppearance),window.BarPlotIconAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),context.beginPath(),context.moveTo(7,8),context.lineTo(11.25,8),context.lineTo(11.25,88.76),context.lineTo(92,88.76),context.lineTo(92,93),context.lineTo(7,93),context.lineTo(7,8),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.rect(78,43,11,43),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.rect(62,31,11,55),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.rect(45,14,11,72),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.rect(29,22,11,64),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.rect(14,46,10,40),context.fillStyle=iconColorString,context.fill()},window.BarPlotIconWdgt=function(color){this.color=color,BarPlotIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new BarPlotIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BarPlotIconWdgt,"name",{value:"BarPlotIconWdgt"}),window.BarPlotIconWdgt.instances=[],window.BarPlotIconWdgt.__super__=window.IconMorph.prototype,window.BarPlotIconWdgt=extend(window.BarPlotIconWdgt,window.IconMorph),window.BasementIconAppearance=function(morph){this.morph=morph,BasementIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BasementIconAppearance,"name",{value:"BasementIconAppearance"}),window.BasementIconAppearance.instances=[],window.BasementIconAppearance.__super__=window.IconAppearance.prototype,window.BasementIconAppearance=extend(window.BasementIconAppearance,window.IconAppearance),window.BasementIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(49.93,6),context.lineTo(49.93,6),context.bezierCurveTo(49.66,6.01,49.39,6.09,49.16,6.24),context.lineTo(2.75,36),context.lineTo(2.75,36),context.bezierCurveTo(2,36.48,1.77,40.4,2.24,41.18),context.bezierCurveTo(2.54,41.66,3.05,41.96,3.6,41.96),context.lineTo(8.38,41.96),context.lineTo(8.38,90.35),context.lineTo(8.38,90.35),context.bezierCurveTo(8.38,91.26,9.1,92,9.98,92),context.lineTo(90.02,92),context.lineTo(90.02,92),context.bezierCurveTo(90.9,92,91.62,91.26,91.62,90.35),context.lineTo(91.62,41.96),context.lineTo(96.4,41.96),context.lineTo(96.4,41.96),context.bezierCurveTo(97.28,41.96,98,41.22,98,40.3),context.bezierCurveTo(98,39.73,97.72,36.3,97.25,36),context.lineTo(50.84,6.24),context.lineTo(50.84,6.24),context.bezierCurveTo(50.56,6.07,50.25,5.99,49.93,6),context.lineTo(49.93,6),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(50.43,9),context.lineTo(50.43,9),context.bezierCurveTo(50.18,9.01,49.93,9.09,49.71,9.22),context.lineTo(5.72,36.91),context.lineTo(5.72,36.91),context.bezierCurveTo(5.01,37.36,4.79,38.31,5.24,39.03),context.bezierCurveTo(5.52,39.48,6,39.75,6.53,39.75),context.lineTo(11.05,39.75),context.lineTo(11.05,87.46),context.lineTo(11.05,87.46),context.bezierCurveTo(11.05,88.31,11.73,89,12.57,89),context.lineTo(21.67,89),context.lineTo(21.67,89),context.bezierCurveTo(22.51,89,23.19,88.31,23.19,87.46),context.lineTo(23.19,45.91),context.lineTo(77.81,45.91),context.lineTo(77.81,87.46),context.lineTo(77.81,87.46),context.bezierCurveTo(77.81,88.31,78.49,89,79.33,89),context.lineTo(88.43,89),context.lineTo(88.43,89),context.bezierCurveTo(89.27,89,89.95,88.31,89.95,87.46),context.lineTo(89.95,39.75),context.lineTo(94.48,39.75),context.lineTo(94.48,39.75),context.bezierCurveTo(95.31,39.75,95.99,39.06,95.99,38.21),context.bezierCurveTo(95.99,37.68,95.72,37.19,95.28,36.91),context.lineTo(51.3,9.23),context.lineTo(51.29,9.22),context.bezierCurveTo(51.03,9.06,50.73,8.99,50.43,9),context.lineTo(50.43,9),context.closePath(),context.moveTo(50.5,12.35),context.lineTo(89.15,36.68),context.lineTo(88.43,36.68),context.lineTo(88.43,36.68),context.bezierCurveTo(87.59,36.68,86.91,37.37,86.91,38.22),context.lineTo(86.91,85.93),context.lineTo(80.84,85.93),context.lineTo(80.84,44.37),context.lineTo(80.84,44.37),context.bezierCurveTo(80.84,43.52,80.16,42.83,79.33,42.83),context.lineTo(21.67,42.83),context.lineTo(21.67,42.83),context.bezierCurveTo(20.84,42.83,20.16,43.52,20.16,44.37),context.lineTo(20.16,85.93),context.lineTo(14.09,85.93),context.lineTo(14.09,38.22),context.lineTo(14.09,38.22),context.bezierCurveTo(14.09,37.37,13.41,36.68,12.57,36.68),context.lineTo(11.85,36.68),context.lineTo(50.5,12.35),context.closePath(),context.moveTo(54.87,52.06),context.lineTo(54.87,52.06),context.bezierCurveTo(54.79,52.06,54.71,52.07,54.64,52.08),context.lineTo(48.82,52.08),context.lineTo(48.82,52.08),context.bezierCurveTo(47.98,52.08,47.31,52.77,47.31,53.62),context.lineTo(47.31,66.12),context.lineTo(40.55,63.17),context.lineTo(40.55,63.17),context.bezierCurveTo(40.29,63,39.98,62.92,39.67,62.94),context.lineTo(39.65,62.94),context.bezierCurveTo(39.4,62.95,39.16,63.02,38.95,63.14),context.lineTo(30.3,66.92),context.lineTo(30.31,66.92),context.bezierCurveTo(30.06,66.97,29.82,67.09,29.63,67.26),context.lineTo(29.62,67.27),context.bezierCurveTo(29.6,67.29,29.58,67.31,29.56,67.33),context.lineTo(29.58,67.31),context.bezierCurveTo(29.56,67.33,29.54,67.35,29.52,67.37),context.lineTo(29.52,67.37),context.lineTo(29.52,67.38),context.bezierCurveTo(29.12,67.76,28.96,68.34,29.11,68.88),context.lineTo(29.1,80.26),context.lineTo(29.11,80.25),context.bezierCurveTo(29.09,80.39,29.1,80.52,29.12,80.66),context.lineTo(29.12,80.65),context.bezierCurveTo(29.13,80.67,29.13,80.69,29.14,80.7),context.lineTo(29.13,80.69),context.bezierCurveTo(29.14,80.71,29.14,80.73,29.14,80.75),context.lineTo(29.14,80.74),context.bezierCurveTo(29.15,80.77,29.15,80.79,29.16,80.82),context.lineTo(29.16,80.83),context.bezierCurveTo(29.17,80.84,29.17,80.85,29.17,80.86),context.lineTo(29.18,80.87),context.bezierCurveTo(29.19,80.91,29.2,80.95,29.22,80.99),context.lineTo(29.22,80.99),context.bezierCurveTo(29.22,80.99,29.22,81,29.23,81.01),context.lineTo(29.23,81.02),context.bezierCurveTo(29.25,81.06,29.27,81.1,29.29,81.14),context.lineTo(29.28,81.13),context.bezierCurveTo(29.29,81.15,29.3,81.16,29.31,81.18),context.lineTo(29.31,81.18),context.bezierCurveTo(29.5,81.51,29.81,81.76,30.18,81.88),context.lineTo(38.98,85.73),context.lineTo(38.99,85.73),context.bezierCurveTo(39,85.74,39.02,85.75,39.03,85.76),context.lineTo(39.02,85.75),context.bezierCurveTo(39.1,85.79,39.17,85.82,39.24,85.84),context.lineTo(39.24,85.84),context.bezierCurveTo(39.45,85.91,39.68,85.93,39.9,85.91),context.lineTo(39.89,85.91),context.lineTo(39.88,85.91),context.bezierCurveTo(39.91,85.91,39.95,85.9,39.98,85.89),context.lineTo(39.99,85.89),context.bezierCurveTo(40.01,85.89,40.03,85.89,40.04,85.88),context.lineTo(40.04,85.89),context.bezierCurveTo(40.07,85.88,40.11,85.87,40.14,85.86),context.lineTo(40.14,85.86),context.bezierCurveTo(40.16,85.86,40.18,85.85,40.19,85.85),context.lineTo(40.18,85.85),context.bezierCurveTo(40.21,85.84,40.25,85.83,40.28,85.81),context.lineTo(40.28,85.81),context.bezierCurveTo(40.34,85.79,40.39,85.76,40.45,85.73),context.lineTo(47.31,82.73),context.lineTo(47.31,84.39),context.lineTo(47.31,84.39),context.bezierCurveTo(47.31,85.24,47.98,85.93,48.82,85.93),context.lineTo(67.03,85.93),context.lineTo(67.03,85.93),context.bezierCurveTo(67.87,85.93,68.55,85.24,68.55,84.39),context.lineTo(68.55,69),context.lineTo(68.55,53.62),context.lineTo(68.55,53.62),context.bezierCurveTo(68.55,52.77,67.87,52.08,67.03,52.08),context.lineTo(61.2,52.08),context.lineTo(61.2,52.08),context.bezierCurveTo(61.11,52.06,61.03,52.06,60.94,52.06),context.lineTo(60.94,52.06),context.bezierCurveTo(60.86,52.06,60.78,52.07,60.71,52.08),context.lineTo(55.13,52.08),context.lineTo(55.13,52.08),context.bezierCurveTo(55.04,52.06,54.96,52.06,54.87,52.06),context.closePath(),context.moveTo(50.34,55.16),context.lineTo(53.37,55.16),context.lineTo(53.37,59.48),context.lineTo(53.37,59.49),context.bezierCurveTo(53.23,60.33,53.78,61.13,54.6,61.28),context.bezierCurveTo(54.79,61.31,54.97,61.31,55.16,61.27),context.lineTo(55.14,61.27),context.bezierCurveTo(55.16,61.27,55.18,61.27,55.2,61.27),context.lineTo(55.2,61.26),context.bezierCurveTo(55.21,61.26,55.22,61.26,55.23,61.26),context.lineTo(55.23,61.26),context.bezierCurveTo(55.31,61.24,55.4,61.21,55.48,61.17),context.lineTo(55.49,61.17),context.bezierCurveTo(55.5,61.17,55.51,61.16,55.51,61.16),context.lineTo(55.51,61.16),context.bezierCurveTo(55.53,61.15,55.54,61.14,55.56,61.14),context.lineTo(55.64,61.1),context.lineTo(55.64,61.1),context.bezierCurveTo(55.64,61.1,55.65,61.09,55.66,61.09),context.lineTo(57.9,59.95),context.lineTo(60.26,61.14),context.lineTo(60.25,61.14),context.bezierCurveTo(60.52,61.28,60.82,61.33,61.12,61.29),context.lineTo(61.12,61.29),context.bezierCurveTo(61.17,61.29,61.23,61.28,61.28,61.26),context.lineTo(61.29,61.26),context.bezierCurveTo(61.31,61.26,61.32,61.25,61.34,61.25),context.lineTo(61.33,61.25),context.bezierCurveTo(61.36,61.24,61.39,61.24,61.41,61.23),context.lineTo(61.42,61.23),context.bezierCurveTo(61.43,61.23,61.44,61.22,61.44,61.22),context.lineTo(61.43,61.22),context.bezierCurveTo(61.52,61.19,61.61,61.15,61.7,61.11),context.lineTo(61.71,61.1),context.lineTo(61.71,61.09),context.bezierCurveTo(61.76,61.07,61.8,61.04,61.85,61.01),context.lineTo(61.84,61.01),context.lineTo(61.85,61.01),context.bezierCurveTo(61.89,60.97,61.93,60.94,61.97,60.9),context.lineTo(61.97,60.91),context.bezierCurveTo(62,60.88,62.03,60.85,62.06,60.81),context.lineTo(62.07,60.81),context.bezierCurveTo(62.34,60.52,62.48,60.13,62.48,59.73),context.lineTo(62.48,55.16),context.lineTo(65.51,55.16),context.lineTo(65.51,67.46),context.lineTo(61.32,67.46),context.lineTo(61.3,67.46),context.bezierCurveTo(61.18,67.43,61.06,67.42,60.94,67.42),context.lineTo(60.94,67.42),context.bezierCurveTo(60.83,67.42,60.72,67.43,60.6,67.46),context.lineTo(55.25,67.46),context.lineTo(55.23,67.46),context.bezierCurveTo(55.11,67.43,54.99,67.42,54.87,67.42),context.lineTo(54.88,67.42),context.bezierCurveTo(54.76,67.42,54.65,67.43,54.53,67.46),context.lineTo(50.34,67.46),context.lineTo(50.34,55.16),context.closePath(),context.moveTo(56.41,55.16),context.lineTo(59.44,55.16),context.lineTo(59.44,57.28),context.lineTo(58.58,56.85),context.lineTo(58.59,56.85),context.bezierCurveTo(58.36,56.74,58.11,56.68,57.85,56.69),context.lineTo(57.85,56.69),context.bezierCurveTo(57.64,56.69,57.43,56.75,57.24,56.84),context.lineTo(56.41,57.26),context.lineTo(56.41,55.16),context.closePath(),context.moveTo(39.72,66.16),context.lineTo(44.98,68.46),context.lineTo(39.72,70.76),context.lineTo(37.57,69.83),context.lineTo(34.45,68.46),context.lineTo(39.72,66.16),context.closePath(),context.moveTo(50.34,70.54),context.lineTo(53.37,70.54),context.lineTo(53.37,74.87),context.lineTo(53.37,74.86),context.bezierCurveTo(53.21,75.7,53.75,76.5,54.57,76.67),context.bezierCurveTo(54.63,76.68,54.68,76.68,54.73,76.69),context.lineTo(54.74,76.69),context.bezierCurveTo(54.79,76.69,54.85,76.7,54.9,76.7),context.lineTo(54.89,76.7),context.bezierCurveTo(55.17,76.7,55.45,76.61,55.69,76.46),context.lineTo(57.9,75.34),context.lineTo(60.26,76.53),context.lineTo(60.27,76.54),context.bezierCurveTo(60.35,76.58,60.45,76.61,60.54,76.64),context.lineTo(60.54,76.64),context.bezierCurveTo(60.58,76.65,60.63,76.66,60.67,76.67),context.lineTo(60.69,76.67),context.bezierCurveTo(60.78,76.69,60.88,76.7,60.98,76.7),context.lineTo(60.99,76.7),context.lineTo(61,76.7),context.lineTo(61.01,76.7),context.bezierCurveTo(61.84,76.67,62.49,75.97,62.48,75.13),context.lineTo(62.48,70.54),context.lineTo(65.51,70.54),context.lineTo(65.51,82.85),context.lineTo(50.34,82.85),context.lineTo(50.34,80.51),context.lineTo(50.34,80.51),context.bezierCurveTo(50.34,80.45,50.34,80.4,50.34,80.35),context.lineTo(50.34,70.54),context.closePath(),context.moveTo(56.41,70.54),context.lineTo(59.44,70.54),context.lineTo(59.44,72.68),context.lineTo(58.58,72.24),context.lineTo(58.58,72.24),context.bezierCurveTo(58.35,72.13,58.09,72.07,57.83,72.09),context.lineTo(57.84,72.09),context.bezierCurveTo(57.63,72.09,57.42,72.15,57.23,72.24),context.lineTo(56.41,72.66),context.lineTo(56.41,70.54),context.closePath(),context.moveTo(32.14,70.8),context.lineTo(33.06,71.2),context.lineTo(36.37,72.65),context.lineTo(38.2,73.45),context.lineTo(38.2,82.03),context.lineTo(32.14,79.38),context.lineTo(32.14,70.8),context.closePath(),context.moveTo(47.3,70.8),context.lineTo(47.3,79.38),context.lineTo(41.24,82.03),context.lineTo(41.24,73.45),context.lineTo(47.3,70.8),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.BasementIconWdgt=function(color){this.color=color,BasementIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new BasementIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BasementIconWdgt,"name",{value:"BasementIconWdgt"}),window.BasementIconWdgt.instances=[],window.BasementIconWdgt.__super__=window.IconMorph.prototype,window.BasementIconWdgt=extend(window.BasementIconWdgt,window.IconMorph),window.BoldIconAppearance=function(morph){this.morph=morph,BoldIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BoldIconAppearance,"name",{value:"BoldIconAppearance"}),window.BoldIconAppearance.instances=[],window.BoldIconAppearance.__super__=window.IconAppearance.prototype,window.BoldIconAppearance=extend(window.BoldIconAppearance,window.IconAppearance),window.BoldIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(75.92,47.24),context.bezierCurveTo(85.02,49.36,95.98,49.61,97,71.59),context.bezierCurveTo(98.07,94.8,70.84,98,57.27,98),context.lineTo(8.55,98),context.lineTo(8.55,90.39),context.bezierCurveTo(12.99,90.39,16.57,89.15,16.57,89.15),context.bezierCurveTo(20.91,85.53,20.85,86.37,20.85,81.2),context.bezierCurveTo(20.85,81.2,21.98,19.78,19.89,14.29),context.bezierCurveTo(17.81,8.8,12.94,9.89,8.55,9.89),context.lineTo(8.55,2.27),context.lineTo(54.51,2.27),context.bezierCurveTo(65.49,2.27,73.27,3.25,77.84,5.2),context.bezierCurveTo(82.41,7.16,92.52,13,92.61,26.35),context.bezierCurveTo(92.71,40.39,84.36,45.13,75.92,47.24),context.closePath(),context.moveTo(47.19,53.84),context.lineTo(46.91,87.96),context.bezierCurveTo(46.91,87.96,66.46,92.43,68.11,74.5),context.bezierCurveTo(70,54,54.4,53.79,47.19,53.84),context.closePath(),context.moveTo(64.86,28.27),context.bezierCurveTo(63.71,11.55,54.07,12.59,47.18,12.64),context.lineTo(47.18,43.33),context.bezierCurveTo(47.18,43.33,66,45,64.86,28.27),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(68.76,47.43),context.bezierCurveTo(77.24,49.4,93.05,49.64,94,70.25),context.bezierCurveTo(95,92,69.62,95,56.97,95),context.lineTo(11.55,95),context.lineTo(11.55,92.55),context.bezierCurveTo(15.69,92.55,19.96,91.39,19.96,91.39),context.bezierCurveTo(24,88,23.94,84.1,23.94,79.26),context.bezierCurveTo(23.94,79.26,25,17,23.06,11.85),context.bezierCurveTo(21.11,6.71,15.65,7.72,11.55,7.72),context.lineTo(11.55,5.27),context.lineTo(54.39,5.27),context.bezierCurveTo(64.63,5.27,71.88,6.19,76.14,8.02),context.bezierCurveTo(80.4,9.85,89.82,15.33,89.91,27.84),context.bezierCurveTo(90,41,76.63,45.44,68.76,47.43),context.closePath(),context.moveTo(44.77,50.79),context.lineTo(44.52,90.28),context.bezierCurveTo(44.52,90.28,71,95,70.8,72.98),context.bezierCurveTo(70.57,47.79,51.49,50.75,44.77,50.79),context.closePath(),context.moveTo(67.77,28.77),context.bezierCurveTo(66.54,7.54,51.18,10.26,44.77,10.3),context.lineTo(44.77,45.63),context.bezierCurveTo(44.77,45.63,69,50,67.77,28.77),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.BoldIconWdgt=function(color){this.color=color,BoldIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new BoldIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BoldIconWdgt,"name",{value:"BoldIconWdgt"}),window.BoldIconWdgt.instances=[],window.BoldIconWdgt.__super__=window.IconMorph.prototype,window.BoldIconWdgt=extend(window.BoldIconWdgt,window.IconMorph),window.BrushIconAppearance=function(){window.BrushIconAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BrushIconAppearance,"name",{value:"BrushIconAppearance"}),window.BrushIconAppearance.instances=[],window.BrushIconAppearance.__super__=window.IconAppearance.prototype,window.BrushIconAppearance=extend(window.BrushIconAppearance,window.IconAppearance),window.BrushIconAppearance.prototype.paintFunction=function(context){var fillColor;return fillColor=this.morph.color,context.save(),context.translate(102.19,100.77),context.rotate(-17.2*Math.PI/180),context.beginPath(),context.moveTo(96.31,-58.22),context.bezierCurveTo(95.39,-59.15,94.01,-59.15,93.1,-58.22),context.lineTo(31.06,5.14),context.bezierCurveTo(27.61,4.91,15.44,-8.6,13.83,-12.1),context.bezierCurveTo(13.83,-12.33,13.6,-12.33,13.6,-12.56),context.lineTo(75.4,-76.39),context.bezierCurveTo(76.32,-77.32,76.32,-78.72,75.4,-79.65),context.bezierCurveTo(74.49,-80.58,73.11,-80.58,72.19,-79.65),context.lineTo(9.69,-15.36),context.bezierCurveTo(3.26,-17.69,-9.15,-15.83,-20.63,-12.1),context.bezierCurveTo(-32.81,-8.37,-45.68,9.8,-56.25,24.47),context.bezierCurveTo(-61.3,31.46,-65.44,37.52,-68.65,40.31),context.bezierCurveTo(-73.25,44.74,-78.07,44.74,-82.9,44.51),context.bezierCurveTo(-87.49,44.27,-92.09,44.27,-95.08,48.93),context.lineTo(-95.08,48.93),context.bezierCurveTo(-96.45,51.03,-96.22,53.59,-94.85,56.15),context.bezierCurveTo(-89.1,66.17,-62.45,77.35,-36.72,77.35),context.bezierCurveTo(-35.8,77.35,-34.88,77.35,-33.73,77.35),context.bezierCurveTo(-2.02,76.19,19.8,58.48,28.99,43.57),context.bezierCurveTo(36.12,31.69,38.18,14.22,34.97,8.17),context.lineTo(96.31,-54.49),context.bezierCurveTo(97.23,-55.89,97.23,-57.29,96.31,-58.22),context.closePath(),context.moveTo(25.09,40.78),context.bezierCurveTo(16.59,54.75,-3.86,71.29,-33.73,72.46),context.bezierCurveTo(-59.69,73.39,-86.11,61.74,-90.71,53.82),context.bezierCurveTo(-91.63,52.43,-91.17,51.73,-90.94,51.49),context.bezierCurveTo(-89.56,49.16,-87.26,49.16,-82.9,49.4),context.bezierCurveTo(-77.84,49.63,-71.41,49.86,-65.44,44.04),context.bezierCurveTo(-61.99,40.78,-57.62,34.49,-52.57,27.5),context.bezierCurveTo(-42.46,13.52,-30.05,-3.95,-19.49,-7.44),context.bezierCurveTo(-1.79,-13.03,8.32,-11.63,9.23,-10),context.bezierCurveTo(10.61,-6.51,23.94,9.8,30.6,10.26),context.bezierCurveTo(32.67,12.13,32.44,28.43,25.09,40.78),context.closePath(),context.fillStyle=fillColor.toString(),context.fill(),context.beginPath(),context.moveTo(16.36,14.69),context.bezierCurveTo(10.15,15.16,12.68,34.96,-8.46,48.47),context.bezierCurveTo(-30.05,62.44,-47.06,62.44,-47.06,62.44),context.bezierCurveTo(-47.06,62.44,-20.17,66.63,2.11,50.1),context.bezierCurveTo(24.4,33.32,22.79,14.69,16.36,14.69),context.closePath(),context.fillStyle=fillColor.toString(),context.fill(),context.restore()},window.BrushIconMorph=function(color){this.color=color,BrushIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new BrushIconAppearance(this),this.toolTipMessage="brush","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.BrushIconMorph,"name",{value:"BrushIconMorph"}),window.BrushIconMorph.instances=[],window.BrushIconMorph.__super__=window.IconMorph.prototype,window.BrushIconMorph=extend(window.BrushIconMorph,window.IconMorph),window.CFDegreesConverterIconAppearance=function(morph){this.morph=morph,CFDegreesConverterIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CFDegreesConverterIconAppearance,"name",{value:"CFDegreesConverterIconAppearance"}),window.CFDegreesConverterIconAppearance.instances=[],window.CFDegreesConverterIconAppearance.__super__=window.IconAppearance.prototype,window.CFDegreesConverterIconAppearance=extend(window.CFDegreesConverterIconAppearance,window.IconAppearance),window.CFDegreesConverterIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,this.oval(context,67,6.5,13,13),context.fillStyle="rgb(170, 170, 170)",context.fill(),context.beginPath(),context.moveTo(82,16),context.lineTo(82,37),context.moveTo(82,16),context.lineTo(93.5,16),context.moveTo(82,26),context.lineTo(87,26),context.strokeStyle=outlineColorString,context.lineWidth=7,context.lineCap="round",context.stroke(),this.oval(context,70,9.5,7,7),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.moveTo(95,16.49),context.bezierCurveTo(95,17.35,94.26,18.06,93.36,18.06),context.lineTo(83.53,18.06),context.bezierCurveTo(83.53,18.06,83.53,20.47,83.53,23.56),context.bezierCurveTo(83.68,23.52,83.84,23.5,84,23.5),context.lineTo(86,23.5),context.bezierCurveTo(87.1,23.5,88,24.4,88,25.5),context.bezierCurveTo(88,26.6,87.1,27.5,86,27.5),context.lineTo(84,27.5),context.bezierCurveTo(83.84,27.5,83.68,27.48,83.53,27.44),context.bezierCurveTo(83.53,32.18,83.53,36.94,83.53,36.94),context.bezierCurveTo(83.53,37.81,82.79,38.52,81.89,38.52),context.bezierCurveTo(80.99,38.52,80.25,37.81,80.25,36.94),context.bezierCurveTo(80.25,36.94,80.25,36.14,80.25,34.86),context.bezierCurveTo(80.25,29.66,80.25,16.49,80.25,16.49),context.bezierCurveTo(80.25,15.62,80.99,14.92,81.89,14.92),context.lineTo(93.36,14.92),context.bezierCurveTo(94.26,14.92,95,15.62,95,16.49),context.closePath(),context.fillStyle=iconColorString,context.fill(),this.oval(context,2.5,6.5,13,13),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(23.94,40.02),context.bezierCurveTo(16.42,40.02,10.28,33.76,10.28,26.07),context.bezierCurveTo(10.28,18.39,16.42,12.13,23.94,12.13),context.bezierCurveTo(27.56,12.13,32.1,14.34,33.55,16.17),context.bezierCurveTo(35,18,34.15,19.76,33.56,20.36),context.bezierCurveTo(32.99,20.97,31.82,21.91,29.42,21.37),context.bezierCurveTo(27.01,20.84,28.89,18.46,23.94,18.23),context.bezierCurveTo(19,18,16,23,16.32,26.07),context.bezierCurveTo(16.64,29.15,18.09,33.92,23.94,33.92),context.bezierCurveTo(26.76,33.92,27.01,31.56,29.42,30.78),context.bezierCurveTo(31.82,30,32.99,31.19,33.56,31.79),context.bezierCurveTo(34.15,32.39,34.14,35.38,33.55,35.98),context.bezierCurveTo(30.97,38.58,27.56,40.02,23.94,40.02),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(23.64,38.02),context.bezierCurveTo(17.38,38.02,12.28,32.66,12.28,26.07),context.bezierCurveTo(12.28,19.49,17.38,14.13,23.64,14.13),context.bezierCurveTo(26.65,14.13,29.48,15.36,31.63,17.59),context.bezierCurveTo(32.12,18.11,32.13,18.96,31.64,19.47),context.bezierCurveTo(31.16,19.99,30.35,20,29.85,19.48),context.bezierCurveTo(28.19,17.75,25.99,16.79,23.64,16.79),context.bezierCurveTo(18.77,16.79,14.81,20.95,14.81,26.07),context.bezierCurveTo(14.81,31.2,18.77,35.36,23.64,35.36),context.bezierCurveTo(25.98,35.36,28.19,34.41,29.85,32.67),context.bezierCurveTo(30.35,32.16,31.16,32.17,31.64,32.68),context.bezierCurveTo(32.13,33.2,32.12,34.05,31.63,34.56),context.bezierCurveTo(29.48,36.79,26.65,38.02,23.64,38.02),context.closePath(),context.fillStyle=iconColorString,context.fill(),this.oval(context,5.5,9.5,7,7),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.moveTo(51.3,2),context.bezierCurveTo(44.58,1.97,38.95,6.05,38.92,12.2),context.lineTo(38.92,64.3),context.bezierCurveTo(34.19,67.67,32,72.85,32,78.71),context.bezierCurveTo(32,88.82,40.17,98,51.34,98),context.bezierCurveTo(62.5,98,70.67,88.82,70.67,78.71),context.bezierCurveTo(70.67,72.84,68.47,67.64,63.72,64.27),context.bezierCurveTo(63.52,45.14,64,30.33,63.69,12.2),context.bezierCurveTo(63.72,6.05,58.09,1.97,51.3,2),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(51.31,4.82),context.bezierCurveTo(45.82,4.79,41.22,8.56,41.19,14.24),context.lineTo(41.19,64.94),context.bezierCurveTo(37.33,68.05,34.78,72.83,34.78,78.24),context.bezierCurveTo(34.78,87.57,42.22,95.18,51.34,95.18),context.bezierCurveTo(60.46,95.18,67.89,87.57,67.89,78.24),context.bezierCurveTo(67.89,72.82,65.33,68.02,61.45,64.91),context.bezierCurveTo(61.29,47.26,61.68,30.98,61.42,14.24),context.bezierCurveTo(61.45,8.56,56.85,4.79,51.31,4.82),context.closePath(),context.moveTo(51.28,8.59),context.bezierCurveTo(54.1,8.56,57.77,10.44,57.74,14.24),context.bezierCurveTo(57.8,31.68,57.77,48.05,57.77,65.76),context.bezierCurveTo(57.77,66.38,58.08,66.98,58.58,67.32),context.bezierCurveTo(61.98,69.69,64.21,73.69,64.21,78.24),context.bezierCurveTo(64.21,85.53,58.47,91.41,51.34,91.41),context.bezierCurveTo(44.2,91.41,38.46,85.53,38.46,78.24),context.bezierCurveTo(38.46,73.71,40.68,69.7,44.07,67.32),context.bezierCurveTo(44.55,66.99,44.86,66.4,44.87,65.79),context.lineTo(44.87,14.24),context.bezierCurveTo(44.9,10.44,47.66,8.56,51.28,8.59),context.closePath(),context.moveTo(47.4,49.18),context.bezierCurveTo(46.76,49.82,46.74,50.5,46.74,50.97),context.lineTo(46.74,70.18),context.bezierCurveTo(44.02,71.81,42.14,74.76,42.14,78.21),context.bezierCurveTo(42.14,83.38,46.28,87.62,51.34,87.62),context.bezierCurveTo(56.39,87.62,60.53,83.38,60.53,78.21),context.bezierCurveTo(60.53,74.77,58.65,71.84,55.93,70.21),context.lineTo(55.93,50.97),context.bezierCurveTo(55.94,50.29,55.55,49.61,54.96,49.29),context.bezierCurveTo(54.37,48.98,53.61,49.03,53.06,49.41),context.bezierCurveTo(51.61,49.96,50.53,48.82,49.38,48.59),context.bezierCurveTo(48.61,48.43,47.98,48.79,47.4,49.18),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(47,16),context.lineTo(56,16),context.strokeStyle=iconColorString,context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(47,23.5),context.lineTo(56,23.5),context.strokeStyle=iconColorString,context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(47,31),context.lineTo(56,31),context.strokeStyle=iconColorString,context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(47,38.5),context.lineTo(56,38.5),context.strokeStyle=iconColorString,context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(47,46),context.lineTo(56,46),context.strokeStyle=iconColorString,context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(51.5,19.75),context.lineTo(56,19.75),context.strokeStyle=iconColorString,context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(51.5,27.25),context.lineTo(56,27.25),context.strokeStyle=iconColorString,context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(51.5,34.75),context.lineTo(56,34.75),context.strokeStyle=iconColorString,context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(51.5,42.25),context.lineTo(56,42.25),context.strokeStyle=iconColorString,context.lineWidth=2,context.lineCap="round",context.stroke()},window.CFDegreesConverterIconWdgt=function(color){this.color=color,CFDegreesConverterIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new CFDegreesConverterIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CFDegreesConverterIconWdgt,"name",{value:"CFDegreesConverterIconWdgt"}),window.CFDegreesConverterIconWdgt.instances=[],window.CFDegreesConverterIconWdgt.__super__=window.IconMorph.prototype,window.CFDegreesConverterIconWdgt=extend(window.CFDegreesConverterIconWdgt,window.IconMorph),window.CalculatingNodeIconAppearance=function(morph){this.morph=morph,CalculatingNodeIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CalculatingNodeIconAppearance,"name",{value:"CalculatingNodeIconAppearance"}),window.CalculatingNodeIconAppearance.instances=[],window.CalculatingNodeIconAppearance.__super__=window.IconAppearance.prototype,window.CalculatingNodeIconAppearance=extend(window.CalculatingNodeIconAppearance,window.IconAppearance),window.CalculatingNodeIconAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),context.beginPath(),context.rect(20.5,17.5,60,66),context.strokeStyle=iconColorString,context.lineWidth=4,context.lineCap="round",context.lineJoin="round",context.stroke(),context.beginPath(),context.moveTo(19.5,26.5),context.lineTo(9.5,26.5),context.strokeStyle=iconColorString,context.lineWidth=2,context.stroke(),context.beginPath(),context.moveTo(19,72.5),context.lineTo(9,72.5),context.strokeStyle=iconColorString,context.lineWidth=2,context.stroke(),context.beginPath(),context.moveTo(81,51),context.lineTo(90,51),context.strokeStyle=iconColorString,context.lineWidth=2,context.stroke(),context.beginPath(),context.moveTo(28.53,34.5),context.bezierCurveTo(27.62,34.5,48.5,34.5,48.5,34.5),context.strokeStyle=iconColorString,context.lineWidth=2,context.stroke(),context.beginPath(),context.moveTo(38.5,23.5),context.lineTo(38.5,45.5),context.strokeStyle=iconColorString,context.lineWidth=2,context.stroke(),context.beginPath(),context.moveTo(58.5,34.5),context.lineTo(74.5,34.5),context.strokeStyle=iconColorString,context.lineWidth=2,context.stroke(),context.beginPath(),context.moveTo(29.5,72.5),context.lineTo(45.5,56.5),context.strokeStyle=iconColorString,context.lineWidth=2,context.stroke(),context.beginPath(),context.moveTo(29.5,56.5),context.lineTo(45.5,72.5),context.strokeStyle=iconColorString,context.lineWidth=2,context.stroke(),context.beginPath(),context.moveTo(58.5,63.5),context.lineTo(75.5,63.5),context.strokeStyle=iconColorString,context.lineWidth=2,context.stroke(),context.beginPath(),context.rect(65.5,54.5,4,4),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.rect(65.5,68.5,4,4),context.fillStyle=iconColorString,context.fill(),this.oval(context,88.5,48,6,6),context.fillStyle=iconColorString,context.fill(),this.oval(context,6.5,69.5,6,6),context.fillStyle=iconColorString,context.fill(),this.oval(context,6.5,23.5,6,6),context.fillStyle=iconColorString,context.fill()},window.CalculatingNodeIconWdgt=function(color){this.color=color,CalculatingNodeIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new CalculatingNodeIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CalculatingNodeIconWdgt,"name",{value:"CalculatingNodeIconWdgt"}),window.CalculatingNodeIconWdgt.instances=[],window.CalculatingNodeIconWdgt.__super__=window.IconMorph.prototype,window.CalculatingNodeIconWdgt=extend(window.CalculatingNodeIconWdgt,window.IconMorph),window.ChangeFontIconAppearance=function(morph){this.morph=morph,ChangeFontIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ChangeFontIconAppearance,"name",{value:"ChangeFontIconAppearance"}),window.ChangeFontIconAppearance.instances=[],window.ChangeFontIconAppearance.__super__=window.IconAppearance.prototype,window.ChangeFontIconAppearance=extend(window.ChangeFontIconAppearance,window.IconAppearance),window.ChangeFontIconAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),context.beginPath(),context.moveTo(75.17,68.88),context.lineTo(64.75,44.1),context.lineTo(54.47,68.88),context.lineTo(75.17,68.88),context.closePath(),context.moveTo(36.32,92),context.lineTo(36.32,90.37),context.bezierCurveTo(38.63,90.11,40.37,89.23,41.53,87.74),context.bezierCurveTo(42.68,86.24,44.67,82.19,47.48,75.56),context.lineTo(66.25,31.4),context.lineTo(68,31.4),context.lineTo(90.42,82.42),context.bezierCurveTo(91.91,85.82,93.1,87.92,94,88.73),context.bezierCurveTo(94.89,89.53,96.39,90.08,98.5,90.37),context.lineTo(98.5,92),context.lineTo(75.61,92),context.lineTo(75.61,90.37),context.bezierCurveTo(78.24,90.14,79.94,89.85,80.7,89.52),context.bezierCurveTo(81.46,89.18,81.85,88.35,81.85,87.03),context.bezierCurveTo(81.85,86.59,81.7,85.82,81.41,84.71),context.bezierCurveTo(81.11,83.59,80.7,82.42,80.18,81.19),context.lineTo(76.44,72.53),context.lineTo(52.89,72.53),context.bezierCurveTo(50.54,78.42,49.14,82.02,48.69,83.32),context.bezierCurveTo(48.23,84.62,48.01,85.66,48.01,86.42),context.bezierCurveTo(48.01,87.94,48.62,89,49.85,89.58),context.bezierCurveTo(50.62,89.93,52.05,90.2,54.16,90.37),context.lineTo(54.16,92),context.lineTo(36.32,92),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(33.67,14.23),context.lineTo(33.51,14.23),context.lineTo(23.36,42.21),context.lineTo(43.65,42.21),context.lineTo(33.67,14.23),context.closePath(),context.moveTo(38.12,7),context.bezierCurveTo(38.12,7,47.47,30.99,54.35,48.63),context.bezierCurveTo(52.82,52.25,51.26,55.92,49.88,59.18),context.bezierCurveTo(48.11,54.3,46.17,48.93,46.17,48.93),context.lineTo(20.84,48.93),context.lineTo(14.13,67),context.lineTo(6,67),context.bezierCurveTo(6,67,22.23,25.22,27.61,11.39),context.bezierCurveTo(28.67,8.64,29.31,7,29.31,7),context.lineTo(38.12,7),context.lineTo(38.12,7),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.ChangeFontIconWdgt=function(color){this.color=color,ChangeFontIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ChangeFontIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ChangeFontIconWdgt,"name",{value:"ChangeFontIconWdgt"}),window.ChangeFontIconWdgt.instances=[],window.ChangeFontIconWdgt.__super__=window.IconMorph.prototype,window.ChangeFontIconWdgt=extend(window.ChangeFontIconWdgt,window.IconMorph),window.CloseIconAppearance=function(){window.CloseIconAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CloseIconAppearance,"name",{value:"CloseIconAppearance"}),window.CloseIconAppearance.instances=[],window.CloseIconAppearance.__super__=window.IconAppearance.prototype,window.CloseIconAppearance=extend(window.CloseIconAppearance,window.IconAppearance),window.CloseIconAppearance.prototype.paintFunction=function(context){var fillColor;return fillColor=this.morph.color,context.beginPath(),context.moveTo(100.5,196.5),context.bezierCurveTo(153.91,196.5,197.5,152.91,197.5,99.5),context.bezierCurveTo(197.5,46.09,153.91,2.5,100.5,2.5),context.bezierCurveTo(47.09,2.5,3.5,46.09,3.5,99.5),context.bezierCurveTo(3.5,152.91,47.09,196.5,100.5,196.5),context.closePath(),context.moveTo(100.5,15.1),context.bezierCurveTo(147.11,15.1,184.9,52.89,184.9,99.5),context.bezierCurveTo(184.9,146.11,147.11,183.9,100.5,183.9),context.bezierCurveTo(53.89,183.9,16.1,146.11,16.1,99.5),context.bezierCurveTo(16.1,52.89,53.89,15.1,100.5,15.1),context.closePath(),context.fillStyle=fillColor.toString(),context.fill(),context.beginPath(),context.moveTo(65.73,134.27),context.bezierCurveTo(66.99,135.53,68.5,136.03,70.27,136.03),context.bezierCurveTo(72.03,136.03,73.54,135.53,74.8,134.27),context.lineTo(100.5,108.32),context.lineTo(126.45,134.27),context.bezierCurveTo(127.71,135.53,129.22,136.03,130.99,136.03),context.bezierCurveTo(132.75,136.03,134.26,135.53,135.52,134.27),context.bezierCurveTo(138.04,131.75,138.04,127.72,135.52,125.45),context.lineTo(109.32,99.5),context.lineTo(135.27,73.55),context.bezierCurveTo(137.79,71.03,137.79,67,135.27,64.73),context.bezierCurveTo(132.75,62.21,128.72,62.21,126.45,64.73),context.lineTo(100.5,90.68),context.lineTo(74.55,64.73),context.bezierCurveTo(72.03,62.21,68,62.21,65.73,64.73),context.bezierCurveTo(63.21,67.25,63.21,71.28,65.73,73.55),context.lineTo(91.68,99.5),context.lineTo(65.73,125.45),context.bezierCurveTo(63.21,127.72,63.21,131.75,65.73,134.27),context.closePath(),context.fillStyle=fillColor.toString(),context.fill()},window.CollapseIconAppearance=function(){window.CollapseIconAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CollapseIconAppearance,"name",{value:"CollapseIconAppearance"}),window.CollapseIconAppearance.instances=[],window.CollapseIconAppearance.__super__=window.IconAppearance.prototype,window.CollapseIconAppearance=extend(window.CollapseIconAppearance,window.IconAppearance),window.CollapseIconAppearance.prototype.paintFunction=function(context){var fillColor;return fillColor=this.morph.color,context.beginPath(),context.moveTo(100.5,196.5),context.bezierCurveTo(153.91,196.5,197.5,152.91,197.5,99.5),context.bezierCurveTo(197.5,46.09,153.91,2.5,100.5,2.5),context.bezierCurveTo(47.09,2.5,3.5,46.09,3.5,99.5),context.bezierCurveTo(3.5,152.91,47.09,196.5,100.5,196.5),context.closePath(),context.moveTo(100.5,15.1),context.bezierCurveTo(147.11,15.1,184.9,52.89,184.9,99.5),context.bezierCurveTo(184.9,146.11,147.11,183.9,100.5,183.9),context.bezierCurveTo(53.89,183.9,16.1,146.11,16.1,99.5),context.bezierCurveTo(16.1,52.89,53.89,15.1,100.5,15.1),context.closePath(),context.fillStyle=fillColor.toString(),context.fill(),context.beginPath(),context.rect(65,107,65,21),context.closePath(),context.fill()},window.CollapsedStateIconAppearance=function(morph){this.morph=morph,CollapsedStateIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(400,400),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CollapsedStateIconAppearance,"name",{value:"CollapsedStateIconAppearance"}),window.CollapsedStateIconAppearance.instances=[],window.CollapsedStateIconAppearance.__super__=window.IconAppearance.prototype,window.CollapsedStateIconAppearance=extend(window.CollapsedStateIconAppearance,window.IconAppearance),window.CollapsedStateIconAppearance.prototype.paintFunction=function(context){return"rgb(0, 0, 0)",context.beginPath(),context.moveTo(44.5,262.42),context.lineTo(204.07,111.5),context.lineTo(360.5,265.5),context.strokeStyle="rgb(0, 0, 0)",context.lineWidth=30,context.stroke()},window.CollapsedStateIconMorph=function(color){this.color=color,CollapsedStateIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new CollapsedStateIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CollapsedStateIconMorph,"name",{value:"CollapsedStateIconMorph"}),window.CollapsedStateIconMorph.instances=[],window.CollapsedStateIconMorph.__super__=window.IconMorph.prototype,window.CollapsedStateIconMorph=extend(window.CollapsedStateIconMorph,window.IconMorph),window.CollapsedStateIconMorph.prototype.colloquialName=function(){return'"Collapsed state" icon'},window.ColorPalettePatchProgrammingIconAppearance=function(morph){this.morph=morph,ColorPalettePatchProgrammingIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ColorPalettePatchProgrammingIconAppearance,"name",{value:"ColorPalettePatchProgrammingIconAppearance"}),window.ColorPalettePatchProgrammingIconAppearance.instances=[],window.ColorPalettePatchProgrammingIconAppearance.__super__=window.IconAppearance.prototype,window.ColorPalettePatchProgrammingIconAppearance=extend(window.ColorPalettePatchProgrammingIconAppearance,window.IconAppearance),window.ColorPalettePatchProgrammingIconAppearance.prototype.colorGradient=nil,window.ColorPalettePatchProgrammingIconAppearance.prototype.paintFunction=function(context){var colorStops,iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),null==this.colorGradient&&(colorStops=function(g){return g.addColorStop(0,"rgb(255, 0, 0)"),g.addColorStop(.15,"rgb(255, 0, 255)"),g.addColorStop(.33,"rgb(0, 0, 255)"),g.addColorStop(.49,"rgb(0, 255, 255)"),g.addColorStop(.67,"rgb(0, 255, 0)"),g.addColorStop(.84,"rgb(255, 255, 0)"),g.addColorStop(1,"rgb(255, 0, 0)"),g},this.colorGradient=colorStops(context.createLinearGradient(79,82,21,82))),context.beginPath(),context.rect(21,19,58,63),context.fillStyle=this.colorGradient,context.fill(),context.beginPath(),context.rect(20.5,17.5,60,66),context.strokeStyle=iconColorString,context.lineWidth=4,context.lineCap="round",context.lineJoin="round",context.stroke(),context.beginPath(),context.moveTo(81,51),context.lineTo(90,51),context.strokeStyle=iconColorString,context.lineWidth=2,context.stroke(),this.oval(context,88.5,48,6,6),context.fillStyle=iconColorString,context.fill()},window.ColorPalettePatchProgrammingIconWdgt=function(color){this.color=color,ColorPalettePatchProgrammingIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ColorPalettePatchProgrammingIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ColorPalettePatchProgrammingIconWdgt,"name",{value:"ColorPalettePatchProgrammingIconWdgt"}),window.ColorPalettePatchProgrammingIconWdgt.instances=[],window.ColorPalettePatchProgrammingIconWdgt.__super__=window.IconMorph.prototype,window.ColorPalettePatchProgrammingIconWdgt=extend(window.ColorPalettePatchProgrammingIconWdgt,window.IconMorph),window.DashboardsIconAppearance=function(morph){this.morph=morph,DashboardsIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DashboardsIconAppearance,"name",{value:"DashboardsIconAppearance"}),window.DashboardsIconAppearance.instances=[],window.DashboardsIconAppearance.__super__=window.IconAppearance.prototype,window.DashboardsIconAppearance=extend(window.DashboardsIconAppearance,window.IconAppearance),window.DashboardsIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(87.54,18),context.lineTo(13.57,18),context.bezierCurveTo(10.05,18,7.12,20.67,7.12,23.87),context.lineTo(7,76.13),context.bezierCurveTo(7,79.33,9.94,82,13.46,82),context.lineTo(87.43,82),context.bezierCurveTo(90.95,82,93.88,79.33,93.88,76.13),context.lineTo(94,23.87),context.bezierCurveTo(94,20.67,91.06,18,87.54,18),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(85.84,20),context.lineTo(15.27,20),context.bezierCurveTo(11.91,20,9.11,22.5,9.11,25.5),context.lineTo(9,74.5),context.bezierCurveTo(9,77.5,11.8,80,15.16,80),context.lineTo(85.73,80),context.bezierCurveTo(89.09,80,91.89,77.5,91.89,74.5),context.lineTo(92,25.5),context.bezierCurveTo(92,22.5,89.2,20,85.84,20),context.closePath(),context.moveTo(88.53,74.5),context.bezierCurveTo(88.53,75.9,87.3,77,85.73,77),context.lineTo(15.16,77),context.bezierCurveTo(13.59,77,12.36,75.9,12.36,74.5),context.lineTo(12.47,25.5),context.bezierCurveTo(12.47,24.1,13.7,23,15.27,23),context.lineTo(85.84,23),context.bezierCurveTo(87.41,23,88.64,24.1,88.64,25.5),context.lineTo(88.53,74.5),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(22,27),context.lineTo(23.2,27),context.lineTo(23.2,46.8),context.lineTo(46,46.8),context.lineTo(46,48),context.lineTo(22,48),context.lineTo(22,27),context.closePath(),context.fillStyle=iconColorString,context.fill(),this.oval(context,35,30,3,3),context.fillStyle=iconColorString,context.fill(),this.oval(context,27,40,3,3),context.fillStyle=iconColorString,context.fill(),this.oval(context,27,29,3,3),context.fillStyle=iconColorString,context.fill(),this.oval(context,31,35,3,3),context.fillStyle=iconColorString,context.fill(),this.oval(context,37,35,3,3),context.fillStyle=iconColorString,context.fill(),this.oval(context,43,33,3,3),context.fillStyle=iconColorString,context.fill(),this.oval(context,43,28,3,3),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(56,27),context.lineTo(57.17,27),context.lineTo(57.17,46.8),context.lineTo(79.41,46.8),context.lineTo(79.41,48),context.lineTo(56,48),context.lineTo(56,27),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.save(),context.translate(60.06,23.23),context.beginPath(),context.moveTo(1.4,20.37),context.lineTo(0,19.37),context.lineTo(3.13,13.52),context.bezierCurveTo(4.45,10.81,5.8,9.61,7.17,9.91),context.bezierCurveTo(8.06,10.11,11.22,15.04,12.2,13.83),context.bezierCurveTo(12.63,13.77,17.52,4,17.52,4),context.lineTo(18.94,4.89),context.bezierCurveTo(18.94,4.89,14.09,14.19,13.71,14.8),context.bezierCurveTo(13.25,15.39,12.76,15.74,12.09,15.71),context.bezierCurveTo(11.32,15.77,10.62,15.52,9.55,14.58),context.bezierCurveTo(8.49,13.64,7.55,12.27,6.63,12.1),context.bezierCurveTo(5.71,11.93,4.97,13.58,4.44,14.5),context.lineTo(1.4,20.37),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.restore(),context.beginPath(),context.rect(43,55,3,15),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.rect(37,63,4,7),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.rect(32,65,3,5),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.rect(26,63,4,7),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(22,53),context.lineTo(23.2,53),context.lineTo(23.2,72.8),context.lineTo(46,72.8),context.lineTo(46,74),context.lineTo(22,74),context.lineTo(22,53),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(69.37,64.35),context.lineTo(69.37,57.47),context.bezierCurveTo(69.37,57.26,69.2,57.1,69,57.1),context.bezierCurveTo(68.8,57.1,68.63,57.26,68.63,57.47),context.lineTo(68.63,64.36),context.lineTo(62.18,69.09),context.bezierCurveTo(62.02,69.21,61.98,69.44,62.1,69.61),context.bezierCurveTo(62.22,69.78,62.45,69.82,62.62,69.7),context.lineTo(69.01,65.01),context.lineTo(75.76,69.7),context.bezierCurveTo(75.82,69.74,75.89,69.76,75.97,69.76),context.bezierCurveTo(76.09,69.76,76.2,69.71,76.27,69.6),context.bezierCurveTo(76.39,69.43,76.35,69.2,76.18,69.08),context.lineTo(69.37,64.35),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(68.63,54.64),context.lineTo(68.63,55.61),context.bezierCurveTo(68.63,55.81,68.8,55.98,69,55.98),context.bezierCurveTo(69.2,55.98,69.37,55.81,69.37,55.61),context.lineTo(69.37,54.64),context.lineTo(70.36,53.63),context.bezierCurveTo(70.5,53.49,70.5,53.25,70.36,53.11),context.bezierCurveTo(70.22,52.96,69.99,52.96,69.84,53.11),context.lineTo(69,53.96),context.lineTo(68.16,53.11),context.bezierCurveTo(68.02,52.96,67.79,52.96,67.64,53.11),context.bezierCurveTo(67.5,53.26,67.5,53.49,67.64,53.64),context.lineTo(68.63,54.64),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(79.05,70.51),context.lineTo(79.89,69.66),context.bezierCurveTo(80.03,69.51,80.03,69.28,79.89,69.13),context.bezierCurveTo(79.75,68.99,79.52,68.99,79.37,69.13),context.lineTo(78.53,69.98),context.lineTo(77.7,69.13),context.bezierCurveTo(77.55,68.99,77.32,68.99,77.18,69.13),context.bezierCurveTo(77.04,69.28,77.04,69.51,77.18,69.66),context.lineTo(78.02,70.51),context.lineTo(77.18,71.36),context.bezierCurveTo(77.04,71.51,77.04,71.74,77.18,71.89),context.bezierCurveTo(77.25,71.96,77.34,72,77.43,72),context.bezierCurveTo(77.53,72,77.62,71.96,77.7,71.89),context.lineTo(78.53,71.04),context.lineTo(79.37,71.89),context.bezierCurveTo(79.45,71.96,79.54,72,79.63,72),context.bezierCurveTo(79.73,72,79.82,71.96,79.9,71.89),context.bezierCurveTo(80.04,71.75,80.04,71.51,79.9,71.37),context.lineTo(79.05,70.51),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(60.9,69.53),context.bezierCurveTo(60.94,69.44,60.94,69.34,60.9,69.25),context.bezierCurveTo(60.87,69.16,60.79,69.09,60.71,69.05),context.bezierCurveTo(60.66,69.03,60.61,69.02,60.57,69.02),context.lineTo(58.37,69.02),context.bezierCurveTo(58.17,69.02,58,69.19,58,69.39),context.bezierCurveTo(58,69.6,58.17,69.76,58.37,69.76),context.lineTo(59.68,69.76),context.lineTo(58.11,71.36),context.bezierCurveTo(58.08,71.4,58.05,71.44,58.03,71.49),context.bezierCurveTo(57.99,71.58,57.99,71.68,58.03,71.77),context.bezierCurveTo(58.07,71.86,58.14,71.93,58.23,71.97),context.bezierCurveTo(58.27,71.99,58.32,72,58.37,72),context.lineTo(60.57,72),context.bezierCurveTo(60.77,72,60.93,71.83,60.93,71.63),context.bezierCurveTo(60.93,71.42,60.77,71.25,60.57,71.25),context.lineTo(59.25,71.25),context.lineTo(60.82,69.66),context.bezierCurveTo(60.86,69.62,60.89,69.58,60.9,69.53),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.DashboardsIconWdgt=function(color){this.color=color,DashboardsIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new DashboardsIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DashboardsIconWdgt,"name",{value:"DashboardsIconWdgt"}),window.DashboardsIconWdgt.instances=[],window.DashboardsIconWdgt.__super__=window.IconMorph.prototype,window.DashboardsIconWdgt=extend(window.DashboardsIconWdgt,window.IconMorph),window.DecreaseFontSizeIconAppearance=function(morph){this.morph=morph,DecreaseFontSizeIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DecreaseFontSizeIconAppearance,"name",{value:"DecreaseFontSizeIconAppearance"}),window.DecreaseFontSizeIconAppearance.instances=[],window.DecreaseFontSizeIconAppearance.__super__=window.IconAppearance.prototype,window.DecreaseFontSizeIconAppearance=extend(window.DecreaseFontSizeIconAppearance,window.IconAppearance),window.DecreaseFontSizeIconAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),context.beginPath(),context.moveTo(37.91,19.09),context.bezierCurveTo(37.42,17.84,36.06,17,34.52,17),context.bezierCurveTo(32.98,17,31.62,17.84,31.13,19.09),context.lineTo(9.41,74.96),context.bezierCurveTo(8.79,76.56,9.8,78.3,11.67,78.84),context.bezierCurveTo(13.55,79.38,15.56,78.51,16.19,76.9),context.lineTo(20.88,64.84),context.lineTo(47.93,64.84),context.bezierCurveTo(48.01,64.84,48.07,64.8,48.14,64.8),context.lineTo(52.85,76.9),context.bezierCurveTo(53.35,78.19,54.74,79,56.23,79),context.bezierCurveTo(56.61,79,56.99,78.95,57.36,78.84),context.bezierCurveTo(59.23,78.3,60.24,76.57,59.62,74.97),context.lineTo(37.91,19.09),context.closePath(),context.moveTo(23.26,58.71),context.lineTo(34.52,29.74),context.lineTo(45.78,58.71),context.lineTo(23.26,58.71),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(58.44,40.34),context.lineTo(74.97,56.79),context.lineTo(91.5,40.34),context.lineTo(58.44,40.34),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.DecreaseFontSizeIconWdgt=function(color){this.color=color,DecreaseFontSizeIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new DecreaseFontSizeIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DecreaseFontSizeIconWdgt,"name",{value:"DecreaseFontSizeIconWdgt"}),window.DecreaseFontSizeIconWdgt.instances=[],window.DecreaseFontSizeIconWdgt.__super__=window.IconMorph.prototype,window.DecreaseFontSizeIconWdgt=extend(window.DecreaseFontSizeIconWdgt,window.IconMorph),window.DegreesConverterIconAppearance=function(morph){this.morph=morph,DegreesConverterIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DegreesConverterIconAppearance,"name",{value:"DegreesConverterIconAppearance"}),window.DegreesConverterIconAppearance.instances=[],window.DegreesConverterIconAppearance.__super__=window.IconAppearance.prototype,window.DegreesConverterIconAppearance=extend(window.DegreesConverterIconAppearance,window.IconAppearance),window.DegreesConverterIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,this.oval(context,67,6.5,13,13),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(82,16),context.lineTo(82,37),context.moveTo(82,16),context.lineTo(93.5,16),context.moveTo(82,26),context.lineTo(87,26),context.strokeStyle=outlineColorString,context.lineWidth=7,context.lineCap="round",context.stroke(),this.oval(context,70,9.5,7,7),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.moveTo(95,16.49),context.bezierCurveTo(95,17.35,94.26,18.06,93.36,18.06),context.lineTo(83.53,18.06),context.bezierCurveTo(83.53,18.06,83.53,20.47,83.53,23.56),context.bezierCurveTo(83.68,23.52,83.84,23.5,84,23.5),context.lineTo(86,23.5),context.bezierCurveTo(87.1,23.5,88,24.4,88,25.5),context.bezierCurveTo(88,26.6,87.1,27.5,86,27.5),context.lineTo(84,27.5),context.bezierCurveTo(83.84,27.5,83.68,27.48,83.53,27.44),context.bezierCurveTo(83.53,32.18,83.53,36.94,83.53,36.94),context.bezierCurveTo(83.53,37.81,82.79,38.52,81.89,38.52),context.bezierCurveTo(80.99,38.52,80.25,37.81,80.25,36.94),context.bezierCurveTo(80.25,36.94,80.25,36.14,80.25,34.86),context.bezierCurveTo(80.25,29.66,80.25,16.49,80.25,16.49),context.bezierCurveTo(80.25,15.62,80.99,14.92,81.89,14.92),context.lineTo(93.36,14.92),context.bezierCurveTo(94.26,14.92,95,15.62,95,16.49),context.closePath(),context.fillStyle=iconColorString,context.fill(),this.oval(context,2.5,6.5,13,13),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(23.94,40.02),context.bezierCurveTo(16.42,40.02,10.28,33.76,10.28,26.07),context.bezierCurveTo(10.28,18.39,16.42,12.13,23.94,12.13),context.bezierCurveTo(27.56,12.13,32.1,14.34,33.55,16.17),context.bezierCurveTo(35,18,34.15,19.76,33.56,20.36),context.bezierCurveTo(32.99,20.97,31.82,21.91,29.42,21.37),context.bezierCurveTo(27.01,20.84,28.89,18.46,23.94,18.23),context.bezierCurveTo(19,18,16,23,16.32,26.07),context.bezierCurveTo(16.64,29.15,18.09,33.92,23.94,33.92),context.bezierCurveTo(26.76,33.92,27.01,31.56,29.42,30.78),context.bezierCurveTo(31.82,30,32.99,31.19,33.56,31.79),context.bezierCurveTo(34.15,32.39,34.14,35.38,33.55,35.98),context.bezierCurveTo(30.97,38.58,27.56,40.02,23.94,40.02),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(23.64,38.02),context.bezierCurveTo(17.38,38.02,12.28,32.66,12.28,26.07),context.bezierCurveTo(12.28,19.49,17.38,14.13,23.64,14.13),context.bezierCurveTo(26.65,14.13,29.48,15.36,31.63,17.59),context.bezierCurveTo(32.12,18.11,32.13,18.96,31.64,19.47),context.bezierCurveTo(31.16,19.99,30.35,20,29.85,19.48),context.bezierCurveTo(28.19,17.75,25.99,16.79,23.64,16.79),context.bezierCurveTo(18.77,16.79,14.81,20.95,14.81,26.07),context.bezierCurveTo(14.81,31.2,18.77,35.36,23.64,35.36),context.bezierCurveTo(25.98,35.36,28.19,34.41,29.85,32.67),context.bezierCurveTo(30.35,32.16,31.16,32.17,31.64,32.68),context.bezierCurveTo(32.13,33.2,32.12,34.05,31.63,34.56),context.bezierCurveTo(29.48,36.79,26.65,38.02,23.64,38.02),context.closePath(),context.fillStyle=iconColorString,context.fill(),this.oval(context,5.5,9.5,7,7),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.moveTo(51.3,2),context.bezierCurveTo(44.58,1.97,38.95,6.05,38.92,12.2),context.lineTo(38.92,64.3),context.bezierCurveTo(34.19,67.67,32,72.85,32,78.71),context.bezierCurveTo(32,88.82,40.17,98,51.34,98),context.bezierCurveTo(62.5,98,70.67,88.82,70.67,78.71),context.bezierCurveTo(70.67,72.84,68.47,67.64,63.72,64.27),context.bezierCurveTo(63.52,45.14,64,30.33,63.69,12.2),context.bezierCurveTo(63.72,6.05,58.09,1.97,51.3,2),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(51.31,4.82),context.bezierCurveTo(45.82,4.79,41.22,8.56,41.19,14.24),context.lineTo(41.19,64.94),context.bezierCurveTo(37.33,68.05,34.78,72.83,34.78,78.24),context.bezierCurveTo(34.78,87.57,42.22,95.18,51.34,95.18),context.bezierCurveTo(60.46,95.18,67.89,87.57,67.89,78.24),context.bezierCurveTo(67.89,72.82,65.33,68.02,61.45,64.91),context.bezierCurveTo(61.29,47.26,61.68,30.98,61.42,14.24),context.bezierCurveTo(61.45,8.56,56.85,4.79,51.31,4.82),context.closePath(),context.moveTo(51.28,8.59),context.bezierCurveTo(54.1,8.56,57.77,10.44,57.74,14.24),context.bezierCurveTo(57.8,31.68,57.77,48.05,57.77,65.76),context.bezierCurveTo(57.77,66.38,58.08,66.98,58.58,67.32),context.bezierCurveTo(61.98,69.69,64.21,73.69,64.21,78.24),context.bezierCurveTo(64.21,85.53,58.47,91.41,51.34,91.41),context.bezierCurveTo(44.2,91.41,38.46,85.53,38.46,78.24),context.bezierCurveTo(38.46,73.71,40.68,69.7,44.07,67.32),context.bezierCurveTo(44.55,66.99,44.86,66.4,44.87,65.79),context.lineTo(44.87,14.24),context.bezierCurveTo(44.9,10.44,47.66,8.56,51.28,8.59),context.closePath(),context.moveTo(47.4,49.18),context.bezierCurveTo(46.76,49.82,46.74,50.5,46.74,50.97),context.lineTo(46.74,70.18),context.bezierCurveTo(44.02,71.81,42.14,74.76,42.14,78.21),context.bezierCurveTo(42.14,83.38,46.28,87.62,51.34,87.62),context.bezierCurveTo(56.39,87.62,60.53,83.38,60.53,78.21),context.bezierCurveTo(60.53,74.77,58.65,71.84,55.93,70.21),context.lineTo(55.93,50.97),context.bezierCurveTo(55.94,50.29,55.55,49.61,54.96,49.29),context.bezierCurveTo(54.37,48.98,53.61,49.03,53.06,49.41),context.bezierCurveTo(51.61,49.96,50.53,48.82,49.38,48.59),context.bezierCurveTo(48.61,48.43,47.98,48.79,47.4,49.18),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(47,16),context.lineTo(56,16),context.strokeStyle=iconColorString,context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(47,23.5),context.lineTo(56,23.5),context.strokeStyle=iconColorString,context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(47,31),context.lineTo(56,31),context.strokeStyle=iconColorString,context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(47,38.5),context.lineTo(56,38.5),context.strokeStyle=iconColorString,context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(47,46),context.lineTo(56,46),context.strokeStyle=iconColorString,context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(51.5,19.75),context.lineTo(56,19.75),context.strokeStyle=iconColorString,context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(51.5,27.25),context.lineTo(56,27.25),context.strokeStyle=iconColorString,context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(51.5,34.75),context.lineTo(56,34.75),context.strokeStyle=iconColorString,context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(51.5,42.25),context.lineTo(56,42.25),context.strokeStyle=iconColorString,context.lineWidth=2,context.lineCap="round",context.stroke()},window.DegreesConverterIconWdgt=function(color){this.color=color,DegreesConverterIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new DegreesConverterIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DegreesConverterIconWdgt,"name",{value:"DegreesConverterIconWdgt"}),window.DegreesConverterIconWdgt.instances=[],window.DegreesConverterIconWdgt.__super__=window.IconMorph.prototype,window.DegreesConverterIconWdgt=extend(window.DegreesConverterIconWdgt,window.IconMorph),window.DestroyIconAppearance=function(morph){this.morph=morph,DestroyIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DestroyIconAppearance,"name",{value:"DestroyIconAppearance"}),window.DestroyIconAppearance.instances=[],window.DestroyIconAppearance.__super__=window.IconAppearance.prototype,window.DestroyIconAppearance=extend(window.DestroyIconAppearance,window.IconAppearance),window.DestroyIconAppearance.prototype.paintFunction=function(context){var fillColorString,strokeColorString;if(fillColorString=this.morph.color.toString(),null!=this.morph.strokeColor&&(strokeColorString=this.morph.strokeColor.toString()),context.beginPath(),context.moveTo(42.5,4.5),context.lineTo(53.5,29.5),context.lineTo(72.5,9.5),context.lineTo(65.5,35.5),context.lineTo(94.5,34.5),context.lineTo(70.5,51.5),context.lineTo(96.5,72.5),context.lineTo(65.5,66.5),context.lineTo(73.5,87.5),context.lineTo(55.5,73.5),context.lineTo(43.5,96.5),context.lineTo(36.5,67.5),context.lineTo(9.5,77.5),context.lineTo(24.5,59.5),context.lineTo(3.5,56.5),context.lineTo(25.5,48.5),context.lineTo(5.5,25.5),context.lineTo(37.5,32.5),context.lineTo(42.5,4.5),context.closePath(),context.fillStyle=fillColorString,context.fill(),null!=strokeColorString)return context.strokeStyle=strokeColorString,context.lineWidth=1,context.stroke()},window.DestroyIconMorph=function(color){this.color=color,DestroyIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new DestroyIconAppearance(this),this.toolTipMessage="explosion","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DestroyIconMorph,"name",{value:"DestroyIconMorph"}),window.DestroyIconMorph.instances=[],window.DestroyIconMorph.__super__=window.IconMorph.prototype,window.DestroyIconMorph=extend(window.DestroyIconMorph,window.IconMorph),window.DestroyIconMorph.prototype.colloquialName=function(){return'"Destroy" icon'},window.ElasticWindowIconAppearance=function(morph){this.morph=morph,ElasticWindowIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ElasticWindowIconAppearance,"name",{value:"ElasticWindowIconAppearance"}),window.ElasticWindowIconAppearance.instances=[],window.ElasticWindowIconAppearance.__super__=window.IconAppearance.prototype,window.ElasticWindowIconAppearance=extend(window.ElasticWindowIconAppearance,window.IconAppearance),window.ElasticWindowIconAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),this.oval(context,11,11,6,6),context.fillStyle=iconColorString,context.fill(),this.oval(context,22,11,6,6),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(5,24),context.lineTo(91,24),context.strokeStyle=iconColorString,context.lineWidth=4,context.stroke(),context.beginPath(),context.rect(4,4,88,88),context.strokeStyle=iconColorString,context.lineWidth=3.5,context.lineJoin="round",context.stroke(),context.beginPath(),context.moveTo(82,83),context.lineTo(82,33),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.moveTo(80.5,57.65),context.bezierCurveTo(79.09,60.86,77.49,64.5,74.07,64.5),context.bezierCurveTo(70.64,64.5,69.05,60.86,67.64,57.65),context.bezierCurveTo(66.18,54.32,65.09,52.15,63.23,52.15),context.bezierCurveTo(61.38,52.15,60.28,54.32,58.83,57.65),context.bezierCurveTo(57.42,60.86,55.82,64.5,52.4,64.5),context.bezierCurveTo(48.97,64.5,47.38,60.86,45.97,57.65),context.bezierCurveTo(44.51,54.32,43.42,52.15,41.56,52.15),context.bezierCurveTo(39.71,52.15,38.62,54.32,37.16,57.65),context.bezierCurveTo(35.75,60.86,34.16,64.5,30.73,64.5),context.bezierCurveTo(27.31,64.5,25.72,60.86,24.31,57.65),context.bezierCurveTo(22.85,54.32,21.76,52.15,19.9,52.15),context.bezierCurveTo(18.05,52.15,16.96,54.32,15.5,57.65),context.strokeStyle=iconColorString,context.lineWidth=3,context.miterLimit=4,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(15,83),context.lineTo(15,33),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke()},window.ElasticWindowIconWdgt=function(color){this.color=color,ElasticWindowIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ElasticWindowIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ElasticWindowIconWdgt,"name",{value:"ElasticWindowIconWdgt"}),window.ElasticWindowIconWdgt.instances=[],window.ElasticWindowIconWdgt.__super__=window.IconMorph.prototype,window.ElasticWindowIconWdgt=extend(window.ElasticWindowIconWdgt,window.IconMorph),window.EmptyWindowIconAppearance=function(morph){this.morph=morph,EmptyWindowIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.EmptyWindowIconAppearance,"name",{value:"EmptyWindowIconAppearance"}),window.EmptyWindowIconAppearance.instances=[],window.EmptyWindowIconAppearance.__super__=window.IconAppearance.prototype,window.EmptyWindowIconAppearance=extend(window.EmptyWindowIconAppearance,window.IconAppearance),window.EmptyWindowIconAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),this.oval(context,11,11,6,6),context.fillStyle=iconColorString,context.fill(),this.oval(context,22,11,6,6),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(5,24),context.lineTo(91,24),context.strokeStyle=iconColorString,context.lineWidth=4,context.stroke(),context.beginPath(),context.rect(4,4,88,88),context.strokeStyle=iconColorString,context.lineWidth=3.5,context.lineJoin="round",context.stroke(),context.beginPath(),context.moveTo(19,33),context.lineTo(14,33),context.lineTo(14,39),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.lineCap="square",context.stroke(),context.beginPath(),context.moveTo(14,45),context.lineTo(14,53),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.moveTo(14,60),context.bezierCurveTo(14,59.5,14,69,14,69),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.moveTo(14,77),context.lineTo(14,82),context.lineTo(21,82),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.moveTo(77,82),context.lineTo(82,82),context.lineTo(82,75),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.moveTo(82,68),context.lineTo(82,60),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.moveTo(82,53),context.lineTo(82,44),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.moveTo(82,38.94),context.bezierCurveTo(82,39.69,82,33,82,33),context.lineTo(75,33),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.moveTo(26,33),context.lineTo(38,33),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.moveTo(43,33),context.lineTo(53,33),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.moveTo(58,33),context.lineTo(70,33),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.moveTo(26,82),context.lineTo(38,82),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.moveTo(43,82),context.lineTo(53,82),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.moveTo(58,82),context.lineTo(70,82),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke()},window.EmptyWindowIconWdgt=function(color){this.color=color,EmptyWindowIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new EmptyWindowIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.EmptyWindowIconWdgt,"name",{value:"EmptyWindowIconWdgt"}),window.EmptyWindowIconWdgt.instances=[],window.EmptyWindowIconWdgt.__super__=window.IconMorph.prototype,window.EmptyWindowIconWdgt=extend(window.EmptyWindowIconWdgt,window.IconMorph),window.EraserIconAppearance=function(){window.EraserIconAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.EraserIconAppearance,"name",{value:"EraserIconAppearance"}),window.EraserIconAppearance.instances=[],window.EraserIconAppearance.__super__=window.IconAppearance.prototype,window.EraserIconAppearance=extend(window.EraserIconAppearance,window.IconAppearance),window.EraserIconAppearance.prototype.paintFunction=function(context){var fillColor;return fillColor=this.morph.color,context.beginPath(),context.moveTo(191.45,32.27),context.bezierCurveTo(190.62,31.18,189.31,30.53,187.94,30.53),context.lineTo(100.04,30.53),context.bezierCurveTo(99.26,30.53,98.5,30.75,97.84,31.16),context.lineTo(97.68,31.02),context.lineTo(23.59,110.15),context.lineTo(22.8,111.05),context.lineTo(22.9,111.15),context.bezierCurveTo(22.74,111.45,22.61,111.75,22.53,112.06),context.lineTo(8.79,163.86),context.bezierCurveTo(8.44,165.19,8.72,166.64,9.55,167.73),context.bezierCurveTo(10.38,168.82,11.69,169.47,13.05,169.47),context.lineTo(100.95,169.47),context.bezierCurveTo(102.36,169.47,103.61,168.87,104.9,167.56),context.lineTo(177.19,90.19),context.bezierCurveTo(177.41,89.96,178.23,88.81,178.46,87.94),context.lineTo(191.72,37.95),context.lineTo(192.21,36.14),context.bezierCurveTo(192.56,34.79,192.29,33.38,191.45,32.27),context.closePath(),context.moveTo(108.95,117.67),context.lineTo(97.57,160.56),context.lineTo(18.8,160.56),context.lineTo(30.18,117.67),context.lineTo(108.95,117.67),context.closePath(),context.moveTo(178.4,39.44),context.lineTo(113.49,108.76),context.lineTo(37.03,108.76),context.lineTo(101.94,39.44),context.lineTo(178.4,39.44),context.closePath(),context.fillStyle=fillColor.toString(),context.fill()},window.EraserIconMorph=function(color){this.color=color,EraserIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new EraserIconAppearance(this),this.toolTipMessage="eraser","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.EraserIconMorph,"name",{value:"EraserIconMorph"}),window.EraserIconMorph.instances=[],window.EraserIconMorph.__super__=window.IconMorph.prototype,window.EraserIconMorph=extend(window.EraserIconMorph,window.IconMorph),window.ExternalIconAppearance=function(morph){this.morph=morph,ExternalIconAppearance.__super__.constructor.apply(this,arguments),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ExternalIconAppearance,"name",{value:"ExternalIconAppearance"}),window.ExternalIconAppearance.instances=[];window.ExternalIconAppearance.__super__=window.IconAppearance.prototype,window.ExternalIconAppearance=extend(window.ExternalIconAppearance,window.IconAppearance),window.ExternalIconAppearance.prototype.paintFunction=function(context){var fillColor;return fillColor=this.morph.color,context.beginPath(),context.moveTo(3,66),context.lineTo(15,66),context.lineTo(15,72.56),context.bezierCurveTo(15,80.02,20.97,85.08,28.46,85.08),context.lineTo(71.54,85.08),context.bezierCurveTo(79.03,85.08,85.12,79.02,85.12,71.56),context.lineTo(85.12,27.43),context.bezierCurveTo(85.12,19.97,79.03,13.91,71.54,13.91),context.lineTo(28.46,13.91),context.bezierCurveTo(20.97,13.91,15,18.97,15,26.43),context.lineTo(15,33),context.lineTo(3,33),context.lineTo(3,26.43),context.bezierCurveTo(3,12.46,14.42,2.08,28.46,2.08),context.lineTo(71.54,2.08),context.bezierCurveTo(85.57,2.08,97,13.46,97,27.43),context.lineTo(97,71.56),context.bezierCurveTo(97,85.54,85.57,96.92,71.54,96.92),context.lineTo(28.46,96.92),context.bezierCurveTo(14.42,96.92,3,86.54,3,72.56),context.lineTo(3,66),context.closePath(),context.fillStyle=fillColor.toString(),context.fill(),context.beginPath(),context.moveTo(3.44,43.3),context.lineTo(39.64,43.3),context.lineTo(39.64,24.48),context.lineTo(73.62,49.22),context.lineTo(39.64,73.92),context.lineTo(39.64,55.12),context.lineTo(3.44,55.12),context.lineTo(3.44,43.3),context.closePath(),context.fillStyle=fillColor.toString(),context.fill()},window.ExternalIconMorph=function(color){this.color=color,ExternalIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new ExternalIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ExternalIconMorph,"name",{value:"ExternalIconMorph"}),window.ExternalIconMorph.instances=[],window.ExternalIconMorph.__super__=window.IconMorph.prototype,window.ExternalIconMorph=extend(window.ExternalIconMorph,window.IconMorph),window.ExternalLinkIconAppearance=function(morph){this.morph=morph,ExternalLinkIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ExternalLinkIconAppearance,"name",{value:"ExternalLinkIconAppearance"}),window.ExternalLinkIconAppearance.instances=[],window.ExternalLinkIconAppearance.__super__=window.IconAppearance.prototype,window.ExternalLinkIconAppearance=extend(window.ExternalLinkIconAppearance,window.IconAppearance),window.ExternalLinkIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(54,22),context.lineTo(13.5,22),context.lineTo(13.5,86.5),context.lineTo(78,86.5),context.lineTo(78,46),context.strokeStyle=outlineColorString,context.lineWidth=16,context.lineJoin="round",context.stroke(),context.beginPath(),context.moveTo(62.33,23.13),context.lineTo(65.3,23.13),context.lineTo(40.31,47.17),context.lineTo(52.82,59.68),context.lineTo(76.98,34.68),context.lineTo(76.98,37.66),context.lineTo(93.2,37.66),context.lineTo(93.2,6.9),context.lineTo(62.33,6.9),context.lineTo(62.33,23.13),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(51,22),context.lineTo(14,22),context.lineTo(14,86),context.lineTo(78,86),context.lineTo(78,49),context.strokeStyle=iconColorString,context.lineWidth=11,context.lineJoin="round",context.stroke(),context.beginPath(),context.moveTo(64.57,20.28),context.lineTo(71.74,20.28),context.lineTo(44.31,47.72),context.lineTo(52.28,55.68),context.lineTo(79.82,28.25),context.lineTo(79.82,35.42),context.lineTo(91.2,35.42),context.lineTo(91.2,8.9),context.lineTo(64.57,8.9),context.lineTo(64.57,20.28),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.ExternalLinkIconWdgt=function(color){this.color=color,ExternalLinkIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ExternalLinkIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ExternalLinkIconWdgt,"name",{value:"ExternalLinkIconWdgt"}),window.ExternalLinkIconWdgt.instances=[],window.ExternalLinkIconWdgt.__super__=window.IconMorph.prototype,window.ExternalLinkIconWdgt=extend(window.ExternalLinkIconWdgt,window.IconMorph),window.FizzygumLogoIconAppearance=function(morph){this.morph=morph,FizzygumLogoIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FizzygumLogoIconAppearance,"name",{value:"FizzygumLogoIconAppearance"}),window.FizzygumLogoIconAppearance.instances=[],window.FizzygumLogoIconAppearance.__super__=window.IconAppearance.prototype,window.FizzygumLogoIconAppearance=extend(window.FizzygumLogoIconAppearance,window.IconAppearance),window.FizzygumLogoIconAppearance.prototype.paintFunction=function(context){var outlineColorString,white;return white="rgb(255, 255, 255)",outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(98,49.68),context.bezierCurveTo(98,21.6,77.18,3,51.5,3),context.bezierCurveTo(25.82,3,5,23.9,5,49.68),context.bezierCurveTo(5,59.58,10.93,71.63,13.31,76.3),context.bezierCurveTo(15.69,80.98,12.68,88.84,1,95.37),context.bezierCurveTo(1,95.37,46.24,98.63,60.89,94.61),context.bezierCurveTo(75.55,90.59,98,77.77,98,49.68),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(95,49.7),context.bezierCurveTo(95,23.41,75.52,6,51.5,6),context.bezierCurveTo(27.48,6,8,25.57,8,49.7),context.bezierCurveTo(8,58.97,13.54,70.25,15.77,74.62),context.bezierCurveTo(18,79,18.92,87.29,8,93.41),context.bezierCurveTo(8,93.41,46.58,95.53,60.29,91.77),context.bezierCurveTo(74,88,95,76,95,49.7),context.closePath(),context.fillStyle="rgb(255, 0, 0)",context.fill(),this.oval(context,65,29,5,5),context.fillStyle=white,context.fill(),this.oval(context,60,45,9,9),context.fillStyle=white,context.fill(),this.oval(context,53,35,6,6),context.fillStyle=white,context.fill(),this.oval(context,40,45,8,8),context.fillStyle=white,context.fill(),this.oval(context,39,30,6,6),context.fillStyle=white,context.fill(),this.oval(context,28,37,4,4),context.fillStyle=white,context.fill(),this.oval(context,26,52,5,5),context.fillStyle=white,context.fill(),this.oval(context,32,69,4,4),context.fillStyle=white,context.fill(),this.oval(context,50,74,3,3),context.fillStyle=white,context.fill(),this.oval(context,72,56,4,4),context.fillStyle=white,context.fill(),this.oval(context,53,58,4,4),context.fillStyle=white,context.fill(),this.oval(context,62,66,6,6),context.fillStyle=white,context.fill(),context.beginPath(),context.moveTo(52,17.98),context.lineTo(52,19.98),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(48,22),context.lineTo(50,22),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(54,22),context.lineTo(56,22),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(52,23.98),context.lineTo(52,25.98),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(44,60.48),context.lineTo(44,62.48),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=1.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(40.5,64),context.lineTo(42.5,64),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=1.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(45.5,64),context.lineTo(47.5,64),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=1.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(44,65.48),context.lineTo(44,67.48),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=1.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(77.5,37.98),context.lineTo(77.5,39.98),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(73.5,42),context.lineTo(75.5,42),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(79.5,42),context.lineTo(81.5,42),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(77.5,43.98),context.lineTo(77.5,45.98),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=2,context.lineCap="round",context.stroke()},window.FizzygumLogoIconWdgt=function(color){this.color=color,FizzygumLogoIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new FizzygumLogoIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FizzygumLogoIconWdgt,"name",{value:"FizzygumLogoIconWdgt"}),window.FizzygumLogoIconWdgt.instances=[],window.FizzygumLogoIconWdgt.__super__=window.IconMorph.prototype,window.FizzygumLogoIconWdgt=extend(window.FizzygumLogoIconWdgt,window.IconMorph),window.FizzygumLogoWithTextIconAppearance=function(morph){this.morph=morph,FizzygumLogoWithTextIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FizzygumLogoWithTextIconAppearance,"name",{value:"FizzygumLogoWithTextIconAppearance"}),window.FizzygumLogoWithTextIconAppearance.instances=[],window.FizzygumLogoWithTextIconAppearance.__super__=window.IconAppearance.prototype,window.FizzygumLogoWithTextIconAppearance=extend(window.FizzygumLogoWithTextIconAppearance,window.IconAppearance),window.FizzygumLogoWithTextIconAppearance.prototype.paintFunction=function(context){var white;return white="rgb(255, 255, 255)",context.fillStyle="rgb(0, 0, 0)",context.font='bold 17px Arial-BoldMT, Arial, "Helvetica Neue", Helvetica, sans-serif',context.textAlign="center",22.1,context.fillText("Fizzygum",51.5,90.95),context.beginPath(),context.moveTo(86.65,39.23),context.bezierCurveTo(86.65,18.83,71.39,5.33,52.57,5.33),context.bezierCurveTo(33.74,5.33,18.48,20.51,18.48,39.23),context.bezierCurveTo(18.48,46.41,22.83,55.16,24.57,58.56),context.bezierCurveTo(26.32,61.95,27.04,68.39,18.48,73.13),context.bezierCurveTo(18.48,73.13,48.71,74.77,59.45,71.85),context.bezierCurveTo(70.2,68.93,86.65,59.63,86.65,39.23),context.closePath(),context.fillStyle="rgb(255, 0, 0)",context.fill(),this.oval(context,63,22,4,4),context.fillStyle=white,context.fill(),this.oval(context,59,35,7,7),context.fillStyle=white,context.fill(),this.oval(context,53,27,5,5),context.fillStyle=white,context.fill(),this.oval(context,43,35,6,6),context.fillStyle=white,context.fill(),this.oval(context,43,23,4,4),context.fillStyle=white,context.fill(),this.oval(context,34,28,3,3),context.fillStyle=white,context.fill(),this.oval(context,33,40,4,4),context.fillStyle=white,context.fill(),this.oval(context,37,54,3,3),context.fillStyle=white,context.fill(),this.oval(context,51,58,2,2),context.fillStyle=white,context.fill(),this.oval(context,68,43,3,3),context.fillStyle=white,context.fill(),this.oval(context,54,45,3,3),context.fillStyle=white,context.fill(),this.oval(context,61,52,4,4),context.fillStyle=white,context.fill(),context.beginPath(),context.moveTo(52,13.98),context.lineTo(52,15.48),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=1.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(49,17),context.lineTo(50.5,17),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=1.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(53.5,17),context.lineTo(55,17),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=1.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(52,18.48),context.lineTo(52,19.98),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=1.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(46,47.48),context.lineTo(46,48.91),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=1,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(43.5,49.99),context.lineTo(44.93,49.99),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=1,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(47.07,49.99),context.lineTo(48.5,49.99),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=1,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(46,51.05),context.lineTo(46,52.48),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=1,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(72.5,30.98),context.lineTo(72.5,32.48),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=1.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(69.5,34),context.lineTo(71,34),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=1.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(74,34),context.lineTo(75.5,34),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=1.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(72.5,35.48),context.lineTo(72.5,36.98),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=1.5,context.lineCap="round",context.stroke()},window.FizzygumLogoWithTextIconWdgt=function(color){this.color=color,FizzygumLogoWithTextIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new FizzygumLogoWithTextIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FizzygumLogoWithTextIconWdgt,"name",{value:"FizzygumLogoWithTextIconWdgt"}),window.FizzygumLogoWithTextIconWdgt.instances=[],window.FizzygumLogoWithTextIconWdgt.__super__=window.IconMorph.prototype,window.FizzygumLogoWithTextIconWdgt=extend(window.FizzygumLogoWithTextIconWdgt,window.IconMorph),window.FloppyDiskIconAppearance=function(morph){this.morph=morph,FloppyDiskIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FloppyDiskIconAppearance,"name",{value:"FloppyDiskIconAppearance"}),window.FloppyDiskIconAppearance.instances=[],window.FloppyDiskIconAppearance.__super__=window.IconAppearance.prototype,window.FloppyDiskIconAppearance=extend(window.FloppyDiskIconAppearance,window.IconAppearance),window.FloppyDiskIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(8.5,6.5),context.lineTo(78.16,6.5),context.lineTo(92.5,20.83),context.lineTo(92.5,92.5),context.lineTo(8.5,92.5),context.lineTo(8.5,6.5),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(12.23,10.24),context.lineTo(75.7,10.24),context.lineTo(88.77,23.33),context.lineTo(88.77,88.76),context.lineTo(12.23,88.76),context.lineTo(12.23,10.24),context.closePath(),context.strokeStyle=iconColorString,context.lineWidth=3.5,context.stroke(),context.beginPath(),context.rect(57.5,16.5,7,13),context.strokeStyle=iconColorString,context.lineWidth=2,context.stroke(),this.oval(context,52.5,67.5,4,4),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(32.11,69.71),context.lineTo(48.83,69.71),context.strokeStyle=iconColorString,context.lineWidth=4,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(32.11,63),context.lineTo(44.65,63),context.strokeStyle=iconColorString,context.lineWidth=4,context.lineCap="round",context.stroke(),context.beginPath(),context.rect(27.5,11.5,42,24),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.rect(24,53.5,53,35),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke()},window.FloppyDiskIconWdgt=function(color){this.color=color,FloppyDiskIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new FloppyDiskIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FloppyDiskIconWdgt,"name",{value:"FloppyDiskIconWdgt"}),window.FloppyDiskIconWdgt.instances=[],window.FloppyDiskIconWdgt.__super__=window.IconMorph.prototype,window.FloppyDiskIconWdgt=extend(window.FloppyDiskIconWdgt,window.IconMorph),window.FloraIconAppearance=function(morph){this.morph=morph,FloraIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FloraIconAppearance,"name",{value:"FloraIconAppearance"}),window.FloraIconAppearance.instances=[],window.FloraIconAppearance.__super__=window.IconAppearance.prototype,window.FloraIconAppearance=extend(window.FloraIconAppearance,window.IconAppearance),window.FloraIconAppearance.prototype.paintFunction=function(context){var colorString;return colorString="rgb(0, 0, 0)",this.arc(context,101.5,46.5,77,77,193,259,!1),context.strokeStyle=colorString,context.lineWidth=3,context.stroke(),this.arc(context,25.5,46.5,77,77,281,347,!1),context.strokeStyle=colorString,context.lineWidth=3,context.stroke(),this.arc(context,71.5,16.5,62,62,357,183,!1),context.strokeStyle=colorString,context.lineWidth=3,context.stroke(),context.beginPath(),context.moveTo(101.5,73.5),context.lineTo(101.5,110.5),context.strokeStyle=colorString,context.lineWidth=3,context.stroke(),context.beginPath(),context.moveTo(48.5,108.5),context.lineTo(154.5,108.5),context.lineCap="round",context.strokeStyle=colorString,context.lineWidth=4,context.stroke(),context.beginPath(),context.moveTo(47.5,108.5),context.lineTo(54.5,133.5),context.lineTo(150.5,133.5),context.lineTo(154.5,109.5),context.lineCap="round",context.strokeStyle=colorString,context.lineWidth=4,context.stroke(),context.beginPath(),context.moveTo(57,134),context.lineTo(74,192),context.lineTo(132,192),context.lineTo(147,133),context.strokeStyle=colorString,context.lineWidth=4,context.stroke(),this.oval(context,99,7,4,4),context.fillStyle=colorString,context.fill(),this.oval(context,86,19,4,4),context.fillStyle=colorString,context.fill(),this.oval(context,86,32,4,4),context.fillStyle=colorString,context.fill(),this.oval(context,99,19,4,4),context.fillStyle=colorString,context.fill(),this.oval(context,112,19,4,4),context.fillStyle=colorString,context.fill(),this.oval(context,99,32,4,4),context.fillStyle=colorString,context.fill(),this.oval(context,112,32,4,4),context.fillStyle=colorString,context.fill(),this.oval(context,99,44,4,4),context.fillStyle=colorString,context.fill()},window.FloraIconMorph=function(color){this.color=color,FloraIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new FloraIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FloraIconMorph,"name",{value:"FloraIconMorph"}),window.FloraIconMorph.instances=[],window.FloraIconMorph.__super__=window.IconMorph.prototype,window.FloraIconMorph=extend(window.FloraIconMorph,window.IconMorph),window.FloraIconMorph.prototype.colloquialName=function(){return"Flora icon"},window.FolderIconAppearance=function(morph){this.morph=morph,FolderIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FolderIconAppearance,"name",{value:"FolderIconAppearance"}),window.FolderIconAppearance.instances=[],window.FolderIconAppearance.__super__=window.IconAppearance.prototype,window.FolderIconAppearance=extend(window.FolderIconAppearance,window.IconAppearance),window.FolderIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(89.18,21.7),context.lineTo(44.61,21.7),context.lineTo(44.61,19.44),context.bezierCurveTo(44.61,15.33,40,12,36.11,12),context.lineTo(12.5,12),context.bezierCurveTo(9,12,4,14.89,4,19),context.lineTo(4,79.24),context.bezierCurveTo(4,83.53,6.5,87,10.82,87),context.lineTo(89.18,87),context.bezierCurveTo(93.5,87,97,83.53,97,79.24),context.lineTo(97,29.45),context.bezierCurveTo(97,25.17,93.5,21.7,89.18,21.7),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(87.57,24.63),context.lineTo(42.23,24.63),context.lineTo(42.23,21.63),context.lineTo(42.23,21.63),context.bezierCurveTo(42.23,17.84,39.16,14.77,35.37,14.77),context.lineTo(12.85,14.77),context.lineTo(12.86,14.77),context.bezierCurveTo(9.07,14.77,6,17.84,6,21.63),context.lineTo(6,31.2),context.bezierCurveTo(6,31.29,6,31.38,6,31.51),context.bezierCurveTo(6,31.64,6,31.69,6,31.78),context.lineTo(6,77.68),context.lineTo(6,77.68),context.bezierCurveTo(6,81.63,9.2,84.83,13.15,84.83),context.lineTo(87.57,84.83),context.lineTo(87.57,84.83),context.bezierCurveTo(91.52,84.83,94.72,81.63,94.72,77.68),context.lineTo(94.72,31.77),context.lineTo(94.72,31.78),context.bezierCurveTo(94.72,27.83,91.52,24.63,87.57,24.63),context.closePath(),context.moveTo(12.85,17.27),context.lineTo(35.37,17.27),context.lineTo(35.36,17.27),context.bezierCurveTo(37.8,17.27,39.77,19.24,39.77,21.68),context.lineTo(39.77,24.67),context.lineTo(8.45,24.67),context.lineTo(8.45,21.67),context.lineTo(8.45,21.68),context.bezierCurveTo(8.45,19.24,10.42,17.27,12.86,17.27),context.lineTo(12.85,17.27),context.closePath(),context.moveTo(92.26,77.68),context.lineTo(92.26,77.67),context.bezierCurveTo(92.26,80.27,90.16,82.37,87.56,82.37),context.lineTo(13.14,82.37),context.lineTo(13.15,82.37),context.bezierCurveTo(10.55,82.37,8.45,80.27,8.45,77.67),context.lineTo(8.45,27.08),context.lineTo(87.57,27.08),context.lineTo(87.56,27.08),context.bezierCurveTo(90.16,27.08,92.26,29.18,92.26,31.78),context.lineTo(92.26,77.67),context.lineTo(92.26,77.68),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.FolderIconWdgt=function(color){this.color=color,FolderIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new FolderIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FolderIconWdgt,"name",{value:"FolderIconWdgt"}),window.FolderIconWdgt.instances=[],window.FolderIconWdgt.__super__=window.IconMorph.prototype,window.FolderIconWdgt=extend(window.FolderIconWdgt,window.IconMorph),window.FormatAsCodeIconAppearance=function(morph){this.morph=morph,FormatAsCodeIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FormatAsCodeIconAppearance,"name",{value:"FormatAsCodeIconAppearance"}),window.FormatAsCodeIconAppearance.instances=[],window.FormatAsCodeIconAppearance.__super__=window.IconAppearance.prototype,window.FormatAsCodeIconAppearance=extend(window.FormatAsCodeIconAppearance,window.IconAppearance),window.FormatAsCodeIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),context.beginPath(),context.moveTo(60.58,28),context.lineTo(83,50.5),context.lineTo(60.58,73),context.strokeStyle=outlineColorString,context.lineWidth=10,context.lineCap="round",context.lineJoin="round",context.stroke(),context.beginPath(),context.moveTo(39.42,28),context.lineTo(17,50.5),context.lineTo(39.42,73),context.strokeStyle=outlineColorString,context.lineWidth=10,context.lineCap="round",context.lineJoin="round",context.stroke(),context.beginPath(),context.moveTo(60.58,28),context.lineTo(83,50.5),context.lineTo(60.58,73),context.strokeStyle=iconColorString,context.lineWidth=5,context.lineCap="round",context.lineJoin="round",context.stroke(),context.beginPath(),context.moveTo(39.42,28),context.lineTo(17,50.5),context.lineTo(39.42,73),context.strokeStyle=iconColorString,context.lineWidth=5,context.lineCap="round",context.lineJoin="round",context.stroke()},window.FormatAsCodeIconWdgt=function(color){this.color=color,FormatAsCodeIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new FormatAsCodeIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FormatAsCodeIconWdgt,"name",{value:"FormatAsCodeIconWdgt"}),window.FormatAsCodeIconWdgt.instances=[],window.FormatAsCodeIconWdgt.__super__=window.IconMorph.prototype,window.FormatAsCodeIconWdgt=extend(window.FormatAsCodeIconWdgt,window.IconMorph),window.FunctionPlotIconAppearance=function(morph){this.morph=morph,FunctionPlotIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FunctionPlotIconAppearance,"name",{value:"FunctionPlotIconAppearance"}),window.FunctionPlotIconAppearance.instances=[],window.FunctionPlotIconAppearance.__super__=window.IconAppearance.prototype,window.FunctionPlotIconAppearance=extend(window.FunctionPlotIconAppearance,window.IconAppearance),window.FunctionPlotIconAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),context.beginPath(),context.moveTo(7,8),context.lineTo(11.25,8),context.lineTo(11.25,88.76),context.lineTo(92,88.76),context.lineTo(92,93),context.lineTo(7,93),context.lineTo(7,8),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(20.06,79.26),context.lineTo(15.23,75.9),context.lineTo(26.06,56.31),context.bezierCurveTo(30.65,47.24,35.32,43.21,40.07,44.24),context.bezierCurveTo(43.14,44.9,54.09,61.41,57.5,57.37),context.bezierCurveTo(58.98,57.16,82.84,11.04,82.84,11.04),context.lineTo(87.75,14.04),context.bezierCurveTo(87.75,14.04,64.04,58.55,62.73,60.59),context.bezierCurveTo(61.13,62.57,59.42,63.75,57.1,63.64),context.bezierCurveTo(54.43,63.84,52,63,48.31,59.85),context.bezierCurveTo(44.62,56.71,41.39,52.14,38.2,51.57),context.bezierCurveTo(35,51,32.45,56.53,30.62,59.61),context.lineTo(20.06,79.26),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.FunctionPlotIconWdgt=function(color){this.color=color,FunctionPlotIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new FunctionPlotIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FunctionPlotIconWdgt,"name",{value:"FunctionPlotIconWdgt"}),window.FunctionPlotIconWdgt.instances=[],window.FunctionPlotIconWdgt.__super__=window.IconMorph.prototype,window.FunctionPlotIconWdgt=extend(window.FunctionPlotIconWdgt,window.IconMorph);var ChildrenStainerMixin;ChildrenStainerMixin={onceAddedClassProperties:function(fromClass){return this.addInstanceProperties(fromClass,{setColor:function(theColor,ignored,connectionsCalculationToken,superCall){var eachChild,i,len,ref,results;if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken){for(this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,window[this[arguments.callee.name+"_class_injected_in"]].__super__[arguments.callee.name].call(this,theColor,ignored,connectionsCalculationToken,!0),results=[],i=0,len=(ref=this.children).length;i<len;i++)eachChild=ref[i],results.push(eachChild.setColor(theColor,ignored,connectionsCalculationToken));return results}}})}},window.GenericObjectIconWdgt=function(icon){this.icon=icon,GenericObjectIconWdgt.__super__.constructor.call(this),this.objectIcon=new ObjectIconWdgt,this.add(this.objectIcon),null==this.icon&&(this.icon=new SimpleDropletWdgt("icon")),this.rawSetExtent(new Point(95,95)),this.add(this.icon),this.invalidateLayout(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.GenericObjectIconWdgt,"name",{value:"GenericObjectIconWdgt"}),window.GenericObjectIconWdgt.instances=[],window.GenericObjectIconWdgt.__super__=window.Widget.prototype,window.GenericObjectIconWdgt=extend(window.GenericObjectIconWdgt,window.Widget),window.GenericObjectIconWdgt.augmentWith(window.ChildrenStainerMixin,"GenericObjectIconWdgt"),window.GenericObjectIconWdgt.prototype.objectIcon=nil,window.GenericObjectIconWdgt.prototype.widthWithoutSpacing=function(){return Math.min(this.width(),this.height())},window.GenericObjectIconWdgt.prototype.rawResizeToWithoutSpacing=function(){return this.rawSetExtent(new Point(this.widthWithoutSpacing(),this.widthWithoutSpacing())),this.invalidateLayout()},window.GenericObjectIconWdgt.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return GenericObjectIconWdgt.__super__.initialiseDefaultWindowContentLayoutSpec.apply(this,arguments),this.layoutSpecDetails.canSetHeightFreely=!1},window.GenericObjectIconWdgt.prototype.rawSetWidthSizeHeightAccordingly=function(newWidth){return this.rawResizeToWithoutSpacing(),this.rawSetExtent(new Point(newWidth,newWidth)),this.invalidateLayout()},window.GenericObjectIconWdgt.prototype.doLayout=function(newBoundsForThisLayout){var centerPoint,height,p0,squareDim,width;return window.recalculatingLayouts,null==newBoundsForThisLayout&&(null!=this.desiredExtent?(newBoundsForThisLayout=this.desiredExtent,this.desiredExtent=nil):newBoundsForThisLayout=this.extent(),null!=this.desiredPosition?(newBoundsForThisLayout=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(newBoundsForThisLayout),this.desiredPosition=nil):newBoundsForThisLayout=new Rectangle(this.position()).setBoundsWidthAndHeight(newBoundsForThisLayout)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(this.rawSetBounds(newBoundsForThisLayout),trackChanges.push(!1),height=this.height(),width=this.width(),squareDim=Math.min(width,height),p0=this.topLeft(),centerPoint=p0.add(new Point(width/2,height/2)),p0=centerPoint,p0=p0.subtract(new Point(squareDim/2,squareDim/2)),this.icon.setExtent(new Point(50*squareDim/100,50*squareDim/100).round()),this.icon.fullRawMoveTo(centerPoint.subtract(new Point(25*squareDim/100,25*squareDim/100)).round()),this.objectIcon.setExtent(new Point(squareDim,squareDim).round()),this.objectIcon.fullRawMoveTo(p0),trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0)},window.GenericPanelIconAppearance=function(morph){this.morph=morph,GenericPanelIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.GenericPanelIconAppearance,"name",{value:"GenericPanelIconAppearance"}),window.GenericPanelIconAppearance.instances=[],window.GenericPanelIconAppearance.__super__=window.IconAppearance.prototype,window.GenericPanelIconAppearance=extend(window.GenericPanelIconAppearance,window.IconAppearance),window.GenericPanelIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,"rgb(255, 255, 255)","rgb(170, 170, 170)",context.beginPath(),context.moveTo(87.54,18),context.lineTo(13.57,18),context.bezierCurveTo(10.05,18,7.12,20.67,7.12,23.87),context.lineTo(7,76.13),context.bezierCurveTo(7,79.33,9.94,82,13.46,82),context.lineTo(87.43,82),context.bezierCurveTo(90.95,82,93.88,79.33,93.88,76.13),context.lineTo(94,23.87),context.bezierCurveTo(94,20.67,91.06,18,87.54,18),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(85.84,20),context.lineTo(15.27,20),context.bezierCurveTo(11.91,20,9.11,22.5,9.11,25.5),context.lineTo(9,74.5),context.bezierCurveTo(9,77.5,11.8,80,15.16,80),context.lineTo(85.73,80),context.bezierCurveTo(89.09,80,91.89,77.5,91.89,74.5),context.lineTo(92,25.5),context.bezierCurveTo(92,22.5,89.2,20,85.84,20),context.closePath(),context.moveTo(88.53,74.5),context.bezierCurveTo(88.53,75.9,87.3,77,85.73,77),context.lineTo(15.16,77),context.bezierCurveTo(13.59,77,12.36,75.9,12.36,74.5),context.lineTo(12.47,25.5),context.bezierCurveTo(12.47,24.1,13.7,23,15.27,23),context.lineTo(85.84,23),context.bezierCurveTo(87.41,23,88.64,24.1,88.64,25.5),context.lineTo(88.53,74.5),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.rect(15,30,18,65),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.rect(17.5,40.5,13,13),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.moveTo(21.5,44.5),context.lineTo(26.5,44.5),context.lineTo(26.5,49.5),context.lineTo(21.5,49.5),context.lineTo(21.5,44.5),context.closePath(),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.rect(17.5,32.5,13,8),context.fillStyle="rgb(170, 170, 170)",context.fill(),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.rect(17.5,53.5,13,13),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.moveTo(21.5,57.5),context.lineTo(26.5,57.5),context.lineTo(26.5,62.5),context.lineTo(21.5,62.5),context.lineTo(21.5,57.5),context.closePath(),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.rect(17.5,66.5,13,13),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.moveTo(21.5,70.5),context.lineTo(26.5,70.5),context.lineTo(26.5,75.5),context.lineTo(21.5,75.5),context.lineTo(21.5,70.5),context.closePath(),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.rect(17.5,79.5,13,13),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.moveTo(21.5,83.5),context.lineTo(26.5,83.5),context.lineTo(26.5,88.5),context.lineTo(21.5,88.5),context.lineTo(21.5,83.5),context.closePath(),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.moveTo(19.5,36.5),context.lineTo(28.5,36.5),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=1,context.stroke(),context.beginPath(),context.rect(69,3,17.5,53),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.rect(71.5,13.5,13,13),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.moveTo(75.5,17.5),context.lineTo(80.5,17.5),context.lineTo(80.5,22.5),context.lineTo(75.5,22.5),context.lineTo(75.5,17.5),context.closePath(),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.rect(71.5,5.5,13,8),context.fillStyle="rgb(170, 170, 170)",context.fill(),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.rect(71.5,26.5,13,13),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.moveTo(75.5,30.5),context.lineTo(80.5,30.5),context.lineTo(80.5,35.5),context.lineTo(75.5,35.5),context.lineTo(75.5,30.5),context.closePath(),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.rect(71.5,39.5,13,13),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.moveTo(75.5,43.5),context.lineTo(80.5,43.5),context.lineTo(80.5,48.5),context.lineTo(75.5,48.5),context.lineTo(75.5,43.5),context.closePath(),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.moveTo(73.5,9.5),context.lineTo(82.5,9.5),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=1,context.stroke()},window.GenericPanelIconWdgt=function(color){this.color=color,GenericPanelIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new GenericPanelIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.GenericPanelIconWdgt,"name",{value:"GenericPanelIconWdgt"}),window.GenericPanelIconWdgt.instances=[],window.GenericPanelIconWdgt.__super__=window.IconMorph.prototype,window.GenericPanelIconWdgt=extend(window.GenericPanelIconWdgt,window.IconMorph),window.GenericShortcutIconWdgt=function(icon){this.icon=icon,GenericShortcutIconWdgt.__super__.constructor.call(this),null==this.icon&&(this.icon=new SimpleDropletWdgt("icon")),this.rawSetExtent(new Point(95,95)),this.add(this.icon),this.referenceArrowIcon=new ShortcutArrowIconWdgt,this.add(this.referenceArrowIcon),this.invalidateLayout(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.GenericShortcutIconWdgt,"name",{value:"GenericShortcutIconWdgt"}),window.GenericShortcutIconWdgt.instances=[],window.GenericShortcutIconWdgt.__super__=window.Widget.prototype,window.GenericShortcutIconWdgt=extend(window.GenericShortcutIconWdgt,window.Widget),window.GenericShortcutIconWdgt.augmentWith(window.ChildrenStainerMixin,"GenericShortcutIconWdgt"),window.GenericShortcutIconWdgt.prototype.referenceArrowIcon=nil,window.GenericShortcutIconWdgt.prototype.widthWithoutSpacing=function(){return Math.min(this.width(),this.height())},window.GenericShortcutIconWdgt.prototype.rawResizeToWithoutSpacing=function(){return this.rawSetExtent(new Point(this.widthWithoutSpacing(),this.widthWithoutSpacing())),this.invalidateLayout()},window.GenericShortcutIconWdgt.prototype.initialiseDefaultWindowContentLayoutSpec=function(){return GenericShortcutIconWdgt.__super__.initialiseDefaultWindowContentLayoutSpec.apply(this,arguments),this.layoutSpecDetails.canSetHeightFreely=!1},window.GenericShortcutIconWdgt.prototype.rawSetWidthSizeHeightAccordingly=function(newWidth){return this.rawResizeToWithoutSpacing(),this.rawSetExtent(new Point(newWidth,newWidth)),this.invalidateLayout()},window.GenericShortcutIconWdgt.prototype.doLayout=function(newBoundsForThisLayout){var height,p0,squareDim,width;return window.recalculatingLayouts,null==newBoundsForThisLayout&&(null!=this.desiredExtent?(newBoundsForThisLayout=this.desiredExtent,this.desiredExtent=nil):newBoundsForThisLayout=this.extent(),null!=this.desiredPosition?(newBoundsForThisLayout=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(newBoundsForThisLayout),this.desiredPosition=nil):newBoundsForThisLayout=new Rectangle(this.position()).setBoundsWidthAndHeight(newBoundsForThisLayout)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(this.rawSetBounds(newBoundsForThisLayout),trackChanges.push(!1),height=this.height(),width=this.width(),squareDim=Math.min(width,height),p0=this.topLeft(),p0=p0.add(new Point(width/2,height/2)),p0=p0.subtract(new Point(squareDim/2,squareDim/2)),this.icon.setExtent(new Point(squareDim,squareDim).round()),this.icon.fullRawMoveTo(p0.round()),this.referenceArrowIcon.setExtent(new Point(3*squareDim/10,3*squareDim/10).round()),this.referenceArrowIcon.fullRawMoveTo(p0.add(new Point(0,7*squareDim/10)).round()),trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0)},window.GrayscalePalettePatchProgrammingIconAppearance=function(morph){this.morph=morph,GrayscalePalettePatchProgrammingIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.GrayscalePalettePatchProgrammingIconAppearance,"name",{value:"GrayscalePalettePatchProgrammingIconAppearance"}),window.GrayscalePalettePatchProgrammingIconAppearance.instances=[],window.GrayscalePalettePatchProgrammingIconAppearance.__super__=window.IconAppearance.prototype,window.GrayscalePalettePatchProgrammingIconAppearance=extend(window.GrayscalePalettePatchProgrammingIconAppearance,window.IconAppearance),window.GrayscalePalettePatchProgrammingIconAppearance.prototype.grayscaleGradient=nil,window.GrayscalePalettePatchProgrammingIconAppearance.prototype.paintFunction=function(context){var colorStops,iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),null==this.grayscaleGradient&&(colorStops=function(g){return g.addColorStop(0,"rgb(0, 0, 0)"),g.addColorStop(.81,"rgb(255, 255, 255)"),g},this.grayscaleGradient=colorStops(context.createLinearGradient(79,82,21,82))),context.beginPath(),context.rect(21,19,58,63),context.fillStyle=this.grayscaleGradient,context.fill(),context.beginPath(),context.rect(20.5,17.5,60,66),context.strokeStyle=iconColorString,context.lineWidth=4,context.lineCap="round",context.lineJoin="round",context.stroke(),context.beginPath(),context.moveTo(81,51),context.lineTo(90,51),context.strokeStyle=iconColorString,context.lineWidth=2,context.stroke(),this.oval(context,88.5,48,6,6),context.fillStyle=iconColorString,context.fill()},window.GrayscalePalettePatchProgrammingIconWdgt=function(color){this.color=color,GrayscalePalettePatchProgrammingIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new GrayscalePalettePatchProgrammingIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.GrayscalePalettePatchProgrammingIconWdgt,"name",{value:"GrayscalePalettePatchProgrammingIconWdgt"}),window.GrayscalePalettePatchProgrammingIconWdgt.instances=[],window.GrayscalePalettePatchProgrammingIconWdgt.__super__=window.IconMorph.prototype,window.GrayscalePalettePatchProgrammingIconWdgt=extend(window.GrayscalePalettePatchProgrammingIconWdgt,window.IconMorph),window.HeartIconAppearance=function(morph){this.morph=morph,HeartIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.HeartIconAppearance,"name",{value:"HeartIconAppearance"}),window.HeartIconAppearance.instances=[],window.HeartIconAppearance.__super__=window.IconAppearance.prototype,window.HeartIconAppearance=extend(window.HeartIconAppearance,window.IconAppearance),window.HeartIconAppearance.prototype.paintFunction=function(context){return"rgb(0, 0, 0)",context.strokeStyle="rgb(0, 0, 0)",context.fillStyle="rgb(0, 0, 0)",this.arc(context,11,21,99,99,136,326,!1),context.lineWidth=8,context.stroke(),this.arc(context,91,21,99,99,214,46,!1),context.lineWidth=8,context.stroke(),this.oval(context,98,41,4,4),context.fill(),context.lineWidth=1,context.stroke(),context.beginPath(),context.moveTo(23,103),context.lineTo(93,178),context.lineWidth=8,context.stroke(),context.beginPath(),context.moveTo(178,103),context.lineTo(107,179),context.lineWidth=8,context.stroke(),this.arc(context,87.5,154.5,26,26,26,143,!1),context.lineWidth=7.5,context.stroke(),this.arc(context,33.5,44,53,54,181,273,!1),context.lineWidth=10,context.stroke(),this.oval(context,57,40,8.5,8.5),context.fill(),context.lineWidth=1,context.stroke(),this.oval(context,29.5,66,8.5,8.5),context.fill(),context.lineWidth=1,context.stroke()},window.HeartIconMorph=function(color){this.color=color,HeartIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new HeartIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.HeartIconMorph,"name",{value:"HeartIconMorph"}),window.HeartIconMorph.instances=[],window.HeartIconMorph.__super__=window.IconMorph.prototype,window.HeartIconMorph=extend(window.HeartIconMorph,window.IconMorph),window.HeartIconMorph.prototype.colloquialName=function(){return"Heart icon"},window.IncreaseFontSizeIconAppearance=function(morph){this.morph=morph,IncreaseFontSizeIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.IncreaseFontSizeIconAppearance,"name",{value:"IncreaseFontSizeIconAppearance"}),window.IncreaseFontSizeIconAppearance.instances=[],window.IncreaseFontSizeIconAppearance.__super__=window.IconAppearance.prototype,window.IncreaseFontSizeIconAppearance=extend(window.IncreaseFontSizeIconAppearance,window.IconAppearance),window.IncreaseFontSizeIconAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),context.beginPath(),context.moveTo(37.91,19.09),context.bezierCurveTo(37.42,17.84,36.06,17,34.52,17),context.bezierCurveTo(32.98,17,31.62,17.84,31.13,19.09),context.lineTo(9.41,74.96),context.bezierCurveTo(8.79,76.56,9.8,78.3,11.67,78.84),context.bezierCurveTo(13.55,79.38,15.56,78.51,16.19,76.9),context.lineTo(20.88,64.84),context.lineTo(47.93,64.84),context.bezierCurveTo(48.01,64.84,48.07,64.8,48.14,64.8),context.lineTo(52.85,76.9),context.bezierCurveTo(53.35,78.19,54.74,79,56.23,79),context.bezierCurveTo(56.61,79,56.99,78.95,57.36,78.84),context.bezierCurveTo(59.23,78.3,60.24,76.57,59.62,74.97),context.lineTo(37.91,19.09),context.closePath(),context.moveTo(23.26,58.71),context.lineTo(34.52,29.74),context.lineTo(45.78,58.71),context.lineTo(23.26,58.71),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(91.5,56.79),context.lineTo(74.97,40.34),context.lineTo(58.44,56.79),context.lineTo(91.5,56.79),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.IncreaseFontSizeIconWdgt=function(color){this.color=color,IncreaseFontSizeIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new IncreaseFontSizeIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.IncreaseFontSizeIconWdgt,"name",{value:"IncreaseFontSizeIconWdgt"}),window.IncreaseFontSizeIconWdgt.instances=[],window.IncreaseFontSizeIconWdgt.__super__=window.IconMorph.prototype,window.IncreaseFontSizeIconWdgt=extend(window.IncreaseFontSizeIconWdgt,window.IconMorph),window.InternalIconAppearance=function(morph){this.morph=morph,InternalIconAppearance.__super__.constructor.apply(this,arguments),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.InternalIconAppearance,"name",{value:"InternalIconAppearance"}),window.InternalIconAppearance.instances=[],window.InternalIconAppearance.__super__=window.IconAppearance.prototype,window.InternalIconAppearance=extend(window.InternalIconAppearance,window.IconAppearance),window.InternalIconAppearance.prototype.paintFunction=function(context){var fillColor;return fillColor=this.morph.color,context.beginPath(),context.moveTo(3,66),context.lineTo(15,66),context.lineTo(15,72.56),context.bezierCurveTo(15,80.02,20.97,85.08,28.46,85.08),context.lineTo(71.54,85.08),context.bezierCurveTo(79.03,85.08,85.12,79.02,85.12,71.56),context.lineTo(85.12,27.43),context.bezierCurveTo(85.12,19.97,79.03,13.91,71.54,13.91),context.lineTo(28.46,13.91),context.bezierCurveTo(20.97,13.91,15,18.97,15,26.43),context.lineTo(15,33),context.lineTo(3,33),context.lineTo(3,26.43),context.bezierCurveTo(3,12.46,14.42,2.08,28.46,2.08),context.lineTo(71.54,2.08),context.bezierCurveTo(85.57,2.08,97,13.46,97,27.43),context.lineTo(97,71.56),context.bezierCurveTo(97,85.54,85.57,96.92,71.54,96.92),context.lineTo(28.46,96.92),context.bezierCurveTo(14.42,96.92,3,86.54,3,72.56),context.lineTo(3,66),context.closePath(),context.fillStyle=fillColor.toString(),context.fill(),context.beginPath(),context.moveTo(75.62,55.11),context.lineTo(43.42,55.11),context.lineTo(43.42,73.92),context.lineTo(9.44,49.19),context.lineTo(43.42,24.48),context.lineTo(43.42,43.29),context.lineTo(75.62,43.29),context.lineTo(75.62,55.11),context.closePath(),context.fillStyle=fillColor.toString(),context.fill()},window.InternalIconMorph=function(color){this.color=color,InternalIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new InternalIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.InternalIconMorph,"name",{value:"InternalIconMorph"}),window.InternalIconMorph.instances=[],window.InternalIconMorph.__super__=window.IconMorph.prototype,window.InternalIconMorph=extend(window.InternalIconMorph,window.IconMorph),window.ItalicIconAppearance=function(morph){this.morph=morph,ItalicIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ItalicIconAppearance,"name",{value:"ItalicIconAppearance"}),window.ItalicIconAppearance.instances=[],window.ItalicIconAppearance.__super__=window.IconAppearance.prototype,window.ItalicIconAppearance=extend(window.ItalicIconAppearance,window.IconAppearance),window.ItalicIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(37.67,4),context.lineTo(37.67,13.56),context.lineTo(51.84,13.56),context.bezierCurveTo(53.54,13.56,52.14,15.67,52.14,17.34),context.lineTo(33.06,83.66),context.bezierCurveTo(32.5,85.33,30.86,85.44,29.16,85.44),context.lineTo(16,85.44),context.lineTo(16,95),context.lineTo(64.33,95),context.lineTo(64.33,85.44),context.lineTo(51.16,85.44),context.bezierCurveTo(49.46,85.44,48.86,85.33,48.86,83.66),context.lineTo(68.94,15.34),context.bezierCurveTo(69.5,13.67,71.13,13.56,72.83,13.56),context.lineTo(86,13.56),context.lineTo(86,4),context.lineTo(37.67,4),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(40,6),context.lineTo(40,11.44),context.lineTo(53.75,11.44),context.bezierCurveTo(55.4,11.44,55.98,12.52,55.98,14.16),context.lineTo(35.53,84.84),context.bezierCurveTo(34.98,86.48,33.4,87.56,31.75,87.56),context.lineTo(18,87.56),context.lineTo(18,93),context.lineTo(62,93),context.lineTo(62,87.56),context.lineTo(48.25,87.56),context.bezierCurveTo(46.6,87.56,46.01,86.48,46.01,84.84),context.lineTo(66.47,14.16),context.bezierCurveTo(67.02,12.52,68.6,11.44,70.25,11.44),context.lineTo(84,11.44),context.lineTo(84,6),context.lineTo(40,6),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.ItalicIconWdgt=function(color){this.color=color,ItalicIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ItalicIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ItalicIconWdgt,"name",{value:"ItalicIconWdgt"}),window.ItalicIconWdgt.instances=[],window.ItalicIconWdgt.__super__=window.IconMorph.prototype,window.ItalicIconWdgt=extend(window.ItalicIconWdgt,window.IconMorph),window.LittleUSAIconAppearance=function(morph){this.morph=morph,LittleUSAIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.LittleUSAIconAppearance,"name",{value:"LittleUSAIconAppearance"}),window.LittleUSAIconAppearance.instances=[],window.LittleUSAIconAppearance.__super__=window.IconAppearance.prototype,window.LittleUSAIconAppearance=extend(window.LittleUSAIconAppearance,window.IconAppearance),window.LittleUSAIconAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),context.beginPath(),context.moveTo(96.16,27.93),context.lineTo(91.98,24.05),context.lineTo(90.7,24.59),context.lineTo(87.81,30.51),context.lineTo(82.78,32.02),context.lineTo(73.37,40.43),context.lineTo(72.08,39.78),context.lineTo(69.3,32.78),context.lineTo(60.1,28.03),context.lineTo(59.89,27.93),context.lineTo(50.36,25.88),context.lineTo(50.26,25.88),context.lineTo(8.64,22),context.lineTo(3.5,39.35),context.lineTo(6.07,52.92),context.lineTo(12.59,60.36),context.lineTo(27.36,66.29),context.lineTo(31.1,66.29),context.lineTo(36.56,71.89),context.lineTo(39.99,70.92),context.lineTo(47.05,78.35),context.lineTo(54.43,71.46),context.lineTo(62.88,71.78),context.lineTo(64.7,69.52),context.lineTo(73.58,69.09),context.lineTo(79.79,78.57),context.lineTo(80.64,79),context.lineTo(83.53,78.89),context.lineTo(84.07,77.71),context.lineTo(79.79,67.04),context.lineTo(88.03,54.65),context.lineTo(86.42,49.48),context.lineTo(88.13,41.93),context.lineTo(93.7,38.05),context.lineTo(92.73,33.53),context.lineTo(96.16,27.93),context.closePath(),context.strokeStyle=iconColorString,context.lineWidth=3,context.miterLimit=4,context.stroke()},window.LittleUSAIconWdgt=function(color){this.color=color,LittleUSAIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new LittleUSAIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.LittleUSAIconWdgt,"name",{value:"LittleUSAIconWdgt"}),window.LittleUSAIconWdgt.instances=[],window.LittleUSAIconWdgt.__super__=window.IconMorph.prototype,window.LittleUSAIconWdgt=extend(window.LittleUSAIconWdgt,window.IconMorph),window.LittleWorldIconAppearance=function(morph){this.morph=morph,LittleWorldIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.LittleWorldIconAppearance,"name",{value:"LittleWorldIconAppearance"}),window.LittleWorldIconAppearance.instances=[],window.LittleWorldIconAppearance.__super__=window.IconAppearance.prototype,window.LittleWorldIconAppearance=extend(window.LittleWorldIconAppearance,window.IconAppearance),window.LittleWorldIconAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),context.beginPath(),context.moveTo(62,10),context.lineTo(65,15),context.lineTo(75,19),context.lineTo(73,22),context.lineTo(78,30),context.lineTo(78,44),context.lineTo(81,55),context.lineTo(89,52),context.lineTo(90,48),context.lineTo(93,52),context.strokeStyle=iconColorString,context.lineWidth=3.5,context.lineCap="round",context.lineJoin="round",context.stroke(),context.beginPath(),context.moveTo(43,10),context.lineTo(48.2,15.8),context.lineTo(50.5,18.3),context.lineTo(50.2,20.7),context.lineTo(46.6,21.8),context.lineTo(46.4,21.8),context.lineTo(39.3,24.6),context.lineTo(34.1,34.3),context.lineTo(27.8,33),context.lineTo(24.7,36.1),context.lineTo(26.6,38.5),context.lineTo(31.5,43.3),context.lineTo(33.3,43),context.lineTo(41.3,42.7),context.lineTo(44.7,43.9),context.lineTo(48,47),context.lineTo(55.1,47),context.lineTo(57.1,49.1),context.lineTo(61.1,52.1),context.lineTo(65,54.4),context.lineTo(66.7,58.6),context.lineTo(61.4,68.3),context.lineTo(57.7,71.6),context.lineTo(54.2,77.8),context.lineTo(51,79.5),context.lineTo(47.9,81.3),context.lineTo(48,85.8),context.lineTo(45,88.8),context.lineTo(42.8,75.5),context.lineTo(42.5,69.1),context.lineTo(38.9,65.7),context.lineTo(35.9,62),context.lineTo(34.9,56.1),context.lineTo(34.6,52.8),context.lineTo(31.8,50),context.lineTo(28.4,48.8),context.lineTo(23.5,45),context.lineTo(20.4,43.7),context.lineTo(13.9,36.6),context.lineTo(14,26),context.strokeStyle=iconColorString,context.lineWidth=3.5,context.miterLimit=4,context.lineCap="round",context.lineJoin="round",context.stroke(),this.oval(context,6,7,87,87),context.strokeStyle=iconColorString,context.lineWidth=3.5,context.stroke()},window.LittleWorldIconWdgt=function(color){this.color=color,LittleWorldIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new LittleWorldIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.LittleWorldIconWdgt,"name",{value:"LittleWorldIconWdgt"}),window.LittleWorldIconWdgt.instances=[],window.LittleWorldIconWdgt.__super__=window.IconMorph.prototype,window.LittleWorldIconWdgt=extend(window.LittleWorldIconWdgt,window.IconMorph),window.MapPinIconAppearance=function(morph){this.morph=morph,MapPinIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(70,100),this.specificationSize=new Point(70,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.MapPinIconAppearance,"name",{value:"MapPinIconAppearance"}),window.MapPinIconAppearance.instances=[],window.MapPinIconAppearance.__super__=window.IconAppearance.prototype,window.MapPinIconAppearance=extend(window.MapPinIconAppearance,window.IconAppearance),window.MapPinIconAppearance.prototype.paintFunction=function(context){return"rgb(255, 0, 0)",context.beginPath(),context.moveTo(35,3.5),context.bezierCurveTo(18,3.5,4.2,16.69,4.2,32.94),context.bezierCurveTo(4.2,37.95,5.48,42.65,7.73,46.74),context.bezierCurveTo(14.36,58.8,35,95.9,35,95.9),context.lineTo(62.06,46.94),context.bezierCurveTo(62.06,46.84,65.8,37.74,65.8,32.94),context.bezierCurveTo(65.8,16.69,52,3.5,35,3.5),context.closePath(),context.moveTo(35,40.24),context.bezierCurveTo(30.16,40.12,28.29,37.8,28.25,33.21),context.bezierCurveTo(28.21,28.62,31.13,26.59,35,26.55),context.bezierCurveTo(38.87,26.5,41.79,29.58,41.75,33.21),context.bezierCurveTo(41.71,36.84,39.84,40.36,35,40.24),context.closePath(),context.fillStyle="rgb(170, 170, 170)",context.fill(),context.beginPath(),context.moveTo(35,6.79),context.bezierCurveTo(20.07,6.79,7.96,18.9,7.96,33.83),context.bezierCurveTo(7.96,38.43,9.08,42.75,11.05,46.51),context.bezierCurveTo(16.88,57.59,35,91.67,35,91.67),context.bezierCurveTo(35,91.67,52.84,57.87,58.76,46.79),context.lineTo(58.76,46.7),context.bezierCurveTo(58.76,46.6,58.85,46.6,58.85,46.51),context.bezierCurveTo(58.95,46.41,58.95,46.32,59.04,46.13),context.bezierCurveTo(60.92,42.47,62.04,38.24,62.04,33.83),context.bezierCurveTo(62.04,18.9,49.93,6.79,35,6.79),context.closePath(),context.moveTo(35,43.22),context.bezierCurveTo(29.84,43.22,25.61,39,25.61,33.83),context.bezierCurveTo(25.61,28.67,29.84,24.44,35,24.44),context.bezierCurveTo(40.16,24.44,44.39,28.67,44.39,33.83),context.bezierCurveTo(44.39,39,40.16,43.22,35,43.22),context.closePath(),context.fillStyle="rgb(255, 0, 0)",context.fill()},window.MapPinIconWdgt=function(color){this.color=color,MapPinIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new MapPinIconAppearance(this),this.toolTipMessage="map pin","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.MapPinIconWdgt,"name",{value:"MapPinIconWdgt"}),window.MapPinIconWdgt.instances=[],window.MapPinIconWdgt.__super__=window.IconMorph.prototype,window.MapPinIconWdgt=extend(window.MapPinIconWdgt,window.IconMorph),window.ObjectIconAppearance=function(morph){this.morph=morph,ObjectIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ObjectIconAppearance,"name",{value:"ObjectIconAppearance"}),window.ObjectIconAppearance.instances=[],window.ObjectIconAppearance.__super__=window.IconAppearance.prototype,window.ObjectIconAppearance=extend(window.ObjectIconAppearance,window.IconAppearance),window.ObjectIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(85.5,20.73),context.lineTo(68.35,3.5),context.bezierCurveTo(68.03,3.18,67.6,3,67.14,3),context.lineTo(15.71,3),context.bezierCurveTo(14.77,3,14,3.77,14,4.72),context.lineTo(14,94.28),context.bezierCurveTo(14,95.23,14.77,96,15.71,96),context.lineTo(84.29,96),context.bezierCurveTo(85.23,96,86,95.23,86,94.28),context.lineTo(86,21.94),context.bezierCurveTo(86,21.49,85.82,21.05,85.5,20.73),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(83.64,22.31),context.lineTo(67.62,6.32),context.bezierCurveTo(67.32,6.01,66.91,5.85,66.49,5.85),context.lineTo(18.44,5.85),context.bezierCurveTo(17.56,5.85,16.84,6.56,16.84,7.45),context.lineTo(16.84,90.6),context.bezierCurveTo(16.84,91.49,17.56,92.2,18.44,92.2),context.lineTo(82.5,92.2),context.bezierCurveTo(83.39,92.2,84.11,91.49,84.11,90.6),context.lineTo(84.11,23.44),context.bezierCurveTo(84.11,23.01,83.94,22.61,83.64,22.31),context.closePath(),context.moveTo(68.09,11.31),context.lineTo(78.64,21.84),context.lineTo(68.09,21.84),context.lineTo(68.09,11.31),context.closePath(),context.moveTo(20.05,89.01),context.lineTo(20.05,9.05),context.lineTo(64.89,9.05),context.lineTo(64.89,23.44),context.bezierCurveTo(64.89,24.32,65.6,25.04,66.49,25.04),context.lineTo(80.9,25.04),context.lineTo(80.9,89.01),context.lineTo(20.05,89.01),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.ObjectIconWdgt=function(color){this.color=color,ObjectIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ObjectIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ObjectIconWdgt,"name",{value:"ObjectIconWdgt"}),window.ObjectIconWdgt.instances=[],window.ObjectIconWdgt.__super__=window.IconMorph.prototype,window.ObjectIconWdgt=extend(window.ObjectIconWdgt,window.IconMorph),window.PaintBucketIconAppearance=function(morph){this.morph=morph,PaintBucketIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PaintBucketIconAppearance,"name",{value:"PaintBucketIconAppearance"}),window.PaintBucketIconAppearance.instances=[],window.PaintBucketIconAppearance.__super__=window.IconAppearance.prototype,window.PaintBucketIconAppearance=extend(window.PaintBucketIconAppearance,window.IconAppearance),window.PaintBucketIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(82.94,30.28),context.lineTo(82.94,22.75),context.bezierCurveTo(82.94,22.54,82.94,22.34,82.94,22.23),context.bezierCurveTo(82.94,14.29,66.23,10,50.47,10),context.bezierCurveTo(34.71,10,18,14.29,18,22.23),context.bezierCurveTo(18,22.44,18,22.65,18,22.75),context.lineTo(18,80.46),context.bezierCurveTo(18,80.56,18,80.66,18,80.77),context.bezierCurveTo(18,88.71,34.71,93,50.47,93),context.bezierCurveTo(66.23,93,82.94,88.71,82.94,80.77),context.bezierCurveTo(82.94,80.66,82.94,80.56,82.94,80.46),context.lineTo(82.94,71.94),context.bezierCurveTo(84.74,72.36,86.33,72.57,87.81,72.57),context.bezierCurveTo(90.98,72.57,93.52,70.73,95.32,68.96),context.bezierCurveTo(101.56,62.79,96.69,47.63,82.94,30.28),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(80.88,31.06),context.lineTo(80.88,23.98),context.bezierCurveTo(80.88,23.79,80.88,23.59,80.88,23.49),context.bezierCurveTo(80.88,16.03,65.22,12,50.44,12),context.bezierCurveTo(35.67,12,20,16.03,20,23.49),context.bezierCurveTo(20,23.69,20,23.89,20,23.98),context.lineTo(20,78.21),context.bezierCurveTo(20,78.31,20,78.41,20,78.51),context.bezierCurveTo(20,85.97,35.67,90,50.44,90),context.bezierCurveTo(65.22,90,80.88,85.97,80.88,78.51),context.bezierCurveTo(80.88,78.41,80.88,78.31,80.88,78.21),context.lineTo(80.88,69.27),context.bezierCurveTo(82.57,69.66,84.06,69.86,85.45,69.86),context.bezierCurveTo(88.42,69.86,90.8,69.08,92.49,67.41),context.bezierCurveTo(98.34,61.61,93.78,47.37,80.88,31.06),context.closePath(),context.moveTo(30.61,17.8),context.bezierCurveTo(35.87,15.93,43.01,14.95,50.54,14.95),context.bezierCurveTo(58.08,14.95,65.12,15.93,70.47,17.8),context.bezierCurveTo(74.84,19.27,77.61,21.23,77.91,23.1),context.lineTo(77.91,23.1),context.lineTo(77.91,23.69),context.bezierCurveTo(77.61,25.46,75.13,27.32,70.97,28.8),context.bezierCurveTo(65.51,26.93,58.18,25.95,50.54,25.95),context.bezierCurveTo(42.81,25.95,35.67,26.93,30.11,28.8),context.bezierCurveTo(28.23,28.11,26.74,27.32,25.55,26.54),context.lineTo(25.55,26.54),context.bezierCurveTo(24.56,25.85,23.47,24.87,23.27,23.69),context.lineTo(23.27,23.1),context.lineTo(23.27,23.1),context.bezierCurveTo(23.47,21.33,26.25,19.37,30.61,17.8),context.closePath(),context.moveTo(37.15,42.16),context.bezierCurveTo(37.15,40.78,35.37,39.21,33.19,39.21),context.bezierCurveTo(30.91,39.21,30.02,40.98,29.92,42.16),context.lineTo(29.92,60.92),context.bezierCurveTo(29.92,62.89,29.32,62.89,28.92,62.89),context.bezierCurveTo(28.63,62.89,27.73,62.89,27.73,60.92),context.lineTo(27.73,31.16),context.bezierCurveTo(30.71,32.34,34.38,33.32,38.44,33.91),context.bezierCurveTo(38.25,34.5,38.25,35.09,38.25,35.18),context.lineTo(38.25,49.53),context.bezierCurveTo(38.25,49.82,37.95,50.12,37.65,50.12),context.bezierCurveTo(37.35,50.12,37.06,49.82,37.06,49.53),context.lineTo(37.15,42.16),context.lineTo(37.15,42.16),context.closePath(),context.moveTo(42.41,31.45),context.bezierCurveTo(38.84,31.06,35.47,30.47,32.69,29.68),context.bezierCurveTo(37.75,28.31,44,27.52,50.54,27.52),context.bezierCurveTo(57.09,27.52,63.33,28.31,68.39,29.68),context.bezierCurveTo(63.43,31.06,57.19,31.84,50.54,31.84),context.bezierCurveTo(47.76,31.84,45.09,31.65,42.41,31.45),context.closePath(),context.moveTo(77.81,76.35),context.bezierCurveTo(76.62,77.92,74.04,79.49,70.37,80.67),context.bezierCurveTo(69.98,80.77,69.78,81.26,69.88,81.65),context.bezierCurveTo(69.98,81.94,70.27,82.14,70.57,82.14),context.bezierCurveTo(70.67,82.14,70.77,82.14,70.77,82.14),context.bezierCurveTo(73.74,81.16,76.12,79.88,77.71,78.6),context.lineTo(77.71,78.7),context.bezierCurveTo(77.61,80.57,74.84,82.53,70.27,84.11),context.bezierCurveTo(65.02,85.97,57.88,86.95,50.34,86.95),context.bezierCurveTo(42.81,86.95,35.77,85.97,30.41,84.11),context.bezierCurveTo(25.85,82.53,23.17,80.57,22.97,78.7),context.bezierCurveTo(22.97,78.6,22.97,78.6,22.97,78.51),context.bezierCurveTo(27.44,82.34,37.85,84.99,50.24,84.99),context.bezierCurveTo(51.14,84.99,52.13,84.99,53.02,84.99),context.bezierCurveTo(53.42,84.99,53.81,84.6,53.81,84.2),context.bezierCurveTo(53.81,83.81,53.42,83.42,53.02,83.42),context.bezierCurveTo(52.13,83.42,51.24,83.42,50.34,83.42),context.bezierCurveTo(36.16,83.42,25.95,80.08,23.07,76.35),context.lineTo(23.07,28.7),context.bezierCurveTo(23.07,28.7,23.17,28.7,23.17,28.8),context.bezierCurveTo(23.27,28.9,23.37,28.99,23.47,29.09),context.bezierCurveTo(23.97,29.49,24.66,30.27,24.66,30.76),context.lineTo(24.66,61.02),context.bezierCurveTo(24.66,64.07,26.35,66.03,28.92,66.03),context.bezierCurveTo(30.11,66.03,32.99,65.54,32.99,61.02),context.lineTo(32.99,42.36),context.bezierCurveTo(32.99,42.36,33.09,42.36,33.19,42.36),context.bezierCurveTo(33.58,42.36,33.88,42.55,34.08,42.65),context.lineTo(34.08,49.62),context.bezierCurveTo(34.08,51.59,35.77,53.26,37.75,53.26),context.bezierCurveTo(39.73,53.26,41.42,51.59,41.42,49.62),context.lineTo(41.42,35.28),context.bezierCurveTo(41.42,35.09,41.52,34.69,41.72,34.5),context.bezierCurveTo(41.82,34.4,42.01,34.4,42.21,34.4),context.lineTo(42.21,34.4),context.bezierCurveTo(44.89,34.69,47.76,34.79,50.54,34.79),context.bezierCurveTo(61.25,34.79,72.55,32.63,77.81,28.6),context.lineTo(77.81,65.05),context.bezierCurveTo(76.42,64.56,74.84,63.87,73.25,63.18),context.bezierCurveTo(64.52,58.96,54.71,51.69,45.48,42.55),context.bezierCurveTo(44.89,41.96,43.9,41.96,43.3,42.55),context.bezierCurveTo(42.71,43.14,42.71,44.12,43.3,44.71),context.bezierCurveTo(52.72,54.05,62.94,61.61,71.96,65.93),context.bezierCurveTo(74.04,66.91,76.03,67.7,77.81,68.29),context.lineTo(77.81,76.35),context.closePath(),context.moveTo(90.3,65.15),context.bezierCurveTo(88.52,66.91,85.25,67.21,80.88,66.13),context.lineTo(80.88,36.17),context.bezierCurveTo(85.35,42.26,88.62,48.15,90.4,53.16),context.bezierCurveTo(92.49,58.86,92.39,63.08,90.3,65.15),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.PaintBucketIconWdgt=function(color){this.color=color,PaintBucketIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new PaintBucketIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PaintBucketIconWdgt,"name",{value:"PaintBucketIconWdgt"}),window.PaintBucketIconWdgt.instances=[],window.PaintBucketIconWdgt.__super__=window.IconMorph.prototype,window.PaintBucketIconWdgt=extend(window.PaintBucketIconWdgt,window.IconMorph),window.PatchProgrammingComponentsIconAppearance=function(morph){this.morph=morph,PatchProgrammingComponentsIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PatchProgrammingComponentsIconAppearance,"name",{value:"PatchProgrammingComponentsIconAppearance"}),window.PatchProgrammingComponentsIconAppearance.instances=[],window.PatchProgrammingComponentsIconAppearance.__super__=window.IconAppearance.prototype,window.PatchProgrammingComponentsIconAppearance=extend(window.PatchProgrammingComponentsIconAppearance,window.IconAppearance),window.PatchProgrammingComponentsIconAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),context.beginPath(),context.rect(66.5,69.5,22,24),context.strokeStyle=iconColorString,context.lineWidth=4,context.lineCap="round",context.lineJoin="round",context.stroke(),context.beginPath(),context.moveTo(64.59,72.77),context.lineTo(60.59,72.77),context.strokeStyle=iconColorString,context.lineWidth=2,context.stroke(),context.beginPath(),context.moveTo(64.59,89.5),context.lineTo(60.59,89.5),context.strokeStyle=iconColorString,context.lineWidth=2,context.stroke(),this.oval(context,57.5,87.6,4,4),context.fillStyle=iconColorString,context.fill(),this.oval(context,57.5,70.7,4,4),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(94.05,72.77),context.lineTo(90.41,72.77),context.strokeStyle=iconColorString,context.lineWidth=2,context.stroke(),context.beginPath(),context.moveTo(94.05,89.5),context.lineTo(90.41,89.5),context.strokeStyle=iconColorString,context.lineWidth=2,context.stroke(),this.oval(context,93.5,87.5,4,4),context.fillStyle=iconColorString,context.fill(),this.oval(context,93.5,70.7,4,4),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.rect(13.5,8.5,48,50),context.strokeStyle=iconColorString,context.lineWidth=4,context.lineCap="round",context.lineJoin="round",context.stroke(),context.beginPath(),context.moveTo(13.55,15.32),context.lineTo(5.82,15.32),context.strokeStyle=iconColorString,context.lineWidth=2,context.stroke(),context.beginPath(),context.moveTo(13.16,50.17),context.lineTo(5.43,50.17),context.strokeStyle=iconColorString,context.lineWidth=2,context.stroke(),this.oval(context,3.5,47.5,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,3.5,12.5,5,5),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(68.41,15.32),context.lineTo(60.68,15.32),context.strokeStyle=iconColorString,context.lineWidth=2,context.stroke(),context.beginPath(),context.moveTo(68.02,50.17),context.lineTo(60.3,50.17),context.strokeStyle=iconColorString,context.lineWidth=2,context.stroke(),this.oval(context,66.5,47.5,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,66.5,12.5,5,5),context.fillStyle=iconColorString,context.fill()},window.PatchProgrammingComponentsIconWdgt=function(color){this.color=color,PatchProgrammingComponentsIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new PatchProgrammingComponentsIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PatchProgrammingComponentsIconWdgt,"name",{value:"PatchProgrammingComponentsIconWdgt"}),window.PatchProgrammingComponentsIconWdgt.instances=[],window.PatchProgrammingComponentsIconWdgt.__super__=window.IconMorph.prototype,window.PatchProgrammingComponentsIconWdgt=extend(window.PatchProgrammingComponentsIconWdgt,window.IconMorph),window.PatchProgrammingIconAppearance=function(morph){this.morph=morph,PatchProgrammingIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PatchProgrammingIconAppearance,"name",{value:"PatchProgrammingIconAppearance"}),window.PatchProgrammingIconAppearance.instances=[],window.PatchProgrammingIconAppearance.__super__=window.IconAppearance.prototype,window.PatchProgrammingIconAppearance=extend(window.PatchProgrammingIconAppearance,window.IconAppearance),window.PatchProgrammingIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(87.54,18),context.lineTo(13.57,18),context.bezierCurveTo(10.05,18,7.12,20.67,7.12,23.87),context.lineTo(7,76.13),context.bezierCurveTo(7,79.33,9.94,82,13.46,82),context.lineTo(87.43,82),context.bezierCurveTo(90.95,82,93.88,79.33,93.88,76.13),context.lineTo(94,23.87),context.bezierCurveTo(94,20.67,91.06,18,87.54,18),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(85.84,20),context.lineTo(15.27,20),context.bezierCurveTo(11.91,20,9.11,22.5,9.11,25.5),context.lineTo(9,74.5),context.bezierCurveTo(9,77.5,11.8,80,15.16,80),context.lineTo(85.73,80),context.bezierCurveTo(89.09,80,91.89,77.5,91.89,74.5),context.lineTo(92,25.5),context.bezierCurveTo(92,22.5,89.2,20,85.84,20),context.closePath(),context.moveTo(88.53,74.5),context.bezierCurveTo(88.53,75.9,87.3,77,85.73,77),context.lineTo(15.16,77),context.bezierCurveTo(13.59,77,12.36,75.9,12.36,74.5),context.lineTo(12.47,25.5),context.bezierCurveTo(12.47,24.1,13.7,23,15.27,23),context.lineTo(85.84,23),context.bezierCurveTo(87.41,23,88.64,24.1,88.64,25.5),context.lineTo(88.53,74.5),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(30.43,50),context.lineTo(68.41,50),context.strokeStyle=iconColorString,context.lineWidth=3.5,context.lineCap="round",context.stroke(),this.oval(context,20,40,20,20),context.strokeStyle=iconColorString,context.lineWidth=3.5,context.stroke(),context.beginPath(),context.rect(59,40,20,20),context.strokeStyle=iconColorString,context.lineWidth=3.5,context.lineJoin="round",context.stroke()},window.PatchProgrammingIconWdgt=function(color){this.color=color,PatchProgrammingIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new PatchProgrammingIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PatchProgrammingIconWdgt,"name",{value:"PatchProgrammingIconWdgt"}),window.PatchProgrammingIconWdgt.instances=[],window.PatchProgrammingIconWdgt.__super__=window.IconMorph.prototype,window.PatchProgrammingIconWdgt=extend(window.PatchProgrammingIconWdgt,window.IconMorph),window.Pencil2IconAppearance=function(){window.Pencil2IconAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Pencil2IconAppearance,"name",{value:"Pencil2IconAppearance"}),window.Pencil2IconAppearance.instances=[],window.Pencil2IconAppearance.__super__=window.IconAppearance.prototype,window.Pencil2IconAppearance=extend(window.Pencil2IconAppearance,window.IconAppearance),window.Pencil2IconAppearance.prototype.paintFunction=function(context){var fillColor;return fillColor=this.morph.color,context.beginPath(),context.moveTo(130.06,5.85),context.lineTo(130.08,5.84),context.bezierCurveTo(129.08,6.22,128.25,6.92,127.7,7.83),context.lineTo(42.95,154.23),context.lineTo(42.94,154.24),context.bezierCurveTo(42.44,155.11,42.23,156.11,42.33,157.11),context.lineTo(45.8,189.26),context.lineTo(45.8,189.24),context.bezierCurveTo(46.07,191.86,48.42,193.75,51.04,193.48),context.bezierCurveTo(51.54,193.43,52.03,193.3,52.49,193.09),context.lineTo(82.12,179.94),context.lineTo(82.11,179.95),context.bezierCurveTo(83.01,179.57,83.77,178.92,84.29,178.09),context.lineTo(169.04,31.69),context.lineTo(169.06,31.67),context.bezierCurveTo(170.37,29.39,169.59,26.48,167.31,25.17),context.bezierCurveTo(167.28,25.15,167.26,25.14,167.24,25.13),context.lineTo(134.23,6.12),context.lineTo(134.25,6.13),context.bezierCurveTo(132.98,5.4,131.44,5.29,130.08,5.84),context.lineTo(130.06,5.85),context.closePath(),context.moveTo(133.54,16.77),context.lineTo(158.31,31.1),context.lineTo(152.4,41.3),context.lineTo(127.58,27.07),context.lineTo(133.54,16.77),context.closePath(),context.moveTo(122.79,35.35),context.lineTo(147.55,49.67),context.lineTo(76.8,171.9),context.lineTo(54.59,181.76),context.lineTo(52.03,157.57),context.lineTo(122.79,35.35),context.closePath(),context.fillStyle=fillColor.toString(),context.fill()},window.Pencil2IconMorph=function(color){this.color=color,Pencil2IconMorph.__super__.constructor.apply(this,arguments),this.appearance=new Pencil2IconAppearance(this),this.toolTipMessage="pencil","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Pencil2IconMorph,"name",{value:"Pencil2IconMorph"}),window.Pencil2IconMorph.instances=[],window.Pencil2IconMorph.__super__=window.IconMorph.prototype,window.Pencil2IconMorph=extend(window.Pencil2IconMorph,window.IconMorph),window.PencilIconAppearance=function(){window.PencilIconAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PencilIconAppearance,"name",{value:"PencilIconAppearance"}),window.PencilIconAppearance.instances=[],window.PencilIconAppearance.__super__=window.IconAppearance.prototype,window.PencilIconAppearance=extend(window.PencilIconAppearance,window.IconAppearance),window.PencilIconAppearance.prototype.paintFunction=function(context){var fillColor;return fillColor=this.morph.color,context.save(),context.translate(90.18,101.32),context.rotate(13.16*Math.PI/180),context.beginPath(),context.moveTo(23.88,-86.27),context.lineTo(74.38,-51.12),context.lineTo(88.21,-73.65),context.lineTo(86.24,-90.9),context.lineTo(54.61,-112.65),context.lineTo(37.52,-108.5),context.lineTo(23.88,-86.27),context.closePath(),context.moveTo(16.57,-74.36),context.lineTo(67.23,-39.53),context.lineTo(-16.17,96.43),context.lineTo(-62.07,112.55),context.lineTo(-66.83,61.61),context.lineTo(16.57,-74.36),context.closePath(),context.fillStyle=fillColor.toString(),context.fill(),context.restore()},window.PencilIconMorph=function(color){this.color=color,PencilIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new PencilIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.PencilIconMorph,"name",{value:"PencilIconMorph"}),window.PencilIconMorph.instances=[],window.PencilIconMorph.__super__=window.IconMorph.prototype,window.PencilIconMorph=extend(window.PencilIconMorph,window.IconMorph),window.Plot3DIconAppearance=function(morph){this.morph=morph,Plot3DIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Plot3DIconAppearance,"name",{value:"Plot3DIconAppearance"}),window.Plot3DIconAppearance.instances=[],window.Plot3DIconAppearance.__super__=window.IconAppearance.prototype,window.Plot3DIconAppearance=extend(window.Plot3DIconAppearance,window.IconAppearance),window.Plot3DIconAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),context.beginPath(),context.moveTo(50.98,58.41),context.lineTo(50.98,30.88),context.bezierCurveTo(50.98,30.06,50.32,29.39,49.5,29.39),context.bezierCurveTo(48.68,29.39,48.02,30.06,48.02,30.88),context.lineTo(48.02,58.44),context.lineTo(21.92,77.36),context.bezierCurveTo(21.26,77.84,21.11,78.78,21.6,79.45),context.bezierCurveTo(22.07,80.12,23.01,80.27,23.67,79.79),context.lineTo(49.53,61.03),context.lineTo(76.85,79.81),context.bezierCurveTo(77.1,79.97,77.39,80.06,77.68,80.06),context.bezierCurveTo(78.16,80.06,78.62,79.84,78.91,79.4),context.bezierCurveTo(79.37,78.72,79.21,77.79,78.53,77.33),context.lineTo(50.98,58.41),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(48.02,19.57),context.lineTo(48.02,23.43),context.bezierCurveTo(48.02,24.25,48.68,24.92,49.5,24.92),context.bezierCurveTo(50.32,24.92,50.98,24.25,50.98,23.43),context.lineTo(50.98,19.57),context.lineTo(55,15.53),context.bezierCurveTo(55.58,14.95,55.58,14.01,55,13.43),context.bezierCurveTo(54.42,12.85,53.49,12.85,52.91,13.43),context.lineTo(49.5,16.86),context.lineTo(46.1,13.45),context.bezierCurveTo(45.52,12.87,44.59,12.87,44.01,13.45),context.bezierCurveTo(43.43,14.03,43.43,14.97,44.01,15.55),context.lineTo(48.02,19.57),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(90.16,83.04),context.lineTo(93.55,79.63),context.bezierCurveTo(94.13,79.05,94.13,78.11,93.55,77.53),context.bezierCurveTo(92.98,76.94,92.04,76.94,91.46,77.53),context.lineTo(88.07,80.94),context.lineTo(84.67,77.53),context.bezierCurveTo(84.09,76.94,83.16,76.94,82.58,77.53),context.bezierCurveTo(82,78.11,82,79.05,82.58,79.63),context.lineTo(85.97,83.04),context.lineTo(82.58,86.45),context.bezierCurveTo(82,87.03,82,87.97,82.58,88.55),context.bezierCurveTo(82.86,88.85,83.23,89,83.62,89),context.bezierCurveTo(84,89,84.37,88.85,84.67,88.57),context.lineTo(88.07,85.14),context.lineTo(91.46,88.55),context.bezierCurveTo(91.76,88.85,92.13,89,92.52,89),context.bezierCurveTo(92.9,89,93.27,88.85,93.57,88.57),context.bezierCurveTo(94.15,87.99,94.15,87.05,93.57,86.47),context.lineTo(90.16,83.04),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(16.75,79.14),context.bezierCurveTo(16.9,78.78,16.9,78.36,16.75,78),context.bezierCurveTo(16.6,77.64,16.3,77.35,15.95,77.2),context.bezierCurveTo(15.77,77.12,15.58,77.08,15.38,77.08),context.lineTo(6.48,77.08),context.bezierCurveTo(5.67,77.08,5,77.75,5,78.57),context.bezierCurveTo(5,79.39,5.67,80.06,6.48,80.06),context.lineTo(11.81,80.06),context.lineTo(5.44,86.45),context.bezierCurveTo(5.31,86.59,5.19,86.75,5.12,86.94),context.bezierCurveTo(4.97,87.3,4.97,87.72,5.12,88.08),context.bezierCurveTo(5.27,88.43,5.56,88.73,5.92,88.88),context.bezierCurveTo(6.1,88.96,6.29,89,6.48,89),context.lineTo(15.38,89),context.bezierCurveTo(16.2,89,16.87,88.33,16.87,87.51),context.bezierCurveTo(16.87,86.69,16.2,86.02,15.38,86.02),context.lineTo(10.06,86.02),context.lineTo(16.42,79.63),context.bezierCurveTo(16.57,79.49,16.67,79.31,16.75,79.14),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.Plot3DIconWdgt=function(color){this.color=color,Plot3DIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new Plot3DIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.Plot3DIconWdgt,"name",{value:"Plot3DIconWdgt"}),window.Plot3DIconWdgt.instances=[],window.Plot3DIconWdgt.__super__=window.IconMorph.prototype,window.Plot3DIconWdgt=extend(window.Plot3DIconWdgt,window.IconMorph),window.RasterPicIconAppearance=function(morph){this.morph=morph,RasterPicIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.RasterPicIconAppearance,"name",{value:"RasterPicIconAppearance"}),window.RasterPicIconAppearance.instances=[],window.RasterPicIconAppearance.__super__=window.IconAppearance.prototype,window.RasterPicIconAppearance=extend(window.RasterPicIconAppearance,window.IconAppearance),window.RasterPicIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(92.74,8),context.lineTo(7.48,8),context.bezierCurveTo(5.13,8,3.22,9.9,3.22,12.26),context.lineTo(3.22,88.9),context.bezierCurveTo(3.22,91.25,5.13,93.15,7.48,93.15),context.lineTo(92.74,93.15),context.bezierCurveTo(95.1,93.15,97,91.25,97,88.9),context.lineTo(97,12.26),context.bezierCurveTo(97,9.9,95.1,8,92.74,8),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(91.13,9.42),context.lineTo(9.25,9.42),context.bezierCurveTo(6.99,9.42,5.16,11.25,5.16,13.51),context.lineTo(5.16,87.13),context.bezierCurveTo(5.16,89.4,6.99,91.22,9.25,91.22),context.lineTo(91.13,91.22),context.bezierCurveTo(93.4,91.22,95.23,89.4,95.23,87.13),context.lineTo(95.23,13.51),context.bezierCurveTo(95.23,11.25,93.4,9.42,91.13,9.42),context.closePath(),context.moveTo(91.13,13.51),context.lineTo(91.13,70.24),context.lineTo(77.83,55.8),context.bezierCurveTo(77.05,54.92,75.93,54.41,74.76,54.41),context.bezierCurveTo(73.58,54.41,72.46,54.92,71.68,55.8),context.lineTo(61.02,67.86),context.lineTo(28.7,31.26),context.bezierCurveTo(27.92,30.38,26.8,29.87,25.63,29.87),context.bezierCurveTo(24.45,29.87,23.34,30.38,22.56,31.26),context.lineTo(9.25,46.59),context.lineTo(9.25,13.51),context.lineTo(91.13,13.51),context.closePath(),context.moveTo(9.25,52.78),context.lineTo(25.63,33.96),context.lineTo(58.65,71.36),context.lineTo(61.03,74.05),context.lineTo(72.33,87.13),context.lineTo(9.25,87.13),context.lineTo(9.25,52.78),context.closePath(),context.moveTo(77.79,87.13),context.lineTo(63.75,70.96),context.lineTo(74.76,58.5),context.lineTo(91.13,76.41),context.lineTo(91.13,87.13),context.lineTo(77.79,87.13),context.lineTo(77.79,87.13),context.closePath(),context.fillStyle=iconColorString,context.fill(),this.oval(context,56.25,23.5,20.5,20.75),context.strokeStyle=iconColorString,context.lineWidth=4,context.stroke()},window.RasterPicIconWdgt=function(color){this.color=color,RasterPicIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new RasterPicIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.RasterPicIconWdgt,"name",{value:"RasterPicIconWdgt"}),window.RasterPicIconWdgt.instances=[],window.RasterPicIconWdgt.__super__=window.IconMorph.prototype,window.RasterPicIconWdgt=extend(window.RasterPicIconWdgt,window.IconMorph),window.SaveIconAppearance=function(morph){this.morph=morph,SaveIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SaveIconAppearance,"name",{value:"SaveIconAppearance"}),window.SaveIconAppearance.instances=[],window.SaveIconAppearance.__super__=window.IconAppearance.prototype,window.SaveIconAppearance=extend(window.SaveIconAppearance,window.IconAppearance),window.SaveIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(3.5,2.5),context.lineTo(80.62,2.5),context.lineTo(96.5,18.33),context.lineTo(96.5,97.5),context.lineTo(3.5,97.5),context.lineTo(3.5,2.5),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(7.63,6.63),context.lineTo(77.9,6.63),context.lineTo(92.37,21.09),context.lineTo(92.37,93.37),context.lineTo(7.63,93.37),context.lineTo(7.63,6.63),context.closePath(),context.fillStyle="rgb(255, 255, 255)",context.fill(),context.strokeStyle=iconColorString,context.lineWidth=3.5,context.stroke(),context.beginPath(),context.rect(57.5,14.5,8,13),context.strokeStyle=iconColorString,context.lineWidth=2,context.stroke(),this.oval(context,52.5,70.5,4,4),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(29.63,72.33),context.lineTo(48.15,72.33),context.strokeStyle=iconColorString,context.lineWidth=4,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(29.63,64.91),context.lineTo(43.52,64.91),context.strokeStyle=iconColorString,context.lineWidth=4,context.lineCap="round",context.stroke(),context.beginPath(),context.rect(24.5,7.5,47,27),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.rect(21,54.5,58,39),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke()},window.SaveIconWdgt=function(color){this.color=color,SaveIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new SaveIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SaveIconWdgt,"name",{value:"SaveIconWdgt"}),window.SaveIconWdgt.instances=[],window.SaveIconWdgt.__super__=window.IconMorph.prototype,window.SaveIconWdgt=extend(window.SaveIconWdgt,window.IconMorph),window.ScatterPlotIconAppearance=function(morph){this.morph=morph,ScatterPlotIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ScatterPlotIconAppearance,"name",{value:"ScatterPlotIconAppearance"}),window.ScatterPlotIconAppearance.instances=[],window.ScatterPlotIconAppearance.__super__=window.IconAppearance.prototype,window.ScatterPlotIconAppearance=extend(window.ScatterPlotIconAppearance,window.IconAppearance),window.ScatterPlotIconAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),context.beginPath(),context.moveTo(7,8),context.lineTo(11.25,8),context.lineTo(11.25,88.76),context.lineTo(92,88.76),context.lineTo(92,93),context.lineTo(7,93),context.lineTo(7,8),context.closePath(),context.fillStyle=iconColorString,context.fill(),this.oval(context,35,25,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,18,39,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,16,56,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,15,69,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,28,79,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,39,73,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,51,71,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,66,74,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,41,62,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,36,49,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,38,39,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,51,34,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,51,24,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,51,54,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,63,61,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,72,50,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,65,41,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,85,41,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,78,32,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,85,23,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,80,14,5,5),context.fillStyle=iconColorString,context.fill(),this.oval(context,69,17,5,5),context.fillStyle=iconColorString,context.fill()},window.ScatterPlotIconWdgt=function(color){this.color=color,ScatterPlotIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ScatterPlotIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ScatterPlotIconWdgt,"name",{value:"ScatterPlotIconWdgt"}),window.ScatterPlotIconWdgt.instances=[],window.ScatterPlotIconWdgt.__super__=window.IconMorph.prototype,window.ScatterPlotIconWdgt=extend(window.ScatterPlotIconWdgt,window.IconMorph),window.ScooterIconAppearance=function(morph){this.morph=morph,ScooterIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ScooterIconAppearance,"name",{value:"ScooterIconAppearance"}),window.ScooterIconAppearance.instances=[],window.ScooterIconAppearance.__super__=window.IconAppearance.prototype,window.ScooterIconAppearance=extend(window.ScooterIconAppearance,window.IconAppearance),window.ScooterIconAppearance.prototype.paintFunction=function(context){return"rgb(0, 0, 0)",this.oval(context,10.5,136.5,34.5,34.5),context.strokeStyle="rgb(0, 0, 0)",context.lineWidth=10,context.stroke(),this.oval(context,154,135.5,34.5,34.5),context.strokeStyle="rgb(0, 0, 0)",context.lineWidth=10,context.stroke(),this.arc(context,141,123,57,57,176,268,!1),context.strokeStyle="rgb(0, 0, 0)",context.lineWidth=7.5,context.stroke(),context.beginPath(),context.moveTo(171.5,153.5),context.lineTo(167,38),context.lineCap="round",context.strokeStyle="rgb(0, 0, 0)",context.lineWidth=8,context.stroke(),context.beginPath(),context.moveTo(146.5,36.5),context.lineTo(190.5,36.5),context.lineCap="round",context.strokeStyle="rgb(0, 0, 0)",context.lineWidth=7,context.stroke(),context.beginPath(),context.moveTo(28.5,153.5),context.lineTo(140.5,153.5),context.lineCap="round",context.strokeStyle="rgb(0, 0, 0)",context.lineWidth=7,context.stroke()},window.ScooterIconMorph=function(color){this.color=color,ScooterIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new ScooterIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ScooterIconMorph,"name",{value:"ScooterIconMorph"}),window.ScooterIconMorph.instances=[],window.ScooterIconMorph.__super__=window.IconMorph.prototype,window.ScooterIconMorph=extend(window.ScooterIconMorph,window.IconMorph),window.ScratchAreaIconAppearance=function(morph){this.morph=morph,ScratchAreaIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ScratchAreaIconAppearance,"name",{value:"ScratchAreaIconAppearance"}),window.ScratchAreaIconAppearance.instances=[],window.ScratchAreaIconAppearance.__super__=window.IconAppearance.prototype,window.ScratchAreaIconAppearance=extend(window.ScratchAreaIconAppearance,window.IconAppearance),window.ScratchAreaIconAppearance.prototype.paintFunction=function(context){var colorString;return colorString="rgb(0, 0, 0)",context.beginPath(),context.moveTo(40.5,118.5),context.lineTo(40.5,184.5),context.lineTo(145.5,184.5),context.lineTo(145.5,92.5),context.lineTo(40.5,92.5),context.lineTo(67.5,67.5),context.lineTo(78.5,67.5),context.lineCap="round",context.lineJoin="round",context.strokeStyle=colorString,context.lineWidth=4.5,context.stroke(),context.beginPath(),context.moveTo(146,185),context.lineTo(172.83,159.74),context.lineTo(172.29,102.66),context.lineTo(190,87),context.strokeStyle=colorString,context.lineWidth=4.5,context.stroke(),context.beginPath(),context.moveTo(172.5,102.5),context.lineTo(161.5,112.5),context.strokeStyle=colorString,context.lineWidth=5.5,context.stroke(),context.beginPath(),context.moveTo(19.5,117.5),context.bezierCurveTo(127.5,117.5,127.5,117.5,127.5,117.5),context.strokeStyle=colorString,context.lineWidth=4.5,context.stroke(),this.arc(context,128.5,94.5,33,49,180,273,!1),context.strokeStyle=colorString,context.lineWidth=4.5,context.stroke(),this.arc(context,22,93,33,49,180,273,!1),context.strokeStyle=colorString,context.lineWidth=4.5,context.stroke(),this.arc(context,135,93,26,49,266,355,!1),context.strokeStyle=colorString,context.lineWidth=4.5,context.stroke(),this.arc(context,162.5,67.5,26,49,266,355,!1),context.strokeStyle=colorString,context.lineWidth=4.5,context.stroke(),context.beginPath(),context.moveTo(103.5,67.5),context.lineTo(172,67.5),context.lineTo(146,92.5),context.strokeStyle=colorString,context.lineWidth=4.5,context.stroke(),this.arc(context,-9.5,76,51,49,254,339,!1),context.strokeStyle=colorString,context.lineWidth=4.5,context.stroke(),this.arc(context,17,52.5,51,49,254,339,!1),context.strokeStyle=colorString,context.lineWidth=4.5,context.stroke(),context.beginPath(),context.moveTo(10,77),context.lineTo(37,53),context.strokeStyle=colorString,context.lineWidth=4.5,context.stroke(),context.beginPath(),context.moveTo(65.5,68),context.lineTo(72,56),context.strokeStyle=colorString,context.lineWidth=4.5,context.stroke(),context.beginPath(),context.moveTo(89.5,45.5),context.lineTo(105.5,45.5),context.strokeStyle=colorString,context.lineWidth=4,context.stroke(),context.beginPath(),context.moveTo(150.5,45.5),context.lineTo(188,45),context.lineCap="round",context.lineJoin="round",context.strokeStyle=colorString,context.lineWidth=4,context.stroke(),this.arc(context,171.5,45.5,33,49,180,273,!1),context.strokeStyle=colorString,context.lineWidth=4.5,context.stroke(),this.arc(context,92,80,18,18.5,181,0,!1),context.strokeStyle=colorString,context.lineWidth=4.5,context.stroke(),context.beginPath(),context.moveTo(83,59.5),context.lineTo(83.5,73.5),context.lineTo(98.5,73.5),context.lineTo(98,58),context.lineTo(83,59.5),context.closePath(),context.strokeStyle=colorString,context.lineWidth=4.5,context.stroke(),context.beginPath(),context.moveTo(106.5,39.5),context.lineTo(117.5,20.5),context.lineTo(139.5,20.5),context.lineTo(149.5,38.5),context.lineTo(138.5,57.5),context.lineTo(116.5,57.5),context.lineTo(106.5,39.5),context.closePath(),context.strokeStyle=colorString,context.lineWidth=4.5,context.stroke(),this.arc(context,64.5,27,22.5,23.5,181,180,!1),context.strokeStyle=colorString,context.lineWidth=4.5,context.stroke()},window.ScratchAreaIconMorph=function(color){this.color=color,ScratchAreaIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new ScratchAreaIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ScratchAreaIconMorph,"name",{value:"ScratchAreaIconMorph"}),window.ScratchAreaIconMorph.instances=[],window.ScratchAreaIconMorph.__super__=window.IconMorph.prototype,window.ScratchAreaIconMorph=extend(window.ScratchAreaIconMorph,window.IconMorph),window.ScriptIconAppearance=function(morph){this.morph=morph,ScriptIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ScriptIconAppearance,"name",{value:"ScriptIconAppearance"}),window.ScriptIconAppearance.instances=[],window.ScriptIconAppearance.__super__=window.IconAppearance.prototype,window.ScriptIconAppearance=extend(window.ScriptIconAppearance,window.IconAppearance),window.ScriptIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.rect(14,3,73,92),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.rect(18,7,65,84),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.rect(29,11,13,3),context.rect(45,11,5,3),context.rect(52,11,26,3),context.rect(29,18,3,3),context.rect(35,18,20,3),context.rect(57,18,3,3),context.rect(62,18,12,3),context.rect(29,25,21,3),context.rect(52,25,26,3),context.rect(29,31,3,3),context.rect(35,31,20,3),context.rect(57,31,3,3),context.rect(62,31,12,3),context.rect(29,38,21,3),context.rect(29,44,6,3),context.rect(38,44,17,3),context.rect(40,51,10,3),context.rect(40,58,15,3),context.rect(57,58,3,3),context.rect(40,64,15,3),context.rect(57,64,3,3),context.rect(40,70,5,3),context.rect(29,77,21,3),context.rect(52,77,5,3),context.rect(29,83,13,3),context.rect(45,83,20,3),context.rect(21,11,3,3),context.rect(21,18,3,3),context.rect(21,25,3,3),context.rect(21,31,3,3),context.rect(21,38,3,3),context.rect(21,44,3,3),context.rect(21,51,3,3),context.rect(21,58,3,3),context.rect(21,64,3,3),context.rect(21,70,3,3),context.rect(21,77,3,3),context.rect(21,83,3,3),context.fillStyle=iconColorString,context.fill(),this.oval(context,66,65,33,33),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(78.35,87.95),context.lineTo(89.1,80.95),context.lineTo(78.35,73.95),context.lineTo(78.35,87.95),context.closePath(),context.fillStyle=iconColorString,context.fill(),this.oval(context,69,68,27,27),context.strokeStyle=iconColorString,context.lineWidth=3,context.stroke()},window.ScriptIconWdgt=function(color){this.color=color,ScriptIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ScriptIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ScriptIconWdgt,"name",{value:"ScriptIconWdgt"}),window.ScriptIconWdgt.instances=[],window.ScriptIconWdgt.__super__=window.IconMorph.prototype,window.ScriptIconWdgt=extend(window.ScriptIconWdgt,window.IconMorph),window.ShortcutArrowIconAppearance=function(morph){this.morph=morph,ShortcutArrowIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ShortcutArrowIconAppearance,"name",{value:"ShortcutArrowIconAppearance"}),window.ShortcutArrowIconAppearance.instances=[],window.ShortcutArrowIconAppearance.__super__=window.IconAppearance.prototype,window.ShortcutArrowIconAppearance=extend(window.ShortcutArrowIconAppearance,window.IconAppearance),window.ShortcutArrowIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(81.16,4),context.lineTo(19.84,4),context.lineTo(19.84,4),context.bezierCurveTo(11.09,4,4,11.09,4,19.84),context.lineTo(4,81.16),context.lineTo(4,81.16),context.bezierCurveTo(4,89.91,11.09,97,19.84,97),context.lineTo(81.16,97),context.lineTo(81.16,97),context.bezierCurveTo(89.91,97,97,89.91,97,81.16),context.lineTo(97,19.84),context.lineTo(97,19.84),context.bezierCurveTo(97,11.09,89.91,4,81.16,4),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(78.82,7.72),context.lineTo(22.83,7.72),context.lineTo(22.83,7.72),context.bezierCurveTo(14.84,7.72,8.37,14.19,8.37,22.18),context.lineTo(8.37,78.17),context.lineTo(8.37,78.17),context.bezierCurveTo(8.37,86.16,14.84,92.63,22.83,92.63),context.lineTo(78.82,92.63),context.lineTo(78.82,92.63),context.bezierCurveTo(86.81,92.63,93.28,86.16,93.28,78.17),context.lineTo(93.28,22.18),context.lineTo(93.28,22.18),context.bezierCurveTo(93.28,14.19,86.81,7.72,78.82,7.72),context.closePath(),context.moveTo(85.39,78.17),context.lineTo(85.39,78.17),context.bezierCurveTo(85.39,81.8,82.45,84.74,78.82,84.74),context.lineTo(22.83,84.74),context.lineTo(22.83,84.74),context.bezierCurveTo(19.2,84.74,16.26,81.8,16.26,78.17),context.lineTo(16.26,22.18),context.lineTo(16.26,22.18),context.bezierCurveTo(16.26,18.55,19.2,15.61,22.83,15.61),context.lineTo(78.82,15.61),context.lineTo(78.82,15.61),context.bezierCurveTo(82.45,15.61,85.39,18.55,85.39,22.18),context.lineTo(85.39,78.17),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(57.22,52.5),context.bezierCurveTo(59.32,57.3,61.42,62.16,63.58,66.95),context.lineTo(80.52,33.87),context.lineTo(45.39,25.61),context.bezierCurveTo(47.85,31.09,49.05,33.87,51.45,39.37),context.bezierCurveTo(48.37,40.19,39.96,42.92,33.54,51.48),context.bezierCurveTo(24.46,63.49,26.53,77.54,26.9,79.91),context.bezierCurveTo(27.64,76.82,30.09,67.94,38.14,60.81),context.bezierCurveTo(45.79,54.01,54.12,52.78,57.22,52.5),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.ShortcutArrowIconWdgt=function(color){this.color=color,ShortcutArrowIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ShortcutArrowIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ShortcutArrowIconWdgt,"name",{value:"ShortcutArrowIconWdgt"}),window.ShortcutArrowIconWdgt.instances=[],window.ShortcutArrowIconWdgt.__super__=window.IconMorph.prototype,window.ShortcutArrowIconWdgt=extend(window.ShortcutArrowIconWdgt,window.IconMorph),window.SimpleSlideIconAppearance=function(morph){this.morph=morph,SimpleSlideIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleSlideIconAppearance,"name",{value:"SimpleSlideIconAppearance"}),window.SimpleSlideIconAppearance.instances=[],window.SimpleSlideIconAppearance.__super__=window.IconAppearance.prototype,window.SimpleSlideIconAppearance=extend(window.SimpleSlideIconAppearance,window.IconAppearance),window.SimpleSlideIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(87.54,18),context.lineTo(13.57,18),context.bezierCurveTo(10.05,18,7.12,20.67,7.12,23.87),context.lineTo(7,76.13),context.bezierCurveTo(7,79.33,9.94,82,13.46,82),context.lineTo(87.43,82),context.bezierCurveTo(90.95,82,93.88,79.33,93.88,76.13),context.lineTo(94,23.87),context.bezierCurveTo(94,20.67,91.06,18,87.54,18),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(16.86,33.6),context.lineTo(44.54,33.6),context.strokeStyle=iconColorString,context.lineWidth=1.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(16.86,45.34),context.lineTo(44.54,45.34),context.strokeStyle=iconColorString,context.lineWidth=1.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(16.86,56.08),context.lineTo(44.54,56.08),context.strokeStyle=iconColorString,context.lineWidth=1.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(16.86,67.36),context.lineTo(44.54,67.36),context.strokeStyle=iconColorString,context.lineWidth=1.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(53.77,56.08),context.lineTo(81.45,56.08),context.strokeStyle=iconColorString,context.lineWidth=1.5,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(53.77,67.36),context.lineTo(81.45,67.36),context.strokeStyle=iconColorString,context.lineWidth=1.5,context.lineCap="round",context.stroke(),context.beginPath(),context.rect(54,36,8,9.5),context.strokeStyle=iconColorString,context.lineWidth=1.5,context.lineJoin="round",context.stroke(),context.beginPath(),context.rect(65,33,7,12.5),context.strokeStyle=iconColorString,context.lineWidth=1.5,context.lineJoin="round",context.stroke(),context.beginPath(),context.rect(75,28,8,17.5),context.strokeStyle=iconColorString,context.lineWidth=1.5,context.lineJoin="round",context.stroke(),context.beginPath(),context.moveTo(85.84,20),context.lineTo(15.27,20),context.bezierCurveTo(11.91,20,9.11,22.5,9.11,25.5),context.lineTo(9,74.5),context.bezierCurveTo(9,77.5,11.8,80,15.16,80),context.lineTo(85.73,80),context.bezierCurveTo(89.09,80,91.89,77.5,91.89,74.5),context.lineTo(92,25.5),context.bezierCurveTo(92,22.5,89.2,20,85.84,20),context.closePath(),context.moveTo(88.53,74.5),context.bezierCurveTo(88.53,75.9,87.3,77,85.73,77),context.lineTo(15.16,77),context.bezierCurveTo(13.59,77,12.36,75.9,12.36,74.5),context.lineTo(12.47,25.5),context.bezierCurveTo(12.47,24.1,13.7,23,15.27,23),context.lineTo(85.84,23),context.bezierCurveTo(87.41,23,88.64,24.1,88.64,25.5),context.lineTo(88.53,74.5),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.SimpleSlideIconWdgt=function(color){this.color=color,SimpleSlideIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new SimpleSlideIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleSlideIconWdgt,"name",{value:"SimpleSlideIconWdgt"}),window.SimpleSlideIconWdgt.instances=[],window.SimpleSlideIconWdgt.__super__=window.IconMorph.prototype,window.SimpleSlideIconWdgt=extend(window.SimpleSlideIconWdgt,window.IconMorph),window.SliderNodeIconWdgt=function(color){this.color=color,SliderNodeIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new SliderNodeIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SliderNodeIconWdgt,"name",{value:"SliderNodeIconWdgt"}),window.SliderNodeIconWdgt.instances=[],window.SliderNodeIconWdgt.__super__=window.IconMorph.prototype,window.SliderNodeIconWdgt=extend(window.SliderNodeIconWdgt,window.IconMorph),window.SliderNodeIconAppearance=function(morph){this.morph=morph,SliderNodeIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SliderNodeIconAppearance,"name",{value:"SliderNodeIconAppearance"}),window.SliderNodeIconAppearance.instances=[],window.SliderNodeIconAppearance.__super__=window.IconAppearance.prototype,window.SliderNodeIconAppearance=extend(window.SliderNodeIconAppearance,window.IconAppearance),window.SliderNodeIconAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),context.beginPath(),context.moveTo(60.64,82.46),context.lineTo(60.64,18),context.bezierCurveTo(60.64,11.58,55.42,6.37,49,6.37),context.bezierCurveTo(42.59,6.37,37.37,11.58,37.37,18),context.bezierCurveTo(37.37,18.12,37.38,18.24,37.38,18.36),context.lineTo(37.39,81.96),context.lineTo(37.38,82.1),context.bezierCurveTo(37.38,82.22,37.37,82.34,37.37,82.46),context.bezierCurveTo(37.37,88.87,42.59,94.09,49,94.09),context.bezierCurveTo(55.42,94.09,60.64,88.87,60.64,82.46),context.closePath(),context.moveTo(40.37,82.46),context.bezierCurveTo(40.37,82.4,40.37,82.35,40.38,82.3),context.lineTo(40.39,82.01),context.lineTo(40.39,18.4),context.lineTo(40.38,18.16),context.bezierCurveTo(40.37,18.11,40.37,18.06,40.37,18),context.bezierCurveTo(40.37,13.24,44.24,9.37,49,9.37),context.bezierCurveTo(53.76,9.37,57.64,13.24,57.64,18),context.lineTo(57.64,82.46),context.bezierCurveTo(57.64,87.22,53.76,91.09,49,91.09),context.bezierCurveTo(44.24,91.09,40.37,87.22,40.37,82.46),context.closePath(),context.fillStyle=iconColorString,context.fill(),this.oval(context,42,57,14,14),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(60,50),context.lineTo(69,50),context.strokeStyle=iconColorString,context.lineWidth=2,context.stroke(),this.oval(context,67.5,47,6,6),context.fillStyle=iconColorString,context.fill()},window.SlidesToolbarIconAppearance=function(morph){this.morph=morph,SlidesToolbarIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SlidesToolbarIconAppearance,"name",{value:"SlidesToolbarIconAppearance"}),window.SlidesToolbarIconAppearance.instances=[],window.SlidesToolbarIconAppearance.__super__=window.IconAppearance.prototype,window.SlidesToolbarIconAppearance=extend(window.SlidesToolbarIconAppearance,window.IconAppearance),window.SlidesToolbarIconAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),context.beginPath(),context.moveTo(75.36,60.27),context.lineTo(59.71,60.27),context.lineTo(59.71,87.29),context.lineTo(86.77,87.29),context.lineTo(86.77,71.67),context.strokeStyle=iconColorString,context.lineWidth=6,context.lineJoin="round",context.stroke(),context.beginPath(),context.moveTo(81.09,59.55),context.lineTo(84.13,59.55),context.lineTo(72.53,71.13),context.lineTo(75.9,74.49),context.lineTo(87.54,62.91),context.lineTo(87.54,65.94),context.lineTo(92.35,65.94),context.lineTo(92.35,54.74),context.lineTo(81.09,54.74),context.lineTo(81.09,59.55),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(44.48,40.52),context.lineTo(44.48,39.41),context.bezierCurveTo(43.59,40.04,43.53,40.01,42.46,40.32),context.bezierCurveTo(41.38,40.64,40.41,40.8,39.53,40.8),context.bezierCurveTo(37.63,40.8,36.08,40.12,34.89,38.77),context.bezierCurveTo(33.71,37.42,33.11,35.93,33.11,34.29),context.bezierCurveTo(33.11,32.29,33.87,30.44,35.39,28.74),context.bezierCurveTo(36.91,27.03,38.08,26.68,40.75,26.68),context.bezierCurveTo(41.83,26.68,43.07,27.35,44.48,27.66),context.lineTo(44.48,26.52),context.bezierCurveTo(44.48,25.81,44.25,24.72,43.79,24.27),context.bezierCurveTo(43.34,23.83,42.47,23.09,41.19,23.09),context.bezierCurveTo(40.14,23.09,38.78,23.37,37.1,23.93),context.bezierCurveTo(36.48,24.13,35.99,24.23,35.65,24.23),context.bezierCurveTo(35.18,24.23,34.77,24,34.45,23.55),context.bezierCurveTo(34.12,23.09,33.95,22.51,33.95,21.8),context.bezierCurveTo(33.95,21.39,34.01,21.05,34.13,20.75),context.bezierCurveTo(34.24,20.46,34.4,20.22,34.61,20.05),context.bezierCurveTo(34.82,19.87,35.25,19.66,35.91,19.41),context.bezierCurveTo(36.79,19.08,37.68,18.83,38.59,18.63),context.bezierCurveTo(39.5,18.44,40.33,18.34,41.07,18.34),context.bezierCurveTo(43.27,18.34,44.98,19.49,46.2,20.76),context.bezierCurveTo(47.41,22.04,48.02,23.78,48.02,25.99),context.lineTo(48.02,35.77),context.lineTo(48.63,35.77),context.bezierCurveTo(49.48,35.77,50.09,35.99,50.45,36.43),context.bezierCurveTo(50.82,36.87,51,37.45,51,38.16),context.bezierCurveTo(51,38.85,50.82,39.42,50.45,39.86),context.bezierCurveTo(50.09,40.3,49.48,40.52,48.63,40.52),context.lineTo(44.48,40.52),context.closePath(),context.moveTo(44.48,31.51),context.bezierCurveTo(43.06,31.14,41.75,30.44,40.55,30.44),context.bezierCurveTo(39.1,30.44,38.79,30.91,37.75,31.86),context.bezierCurveTo(37.1,32.46,36.78,33.58,36.78,34.19),context.bezierCurveTo(36.78,34.64,37.4,36.02,37.71,36.3),context.bezierCurveTo(38.29,36.81,38.62,37.06,39.62,37.06),context.bezierCurveTo(40.47,37.06,41.44,36.84,42.52,36.39),context.bezierCurveTo(43.6,35.94,43.63,35.84,44.48,35.07),context.lineTo(44.48,31.51),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(24.67,32.94),context.lineTo(15.56,32.94),context.lineTo(14.64,35.92),context.lineTo(15.56,35.92),context.bezierCurveTo(16.46,35.92,17.1,36.14,17.49,36.59),context.bezierCurveTo(17.87,37.05,18.06,37.64,18.06,38.37),context.bezierCurveTo(18.06,39.08,17.87,39.67,17.49,40.12),context.bezierCurveTo(17.1,40.57,16.46,40.8,15.56,40.8),context.lineTo(10.51,40.8),context.bezierCurveTo(9.6,40.8,8.96,40.57,8.58,40.12),context.bezierCurveTo(8.19,39.67,8,39.08,8,38.35),context.bezierCurveTo(8,37.62,8.2,37.02,8.6,36.56),context.bezierCurveTo(9.01,36.1,9.67,35.88,10.6,35.92),context.lineTo(16.49,16.81),context.lineTo(14.04,16.81),context.bezierCurveTo(13.14,16.81,12.49,16.58,12.11,16.13),context.bezierCurveTo(11.72,15.68,11.53,15.08,11.53,14.35),context.bezierCurveTo(11.53,13.62,11.72,13.03,12.11,12.58),context.bezierCurveTo(12.49,12.13,13.14,11.9,14.04,11.9),context.lineTo(22.14,11.92),context.lineTo(29.61,35.92),context.bezierCurveTo(30.49,35.92,31.07,36.04,31.35,36.3),context.bezierCurveTo(31.91,36.82,32.19,37.51,32.19,38.37),context.bezierCurveTo(32.19,39.08,32,39.67,31.62,40.12),context.bezierCurveTo(31.24,40.57,30.6,40.8,29.7,40.8),context.lineTo(24.65,40.8),context.bezierCurveTo(23.75,40.8,23.1,40.57,22.72,40.12),context.bezierCurveTo(22.34,39.67,22.14,39.08,22.14,38.35),context.bezierCurveTo(22.14,37.63,22.34,37.05,22.72,36.59),context.bezierCurveTo(23.1,36.14,23.75,35.92,24.65,35.92),context.lineTo(25.56,35.92),context.lineTo(24.67,32.94),context.closePath(),context.moveTo(23.11,28.05),context.lineTo(20.09,18.38),context.lineTo(17.06,28.05),context.lineTo(23.11,28.05),context.closePath(),context.fillStyle=iconColorString,context.fill(),this.arc(context,11,59,19,18,136,-34,!1),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),this.arc(context,26,59,19,18,-146,46,!1),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),this.oval(context,27,61.9,2,2),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(13.28,73.85),context.lineTo(26.58,87.72),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.moveTo(42.72,73.85),context.lineTo(29.23,87.91),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),this.arc(context,25.5,83.1,5,5,37,143,!1),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),this.arc(context,15.5,63,10,10,-179,-87,!1),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.moveTo(91.44,26.84),context.lineTo(85.61,20.95),context.bezierCurveTo(85.61,20.95,82.34,24.26,79.13,27.51),context.lineTo(79.13,10.21),context.lineTo(70.88,10.21),context.lineTo(70.88,27.51),context.lineTo(64.39,20.95),context.lineTo(58.56,26.84),context.lineTo(75,43.43),context.lineTo(91.44,26.84),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.SlidesToolbarIconWdgt=function(color){this.color=color,SlidesToolbarIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new SlidesToolbarIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SlidesToolbarIconWdgt,"name",{value:"SlidesToolbarIconWdgt"}),window.SlidesToolbarIconWdgt.instances=[],window.SlidesToolbarIconWdgt.__super__=window.IconMorph.prototype,window.SlidesToolbarIconWdgt=extend(window.SlidesToolbarIconWdgt,window.IconMorph),window.TemplatesIconAppearance=function(morph){this.morph=morph,TemplatesIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TemplatesIconAppearance,"name",{value:"TemplatesIconAppearance"}),window.TemplatesIconAppearance.instances=[],window.TemplatesIconAppearance.__super__=window.IconAppearance.prototype,window.TemplatesIconAppearance=extend(window.TemplatesIconAppearance,window.IconAppearance),window.TemplatesIconAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),context.beginPath(),context.moveTo(43,87),context.lineTo(64.21,95.76),context.lineTo(67.11,87),context.strokeStyle="rgb(0, 0, 0)",context.lineWidth=2,context.lineCap="round",context.lineJoin="round",context.stroke(),context.beginPath(),context.moveTo(20.57,43.92),context.lineTo(9,75.06),context.lineTo(20.57,78.96),context.strokeStyle="rgb(0, 0, 0)",context.lineWidth=2,context.lineCap="round",context.lineJoin="round",context.stroke(),context.beginPath(),context.moveTo(32.14,12.78),context.lineTo(34.07,5),context.lineTo(57.21,12.78),context.strokeStyle="rgb(0, 0, 0)",context.lineWidth=2,context.lineCap="round",context.lineJoin="round",context.stroke(),context.beginPath(),context.moveTo(78.43,20.57),context.lineTo(90,24.46),context.lineTo(78.43,53.66),context.strokeStyle="rgb(0, 0, 0)",context.lineWidth=2,context.lineCap="round",context.lineJoin="round",context.stroke(),context.beginPath(),context.moveTo(28.29,75.06),context.lineTo(53.36,75.06),context.strokeStyle=iconColorString,context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(28.29,63.39),context.lineTo(70.71,63.39),context.strokeStyle=iconColorString,context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(28.29,51.71),context.lineTo(70.71,51.71),context.strokeStyle=iconColorString,context.lineWidth=2,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(49.49,40.77),context.bezierCurveTo(49,40.77,48.67,40.61,48.35,40.28),context.lineTo(40.83,32.8),context.bezierCurveTo(38.05,30.03,38.05,25.8,40.83,23.04),context.bezierCurveTo(43.12,20.76,47.57,21.31,49.49,24.01),context.bezierCurveTo(51.43,21.31,55.7,20.59,58.15,23.04),context.lineTo(58.15,23.04),context.lineTo(58.15,23.04),context.lineTo(58.15,23.04),context.bezierCurveTo(59.45,24.34,60.11,26.13,60.11,27.92),context.bezierCurveTo(60.11,29.71,59.45,31.5,58.15,32.8),context.lineTo(50.63,40.28),context.bezierCurveTo(50.31,40.61,49.98,40.77,49.49,40.77),context.closePath(),context.strokeStyle=iconColorString,context.lineWidth=1.5,context.miterLimit=4,context.stroke(),context.beginPath(),context.rect(21,13,57,74),context.strokeStyle=iconColorString,context.lineWidth=2,context.lineJoin="round",context.stroke()},window.TemplatesIconWdgt=function(color){this.color=color,TemplatesIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new TemplatesIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TemplatesIconWdgt,"name",{value:"TemplatesIconWdgt"}),window.TemplatesIconWdgt.instances=[],window.TemplatesIconWdgt.__super__=window.IconMorph.prototype,window.TemplatesIconWdgt=extend(window.TemplatesIconWdgt,window.IconMorph),window.TextIconAppearance=function(morph){this.morph=morph,TextIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TextIconAppearance,"name",{value:"TextIconAppearance"}),window.TextIconAppearance.instances=[],window.TextIconAppearance.__super__=window.IconAppearance.prototype,window.TextIconAppearance=extend(window.TextIconAppearance,window.IconAppearance),window.TextIconAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),context.beginPath(),context.moveTo(40.05,62.47),context.lineTo(20.34,62.47),context.lineTo(18.36,68.33),context.lineTo(20.34,68.33),context.bezierCurveTo(22.29,68.33,23.69,68.78,24.52,69.67),context.bezierCurveTo(25.35,70.56,25.76,71.73,25.76,73.17),context.bezierCurveTo(25.76,74.57,25.35,75.72,24.52,76.61),context.bezierCurveTo(23.69,77.5,22.29,77.95,20.34,77.95),context.lineTo(9.42,77.95),context.bezierCurveTo(7.47,77.95,6.08,77.5,5.25,76.61),context.bezierCurveTo(4.42,75.72,4,74.56,4,73.12),context.bezierCurveTo(4,71.68,4.44,70.51,5.31,69.6),context.bezierCurveTo(6.18,68.69,7.61,68.27,9.62,68.33),context.lineTo(22.36,30.71),context.lineTo(17.06,30.71),context.bezierCurveTo(15.11,30.71,13.71,30.27,12.88,29.38),context.bezierCurveTo(12.05,28.48,11.64,27.32,11.64,25.88),context.bezierCurveTo(11.64,24.44,12.05,23.28,12.88,22.39),context.bezierCurveTo(13.71,21.5,15.11,21.05,17.06,21.05),context.lineTo(34.59,21.1),context.lineTo(50.73,68.33),context.bezierCurveTo(52.63,68.33,53.89,68.58,54.49,69.08),context.bezierCurveTo(55.71,70.12,56.31,71.48,56.31,73.17),context.bezierCurveTo(56.31,74.57,55.9,75.72,55.09,76.61),context.bezierCurveTo(54.27,77.5,52.88,77.95,50.93,77.95),context.lineTo(40.01,77.95),context.bezierCurveTo(38.06,77.95,36.67,77.5,35.83,76.61),context.bezierCurveTo(35,75.72,34.59,74.56,34.59,73.12),context.bezierCurveTo(34.59,71.71,35,70.56,35.83,69.67),context.bezierCurveTo(36.67,68.78,38.06,68.33,40.01,68.33),context.lineTo(41.99,68.33),context.lineTo(40.05,62.47),context.closePath(),context.moveTo(36.69,52.85),context.lineTo(30.16,33.81),context.lineTo(23.59,52.85),context.lineTo(36.69,52.85),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(82.89,77.4),context.lineTo(82.89,75.21),context.bezierCurveTo(80.97,76.46,80.85,76.39,78.53,77.01),context.bezierCurveTo(76.2,77.64,74.1,77.95,72.2,77.95),context.bezierCurveTo(68.08,77.95,64.74,76.62,62.17,73.96),context.bezierCurveTo(59.6,71.3,58.31,68.35,58.31,65.13),context.bezierCurveTo(58.31,61.2,59.95,57.56,63.23,54.2),context.bezierCurveTo(66.52,50.84,69.05,50.16,74.84,50.16),context.bezierCurveTo(77.16,50.16,79.84,51.46,82.89,52.07),context.lineTo(82.89,49.83),context.bezierCurveTo(82.89,48.44,82.4,46.29,81.41,45.41),context.bezierCurveTo(80.42,44.53,78.55,43.09,75.78,43.09),context.bezierCurveTo(73.51,43.09,70.56,43.64,66.94,44.73),context.bezierCurveTo(65.6,45.13,64.55,45.32,63.8,45.32),context.bezierCurveTo(62.78,45.32,61.91,44.88,61.2,43.98),context.bezierCurveTo(60.49,43.08,60.13,41.93,60.13,40.53),context.bezierCurveTo(60.13,39.74,60.26,39.06,60.5,38.48),context.bezierCurveTo(60.75,37.9,61.1,37.44,61.55,37.09),context.bezierCurveTo(62,36.74,62.94,36.32,64.36,35.83),context.bezierCurveTo(66.26,35.2,68.19,34.69,70.16,34.31),context.bezierCurveTo(72.13,33.93,73.92,33.74,75.51,33.74),context.bezierCurveTo(80.28,33.74,83.98,35.99,86.61,38.5),context.bezierCurveTo(89.25,41.01,90.56,44.44,90.56,48.79),context.lineTo(90.56,68.04),context.lineTo(91.87,68.04),context.bezierCurveTo(93.72,68.04,95.03,68.48,95.82,69.34),context.bezierCurveTo(96.61,70.21,97,71.35,97,72.74),context.bezierCurveTo(97,74.11,96.61,75.23,95.82,76.1),context.bezierCurveTo(95.03,76.97,93.72,77.4,91.87,77.4),context.lineTo(82.89,77.4),context.closePath(),context.moveTo(82.89,59.65),context.bezierCurveTo(79.82,58.92,76.99,57.56,74.39,57.56),context.bezierCurveTo(71.27,57.56,70.59,58.49,68.34,60.34),context.bezierCurveTo(66.95,61.53,66.25,63.73,66.25,64.95),context.bezierCurveTo(66.25,65.83,67.58,68.54,68.26,69.09),context.bezierCurveTo(69.51,70.09,70.22,70.6,72.39,70.6),context.bezierCurveTo(74.23,70.6,76.32,70.15,78.66,69.27),context.bezierCurveTo(80.99,68.39,81.07,68.19,82.89,66.67),context.lineTo(82.89,59.65),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.TextIconWdgt=function(color){this.color=color,TextIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new TextIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TextIconWdgt,"name",{value:"TextIconWdgt"}),window.TextIconWdgt.instances=[],window.TextIconWdgt.__super__=window.IconMorph.prototype,window.TextIconWdgt=extend(window.TextIconWdgt,window.IconMorph),window.TextToolbarIconAppearance=function(morph){this.morph=morph,TextToolbarIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TextToolbarIconAppearance,"name",{value:"TextToolbarIconAppearance"}),window.TextToolbarIconAppearance.instances=[],window.TextToolbarIconAppearance.__super__=window.IconAppearance.prototype,window.TextToolbarIconAppearance=extend(window.TextToolbarIconAppearance,window.IconAppearance),window.TextToolbarIconAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),context.beginPath(),context.moveTo(83.25,10.1),context.lineTo(16.75,10.1),context.lineTo(14.03,30.23),context.lineTo(24.25,30.15),context.bezierCurveTo(24.25,24.65,30,18.9,35.5,18.9),context.lineTo(43,18.9),context.lineTo(43,76.4),context.bezierCurveTo(43,79.2,40.8,81.4,38,81.4),context.lineTo(31.75,82.65),context.lineTo(31.75,90.65),context.lineTo(68.25,90.65),context.lineTo(68.25,82.75),context.lineTo(62,81.5),context.bezierCurveTo(59.2,81.5,57,79.3,57,76.5),context.lineTo(57,19),context.lineTo(64.5,19),context.bezierCurveTo(70,19,75.75,24.75,75.75,30.25),context.lineTo(85.72,30.1),context.lineTo(83.25,10.1),context.closePath(),context.strokeStyle=iconColorString,context.lineWidth=3,context.miterLimit=4,context.lineJoin="round",context.stroke()},window.TextToolbarIconWdgt=function(color){this.color=color,TextToolbarIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new TextToolbarIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TextToolbarIconWdgt,"name",{value:"TextToolbarIconWdgt"}),window.TextToolbarIconWdgt.instances=[],window.TextToolbarIconWdgt.__super__=window.IconMorph.prototype,window.TextToolbarIconWdgt=extend(window.TextToolbarIconWdgt,window.IconMorph),window.ToolbarsIconAppearance=function(morph){this.morph=morph,ToolbarsIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ToolbarsIconAppearance,"name",{value:"ToolbarsIconAppearance"}),window.ToolbarsIconAppearance.instances=[],window.ToolbarsIconAppearance.__super__=window.IconAppearance.prototype,window.ToolbarsIconAppearance=extend(window.ToolbarsIconAppearance,window.IconAppearance),window.ToolbarsIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,"rgb(255, 255, 255)","rgb(170, 170, 170)",context.beginPath(),context.moveTo(41.5,6.5),context.lineTo(58.5,6.5),context.lineTo(58.5,28.5),context.bezierCurveTo(58.5,28.5,62.75,24,66.5,23.5),context.bezierCurveTo(70.25,23,75.5,29.5,75.5,26.5),context.bezierCurveTo(75.5,23.5,78.25,22,76.5,19.5),context.bezierCurveTo(74.75,17,70.25,18,68.5,16.5),context.bezierCurveTo(66.75,15,67.75,14.25,69.5,13.5),context.bezierCurveTo(71.25,12.75,72,10.25,75.5,13.5),context.bezierCurveTo(79,16.75,81.5,21.5,83.5,26.5),context.bezierCurveTo(85.5,31.5,83.5,33.5,83.5,33.5),context.lineTo(60.5,40.5),context.lineTo(76.5,84.5),context.lineTo(58.5,82.5),context.lineTo(58.5,92.5),context.lineTo(39.5,92.5),context.lineTo(39.5,82.5),context.lineTo(22.5,84.5),context.lineTo(37.5,40.5),context.lineTo(30.5,40.5),context.lineTo(15.5,33.5),context.bezierCurveTo(15.5,33.5,15.75,24.5,18.5,19.5),context.bezierCurveTo(21.25,14.5,23.5,14.25,26.5,13.5),context.bezierCurveTo(29.5,12.75,31.5,15,30.5,16.5),context.bezierCurveTo(29.5,18,24.5,17,22.5,19.5),context.bezierCurveTo(20.5,22,20.5,25.5,22.5,26.5),context.bezierCurveTo(24.5,27.5,26,23,30.5,23.5),context.bezierCurveTo(35,24,41.5,28.5,41.5,28.5),context.lineTo(41.5,6.5),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.strokeStyle=outlineColorString,context.lineWidth=7,context.stroke(),context.beginPath(),context.moveTo(38.85,36.81),context.lineTo(22.35,84.12),context.bezierCurveTo(22.35,84.12,28.76,82.81,38.85,82.22),context.lineTo(38.85,36.81),context.closePath(),context.moveTo(60.15,36.81),context.lineTo(60.15,82.22),context.bezierCurveTo(70.24,82.81,76.65,84.12,76.65,84.12),context.lineTo(60.15,36.81),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.rect(41.5,16.5,16,15),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.moveTo(46.42,21.12),context.lineTo(52.58,21.12),context.lineTo(52.58,26.88),context.lineTo(46.42,26.88),context.lineTo(46.42,21.12),context.closePath(),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.rect(41.5,7.5,16,9),context.fillStyle="rgb(170, 170, 170)",context.fill(),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.moveTo(43.96,12.16),context.lineTo(55.04,12.16),context.strokeStyle="rgb(255, 255, 255)",context.lineWidth=1,context.stroke(),context.beginPath(),context.rect(41.5,31.5,16,16),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.moveTo(46.42,36.42),context.lineTo(52.58,36.42),context.lineTo(52.58,42.58),context.lineTo(46.42,42.58),context.lineTo(46.42,36.42),context.closePath(),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.rect(41.5,47.5,16,15),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.moveTo(46.42,52.12),context.lineTo(52.58,52.12),context.lineTo(52.58,57.88),context.lineTo(46.42,57.88),context.lineTo(46.42,52.12),context.closePath(),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.rect(41.5,62.5,16,15),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.moveTo(46.42,67.12),context.lineTo(52.58,67.12),context.lineTo(52.58,72.88),context.lineTo(46.42,72.88),context.lineTo(46.42,67.12),context.closePath(),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.rect(41.5,77.5,16,15),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.moveTo(46.42,82.12),context.lineTo(52.58,82.12),context.lineTo(52.58,87.88),context.lineTo(46.42,87.88),context.lineTo(46.42,82.12),context.closePath(),context.strokeStyle=iconColorString,context.lineWidth=1,context.stroke(),context.beginPath(),context.moveTo(37.99,38.14),context.bezierCurveTo(36.88,38.4,35.77,38.4,34.83,38.4),context.bezierCurveTo(30.29,38.4,27.21,37.19,24.39,36.06),context.bezierCurveTo(21.91,35.11,15.67,33.9,15.58,33.29),context.bezierCurveTo(14.73,29.22,19.09,16.93,24.13,13.56),context.bezierCurveTo(25.93,12.35,27.81,12.35,29.35,13.47),context.bezierCurveTo(30.55,14.34,30.89,15.63,30.38,16.85),context.bezierCurveTo(29.78,18.32,23.98,19.44,22.1,19.7),context.bezierCurveTo(22.36,21.61,22.5,24.5,23.33,26.9),context.bezierCurveTo(25.38,25.6,29.78,22.91,32,23.51),context.bezierCurveTo(33.46,23.94,37.85,25.24,38.45,29.57),context.strokeStyle=iconColorString,context.lineWidth=3,context.miterLimit=4,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(60.96,38.14),context.bezierCurveTo(62.07,38.4,63.18,38.4,64.12,38.4),context.bezierCurveTo(68.66,38.4,71.73,37.19,74.56,36.06),context.bezierCurveTo(77.04,35.11,83.28,33.9,83.37,33.29),context.bezierCurveTo(84.22,29.22,79.86,16.93,74.81,13.56),context.bezierCurveTo(73.02,12.35,71.14,12.35,69.6,13.47),context.bezierCurveTo(68.4,14.34,68.06,15.63,68.57,16.85),context.bezierCurveTo(69.17,18.32,74.96,19.44,76.85,19.7),context.bezierCurveTo(76.59,21.61,76.45,24.5,75.62,26.9),context.bezierCurveTo(73.56,25.6,69.17,22.91,66.95,23.51),context.bezierCurveTo(65.49,23.94,61.1,25.24,60.5,29.57),context.strokeStyle=iconColorString,context.lineWidth=3,context.miterLimit=4,context.lineCap="round",context.stroke()},window.ToolbarsIconWdgt=function(color){this.color=color,ToolbarsIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new ToolbarsIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ToolbarsIconWdgt,"name",{value:"ToolbarsIconWdgt"}),window.ToolbarsIconWdgt.instances=[],window.ToolbarsIconWdgt.__super__=window.IconMorph.prototype,window.ToolbarsIconWdgt=extend(window.ToolbarsIconWdgt,window.IconMorph),window.ToothpasteIconAppearance=function(){window.ToothpasteIconAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ToothpasteIconAppearance,"name",{value:"ToothpasteIconAppearance"}),window.ToothpasteIconAppearance.instances=[],window.ToothpasteIconAppearance.__super__=window.IconAppearance.prototype,window.ToothpasteIconAppearance=extend(window.ToothpasteIconAppearance,window.IconAppearance),window.ToothpasteIconAppearance.prototype.paintFunction=function(context){var fillColor;return fillColor=this.morph.color,context.beginPath(),context.moveTo(181.43,78.29),context.bezierCurveTo(165.67,78.29,152.86,91.16,152.86,106.98),context.lineTo(152.86,119.03),context.bezierCurveTo(152.86,125.04,147.99,129.93,142,129.93),context.bezierCurveTo(136.01,129.93,131.14,125.04,131.14,119.03),context.lineTo(131.14,40.41),context.bezierCurveTo(131.14,19.53,114.22,2.54,93.43,2.54),context.lineTo(85.43,2.54),context.bezierCurveTo(64.63,2.54,47.71,19.53,47.71,40.41),context.lineTo(47.71,57.63),context.lineTo(54.57,57.63),context.lineTo(54.57,40.41),context.bezierCurveTo(54.57,23.33,68.41,9.43,85.43,9.43),context.lineTo(93.43,9.43),context.bezierCurveTo(110.44,9.43,124.29,23.33,124.29,40.41),context.lineTo(124.29,119.03),context.bezierCurveTo(124.29,128.84,132.23,136.82,142,136.82),context.bezierCurveTo(151.77,136.82,159.71,128.84,159.71,119.03),context.lineTo(159.71,106.98),context.bezierCurveTo(159.71,94.95,169.46,85.17,181.43,85.17),context.bezierCurveTo(184.58,85.17,187.14,87.75,187.14,90.91),context.bezierCurveTo(187.14,94.07,184.58,96.65,181.43,96.65),context.bezierCurveTo(175.76,96.65,171.14,101.28,171.14,106.98),context.lineTo(171.14,119.03),context.bezierCurveTo(171.14,135.16,158.07,148.29,142,148.29),context.bezierCurveTo(125.93,148.29,112.86,135.16,112.86,119.03),context.lineTo(112.86,40.41),context.bezierCurveTo(112.86,29.65,104.14,20.9,93.43,20.9),context.lineTo(85.43,20.9),context.bezierCurveTo(74.72,20.9,66,29.65,66,40.41),context.lineTo(66,57.63),context.lineTo(72.86,57.63),context.lineTo(72.86,40.41),context.bezierCurveTo(72.86,33.45,78.5,27.79,85.43,27.79),context.lineTo(93.43,27.79),context.bezierCurveTo(100.36,27.79,106,33.45,106,40.41),context.lineTo(106,119.03),context.bezierCurveTo(106,138.96,122.15,155.18,142,155.18),context.bezierCurveTo(161.85,155.18,178,138.96,178,119.03),context.lineTo(178,106.98),context.bezierCurveTo(178,105.08,179.54,103.53,181.43,103.53),context.bezierCurveTo(188.36,103.53,194,97.87,194,90.91),context.bezierCurveTo(194,83.95,188.36,78.29,181.43,78.29),context.closePath(),context.fillStyle=fillColor.toString(),context.fill(),context.beginPath(),context.moveTo(24.86,124.19),context.lineTo(95.72,124.19),context.lineTo(95.72,197.46),context.lineTo(102.57,197.46),context.lineTo(102.57,117.88),context.lineTo(99.44,111.09),context.lineTo(85.81,89.26),context.lineTo(82.76,84.37),context.lineTo(82.76,60.88),context.lineTo(37.81,60.88),context.lineTo(37.81,84.37),context.lineTo(32.28,93.21),context.lineTo(21.33,110.7),context.lineTo(18,117.88),context.lineTo(18,197.46),context.lineTo(24.86,197.46),context.lineTo(24.86,124.19),context.closePath(),context.moveTo(27.26,114.18),context.lineTo(40.38,93.21),context.lineTo(44.67,86.35),context.lineTo(44.67,67.76),context.lineTo(75.9,67.76),context.lineTo(75.91,86.35),context.lineTo(80.19,93.21),context.lineTo(93.31,114.18),context.lineTo(94.76,117.31),context.lineTo(25.82,117.31),context.lineTo(27.26,114.18),context.closePath(),context.fillStyle=fillColor.toString(),context.fill()},window.ToothpasteIconMorph=function(color){this.color=color,ToothpasteIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new ToothpasteIconAppearance(this),this.toolTipMessage="toothpaste","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ToothpasteIconMorph,"name",{value:"ToothpasteIconMorph"}),window.ToothpasteIconMorph.instances=[],window.ToothpasteIconMorph.__super__=window.IconMorph.prototype,window.ToothpasteIconMorph=extend(window.ToothpasteIconMorph,window.IconMorph),window.TypewriterIconAppearance=function(morph){this.morph=morph,TypewriterIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TypewriterIconAppearance,"name",{value:"TypewriterIconAppearance"}),window.TypewriterIconAppearance.instances=[],window.TypewriterIconAppearance.__super__=window.IconAppearance.prototype,window.TypewriterIconAppearance=extend(window.TypewriterIconAppearance,window.IconAppearance),window.TypewriterIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(90.79,34.25),context.lineTo(81.16,34.25),context.lineTo(81.16,5),context.lineTo(20.84,5),context.lineTo(20.84,34.25),context.lineTo(11.21,34.25),context.lineTo(11.21,38.03),context.lineTo(8,38.03),context.lineTo(8,55.4),context.lineTo(11.21,55.4),context.lineTo(11.21,59.33),context.lineTo(8.02,81.89),context.lineTo(8,95),context.lineTo(94,95),context.lineTo(94,82.14),context.lineTo(90.79,59.33),context.lineTo(90.79,55.4),context.lineTo(94,55.4),context.lineTo(94,38.03),context.lineTo(90.79,38.03),context.lineTo(90.79,34.25),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.rect(29.5,16.5,30,2),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.rect(29.5,22.5,43,2),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.rect(29.5,27.5,9.5,2),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.rect(29.5,33.5,21.5,2),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.rect(42.5,27.5,30,2),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.rect(63,16.5,9.5,2),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(88.69,36.17),context.lineTo(79.57,36.17),context.lineTo(79.57,7.75),context.lineTo(22.38,7.75),context.lineTo(22.38,36.17),context.lineTo(13.26,36.17),context.lineTo(13.26,39.72),context.lineTo(10.21,39.72),context.lineTo(10.21,53.22),context.lineTo(13.26,53.22),context.lineTo(13.26,58.79),context.lineTo(10.23,79.99),context.lineTo(10.21,92.3),context.lineTo(91.73,92.3),context.lineTo(91.73,80.22),context.lineTo(88.69,58.79),context.lineTo(88.69,53.22),context.lineTo(91.73,53.22),context.lineTo(91.73,39.72),context.lineTo(88.69,39.72),context.lineTo(88.69,36.17),context.closePath(),context.moveTo(77.13,10.59),context.lineTo(77.13,43.28),context.lineTo(62.39,43.28),context.lineTo(62.05,44.06),context.bezierCurveTo(62.03,44.12,59.25,50.38,50.97,50.38),context.bezierCurveTo(42.77,50.38,40.01,44.31,39.9,44.06),context.lineTo(39.56,43.28),context.lineTo(24.81,43.28),context.lineTo(24.81,10.59),context.lineTo(77.13,10.59),context.closePath(),context.moveTo(12.65,50.38),context.lineTo(12.65,42.56),context.lineTo(13.26,42.56),context.lineTo(13.26,50.38),context.lineTo(12.65,50.38),context.closePath(),context.moveTo(89.3,80.34),context.lineTo(89.3,89.46),context.lineTo(12.65,89.46),context.lineTo(12.65,80.34),context.lineTo(15.5,60.33),context.lineTo(86.46,60.33),context.lineTo(89.3,80.34),context.closePath(),context.moveTo(86.26,57.49),context.lineTo(15.69,57.49),context.lineTo(15.69,53.22),context.lineTo(15.69,39.72),context.lineTo(15.69,39.01),context.lineTo(22.38,39.01),context.lineTo(22.38,43.28),context.lineTo(20.56,43.28),context.lineTo(20.56,46.12),context.lineTo(38.12,46.12),context.bezierCurveTo(39.26,48.12,42.96,53.22,50.97,53.22),context.bezierCurveTo(58.99,53.22,62.68,48.12,63.83,46.12),context.lineTo(81.39,46.12),context.lineTo(81.39,43.28),context.lineTo(79.57,43.28),context.lineTo(79.57,39.01),context.lineTo(86.26,39.01),context.lineTo(86.26,39.72),context.lineTo(86.26,53.22),context.lineTo(86.26,57.49),context.closePath(),context.moveTo(89.3,42.56),context.lineTo(89.3,50.38),context.lineTo(88.69,50.38),context.lineTo(88.69,42.56),context.lineTo(89.3,42.56),context.closePath(),context.fillStyle=iconColorString,context.fill(),this.oval(context,20,76,6.5,6.5),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),this.oval(context,29,76,6.5,6.5),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),this.oval(context,20,66,6.5,6.5),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),this.oval(context,29,66,6.5,6.5),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),this.oval(context,38,66,6.5,6.5),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),this.oval(context,47,66,6.5,6.5),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),this.oval(context,56,66,6.5,6.5),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),this.oval(context,65,66,6.5,6.5),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),this.oval(context,74,66,6.5,6.5),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),this.oval(context,65,76,6.5,6.5),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),this.oval(context,74,76,6.5,6.5),context.strokeStyle=iconColorString,context.lineWidth=2.5,context.stroke(),context.beginPath(),context.moveTo(59.57,75),context.lineTo(41.03,75),context.bezierCurveTo(38.64,75,36.7,77.02,36.7,79.5),context.bezierCurveTo(36.7,81.98,38.64,84,41.03,84),context.lineTo(59.57,84),context.bezierCurveTo(61.96,84,63.9,81.98,63.9,79.5),context.bezierCurveTo(63.9,77.02,61.96,75,59.57,75),context.closePath(),context.moveTo(59.57,81.43),context.lineTo(41.03,81.43),context.bezierCurveTo(40,81.43,39.17,80.56,39.17,79.5),context.bezierCurveTo(39.17,78.44,40,77.57,41.03,77.57),context.lineTo(59.57,77.57),context.bezierCurveTo(60.6,77.57,61.43,78.44,61.43,79.5),context.bezierCurveTo(61.43,80.56,60.6,81.43,59.57,81.43),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.TypewriterIconWdgt=function(color){this.color=color,TypewriterIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new TypewriterIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.TypewriterIconWdgt,"name",{value:"TypewriterIconWdgt"}),window.TypewriterIconWdgt.instances=[],window.TypewriterIconWdgt.__super__=window.IconMorph.prototype,window.TypewriterIconWdgt=extend(window.TypewriterIconWdgt,window.IconMorph),window.UncollapseIconAppearance=function(){window.UncollapseIconAppearance.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.UncollapseIconAppearance,"name",{value:"UncollapseIconAppearance"}),window.UncollapseIconAppearance.instances=[],window.UncollapseIconAppearance.__super__=window.IconAppearance.prototype,window.UncollapseIconAppearance=extend(window.UncollapseIconAppearance,window.IconAppearance),window.UncollapseIconAppearance.prototype.paintFunction=function(context){var fillColor,strokeColor;return fillColor=this.morph.color,strokeColor=this.morph.color,context.beginPath(),context.moveTo(100.5,196.5),context.bezierCurveTo(153.91,196.5,197.5,152.91,197.5,99.5),context.bezierCurveTo(197.5,46.09,153.91,2.5,100.5,2.5),context.bezierCurveTo(47.09,2.5,3.5,46.09,3.5,99.5),context.bezierCurveTo(3.5,152.91,47.09,196.5,100.5,196.5),context.closePath(),context.moveTo(100.5,15.1),context.bezierCurveTo(147.11,15.1,184.9,52.89,184.9,99.5),context.bezierCurveTo(184.9,146.11,147.11,183.9,100.5,183.9),context.bezierCurveTo(53.89,183.9,16.1,146.11,16.1,99.5),context.bezierCurveTo(16.1,52.89,53.89,15.1,100.5,15.1),context.closePath(),context.fillStyle=fillColor.toString(),context.fill(),context.beginPath(),context.rect(65,65,65,21),context.closePath(),context.fill(),context.beginPath(),context.rect(65,65,65,65),context.closePath(),context.strokeStyle=strokeColor.toString(),context.lineWidth=10,context.stroke()},window.UncollapsedStateIconAppearance=function(morph){this.morph=morph,UncollapsedStateIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(400,400),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.UncollapsedStateIconAppearance,"name",{value:"UncollapsedStateIconAppearance"}),window.UncollapsedStateIconAppearance.instances=[],window.UncollapsedStateIconAppearance.__super__=window.IconAppearance.prototype,window.UncollapsedStateIconAppearance=extend(window.UncollapsedStateIconAppearance,window.IconAppearance),window.UncollapsedStateIconAppearance.prototype.paintFunction=function(context){return"rgb(51, 0, 0)",context.beginPath(),context.moveTo(45.5,137.5),context.lineTo(200.93,288.5),context.lineTo(362.5,133.5),context.miterLimit=30,context.strokeStyle="rgb(51, 0, 0)",context.lineWidth=30,context.stroke()},window.UncollapsedStateIconMorph=function(color){this.color=color,UncollapsedStateIconMorph.__super__.constructor.apply(this,arguments),this.appearance=new UncollapsedStateIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.UncollapsedStateIconMorph,"name",{value:"UncollapsedStateIconMorph"}),window.UncollapsedStateIconMorph.instances=[],window.UncollapsedStateIconMorph.__super__=window.IconMorph.prototype,window.UncollapsedStateIconMorph=extend(window.UncollapsedStateIconMorph,window.IconMorph),window.VaporwaveBackgroundIconAppearance=function(morph){this.morph=morph,VaporwaveBackgroundIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.VaporwaveBackgroundIconAppearance,"name",{value:"VaporwaveBackgroundIconAppearance"}),window.VaporwaveBackgroundIconAppearance.instances=[],window.VaporwaveBackgroundIconAppearance.__super__=window.IconAppearance.prototype,window.VaporwaveBackgroundIconAppearance=extend(window.VaporwaveBackgroundIconAppearance,window.IconAppearance),window.VaporwaveBackgroundIconAppearance.prototype.backgroundGradient=nil,window.VaporwaveBackgroundIconAppearance.prototype.paintFunction=function(context){var blue,colorStops,pink;return blue="rgb(0, 0, 159)","rgb(255, 255, 0)","rgb(0, 0, 82)",pink="rgb(255, 6, 136)",null==this.backgroundGradient&&(colorStops=function(g){return g.addColorStop(0,"rgb(0, 0, 82)"),g.addColorStop(.14,blue),g.addColorStop(.58,pink),g.addColorStop(1,"rgb(255, 255, 0)"),g},this.backgroundGradient=colorStops(context.createLinearGradient(50,91.61,50,-28.19))),context.beginPath(),context.rect(0,0,100,99.5),context.fillStyle=this.backgroundGradient,context.fill()},window.VaporwaveBackgroundIconWdgt=function(color){this.color=color,VaporwaveBackgroundIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new VaporwaveBackgroundIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.VaporwaveBackgroundIconWdgt,"name",{value:"VaporwaveBackgroundIconWdgt"}),window.VaporwaveBackgroundIconWdgt.instances=[],window.VaporwaveBackgroundIconWdgt.__super__=window.IconMorph.prototype,window.VaporwaveBackgroundIconWdgt=extend(window.VaporwaveBackgroundIconWdgt,window.IconMorph),window.VaporwaveSunIconAppearance=function(morph){this.morph=morph,VaporwaveSunIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.VaporwaveSunIconAppearance,"name",{value:"VaporwaveSunIconAppearance"}),window.VaporwaveSunIconAppearance.instances=[],window.VaporwaveSunIconAppearance.__super__=window.IconAppearance.prototype,window.VaporwaveSunIconAppearance=extend(window.VaporwaveSunIconAppearance,window.IconAppearance),window.VaporwaveSunIconAppearance.prototype.sunGradient=nil,window.VaporwaveSunIconAppearance.prototype.paintFunction=function(context){var blue,colorStops,pink;return blue="rgb(0, 0, 255)",pink="rgb(255, 0, 255)","rgb(255, 244, 6)",null==this.sunGradient&&(colorStops=function(g){return g.addColorStop(0,blue),g.addColorStop(.43,pink),g.addColorStop(1,"rgb(255, 244, 6)"),g},this.sunGradient=colorStops(context.createLinearGradient(50,83.39,50,5.13))),this.oval(context,2,2,96,96),context.fillStyle=this.sunGradient,context.fill()},window.VaporwaveSunIconWdgt=function(color){this.color=color,VaporwaveSunIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new VaporwaveSunIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.VaporwaveSunIconWdgt,"name",{value:"VaporwaveSunIconWdgt"}),window.VaporwaveSunIconWdgt.instances=[],window.VaporwaveSunIconWdgt.__super__=window.IconMorph.prototype,window.VaporwaveSunIconWdgt=extend(window.VaporwaveSunIconWdgt,window.IconMorph),window.VideoPlayIconAppearance=function(morph){this.morph=morph,VideoPlayIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.VideoPlayIconAppearance,"name",{value:"VideoPlayIconAppearance"}),window.VideoPlayIconAppearance.instances=[],window.VideoPlayIconAppearance.__super__=window.IconAppearance.prototype,window.VideoPlayIconAppearance=extend(window.VideoPlayIconAppearance,window.IconAppearance),window.VideoPlayIconAppearance.prototype.paintFunction=function(context){var red,white;return white="rgb(255, 255, 255)",red="rgb(255, 38, 0)",context.beginPath(),context.moveTo(90.5,.5),context.lineTo(9,.5),context.lineTo(9,.5),context.bezierCurveTo(0,.5,.5,0,.5,9),context.lineTo(.5,90.5),context.lineTo(.5,90.5),context.bezierCurveTo(.5,100,0,99.5,9,99.5),context.lineTo(90.5,99.5),context.lineTo(90.5,99.5),context.bezierCurveTo(100,99.5,99.5,100,99.5,90.5),context.lineTo(99.5,9),context.lineTo(99.5,9),context.bezierCurveTo(99.5,0,100,.5,90.5,.5),context.closePath(),context.fillStyle=red,context.fill(),context.beginPath(),context.moveTo(92.5,32.5),context.bezierCurveTo(92.5,32.5,91.5,26.5,89,24),context.bezierCurveTo(85.5,21,82,20.5,80,20.5),context.bezierCurveTo(68,19.5,50,19.5,50,19.5),context.lineTo(50,19.5),context.bezierCurveTo(50,19.5,31.5,19.5,19.5,20.5),context.bezierCurveTo(18,20.5,14,20.5,11,24),context.bezierCurveTo(8,26.5,7.5,32.5,7.5,32.5),context.bezierCurveTo(7.5,32.5,6.5,39.5,6.5,46),context.lineTo(6.5,53),context.bezierCurveTo(6.5,59.5,7.5,66.5,7.5,66.5),context.bezierCurveTo(7.5,66.5,8,72.5,11,75),context.bezierCurveTo(14,78,18.5,78,20.5,78.5),context.bezierCurveTo(27.5,79,50,79.5,50,79.5),context.bezierCurveTo(50,79.5,68,79.5,80,78.5),context.bezierCurveTo(82,78.5,85.5,78.5,89,75),context.bezierCurveTo(91.5,72.5,92.5,66.5,92.5,66.5),context.bezierCurveTo(92.5,66.5,93.5,59.5,93.5,53),context.lineTo(93.5,46.5),context.bezierCurveTo(93.5,39.5,92.5,32.5,92.5,32.5),context.closePath(),context.fillStyle=white,context.fill(),context.beginPath(),context.moveTo(41,60.5),context.lineTo(64.5,48.5),context.lineTo(41,36.5),context.lineTo(41,60.5),context.closePath(),context.fillStyle=red,context.fill()},window.VideoPlayIconWdgt=function(color){this.color=color,VideoPlayIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new VideoPlayIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.VideoPlayIconWdgt,"name",{value:"VideoPlayIconWdgt"}),window.VideoPlayIconWdgt.instances=[],window.VideoPlayIconWdgt.__super__=window.IconMorph.prototype,window.VideoPlayIconWdgt=extend(window.VideoPlayIconWdgt,window.IconMorph),window.WelcomeIconAppearance=function(morph){this.morph=morph,WelcomeIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WelcomeIconAppearance,"name",{value:"WelcomeIconAppearance"}),window.WelcomeIconAppearance.instances=[],window.WelcomeIconAppearance.__super__=window.IconAppearance.prototype,window.WelcomeIconAppearance=extend(window.WelcomeIconAppearance,window.IconAppearance),window.WelcomeIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(97.26,70.79),context.bezierCurveTo(97.19,70.22,82.93,34.78,82.93,34.78),context.lineTo(81.81,33.52),context.bezierCurveTo(81.67,31.89,80.85,30.39,79.54,29.37),context.lineTo(77.74,24.85),context.bezierCurveTo(76.55,21.85,75.44,20.19,74.35,19.78),context.bezierCurveTo(73.84,19.59,69.87,21.34,69.76,21.44),context.lineTo(69.36,20.02),context.bezierCurveTo(69.4,19.91,70.16,17.4,69.66,14.48),context.bezierCurveTo(69.19,11.74,66.5,8.12,61.07,6.49),context.bezierCurveTo(61.07,6.49,50.53,3.33,47.56,3.82),context.bezierCurveTo(44.78,4.28,41.11,5.95,39.45,11.3),context.lineTo(37.34,18.09),context.lineTo(34.31,17.18),context.bezierCurveTo(33.35,16.89,31.73,17.09,31.2,18.81),context.bezierCurveTo(31.2,18.81,29.54,23.97,29.64,24.6),context.bezierCurveTo(29.8,25.5,30.41,26.16,31.37,26.44),context.lineTo(62.16,36.71),context.bezierCurveTo(61.96,37,61.7,38.23,61.7,38.23),context.bezierCurveTo(61.68,38.32,68.27,39.64,69.68,39.9),context.lineTo(67.21,41.42),context.lineTo(75.41,63.47),context.lineTo(53.54,63.47),context.lineTo(46.44,72.61),context.lineTo(39.34,63.47),context.lineTo(30.44,63.62),context.bezierCurveTo(30.11,63.68,23.97,65.61,22.33,67.01),context.bezierCurveTo(20.81,68.31,19,73.62,19,77.34),context.lineTo(19,95.28),context.lineTo(74.87,95.28),context.lineTo(74.87,79.19),context.bezierCurveTo(74.87,79.19,90.58,79.14,90.65,79.13),context.bezierCurveTo(92.66,78.89,94.46,77.89,95.71,76.31),context.bezierCurveTo(96.96,74.74,97.51,72.77,97.26,70.79),context.closePath(),context.moveTo(69.38,32.39),context.lineTo(68.73,32.3),context.lineTo(69.43,29.94),context.bezierCurveTo(69.43,29.94,70.59,30.51,70.62,30.59),context.bezierCurveTo(70.63,30.61,69.47,32.37,69.38,32.39),context.closePath(),context.strokeStyle=outlineColorString,context.lineWidth=3.5,context.miterLimit=4,context.stroke(),this.oval(context,32,31,31,35),context.strokeStyle=outlineColorString,context.lineWidth=3.5,context.stroke(),context.beginPath(),context.moveTo(94.27,69.39),context.bezierCurveTo(94.2,68.86,81.04,35.74,81.04,35.74),context.lineTo(80,34.57),context.bezierCurveTo(79.87,33.04,79.11,31.64,77.9,30.69),context.lineTo(76.24,26.46),context.bezierCurveTo(75.14,23.66,74.11,22.11,73.11,21.73),context.bezierCurveTo(72.64,21.55,71.45,22.1,71.45,22.1),context.bezierCurveTo(70.95,22.35,70.75,22.82,70.79,23.26),context.bezierCurveTo(70.41,23.06,70.07,22.96,69.75,22.96),context.bezierCurveTo(69.25,22.95,68.97,23.18,68.87,23.28),context.bezierCurveTo(68.87,23.28,67.83,25.12,68.15,25.54),context.lineTo(68.92,26.53),context.bezierCurveTo(67.79,26.19,66.89,26.13,66.24,26.36),context.lineTo(67.59,21.94),context.bezierCurveTo(67.62,21.84,68.33,19.5,67.87,16.77),context.bezierCurveTo(67.43,14.21,65.86,10.83,60.85,9.3),context.bezierCurveTo(60.85,9.3,51.11,6.35,48.38,6.81),context.bezierCurveTo(45.8,7.24,42.41,8.8,40.88,13.8),context.lineTo(38.93,20.15),context.lineTo(36.14,19.29),context.bezierCurveTo(35.25,19.02,33.76,19.21,33.26,20.82),context.bezierCurveTo(33.26,20.82,32.64,22.87,32.74,23.45),context.bezierCurveTo(32.88,24.3,33.45,24.91,34.33,25.18),context.lineTo(62.77,33.85),context.bezierCurveTo(62.58,34.12,62.34,35.27,62.34,35.27),context.bezierCurveTo(62.32,35.36,62.27,35.82,62.45,36.35),context.bezierCurveTo(62.71,37.12,63.33,37.61,64.2,37.73),context.lineTo(70.07,38.55),context.bezierCurveTo(70.91,39.59,72.05,40.28,73.35,40.53),context.lineTo(71.08,41.95),context.lineTo(79.56,65.33),context.lineTo(53.9,65.33),context.lineTo(47.34,73.87),context.lineTo(40.78,65.33),context.lineTo(32.56,65.46),context.bezierCurveTo(32.26,65.52,26.59,67.32,25.08,68.63),context.bezierCurveTo(23.67,69.85,22,72.04,22,75.52),context.lineTo(22,92.28),context.lineTo(72.68,92.28),context.lineTo(72.68,77.24),context.bezierCurveTo(72.68,77.24,88.09,77.2,88.16,77.19),context.bezierCurveTo(90.02,76.96,91.68,76.02,92.83,74.55),context.bezierCurveTo(93.99,73.08,94.5,71.25,94.27,69.39),context.closePath(),context.moveTo(68.52,33.51),context.lineTo(67.92,33.42),context.lineTo(68.56,31.22),context.bezierCurveTo(68.56,31.22,69.63,31.76,69.66,31.83),context.bezierCurveTo(69.67,31.85,68.61,33.49,68.52,33.51),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.strokeStyle=iconColorString,context.lineWidth=3.5,context.miterLimit=4,context.stroke(),this.oval(context,35,34,26,29),context.fillStyle=outlineColorString,context.fill(),context.strokeStyle=iconColorString,context.lineWidth=3.5,context.stroke()},window.WelcomeIconWdgt=function(color){this.color=color,WelcomeIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new WelcomeIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WelcomeIconWdgt,"name",{value:"WelcomeIconWdgt"}),window.WelcomeIconWdgt.instances=[],window.WelcomeIconWdgt.__super__=window.IconMorph.prototype,window.WelcomeIconWdgt=extend(window.WelcomeIconWdgt,window.IconMorph),window.WidgetIconAppearance=function(morph){this.morph=morph,WidgetIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WidgetIconAppearance,"name",{value:"WidgetIconAppearance"}),window.WidgetIconAppearance.instances=[],window.WidgetIconAppearance.__super__=window.IconAppearance.prototype,window.WidgetIconAppearance=extend(window.WidgetIconAppearance,window.IconAppearance),window.WidgetIconAppearance.prototype.paintFunction=function(context){var iconColorString,outlineColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),outlineColorString=WorldMorph.preferencesAndSettings.outlineColorString,context.beginPath(),context.moveTo(75.84,2.66),context.bezierCurveTo(76.24,3.42,86.61,23.22,86.61,23.22),context.lineTo(97.42,43.78),context.bezierCurveTo(97.71,44.33,97.86,44.94,97.86,45.57),context.bezierCurveTo(97.86,47.55,96.4,49.15,94.61,49.16),context.bezierCurveTo(94.61,49.16,89.27,49.16,83.91,49.16),context.bezierCurveTo(91.29,50.22,97,56.61,97,64.27),context.lineTo(97,81.73),context.bezierCurveTo(97,90.13,90.13,97,81.73,97),context.lineTo(64.27,97),context.bezierCurveTo(56.14,97,49.44,90.56,49.02,82.53),context.bezierCurveTo(45.32,91.03,36.83,97,27,97),context.bezierCurveTo(13.78,97,3,86.22,3,73),context.bezierCurveTo(3,63.17,8.97,54.68,17.47,50.98),context.bezierCurveTo(9.44,50.56,3,43.86,3,35.73),context.lineTo(3,18.27),context.bezierCurveTo(3,9.87,9.87,3,18.27,3),context.lineTo(35.73,3),context.bezierCurveTo(44.13,3,51,9.87,51,18.27),context.lineTo(51,35.73),context.bezierCurveTo(51,37.54,50.68,39.28,50.1,40.89),context.bezierCurveTo(53.07,35.24,59.39,23.22,59.39,23.22),context.lineTo(70.15,2.69),context.lineTo(70.22,2.54),context.bezierCurveTo(70.78,1.55,71.75,.91,72.82,.84),context.bezierCurveTo(74.07,.77,75.24,1.48,75.84,2.66),context.closePath(),context.fillStyle=outlineColorString,context.fill(),context.beginPath(),context.moveTo(72.84,4.84),context.lineTo(72.85,4.84),context.bezierCurveTo(71.86,4.9,70.97,5.51,70.49,6.46),context.lineTo(61.03,24.44),context.lineTo(51.53,42.44),context.lineTo(51.53,42.45),context.bezierCurveTo(50.73,43.95,51.2,45.87,52.58,46.74),context.bezierCurveTo(53.01,47.01,53.51,47.16,54.01,47.16),context.lineTo(73,47.16),context.lineTo(92,47.16),context.lineTo(91.99,47.16),context.bezierCurveTo(93.57,47.16,94.86,45.75,94.86,44.02),context.bezierCurveTo(94.86,43.47,94.73,42.93,94.47,42.45),context.lineTo(84.97,24.44),context.lineTo(75.5,6.44),context.lineTo(75.51,6.46),context.bezierCurveTo(74.98,5.41,73.95,4.78,72.85,4.84),context.lineTo(72.84,4.84),context.closePath(),context.moveTo(19,5),context.bezierCurveTo(11.3,5,5,11.3,5,19),context.lineTo(5,35),context.bezierCurveTo(5,42.7,11.3,49,19,49),context.lineTo(35,49),context.bezierCurveTo(42.7,49,49,42.7,49,35),context.lineTo(49,19),context.bezierCurveTo(49,11.3,42.7,5,35,5),context.lineTo(19,5),context.closePath(),context.moveTo(19,11),context.lineTo(35,11),context.bezierCurveTo(39.48,11,43,14.52,43,19),context.lineTo(43,35),context.bezierCurveTo(43,39.48,39.48,43,35,43),context.lineTo(19,43),context.bezierCurveTo(14.52,43,11,39.48,11,35),context.lineTo(11,19),context.bezierCurveTo(11,14.52,14.52,11,19,11),context.closePath(),context.moveTo(73,14.28),context.lineTo(80.03,27.56),context.lineTo(87,40.84),context.lineTo(73,40.84),context.lineTo(59,40.84),context.lineTo(65.97,27.56),context.lineTo(73,14.28),context.closePath(),context.moveTo(27,51),context.bezierCurveTo(14.89,51,5,60.89,5,73),context.bezierCurveTo(5,85.11,14.89,95,27,95),context.bezierCurveTo(39.11,95,49,85.11,49,73),context.bezierCurveTo(49,60.89,39.11,51,27,51),context.closePath(),context.moveTo(65,51),context.bezierCurveTo(57.3,51,51,57.3,51,65),context.lineTo(51,81),context.bezierCurveTo(51,88.7,57.3,95,65,95),context.lineTo(81,95),context.bezierCurveTo(88.7,95,95,88.7,95,81),context.lineTo(95,65),context.bezierCurveTo(95,57.3,88.7,51,81,51),context.lineTo(65,51),context.closePath(),context.moveTo(27,57),context.bezierCurveTo(35.87,57,43,64.13,43,73),context.bezierCurveTo(43,81.87,35.87,89,27,89),context.bezierCurveTo(18.13,89,11,81.87,11,73),context.bezierCurveTo(11,64.13,18.13,57,27,57),context.closePath(),context.moveTo(65,57),context.lineTo(81,57),context.bezierCurveTo(85.48,57,89,60.52,89,65),context.lineTo(89,81),context.bezierCurveTo(89,85.48,85.48,89,81,89),context.lineTo(65,89),context.bezierCurveTo(60.52,89,57,85.48,57,81),context.lineTo(57,65),context.bezierCurveTo(57,60.52,60.52,57,65,57),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.WidgetIconWdgt=function(color){this.color=color,WidgetIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new WidgetIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WidgetIconWdgt,"name",{value:"WidgetIconWdgt"}),window.WidgetIconWdgt.instances=[],window.WidgetIconWdgt.__super__=window.IconMorph.prototype,window.WidgetIconWdgt=extend(window.WidgetIconWdgt,window.IconMorph),window.WindowWithCroppingPanelIconAppearance=function(morph){this.morph=morph,WindowWithCroppingPanelIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowWithCroppingPanelIconAppearance,"name",{value:"WindowWithCroppingPanelIconAppearance"}),window.WindowWithCroppingPanelIconAppearance.instances=[],window.WindowWithCroppingPanelIconAppearance.__super__=window.IconAppearance.prototype,window.WindowWithCroppingPanelIconAppearance=extend(window.WindowWithCroppingPanelIconAppearance,window.IconAppearance),window.WindowWithCroppingPanelIconAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),this.oval(context,11,11,6,6),context.fillStyle=iconColorString,context.fill(),this.oval(context,22,11,6,6),context.fillStyle=iconColorString,context.fill(),this.arc(context,-17,32,44,44,270,90,!0),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(5,24),context.lineTo(91,24),context.strokeStyle=iconColorString,context.lineWidth=4,context.stroke(),context.beginPath(),context.rect(4,4,88,88),context.strokeStyle=iconColorString,context.lineWidth=3.5,context.lineJoin="round",context.stroke()},window.WindowWithCroppingPanelIconWdgt=function(color){this.color=color,WindowWithCroppingPanelIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new WindowWithCroppingPanelIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowWithCroppingPanelIconWdgt,"name",{value:"WindowWithCroppingPanelIconWdgt"}),window.WindowWithCroppingPanelIconWdgt.instances=[],window.WindowWithCroppingPanelIconWdgt.__super__=window.IconMorph.prototype,window.WindowWithCroppingPanelIconWdgt=extend(window.WindowWithCroppingPanelIconWdgt,window.IconMorph),window.WindowWithScrollingPanelIconAppearance=function(morph){this.morph=morph,WindowWithScrollingPanelIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowWithScrollingPanelIconAppearance,"name",{value:"WindowWithScrollingPanelIconAppearance"}),window.WindowWithScrollingPanelIconAppearance.instances=[],window.WindowWithScrollingPanelIconAppearance.__super__=window.IconAppearance.prototype,window.WindowWithScrollingPanelIconAppearance=extend(window.WindowWithScrollingPanelIconAppearance,window.IconAppearance),window.WindowWithScrollingPanelIconAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),this.oval(context,11,11,6,6),context.fillStyle=iconColorString,context.fill(),this.oval(context,22,11,6,6),context.fillStyle=iconColorString,context.fill(),this.arc(context,-17,32,44,44,270,90,!0),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(28,82),context.lineTo(83,82),context.strokeStyle=iconColorString,context.lineWidth=4,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(82,33),context.lineTo(82,60),context.strokeStyle=iconColorString,context.lineWidth=4,context.lineCap="round",context.stroke(),context.beginPath(),context.moveTo(5,24),context.lineTo(91,24),context.strokeStyle=iconColorString,context.lineWidth=4,context.stroke(),context.beginPath(),context.rect(4,4,88,88),context.strokeStyle=iconColorString,context.lineWidth=3.5,context.lineJoin="round",context.stroke()},window.WindowWithScrollingPanelIconWdgt=function(color){this.color=color,WindowWithScrollingPanelIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new WindowWithScrollingPanelIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowWithScrollingPanelIconWdgt,"name",{value:"WindowWithScrollingPanelIconWdgt"}),window.WindowWithScrollingPanelIconWdgt.instances=[],window.WindowWithScrollingPanelIconWdgt.__super__=window.IconMorph.prototype,window.WindowWithScrollingPanelIconWdgt=extend(window.WindowWithScrollingPanelIconWdgt,window.IconMorph),window.WindowsToolbarIconAppearance=function(morph){this.morph=morph,WindowsToolbarIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowsToolbarIconAppearance,"name",{value:"WindowsToolbarIconAppearance"}),window.WindowsToolbarIconAppearance.instances=[],window.WindowsToolbarIconAppearance.__super__=window.IconAppearance.prototype,window.WindowsToolbarIconAppearance=extend(window.WindowsToolbarIconAppearance,window.IconAppearance),window.WindowsToolbarIconAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),this.oval(context,11,11,6,6),context.fillStyle=iconColorString,context.fill(),this.oval(context,22,11,6,6),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(5,24),context.lineTo(91,24),context.strokeStyle=iconColorString,context.lineWidth=4,context.stroke(),context.beginPath(),context.rect(4,4,88,88),context.strokeStyle=iconColorString,context.lineWidth=3.5,context.lineJoin="round",context.stroke()},window.WindowsToolbarIconWdgt=function(color){this.color=color,WindowsToolbarIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new WindowsToolbarIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.WindowsToolbarIconWdgt,"name",{value:"WindowsToolbarIconWdgt"}),window.WindowsToolbarIconWdgt.instances=[],window.WindowsToolbarIconWdgt.__super__=window.IconMorph.prototype,window.WindowsToolbarIconWdgt=extend(window.WindowsToolbarIconWdgt,window.IconMorph),window.SimpleUSAMapIconAppearance=function(morph){this.morph=morph,SimpleUSAMapIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(500,313),this.specificationSize=new Point(1e3,626),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleUSAMapIconAppearance,"name",{value:"SimpleUSAMapIconAppearance"}),window.SimpleUSAMapIconAppearance.instances=[],window.SimpleUSAMapIconAppearance.__super__=window.IconAppearance.prototype,window.SimpleUSAMapIconAppearance=extend(window.SimpleUSAMapIconAppearance,window.IconAppearance),window.SimpleUSAMapIconAppearance.prototype.paintFunction=function(context){var fillColorString;return fillColorString=this.morph.color.toString(),context.beginPath(),context.moveTo(967,167),context.lineTo(971,169),context.lineTo(972,175),context.lineTo(962,182),context.lineTo(954,184),context.lineTo(953,181),context.lineTo(949,179),context.lineTo(946,173),context.lineTo(938,175),context.lineTo(922,179),context.lineTo(910,182),context.lineTo(910,166),context.lineTo(923,163),context.lineTo(923,163),context.lineTo(923,163),context.lineTo(924,163),context.lineTo(924,163),context.lineTo(944,158),context.lineTo(945,155),context.lineTo(948,152),context.lineTo(949,152),context.lineTo(953,164),context.lineTo(962,175),context.lineTo(971,173),context.lineTo(967,167),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(953,184),context.lineTo(943,191),context.lineTo(943,188),context.lineTo(939,176),context.lineTo(945,174),context.lineTo(948,180),context.lineTo(952,182),context.lineTo(953,184),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(910,217),context.lineTo(909,210),context.lineTo(909,209),context.lineTo(909,209),context.lineTo(909,209),context.lineTo(909,209),context.lineTo(894,204),context.lineTo(894,203),context.lineTo(893,203),context.lineTo(892,203),context.lineTo(892,203),context.lineTo(890,202),context.lineTo(887,201),context.lineTo(885,199),context.lineTo(885,196),context.lineTo(882,194),context.lineTo(877,191),context.lineTo(853,196),context.lineTo(828,202),context.lineTo(801,207),context.lineTo(800,201),context.lineTo(813,184),context.lineTo(812,182),context.lineTo(812,182),context.lineTo(808,176),context.lineTo(816,172),context.lineTo(829,170),context.lineTo(844,169),context.lineTo(856,158),context.lineTo(852,149),context.lineTo(850,146),context.lineTo(863,126),context.lineTo(870,120),context.lineTo(894,114),context.lineTo(894,118),context.lineTo(895,121),context.lineTo(897,128),context.lineTo(898,132),context.lineTo(898,137),context.lineTo(901,143),context.lineTo(901,146),context.lineTo(902,148),context.lineTo(904,147),context.lineTo(908,166),context.lineTo(908,182),context.lineTo(908,182),context.lineTo(908,183),context.lineTo(908,183),context.lineTo(909,183),context.lineTo(912,201),context.lineTo(913,202),context.lineTo(910,205),context.lineTo(912,209),context.lineTo(913,209),context.lineTo(936,199),context.lineTo(941,202),context.lineTo(920,214),context.lineTo(910,217),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(900,254),context.lineTo(895,254),context.lineTo(889,249),context.lineTo(888,249),context.lineTo(887,246),context.lineTo(889,244),context.lineTo(892,241),context.lineTo(893,239),context.lineTo(896,235),context.lineTo(899,231),context.lineTo(891,226),context.lineTo(890,223),context.lineTo(888,223),context.lineTo(888,220),context.lineTo(889,217),context.lineTo(887,214),context.lineTo(890,212),context.lineTo(891,206),context.lineTo(893,205),context.lineTo(905,209),context.lineTo(907,210),context.lineTo(904,223),context.lineTo(909,223),context.lineTo(910,240),context.lineTo(902,259),context.lineTo(900,254),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(891,304),context.lineTo(894,288),context.lineTo(895,286),context.lineTo(897,285),context.lineTo(892,304),context.lineTo(891,304),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(820,446),context.lineTo(814,464),context.lineTo(812,478),context.lineTo(809,478),context.lineTo(804,477),context.lineTo(801,478),context.lineTo(802,487),context.lineTo(801,488),context.lineTo(799,485),context.lineTo(765,486),context.lineTo(744,488),context.lineTo(741,482),context.lineTo(739,479),context.lineTo(738,476),context.lineTo(738,473),context.lineTo(738,468),context.lineTo(736,464),context.lineTo(736,457),context.lineTo(739,452),context.lineTo(737,447),context.lineTo(733,440),context.lineTo(726,417),context.lineTo(717,389),context.lineTo(732,388),context.lineTo(742,386),context.lineTo(757,384),context.lineTo(764,383),context.lineTo(764,384),context.lineTo(761,390),context.lineTo(767,394),context.lineTo(771,394),context.lineTo(775,401),context.lineTo(778,405),context.lineTo(786,410),context.lineTo(788,412),context.lineTo(793,416),context.lineTo(796,421),context.lineTo(803,425),context.lineTo(806,430),context.lineTo(807,432),context.lineTo(807,434),context.lineTo(811,436),context.lineTo(814,440),context.lineTo(814,445),context.lineTo(817,445),context.lineTo(820,446),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(842,609),context.lineTo(837,599),context.lineTo(827,595),context.lineTo(813,576),context.lineTo(800,560),context.lineTo(796,549),context.lineTo(798,534),context.lineTo(791,521),context.lineTo(775,508),context.lineTo(761,501),context.lineTo(739,513),context.lineTo(734,508),context.lineTo(713,499),context.lineTo(691,504),context.lineTo(692,502),context.lineTo(692,496),context.lineTo(687,491),context.lineTo(687,490),context.lineTo(698,488),context.lineTo(740,483),context.lineTo(744,489),context.lineTo(765,487),context.lineTo(798,486),context.lineTo(801,491),context.lineTo(804,487),context.lineTo(803,479),context.lineTo(804,478),context.lineTo(809,479),context.lineTo(812,479),context.lineTo(818,495),context.lineTo(829,514),context.lineTo(841,530),context.lineTo(843,539),context.lineTo(856,562),context.lineTo(861,583),context.lineTo(860,604),context.lineTo(852,610),context.lineTo(842,609),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(689,504),context.lineTo(672,503),context.lineTo(668,467),context.lineTo(668,429),context.lineTo(669,398),context.lineTo(669,398),context.lineTo(668,394),context.lineTo(691,392),context.lineTo(716,390),context.lineTo(724,418),context.lineTo(732,441),context.lineTo(736,448),context.lineTo(738,452),context.lineTo(735,456),context.lineTo(735,464),context.lineTo(736,469),context.lineTo(736,473),context.lineTo(736,477),context.lineTo(738,480),context.lineTo(739,482),context.lineTo(698,486),context.lineTo(686,489),context.lineTo(686,492),context.lineTo(691,497),context.lineTo(690,501),context.lineTo(689,504),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(670,504),context.lineTo(659,510),context.lineTo(647,510),context.lineTo(647,508),context.lineTo(646,504),context.lineTo(643,502),context.lineTo(642,499),context.lineTo(643,495),context.lineTo(643,490),context.lineTo(623,491),context.lineTo(605,492),context.lineTo(604,487),context.lineTo(606,484),context.lineTo(608,478),context.lineTo(610,473),context.lineTo(613,469),context.lineTo(614,465),context.lineTo(617,462),context.lineTo(614,457),context.lineTo(615,454),context.lineTo(611,450),context.lineTo(613,446),context.lineTo(612,445),context.lineTo(612,440),context.lineTo(610,434),context.lineTo(610,429),context.lineTo(614,420),context.lineTo(615,415),context.lineTo(619,412),context.lineTo(621,410),context.lineTo(623,403),context.lineTo(623,403),context.lineTo(623,403),context.lineTo(623,400),context.lineTo(626,398),context.lineTo(627,397),context.lineTo(645,395),context.lineTo(666,394),context.lineTo(668,398),context.lineTo(667,429),context.lineTo(667,467),context.lineTo(670,504),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(624,537),context.lineTo(606,533),context.lineTo(593,529),context.lineTo(577,526),context.lineTo(559,526),context.lineTo(558,524),context.lineTo(560,520),context.lineTo(563,517),context.lineTo(563,512),context.lineTo(561,510),context.lineTo(563,505),context.lineTo(564,502),context.lineTo(566,493),context.lineTo(564,490),context.lineTo(561,484),context.lineTo(559,479),context.lineTo(558,475),context.lineTo(555,472),context.lineTo(553,448),context.lineTo(572,447),context.lineTo(594,446),context.lineTo(611,446),context.lineTo(611,446),context.lineTo(610,450),context.lineTo(613,455),context.lineTo(612,458),context.lineTo(615,461),context.lineTo(613,464),context.lineTo(612,468),context.lineTo(608,472),context.lineTo(607,478),context.lineTo(605,483),context.lineTo(603,486),context.lineTo(604,493),context.lineTo(623,493),context.lineTo(641,492),context.lineTo(641,495),context.lineTo(640,499),context.lineTo(642,502),context.lineTo(645,505),context.lineTo(645,509),context.lineTo(646,511),context.lineTo(644,521),context.lineTo(651,534),context.lineTo(624,537),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(558,526),context.lineTo(540,532),context.lineTo(521,550),context.lineTo(500,560),context.lineTo(488,572),context.lineTo(483,583),context.lineTo(482,600),context.lineTo(482,600),context.lineTo(483,612),context.lineTo(487,619),context.lineTo(480,620),context.lineTo(464,614),context.lineTo(448,606),context.lineTo(442,595),context.lineTo(438,577),context.lineTo(426,563),context.lineTo(419,549),context.lineTo(409,531),context.lineTo(395,521),context.lineTo(377,520),context.lineTo(362,538),context.lineTo(346,529),context.lineTo(336,521),context.lineTo(332,508),context.lineTo(326,495),context.lineTo(315,483),context.lineTo(306,474),context.lineTo(299,465),context.lineTo(297,461),context.lineTo(298,460),context.lineTo(315,462),context.lineTo(352,465),context.lineTo(371,467),context.lineTo(379,360),context.lineTo(398,361),context.lineTo(417,362),context.lineTo(436,363),context.lineTo(434,409),context.lineTo(439,412),context.lineTo(442,414),context.lineTo(447,413),context.lineTo(450,418),context.lineTo(457,420),context.lineTo(462,421),context.lineTo(471,421),context.lineTo(474,427),context.lineTo(480,425),context.lineTo(485,428),context.lineTo(491,430),context.lineTo(494,427),context.lineTo(497,431),context.lineTo(504,429),context.lineTo(507,431),context.lineTo(511,429),context.lineTo(514,428),context.lineTo(518,427),context.lineTo(525,428),context.lineTo(529,426),context.lineTo(535,428),context.lineTo(543,433),context.lineTo(544,435),context.lineTo(549,434),context.lineTo(552,434),context.lineTo(552,446),context.lineTo(552,446),context.lineTo(552,447),context.lineTo(552,448),context.lineTo(552,448),context.lineTo(553,473),context.lineTo(557,476),context.lineTo(560,485),context.lineTo(563,490),context.lineTo(564,493),context.lineTo(563,502),context.lineTo(561,504),context.lineTo(560,511),context.lineTo(561,512),context.lineTo(561,516),context.lineTo(558,520),context.lineTo(556,524),context.lineTo(556,524),context.lineTo(556,524),context.lineTo(558,526),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(297,464),context.lineTo(263,460),context.lineTo(261,470),context.lineTo(247,468),context.lineTo(266,335),context.lineTo(266,335),context.lineTo(266,335),context.lineTo(295,339),context.lineTo(324,343),context.lineTo(357,346),context.lineTo(379,348),context.lineTo(378,356),context.lineTo(378,359),context.lineTo(370,465),context.lineTo(352,464),context.lineTo(315,460),context.lineTo(296,458),context.lineTo(296,461),context.lineTo(297,464),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(89,400),context.lineTo(84,386),context.lineTo(66,367),context.lineTo(59,364),context.lineTo(52,354),context.lineTo(38,348),context.lineTo(34,344),context.lineTo(35,331),context.lineTo(24,302),context.lineTo(18,266),context.lineTo(20,261),context.lineTo(14,251),context.lineTo(7,228),context.lineTo(10,208),context.lineTo(5,193),context.lineTo(14,176),context.lineTo(20,157),context.lineTo(90,178),context.lineTo(72,246),context.lineTo(98,287),context.lineTo(124,325),context.lineTo(150,362),context.lineTo(149,364),context.lineTo(150,367),context.lineTo(151,371),context.lineTo(152,376),context.lineTo(155,381),context.lineTo(148,385),context.lineTo(144,395),context.lineTo(139,400),context.lineTo(140,404),context.lineTo(140,408),context.lineTo(142,412),context.lineTo(140,415),context.lineTo(137,415),context.lineTo(137,415),context.lineTo(112,412),context.lineTo(90,409),context.lineTo(89,400),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(55,59),context.lineTo(57,39),context.lineTo(61,17),context.lineTo(80,28),context.lineTo(82,49),context.lineTo(89,43),context.lineTo(92,23),context.lineTo(90,3),context.lineTo(135,15),context.lineTo(180,27),context.lineTo(173,56),context.lineTo(166,89),context.lineTo(167,93),context.lineTo(166,96),context.lineTo(133,88),context.lineTo(126,89),context.lineTo(123,87),context.lineTo(119,88),context.lineTo(112,89),context.lineTo(105,87),context.lineTo(105,87),context.lineTo(105,87),context.lineTo(101,88),context.lineTo(97,88),context.lineTo(95,86),context.lineTo(90,83),context.lineTo(85,83),context.lineTo(79,83),context.lineTo(75,82),context.lineTo(72,80),context.lineTo(72,77),context.lineTo(72,73),context.lineTo(71,68),context.lineTo(66,65),context.lineTo(63,61),context.lineTo(58,60),context.lineTo(55,59),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(527,66),context.lineTo(527,56),context.lineTo(531,56),context.lineTo(534,69),context.lineTo(540,73),context.lineTo(551,75),context.lineTo(568,78),context.lineTo(584,85),context.lineTo(597,81),context.lineTo(615,86),context.lineTo(600,94),context.lineTo(589,104),context.lineTo(578,115),context.lineTo(578,118),context.lineTo(574,120),context.lineTo(575,133),context.lineTo(567,139),context.lineTo(565,144),context.lineTo(568,148),context.lineTo(567,154),context.lineTo(567,160),context.lineTo(567,166),context.lineTo(573,171),context.lineTo(575,171),context.lineTo(580,174),context.lineTo(582,176),context.lineTo(583,178),context.lineTo(588,182),context.lineTo(594,185),context.lineTo(595,187),context.lineTo(595,192),context.lineTo(595,194),context.lineTo(573,195),context.lineTo(548,196),context.lineTo(524,197),context.lineTo(506,197),context.lineTo(506,175),context.lineTo(504,152),context.lineTo(501,150),context.lineTo(500,146),context.lineTo(501,144),context.lineTo(505,141),context.lineTo(505,138),context.lineTo(505,138),context.lineTo(505,137),context.lineTo(505,136),context.lineTo(505,136),context.lineTo(505,132),context.lineTo(504,129),context.lineTo(503,125),context.lineTo(502,120),context.lineTo(502,114),context.lineTo(501,113),context.lineTo(501,106),context.lineTo(501,103),context.lineTo(500,100),context.lineTo(499,95),context.lineTo(497,90),context.lineTo(496,86),context.lineTo(495,81),context.lineTo(495,77),context.lineTo(496,74),context.lineTo(496,71),context.lineTo(495,67),context.lineTo(494,66),context.lineTo(527,66),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(665,235),context.lineTo(666,235),context.lineTo(673,235),context.lineTo(677,231),context.lineTo(696,230),context.lineTo(712,228),context.lineTo(715,250),context.lineTo(719,289),context.lineTo(718,291),context.lineTo(720,295),context.lineTo(720,296),context.lineTo(717,297),context.lineTo(715,299),context.lineTo(710,299),context.lineTo(710,304),context.lineTo(707,306),context.lineTo(706,310),context.lineTo(703,311),context.lineTo(700,318),context.lineTo(697,317),context.lineTo(695,313),context.lineTo(691,319),context.lineTo(690,322),context.lineTo(686,319),context.lineTo(681,323),context.lineTo(680,324),context.lineTo(674,322),context.lineTo(670,325),context.lineTo(665,323),context.lineTo(665,326),context.lineTo(664,326),context.lineTo(664,322),context.lineTo(666,315),context.lineTo(669,310),context.lineTo(670,306),context.lineTo(672,304),context.lineTo(672,300),context.lineTo(670,296),context.lineTo(669,295),context.lineTo(670,288),context.lineTo(665,235),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(687,215),context.lineTo(685,199),context.lineTo(678,185),context.lineTo(678,175),context.lineTo(681,163),context.lineTo(684,155),context.lineTo(690,149),context.lineTo(692,156),context.lineTo(693,156),context.lineTo(695,144),context.lineTo(698,141),context.lineTo(699,132),context.lineTo(713,135),context.lineTo(726,142),context.lineTo(729,152),context.lineTo(729,163),context.lineTo(721,174),context.lineTo(723,181),context.lineTo(727,180),context.lineTo(736,169),context.lineTo(742,170),context.lineTo(747,183),context.lineTo(749,192),context.lineTo(743,206),context.lineTo(741,215),context.lineTo(736,224),context.lineTo(730,225),context.lineTo(722,226),context.lineTo(713,228),context.lineTo(713,226),context.lineTo(696,228),context.lineTo(679,230),context.lineTo(681,228),context.lineTo(687,215),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(643,98),context.lineTo(640,109),context.lineTo(650,112),context.lineTo(663,120),context.lineTo(677,113),context.lineTo(692,109),context.lineTo(697,115),context.lineTo(703,116),context.lineTo(703,113),context.lineTo(707,113),context.lineTo(706,115),context.lineTo(715,123),context.lineTo(702,127),context.lineTo(688,126),context.lineTo(675,132),context.lineTo(664,136),context.lineTo(656,151),context.lineTo(654,149),context.lineTo(655,145),context.lineTo(655,145),context.lineTo(655,145),context.lineTo(651,145),context.lineTo(651,142),context.lineTo(652,140),context.lineTo(652,140),context.lineTo(652,140),context.lineTo(650,136),context.lineTo(646,135),context.lineTo(645,131),context.lineTo(641,131),context.lineTo(636,131),context.lineTo(626,128),context.lineTo(612,124),context.lineTo(610,120),context.lineTo(609,120),context.lineTo(619,114),context.lineTo(631,106),context.lineTo(643,98),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(788,211),context.lineTo(799,202),context.lineTo(799,205),context.lineTo(800,208),context.lineTo(828,203),context.lineTo(853,198),context.lineTo(877,193),context.lineTo(881,195),context.lineTo(883,197),context.lineTo(883,199),context.lineTo(886,203),context.lineTo(889,204),context.lineTo(891,204),context.lineTo(890,205),context.lineTo(888,211),context.lineTo(886,214),context.lineTo(887,217),context.lineTo(886,220),context.lineTo(887,224),context.lineTo(889,225),context.lineTo(890,227),context.lineTo(897,231),context.lineTo(895,234),context.lineTo(892,238),context.lineTo(891,240),context.lineTo(888,242),context.lineTo(884,242),context.lineTo(882,244),context.lineTo(881,246),context.lineTo(866,249),context.lineTo(850,252),context.lineTo(838,255),context.lineTo(832,256),context.lineTo(815,259),context.lineTo(797,262),context.lineTo(793,241),context.lineTo(793,239),context.lineTo(788,211),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(846,261),context.lineTo(847,262),context.lineTo(848,263),context.lineTo(847,267),context.lineTo(837,262),context.lineTo(836,270),context.lineTo(835,272),context.lineTo(832,276),context.lineTo(830,279),context.lineTo(828,278),context.lineTo(825,286),context.lineTo(825,288),context.lineTo(823,289),context.lineTo(820,288),context.lineTo(817,286),context.lineTo(816,293),context.lineTo(813,297),context.lineTo(813,301),context.lineTo(810,304),context.lineTo(808,309),context.lineTo(808,309),context.lineTo(808,309),context.lineTo(808,309),context.lineTo(808,310),context.lineTo(809,312),context.lineTo(809,314),context.lineTo(807,316),context.lineTo(804,316),context.lineTo(802,318),context.lineTo(799,317),context.lineTo(799,317),context.lineTo(799,317),context.lineTo(799,320),context.lineTo(793,323),context.lineTo(791,322),context.lineTo(785,325),context.lineTo(782,324),context.lineTo(780,322),context.lineTo(779,319),context.lineTo(780,318),context.lineTo(779,318),context.lineTo(778,318),context.lineTo(778,318),context.lineTo(775,318),context.lineTo(773,316),context.lineTo(770,314),context.lineTo(768,310),context.lineTo(765,307),context.lineTo(765,302),context.lineTo(764,301),context.lineTo(769,299),context.lineTo(771,295),context.lineTo(770,290),context.lineTo(772,285),context.lineTo(773,285),context.lineTo(774,288),context.lineTo(777,286),context.lineTo(777,284),context.lineTo(777,279),context.lineTo(780,275),context.lineTo(782,275),context.lineTo(785,274),context.lineTo(787,273),context.lineTo(791,266),context.lineTo(791,264),context.lineTo(792,258),context.lineTo(793,252),context.lineTo(793,252),context.lineTo(793,252),context.lineTo(793,246),context.lineTo(791,244),context.lineTo(792,243),context.lineTo(796,264),context.lineTo(815,261),context.lineTo(817,273),context.lineTo(820,270),context.lineTo(823,267),context.lineTo(826,265),context.lineTo(828,262),context.lineTo(834,262),context.lineTo(835,260),context.lineTo(838,258),context.lineTo(844,258),context.lineTo(846,261),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(765,362),context.lineTo(762,364),context.lineTo(761,367),context.lineTo(757,369),context.lineTo(753,371),context.lineTo(748,372),context.lineTo(746,375),context.lineTo(745,378),context.lineTo(741,380),context.lineTo(741,385),context.lineTo(731,386),context.lineTo(716,388),context.lineTo(691,390),context.lineTo(667,393),context.lineTo(645,394),context.lineTo(628,395),context.lineTo(629,394),context.lineTo(628,387),context.lineTo(631,384),context.lineTo(631,380),context.lineTo(635,377),context.lineTo(636,374),context.lineTo(637,371),context.lineTo(638,366),context.lineTo(639,362),context.lineTo(639,360),context.lineTo(666,358),context.lineTo(666,355),context.lineTo(669,354),context.lineTo(669,355),context.lineTo(682,354),context.lineTo(703,352),context.lineTo(714,351),context.lineTo(720,350),context.lineTo(737,349),context.lineTo(749,347),context.lineTo(750,346),context.lineTo(778,343),context.lineTo(786,341),context.lineTo(786,344),context.lineTo(787,347),context.lineTo(784,348),context.lineTo(781,352),context.lineTo(778,352),context.lineTo(772,358),context.lineTo(770,356),context.lineTo(765,360),context.lineTo(765,362),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(622,399),context.lineTo(622,403),context.lineTo(620,409),context.lineTo(618,411),context.lineTo(614,414),context.lineTo(612,420),context.lineTo(608,428),context.lineTo(608,434),context.lineTo(611,440),context.lineTo(610,444),context.lineTo(594,444),context.lineTo(572,446),context.lineTo(553,446),context.lineTo(554,433),context.lineTo(553,433),context.lineTo(549,433),context.lineTo(545,433),context.lineTo(544,432),context.lineTo(545,411),context.lineTo(545,388),context.lineTo(540,364),context.lineTo(563,364),context.lineTo(584,363),context.lineTo(604,362),context.lineTo(626,362),context.lineTo(627,364),context.lineTo(624,369),context.lineTo(622,373),context.lineTo(635,372),context.lineTo(635,373),context.lineTo(633,376),context.lineTo(630,379),context.lineTo(630,383),context.lineTo(627,386),context.lineTo(627,393),context.lineTo(626,395),context.lineTo(625,395),context.lineTo(625,396),context.lineTo(624,397),context.lineTo(625,397),context.lineTo(625,397),context.lineTo(622,399),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(171,318),context.lineTo(170,318),context.lineTo(170,319),context.lineTo(170,319),context.lineTo(167,337),context.lineTo(166,337),context.lineTo(164,340),context.lineTo(163,339),context.lineTo(159,337),context.lineTo(155,336),context.lineTo(152,339),context.lineTo(153,343),context.lineTo(152,348),context.lineTo(152,352),context.lineTo(152,357),context.lineTo(150,360),context.lineTo(125,324),context.lineTo(99,286),context.lineTo(73,246),context.lineTo(92,178),context.lineTo(118,185),context.lineTo(142,191),context.lineTo(142,191),context.lineTo(143,191),context.lineTo(143,191),context.lineTo(143,191),context.lineTo(194,202),context.lineTo(171,317),context.lineTo(171,318),context.lineTo(171,318),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(257,152),context.lineTo(257,151),context.lineTo(259,140),context.lineTo(291,145),context.lineTo(318,149),context.lineTo(348,152),context.lineTo(375,155),context.lineTo(372,203),context.lineTo(369,239),context.lineTo(368,250),context.lineTo(350,248),context.lineTo(314,244),context.lineTo(296,242),context.lineTo(279,239),context.lineTo(244,233),context.lineTo(247,212),context.lineTo(247,212),context.lineTo(248,211),context.lineTo(248,210),context.lineTo(248,210),context.lineTo(257,152),context.lineTo(257,152),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(380,133),context.lineTo(411,136),context.lineTo(445,137),context.lineTo(472,138),context.lineTo(503,138),context.lineTo(503,140),context.lineTo(500,143),context.lineTo(498,146),context.lineTo(500,151),context.lineTo(503,152),context.lineTo(505,175),context.lineTo(505,197),context.lineTo(502,197),context.lineTo(502,203),context.lineTo(504,206),context.lineTo(504,209),context.lineTo(503,212),context.lineTo(502,217),context.lineTo(505,220),context.lineTo(505,221),context.lineTo(503,220),context.lineTo(501,220),context.lineTo(501,217),context.lineTo(496,215),context.lineTo(491,212),context.lineTo(484,212),context.lineTo(480,212),context.lineTo(479,213),context.lineTo(473,211),context.lineTo(468,208),context.lineTo(433,207),context.lineTo(406,205),context.lineTo(373,202),context.lineTo(374,192),context.lineTo(377,154),context.lineTo(379,142),context.lineTo(380,133),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(596,196),context.lineTo(596,197),context.lineTo(598,200),context.lineTo(597,202),context.lineTo(597,207),context.lineTo(598,209),context.lineTo(599,213),context.lineTo(605,215),context.lineTo(607,218),context.lineTo(607,218),context.lineTo(607,219),context.lineTo(607,219),context.lineTo(607,219),context.lineTo(608,221),context.lineTo(611,222),context.lineTo(612,224),context.lineTo(615,226),context.lineTo(616,228),context.lineTo(616,234),context.lineTo(613,239),context.lineTo(612,241),context.lineTo(608,242),context.lineTo(602,244),context.lineTo(600,249),context.lineTo(603,251),context.lineTo(603,254),context.lineTo(601,258),context.lineTo(600,261),context.lineTo(596,265),context.lineTo(596,269),context.lineTo(594,268),context.lineTo(591,264),context.lineTo(570,265),context.lineTo(550,266),context.lineTo(533,266),context.lineTo(518,266),context.lineTo(517,263),context.lineTo(517,258),context.lineTo(517,254),context.lineTo(515,247),context.lineTo(513,244),context.lineTo(512,243),context.lineTo(512,238),context.lineTo(511,234),context.lineTo(508,230),context.lineTo(508,228),context.lineTo(507,224),context.lineTo(506,221),context.lineTo(506,219),context.lineTo(503,216),context.lineTo(505,213),context.lineTo(506,209),context.lineTo(506,206),context.lineTo(504,203),context.lineTo(504,198),context.lineTo(524,198),context.lineTo(548,197),context.lineTo(573,196),context.lineTo(596,196),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(639,347),context.lineTo(641,346),context.lineTo(644,349),context.lineTo(644,351),context.lineTo(644,354),context.lineTo(642,356),context.lineTo(638,359),context.lineTo(638,359),context.lineTo(637,359),context.lineTo(636,361),context.lineTo(637,360),context.lineTo(637,362),context.lineTo(636,365),context.lineTo(635,371),context.lineTo(624,371),context.lineTo(625,370),context.lineTo(629,364),context.lineTo(627,361),context.lineTo(604,361),context.lineTo(584,362),context.lineTo(563,362),context.lineTo(540,362),context.lineTo(540,351),context.lineTo(540,351),context.lineTo(540,327),context.lineTo(540,301),context.lineTo(535,298),context.lineTo(533,294),context.lineTo(531,292),context.lineTo(534,287),context.lineTo(533,283),context.lineTo(530,283),context.lineTo(526,280),context.lineTo(524,275),context.lineTo(521,272),context.lineTo(518,269),context.lineTo(518,269),context.lineTo(518,268),context.lineTo(533,268),context.lineTo(550,267),context.lineTo(570,266),context.lineTo(590,265),context.lineTo(593,269),context.lineTo(596,270),context.lineTo(594,276),context.lineTo(596,283),context.lineTo(600,288),context.lineTo(604,292),context.lineTo(608,295),context.lineTo(610,296),context.lineTo(611,300),context.lineTo(612,304),context.lineTo(615,306),context.lineTo(618,304),context.lineTo(621,307),context.lineTo(621,311),context.lineTo(619,314),context.lineTo(618,319),context.lineTo(621,323),context.lineTo(625,326),context.lineTo(628,326),context.lineTo(633,331),context.lineTo(634,331),context.lineTo(636,337),context.lineTo(636,340),context.lineTo(639,347),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(435,350),context.lineTo(416,349),context.lineTo(399,348),context.lineTo(401,314),context.lineTo(403,278),context.lineTo(435,280),context.lineTo(458,281),context.lineTo(500,282),context.lineTo(525,282),context.lineTo(530,285),context.lineTo(532,285),context.lineTo(532,287),context.lineTo(530,292),context.lineTo(531,294),context.lineTo(534,300),context.lineTo(538,302),context.lineTo(539,327),context.lineTo(539,351),context.lineTo(523,352),context.lineTo(488,351),context.lineTo(454,351),context.lineTo(435,350),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(369,250),context.lineTo(370,240),context.lineTo(373,204),context.lineTo(406,206),context.lineTo(433,208),context.lineTo(468,209),context.lineTo(472,212),context.lineTo(479,215),context.lineTo(480,214),context.lineTo(484,214),context.lineTo(490,214),context.lineTo(495,217),context.lineTo(499,219),context.lineTo(500,220),context.lineTo(502,222),context.lineTo(505,222),context.lineTo(505,224),context.lineTo(506,228),context.lineTo(506,230),context.lineTo(510,235),context.lineTo(511,238),context.lineTo(511,244),context.lineTo(512,245),context.lineTo(513,248),context.lineTo(515,254),context.lineTo(516,258),context.lineTo(515,263),context.lineTo(516,267),context.lineTo(517,269),context.lineTo(520,273),context.lineTo(523,276),context.lineTo(524,280),context.lineTo(500,280),context.lineTo(458,279),context.lineTo(435,278),context.lineTo(403,276),context.lineTo(405,253),context.lineTo(369,250),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(172,318),context.lineTo(176,296),context.lineTo(195,202),context.lineTo(242,211),context.lineTo(246,212),context.lineTo(242,234),context.lineTo(278,241),context.lineTo(264,334),context.lineTo(238,329),context.lineTo(202,323),context.lineTo(172,318),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(266,334),context.lineTo(279,241),context.lineTo(296,243),context.lineTo(314,246),context.lineTo(350,250),context.lineTo(367,251),context.lineTo(367,251),context.lineTo(368,251),context.lineTo(369,251),context.lineTo(369,251),context.lineTo(403,254),context.lineTo(402,276),context.lineTo(400,314),context.lineTo(397,348),context.lineTo(393,348),context.lineTo(380,347),context.lineTo(357,345),context.lineTo(325,341),context.lineTo(295,338),context.lineTo(266,334),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(380,358),context.lineTo(380,353),context.lineTo(380,348),context.lineTo(384,348),context.lineTo(397,349),context.lineTo(397,349),context.lineTo(398,349),context.lineTo(399,349),context.lineTo(399,349),context.lineTo(416,351),context.lineTo(435,351),context.lineTo(454,352),context.lineTo(488,353),context.lineTo(523,353),context.lineTo(539,353),context.lineTo(539,361),context.lineTo(539,362),context.lineTo(539,362),context.lineTo(539,363),context.lineTo(539,364),context.lineTo(539,364),context.lineTo(543,388),context.lineTo(543,411),context.lineTo(543,431),context.lineTo(535,427),context.lineTo(529,425),context.lineTo(525,426),context.lineTo(518,426),context.lineTo(514,426),context.lineTo(510,428),context.lineTo(507,429),context.lineTo(504,428),context.lineTo(498,429),context.lineTo(494,425),context.lineTo(491,428),context.lineTo(486,427),context.lineTo(480,423),context.lineTo(475,425),context.lineTo(472,419),context.lineTo(463,420),context.lineTo(457,418),context.lineTo(451,417),context.lineTo(448,411),context.lineTo(442,413),context.lineTo(439,411),context.lineTo(435,408),context.lineTo(437,362),context.lineTo(417,361),context.lineTo(398,360),context.lineTo(380,358),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(646,348),context.lineTo(645,345),context.lineTo(645,343),context.lineTo(650,344),context.lineTo(655,346),context.lineTo(658,343),context.lineTo(657,338),context.lineTo(661,336),context.lineTo(665,334),context.lineTo(662,331),context.lineTo(664,328),context.lineTo(664,327),context.lineTo(666,328),context.lineTo(666,325),context.lineTo(671,326),context.lineTo(675,323),context.lineTo(681,326),context.lineTo(682,324),context.lineTo(686,321),context.lineTo(690,324),context.lineTo(693,320),context.lineTo(695,316),context.lineTo(696,318),context.lineTo(701,320),context.lineTo(704,312),context.lineTo(707,311),context.lineTo(709,307),context.lineTo(711,305),context.lineTo(711,300),context.lineTo(715,301),context.lineTo(718,298),context.lineTo(721,298),context.lineTo(722,295),context.lineTo(720,291),context.lineTo(720,290),context.lineTo(726,290),context.lineTo(730,292),context.lineTo(735,296),context.lineTo(739,298),context.lineTo(743,299),context.lineTo(747,298),context.lineTo(751,299),context.lineTo(755,297),context.lineTo(757,296),context.lineTo(759,299),context.lineTo(763,301),context.lineTo(763,302),context.lineTo(764,307),context.lineTo(767,311),context.lineTo(768,314),context.lineTo(772,317),context.lineTo(774,320),context.lineTo(777,320),context.lineTo(772,326),context.lineTo(771,327),context.lineTo(766,330),context.lineTo(766,330),context.lineTo(766,330),context.lineTo(765,333),context.lineTo(765,333),context.lineTo(764,335),context.lineTo(759,339),context.lineTo(758,341),context.lineTo(758,341),context.lineTo(754,343),context.lineTo(749,345),context.lineTo(736,348),context.lineTo(719,349),context.lineTo(714,350),context.lineTo(703,350),context.lineTo(681,352),context.lineTo(670,354),context.lineTo(669,353),context.lineTo(664,353),context.lineTo(665,357),context.lineTo(641,359),context.lineTo(643,357),context.lineTo(646,355),context.lineTo(645,351),context.lineTo(645,350),context.lineTo(646,348),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(580,119),context.lineTo(595,114),context.lineTo(606,121),context.lineTo(606,122),context.lineTo(607,121),context.lineTo(607,121),context.lineTo(609,121),context.lineTo(611,126),context.lineTo(626,129),context.lineTo(636,133),context.lineTo(636,133),context.lineTo(636,133),context.lineTo(641,132),context.lineTo(644,132),context.lineTo(645,136),context.lineTo(649,137),context.lineTo(650,140),context.lineTo(650,142),context.lineTo(649,147),context.lineTo(649,147),context.lineTo(649,147),context.lineTo(653,146),context.lineTo(652,150),context.lineTo(652,150),context.lineTo(652,150),context.lineTo(655,153),context.lineTo(649,162),context.lineTo(653,166),context.lineTo(664,149),context.lineTo(665,148),context.lineTo(658,166),context.lineTo(656,184),context.lineTo(654,197),context.lineTo(654,198),context.lineTo(657,209),context.lineTo(657,214),context.lineTo(657,214),context.lineTo(657,214),context.lineTo(644,215),context.lineTo(626,216),context.lineTo(608,218),context.lineTo(606,214),context.lineTo(601,212),context.lineTo(599,209),context.lineTo(599,207),context.lineTo(598,202),context.lineTo(600,200),context.lineTo(597,196),context.lineTo(596,192),context.lineTo(596,187),context.lineTo(595,184),context.lineTo(589,181),context.lineTo(585,177),context.lineTo(583,175),context.lineTo(581,173),context.lineTo(575,170),context.lineTo(573,170),context.lineTo(569,165),context.lineTo(569,161),context.lineTo(569,154),context.lineTo(570,148),context.lineTo(566,143),context.lineTo(568,140),context.lineTo(575,135),context.lineTo(576,135),context.lineTo(576,121),context.lineTo(580,119),context.lineTo(580,119),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(787,211),context.lineTo(792,241),context.lineTo(790,243),context.lineTo(791,246),context.lineTo(791,252),context.lineTo(790,258),context.lineTo(789,263),context.lineTo(790,266),context.lineTo(786,272),context.lineTo(784,273),context.lineTo(782,274),context.lineTo(779,274),context.lineTo(775,279),context.lineTo(775,284),context.lineTo(775,286),context.lineTo(775,286),context.lineTo(774,284),context.lineTo(771,284),context.lineTo(769,290),context.lineTo(769,295),context.lineTo(767,298),context.lineTo(764,299),context.lineTo(760,298),context.lineTo(758,294),context.lineTo(754,295),context.lineTo(750,297),context.lineTo(747,296),context.lineTo(743,298),context.lineTo(740,296),context.lineTo(736,295),context.lineTo(730,290),context.lineTo(727,288),context.lineTo(721,289),context.lineTo(716,250),context.lineTo(714,229),context.lineTo(722,228),context.lineTo(730,227),context.lineTo(736,226),context.lineTo(748,229),context.lineTo(757,229),context.lineTo(770,224),context.lineTo(779,216),context.lineTo(787,211),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(669,288),context.lineTo(667,295),context.lineTo(669,297),context.lineTo(670,301),context.lineTo(670,301),context.lineTo(670,303),context.lineTo(669,305),context.lineTo(668,309),context.lineTo(665,314),context.lineTo(663,321),context.lineTo(662,325),context.lineTo(662,325),context.lineTo(662,326),context.lineTo(662,327),context.lineTo(663,327),context.lineTo(663,328),context.lineTo(661,332),context.lineTo(662,333),context.lineTo(660,335),context.lineTo(655,338),context.lineTo(656,343),context.lineTo(655,344),context.lineTo(650,343),context.lineTo(645,342),context.lineTo(643,345),context.lineTo(643,346),context.lineTo(641,344),context.lineTo(640,345),context.lineTo(637,340),context.lineTo(638,336),context.lineTo(636,330),context.lineTo(633,330),context.lineTo(628,325),context.lineTo(626,325),context.lineTo(622,322),context.lineTo(620,319),context.lineTo(620,315),context.lineTo(622,311),context.lineTo(623,306),context.lineTo(618,302),context.lineTo(615,304),context.lineTo(613,303),context.lineTo(613,300),context.lineTo(611,295),context.lineTo(609,294),context.lineTo(605,291),context.lineTo(601,287),context.lineTo(598,283),context.lineTo(596,276),context.lineTo(597,271),context.lineTo(597,271),context.lineTo(597,270),context.lineTo(597,270),context.lineTo(597,270),context.lineTo(597,266),context.lineTo(602,262),context.lineTo(603,258),context.lineTo(605,254),context.lineTo(604,250),context.lineTo(602,248),context.lineTo(603,245),context.lineTo(609,244),context.lineTo(613,242),context.lineTo(614,240),context.lineTo(617,234),context.lineTo(618,227),context.lineTo(616,225),context.lineTo(613,223),context.lineTo(612,221),context.lineTo(609,219),context.lineTo(609,219),context.lineTo(609,219),context.lineTo(626,218),context.lineTo(644,217),context.lineTo(657,216),context.lineTo(658,221),context.lineTo(664,233),context.lineTo(669,288),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(493,66),context.lineTo(493,67),context.lineTo(495,71),context.lineTo(494,73),context.lineTo(494,77),context.lineTo(494,81),context.lineTo(494,86),context.lineTo(496,91),context.lineTo(498,95),context.lineTo(499,100),context.lineTo(499,103),context.lineTo(499,106),context.lineTo(500,113),context.lineTo(500,115),context.lineTo(500,120),context.lineTo(501,125),context.lineTo(503,129),context.lineTo(504,133),context.lineTo(504,136),context.lineTo(472,137),context.lineTo(445,136),context.lineTo(411,134),context.lineTo(380,132),context.lineTo(381,103),context.lineTo(385,60),context.lineTo(439,64),context.lineTo(493,66),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(380,103),context.lineTo(378,132),context.lineTo(378,135),context.lineTo(376,154),context.lineTo(348,151),context.lineTo(318,147),context.lineTo(292,143),context.lineTo(258,138),context.lineTo(256,151),context.lineTo(255,150),context.lineTo(254,146),context.lineTo(251,145),context.lineTo(248,149),context.lineTo(245,149),context.lineTo(235,146),context.lineTo(234,148),context.lineTo(229,146),context.lineTo(226,149),context.lineTo(224,143),context.lineTo(223,139),context.lineTo(219,138),context.lineTo(219,136),context.lineTo(219,130),context.lineTo(216,126),context.lineTo(216,119),context.lineTo(215,114),context.lineTo(212,113),context.lineTo(209,116),context.lineTo(206,118),context.lineTo(204,116),context.lineTo(205,110),context.lineTo(208,109),context.lineTo(207,103),context.lineTo(210,97),context.lineTo(214,91),context.lineTo(208,90),context.lineTo(205,86),context.lineTo(202,78),context.lineTo(200,73),context.lineTo(197,70),context.lineTo(195,66),context.lineTo(196,62),context.lineTo(193,55),context.lineTo(197,31),context.lineTo(243,40),context.lineTo(290,48),context.lineTo(337,55),context.lineTo(384,60),context.lineTo(380,103),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(191,55),context.lineTo(194,62),context.lineTo(193,66),context.lineTo(195,71),context.lineTo(199,74),context.lineTo(200,78),context.lineTo(203,87),context.lineTo(207,91),context.lineTo(211,92),context.lineTo(209,96),context.lineTo(206,102),context.lineTo(206,102),context.lineTo(206,108),context.lineTo(204,110),context.lineTo(203,116),context.lineTo(206,120),context.lineTo(210,117),context.lineTo(212,115),context.lineTo(213,115),context.lineTo(215,119),context.lineTo(215,127),context.lineTo(217,130),context.lineTo(217,136),context.lineTo(218,139),context.lineTo(221,140),context.lineTo(223,143),context.lineTo(225,151),context.lineTo(229,148),context.lineTo(235,150),context.lineTo(236,148),context.lineTo(244,151),context.lineTo(249,151),context.lineTo(252,147),context.lineTo(253,147),context.lineTo(254,151),context.lineTo(255,152),context.lineTo(255,152),context.lineTo(256,152),context.lineTo(256,153),context.lineTo(246,210),context.lineTo(195,201),context.lineTo(175,196),context.lineTo(143,189),context.lineTo(153,149),context.lineTo(156,142),context.lineTo(156,138),context.lineTo(153,136),context.lineTo(154,133),context.lineTo(157,128),context.lineTo(162,125),context.lineTo(166,118),context.lineTo(170,112),context.lineTo(172,109),context.lineTo(172,105),context.lineTo(170,102),context.lineTo(167,97),context.lineTo(168,93),context.lineTo(168,89),context.lineTo(175,57),context.lineTo(182,27),context.lineTo(195,30),context.lineTo(191,55),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(55,61),context.lineTo(57,61),context.lineTo(62,63),context.lineTo(65,66),context.lineTo(69,69),context.lineTo(71,73),context.lineTo(70,77),context.lineTo(70,81),context.lineTo(74,84),context.lineTo(78,85),context.lineTo(85,84),context.lineTo(89,84),context.lineTo(94,87),context.lineTo(97,89),context.lineTo(101,89),context.lineTo(105,88),context.lineTo(112,91),context.lineTo(119,90),context.lineTo(122,89),context.lineTo(126,91),context.lineTo(133,90),context.lineTo(166,98),context.lineTo(168,103),context.lineTo(171,106),context.lineTo(171,109),context.lineTo(169,111),context.lineTo(165,117),context.lineTo(161,124),context.lineTo(156,127),context.lineTo(152,132),context.lineTo(151,137),context.lineTo(154,139),context.lineTo(155,142),context.lineTo(152,148),context.lineTo(152,148),context.lineTo(152,148),context.lineTo(142,189),context.lineTo(91,177),context.lineTo(20,155),context.lineTo(19,142),context.lineTo(32,119),context.lineTo(41,94),context.lineTo(55,61),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(138,417),context.lineTo(140,417),context.lineTo(144,412),context.lineTo(141,408),context.lineTo(141,404),context.lineTo(141,400),context.lineTo(146,396),context.lineTo(149,386),context.lineTo(157,382),context.lineTo(154,376),context.lineTo(152,371),context.lineTo(151,367),context.lineTo(151,364),context.lineTo(151,362),context.lineTo(153,357),context.lineTo(153,352),context.lineTo(154,348),context.lineTo(155,343),context.lineTo(154,339),context.lineTo(155,337),context.lineTo(159,338),context.lineTo(162,340),context.lineTo(165,342),context.lineTo(167,338),context.lineTo(168,338),context.lineTo(172,319),context.lineTo(201,325),context.lineTo(238,331),context.lineTo(264,335),context.lineTo(245,468),context.lineTo(206,461),context.lineTo(163,437),context.lineTo(136,420),context.lineTo(138,417),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(820,445),context.lineTo(817,444),context.lineTo(816,444),context.lineTo(815,439),context.lineTo(812,435),context.lineTo(808,433),context.lineTo(809,432),context.lineTo(807,429),context.lineTo(805,424),context.lineTo(797,420),context.lineTo(794,414),context.lineTo(789,411),context.lineTo(787,409),context.lineTo(779,404),context.lineTo(776,400),context.lineTo(772,393),context.lineTo(768,392),context.lineTo(763,389),context.lineTo(765,385),context.lineTo(767,383),context.lineTo(768,382),context.lineTo(778,377),context.lineTo(796,374),context.lineTo(804,374),context.lineTo(805,377),context.lineTo(807,374),context.lineTo(810,377),context.lineTo(811,380),context.lineTo(833,377),context.lineTo(858,394),context.lineTo(853,412),context.lineTo(839,429),context.lineTo(820,445),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(859,393),context.lineTo(833,375),context.lineTo(812,379),context.lineTo(811,376),context.lineTo(807,372),context.lineTo(806,373),context.lineTo(805,372),context.lineTo(796,373),context.lineTo(778,375),context.lineTo(768,381),context.lineTo(766,382),context.lineTo(756,383),context.lineTo(743,385),context.lineTo(742,381),context.lineTo(746,379),context.lineTo(747,376),context.lineTo(749,373),context.lineTo(753,372),context.lineTo(757,370),context.lineTo(762,368),context.lineTo(763,365),context.lineTo(767,363),context.lineTo(767,361),context.lineTo(770,358),context.lineTo(772,360),context.lineTo(779,354),context.lineTo(782,354),context.lineTo(785,349),context.lineTo(789,347),context.lineTo(788,344),context.lineTo(788,341),context.lineTo(791,341),context.lineTo(819,337),context.lineTo(857,330),context.lineTo(877,326),context.lineTo(896,321),context.lineTo(904,343),context.lineTo(896,363),context.lineTo(879,375),context.lineTo(865,391),context.lineTo(859,393),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(877,324),context.lineTo(857,328),context.lineTo(819,335),context.lineTo(795,339),context.lineTo(788,340),context.lineTo(788,340),context.lineTo(787,340),context.lineTo(786,340),context.lineTo(786,340),context.lineTo(778,342),context.lineTo(755,344),context.lineTo(755,344),context.lineTo(759,342),context.lineTo(759,342),context.lineTo(759,342),context.lineTo(759,341),context.lineTo(760,340),context.lineTo(765,336),context.lineTo(766,334),context.lineTo(767,333),context.lineTo(767,331),context.lineTo(772,328),context.lineTo(772,328),context.lineTo(772,328),context.lineTo(774,325),context.lineTo(778,321),context.lineTo(779,323),context.lineTo(782,325),context.lineTo(785,327),context.lineTo(791,323),context.lineTo(793,324),context.lineTo(801,321),context.lineTo(801,321),context.lineTo(801,321),context.lineTo(801,319),context.lineTo(802,320),context.lineTo(805,317),context.lineTo(807,317),context.lineTo(810,315),context.lineTo(810,315),context.lineTo(810,315),context.lineTo(810,312),context.lineTo(810,309),context.lineTo(811,305),context.lineTo(814,302),context.lineTo(814,301),context.lineTo(815,298),context.lineTo(817,293),context.lineTo(818,288),context.lineTo(820,289),context.lineTo(820,289),context.lineTo(823,291),context.lineTo(823,291),context.lineTo(823,291),context.lineTo(826,289),context.lineTo(826,289),context.lineTo(826,289),context.lineTo(827,286),context.lineTo(829,280),context.lineTo(830,281),context.lineTo(833,277),context.lineTo(836,273),context.lineTo(838,270),context.lineTo(838,265),context.lineTo(848,269),context.lineTo(849,264),context.lineTo(852,264),context.lineTo(854,265),context.lineTo(853,268),context.lineTo(858,269),context.lineTo(861,271),context.lineTo(863,272),context.lineTo(863,273),context.lineTo(863,275),context.lineTo(861,277),context.lineTo(860,281),context.lineTo(859,284),context.lineTo(859,284),context.lineTo(859,284),context.lineTo(860,284),context.lineTo(863,285),context.lineTo(866,284),context.lineTo(867,286),context.lineTo(867,286),context.lineTo(867,286),context.lineTo(867,286),context.lineTo(867,286),context.lineTo(881,297),context.lineTo(887,307),context.lineTo(896,320),context.lineTo(877,324),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(890,275),context.lineTo(883,246),context.lineTo(883,245),context.lineTo(884,243),context.lineTo(887,244),context.lineTo(885,246),context.lineTo(887,251),context.lineTo(887,251),context.lineTo(887,251),context.lineTo(887,251),context.lineTo(894,262),context.lineTo(901,272),context.lineTo(890,275),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(895,114),context.lineTo(924,106),context.lineTo(924,112),context.lineTo(926,115),context.lineTo(926,118),context.lineTo(923,121),context.lineTo(920,124),context.lineTo(920,126),context.lineTo(921,130),context.lineTo(920,136),context.lineTo(919,138),context.lineTo(919,144),context.lineTo(920,149),context.lineTo(920,151),context.lineTo(921,157),context.lineTo(920,161),context.lineTo(921,162),context.lineTo(909,165),context.lineTo(905,146),context.lineTo(902,146),context.lineTo(902,146),context.lineTo(903,142),context.lineTo(900,137),context.lineTo(900,131),context.lineTo(898,128),context.lineTo(896,121),context.lineTo(896,118),context.lineTo(895,114),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(913,207),context.lineTo(912,205),context.lineTo(916,202),context.lineTo(913,200),context.lineTo(910,183),context.lineTo(923,180),context.lineTo(938,177),context.lineTo(941,188),context.lineTo(941,192),context.lineTo(934,195),context.lineTo(925,198),context.lineTo(913,207),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(949,151),context.lineTo(947,151),context.lineTo(944,154),context.lineTo(943,156),context.lineTo(923,162),context.lineTo(922,160),context.lineTo(922,157),context.lineTo(921,151),context.lineTo(921,149),context.lineTo(920,144),context.lineTo(921,139),context.lineTo(922,136),context.lineTo(922,130),context.lineTo(922,126),context.lineTo(922,124),context.lineTo(924,123),context.lineTo(927,118),context.lineTo(927,115),context.lineTo(925,112),context.lineTo(925,105),context.lineTo(925,105),context.lineTo(925,105),context.lineTo(925,100),context.lineTo(929,98),context.lineTo(943,138),context.lineTo(943,141),context.lineTo(947,144),context.lineTo(949,147),context.lineTo(949,147),context.lineTo(949,147),context.lineTo(950,147),context.lineTo(950,147),context.lineTo(949,151),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(931,97),context.lineTo(936,91),context.lineTo(939,79),context.lineTo(938,60),context.lineTo(945,40),context.lineTo(952,44),context.lineTo(961,37),context.lineTo(969,41),context.lineTo(979,72),context.lineTo(994,81),context.lineTo(997,90),context.lineTo(984,102),context.lineTo(970,113),context.lineTo(955,132),context.lineTo(951,145),context.lineTo(950,145),context.lineTo(948,143),context.lineTo(945,140),context.lineTo(945,138),context.lineTo(931,97),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(898,284),context.lineTo(894,285),context.lineTo(894,285),context.lineTo(894,285),context.lineTo(894,285),context.lineTo(893,285),context.lineTo(893,286),context.lineTo(882,278),context.lineTo(877,261),context.lineTo(876,261),context.lineTo(875,270),context.lineTo(879,289),context.lineTo(868,285),context.lineTo(866,282),context.lineTo(863,283),context.lineTo(861,283),context.lineTo(862,281),context.lineTo(862,278),context.lineTo(862,278),context.lineTo(865,275),context.lineTo(865,273),context.lineTo(867,270),context.lineTo(863,267),context.lineTo(862,269),context.lineTo(858,267),context.lineTo(855,267),context.lineTo(855,265),context.lineTo(855,264),context.lineTo(855,264),context.lineTo(852,263),context.lineTo(849,262),context.lineTo(847,260),context.lineTo(844,257),context.lineTo(839,256),context.lineTo(851,254),context.lineTo(866,251),context.lineTo(881,247),context.lineTo(889,276),context.lineTo(902,274),context.lineTo(903,275),context.lineTo(898,284),context.closePath(),context.moveTo(837,257),context.lineTo(834,259),context.lineTo(833,261),context.lineTo(827,261),context.lineTo(825,264),context.lineTo(822,265),context.lineTo(819,269),context.lineTo(818,270),context.lineTo(816,261),context.lineTo(832,258),context.lineTo(837,257),context.closePath(),context.fillStyle=fillColorString,context.fill()},window.SimpleUSAMapIconWdgt=function(color){this.color=color,SimpleUSAMapIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new SimpleUSAMapIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleUSAMapIconWdgt,"name",{value:"SimpleUSAMapIconWdgt"}),window.SimpleUSAMapIconWdgt.instances=[],window.SimpleUSAMapIconWdgt.__super__=window.IconMorph.prototype,window.SimpleUSAMapIconWdgt=extend(window.SimpleUSAMapIconWdgt,window.IconMorph),window.SimpleWorldMapIconAppearance=function(morph){this.morph=morph,SimpleWorldMapIconAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(500,265),this.specificationSize=new Point(1e3,530),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleWorldMapIconAppearance,"name",{value:"SimpleWorldMapIconAppearance"}),window.SimpleWorldMapIconAppearance.instances=[],window.SimpleWorldMapIconAppearance.__super__=window.IconAppearance.prototype,window.SimpleWorldMapIconAppearance=extend(window.SimpleWorldMapIconAppearance,window.IconAppearance),window.SimpleWorldMapIconAppearance.prototype.paintFunction=function(context){var fillColor,fillColorString;return fillColor=this.morph.color,fillColorString=fillColor.toString(),context.beginPath(),context.moveTo(732,22),context.lineTo(738,20),context.lineTo(762,33),context.lineTo(748,35),context.lineTo(728,29),context.lineTo(732,22),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(525,21),context.lineTo(542,23),context.lineTo(544,28),context.lineTo(528,31),context.lineTo(537,42),context.lineTo(528,42),context.lineTo(525,36),context.lineTo(520,42),context.lineTo(509,42),context.lineTo(508,35),context.lineTo(503,30),context.lineTo(506,26),context.lineTo(525,21),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.save(),context.translate(81,-263),context.beginPath(),context.moveTo(547,277),context.lineTo(558,274),context.lineTo(557,284),context.lineTo(548,287),context.lineTo(517,288),context.lineTo(515,284),context.lineTo(535,278),context.lineTo(547,277),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.restore(),context.beginPath(),context.moveTo(639,46),context.lineTo(659,41),context.lineTo(658,46),context.lineTo(643,49),context.lineTo(635,53),context.lineTo(625,60),context.lineTo(627,73),context.lineTo(616,71),context.lineTo(614,67),context.lineTo(621,50),context.lineTo(639,46),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(854,46),context.lineTo(859,46),context.lineTo(859,50),context.lineTo(856,53),context.lineTo(854,52),context.lineTo(854,46),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(862,48),context.lineTo(868,51),context.lineTo(863,52),context.lineTo(862,48),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(859,55),context.lineTo(868,60),context.lineTo(859,60),context.lineTo(859,55),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(405,98),context.lineTo(411,91),context.lineTo(416,96),context.lineTo(427,94),context.lineTo(429,103),context.lineTo(412,110),context.lineTo(405,98),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(454,128),context.lineTo(460,126),context.lineTo(459,131),context.lineTo(463,132),context.lineTo(468,146),context.lineTo(472,149),context.lineTo(471,155),context.lineTo(457,159),context.lineTo(460,154),context.lineTo(454,152),context.lineTo(460,146),context.lineTo(454,128),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(443,147),context.lineTo(452,143),context.lineTo(451,152),context.lineTo(448,156),context.lineTo(443,156),context.lineTo(443,147),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(864,158),context.lineTo(868,151),context.lineTo(868,168),context.lineTo(866,181),context.lineTo(873,188),context.lineTo(861,196),context.lineTo(862,205),context.lineTo(857,219),context.lineTo(844,223),context.lineTo(831,229),context.lineTo(831,222),context.lineTo(855,206),context.lineTo(858,194),context.lineTo(865,172),context.lineTo(864,158),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(493,203),context.lineTo(492,197),context.lineTo(494,195),context.lineTo(495,203),context.lineTo(493,203),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(236,257),context.lineTo(248,258),context.lineTo(262,264),context.lineTo(255,266),context.lineTo(246,261),context.lineTo(238,260),context.lineTo(236,257),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(270,267),context.lineTo(279,272),context.lineTo(265,273),context.lineTo(270,267),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(805,272),context.lineTo(808,274),context.lineTo(816,296),context.lineTo(819,313),context.lineTo(811,311),context.lineTo(805,296),context.lineTo(802,276),context.lineTo(805,272),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(266,296),context.lineTo(281,296),context.lineTo(297,300),context.lineTo(313,311),context.lineTo(325,315),context.lineTo(334,334),context.lineTo(369,346),context.lineTo(373,358),context.lineTo(365,371),context.lineTo(358,393),context.lineTo(352,405),context.lineTo(338,412),context.lineTo(326,436),context.lineTo(317,445),context.lineTo(310,455),context.lineTo(296,462),context.lineTo(285,481),context.lineTo(285,496),context.lineTo(279,509),context.lineTo(284,520),context.lineTo(278,524),context.lineTo(269,523),context.lineTo(262,506),context.lineTo(260,483),context.lineTo(262,468),context.lineTo(268,440),context.lineTo(270,421),context.lineTo(271,389),context.lineTo(261,380),context.lineTo(255,371),context.lineTo(246,354),context.lineTo(249,333),context.lineTo(256,320),context.lineTo(255,309),context.lineTo(266,296),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(691,303),context.lineTo(696,310),context.lineTo(691,313),context.lineTo(691,303),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(773,325),context.lineTo(797,311),context.lineTo(797,325),context.lineTo(792,344),context.lineTo(775,340),context.lineTo(773,325),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(803,330),context.lineTo(810,330),context.lineTo(811,351),context.lineTo(800,348),context.lineTo(803,330),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(833,335),context.lineTo(867,346),context.lineTo(877,352),context.lineTo(884,367),context.lineTo(855,359),context.lineTo(849,350),context.lineTo(839,345),context.lineTo(833,335),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(763,351),context.lineTo(789,355),context.lineTo(795,361),context.lineTo(783,360),context.lineTo(763,354),context.lineTo(763,351),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(607,368),context.lineTo(602,395),context.lineTo(595,403),context.lineTo(590,398),context.lineTo(594,387),context.lineTo(592,377),context.lineTo(607,368),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(860,388),context.lineTo(864,370),context.lineTo(876,391),context.lineTo(887,409),context.lineTo(892,421),context.lineTo(890,442),context.lineTo(883,458),context.lineTo(871,462),context.lineTo(857,456),context.lineTo(850,451),context.lineTo(843,441),context.lineTo(837,438),context.lineTo(826,436),context.lineTo(812,441),context.lineTo(804,441),context.lineTo(791,445),context.lineTo(791,435),context.lineTo(786,419),context.lineTo(785,403),context.lineTo(804,395),context.lineTo(809,390),context.lineTo(817,380),context.lineTo(827,380),context.lineTo(833,371),context.lineTo(847,371),context.lineTo(847,383),context.lineTo(860,388),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(949,449),context.lineTo(965,462),context.lineTo(943,489),context.lineTo(934,493),context.lineTo(931,488),context.lineTo(946,472),context.lineTo(956,461),context.lineTo(949,449),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(870,469),context.lineTo(880,469),context.lineTo(878,478),context.lineTo(872,476),context.lineTo(870,469),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(493,195),context.lineTo(493,192),context.lineTo(494,191),context.lineTo(494,195),context.lineTo(493,195),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(477,210),context.lineTo(490,211),context.lineTo(499,211),context.lineTo(498,223),context.lineTo(518,232),context.lineTo(531,225),context.lineTo(550,230),context.lineTo(558,229),context.lineTo(574,269),context.lineTo(592,297),context.lineTo(611,294),context.lineTo(609,307),context.lineTo(602,319),context.lineTo(582,337),context.lineTo(578,349),context.lineTo(582,364),context.lineTo(578,378),context.lineTo(566,387),context.lineTo(568,396),context.lineTo(560,406),context.lineTo(553,417),context.lineTo(532,426),context.lineTo(524,426),context.lineTo(521,423),context.lineTo(513,408),context.lineTo(505,388),context.lineTo(503,374),context.lineTo(508,357),context.lineTo(494,334),context.lineTo(494,322),context.lineTo(486,318),context.lineTo(483,313),context.lineTo(444,318),context.lineTo(426,295),context.lineTo(424,290),context.lineTo(423,262),context.lineTo(428,250),context.lineTo(440,235),context.lineTo(443,227),context.lineTo(454,215),context.lineTo(463,216),context.lineTo(471,212),context.lineTo(477,210),context.lineTo(477,210),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(353,5),context.lineTo(370,3),context.lineTo(407,6),context.lineTo(435,17),context.lineTo(425,23),context.lineTo(415,34),context.lineTo(420,40),context.lineTo(419,51),context.lineTo(410,59),context.lineTo(413,71),context.lineTo(401,80),context.lineTo(360,97),context.lineTo(350,121),context.lineTo(336,116),context.lineTo(328,83),context.lineTo(313,52),context.lineTo(306,46),context.lineTo(300,44),context.lineTo(272,43),context.lineTo(271,31),context.lineTo(287,28),context.lineTo(301,12),context.lineTo(314,10),context.lineTo(326,12),context.lineTo(353,5),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(287,23),context.lineTo(278,23),context.lineTo(258,36),context.lineTo(253,37),context.lineTo(247,54),context.lineTo(254,55),context.lineTo(257,61),context.lineTo(264,62),context.lineTo(267,68),context.lineTo(276,70),context.lineTo(281,76),context.lineTo(282,82),context.lineTo(300,88),context.lineTo(293,98),context.lineTo(285,94),context.lineTo(289,100),context.lineTo(289,104),context.lineTo(283,105),context.lineTo(286,111),context.lineTo(272,109),context.lineTo(266,104),context.lineTo(253,104),context.lineTo(253,100),context.lineTo(266,98),context.lineTo(268,86),context.lineTo(259,84),context.lineTo(257,76),context.lineTo(241,76),context.lineTo(245,91),context.lineTo(236,95),context.lineTo(241,103),context.lineTo(239,106),context.lineTo(235,107),context.lineTo(221,103),context.lineTo(210,114),context.lineTo(207,124),context.lineTo(212,126),context.lineTo(214,132),context.lineTo(221,133),context.lineTo(230,139),context.lineTo(241,143),context.lineTo(240,149),context.lineTo(249,155),context.lineTo(248,145),context.lineTo(250,142),context.lineTo(256,138),context.lineTo(255,128),context.lineTo(252,123),context.lineTo(254,112),context.lineTo(265,110),context.lineTo(269,111),context.lineTo(275,116),context.lineTo(280,125),context.lineTo(287,123),context.lineTo(291,120),context.lineTo(298,134),context.lineTo(310,145),context.lineTo(313,160),context.lineTo(327,168),context.lineTo(326,172),context.lineTo(306,169),context.lineTo(311,156),context.lineTo(299,159),context.lineTo(294,160),context.lineTo(295,176),context.lineTo(302,179),context.lineTo(286,186),context.lineTo(283,181),context.lineTo(278,185),context.lineTo(273,193),context.lineTo(263,201),context.lineTo(257,217),context.lineTo(252,222),context.lineTo(242,232),context.lineTo(246,245),context.lineTo(244,249),context.lineTo(235,233),context.lineTo(206,236),context.lineTo(201,240),context.lineTo(199,252),context.lineTo(198,260),context.lineTo(203,270),context.lineTo(214,271),context.lineTo(218,269),context.lineTo(226,262),context.lineTo(224,280),context.lineTo(238,284),context.lineTo(239,300),context.lineTo(255,304),context.lineTo(241,306),context.lineTo(234,302),context.lineTo(228,292),context.lineTo(221,287),context.lineTo(205,280),context.lineTo(187,276),context.lineTo(180,272),context.lineTo(175,267),context.lineTo(174,258),context.lineTo(169,249),context.lineTo(163,240),context.lineTo(151,230),context.lineTo(164,255),context.lineTo(153,245),context.lineTo(141,221),context.lineTo(134,218),context.lineTo(130,207),context.lineTo(125,203),context.lineTo(122,186),context.lineTo(122,163),context.lineTo(113,161),context.lineTo(111,149),context.lineTo(83,124),context.lineTo(57,116),context.lineTo(56,119),context.lineTo(47,122),context.lineTo(48,117),context.lineTo(42,120),context.lineTo(39,126),context.lineTo(30,136),context.lineTo(12,143),context.lineTo(21,135),context.lineTo(28,132),context.lineTo(30,124),context.lineTo(12,118),context.lineTo(8,111),context.lineTo(12,106),context.lineTo(19,105),context.lineTo(20,100),context.lineTo(5,99),context.lineTo(3,94),context.lineTo(19,93),context.lineTo(8,80),context.lineTo(23,70),context.lineTo(57,72),context.lineTo(89,78),context.lineTo(113,71),context.lineTo(119,75),context.lineTo(144,78),context.lineTo(144,69),context.lineTo(128,68),context.lineTo(125,56),context.lineTo(131,52),context.lineTo(148,52),context.lineTo(148,45),context.lineTo(130,45),context.lineTo(125,42),context.lineTo(162,30),context.lineTo(207,31),context.lineTo(204,17),context.lineTo(215,16),context.lineTo(227,10),context.lineTo(235,11),context.lineTo(269,6),context.lineTo(291,7),context.lineTo(301,12),context.lineTo(287,23),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(762,38),context.lineTo(767,42),context.lineTo(781,42),context.lineTo(787,52),context.lineTo(775,55),context.lineTo(776,58),context.lineTo(788,56),context.lineTo(798,59),context.lineTo(796,60),context.lineTo(810,62),context.lineTo(813,57),context.lineTo(826,63),context.lineTo(831,71),context.lineTo(849,70),context.lineTo(856,69),context.lineTo(861,62),context.lineTo(885,67),context.lineTo(899,71),context.lineTo(912,71),context.lineTo(915,76),context.lineTo(955,76),context.lineTo(996,97),context.lineTo(990,104),context.lineTo(981,103),context.lineTo(973,100),context.lineTo(965,102),context.lineTo(966,112),context.lineTo(941,122),context.lineTo(927,122),context.lineTo(925,124),context.lineTo(922,137),context.lineTo(919,145),context.lineTo(914,151),context.lineTo(905,159),context.lineTo(904,156),context.lineTo(902,143),context.lineTo(907,131),context.lineTo(917,123),context.lineTo(922,120),context.lineTo(921,116),context.lineTo(911,115),context.lineTo(905,116),context.lineTo(900,124),context.lineTo(863,124),context.lineTo(847,143),context.lineTo(859,149),context.lineTo(859,167),context.lineTo(848,183),context.lineTo(842,191),context.lineTo(834,189),context.lineTo(827,200),context.lineTo(829,216),context.lineTo(821,220),context.lineTo(816,204),context.lineTo(814,201),context.lineTo(805,198),context.lineTo(796,207),context.lineTo(808,210),context.lineTo(810,212),context.lineTo(801,218),context.lineTo(806,228),context.lineTo(800,252),context.lineTo(790,260),context.lineTo(768,266),context.lineTo(760,272),context.lineTo(768,280),context.lineTo(774,294),context.lineTo(764,304),context.lineTo(750,293),context.lineTo(748,305),context.lineTo(750,311),context.lineTo(759,327),context.lineTo(753,326),context.lineTo(751,322),context.lineTo(744,301),context.lineTo(739,278),context.lineTo(732,281),context.lineTo(725,261),context.lineTo(715,263),context.lineTo(709,268),context.lineTo(693,282),context.lineTo(689,302),context.lineTo(682,305),context.lineTo(677,295),context.lineTo(674,285),context.lineTo(671,264),context.lineTo(665,266),context.lineTo(655,249),context.lineTo(644,252),context.lineTo(633,249),context.lineTo(616,243),context.lineTo(608,234),context.lineTo(606,235),context.lineTo(605,241),context.lineTo(610,248),context.lineTo(615,250),context.lineTo(635,258),context.lineTo(627,274),context.lineTo(621,278),context.lineTo(594,291),context.lineTo(590,279),context.lineTo(566,236),context.lineTo(562,236),context.lineTo(559,229),context.lineTo(567,228),context.lineTo(569,213),context.lineTo(549,212),context.lineTo(547,210),context.lineTo(543,199),context.lineTo(559,194),context.lineTo(566,193),context.lineTo(585,196),context.lineTo(582,189),context.lineTo(576,184),context.lineTo(570,183),context.lineTo(556,178),context.lineTo(553,180),context.lineTo(549,187),context.lineTo(548,195),context.lineTo(536,198),context.lineTo(534,211),context.lineTo(531,209),context.lineTo(524,195),context.lineTo(505,181),context.lineTo(505,187),context.lineTo(514,196),context.lineTo(521,201),context.lineTo(516,201),context.lineTo(511,211),context.lineTo(505,208),context.lineTo(513,204),context.lineTo(505,196),context.lineTo(495,185),context.lineTo(488,186),context.lineTo(478,190),context.lineTo(470,201),context.lineTo(465,212),context.lineTo(465,212),context.lineTo(465,212),context.lineTo(465,212),context.lineTo(465,212),context.lineTo(465,212),context.lineTo(465,212),context.lineTo(465,212),context.lineTo(456,212),context.lineTo(444,205),context.lineTo(448,188),context.lineTo(458,187),context.lineTo(467,187),context.lineTo(467,180),context.lineTo(459,168),context.lineTo(481,155),context.lineTo(485,150),context.lineTo(493,148),context.lineTo(493,134),context.lineTo(499,132),context.lineTo(499,139),context.lineTo(505,139),context.lineTo(524,132),context.lineTo(536,115),context.lineTo(527,107),context.lineTo(536,93),context.lineTo(531,91),context.lineTo(514,112),context.lineTo(514,124),context.lineTo(506,132),context.lineTo(499,124),context.lineTo(493,128),context.lineTo(489,115),context.lineTo(516,86),context.lineTo(513,81),context.lineTo(534,69),context.lineTo(551,70),context.lineTo(559,78),context.lineTo(568,80),context.lineTo(577,83),context.lineTo(582,92),context.lineTo(575,94),context.lineTo(564,91),context.lineTo(573,102),context.lineTo(576,104),context.lineTo(584,95),context.lineTo(590,93),context.lineTo(592,83),context.lineTo(597,83),context.lineTo(597,92),context.lineTo(610,85),context.lineTo(628,83),context.lineTo(639,78),context.lineTo(642,79),context.lineTo(660,85),context.lineTo(658,73),context.lineTo(659,68),context.lineTo(666,58),context.lineTo(678,63),context.lineTo(694,63),context.lineTo(697,57),context.lineTo(710,56),context.lineTo(715,47),context.lineTo(751,43),context.lineTo(753,41),context.lineTo(754,39),context.lineTo(762,38),context.lineTo(762,38),context.closePath(),context.fillStyle=fillColorString,context.fill(),context.beginPath(),context.moveTo(764,341),context.lineTo(762,350),context.lineTo(754,345),context.lineTo(748,336),context.lineTo(736,315),context.lineTo(748,323),context.lineTo(764,341),context.closePath(),context.fillStyle=fillColorString,context.fill()},window.SimpleWorldMapIconWdgt=function(color){this.color=color,SimpleWorldMapIconWdgt.__super__.constructor.apply(this,arguments),this.appearance=new SimpleWorldMapIconAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.SimpleWorldMapIconWdgt,"name",{value:"SimpleWorldMapIconWdgt"}),window.SimpleWorldMapIconWdgt.instances=[],window.SimpleWorldMapIconWdgt.__super__=window.IconMorph.prototype,window.SimpleWorldMapIconWdgt=extend(window.SimpleWorldMapIconWdgt,window.IconMorph),window.InspectorMorph2=function(target){this.target=target,this.classesButtons=[],this.classesNames=[],this.angledArrows=[],InspectorMorph2.__super__.constructor.call(this,new Point(300,300)),this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.InspectorMorph2,"name",{value:"InspectorMorph2"}),window.InspectorMorph2.instances=[],window.InspectorMorph2.__super__=window.Widget.prototype,window.InspectorMorph2=extend(window.InspectorMorph2,window.Widget),window.InspectorMorph2.prototype.target=nil,window.InspectorMorph2.prototype.currentProperty=nil,window.InspectorMorph2.prototype.showing="attributes",window.InspectorMorph2.prototype.markOwnershipOfProperties=!0,window.InspectorMorph2.prototype.list=nil,window.InspectorMorph2.prototype.detail=nil,window.InspectorMorph2.prototype.classesButtons=nil,window.InspectorMorph2.prototype.classesNames=nil,window.InspectorMorph2.prototype.angledArrows=nil,window.InspectorMorph2.prototype.hierarchyHeaderString=nil,window.InspectorMorph2.prototype.propertyHeaderString=nil,window.InspectorMorph2.prototype.showMethodsOnButton=nil,window.InspectorMorph2.prototype.showMethodsOffButton=nil,window.InspectorMorph2.prototype.showMethodsToggle=nil,window.InspectorMorph2.prototype.showFieldsOnButton=nil,window.InspectorMorph2.prototype.showFieldsOffButton=nil,window.InspectorMorph2.prototype.showFieldsToggle=nil,window.InspectorMorph2.prototype.showInheritedOnButton=nil,window.InspectorMorph2.prototype.showInheritedOffButton=nil,window.InspectorMorph2.prototype.showInheritedToggle=nil,window.InspectorMorph2.prototype.showOwnPropsOnlyOnButton=nil,window.InspectorMorph2.prototype.showOwnPropsOnlyOffButton=nil,window.InspectorMorph2.prototype.showOwnPropsOnlyToggle=nil,window.InspectorMorph2.prototype.lastLabelInHierarchy=nil,window.InspectorMorph2.prototype.lastArrowInHierarchy=nil,window.InspectorMorph2.prototype.hierarchyBackgroundPanel=nil,window.InspectorMorph2.prototype.showingFields=!0,window.InspectorMorph2.prototype.showingMethods=!0,window.InspectorMorph2.prototype.showingInherited=!1,window.InspectorMorph2.prototype.showingOwnPropsOnly=!1,window.InspectorMorph2.prototype.addPropertyButton=nil,window.InspectorMorph2.prototype.renamePropertyButton=nil,window.InspectorMorph2.prototype.removePropertyButton=nil,window.InspectorMorph2.prototype.saveButton=nil,window.InspectorMorph2.prototype.saveTextWdgt=nil,window.InspectorMorph2.prototype.externalPadding=0,window.InspectorMorph2.prototype.internalPadding=5,window.InspectorMorph2.prototype.padding=nil,window.InspectorMorph2.prototype.classNamesTextPadding=2,window.InspectorMorph2.prototype.colloquialName=function(){return"Object Inspector ("+this.target.colloquialName()+")"},window.InspectorMorph2.prototype.showFields=function(){if(!this.showingFields)return this.showingFields=!0,this.buildAndConnectChildren()},window.InspectorMorph2.prototype.showMethods=function(){if(!this.showingMethods)return this.showingMethods=!0,this.buildAndConnectChildren()},window.InspectorMorph2.prototype.showInherited=function(){if(!this.showingInherited)return this.showingInherited=!0,this.buildAndConnectChildren()},window.InspectorMorph2.prototype.showOwnPropsOnly=function(){if(!this.showingOwnPropsOnly)return this.showingOwnPropsOnly=!0,this.buildAndConnectChildren()},window.InspectorMorph2.prototype.hideFields=function(){if(this.showingFields)return this.showingFields=!1,this.buildAndConnectChildren()},window.InspectorMorph2.prototype.hideMethods=function(){if(this.showingMethods)return this.showingMethods=!1,this.buildAndConnectChildren()},window.InspectorMorph2.prototype.hideInherited=function(){if(this.showingInherited)return this.showingInherited=!1,this.buildAndConnectChildren()},window.InspectorMorph2.prototype.hideOwnPropsOnly=function(){if(this.showingOwnPropsOnly)return this.showingOwnPropsOnly=!1,this.buildAndConnectChildren()},window.InspectorMorph2.prototype.inspectObject=function(objectToBeInspected){return this.target=objectToBeInspected,this.currentProperty=nil,this.buildAndConnectChildren()},window.InspectorMorph2.prototype.buildAndConnectChildren=function(){var angledArrow,attribs,classButton,counter,doubleClickAction,eachNamedClass,goingUpTargetProtChain,i,len,property,ref,ref1,targetOwnMethods;"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.fullDestroyChildren(),attribs=[],this.classesButtons=[],this.classesNames=[],this.angledArrows=[];for(property in this.target)property&&attribs.push(property);if(this.showingMethods||(attribs=attribs.filter(prop=>!isFunction(this.target[prop]))),this.showingFields||(attribs=attribs.filter(prop=>isFunction(this.target[prop]))),this.showingInherited||(attribs=attribs.filter(prop=>this.target.constructor.prototype.hasOwnProperty(prop)||!(prop in this.target.constructor.prototype))),this.showingOwnPropsOnly&&(attribs=attribs.filter(prop=>this.target.hasOwnProperty(prop))),console.log("attribs: "+attribs),this.markOwnershipOfProperties&&(targetOwnMethods=Object.getOwnPropertyNames(this.target.constructor.prototype)),null!=this.target)for(goingUpTargetProtChain=this.target.__proto__;"Object"!==goingUpTargetProtChain.constructor.name;)this.classesNames.push(goingUpTargetProtChain.constructor.name),goingUpTargetProtChain=goingUpTargetProtChain.__proto__;for(this.hierarchyBackgroundPanel=new RectangleMorph,this.hierarchyBackgroundPanel.setColor(new Color(255,255,255,.2)),this.add(this.hierarchyBackgroundPanel),counter=0,i=0,len=(ref=this.classesNames).length;i<len;i++)eachNamedClass=ref[i],classButton=new SimpleButtonMorph(!0,this,"openClassInspector",new StringMorph2(eachNamedClass,WorldMorph.preferencesAndSettings.textInButtonsFontSize),nil,nil,nil,nil,eachNamedClass,nil,nil,this.classNamesTextPadding),this.classesButtons.push(classButton),this.add(classButton),counter>0&&(angledArrow=new AngledArrowUpLeftIconMorph(new Color(0,0,0)),this.angledArrows.push(angledArrow),this.add(angledArrow)),counter++;return this.lastLabelInHierarchy=new TextMorph("this object"),this.add(this.lastLabelInHierarchy),this.lastArrowInHierarchy=new AngledArrowUpLeftIconMorph(new Color(0,0,0)),this.add(this.lastArrowInHierarchy),this.showMethodsOnButton=new SimpleButtonMorph(!0,this,"hideMethods","methods: on"),this.showMethodsOffButton=new SimpleButtonMorph(!0,this,"showMethods","methods: off"),this.showMethodsToggle=new ToggleButtonMorph(this.showMethodsOnButton,this.showMethodsOffButton,this.showingMethods?0:1),this.add(this.showMethodsToggle),this.showFieldsOnButton=new SimpleButtonMorph(!0,this,"hideFields","fields: on"),this.showFieldsOffButton=new SimpleButtonMorph(!0,this,"showFields","fields: off"),this.showFieldsToggle=new ToggleButtonMorph(this.showFieldsOnButton,this.showFieldsOffButton,this.showingFields?0:1),this.add(this.showFieldsToggle),this.showInheritedOnButton=new SimpleButtonMorph(!0,this,"hideInherited","inherited: on"),this.showInheritedOffButton=new SimpleButtonMorph(!0,this,"showInherited","inherited: off"),this.showInheritedToggle=new ToggleButtonMorph(this.showInheritedOnButton,this.showInheritedOffButton,this.showingInherited?0:1),this.add(this.showInheritedToggle),this.buildAndConnectObjOwnPropsButton(),this.addPropertyButton=new SimpleButtonMorph(!0,this,"addPropertyPopout","add..."),this.add(this.addPropertyButton),this.renamePropertyButton=new SimpleButtonMorph(!0,this,"renamePropertyPopout","rename..."),this.add(this.renamePropertyButton),this.removePropertyButton=new SimpleButtonMorph(!0,this,"removeProperty","remove"),this.add(this.removePropertyButton),this.saveTextWdgt=new StringMorph2("save",WorldMorph.preferencesAndSettings.textInButtonsFontSize).alignCenter(),this.saveButton=new SimpleButtonMorph(!0,this,"save",this.saveTextWdgt),this.add(this.saveButton),doubleClickAction=(()=>{var inspector;if(isObject(this.currentProperty))return(inspector=new this.constructor(this.currentProperty)).fullRawMoveTo(world.hand.position()),inspector.fullRawMoveWithin(world),world.add(inspector),inspector.changed()}),this.list=new ListMorph(this,"selectionFromList",this.target instanceof Array?attribs:attribs.sort(),nil,this.filterProperties(targetOwnMethods),doubleClickAction),this.list.disableDrops(),world.removeSteppingMorph(this.list.listContents),this.add(this.list),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.detail=new SimplePlainTextScrollPanelWdgt("",!1,5),this.detail.disableDrops(),this.detail.contents.disableDrops(),this.detail.color=new Color(255,255,255),this.detail.addModifiedContentIndicator(),null==this.list.selected&&(null!=(ref1=this.detail.modifiedTextTriangleAnnotation)&&ref1.hide(),this.saveTextWdgt.setColor(new Color(200,200,200))),this.detail.widgetToBeNotifiedOfTextModificationChange=this,this.textMorph=this.detail.textWdgt,this.textMorph.backgroundColor=new Color(0,0,0,0),this.textMorph.setFontName(nil,nil,this.textMorph.monoFontStack),this.textMorph.isEditable=!1,this.add(this.detail),this.hierarchyHeaderString=new StringMorph2("Hierarchy",WorldMorph.preferencesAndSettings.textInButtonsFontSize),this.hierarchyHeaderString.toggleHeaderLine(),this.hierarchyHeaderString.alignCenter(),this.add(this.hierarchyHeaderString),this.propertyHeaderString=new StringMorph2("Properties",WorldMorph.preferencesAndSettings.textInButtonsFontSize),this.propertyHeaderString.toggleHeaderLine(),this.propertyHeaderString.alignCenter(),this.add(this.propertyHeaderString),this.resizer=new HandleMorph(this),this.invalidateLayout()},window.InspectorMorph2.prototype.textContentModified=function(){return this.saveTextWdgt.setColor(new Color(0,0,0))},window.InspectorMorph2.prototype.textContentUnmodified=function(){return this.saveTextWdgt.setColor(new Color(200,200,200))},window.InspectorMorph2.prototype.buildAndConnectObjOwnPropsButton=function(){return this.showOwnPropsOnlyOnButton=new SimpleButtonMorph(!0,this,"hideOwnPropsOnly","obj own props only: on"),this.showOwnPropsOnlyOffButton=new SimpleButtonMorph(!0,this,"showOwnPropsOnly","obj own props only: off"),this.showOwnPropsOnlyToggle=new ToggleButtonMorph(this.showOwnPropsOnlyOnButton,this.showOwnPropsOnlyOffButton,this.showingOwnPropsOnly?0:1),this.add(this.showOwnPropsOnlyToggle)},window.InspectorMorph2.prototype.openClassInspector=function(ignored,ignored2,className){var classInspector,wm;return classInspector=new ClassInspectorMorph(window[className].prototype),(wm=new WindowWdgt(nil,nil,classInspector)).setExtent(new Point(560,410)),wm.fullRawMoveTo(world.hand.position().subtract(new Point(50,100))),wm.fullRawMoveWithin(world),world.add(wm),wm.changed()},window.InspectorMorph2.prototype.showAttributes=function(){return this.showing="attributes",this.buildAndConnectChildren()},window.InspectorMorph2.prototype.showAttributesAndMethods=function(){return this.showing="all",this.buildAndConnectChildren()},window.InspectorMorph2.prototype.highlightOwnershipOfProperties=function(){return this.markOwnershipOfProperties=!this.markOwnershipOfProperties,this.buildAndConnectChildren()},window.InspectorMorph2.prototype.filterProperties=function(targetOwnMethods){return this.markOwnershipOfProperties?[[new Color(0,0,180),element=>!0],[new Color(0,180,0),element=>this.target.constructor.prototype.hasOwnProperty(element)]]:nil},window.InspectorMorph2.prototype.selectionFromList=function(selected){var cnts,goingUpTargetProtChain,txt,val;if(void 0!==selected){if(val=this.target[selected],this.currentProperty=val,isFunction(val)){if(null!=this.target[selected+"_source"])val=this.target[selected+"_source"];else for(goingUpTargetProtChain=this.target;goingUpTargetProtChain!==Object;){if(null!=goingUpTargetProtChain.constructor.class.nonStaticPropertiesSources[selected]){val=goingUpTargetProtChain.constructor.class.nonStaticPropertiesSources[selected];break}goingUpTargetProtChain=goingUpTargetProtChain.__proto__}txt=val.toString()}else void 0===val&&(val=this.target.constructor[selected]),txt=null==val?"nil":isString(val)?'"'+val+'"':val.toString();return(cnts=this.detail.textWdgt).setText(txt),cnts.setReceiver(this.target),cnts.isEditable=!0,cnts.enableSelecting(),cnts.considerCurrentTextAsReferenceText(),this.detail.checkIfTextContentWasModifiedFromTextAtStart()}},window.InspectorMorph2.prototype.doLayout=function(newBoundsForThisLayout){var anotherCount,buttonBounds,detailWidth,eachClassButton,headerBounds,i,justAcounter,len,listHeight,listWidth,ref,widthOfButtonsUnderList;if(window.recalculatingLayouts,this.isCollapsed())return this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted();for(InspectorMorph2.__super__.doLayout.apply(this,arguments),trackChanges.push(!1),Math.floor(this.height()/3),headerBounds=(headerBounds=new Rectangle(new Point(Math.round(this.left()+this.externalPadding),Math.round(this.top()+this.externalPadding)))).setBoundsWidthAndHeight(this.width()-2*this.externalPadding,15),this.hierarchyHeaderString.doLayout(headerBounds),justAcounter=0,anotherCount=0,this.classesButtons.reverse(),i=0,len=(ref=this.classesButtons).length;i<len;i++)(eachClassButton=ref[i]).parent===this&&(buttonBounds=(buttonBounds=new Rectangle(new Point(Math.round(this.left()+this.externalPadding+this.internalPadding+justAcounter),Math.round(this.hierarchyHeaderString.bottom()+2*this.internalPadding+justAcounter)))).setBoundsWidthAndHeight(120+2*this.classNamesTextPadding,15+2*this.classNamesTextPadding),eachClassButton.doLayout(buttonBounds),anotherCount>0&&(this.angledArrows[anotherCount-1].parent,this.angledArrows[anotherCount-1].fullRawMoveTo(new Point(eachClassButton.left()-15,Math.round(eachClassButton.top()))),this.angledArrows[anotherCount-1].rawSetExtent(new Point(15,15))),justAcounter+=20),anotherCount++;return this.classesButtons.reverse(),this.layoutLastLabelInHierarchy(Math.round(this.left()+this.externalPadding+this.internalPadding+justAcounter),Math.round(this.hierarchyHeaderString.bottom()+2*this.internalPadding+justAcounter)),this.hierarchyBackgroundPanel.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.hierarchyHeaderString.bottom()+this.internalPadding)),this.hierarchyBackgroundPanel.rawSetExtent(new Point(this.width()-2*this.externalPadding,justAcounter+20+this.internalPadding)),headerBounds=new Rectangle(new Point(this.left()+this.externalPadding,this.hierarchyBackgroundPanel.bottom()+this.internalPadding)),headerBounds=headerBounds.setBoundsWidthAndHeight(this.width()-2*this.externalPadding,15),this.propertyHeaderString.doLayout(headerBounds),listWidth=Math.floor((this.width()-2*this.externalPadding-this.internalPadding)/3),detailWidth=2*listWidth,this.layoutOwnPropsOnlyToggle(this.propertyHeaderString.bottom()+this.internalPadding,listWidth,detailWidth),listHeight=this.bottom()-this.externalPadding-this.internalPadding-15-(this.showMethodsToggle.bottom()+this.internalPadding),this.list.parent===this&&(this.list.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.showMethodsToggle.bottom()+this.internalPadding)),this.list.rawSetExtent(new Point(listWidth,listHeight))),this.detail.parent===this&&(this.detail.fullRawMoveTo(new Point(this.list.right()+this.internalPadding,this.list.top())),this.detail.rawSetExtent(new Point(detailWidth,listHeight).round())),widthOfButtonsUnderList=Math.round((listWidth-2*this.internalPadding)/3),buttonBounds=new Rectangle(new Point(this.left()+this.externalPadding,this.bottom()-15-this.externalPadding)),buttonBounds=buttonBounds.setBoundsWidthAndHeight(widthOfButtonsUnderList,15),this.addPropertyButton.doLayout(buttonBounds),buttonBounds=new Rectangle(new Point(this.addPropertyButton.right()+this.internalPadding,this.bottom()-15-this.externalPadding)),buttonBounds=buttonBounds.setBoundsWidthAndHeight(widthOfButtonsUnderList,15),this.renamePropertyButton.doLayout(buttonBounds),buttonBounds=new Rectangle(new Point(this.renamePropertyButton.right()+this.internalPadding,this.bottom()-15-this.externalPadding)),buttonBounds=buttonBounds.setBoundsWidthAndHeight(widthOfButtonsUnderList,15),this.removePropertyButton.doLayout(buttonBounds),buttonBounds=new Rectangle(new Point(Math.round(this.right()-this.width()/4-this.externalPadding-this.internalPadding-WorldMorph.preferencesAndSettings.handleSize),this.bottom()-15-this.externalPadding)),buttonBounds=buttonBounds.setBoundsWidthAndHeight(Math.round(this.width()/4),15),this.saveButton.doLayout(buttonBounds),trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0},window.InspectorMorph2.prototype.layoutOwnPropsOnlyToggle=function(height,listWidth,detailWidth){var toggleBounds;return toggleBounds=new Rectangle(new Point(this.left()+this.externalPadding,height)),toggleBounds=toggleBounds.setBoundsWidthAndHeight(new Point((listWidth-this.internalPadding)/2,15).round()),this.showMethodsToggle.doLayout(toggleBounds),toggleBounds=new Rectangle(new Point(this.showMethodsToggle.right()+this.internalPadding,height)),toggleBounds=toggleBounds.setBoundsWidthAndHeight(new Point((listWidth-this.internalPadding)/2,15).round()),this.showFieldsToggle.doLayout(toggleBounds),toggleBounds=new Rectangle(new Point(this.showFieldsToggle.right()+this.internalPadding,height)),toggleBounds=toggleBounds.setBoundsWidthAndHeight(new Point((detailWidth-this.internalPadding)/2,15).round()),this.showInheritedToggle.doLayout(toggleBounds),toggleBounds=new Rectangle(new Point(this.showInheritedToggle.right()+this.internalPadding,height)),toggleBounds=toggleBounds.setBoundsWidthAndHeight(new Point((detailWidth-this.internalPadding)/2,15).round()),this.showOwnPropsOnlyToggle.doLayout(toggleBounds)},window.InspectorMorph2.prototype.layoutLastLabelInHierarchy=function(posx,posy){if(this.lastLabelInHierarchy.parent===this&&(this.lastLabelInHierarchy.fullRawMoveTo(new Point(posx,posy)),this.lastLabelInHierarchy.rawSetExtent(new Point(150,15))),this.lastArrowInHierarchy.parent===this)return this.lastArrowInHierarchy.fullRawMoveTo(new Point(posx-15,posy)),this.lastArrowInHierarchy.rawSetExtent(new Point(15,15))},window.InspectorMorph2.prototype.notifyInstancesOfSourceChange=function(propertiesArray){return this.target.sourceChanged()},window.InspectorMorph2.prototype.save=function(){var i,len,propertyName,ref,txt;if(null!=this.list.selected){for(txt=this.detail.contents.children[0].text.toString(),propertyName=this.list.selected.labelString,this.target.injectProperty(propertyName,txt),this.detail.textWdgt.considerCurrentTextAsReferenceText(),this.detail.checkIfTextContentWasModifiedFromTextAtStart(),i=0,len=(ref=world.widgetsGivingErrorWhileRepainting).length;i<len;i++)ref[i].show();return world.widgetsGivingErrorWhileRepainting=[]}},window.InspectorMorph2.prototype.addProperty=function(ignoringThis,morphWithProperty){var prop;if(null!=(prop=morphWithProperty.text.text))return null!=prop.getValue&&(prop=prop.getValue()),this.target[prop]=nil,this.buildAndConnectChildren(),this.notifyInstancesOfSourceChange([prop])},window.InspectorMorph2.prototype.addPropertyPopout=function(){return this.prompt("new property name:",this,"addProperty","property")},window.InspectorMorph2.prototype.renameProperty=function(ignoringThis,morphWithProperty){var prop,propertyName;return propertyName=this.list.selected.labelString,null!=(prop=morphWithProperty.text.text).getValue&&(prop=prop.getValue()),delete this.target[propertyName],this.target[prop]=this.currentProperty,this.buildAndConnectChildren(),this.notifyInstancesOfSourceChange([prop,propertyName])},window.InspectorMorph2.prototype.renamePropertyPopout=function(){var propertyName;return propertyName=this.list.selected.labelString,this.prompt("property name:",this,"renameProperty",propertyName)},window.InspectorMorph2.prototype.removeProperty=function(){var propertyName;return propertyName=this.list.selected.labelString,delete this.target[propertyName],this.currentProperty=nil,this.buildAndConnectChildren(),this.notifyInstancesOfSourceChange([propertyName])},window.ClassInspectorMorph=function(){window.ClassInspectorMorph.__super__.constructor.apply(this,arguments),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ClassInspectorMorph,"name",{value:"ClassInspectorMorph"}),window.ClassInspectorMorph.instances=[],window.ClassInspectorMorph.__super__=window.InspectorMorph2.prototype,window.ClassInspectorMorph=extend(window.ClassInspectorMorph,window.InspectorMorph2),window.ClassInspectorMorph.prototype.notifyInstancesOfSourceChange=function(propertiesArray){return this.target.constructor.class.notifyInstancesOfSourceChange(propertiesArray)},window.ClassInspectorMorph.prototype.buildAndConnectChildren=function(){return ClassInspectorMorph.__super__.buildAndConnectChildren.apply(this,arguments),this.lastLabelInHierarchy.setText("this class")},window.ClassInspectorMorph.prototype.colloquialName=function(){return"Class Inspector ("+this.target.constructor.name.replace("Morph","").replace("Wdgt","")+")"},window.ClassInspectorMorph.prototype.layoutOwnPropsOnlyToggle=function(height){var toggleBounds;return toggleBounds=new Rectangle(new Point(this.left()+this.externalPadding,height)),toggleBounds=toggleBounds.setBoundsWidthAndHeight(new Point((this.width()-2*this.externalPadding-2*this.internalPadding)/4,15).round()),this.showMethodsToggle.doLayout(toggleBounds),toggleBounds=new Rectangle(new Point(this.showMethodsToggle.right()+this.internalPadding,height)),toggleBounds=toggleBounds.setBoundsWidthAndHeight(new Point((this.width()-2*this.externalPadding-2*this.internalPadding)/4,15).round()),this.showFieldsToggle.doLayout(toggleBounds),toggleBounds=new Rectangle(new Point(this.showFieldsToggle.right()+this.internalPadding,height)),toggleBounds=toggleBounds.setBoundsWidthAndHeight(new Point(2*(this.width()-2*this.externalPadding-2*this.internalPadding)/4,15).round()),this.showInheritedToggle.doLayout(toggleBounds)},window.ClassInspectorMorph.prototype.buildAndConnectObjOwnPropsButton=function(){},window.ClassInspectorMorph.prototype.save=function(){var i,len,propertyName,ref,txt;for(txt=this.detail.contents.children[0].text.toString(),propertyName=this.list.selected.labelString,this.target.evaluateString("@"+propertyName+" = "+txt),isFunction(this.target[propertyName])&&(this.target[propertyName+"_source"]=txt),this.notifyInstancesOfSourceChange([propertyName]),this.detail.textWdgt.considerCurrentTextAsReferenceText(),this.detail.checkIfTextContentWasModifiedFromTextAtStart(),i=0,len=(ref=world.widgetsGivingErrorWhileRepainting).length;i<len;i++)ref[i].show();return world.widgetsGivingErrorWhileRepainting=[]},window.ConsoleWdgt=function(target){this.target=target,ConsoleWdgt.__super__.constructor.call(this,new Point(200,400)),this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.ConsoleWdgt,"name",{value:"ConsoleWdgt"}),window.ConsoleWdgt.instances=[],window.ConsoleWdgt.__super__=window.Widget.prototype,window.ConsoleWdgt=extend(window.ConsoleWdgt,window.Widget),window.ConsoleWdgt.prototype.tempPromptEntryField=nil,window.ConsoleWdgt.prototype.textMorph=nil,window.ConsoleWdgt.prototype.runSelectionButton=nil,window.ConsoleWdgt.prototype.runAllButton=nil,window.ConsoleWdgt.prototype.functionFromCompiledCode=nil,window.ConsoleWdgt.prototype.externalPadding=0,window.ConsoleWdgt.prototype.internalPadding=5,window.ConsoleWdgt.prototype.colloquialName=function(){return"Console for: "+this.target.colloquialName().toLowerCase()},window.ConsoleWdgt.prototype.buildAndConnectChildren=function(){return"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.tempPromptEntryField=new SimplePlainTextScrollPanelWdgt("",!1,5),this.tempPromptEntryField.disableDrops(),this.tempPromptEntryField.contents.disableDrops(),this.tempPromptEntryField.color=new Color(255,255,255),this.textMorph=this.tempPromptEntryField.textWdgt,this.textMorph.backgroundColor=new Color(0,0,0,0),this.textMorph.setFontName(nil,nil,this.textMorph.monoFontStack),this.textMorph.isEditable=!0,this.textMorph.enableSelecting(),this.add(this.tempPromptEntryField),this.runSelectionButton=new SimpleButtonMorph(!0,this,"doSelection","run selection"),this.runSelectionButton.editorContentPropertyChangerButton=!0,this.add(this.runSelectionButton),this.runAllButton=new SimpleButtonMorph(!0,this,"doAll","run all"),this.add(this.runAllButton),this.invalidateLayout()},window.ConsoleWdgt.prototype.doSelection=function(){var compiled,functionFromCompiledCode,savedScript;return savedScript=this.textMorph.selection(),compiled=compileFGCode(savedScript,!0),null!=(functionFromCompiledCode=new Function(compiled))?functionFromCompiledCode.call(this.target):void 0},window.ConsoleWdgt.prototype.doAll=function(){var compiled,functionFromCompiledCode,savedScript;return savedScript=this.textMorph.text,compiled=compileFGCode(savedScript,!0),null!=(functionFromCompiledCode=new Function(compiled))?functionFromCompiledCode.call(this.target):void 0},window.ConsoleWdgt.prototype.doLayout=function(newBoundsForThisLayout){var buttonBounds,buttonsWidth,textBottom,textHeight,textWidth;return window.recalculatingLayouts,this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(ConsoleWdgt.__super__.doLayout.apply(this,arguments),trackChanges.push(!1),textHeight=this.height()-2*this.externalPadding-this.internalPadding-15,textBottom=this.top()+this.externalPadding+textHeight,textWidth=this.width()-2*this.externalPadding,buttonsWidth=(textWidth-2*this.internalPadding-WorldMorph.preferencesAndSettings.handleSize)/2,this.tempPromptEntryField.parent===this&&(this.tempPromptEntryField.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.top()+this.externalPadding)),this.tempPromptEntryField.rawSetExtent(new Point(textWidth,textHeight))),this.runSelectionButton.parent===this&&(buttonBounds=(buttonBounds=new Rectangle(new Point(this.left()+this.externalPadding,textBottom+this.internalPadding))).setBoundsWidthAndHeight(buttonsWidth,15),this.runSelectionButton.doLayout(buttonBounds)),this.runAllButton.parent===this&&(buttonBounds=(buttonBounds=new Rectangle(new Point(buttonBounds.right()+this.internalPadding,textBottom+this.internalPadding))).setBoundsWidthAndHeight(buttonsWidth,15),this.runAllButton.doLayout(buttonBounds)),trackChanges.pop(),this.fullChanged(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted())},window.CalculatingPatchNodeWdgt=function(defaultFormulaBoxContents="# function with formula here e.g.\n# (in1) -> in1 * 2\n"){this.defaultFormulaBoxContents=defaultFormulaBoxContents,CalculatingPatchNodeWdgt.__super__.constructor.call(this,new Point(200,400)),this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.CalculatingPatchNodeWdgt,"name",{value:"CalculatingPatchNodeWdgt"}),window.CalculatingPatchNodeWdgt.instances=[],window.CalculatingPatchNodeWdgt.__super__=window.Widget.prototype,window.CalculatingPatchNodeWdgt=extend(window.CalculatingPatchNodeWdgt,window.Widget),window.CalculatingPatchNodeWdgt.augmentWith(window.ControllerMixin,"CalculatingPatchNodeWdgt"),window.CalculatingPatchNodeWdgt.prototype.tempPromptEntryField=nil,window.CalculatingPatchNodeWdgt.prototype.defaultFormulaBoxContents=nil,window.CalculatingPatchNodeWdgt.prototype.textMorph=nil,window.CalculatingPatchNodeWdgt.prototype.formulaTextBoxLabel=nil,window.CalculatingPatchNodeWdgt.prototype.outputTextBoxLabel=nil,window.CalculatingPatchNodeWdgt.prototype.outputTextArea=nil,window.CalculatingPatchNodeWdgt.prototype.outputTextAreaText=nil,window.CalculatingPatchNodeWdgt.prototype.output=nil,window.CalculatingPatchNodeWdgt.prototype.input1=nil,window.CalculatingPatchNodeWdgt.prototype.input2=nil,window.CalculatingPatchNodeWdgt.prototype.input3=nil,window.CalculatingPatchNodeWdgt.prototype.input4=nil,window.CalculatingPatchNodeWdgt.prototype.setInput1IsConnected=!1,window.CalculatingPatchNodeWdgt.prototype.setInput2IsConnected=!1,window.CalculatingPatchNodeWdgt.prototype.setInput3IsConnected=!1,window.CalculatingPatchNodeWdgt.prototype.setInput4IsConnected=!1,window.CalculatingPatchNodeWdgt.prototype.input1connectionsCalculationToken=314,window.CalculatingPatchNodeWdgt.prototype.input2connectionsCalculationToken=314,window.CalculatingPatchNodeWdgt.prototype.input3connectionsCalculationToken=314,window.CalculatingPatchNodeWdgt.prototype.input4connectionsCalculationToken=314,window.CalculatingPatchNodeWdgt.prototype.externalPadding=0,window.CalculatingPatchNodeWdgt.prototype.internalPadding=5,window.CalculatingPatchNodeWdgt.prototype.colloquialName=function(){return"Calculating patch node"},window.CalculatingPatchNodeWdgt.prototype.setInput1=function(newvalue,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.input1connectionsCalculationToken)return this.input1connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.input1=Number(newvalue),this.updateTarget(this.input1connectionsCalculationToken)},window.CalculatingPatchNodeWdgt.prototype.setInput2=function(newvalue,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.input2connectionsCalculationToken)return this.input2connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.input2=Number(newvalue),this.updateTarget(this.input2connectionsCalculationToken)},window.CalculatingPatchNodeWdgt.prototype.setInput3=function(newvalue,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.input3connectionsCalculationToken)return this.input3connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.input3=Number(newvalue),this.updateTarget(this.input3connectionsCalculationToken)},window.CalculatingPatchNodeWdgt.prototype.setInput4=function(newvalue,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.input4connectionsCalculationToken)return this.input4connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.input4=Number(newvalue),this.updateTarget(this.input4connectionsCalculationToken)},window.CalculatingPatchNodeWdgt.prototype.bang=function(newvalue,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.updateTarget(this.connectionsCalculationToken,!0)},window.CalculatingPatchNodeWdgt.prototype.openTargetPropertySelector=function(ignored,ignored2,theTarget){var functionNamesStrings,i,j,menu,menuEntriesStrings,ref;for([menuEntriesStrings,functionNamesStrings]=theTarget.numericalSetters(),menu=new MenuMorph(this,!1,this,!0,!0,"choose target property:"),i=j=0,ref=menuEntriesStrings.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j)menu.addMenuItem(menuEntriesStrings[i],!0,this,"setTargetAndActionWithOnesPickedFromMenu",nil,nil,nil,nil,nil,theTarget,functionNamesStrings[i]);return 0===menuEntriesStrings.length&&(menu=new MenuMorph(this,!1,this,!0,!0,"no target properties available")),menu.popUpAtHand()},window.CalculatingPatchNodeWdgt.prototype.updateTarget=function(tokenToCheckIfEqual,directFireViaBang){var okToFire;(this.setInput1IsConnected||this.setInput2IsConnected||this.setInput3IsConnected||this.setInput4IsConnected)&&(okToFire=!0,this.setInput1IsConnected&&this.input1connectionsCalculationToken!==tokenToCheckIfEqual&&(okToFire=!1),this.setInput2IsConnected&&this.input2connectionsCalculationToken!==tokenToCheckIfEqual&&(okToFire=!1),this.setInput3IsConnected&&this.input3connectionsCalculationToken!==tokenToCheckIfEqual&&(okToFire=!1),this.setInput4IsConnected&&this.input4connectionsCalculationToken!==tokenToCheckIfEqual&&(okToFire=!1),okToFire&&!directFireViaBang&&this.doCalculation(),(okToFire||directFireViaBang)&&this.fireOutputToTarget(tokenToCheckIfEqual))},window.CalculatingPatchNodeWdgt.prototype.fireOutputToTarget=function(calculationToken){if(this.connectionsCalculationToken=calculationToken,this.action&&""!==this.action)return this.target[this.action].call(this.target,this.output,nil,this.connectionsCalculationToken)},window.CalculatingPatchNodeWdgt.prototype.reactToTargetConnection=function(){return this.fireOutputToTarget(getRandomInt(-2e4,2e4))},window.CalculatingPatchNodeWdgt.prototype.doCalculation=function(){var ref;if(""!==this.textMorph.text)return this.evaluateString("@functionFromCompiledCode = "+this.textMorph.text),this.output=null!=(ref=this.functionFromCompiledCode)?ref.call(world,this.input1,this.input2,this.input3,this.input4):void 0,this.outputTextAreaText.setText(this.output+"")},window.CalculatingPatchNodeWdgt.prototype.stringSetters=function(menuEntriesStrings,functionNamesStrings){return[menuEntriesStrings,functionNamesStrings]=CalculatingPatchNodeWdgt.__super__.stringSetters.call(this,menuEntriesStrings,functionNamesStrings),menuEntriesStrings.push("bang!","in1","in2","in3","in4"),functionNamesStrings.push("bang","setInput1","setInput2","setInput3","setInput4"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.CalculatingPatchNodeWdgt.prototype.numericalSetters=function(menuEntriesStrings,functionNamesStrings){return[menuEntriesStrings,functionNamesStrings]=CalculatingPatchNodeWdgt.__super__.numericalSetters.call(this,menuEntriesStrings,functionNamesStrings),menuEntriesStrings.push("bang!","in1","in2","in3","in4"),functionNamesStrings.push("bang","setInput1","setInput2","setInput3","setInput4"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.CalculatingPatchNodeWdgt.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){return CalculatingPatchNodeWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),menu.addLine(),menu.addMenuItem("set target",!0,this,"openTargetSelector","select another morph\nwhose numerical property\nwill be controlled by this one")},window.CalculatingPatchNodeWdgt.prototype.buildAndConnectChildren=function(){return"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.tempPromptEntryField=new SimplePlainTextScrollPanelWdgt(this.defaultFormulaBoxContents,!1,5),this.tempPromptEntryField.disableDrops(),this.tempPromptEntryField.contents.disableDrops(),this.tempPromptEntryField.color=new Color(255,255,255),this.textMorph=this.tempPromptEntryField.textWdgt,this.textMorph.backgroundColor=new Color(0,0,0,0),this.textMorph.setFontName(nil,nil,this.textMorph.monoFontStack),this.textMorph.isEditable=!0,this.textMorph.enableSelecting(),this.add(this.tempPromptEntryField),this.outputTextArea=new SimplePlainTextScrollPanelWdgt("",!1,5),this.outputTextArea.disableDrops(),this.outputTextArea.contents.disableDrops(),this.outputTextArea.color=new Color(255,255,255),this.outputTextAreaText=this.outputTextArea.textWdgt,this.outputTextAreaText.backgroundColor=new Color(0,0,0,0),this.outputTextAreaText.setFontName(nil,nil,this.outputTextAreaText.monoFontStack),this.outputTextAreaText.isEditable=!1,this.add(this.outputTextArea),this.formulaTextBoxLabel=new StringMorph2("Formula",WorldMorph.preferencesAndSettings.textInButtonsFontSize),this.formulaTextBoxLabel.toggleHeaderLine(),this.add(this.formulaTextBoxLabel),this.outputTextBoxLabel=new StringMorph2("Output",WorldMorph.preferencesAndSettings.textInButtonsFontSize),this.outputTextBoxLabel.toggleHeaderLine(),this.add(this.outputTextBoxLabel),this.invalidateLayout()},window.CalculatingPatchNodeWdgt.prototype.doLayout=function(newBoundsForThisLayout){var availableHeight,text1Height,text2Height,textBottom;return window.recalculatingLayouts,this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(CalculatingPatchNodeWdgt.__super__.doLayout.apply(this,arguments),trackChanges.push(!1),availableHeight=this.height()-2*this.externalPadding-3*this.internalPadding-30,text1Height=Math.round(2*availableHeight/3),text2Height=Math.round(1*availableHeight/3),textBottom=this.top()+this.externalPadding+15+this.internalPadding+text1Height,this.formulaTextBoxLabel.parent===this&&(this.formulaTextBoxLabel.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.top()+this.externalPadding)),this.formulaTextBoxLabel.rawSetExtent(new Point(this.width()-2*this.externalPadding,15))),this.tempPromptEntryField.parent===this&&(this.tempPromptEntryField.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.top()+this.externalPadding+15+this.internalPadding)),this.tempPromptEntryField.rawSetExtent(new Point(this.width()-2*this.externalPadding,text1Height))),this.outputTextBoxLabel.parent===this&&(this.outputTextBoxLabel.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.tempPromptEntryField.bottom()+this.internalPadding)),this.outputTextBoxLabel.rawSetExtent(new Point(this.width()-2*this.externalPadding,15))),this.outputTextArea.parent===this&&(this.outputTextArea.fullRawMoveTo(new Point(this.left()+this.externalPadding,textBottom+this.internalPadding+15+this.internalPadding)),this.outputTextArea.rawSetExtent(new Point(this.width()-2*this.externalPadding,text2Height))),trackChanges.pop(),this.fullChanged(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted())},window.DiffingPatchNodeWdgt=function(defaultContents=""){this.defaultContents=defaultContents,DiffingPatchNodeWdgt.__super__.constructor.call(this,new Point(200,400)),this.buildAndConnectChildren(),this.input1="",this.input2="","function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.DiffingPatchNodeWdgt,"name",{value:"DiffingPatchNodeWdgt"}),window.DiffingPatchNodeWdgt.instances=[],window.DiffingPatchNodeWdgt.__super__=window.Widget.prototype,window.DiffingPatchNodeWdgt=extend(window.DiffingPatchNodeWdgt,window.Widget),window.DiffingPatchNodeWdgt.augmentWith(window.ControllerMixin,"DiffingPatchNodeWdgt"),window.DiffingPatchNodeWdgt.prototype.tempPromptEntryField=nil,window.DiffingPatchNodeWdgt.prototype.defaultContents=nil,window.DiffingPatchNodeWdgt.prototype.textMorph=nil,window.DiffingPatchNodeWdgt.prototype.output=nil,window.DiffingPatchNodeWdgt.prototype.input1=nil,window.DiffingPatchNodeWdgt.prototype.input2=nil,window.DiffingPatchNodeWdgt.prototype.setInput1IsConnected=!1,window.DiffingPatchNodeWdgt.prototype.setInput2IsConnected=!1,window.DiffingPatchNodeWdgt.prototype.setInput1HotIsConnected=!1,window.DiffingPatchNodeWdgt.prototype.setInput2HotConnected=!1,window.DiffingPatchNodeWdgt.prototype.input1connectionsCalculationToken=314,window.DiffingPatchNodeWdgt.prototype.input2connectionsCalculationToken=314,window.DiffingPatchNodeWdgt.prototype.externalPadding=0,window.DiffingPatchNodeWdgt.prototype.internalPadding=5,window.DiffingPatchNodeWdgt.prototype.colloquialName=function(){return"Diffing patch node"},window.DiffingPatchNodeWdgt.prototype.setInput1=function(newvalue,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.input1connectionsCalculationToken)return this.input1connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.input1=newvalue,this.updateTarget(this.input1connectionsCalculationToken)},window.DiffingPatchNodeWdgt.prototype.setInput2=function(newvalue,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.input2connectionsCalculationToken)return this.input2connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.input1=newvalue,this.updateTarget(this.input2connectionsCalculationToken)},window.DiffingPatchNodeWdgt.prototype.setInput1Hot=function(newvalue,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.input1=newvalue,this.updateTarget(this.connectionsCalculationToken,!1,!0)},window.DiffingPatchNodeWdgt.prototype.setInput2Hot=function(newvalue,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.input2=newvalue,this.updateTarget(this.connectionsCalculationToken,!1,!0)},window.DiffingPatchNodeWdgt.prototype.bang=function(newvalue,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.updateTarget(this.connectionsCalculationToken,!0)},window.DiffingPatchNodeWdgt.prototype.openTargetPropertySelector=function(ignored,ignored2,theTarget){var functionNamesStrings,i,j,menu,menuEntriesStrings,ref;for([menuEntriesStrings,functionNamesStrings]=theTarget.numericalSetters(),menu=new MenuMorph(this,!1,this,!0,!0,"choose target property:"),i=j=0,ref=menuEntriesStrings.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j)menu.addMenuItem(menuEntriesStrings[i],!0,this,"setTargetAndActionWithOnesPickedFromMenu",nil,nil,nil,nil,nil,theTarget,functionNamesStrings[i]);return 0===menuEntriesStrings.length&&(menu=new MenuMorph(this,!1,this,!0,!0,"no target properties available")),menu.popUpAtHand()},window.DiffingPatchNodeWdgt.prototype.updateTarget=function(tokenToCheckIfEqual,directFireViaBang,fireViaHotInput){var okToFire;(this.setInput1IsConnected||this.setInput2IsConnected||this.setInput1HotIsConnected||this.setInput2HotIsConnected)&&(okToFire=!0,this.setInput1IsConnected&&this.input1connectionsCalculationToken!==tokenToCheckIfEqual&&(okToFire=!1),this.setInput2IsConnected&&this.input2connectionsCalculationToken!==tokenToCheckIfEqual&&(okToFire=!1),!okToFire&&!fireViaHotInput||directFireViaBang||this.doCalculation(),(okToFire||fireViaHotInput||directFireViaBang)&&this.fireOutputToTarget(tokenToCheckIfEqual))},window.DiffingPatchNodeWdgt.prototype.fireOutputToTarget=function(calculationToken){if(this.connectionsCalculationToken=calculationToken,this.action&&""!==this.action)return this.target[this.action].call(this.target,this.output,nil,this.connectionsCalculationToken)},window.DiffingPatchNodeWdgt.prototype.reactToTargetConnection=function(){return this.fireOutputToTarget(getRandomInt(-2e4,2e4))},window.DiffingPatchNodeWdgt.prototype.doCalculation=function(){return this.output=this.formattedDiff(this.input1,this.input2),this.textMorph.setText(this.output)},window.DiffingPatchNodeWdgt.prototype.stringSetters=function(menuEntriesStrings,functionNamesStrings){return[menuEntriesStrings,functionNamesStrings]=DiffingPatchNodeWdgt.__super__.stringSetters.call(this,menuEntriesStrings,functionNamesStrings),menuEntriesStrings.push("bang!","in1","in2","in1 hot","in2 hot"),functionNamesStrings.push("bang","setInput1","setInput2","setInput1Hot","setInput2Hot"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.DiffingPatchNodeWdgt.prototype.numericalSetters=function(menuEntriesStrings,functionNamesStrings){return[menuEntriesStrings,functionNamesStrings]=DiffingPatchNodeWdgt.__super__.numericalSetters.call(this,menuEntriesStrings,functionNamesStrings),menuEntriesStrings.push("bang!","in1","in2","in1 hot","in2 hot"),functionNamesStrings.push("bang","setInput1","setInput2","setInput1Hot","setInput2Hot"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.DiffingPatchNodeWdgt.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){return DiffingPatchNodeWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),menu.addLine(),menu.addMenuItem("set target",!0,this,"openTargetSelector","select another morph\nwhose numerical property\nwill be controlled by this one")},window.DiffingPatchNodeWdgt.prototype.buildAndConnectChildren=function(){return"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.tempPromptEntryField=new SimplePlainTextScrollPanelWdgt(this.defaultContents,!1,5),this.tempPromptEntryField.disableDrops(),this.tempPromptEntryField.contents.disableDrops(),this.tempPromptEntryField.color=new Color(255,255,255),this.textMorph=this.tempPromptEntryField.textWdgt,this.textMorph.backgroundColor=new Color(0,0,0,0),this.textMorph.setFontName(nil,nil,this.textMorph.monoFontStack),this.textMorph.isEditable=!0,this.textMorph.enableSelecting(),this.add(this.tempPromptEntryField),this.invalidateLayout()},window.DiffingPatchNodeWdgt.prototype.doLayout=function(newBoundsForThisLayout){var textHeight;return window.recalculatingLayouts,this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(DiffingPatchNodeWdgt.__super__.doLayout.apply(this,arguments),trackChanges.push(!1),textHeight=this.height()-2*this.externalPadding,this.top()+this.externalPadding+textHeight,this.tempPromptEntryField.parent===this&&(this.tempPromptEntryField.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.top()+this.externalPadding)),this.tempPromptEntryField.rawSetExtent(new Point(this.width()-2*this.externalPadding,textHeight))),trackChanges.pop(),this.fullChanged(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted())},window.DiffingPatchNodeWdgt.prototype.diff=function(before,after){var i,j,k,l,lastRow,len,len1,len2,m,n,ohash,ref,ref1,subLength,subStartAfter,subStartBefore,thisRow,val;for(ohash={},i=l=0,len=before.length;l<len;i=++l)(val=before[i])in ohash||(ohash[val]=[]),ohash[val].push(i);for(lastRow=function(){var m,ref,results;for(results=[],i=m=0,ref=before.length;0<=ref?m<ref:m>ref;i=0<=ref?++m:--m)results.push(0);return results}(),subStartBefore=subStartAfter=subLength=0,j=m=0,len1=after.length;m<len1;j=++m){for(val=after[j],thisRow=function(){var n,ref,results;for(results=[],i=n=0,ref=before.length;0<=ref?n<ref:n>ref;i=0<=ref?++n:--n)results.push(0);return results}(),n=0,len2=(ref1=null!=(ref=ohash[val])?ref:[]).length;n<len2;n++)thisRow[k=ref1[n]]=1+(k&&lastRow[k-1]?1:0),thisRow[k]>subLength&&(subStartBefore=k-(subLength=thisRow[k])+1,subStartAfter=j-subLength+1);lastRow=thisRow}return 0===subLength?[].concat(before.length?[["-",before]]:[],after.length?[["+",after]]:[]):[].concat(this.diff(before.slice(0,subStartBefore),after.slice(0,subStartAfter)),[["=",after.slice(subStartAfter,subStartAfter+subLength)]],this.diff(before.slice(subStartBefore+subLength),after.slice(subStartAfter+subLength)))},window.DiffingPatchNodeWdgt.prototype.stringDiff=function(before,after){return this.diff(before.split(/[ ]+/),after.split(/[ ]+/))},window.DiffingPatchNodeWdgt.prototype.formattedDiff=function(before,after){var a,b,con;return con={"=":function(x){return x},"+":function(x){return"+("+x+")"},"-":function(x){return"-("+x+")"}},function(){var i,len,ref,results;for(results=[],i=0,len=(ref=this.stringDiff(before,after)).length;i<len;i++)[a,b]=ref[i],results.push(con[a](b.join(" ")));return results}.call(this).join(" ")},window.FanoutAppearance=function(morph){this.morph=morph,FanoutAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FanoutAppearance,"name",{value:"FanoutAppearance"}),window.FanoutAppearance.instances=[],window.FanoutAppearance.__super__=window.IconAppearance.prototype,window.FanoutAppearance=extend(window.FanoutAppearance,window.IconAppearance),window.FanoutAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),"rgb(184, 184, 184)",context.beginPath(),context.moveTo(51.38,22.81),context.lineTo(78.36,48.57),context.bezierCurveTo(79.09,49.3,79.09,50.47,78.36,51.2),context.lineTo(51.61,78.36),context.bezierCurveTo(50.89,79.09,49.71,79.09,48.98,78.36),context.lineTo(21.64,51.09),context.bezierCurveTo(20.91,50.37,20.91,49.19,21.64,48.47),context.bezierCurveTo(21.64,48.47,31.37,39.38,32.83,38.02),context.bezierCurveTo(31.58,36.83,31.47,36.71,30.73,36.01),context.bezierCurveTo(29.98,35.31,30.33,32.98,31.73,31.64),context.bezierCurveTo(33.12,30.29,35.61,30.27,36.3,30.64),context.bezierCurveTo(37,31,38.19,32.44,38.54,32.78),context.bezierCurveTo(38.98,32.35,48.75,22.81,48.75,22.81),context.bezierCurveTo(48.75,22.81,50.66,22.09,51.38,22.81),context.closePath(),context.moveTo(52.82,42.51),context.bezierCurveTo(52.82,45.15,52.82,49.97,52.82,49.97),context.bezierCurveTo(52.82,50.96,51.97,51.76,50.92,51.76),context.bezierCurveTo(50.92,51.76,44.65,51.76,42.2,51.76),context.bezierCurveTo(43,55.33,46.19,58,50,58),context.bezierCurveTo(54.42,58,58,54.42,58,50),context.bezierCurveTo(58,46.57,55.85,43.65,52.82,42.51),context.closePath(),context.fillStyle="rgb(184, 184, 184)",context.fill(),this.oval(context,37,37,26,26),context.strokeStyle=iconColorString,context.lineWidth=3.5,context.stroke(),context.beginPath(),context.moveTo(49.01,41.08),context.bezierCurveTo(48.33,41.08,47.78,41.6,47.78,42.23),context.lineTo(47.78,45.32),context.lineTo(35.8,33.92),context.bezierCurveTo(35.32,33.48,34.54,33.48,34.06,33.93),context.bezierCurveTo(33.58,34.37,33.58,35.1,34.06,35.55),context.lineTo(46.03,46.95),context.lineTo(42.71,46.95),context.bezierCurveTo(42.03,46.95,41.48,47.46,41.48,48.1),context.bezierCurveTo(41.48,48.73,42.03,49.25,42.71,49.25),context.lineTo(49.01,49.24),context.bezierCurveTo(49.7,49.24,50.25,48.73,50.25,48.09),context.lineTo(50.25,42.23),context.bezierCurveTo(50.25,41.6,49.7,41.08,49.01,41.08),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(45.6,30.47),context.bezierCurveTo(46,30.87,46.65,30.88,47.06,30.47),context.lineTo(49.02,28.51),context.lineTo(49.03,33.06),context.bezierCurveTo(49.03,33.63,49.49,34.09,50.06,34.09),context.bezierCurveTo(50.63,34.09,51.1,33.62,51.1,33.05),context.lineTo(51.09,28.51),context.lineTo(53.06,30.47),context.bezierCurveTo(53.46,30.87,54.12,30.87,54.52,30.47),context.bezierCurveTo(54.92,30.07,54.92,29.41,54.52,29.01),context.lineTo(50.79,25.29),context.bezierCurveTo(50.39,24.88,49.73,24.88,49.33,25.29),context.lineTo(45.6,29.01),context.bezierCurveTo(45.19,29.41,45.19,30.07,45.6,30.47),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(69.69,45.43),context.bezierCurveTo(69.28,45.83,69.28,46.48,69.69,46.89),context.lineTo(71.65,48.85),context.lineTo(67.1,48.85),context.bezierCurveTo(66.53,48.85,66.07,49.31,66.07,49.88),context.bezierCurveTo(66.07,50.45,66.53,50.92,67.1,50.92),context.lineTo(71.65,50.92),context.lineTo(69.69,52.88),context.bezierCurveTo(69.29,53.28,69.29,53.94,69.69,54.34),context.bezierCurveTo(70.09,54.74,70.75,54.74,71.15,54.34),context.lineTo(74.88,50.61),context.bezierCurveTo(75.28,50.21,75.28,49.56,74.88,49.15),context.lineTo(71.15,45.43),context.bezierCurveTo(70.75,45.02,70.09,45.02,69.69,45.43),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(54.76,69.7),context.bezierCurveTo(54.36,69.29,53.7,69.29,53.3,69.7),context.lineTo(51.33,71.66),context.lineTo(51.33,67.11),context.bezierCurveTo(51.33,66.54,50.87,66.08,50.3,66.08),context.bezierCurveTo(49.73,66.08,49.26,66.54,49.26,67.11),context.lineTo(49.26,71.66),context.lineTo(47.3,69.7),context.bezierCurveTo(46.9,69.29,46.24,69.3,45.84,69.7),context.bezierCurveTo(45.43,70.1,45.43,70.76,45.84,71.16),context.lineTo(49.57,74.88),context.bezierCurveTo(49.97,75.29,50.63,75.29,51.03,74.88),context.lineTo(54.76,71.16),context.bezierCurveTo(55.17,70.76,55.17,70.1,54.76,69.7),context.closePath(),context.fillStyle=iconColorString,context.fill(),context.beginPath(),context.moveTo(30.31,54.24),context.bezierCurveTo(30.72,53.83,30.72,53.18,30.31,52.78),context.lineTo(28.35,50.81),context.lineTo(32.9,50.81),context.bezierCurveTo(33.47,50.81,33.93,50.35,33.93,49.78),context.bezierCurveTo(33.93,49.21,33.47,48.75,32.9,48.74),context.lineTo(28.35,48.75),context.lineTo(30.31,46.79),context.bezierCurveTo(30.71,46.38,30.71,45.73,30.31,45.33),context.bezierCurveTo(29.91,44.92,29.25,44.92,28.85,45.33),context.lineTo(25.12,49.05),context.bezierCurveTo(24.72,49.45,24.72,50.11,25.12,50.51),context.lineTo(28.85,54.24),context.bezierCurveTo(29.25,54.64,29.91,54.64,30.31,54.24),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.FanoutPinAppearance=function(morph){this.morph=morph,FanoutPinAppearance.__super__.constructor.apply(this,arguments),this.preferredSize=new Point(100,100),this.specificationSize=new Point(100,100),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FanoutPinAppearance,"name",{value:"FanoutPinAppearance"}),window.FanoutPinAppearance.instances=[],window.FanoutPinAppearance.__super__=window.IconAppearance.prototype,window.FanoutPinAppearance=extend(window.FanoutPinAppearance,window.IconAppearance),window.FanoutPinAppearance.prototype.paintFunction=function(context){var iconColorString;return iconColorString=null!=this.ownColorInsteadOfWidgetColor?this.ownColorInsteadOfWidgetColor.toString():this.morph.color.toString(),"rgb(184, 184, 184)",context.beginPath(),context.moveTo(81.16,4),context.lineTo(19.84,4),context.lineTo(19.84,4),context.bezierCurveTo(11.09,4,4,11.09,4,19.84),context.lineTo(4,81.16),context.lineTo(4,81.16),context.bezierCurveTo(4,89.91,11.09,97,19.84,97),context.lineTo(81.16,97),context.lineTo(81.16,97),context.bezierCurveTo(89.91,97,97,89.91,97,81.16),context.lineTo(97,19.84),context.lineTo(97,19.84),context.bezierCurveTo(97,11.09,89.91,4,81.16,4),context.closePath(),context.fillStyle="rgb(184, 184, 184)",context.fill(),context.beginPath(),context.moveTo(78.82,7.72),context.lineTo(22.83,7.72),context.lineTo(22.83,7.72),context.bezierCurveTo(14.84,7.72,8.37,14.19,8.37,22.18),context.lineTo(8.37,78.17),context.lineTo(8.37,78.17),context.bezierCurveTo(8.37,86.16,14.84,92.63,22.83,92.63),context.lineTo(78.82,92.63),context.lineTo(78.82,92.63),context.bezierCurveTo(86.81,92.63,93.28,86.16,93.28,78.17),context.lineTo(93.28,22.18),context.lineTo(93.28,22.18),context.bezierCurveTo(93.28,14.19,86.81,7.72,78.82,7.72),context.closePath(),context.moveTo(85.39,78.17),context.lineTo(85.39,78.17),context.bezierCurveTo(85.39,81.8,82.45,84.74,78.82,84.74),context.lineTo(22.83,84.74),context.lineTo(22.83,84.74),context.bezierCurveTo(19.2,84.74,16.26,81.8,16.26,78.17),context.lineTo(16.26,22.18),context.lineTo(16.26,22.18),context.bezierCurveTo(16.26,18.55,19.2,15.61,22.83,15.61),context.lineTo(78.82,15.61),context.lineTo(78.82,15.61),context.bezierCurveTo(82.45,15.61,85.39,18.55,85.39,22.18),context.lineTo(85.39,78.17),context.closePath(),context.fillStyle=iconColorString,context.fill()},window.FanoutPinWdgt=function(color){this.color=color,FanoutPinWdgt.__super__.constructor.apply(this,arguments),this.appearance=new FanoutPinAppearance(this),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FanoutPinWdgt,"name",{value:"FanoutPinWdgt"}),window.FanoutPinWdgt.instances=[],window.FanoutPinWdgt.__super__=window.Widget.prototype,window.FanoutPinWdgt=extend(window.FanoutPinWdgt,window.Widget),window.FanoutPinWdgt.augmentWith(window.ControllerMixin,"FanoutPinWdgt"),window.FanoutPinWdgt.prototype.inputValue=nil,window.FanoutPinWdgt.prototype.target=nil,window.FanoutPinWdgt.prototype.action=nil,window.FanoutPinWdgt.prototype.setInput=function(newvalue,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.inputValue=newvalue,this.updateTarget()},window.FanoutPinWdgt.prototype.stringSetters=function(menuEntriesStrings,functionNamesStrings){return[menuEntriesStrings,functionNamesStrings]=FanoutPinWdgt.__super__.stringSetters.call(this,menuEntriesStrings,functionNamesStrings),menuEntriesStrings.push("bang!"),functionNamesStrings.push("bang"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.FanoutPinWdgt.prototype.numericalSetters=function(menuEntriesStrings,functionNamesStrings){return[menuEntriesStrings,functionNamesStrings]=FanoutPinWdgt.__super__.numericalSetters.call(this,menuEntriesStrings,functionNamesStrings),menuEntriesStrings.push("bang!"),functionNamesStrings.push("bang"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.FanoutPinWdgt.prototype.colorSetters=function(menuEntriesStrings,functionNamesStrings){return[menuEntriesStrings,functionNamesStrings]=FanoutPinWdgt.__super__.colorSetters.call(this,menuEntriesStrings,functionNamesStrings),menuEntriesStrings.push("bang!"),functionNamesStrings.push("bang"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.FanoutPinWdgt.prototype.bang=function(newvalue,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.updateTarget()},window.FanoutPinWdgt.prototype.updateTarget=function(){this.action&&""!==this.action&&this.target[this.action].call(this.target,this.inputValue,nil,this.connectionsCalculationToken)},window.FanoutPinWdgt.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){return FanoutPinWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),menu.addLine(),menu.addMenuItem("set target",!0,this,"openTargetSelector","choose another morph\nwhose color property\n will be controlled by this one")},window.FanoutPinWdgt.prototype.openTargetPropertySelector=function(ignored,ignored2,theTarget){var functionNamesStrings,i,j,menu,menuEntriesStrings,ref;for([menuEntriesStrings,functionNamesStrings]=theTarget.allSetters(),menu=new MenuMorph(this,!1,this,!0,!0,"choose target property:"),i=j=0,ref=menuEntriesStrings.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j)menu.addMenuItem(menuEntriesStrings[i],!0,this,"setTargetAndActionWithOnesPickedFromMenu",nil,nil,nil,nil,nil,theTarget,functionNamesStrings[i]);return 0===menuEntriesStrings.length&&(menu=new MenuMorph(this,!1,this,!0,!0,"no target properties available")),menu.popUpAtHand()},window.FanoutPinWdgt.prototype.reactToTargetConnection=function(){return this.parent.updateTarget()},window.FanoutWdgt=function(color){this.color=color,FanoutWdgt.__super__.constructor.apply(this,arguments),this.appearance=new FanoutAppearance(this),this.pinUp=new FanoutPinWdgt,this.pinDown=new FanoutPinWdgt,this.pinLeft=new FanoutPinWdgt,this.pinRight=new FanoutPinWdgt,this.add(this.pinUp),this.add(this.pinDown),this.add(this.pinLeft),this.add(this.pinRight),this.invalidateLayout(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.FanoutWdgt,"name",{value:"FanoutWdgt"}),window.FanoutWdgt.instances=[],window.FanoutWdgt.__super__=window.Widget.prototype,window.FanoutWdgt=extend(window.FanoutWdgt,window.Widget),window.FanoutWdgt.augmentWith(window.ControllerMixin,"FanoutWdgt"),window.FanoutWdgt.prototype.pinUp=nil,window.FanoutWdgt.prototype.pinDown=nil,window.FanoutWdgt.prototype.pinLeft=nil,window.FanoutWdgt.prototype.pinRight=nil,window.FanoutWdgt.prototype.inputValue=nil,window.FanoutWdgt.prototype.setInput=function(newvalue,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.inputValue=newvalue,this.updateTarget()},window.FanoutWdgt.prototype.updateTarget=function(){var i,len,ref,target;for(i=0,len=(ref=this.children).length;i<len;i++)(target=ref[i])instanceof FanoutPinWdgt&&target.setInput(this.inputValue,nil,this.connectionsCalculationToken)},window.FanoutWdgt.prototype.stringSetters=function(menuEntriesStrings,functionNamesStrings){return[menuEntriesStrings,functionNamesStrings]=FanoutWdgt.__super__.stringSetters.call(this,menuEntriesStrings,functionNamesStrings),menuEntriesStrings.push("input"),functionNamesStrings.push("setInput"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.FanoutWdgt.prototype.numericalSetters=function(menuEntriesStrings,functionNamesStrings){return[menuEntriesStrings,functionNamesStrings]=FanoutWdgt.__super__.numericalSetters.call(this,menuEntriesStrings,functionNamesStrings),menuEntriesStrings.push("input"),functionNamesStrings.push("setInput"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.FanoutWdgt.prototype.colorSetters=function(menuEntriesStrings,functionNamesStrings){return[menuEntriesStrings,functionNamesStrings]=FanoutWdgt.__super__.colorSetters.call(this,menuEntriesStrings,functionNamesStrings),menuEntriesStrings.push("input"),functionNamesStrings.push("setInput"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.FanoutWdgt.prototype.rawSetExtent=function(aPoint){return FanoutWdgt.__super__.rawSetExtent.apply(this,arguments),this.invalidateLayout()},window.FanoutWdgt.prototype.doLayout=function(newBoundsForThisLayout){var height,p0,pinSize,squareDim,width;return window.recalculatingLayouts,null==newBoundsForThisLayout&&(null!=this.desiredExtent?(newBoundsForThisLayout=this.desiredExtent,this.desiredExtent=nil):newBoundsForThisLayout=this.extent(),null!=this.desiredPosition?(newBoundsForThisLayout=new Rectangle(this.desiredPosition).setBoundsWidthAndHeight(newBoundsForThisLayout),this.desiredPosition=nil):newBoundsForThisLayout=new Rectangle(this.position()).setBoundsWidthAndHeight(newBoundsForThisLayout)),this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(this.rawSetBounds(newBoundsForThisLayout),trackChanges.push(!1),height=this.height(),width=this.width(),squareDim=Math.min(width,height),p0=this.topLeft(),p0=p0.add(new Point(width/2,height/2)),p0=p0.subtract(new Point(squareDim/2,squareDim/2)),pinSize=new Point(22*squareDim/100,22*squareDim/100).round(),this.pinUp.setExtent(pinSize),this.pinDown.setExtent(pinSize),this.pinLeft.setExtent(pinSize),this.pinRight.setExtent(pinSize),this.pinUp.fullRawMoveTo(p0.add(new Point(39*squareDim/100,1*squareDim/100)).round()),this.pinDown.fullRawMoveTo(p0.add(new Point(39*squareDim/100,77*squareDim/100)).round()),this.pinLeft.fullRawMoveTo(p0.add(new Point(1*squareDim/100,39*squareDim/100)).round()),this.pinRight.fullRawMoveTo(p0.add(new Point(77*squareDim/100,39*squareDim/100)).round()),trackChanges.pop(),this.fullChanged(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism?world.alignIDsOfNextMorphsInSystemTests():void 0)},window.RegexSubstitutionPatchNodeWdgt=function(defaultContents=""){this.defaultContents=defaultContents,RegexSubstitutionPatchNodeWdgt.__super__.constructor.call(this,new Point(200,400)),this.buildAndConnectChildren(),"function"==typeof this.registerThisInstance&&this.registerThisInstance()},Object.defineProperty(window.RegexSubstitutionPatchNodeWdgt,"name",{value:"RegexSubstitutionPatchNodeWdgt"}),window.RegexSubstitutionPatchNodeWdgt.instances=[],window.RegexSubstitutionPatchNodeWdgt.__super__=window.Widget.prototype,window.RegexSubstitutionPatchNodeWdgt=extend(window.RegexSubstitutionPatchNodeWdgt,window.Widget),window.RegexSubstitutionPatchNodeWdgt.augmentWith(window.ControllerMixin,"RegexSubstitutionPatchNodeWdgt"),window.RegexSubstitutionPatchNodeWdgt.prototype.regexEntryField=nil,window.RegexSubstitutionPatchNodeWdgt.prototype.defaultContents=nil,window.RegexSubstitutionPatchNodeWdgt.prototype.textMorph=nil,window.RegexSubstitutionPatchNodeWdgt.prototype.substitutionTextArea=nil,window.RegexSubstitutionPatchNodeWdgt.prototype.substitutionTextAreaText=nil,window.RegexSubstitutionPatchNodeWdgt.prototype.outputTextArea=nil,window.RegexSubstitutionPatchNodeWdgt.prototype.outputTextAreaText=nil,window.RegexSubstitutionPatchNodeWdgt.prototype.output=nil,window.RegexSubstitutionPatchNodeWdgt.prototype.input1=nil,window.RegexSubstitutionPatchNodeWdgt.prototype.input2=nil,window.RegexSubstitutionPatchNodeWdgt.prototype.input3=nil,window.RegexSubstitutionPatchNodeWdgt.prototype.input4=nil,window.RegexSubstitutionPatchNodeWdgt.prototype.setInput1IsConnected=!1,window.RegexSubstitutionPatchNodeWdgt.prototype.setInput2IsConnected=!1,window.RegexSubstitutionPatchNodeWdgt.prototype.setInput3IsConnected=!1,window.RegexSubstitutionPatchNodeWdgt.prototype.setInput4IsConnected=!1,window.RegexSubstitutionPatchNodeWdgt.prototype.input1connectionsCalculationToken=314,window.RegexSubstitutionPatchNodeWdgt.prototype.input2connectionsCalculationToken=314,window.RegexSubstitutionPatchNodeWdgt.prototype.input3connectionsCalculationToken=314,window.RegexSubstitutionPatchNodeWdgt.prototype.input4connectionsCalculationToken=314,window.RegexSubstitutionPatchNodeWdgt.prototype.externalPadding=0,window.RegexSubstitutionPatchNodeWdgt.prototype.internalPadding=5,window.RegexSubstitutionPatchNodeWdgt.prototype.colloquialName=function(){return"Regex subst. patch node"},window.RegexSubstitutionPatchNodeWdgt.prototype.setInput1=function(newvalue,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.input1connectionsCalculationToken)return this.input1connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.input1=newvalue,this.updateTarget(this.input1connectionsCalculationToken)},window.RegexSubstitutionPatchNodeWdgt.prototype.setInput2=function(newvalue,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.input2connectionsCalculationToken)return this.input2connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.input2=newvalue,this.updateTarget(this.input2connectionsCalculationToken)},window.RegexSubstitutionPatchNodeWdgt.prototype.setInput3=function(newvalue,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.input3connectionsCalculationToken)return this.input3connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.input3=newvalue,this.updateTarget(this.input3connectionsCalculationToken)},window.RegexSubstitutionPatchNodeWdgt.prototype.setInput4=function(newvalue,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.input4connectionsCalculationToken)return this.input4connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.input4=newvalue,this.updateTarget(this.input4connectionsCalculationToken)},window.RegexSubstitutionPatchNodeWdgt.prototype.bang=function(newvalue,ignored,connectionsCalculationToken,superCall){if(superCall||connectionsCalculationToken!==this.connectionsCalculationToken)return this.connectionsCalculationToken=null==connectionsCalculationToken?getRandomInt(-2e4,2e4):connectionsCalculationToken,this.updateTarget(this.connectionsCalculationToken,!0)},window.RegexSubstitutionPatchNodeWdgt.prototype.openTargetPropertySelector=function(ignored,ignored2,theTarget){var functionNamesStrings,i,j,menu,menuEntriesStrings,ref;for([menuEntriesStrings,functionNamesStrings]=theTarget.numericalSetters(),menu=new MenuMorph(this,!1,this,!0,!0,"choose target property:"),i=j=0,ref=menuEntriesStrings.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j)menu.addMenuItem(menuEntriesStrings[i],!0,this,"setTargetAndActionWithOnesPickedFromMenu",nil,nil,nil,nil,nil,theTarget,functionNamesStrings[i]);return 0===menuEntriesStrings.length&&(menu=new MenuMorph(this,!1,this,!0,!0,"no target properties available")),menu.popUpAtHand()},window.RegexSubstitutionPatchNodeWdgt.prototype.updateTarget=function(tokenToCheckIfEqual,directFireViaBang){var okToFire;(this.setInput1IsConnected||this.setInput2IsConnected||this.setInput3IsConnected||this.setInput4IsConnected)&&(okToFire=!0,this.setInput1IsConnected&&this.input1connectionsCalculationToken!==tokenToCheckIfEqual&&(okToFire=!1),this.setInput2IsConnected&&this.input2connectionsCalculationToken!==tokenToCheckIfEqual&&(okToFire=!1),this.setInput3IsConnected&&this.input3connectionsCalculationToken!==tokenToCheckIfEqual&&(okToFire=!1),this.setInput4IsConnected&&this.input4connectionsCalculationToken!==tokenToCheckIfEqual&&(okToFire=!1),okToFire&&!directFireViaBang&&this.doCalculation(),(okToFire||directFireViaBang)&&this.fireOutputToTarget(tokenToCheckIfEqual))},window.RegexSubstitutionPatchNodeWdgt.prototype.fireOutputToTarget=function(calculationToken){if(this.connectionsCalculationToken=calculationToken,this.action&&""!==this.action)return this.target[this.action].call(this.target,this.output,nil,this.connectionsCalculationToken)},window.RegexSubstitutionPatchNodeWdgt.prototype.reactToTargetConnection=function(){return this.fireOutputToTarget(getRandomInt(-2e4,2e4))},window.RegexSubstitutionPatchNodeWdgt.prototype.doCalculation=function(){var regParts,regexp;if(""!==this.textMorph.text)return regParts=this.textMorph.text.match(/^\/(.*?)\/([gim]*)$/),regexp=regParts?new RegExp(regParts[1],regParts[2]):new RegExp(this.textMorph.text),this.output=this.input1.replace(regexp,this.substitutionTextAreaText.text),this.outputTextAreaText.setText(this.output)},window.RegexSubstitutionPatchNodeWdgt.prototype.stringSetters=function(menuEntriesStrings,functionNamesStrings){return[menuEntriesStrings,functionNamesStrings]=RegexSubstitutionPatchNodeWdgt.__super__.stringSetters.call(this,menuEntriesStrings,functionNamesStrings),menuEntriesStrings.push("bang!","in1","in2","in3","in4"),functionNamesStrings.push("bang","setInput1","setInput2","setInput3","setInput4"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.RegexSubstitutionPatchNodeWdgt.prototype.numericalSetters=function(menuEntriesStrings,functionNamesStrings){return[menuEntriesStrings,functionNamesStrings]=RegexSubstitutionPatchNodeWdgt.__super__.numericalSetters.call(this,menuEntriesStrings,functionNamesStrings),menuEntriesStrings.push("bang!","in1","in2","in3","in4"),functionNamesStrings.push("bang","setInput1","setInput2","setInput3","setInput4"),this.deduplicateSettersAndSortByMenuEntryString(menuEntriesStrings,functionNamesStrings)},window.RegexSubstitutionPatchNodeWdgt.prototype.addMorphSpecificMenuEntries=function(morphOpeningThePopUp,menu){return RegexSubstitutionPatchNodeWdgt.__super__.addMorphSpecificMenuEntries.apply(this,arguments),menu.addLine(),menu.addMenuItem("set target",!0,this,"openTargetSelector","select another morph\nwhose numerical property\nwill be controlled by this one")},window.RegexSubstitutionPatchNodeWdgt.prototype.buildAndConnectChildren=function(){return"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.regexEntryField=new SimplePlainTextScrollPanelWdgt(this.defaultContents,!1,5),this.regexEntryField.disableDrops(),this.regexEntryField.contents.disableDrops(),this.regexEntryField.color=new Color(255,255,255),this.textMorph=this.regexEntryField.textWdgt,this.textMorph.backgroundColor=new Color(0,0,0,0),this.textMorph.setFontName(nil,nil,this.textMorph.monoFontStack),this.textMorph.isEditable=!0,this.textMorph.enableSelecting(),this.add(this.regexEntryField),this.substitutionTextArea=new SimplePlainTextScrollPanelWdgt(this.defaultContents,!1,5),this.substitutionTextArea.disableDrops(),this.substitutionTextArea.contents.disableDrops(),this.substitutionTextArea.color=new Color(255,255,255),this.substitutionTextAreaText=this.substitutionTextArea.textWdgt,this.substitutionTextAreaText.backgroundColor=new Color(0,0,0,0),this.substitutionTextAreaText.setFontName(nil,nil,this.substitutionTextAreaText.monoFontStack),this.substitutionTextAreaText.isEditable=!0,this.substitutionTextAreaText.enableSelecting(),this.add(this.substitutionTextArea),this.outputTextArea=new SimplePlainTextScrollPanelWdgt(this.defaultContents,!1,5),this.outputTextArea.disableDrops(),this.outputTextArea.contents.disableDrops(),this.outputTextArea.color=new Color(255,255,255),this.outputTextAreaText=this.outputTextArea.textWdgt,this.outputTextAreaText.backgroundColor=new Color(0,0,0,0),this.outputTextAreaText.setFontName(nil,nil,this.outputTextAreaText.monoFontStack),this.outputTextAreaText.isEditable=!1,this.add(this.outputTextArea),this.invalidateLayout()},window.RegexSubstitutionPatchNodeWdgt.prototype.doLayout=function(newBoundsForThisLayout){var availableHeight,text1Height,text2Height,text3Height;return window.recalculatingLayouts,this.isCollapsed()?(this.layoutIsValid=!0,void this.notifyChildrenThatParentHasReLayouted()):(RegexSubstitutionPatchNodeWdgt.__super__.doLayout.apply(this,arguments),trackChanges.push(!1),availableHeight=this.height()-2*this.externalPadding-2*this.internalPadding,text1Height=Math.round(1*availableHeight/4),text2Height=Math.round(1*availableHeight/4),text3Height=Math.round(2*availableHeight/4),this.top()+this.externalPadding+text1Height,this.regexEntryField.parent===this&&(this.regexEntryField.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.top()+this.externalPadding)),this.regexEntryField.rawSetExtent(new Point(this.width()-2*this.externalPadding,text1Height))),this.substitutionTextArea.parent===this&&(this.substitutionTextArea.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.regexEntryField.bottom()+this.internalPadding)),this.substitutionTextArea.rawSetExtent(new Point(this.width()-2*this.externalPadding,text2Height))),this.outputTextArea.parent===this&&(this.outputTextArea.fullRawMoveTo(new Point(this.left()+this.externalPadding,this.substitutionTextArea.bottom()+this.internalPadding)),this.outputTextArea.rawSetExtent(new Point(this.width()-2*this.externalPadding,text3Height))),trackChanges.pop(),this.fullChanged(),"undefined"!=typeof AutomatorRecorderAndPlayer&&null!==AutomatorRecorderAndPlayer&&AutomatorRecorderAndPlayer.state!==AutomatorRecorderAndPlayer.IDLE&&AutomatorRecorderAndPlayer.alignmentOfMorphIDsMechanism&&world.alignIDsOfNextMorphsInSystemTests(),this.layoutIsValid=!0,this.notifyChildrenThatParentHasReLayouted())};